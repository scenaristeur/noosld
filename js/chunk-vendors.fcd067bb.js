(self["webpackChunknoosld"]=self["webpackChunknoosld"]||[]).push([[998],{9662:function(t,e,n){var r=n(614),i=n(6330),o=TypeError;t.exports=function(t){if(r(t))return t;throw o(i(t)+" is not a function")}},6077:function(t,e,n){var r=n(614),i=String,o=TypeError;t.exports=function(t){if("object"==typeof t||r(t))return t;throw o("Can't set "+i(t)+" as a prototype")}},1223:function(t,e,n){var r=n(5112),i=n(30),o=n(3070).f,s=r("unscopables"),a=Array.prototype;void 0==a[s]&&o(a,s,{configurable:!0,value:i(null)}),t.exports=function(t){a[s][t]=!0}},5787:function(t,e,n){var r=n(7976),i=TypeError;t.exports=function(t,e){if(r(e,t))return t;throw i("Incorrect invocation")}},9670:function(t,e,n){var r=n(111),i=String,o=TypeError;t.exports=function(t){if(r(t))return t;throw o(i(t)+" is not an object")}},3013:function(t){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},260:function(t,e,n){"use strict";var r,i,o,s=n(3013),a=n(9781),l=n(7854),c=n(614),u=n(111),d=n(2597),h=n(648),f=n(6330),p=n(8880),m=n(8052),g=n(7045),v=n(7976),y=n(9518),b=n(7674),_=n(5112),w=n(9711),x=n(9909),S=x.enforce,E=x.get,M=l.Int8Array,T=M&&M.prototype,C=l.Uint8ClampedArray,A=C&&C.prototype,k=M&&y(M),O=T&&y(T),R=Object.prototype,P=l.TypeError,L=_("toStringTag"),D=w("TYPED_ARRAY_TAG"),I="TypedArrayConstructor",N=s&&!!b&&"Opera"!==h(l.opera),U=!1,F={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},B={BigInt64Array:8,BigUint64Array:8},V=function(t){if(!u(t))return!1;var e=h(t);return"DataView"===e||d(F,e)||d(B,e)},z=function(t){var e=y(t);if(u(e)){var n=E(e);return n&&d(n,I)?n[I]:z(e)}},j=function(t){if(!u(t))return!1;var e=h(t);return d(F,e)||d(B,e)},H=function(t){if(j(t))return t;throw P("Target is not a typed array")},W=function(t){if(c(t)&&(!b||v(k,t)))return t;throw P(f(t)+" is not a typed array constructor")},G=function(t,e,n,r){if(a){if(n)for(var i in F){var o=l[i];if(o&&d(o.prototype,t))try{delete o.prototype[t]}catch(s){try{o.prototype[t]=e}catch(c){}}}O[t]&&!n||m(O,t,n?e:N&&T[t]||e,r)}},$=function(t,e,n){var r,i;if(a){if(b){if(n)for(r in F)if(i=l[r],i&&d(i,t))try{delete i[t]}catch(o){}if(k[t]&&!n)return;try{return m(k,t,n?e:N&&k[t]||e)}catch(o){}}for(r in F)i=l[r],!i||i[t]&&!n||m(i,t,e)}};for(r in F)i=l[r],o=i&&i.prototype,o?S(o)[I]=i:N=!1;for(r in B)i=l[r],o=i&&i.prototype,o&&(S(o)[I]=i);if((!N||!c(k)||k===Function.prototype)&&(k=function(){throw P("Incorrect invocation")},N))for(r in F)l[r]&&b(l[r],k);if((!N||!O||O===R)&&(O=k.prototype,N))for(r in F)l[r]&&b(l[r].prototype,O);if(N&&y(A)!==O&&b(A,O),a&&!d(O,L))for(r in U=!0,g(O,L,{configurable:!0,get:function(){return u(this)?this[D]:void 0}}),F)l[r]&&p(l[r],D,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:N,TYPED_ARRAY_TAG:U&&D,aTypedArray:H,aTypedArrayConstructor:W,exportTypedArrayMethod:G,exportTypedArrayStaticMethod:$,getTypedArrayConstructor:z,isView:V,isTypedArray:j,TypedArray:k,TypedArrayPrototype:O}},7745:function(t,e,n){var r=n(6244);t.exports=function(t,e){var n=0,i=r(e),o=new t(i);while(i>n)o[n]=e[n++];return o}},1318:function(t,e,n){var r=n(5656),i=n(1400),o=n(6244),s=function(t){return function(e,n,s){var a,l=r(e),c=o(l),u=i(s,c);if(t&&n!=n){while(c>u)if(a=l[u++],a!=a)return!0}else for(;c>u;u++)if((t||u in l)&&l[u]===n)return t||u||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},9671:function(t,e,n){var r=n(9974),i=n(8361),o=n(7908),s=n(6244),a=function(t){var e=1==t;return function(n,a,l){var c,u,d=o(n),h=i(d),f=r(a,l),p=s(h);while(p-- >0)if(c=h[p],u=f(c,p,d),u)switch(t){case 0:return c;case 1:return p}return e?-1:void 0}};t.exports={findLast:a(0),findLastIndex:a(1)}},3658:function(t,e,n){"use strict";var r=n(9781),i=n(3157),o=TypeError,s=Object.getOwnPropertyDescriptor,a=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=a?function(t,e){if(i(t)&&!s(t,"length").writable)throw o("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},1843:function(t,e,n){var r=n(6244);t.exports=function(t,e){for(var n=r(t),i=new e(n),o=0;o<n;o++)i[o]=t[n-o-1];return i}},1572:function(t,e,n){var r=n(6244),i=n(9303),o=RangeError;t.exports=function(t,e,n,s){var a=r(t),l=i(n),c=l<0?a+l:l;if(c>=a||c<0)throw o("Incorrect index");for(var u=new e(a),d=0;d<a;d++)u[d]=d===c?s:t[d];return u}},4326:function(t,e,n){var r=n(1702),i=r({}.toString),o=r("".slice);t.exports=function(t){return o(i(t),8,-1)}},648:function(t,e,n){var r=n(1694),i=n(614),o=n(4326),s=n(5112),a=s("toStringTag"),l=Object,c="Arguments"==o(function(){return arguments}()),u=function(t,e){try{return t[e]}catch(n){}};t.exports=r?o:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=u(e=l(t),a))?n:c?o(e):"Object"==(r=o(e))&&i(e.callee)?"Arguments":r}},9920:function(t,e,n){var r=n(2597),i=n(3887),o=n(1236),s=n(3070);t.exports=function(t,e,n){for(var a=i(e),l=s.f,c=o.f,u=0;u<a.length;u++){var d=a[u];r(t,d)||n&&r(n,d)||l(t,d,c(e,d))}}},8544:function(t,e,n){var r=n(7293);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},8880:function(t,e,n){var r=n(9781),i=n(3070),o=n(9114);t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},9114:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},7045:function(t,e,n){var r=n(6339),i=n(3070);t.exports=function(t,e,n){return n.get&&r(n.get,e,{getter:!0}),n.set&&r(n.set,e,{setter:!0}),i.f(t,e,n)}},8052:function(t,e,n){var r=n(614),i=n(3070),o=n(6339),s=n(3072);t.exports=function(t,e,n,a){a||(a={});var l=a.enumerable,c=void 0!==a.name?a.name:e;if(r(n)&&o(n,c,a),a.global)l?t[e]=n:s(e,n);else{try{a.unsafe?t[e]&&(l=!0):delete t[e]}catch(u){}l?t[e]=n:i.f(t,e,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},3072:function(t,e,n){var r=n(7854),i=Object.defineProperty;t.exports=function(t,e){try{i(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},9781:function(t,e,n){var r=n(7293);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:function(t){var e="object"==typeof document&&document.all,n="undefined"==typeof e&&void 0!==e;t.exports={all:e,IS_HTMLDDA:n}},317:function(t,e,n){var r=n(7854),i=n(111),o=r.document,s=i(o)&&i(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},7207:function(t){var e=TypeError,n=9007199254740991;t.exports=function(t){if(t>n)throw e("Maximum allowed index exceeded");return t}},3678:function(t){t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},8113:function(t){t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7392:function(t,e,n){var r,i,o=n(7854),s=n(8113),a=o.process,l=o.Deno,c=a&&a.versions||l&&l.version,u=c&&c.v8;u&&(r=u.split("."),i=r[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&s&&(r=s.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/),r&&(i=+r[1]))),t.exports=i},748:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},1060:function(t,e,n){var r=n(1702),i=Error,o=r("".replace),s=function(t){return String(i(t).stack)}("zxcasd"),a=/\n\s*at [^:]*:[^\n]*/,l=a.test(s);t.exports=function(t,e){if(l&&"string"==typeof t&&!i.prepareStackTrace)while(e--)t=o(t,a,"");return t}},5392:function(t,e,n){var r=n(8880),i=n(1060),o=n(2914),s=Error.captureStackTrace;t.exports=function(t,e,n,a){o&&(s?s(t,e):r(t,"stack",i(n,a)))}},2914:function(t,e,n){var r=n(7293),i=n(9114);t.exports=!r((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",i(1,7)),7!==t.stack)}))},2109:function(t,e,n){var r=n(7854),i=n(1236).f,o=n(8880),s=n(8052),a=n(3072),l=n(9920),c=n(4705);t.exports=function(t,e){var n,u,d,h,f,p,m=t.target,g=t.global,v=t.stat;if(u=g?r:v?r[m]||a(m,{}):(r[m]||{}).prototype,u)for(d in e){if(f=e[d],t.dontCallGetSet?(p=i(u,d),h=p&&p.value):h=u[d],n=c(g?d:m+(v?".":"#")+d,t.forced),!n&&void 0!==h){if(typeof f==typeof h)continue;l(f,h)}(t.sham||h&&h.sham)&&o(f,"sham",!0),s(u,d,f,t)}}},7293:function(t){t.exports=function(t){try{return!!t()}catch(e){return!0}}},2104:function(t,e,n){var r=n(4374),i=Function.prototype,o=i.apply,s=i.call;t.exports="object"==typeof Reflect&&Reflect.apply||(r?s.bind(o):function(){return s.apply(o,arguments)})},9974:function(t,e,n){var r=n(1470),i=n(9662),o=n(4374),s=r(r.bind);t.exports=function(t,e){return i(t),void 0===e?t:o?s(t,e):function(){return t.apply(e,arguments)}}},4374:function(t,e,n){var r=n(7293);t.exports=!r((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},6916:function(t,e,n){var r=n(4374),i=Function.prototype.call;t.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},6530:function(t,e,n){var r=n(9781),i=n(2597),o=Function.prototype,s=r&&Object.getOwnPropertyDescriptor,a=i(o,"name"),l=a&&"something"===function(){}.name,c=a&&(!r||r&&s(o,"name").configurable);t.exports={EXISTS:a,PROPER:l,CONFIGURABLE:c}},5668:function(t,e,n){var r=n(1702),i=n(9662);t.exports=function(t,e,n){try{return r(i(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(o){}}},1470:function(t,e,n){var r=n(4326),i=n(1702);t.exports=function(t){if("Function"===r(t))return i(t)}},1702:function(t,e,n){var r=n(4374),i=Function.prototype,o=i.call,s=r&&i.bind.bind(o,o);t.exports=r?s:function(t){return function(){return o.apply(t,arguments)}}},5005:function(t,e,n){var r=n(7854),i=n(614),o=function(t){return i(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?o(r[t]):r[t]&&r[t][e]}},8173:function(t,e,n){var r=n(9662),i=n(8554);t.exports=function(t,e){var n=t[e];return i(n)?void 0:r(n)}},7854:function(t,e,n){var r=function(t){return t&&t.Math==Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||this||Function("return this")()},2597:function(t,e,n){var r=n(1702),i=n(7908),o=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return o(i(t),e)}},3501:function(t){t.exports={}},490:function(t,e,n){var r=n(5005);t.exports=r("document","documentElement")},4664:function(t,e,n){var r=n(9781),i=n(7293),o=n(317);t.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},8361:function(t,e,n){var r=n(1702),i=n(7293),o=n(4326),s=Object,a=r("".split);t.exports=i((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"==o(t)?a(t,""):s(t)}:s},9587:function(t,e,n){var r=n(614),i=n(111),o=n(7674);t.exports=function(t,e,n){var s,a;return o&&r(s=e.constructor)&&s!==n&&i(a=s.prototype)&&a!==n.prototype&&o(t,a),t}},2788:function(t,e,n){var r=n(1702),i=n(614),o=n(5465),s=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(t){return s(t)}),t.exports=o.inspectSource},8340:function(t,e,n){var r=n(111),i=n(8880);t.exports=function(t,e){r(e)&&"cause"in e&&i(t,"cause",e.cause)}},9909:function(t,e,n){var r,i,o,s=n(4811),a=n(7854),l=n(111),c=n(8880),u=n(2597),d=n(5465),h=n(6200),f=n(3501),p="Object already initialized",m=a.TypeError,g=a.WeakMap,v=function(t){return o(t)?i(t):r(t,{})},y=function(t){return function(e){var n;if(!l(e)||(n=i(e)).type!==t)throw m("Incompatible receiver, "+t+" required");return n}};if(s||d.state){var b=d.state||(d.state=new g);b.get=b.get,b.has=b.has,b.set=b.set,r=function(t,e){if(b.has(t))throw m(p);return e.facade=t,b.set(t,e),e},i=function(t){return b.get(t)||{}},o=function(t){return b.has(t)}}else{var _=h("state");f[_]=!0,r=function(t,e){if(u(t,_))throw m(p);return e.facade=t,c(t,_,e),e},i=function(t){return u(t,_)?t[_]:{}},o=function(t){return u(t,_)}}t.exports={set:r,get:i,has:o,enforce:v,getterFor:y}},3157:function(t,e,n){var r=n(4326);t.exports=Array.isArray||function(t){return"Array"==r(t)}},4067:function(t,e,n){var r=n(648);t.exports=function(t){var e=r(t);return"BigInt64Array"==e||"BigUint64Array"==e}},614:function(t,e,n){var r=n(4154),i=r.all;t.exports=r.IS_HTMLDDA?function(t){return"function"==typeof t||t===i}:function(t){return"function"==typeof t}},4705:function(t,e,n){var r=n(7293),i=n(614),o=/#|\.prototype\./,s=function(t,e){var n=l[a(t)];return n==u||n!=c&&(i(e)?r(e):!!e)},a=s.normalize=function(t){return String(t).replace(o,".").toLowerCase()},l=s.data={},c=s.NATIVE="N",u=s.POLYFILL="P";t.exports=s},8554:function(t){t.exports=function(t){return null===t||void 0===t}},111:function(t,e,n){var r=n(614),i=n(4154),o=i.all;t.exports=i.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:r(t)||t===o}:function(t){return"object"==typeof t?null!==t:r(t)}},1913:function(t){t.exports=!1},2190:function(t,e,n){var r=n(5005),i=n(614),o=n(7976),s=n(3307),a=Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return i(e)&&o(e.prototype,a(t))}},6244:function(t,e,n){var r=n(7466);t.exports=function(t){return r(t.length)}},6339:function(t,e,n){var r=n(1702),i=n(7293),o=n(614),s=n(2597),a=n(9781),l=n(6530).CONFIGURABLE,c=n(2788),u=n(9909),d=u.enforce,h=u.get,f=String,p=Object.defineProperty,m=r("".slice),g=r("".replace),v=r([].join),y=a&&!i((function(){return 8!==p((function(){}),"length",{value:8}).length})),b=String(String).split("String"),_=t.exports=function(t,e,n){"Symbol("===m(f(e),0,7)&&(e="["+g(f(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!s(t,"name")||l&&t.name!==e)&&(a?p(t,"name",{value:e,configurable:!0}):t.name=e),y&&n&&s(n,"arity")&&t.length!==n.arity&&p(t,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?a&&p(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(i){}var r=d(t);return s(r,"source")||(r.source=v(b,"string"==typeof e?e:"")),t};Function.prototype.toString=_((function(){return o(this)&&h(this).source||c(this)}),"toString")},4758:function(t){var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var r=+t;return(r>0?n:e)(r)}},6277:function(t,e,n){var r=n(1340);t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:r(t)}},30:function(t,e,n){var r,i=n(9670),o=n(6048),s=n(748),a=n(3501),l=n(490),c=n(317),u=n(6200),d=">",h="<",f="prototype",p="script",m=u("IE_PROTO"),g=function(){},v=function(t){return h+p+d+t+h+"/"+p+d},y=function(t){t.write(v("")),t.close();var e=t.parentWindow.Object;return t=null,e},b=function(){var t,e=c("iframe"),n="java"+p+":";return e.style.display="none",l.appendChild(e),e.src=String(n),t=e.contentWindow.document,t.open(),t.write(v("document.F=Object")),t.close(),t.F},_=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}_="undefined"!=typeof document?document.domain&&r?y(r):b():y(r);var t=s.length;while(t--)delete _[f][s[t]];return _()};a[m]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(g[f]=i(t),n=new g,g[f]=null,n[m]=t):n=_(),void 0===e?n:o.f(n,e)}},6048:function(t,e,n){var r=n(9781),i=n(3353),o=n(3070),s=n(9670),a=n(5656),l=n(1956);e.f=r&&!i?Object.defineProperties:function(t,e){s(t);var n,r=a(e),i=l(e),c=i.length,u=0;while(c>u)o.f(t,n=i[u++],r[n]);return t}},3070:function(t,e,n){var r=n(9781),i=n(4664),o=n(3353),s=n(9670),a=n(4948),l=TypeError,c=Object.defineProperty,u=Object.getOwnPropertyDescriptor,d="enumerable",h="configurable",f="writable";e.f=r?o?function(t,e,n){if(s(t),e=a(e),s(n),"function"===typeof t&&"prototype"===e&&"value"in n&&f in n&&!n[f]){var r=u(t,e);r&&r[f]&&(t[e]=n.value,n={configurable:h in n?n[h]:r[h],enumerable:d in n?n[d]:r[d],writable:!1})}return c(t,e,n)}:c:function(t,e,n){if(s(t),e=a(e),s(n),i)try{return c(t,e,n)}catch(r){}if("get"in n||"set"in n)throw l("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},1236:function(t,e,n){var r=n(9781),i=n(6916),o=n(5296),s=n(9114),a=n(5656),l=n(4948),c=n(2597),u=n(4664),d=Object.getOwnPropertyDescriptor;e.f=r?d:function(t,e){if(t=a(t),e=l(e),u)try{return d(t,e)}catch(n){}if(c(t,e))return s(!i(o.f,t,e),t[e])}},8006:function(t,e,n){var r=n(6324),i=n(748),o=i.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},5181:function(t,e){e.f=Object.getOwnPropertySymbols},9518:function(t,e,n){var r=n(2597),i=n(614),o=n(7908),s=n(6200),a=n(8544),l=s("IE_PROTO"),c=Object,u=c.prototype;t.exports=a?c.getPrototypeOf:function(t){var e=o(t);if(r(e,l))return e[l];var n=e.constructor;return i(n)&&e instanceof n?n.prototype:e instanceof c?u:null}},7976:function(t,e,n){var r=n(1702);t.exports=r({}.isPrototypeOf)},6324:function(t,e,n){var r=n(1702),i=n(2597),o=n(5656),s=n(1318).indexOf,a=n(3501),l=r([].push);t.exports=function(t,e){var n,r=o(t),c=0,u=[];for(n in r)!i(a,n)&&i(r,n)&&l(u,n);while(e.length>c)i(r,n=e[c++])&&(~s(u,n)||l(u,n));return u}},1956:function(t,e,n){var r=n(6324),i=n(748);t.exports=Object.keys||function(t){return r(t,i)}},5296:function(t,e){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);e.f=i?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},7674:function(t,e,n){var r=n(5668),i=n(9670),o=n(6077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=r(Object.prototype,"__proto__","set"),t(n,[]),e=n instanceof Array}catch(s){}return function(n,r){return i(n),o(r),e?t(n,r):n.__proto__=r,n}}():void 0)},2140:function(t,e,n){var r=n(6916),i=n(614),o=n(111),s=TypeError;t.exports=function(t,e){var n,a;if("string"===e&&i(n=t.toString)&&!o(a=r(n,t)))return a;if(i(n=t.valueOf)&&!o(a=r(n,t)))return a;if("string"!==e&&i(n=t.toString)&&!o(a=r(n,t)))return a;throw s("Can't convert object to primitive value")}},3887:function(t,e,n){var r=n(5005),i=n(1702),o=n(8006),s=n(5181),a=n(9670),l=i([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=o.f(a(t)),n=s.f;return n?l(e,n(t)):e}},2626:function(t,e,n){var r=n(3070).f;t.exports=function(t,e,n){n in t||r(t,n,{configurable:!0,get:function(){return e[n]},set:function(t){e[n]=t}})}},4488:function(t,e,n){var r=n(8554),i=TypeError;t.exports=function(t){if(r(t))throw i("Can't call method on "+t);return t}},6200:function(t,e,n){var r=n(2309),i=n(9711),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},5465:function(t,e,n){var r=n(7854),i=n(3072),o="__core-js_shared__",s=r[o]||i(o,{});t.exports=s},2309:function(t,e,n){var r=n(1913),i=n(5465);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.31.0",mode:r?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.31.0/LICENSE",source:"https://github.com/zloirock/core-js"})},6293:function(t,e,n){var r=n(7392),i=n(7293),o=n(7854),s=o.String;t.exports=!!Object.getOwnPropertySymbols&&!i((function(){var t=Symbol();return!s(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},1400:function(t,e,n){var r=n(9303),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},4599:function(t,e,n){var r=n(7593),i=TypeError;t.exports=function(t){var e=r(t,"number");if("number"==typeof e)throw i("Can't convert number to bigint");return BigInt(e)}},5656:function(t,e,n){var r=n(8361),i=n(4488);t.exports=function(t){return r(i(t))}},9303:function(t,e,n){var r=n(4758);t.exports=function(t){var e=+t;return e!==e||0===e?0:r(e)}},7466:function(t,e,n){var r=n(9303),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},7908:function(t,e,n){var r=n(4488),i=Object;t.exports=function(t){return i(r(t))}},2452:function(t,e,n){var r=n(3002),i=RangeError;t.exports=function(t,e){var n=r(t);if(n%e)throw i("Wrong offset");return n}},3002:function(t,e,n){var r=n(9303),i=RangeError;t.exports=function(t){var e=r(t);if(e<0)throw i("The argument can't be less than 0");return e}},7593:function(t,e,n){var r=n(6916),i=n(111),o=n(2190),s=n(8173),a=n(2140),l=n(5112),c=TypeError,u=l("toPrimitive");t.exports=function(t,e){if(!i(t)||o(t))return t;var n,l=s(t,u);if(l){if(void 0===e&&(e="default"),n=r(l,t,e),!i(n)||o(n))return n;throw c("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},4948:function(t,e,n){var r=n(7593),i=n(2190);t.exports=function(t){var e=r(t,"string");return i(e)?e:e+""}},1694:function(t,e,n){var r=n(5112),i=r("toStringTag"),o={};o[i]="z",t.exports="[object z]"===String(o)},1340:function(t,e,n){var r=n(648),i=String;t.exports=function(t){if("Symbol"===r(t))throw TypeError("Cannot convert a Symbol value to a string");return i(t)}},6330:function(t){var e=String;t.exports=function(t){try{return e(t)}catch(n){return"Object"}}},9711:function(t,e,n){var r=n(1702),i=0,o=Math.random(),s=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++i+o,36)}},3307:function(t,e,n){var r=n(6293);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(t,e,n){var r=n(9781),i=n(7293);t.exports=r&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},4811:function(t,e,n){var r=n(7854),i=n(614),o=r.WeakMap;t.exports=i(o)&&/native code/.test(String(o))},5112:function(t,e,n){var r=n(7854),i=n(2309),o=n(2597),s=n(9711),a=n(6293),l=n(3307),c=r.Symbol,u=i("wks"),d=l?c["for"]||c:c&&c.withoutSetter||s;t.exports=function(t){return o(u,t)||(u[t]=a&&o(c,t)?c[t]:d("Symbol."+t)),u[t]}},9191:function(t,e,n){"use strict";var r=n(5005),i=n(2597),o=n(8880),s=n(7976),a=n(7674),l=n(9920),c=n(2626),u=n(9587),d=n(6277),h=n(8340),f=n(5392),p=n(9781),m=n(1913);t.exports=function(t,e,n,g){var v="stackTraceLimit",y=g?2:1,b=t.split("."),_=b[b.length-1],w=r.apply(null,b);if(w){var x=w.prototype;if(!m&&i(x,"cause")&&delete x.cause,!n)return w;var S=r("Error"),E=e((function(t,e){var n=d(g?e:t,void 0),r=g?new w(t):new w;return void 0!==n&&o(r,"message",n),f(r,E,r.stack,2),this&&s(x,this)&&u(r,this,E),arguments.length>y&&h(r,arguments[y]),r}));if(E.prototype=x,"Error"!==_?a?a(E,S):l(E,S,{name:!0}):p&&v in w&&(c(E,w,v),c(E,w,"prepareStackTrace")),l(E,w),!m)try{x.name!==_&&o(x,"name",_),x.constructor=E}catch(M){}return E}}},2262:function(t,e,n){"use strict";var r=n(2109),i=n(7908),o=n(6244),s=n(9303),a=n(1223);r({target:"Array",proto:!0},{at:function(t){var e=i(this),n=o(e),r=s(t),a=r>=0?r:n+r;return a<0||a>=n?void 0:e[a]}}),a("at")},7658:function(t,e,n){"use strict";var r=n(2109),i=n(7908),o=n(6244),s=n(3658),a=n(7207),l=n(7293),c=l((function(){return 4294967297!==[].push.call({length:4294967296},1)})),u=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},d=c||!u();r({target:"Array",proto:!0,arity:1,forced:d},{push:function(t){var e=i(this),n=o(e),r=arguments.length;a(n+r);for(var l=0;l<r;l++)e[n]=arguments[l],n++;return s(e,n),n}})},1703:function(t,e,n){var r=n(2109),i=n(7854),o=n(2104),s=n(9191),a="WebAssembly",l=i[a],c=7!==Error("e",{cause:7}).cause,u=function(t,e){var n={};n[t]=s(t,e,c),r({global:!0,constructor:!0,arity:1,forced:c},n)},d=function(t,e){if(l&&l[t]){var n={};n[t]=s(a+"."+t,e,c),r({target:a,stat:!0,constructor:!0,arity:1,forced:c},n)}};u("Error",(function(t){return function(e){return o(t,this,arguments)}})),u("EvalError",(function(t){return function(e){return o(t,this,arguments)}})),u("RangeError",(function(t){return function(e){return o(t,this,arguments)}})),u("ReferenceError",(function(t){return function(e){return o(t,this,arguments)}})),u("SyntaxError",(function(t){return function(e){return o(t,this,arguments)}})),u("TypeError",(function(t){return function(e){return o(t,this,arguments)}})),u("URIError",(function(t){return function(e){return o(t,this,arguments)}})),d("CompileError",(function(t){return function(e){return o(t,this,arguments)}})),d("LinkError",(function(t){return function(e){return o(t,this,arguments)}})),d("RuntimeError",(function(t){return function(e){return o(t,this,arguments)}}))},4506:function(t,e,n){"use strict";var r=n(2109),i=n(1702),o=n(4488),s=n(9303),a=n(1340),l=n(7293),c=i("".charAt),u=l((function(){return"\ud842"!=="𠮷".at(-2)}));r({target:"String",proto:!0,forced:u},{at:function(t){var e=a(o(this)),n=e.length,r=s(t),i=r>=0?r:n+r;return i<0||i>=n?void 0:c(e,i)}})},8675:function(t,e,n){"use strict";var r=n(260),i=n(6244),o=n(9303),s=r.aTypedArray,a=r.exportTypedArrayMethod;a("at",(function(t){var e=s(this),n=i(e),r=o(t),a=r>=0?r:n+r;return a<0||a>=n?void 0:e[a]}))},4590:function(t,e,n){"use strict";var r=n(260),i=n(9671).findLastIndex,o=r.aTypedArray,s=r.exportTypedArrayMethod;s("findLastIndex",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},3408:function(t,e,n){"use strict";var r=n(260),i=n(9671).findLast,o=r.aTypedArray,s=r.exportTypedArrayMethod;s("findLast",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},3462:function(t,e,n){"use strict";var r=n(7854),i=n(6916),o=n(260),s=n(6244),a=n(2452),l=n(7908),c=n(7293),u=r.RangeError,d=r.Int8Array,h=d&&d.prototype,f=h&&h.set,p=o.aTypedArray,m=o.exportTypedArrayMethod,g=!c((function(){var t=new Uint8ClampedArray(2);return i(f,t,{length:1,0:3},1),3!==t[1]})),v=g&&o.NATIVE_ARRAY_BUFFER_VIEWS&&c((function(){var t=new d(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));m("set",(function(t){p(this);var e=a(arguments.length>1?arguments[1]:void 0,1),n=l(t);if(g)return i(f,this,n,e);var r=this.length,o=s(n),c=0;if(o+e>r)throw u("Wrong length");while(c<o)this[e+c]=n[c++]}),!g||v)},1439:function(t,e,n){"use strict";var r=n(1843),i=n(260),o=i.aTypedArray,s=i.exportTypedArrayMethod,a=i.getTypedArrayConstructor;s("toReversed",(function(){return r(o(this),a(this))}))},7585:function(t,e,n){"use strict";var r=n(260),i=n(1702),o=n(9662),s=n(7745),a=r.aTypedArray,l=r.getTypedArrayConstructor,c=r.exportTypedArrayMethod,u=i(r.TypedArrayPrototype.sort);c("toSorted",(function(t){void 0!==t&&o(t);var e=a(this),n=s(l(e),e);return u(n,t)}))},5315:function(t,e,n){"use strict";var r=n(1572),i=n(260),o=n(4067),s=n(9303),a=n(4599),l=i.aTypedArray,c=i.getTypedArrayConstructor,u=i.exportTypedArrayMethod,d=!!function(){try{new Int8Array(1)["with"](2,{valueOf:function(){throw 8}})}catch(t){return 8===t}}();u("with",{with:function(t,e){var n=l(this),i=s(t),u=o(n)?a(e):+e;return r(n,c(n),i,u)}}["with"],!d)},2801:function(t,e,n){"use strict";var r=n(2109),i=n(7854),o=n(5005),s=n(9114),a=n(3070).f,l=n(2597),c=n(5787),u=n(9587),d=n(6277),h=n(3678),f=n(1060),p=n(9781),m=n(1913),g="DOMException",v=o("Error"),y=o(g),b=function(){c(this,_);var t=arguments.length,e=d(t<1?void 0:arguments[0]),n=d(t<2?void 0:arguments[1],"Error"),r=new y(e,n),i=v(e);return i.name=g,a(r,"stack",s(1,f(i.stack,1))),u(r,this,b),r},_=b.prototype=y.prototype,w="stack"in v(g),x="stack"in new y(1,2),S=y&&p&&Object.getOwnPropertyDescriptor(i,g),E=!!S&&!(S.writable&&S.configurable),M=w&&!E&&!x;r({global:!0,constructor:!0,forced:m||M},{DOMException:M?b:y});var T=o(g),C=T.prototype;if(C.constructor!==T)for(var A in m||a(C,"constructor",s(1,T)),h)if(l(h,A)){var k=h[A],O=k.s;l(T,O)||a(T,O,s(6,k.c))}},455:function(){},8106:function(t,e,n){"use strict";n.d(e,{fi:function(){return C},kZ:function(){return T}});n(7658);var r=n(5498),i=n(3957),o=n(1504),s=n(9467);function a(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function l(t){return t!==(0,o.Z)(t)&&(0,s.Re)(t)?a(t):(0,i.Z)(t)}var c=n(8706),u=n(4214),d=n(5254),h=n(6127),f=n(9267);function p(t){var e=t.getBoundingClientRect(),n=(0,f.NM)(e.width)/t.offsetWidth||1,r=(0,f.NM)(e.height)/t.offsetHeight||1;return 1!==n||1!==r}function m(t,e,n){void 0===n&&(n=!1);var i=(0,s.Re)(e),o=(0,s.Re)(e)&&p(e),a=(0,d.Z)(e),f=(0,r.Z)(t,o,n),m={scrollLeft:0,scrollTop:0},g={x:0,y:0};return(i||!i&&!n)&&(("body"!==(0,c.Z)(e)||(0,h.Z)(a))&&(m=l(e)),(0,s.Re)(e)?(g=(0,r.Z)(e,!0),g.x+=e.clientLeft,g.y+=e.clientTop):a&&(g.x=(0,u.Z)(a))),{x:f.left+m.scrollLeft-g.x,y:f.top+m.scrollTop-g.y,width:f.width,height:f.height}}var g=n(7409),v=n(5786),y=n(1358),b=n(7385);function _(t){var e=new Map,n=new Set,r=[];function i(t){n.add(t.name);var o=[].concat(t.requires||[],t.requiresIfExists||[]);o.forEach((function(t){if(!n.has(t)){var r=e.get(t);r&&i(r)}})),r.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||i(t)})),r}function w(t){var e=_(t);return b.xs.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}function x(t){var e;return function(){return e||(e=new Promise((function(n){Promise.resolve().then((function(){e=void 0,n(t())}))}))),e}}function S(t){var e=t.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{});return Object.keys(e).map((function(t){return e[t]}))}var E={placement:"bottom",modifiers:[],strategy:"absolute"};function M(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"===typeof t.getBoundingClientRect)}))}function T(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,r=void 0===n?[]:n,i=e.defaultOptions,o=void 0===i?E:i;return function(t,e,n){void 0===n&&(n=o);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},E,o),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},a=[],l=!1,c={state:i,setOptions:function(n){var a="function"===typeof n?n(i.options):n;d(),i.options=Object.assign({},o,i.options,a),i.scrollParents={reference:(0,s.kK)(t)?(0,v.Z)(t):t.contextElement?(0,v.Z)(t.contextElement):[],popper:(0,v.Z)(e)};var l=w(S([].concat(r,i.options.modifiers)));return i.orderedModifiers=l.filter((function(t){return t.enabled})),u(),c.update()},forceUpdate:function(){if(!l){var t=i.elements,e=t.reference,n=t.popper;if(M(e,n)){i.rects={reference:m(e,(0,y.Z)(n),"fixed"===i.options.strategy),popper:(0,g.Z)(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(t){return i.modifiersData[t.name]=Object.assign({},t.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var o=i.orderedModifiers[r],s=o.fn,a=o.options,u=void 0===a?{}:a,d=o.name;"function"===typeof s&&(i=s({state:i,options:u,name:d,instance:c})||i)}else i.reset=!1,r=-1}}},update:x((function(){return new Promise((function(t){c.forceUpdate(),t(i)}))})),destroy:function(){d(),l=!0}};if(!M(t,e))return c;function u(){i.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,r=void 0===n?{}:n,o=t.effect;if("function"===typeof o){var s=o({state:i,name:e,instance:c,options:r}),l=function(){};a.push(s||l)}}))}function d(){a.forEach((function(t){return t()})),a=[]}return c.setOptions(n).then((function(t){!l&&n.onFirstUpdate&&n.onFirstUpdate(t)})),c}}var C=T()},8389:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(9467);function i(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&(0,r.Zq)(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}},5498:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(9467),i=n(9267),o=n(1504),s=n(9043);function a(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var a=t.getBoundingClientRect(),l=1,c=1;e&&(0,r.Re)(t)&&(l=t.offsetWidth>0&&(0,i.NM)(a.width)/t.offsetWidth||1,c=t.offsetHeight>0&&(0,i.NM)(a.height)/t.offsetHeight||1);var u=(0,r.kK)(t)?(0,o.Z)(t):window,d=u.visualViewport,h=!(0,s.Z)()&&n,f=(a.left+(h&&d?d.offsetLeft:0))/l,p=(a.top+(h&&d?d.offsetTop:0))/c,m=a.width/l,g=a.height/c;return{width:m,height:g,top:p,right:f+m,bottom:p+g,left:f,x:f,y:p}}},6534:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(1504);function i(t){return(0,r.Z)(t).getComputedStyle(t)}},5254:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(9467);function i(t){return(((0,r.kK)(t)?t.ownerDocument:t.document)||window.document).documentElement}},7409:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(5498);function i(t){var e=(0,r.Z)(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}},8706:function(t,e,n){"use strict";function r(t){return t?(t.nodeName||"").toLowerCase():null}n.d(e,{Z:function(){return r}})},1358:function(t,e,n){"use strict";n.d(e,{Z:function(){return h}});var r=n(1504),i=n(8706),o=n(6534),s=n(9467);function a(t){return["table","td","th"].indexOf((0,i.Z)(t))>=0}var l=n(6751),c=n(9326);function u(t){return(0,s.Re)(t)&&"fixed"!==(0,o.Z)(t).position?t.offsetParent:null}function d(t){var e=/firefox/i.test((0,c.Z)()),n=/Trident/i.test((0,c.Z)());if(n&&(0,s.Re)(t)){var r=(0,o.Z)(t);if("fixed"===r.position)return null}var a=(0,l.Z)(t);(0,s.Zq)(a)&&(a=a.host);while((0,s.Re)(a)&&["html","body"].indexOf((0,i.Z)(a))<0){var u=(0,o.Z)(a);if("none"!==u.transform||"none"!==u.perspective||"paint"===u.contain||-1!==["transform","perspective"].indexOf(u.willChange)||e&&"filter"===u.willChange||e&&u.filter&&"none"!==u.filter)return a;a=a.parentNode}return null}function h(t){var e=(0,r.Z)(t),n=u(t);while(n&&a(n)&&"static"===(0,o.Z)(n).position)n=u(n);return n&&("html"===(0,i.Z)(n)||"body"===(0,i.Z)(n)&&"static"===(0,o.Z)(n).position)?e:n||d(t)||e}},6751:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r=n(8706),i=n(5254),o=n(9467);function s(t){return"html"===(0,r.Z)(t)?t:t.assignedSlot||t.parentNode||((0,o.Zq)(t)?t.host:null)||(0,i.Z)(t)}},1504:function(t,e,n){"use strict";function r(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}n.d(e,{Z:function(){return r}})},3957:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(1504);function i(t){var e=(0,r.Z)(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}},4214:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r=n(5498),i=n(5254),o=n(3957);function s(t){return(0,r.Z)((0,i.Z)(t)).left+(0,o.Z)(t).scrollLeft}},9467:function(t,e,n){"use strict";n.d(e,{Re:function(){return o},Zq:function(){return s},kK:function(){return i}});var r=n(1504);function i(t){var e=(0,r.Z)(t).Element;return t instanceof e||t instanceof Element}function o(t){var e=(0,r.Z)(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function s(t){if("undefined"===typeof ShadowRoot)return!1;var e=(0,r.Z)(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}},9043:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(9326);function i(){return!/^((?!chrome|android).)*safari/i.test((0,r.Z)())}},6127:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(6534);function i(t){var e=(0,r.Z)(t),n=e.overflow,i=e.overflowX,o=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+i)}},5786:function(t,e,n){"use strict";n.d(e,{Z:function(){return c}});var r=n(6751),i=n(6127),o=n(8706),s=n(9467);function a(t){return["html","body","#document"].indexOf((0,o.Z)(t))>=0?t.ownerDocument.body:(0,s.Re)(t)&&(0,i.Z)(t)?t:a((0,r.Z)(t))}var l=n(1504);function c(t,e){var n;void 0===e&&(e=[]);var o=a(t),s=o===(null==(n=t.ownerDocument)?void 0:n.body),u=(0,l.Z)(o),d=s?[u].concat(u.visualViewport||[],(0,i.Z)(o)?o:[]):o,h=e.concat(d);return s?h:h.concat(c((0,r.Z)(d)))}},7385:function(t,e,n){"use strict";n.d(e,{BL:function(){return c},Ct:function(){return g},DH:function(){return w},F2:function(){return o},I:function(){return i},MS:function(){return M},N7:function(){return v},Pj:function(){return h},XM:function(){return _},YP:function(){return p},bw:function(){return m},cW:function(){return E},d7:function(){return a},ij:function(){return y},iv:function(){return S},k5:function(){return f},mv:function(){return l},r5:function(){return b},t$:function(){return s},ut:function(){return u},wX:function(){return x},we:function(){return r},xs:function(){return T},zV:function(){return d}});var r="top",i="bottom",o="right",s="left",a="auto",l=[r,i,o,s],c="start",u="end",d="clippingParents",h="viewport",f="popper",p="reference",m=l.reduce((function(t,e){return t.concat([e+"-"+c,e+"-"+u])}),[]),g=[].concat(l,[a]).reduce((function(t,e){return t.concat([e,e+"-"+c,e+"-"+u])}),[]),v="beforeRead",y="read",b="afterRead",_="beforeMain",w="main",x="afterMain",S="beforeWrite",E="write",M="afterWrite",T=[v,y,b,_,w,x,S,E,M]},94:function(t,e,n){"use strict";var r=n(8706),i=n(9467);function o(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},o=e.attributes[t]||{},s=e.elements[t];(0,i.Re)(s)&&(0,r.Z)(s)&&(Object.assign(s.style,n),Object.keys(o).forEach((function(t){var e=o[t];!1===e?s.removeAttribute(t):s.setAttribute(t,!0===e?"":e)})))}))}function s(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var o=e.elements[t],s=e.attributes[t]||{},a=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]),l=a.reduce((function(t,e){return t[e]="",t}),{});(0,i.Re)(o)&&(0,r.Z)(o)&&(Object.assign(o.style,l),Object.keys(s).forEach((function(t){o.removeAttribute(t)})))}))}}e.Z={name:"applyStyles",enabled:!0,phase:"write",fn:o,effect:s,requires:["computeStyles"]}},2066:function(t,e,n){"use strict";var r=n(2382),i=n(7409),o=n(8389),s=n(1358),a=n(158),l=n(1672),c=n(7770),u=n(4289),d=n(7385),h=function(t,e){return t="function"===typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t,(0,c.Z)("number"!==typeof t?t:(0,u.Z)(t,d.mv))};function f(t){var e,n=t.state,o=t.name,c=t.options,u=n.elements.arrow,f=n.modifiersData.popperOffsets,p=(0,r.Z)(n.placement),m=(0,a.Z)(p),g=[d.t$,d.F2].indexOf(p)>=0,v=g?"height":"width";if(u&&f){var y=h(c.padding,n),b=(0,i.Z)(u),_="y"===m?d.we:d.t$,w="y"===m?d.I:d.F2,x=n.rects.reference[v]+n.rects.reference[m]-f[m]-n.rects.popper[v],S=f[m]-n.rects.reference[m],E=(0,s.Z)(u),M=E?"y"===m?E.clientHeight||0:E.clientWidth||0:0,T=x/2-S/2,C=y[_],A=M-b[v]-y[w],k=M/2-b[v]/2+T,O=(0,l.u)(C,k,A),R=m;n.modifiersData[o]=(e={},e[R]=O,e.centerOffset=O-k,e)}}function p(t){var e=t.state,n=t.options,r=n.element,i=void 0===r?"[data-popper-arrow]":r;null!=i&&("string"!==typeof i||(i=e.elements.popper.querySelector(i),i))&&(0,o.Z)(e.elements.popper,i)&&(e.elements.arrow=i)}e.Z={name:"arrow",enabled:!0,phase:"main",fn:f,effect:p,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]}},1870:function(t,e,n){"use strict";var r=n(7385),i=n(1358),o=n(1504),s=n(5254),a=n(6534),l=n(2382),c=n(9527),u=n(9267),d={top:"auto",right:"auto",bottom:"auto",left:"auto"};function h(t){var e=t.x,n=t.y,r=window,i=r.devicePixelRatio||1;return{x:(0,u.NM)(e*i)/i||0,y:(0,u.NM)(n*i)/i||0}}function f(t){var e,n=t.popper,l=t.popperRect,c=t.placement,u=t.variation,f=t.offsets,p=t.position,m=t.gpuAcceleration,g=t.adaptive,v=t.roundOffsets,y=t.isFixed,b=f.x,_=void 0===b?0:b,w=f.y,x=void 0===w?0:w,S="function"===typeof v?v({x:_,y:x}):{x:_,y:x};_=S.x,x=S.y;var E=f.hasOwnProperty("x"),M=f.hasOwnProperty("y"),T=r.t$,C=r.we,A=window;if(g){var k=(0,i.Z)(n),O="clientHeight",R="clientWidth";if(k===(0,o.Z)(n)&&(k=(0,s.Z)(n),"static"!==(0,a.Z)(k).position&&"absolute"===p&&(O="scrollHeight",R="scrollWidth")),c===r.we||(c===r.t$||c===r.F2)&&u===r.ut){C=r.I;var P=y&&k===A&&A.visualViewport?A.visualViewport.height:k[O];x-=P-l.height,x*=m?1:-1}if(c===r.t$||(c===r.we||c===r.I)&&u===r.ut){T=r.F2;var L=y&&k===A&&A.visualViewport?A.visualViewport.width:k[R];_-=L-l.width,_*=m?1:-1}}var D,I=Object.assign({position:p},g&&d),N=!0===v?h({x:_,y:x}):{x:_,y:x};return _=N.x,x=N.y,m?Object.assign({},I,(D={},D[C]=M?"0":"",D[T]=E?"0":"",D.transform=(A.devicePixelRatio||1)<=1?"translate("+_+"px, "+x+"px)":"translate3d("+_+"px, "+x+"px, 0)",D)):Object.assign({},I,(e={},e[C]=M?x+"px":"",e[T]=E?_+"px":"",e.transform="",e))}function p(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,s=void 0===o||o,a=n.roundOffsets,u=void 0===a||a,d={placement:(0,l.Z)(e.placement),variation:(0,c.Z)(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,f(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:u})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,f(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}e.Z={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:p,data:{}}},3116:function(t,e,n){"use strict";var r=n(1504),i={passive:!0};function o(t){var e=t.state,n=t.instance,o=t.options,s=o.scroll,a=void 0===s||s,l=o.resize,c=void 0===l||l,u=(0,r.Z)(e.elements.popper),d=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&d.forEach((function(t){t.addEventListener("scroll",n.update,i)})),c&&u.addEventListener("resize",n.update,i),function(){a&&d.forEach((function(t){t.removeEventListener("scroll",n.update,i)})),c&&u.removeEventListener("resize",n.update,i)}}e.Z={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:o,data:{}}},5805:function(t,e,n){"use strict";n.d(e,{Z:function(){return p}});n(7658);var r={left:"right",right:"left",bottom:"top",top:"bottom"};function i(t){return t.replace(/left|right|bottom|top/g,(function(t){return r[t]}))}var o=n(2382),s={start:"end",end:"start"};function a(t){return t.replace(/start|end/g,(function(t){return s[t]}))}var l=n(6707),c=n(9527),u=n(7385);function d(t,e){void 0===e&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,a=n.padding,d=n.flipVariations,h=n.allowedAutoPlacements,f=void 0===h?u.Ct:h,p=(0,c.Z)(r),m=p?d?u.bw:u.bw.filter((function(t){return(0,c.Z)(t)===p})):u.mv,g=m.filter((function(t){return f.indexOf(t)>=0}));0===g.length&&(g=m);var v=g.reduce((function(e,n){return e[n]=(0,l.Z)(t,{placement:n,boundary:i,rootBoundary:s,padding:a})[(0,o.Z)(n)],e}),{});return Object.keys(v).sort((function(t,e){return v[t]-v[e]}))}function h(t){if((0,o.Z)(t)===u.d7)return[];var e=i(t);return[a(t),e,a(e)]}function f(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var s=n.mainAxis,a=void 0===s||s,f=n.altAxis,p=void 0===f||f,m=n.fallbackPlacements,g=n.padding,v=n.boundary,y=n.rootBoundary,b=n.altBoundary,_=n.flipVariations,w=void 0===_||_,x=n.allowedAutoPlacements,S=e.options.placement,E=(0,o.Z)(S),M=E===S,T=m||(M||!w?[i(S)]:h(S)),C=[S].concat(T).reduce((function(t,n){return t.concat((0,o.Z)(n)===u.d7?d(e,{placement:n,boundary:v,rootBoundary:y,padding:g,flipVariations:w,allowedAutoPlacements:x}):n)}),[]),A=e.rects.reference,k=e.rects.popper,O=new Map,R=!0,P=C[0],L=0;L<C.length;L++){var D=C[L],I=(0,o.Z)(D),N=(0,c.Z)(D)===u.BL,U=[u.we,u.I].indexOf(I)>=0,F=U?"width":"height",B=(0,l.Z)(e,{placement:D,boundary:v,rootBoundary:y,altBoundary:b,padding:g}),V=U?N?u.F2:u.t$:N?u.I:u.we;A[F]>k[F]&&(V=i(V));var z=i(V),j=[];if(a&&j.push(B[I]<=0),p&&j.push(B[V]<=0,B[z]<=0),j.every((function(t){return t}))){P=D,R=!1;break}O.set(D,j)}if(R)for(var H=w?3:1,W=function(t){var e=C.find((function(e){var n=O.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return P=e,"break"},G=H;G>0;G--){var $=W(G);if("break"===$)break}e.placement!==P&&(e.modifiersData[r]._skip=!0,e.placement=P,e.reset=!0)}}var p={name:"flip",enabled:!0,phase:"main",fn:f,requiresIfExists:["offset"],data:{_skip:!1}}},8948:function(t,e,n){"use strict";var r=n(7385),i=n(6707);function o(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function s(t){return[r.we,r.F2,r.I,r.t$].some((function(e){return t[e]>=0}))}function a(t){var e=t.state,n=t.name,r=e.rects.reference,a=e.rects.popper,l=e.modifiersData.preventOverflow,c=(0,i.Z)(e,{elementContext:"reference"}),u=(0,i.Z)(e,{altBoundary:!0}),d=o(c,r),h=o(u,a,l),f=s(d),p=s(h);e.modifiersData[n]={referenceClippingOffsets:d,popperEscapeOffsets:h,isReferenceHidden:f,hasPopperEscaped:p},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":p})}e.Z={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:a}},7953:function(t,e,n){"use strict";var r=n(2382),i=n(7385);function o(t,e,n){var o=(0,r.Z)(t),s=[i.t$,i.we].indexOf(o)>=0?-1:1,a="function"===typeof n?n(Object.assign({},e,{placement:t})):n,l=a[0],c=a[1];return l=l||0,c=(c||0)*s,[i.t$,i.F2].indexOf(o)>=0?{x:c,y:l}:{x:l,y:c}}function s(t){var e=t.state,n=t.options,r=t.name,s=n.offset,a=void 0===s?[0,0]:s,l=i.Ct.reduce((function(t,n){return t[n]=o(n,e.rects,a),t}),{}),c=l[e.placement],u=c.x,d=c.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=u,e.modifiersData.popperOffsets.y+=d),e.modifiersData[r]=l}e.Z={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:s}},3268:function(t,e,n){"use strict";var r=n(3108);function i(t){var e=t.state,n=t.name;e.modifiersData[n]=(0,r.Z)({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}e.Z={name:"popperOffsets",enabled:!0,phase:"read",fn:i,data:{}}},8285:function(t,e,n){"use strict";n.d(e,{Z:function(){return m}});var r=n(7385),i=n(2382),o=n(158);function s(t){return"x"===t?"y":"x"}var a=n(1672),l=n(7409),c=n(1358),u=n(6707),d=n(9527),h=n(218),f=n(9267);function p(t){var e=t.state,n=t.options,p=t.name,m=n.mainAxis,g=void 0===m||m,v=n.altAxis,y=void 0!==v&&v,b=n.boundary,_=n.rootBoundary,w=n.altBoundary,x=n.padding,S=n.tether,E=void 0===S||S,M=n.tetherOffset,T=void 0===M?0:M,C=(0,u.Z)(e,{boundary:b,rootBoundary:_,padding:x,altBoundary:w}),A=(0,i.Z)(e.placement),k=(0,d.Z)(e.placement),O=!k,R=(0,o.Z)(A),P=s(R),L=e.modifiersData.popperOffsets,D=e.rects.reference,I=e.rects.popper,N="function"===typeof T?T(Object.assign({},e.rects,{placement:e.placement})):T,U="number"===typeof N?{mainAxis:N,altAxis:N}:Object.assign({mainAxis:0,altAxis:0},N),F=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,B={x:0,y:0};if(L){if(g){var V,z="y"===R?r.we:r.t$,j="y"===R?r.I:r.F2,H="y"===R?"height":"width",W=L[R],G=W+C[z],$=W-C[j],q=E?-I[H]/2:0,Y=k===r.BL?D[H]:I[H],X=k===r.BL?-I[H]:-D[H],Z=e.elements.arrow,K=E&&Z?(0,l.Z)(Z):{width:0,height:0},J=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:(0,h.Z)(),Q=J[z],tt=J[j],et=(0,a.u)(0,D[H],K[H]),nt=O?D[H]/2-q-et-Q-U.mainAxis:Y-et-Q-U.mainAxis,rt=O?-D[H]/2+q+et+tt+U.mainAxis:X+et+tt+U.mainAxis,it=e.elements.arrow&&(0,c.Z)(e.elements.arrow),ot=it?"y"===R?it.clientTop||0:it.clientLeft||0:0,st=null!=(V=null==F?void 0:F[R])?V:0,at=W+nt-st-ot,lt=W+rt-st,ct=(0,a.u)(E?(0,f.VV)(G,at):G,W,E?(0,f.Fp)($,lt):$);L[R]=ct,B[R]=ct-W}if(y){var ut,dt="x"===R?r.we:r.t$,ht="x"===R?r.I:r.F2,ft=L[P],pt="y"===P?"height":"width",mt=ft+C[dt],gt=ft-C[ht],vt=-1!==[r.we,r.t$].indexOf(A),yt=null!=(ut=null==F?void 0:F[P])?ut:0,bt=vt?mt:ft-D[pt]-I[pt]-yt+U.altAxis,_t=vt?ft+D[pt]+I[pt]-yt-U.altAxis:gt,wt=E&&vt?(0,a.q)(bt,ft,_t):(0,a.u)(E?bt:mt,ft,E?_t:gt);L[P]=wt,B[P]=wt-ft}e.modifiersData[p]=B}}var m={name:"preventOverflow",enabled:!0,phase:"main",fn:p,requiresIfExists:["offset"]}},1320:function(t,e,n){"use strict";n.d(e,{fi:function(){return p}});var r=n(8106),i=n(3116),o=n(3268),s=n(1870),a=n(94),l=n(7953),c=n(5805),u=n(8285),d=n(2066),h=n(8948),f=[i.Z,o.Z,s.Z,a.Z,l.Z,c.Z,u.Z,d.Z,h.Z],p=(0,r.kZ)({defaultModifiers:f})},3108:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(2382),i=n(9527),o=n(158),s=n(7385);function a(t){var e,n=t.reference,a=t.element,l=t.placement,c=l?(0,r.Z)(l):null,u=l?(0,i.Z)(l):null,d=n.x+n.width/2-a.width/2,h=n.y+n.height/2-a.height/2;switch(c){case s.we:e={x:d,y:n.y-a.height};break;case s.I:e={x:d,y:n.y+n.height};break;case s.F2:e={x:n.x+n.width,y:h};break;case s.t$:e={x:n.x-a.width,y:h};break;default:e={x:n.x,y:n.y}}var f=c?(0,o.Z)(c):null;if(null!=f){var p="y"===f?"height":"width";switch(u){case s.BL:e[f]=e[f]-(n[p]/2-a[p]/2);break;case s.ut:e[f]=e[f]+(n[p]/2-a[p]/2);break;default:}}return e}},6707:function(t,e,n){"use strict";n.d(e,{Z:function(){return A}});var r=n(7385),i=n(1504),o=n(5254),s=n(4214),a=n(9043);function l(t,e){var n=(0,i.Z)(t),r=(0,o.Z)(t),l=n.visualViewport,c=r.clientWidth,u=r.clientHeight,d=0,h=0;if(l){c=l.width,u=l.height;var f=(0,a.Z)();(f||!f&&"fixed"===e)&&(d=l.offsetLeft,h=l.offsetTop)}return{width:c,height:u,x:d+(0,s.Z)(t),y:h}}var c=n(6534),u=n(3957),d=n(9267);function h(t){var e,n=(0,o.Z)(t),r=(0,u.Z)(t),i=null==(e=t.ownerDocument)?void 0:e.body,a=(0,d.Fp)(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),l=(0,d.Fp)(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),h=-r.scrollLeft+(0,s.Z)(t),f=-r.scrollTop;return"rtl"===(0,c.Z)(i||n).direction&&(h+=(0,d.Fp)(n.clientWidth,i?i.clientWidth:0)-a),{width:a,height:l,x:h,y:f}}var f=n(5786),p=n(1358),m=n(9467),g=n(5498),v=n(6751),y=n(8389),b=n(8706);function _(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function w(t,e){var n=(0,g.Z)(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function x(t,e,n){return e===r.Pj?_(l(t,n)):(0,m.kK)(e)?w(e,n):_(h((0,o.Z)(t)))}function S(t){var e=(0,f.Z)((0,v.Z)(t)),n=["absolute","fixed"].indexOf((0,c.Z)(t).position)>=0,r=n&&(0,m.Re)(t)?(0,p.Z)(t):t;return(0,m.kK)(r)?e.filter((function(t){return(0,m.kK)(t)&&(0,y.Z)(t,r)&&"body"!==(0,b.Z)(t)})):[]}function E(t,e,n,r){var i="clippingParents"===e?S(t):[].concat(e),o=[].concat(i,[n]),s=o[0],a=o.reduce((function(e,n){var i=x(t,n,r);return e.top=(0,d.Fp)(i.top,e.top),e.right=(0,d.VV)(i.right,e.right),e.bottom=(0,d.VV)(i.bottom,e.bottom),e.left=(0,d.Fp)(i.left,e.left),e}),x(t,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}var M=n(3108),T=n(7770),C=n(4289);function A(t,e){void 0===e&&(e={});var n=e,i=n.placement,s=void 0===i?t.placement:i,a=n.strategy,l=void 0===a?t.strategy:a,c=n.boundary,u=void 0===c?r.zV:c,d=n.rootBoundary,h=void 0===d?r.Pj:d,f=n.elementContext,p=void 0===f?r.k5:f,v=n.altBoundary,y=void 0!==v&&v,b=n.padding,w=void 0===b?0:b,x=(0,T.Z)("number"!==typeof w?w:(0,C.Z)(w,r.mv)),S=p===r.k5?r.YP:r.k5,A=t.rects.popper,k=t.elements[y?S:p],O=E((0,m.kK)(k)?k:k.contextElement||(0,o.Z)(t.elements.popper),u,h,l),R=(0,g.Z)(t.elements.reference),P=(0,M.Z)({reference:R,element:A,strategy:"absolute",placement:s}),L=_(Object.assign({},A,P)),D=p===r.k5?L:R,I={top:O.top-D.top+x.top,bottom:D.bottom-O.bottom+x.bottom,left:O.left-D.left+x.left,right:D.right-O.right+x.right},N=t.modifiersData.offset;if(p===r.k5&&N){var U=N[s];Object.keys(I).forEach((function(t){var e=[r.F2,r.I].indexOf(t)>=0?1:-1,n=[r.we,r.I].indexOf(t)>=0?"y":"x";I[t]+=U[n]*e}))}return I}},4289:function(t,e,n){"use strict";function r(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}n.d(e,{Z:function(){return r}})},2382:function(t,e,n){"use strict";function r(t){return t.split("-")[0]}n.d(e,{Z:function(){return r}})},218:function(t,e,n){"use strict";function r(){return{top:0,right:0,bottom:0,left:0}}n.d(e,{Z:function(){return r}})},158:function(t,e,n){"use strict";function r(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}n.d(e,{Z:function(){return r}})},9527:function(t,e,n){"use strict";function r(t){return t.split("-")[1]}n.d(e,{Z:function(){return r}})},9267:function(t,e,n){"use strict";n.d(e,{Fp:function(){return r},NM:function(){return o},VV:function(){return i}});var r=Math.max,i=Math.min,o=Math.round},7770:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(218);function i(t){return Object.assign({},(0,r.Z)(),t)}},9326:function(t,e,n){"use strict";function r(){var t=navigator.userAgentData;return null!=t&&t.brands?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}n.d(e,{Z:function(){return r}})},1672:function(t,e,n){"use strict";n.d(e,{q:function(){return o},u:function(){return i}});var r=n(9267);function i(t,e,n){return(0,r.Fp)(t,(0,r.VV)(e,n))}function o(t,e,n){var r=i(t,e,n);return r>n?n:r}},4188:function(t,e,n){"use strict";n.d(e,{$y:function(){return Nt},B:function(){return s},BK:function(){return re},Bj:function(){return o},EB:function(){return c},Fl:function(){return ce},IU:function(){return Bt},Jd:function(){return A},OT:function(){return Pt},PG:function(){return It},SU:function(){return Kt},Tn:function(){return Jt},Um:function(){return Rt},Vh:function(){return se},WL:function(){return te},X$:function(){return P},X3:function(){return Ft},XI:function(){return qt},Xl:function(){return Vt},YS:function(){return Lt},ZM:function(){return ne},cE:function(){return E},dq:function(){return Gt},iH:function(){return $t},j:function(){return O},lk:function(){return k},nZ:function(){return l},oR:function(){return Zt},qj:function(){return Ot},qq:function(){return x},sT:function(){return M},yT:function(){return Ut}});n(7658);var r=n(4887);let i;class o{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=i,!t&&i&&(this.index=(i.scopes||(i.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const e=i;try{return i=this,t()}finally{i=e}}else 0}on(){i=this}off(){i=this.parent}stop(t){if(this._active){let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.parent=void 0,this._active=!1}}}function s(t){return new o(t)}function a(t,e=i){e&&e.active&&e.effects.push(t)}function l(){return i}function c(t){i&&i.cleanups.push(t)}const u=t=>{const e=new Set(t);return e.w=0,e.n=0,e},d=t=>(t.w&v)>0,h=t=>(t.n&v)>0,f=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=v},p=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const i=e[r];d(i)&&!h(i)?i.delete(t):e[n++]=i,i.w&=~v,i.n&=~v}e.length=n}},m=new WeakMap;let g=0,v=1;const y=30;let b;const _=Symbol(""),w=Symbol("");class x{constructor(t,e=null,n){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,a(this,n)}run(){if(!this.active)return this.fn();let t=b,e=T;while(t){if(t===this)return;t=t.parent}try{return this.parent=b,b=this,T=!0,v=1<<++g,g<=y?f(this):S(this),this.fn()}finally{g<=y&&p(this),v=1<<--g,b=this.parent,T=e,this.parent=void 0,this.deferStop&&this.stop()}}stop(){b===this?this.deferStop=!0:this.active&&(S(this),this.onStop&&this.onStop(),this.active=!1)}}function S(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}function E(t,e){t.effect&&(t=t.effect.fn);const n=new x(t);e&&((0,r.l7)(n,e),e.scope&&a(n,e.scope)),e&&e.lazy||n.run();const i=n.run.bind(n);return i.effect=n,i}function M(t){t.effect.stop()}let T=!0;const C=[];function A(){C.push(T),T=!1}function k(){const t=C.pop();T=void 0===t||t}function O(t,e,n){if(T&&b){let e=m.get(t);e||m.set(t,e=new Map);let r=e.get(n);r||e.set(n,r=u());const i=void 0;R(r,i)}}function R(t,e){let n=!1;g<=y?h(t)||(t.n|=v,n=!d(t)):n=!t.has(b),n&&(t.add(b),b.deps.push(t))}function P(t,e,n,i,o,s){const a=m.get(t);if(!a)return;let l=[];if("clear"===e)l=[...a.values()];else if("length"===n&&(0,r.kJ)(t)){const t=Number(i);a.forEach(((e,n)=>{("length"===n||n>=t)&&l.push(e)}))}else switch(void 0!==n&&l.push(a.get(n)),e){case"add":(0,r.kJ)(t)?(0,r.S0)(n)&&l.push(a.get("length")):(l.push(a.get(_)),(0,r._N)(t)&&l.push(a.get(w)));break;case"delete":(0,r.kJ)(t)||(l.push(a.get(_)),(0,r._N)(t)&&l.push(a.get(w)));break;case"set":(0,r._N)(t)&&l.push(a.get(_));break}if(1===l.length)l[0]&&L(l[0]);else{const t=[];for(const e of l)e&&t.push(...e);L(u(t))}}function L(t,e){const n=(0,r.kJ)(t)?t:[...t];for(const r of n)r.computed&&D(r,e);for(const r of n)r.computed||D(r,e)}function D(t,e){(t!==b||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function I(t,e){var n;return null==(n=m.get(t))?void 0:n.get(e)}const N=(0,r.fY)("__proto__,__v_isRef,__isVue"),U=new Set(Object.getOwnPropertyNames(Symbol).filter((t=>"arguments"!==t&&"caller"!==t)).map((t=>Symbol[t])).filter(r.yk)),F=G(),B=G(!1,!0),V=G(!0),z=G(!0,!0),j=H();function H(){const t={};return["includes","indexOf","lastIndexOf"].forEach((e=>{t[e]=function(...t){const n=Bt(this);for(let e=0,i=this.length;e<i;e++)O(n,"get",e+"");const r=n[e](...t);return-1===r||!1===r?n[e](...t.map(Bt)):r}})),["push","pop","shift","unshift","splice"].forEach((e=>{t[e]=function(...t){A();const n=Bt(this)[e].apply(this,t);return k(),n}})),t}function W(t){const e=Bt(this);return O(e,"has",t),e.hasOwnProperty(t)}function G(t=!1,e=!1){return function(n,i,o){if("__v_isReactive"===i)return!t;if("__v_isReadonly"===i)return t;if("__v_isShallow"===i)return e;if("__v_raw"===i&&o===(t?e?Ct:Tt:e?Mt:Et).get(n))return n;const s=(0,r.kJ)(n);if(!t){if(s&&(0,r.RI)(j,i))return Reflect.get(j,i,o);if("hasOwnProperty"===i)return W}const a=Reflect.get(n,i,o);return((0,r.yk)(i)?U.has(i):N(i))?a:(t||O(n,"get",i),e?a:Gt(a)?s&&(0,r.S0)(i)?a:a.value:(0,r.Kn)(a)?t?Pt(a):Ot(a):a)}}const $=Y(),q=Y(!0);function Y(t=!1){return function(e,n,i,o){let s=e[n];if(Nt(s)&&Gt(s)&&!Gt(i))return!1;if(!t&&(Ut(i)||Nt(i)||(s=Bt(s),i=Bt(i)),!(0,r.kJ)(e)&&Gt(s)&&!Gt(i)))return s.value=i,!0;const a=(0,r.kJ)(e)&&(0,r.S0)(n)?Number(n)<e.length:(0,r.RI)(e,n),l=Reflect.set(e,n,i,o);return e===Bt(o)&&(a?(0,r.aU)(i,s)&&P(e,"set",n,i,s):P(e,"add",n,i)),l}}function X(t,e){const n=(0,r.RI)(t,e),i=t[e],o=Reflect.deleteProperty(t,e);return o&&n&&P(t,"delete",e,void 0,i),o}function Z(t,e){const n=Reflect.has(t,e);return(0,r.yk)(e)&&U.has(e)||O(t,"has",e),n}function K(t){return O(t,"iterate",(0,r.kJ)(t)?"length":_),Reflect.ownKeys(t)}const J={get:F,set:$,deleteProperty:X,has:Z,ownKeys:K},Q={get:V,set(t,e){return!0},deleteProperty(t,e){return!0}},tt=(0,r.l7)({},J,{get:B,set:q}),et=(0,r.l7)({},Q,{get:z}),nt=t=>t,rt=t=>Reflect.getPrototypeOf(t);function it(t,e,n=!1,r=!1){t=t["__v_raw"];const i=Bt(t),o=Bt(e);n||(e!==o&&O(i,"get",e),O(i,"get",o));const{has:s}=rt(i),a=r?nt:n?jt:zt;return s.call(i,e)?a(t.get(e)):s.call(i,o)?a(t.get(o)):void(t!==i&&t.get(e))}function ot(t,e=!1){const n=this["__v_raw"],r=Bt(n),i=Bt(t);return e||(t!==i&&O(r,"has",t),O(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function st(t,e=!1){return t=t["__v_raw"],!e&&O(Bt(t),"iterate",_),Reflect.get(t,"size",t)}function at(t){t=Bt(t);const e=Bt(this),n=rt(e),r=n.has.call(e,t);return r||(e.add(t),P(e,"add",t,t)),this}function lt(t,e){e=Bt(e);const n=Bt(this),{has:i,get:o}=rt(n);let s=i.call(n,t);s||(t=Bt(t),s=i.call(n,t));const a=o.call(n,t);return n.set(t,e),s?(0,r.aU)(e,a)&&P(n,"set",t,e,a):P(n,"add",t,e),this}function ct(t){const e=Bt(this),{has:n,get:r}=rt(e);let i=n.call(e,t);i||(t=Bt(t),i=n.call(e,t));const o=r?r.call(e,t):void 0,s=e.delete(t);return i&&P(e,"delete",t,void 0,o),s}function ut(){const t=Bt(this),e=0!==t.size,n=void 0,r=t.clear();return e&&P(t,"clear",void 0,void 0,n),r}function dt(t,e){return function(n,r){const i=this,o=i["__v_raw"],s=Bt(o),a=e?nt:t?jt:zt;return!t&&O(s,"iterate",_),o.forEach(((t,e)=>n.call(r,a(t),a(e),i)))}}function ht(t,e,n){return function(...i){const o=this["__v_raw"],s=Bt(o),a=(0,r._N)(s),l="entries"===t||t===Symbol.iterator&&a,c="keys"===t&&a,u=o[t](...i),d=n?nt:e?jt:zt;return!e&&O(s,"iterate",c?w:_),{next(){const{value:t,done:e}=u.next();return e?{value:t,done:e}:{value:l?[d(t[0]),d(t[1])]:d(t),done:e}},[Symbol.iterator](){return this}}}}function ft(t){return function(...e){return"delete"!==t&&this}}function pt(){const t={get(t){return it(this,t)},get size(){return st(this)},has:ot,add:at,set:lt,delete:ct,clear:ut,forEach:dt(!1,!1)},e={get(t){return it(this,t,!1,!0)},get size(){return st(this)},has:ot,add:at,set:lt,delete:ct,clear:ut,forEach:dt(!1,!0)},n={get(t){return it(this,t,!0)},get size(){return st(this,!0)},has(t){return ot.call(this,t,!0)},add:ft("add"),set:ft("set"),delete:ft("delete"),clear:ft("clear"),forEach:dt(!0,!1)},r={get(t){return it(this,t,!0,!0)},get size(){return st(this,!0)},has(t){return ot.call(this,t,!0)},add:ft("add"),set:ft("set"),delete:ft("delete"),clear:ft("clear"),forEach:dt(!0,!0)},i=["keys","values","entries",Symbol.iterator];return i.forEach((i=>{t[i]=ht(i,!1,!1),n[i]=ht(i,!0,!1),e[i]=ht(i,!1,!0),r[i]=ht(i,!0,!0)})),[t,n,e,r]}const[mt,gt,vt,yt]=pt();function bt(t,e){const n=e?t?yt:vt:t?gt:mt;return(e,i,o)=>"__v_isReactive"===i?!t:"__v_isReadonly"===i?t:"__v_raw"===i?e:Reflect.get((0,r.RI)(n,i)&&i in e?n:e,i,o)}const _t={get:bt(!1,!1)},wt={get:bt(!1,!0)},xt={get:bt(!0,!1)},St={get:bt(!0,!0)};const Et=new WeakMap,Mt=new WeakMap,Tt=new WeakMap,Ct=new WeakMap;function At(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function kt(t){return t["__v_skip"]||!Object.isExtensible(t)?0:At((0,r.W7)(t))}function Ot(t){return Nt(t)?t:Dt(t,!1,J,_t,Et)}function Rt(t){return Dt(t,!1,tt,wt,Mt)}function Pt(t){return Dt(t,!0,Q,xt,Tt)}function Lt(t){return Dt(t,!0,et,St,Ct)}function Dt(t,e,n,i,o){if(!(0,r.Kn)(t))return t;if(t["__v_raw"]&&(!e||!t["__v_isReactive"]))return t;const s=o.get(t);if(s)return s;const a=kt(t);if(0===a)return t;const l=new Proxy(t,2===a?i:n);return o.set(t,l),l}function It(t){return Nt(t)?It(t["__v_raw"]):!(!t||!t["__v_isReactive"])}function Nt(t){return!(!t||!t["__v_isReadonly"])}function Ut(t){return!(!t||!t["__v_isShallow"])}function Ft(t){return It(t)||Nt(t)}function Bt(t){const e=t&&t["__v_raw"];return e?Bt(e):t}function Vt(t){return(0,r.Nj)(t,"__v_skip",!0),t}const zt=t=>(0,r.Kn)(t)?Ot(t):t,jt=t=>(0,r.Kn)(t)?Pt(t):t;function Ht(t){T&&b&&(t=Bt(t),R(t.dep||(t.dep=u())))}function Wt(t,e){t=Bt(t);const n=t.dep;n&&L(n)}function Gt(t){return!(!t||!0!==t.__v_isRef)}function $t(t){return Yt(t,!1)}function qt(t){return Yt(t,!0)}function Yt(t,e){return Gt(t)?t:new Xt(t,e)}class Xt{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:Bt(t),this._value=e?t:zt(t)}get value(){return Ht(this),this._value}set value(t){const e=this.__v_isShallow||Ut(t)||Nt(t);t=e?t:Bt(t),(0,r.aU)(t,this._rawValue)&&(this._rawValue=t,this._value=e?t:zt(t),Wt(this,t))}}function Zt(t){Wt(t,void 0)}function Kt(t){return Gt(t)?t.value:t}function Jt(t){return(0,r.mf)(t)?t():Kt(t)}const Qt={get:(t,e,n)=>Kt(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return Gt(i)&&!Gt(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function te(t){return It(t)?t:new Proxy(t,Qt)}class ee{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:e,set:n}=t((()=>Ht(this)),(()=>Wt(this)));this._get=e,this._set=n}get value(){return this._get()}set value(t){this._set(t)}}function ne(t){return new ee(t)}function re(t){const e=(0,r.kJ)(t)?new Array(t.length):{};for(const n in t)e[n]=ae(t,n);return e}class ie{constructor(t,e,n){this._object=t,this._key=e,this._defaultValue=n,this.__v_isRef=!0}get value(){const t=this._object[this._key];return void 0===t?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return I(Bt(this._object),this._key)}}class oe{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function se(t,e,n){return Gt(t)?t:(0,r.mf)(t)?new oe(t):(0,r.Kn)(t)&&arguments.length>1?ae(t,e,n):$t(t)}function ae(t,e,n){const r=t[e];return Gt(r)?r:new ie(t,e,n)}class le{constructor(t,e,n,r){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this["__v_isReadonly"]=!1,this._dirty=!0,this.effect=new x(t,(()=>{this._dirty||(this._dirty=!0,Wt(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!r,this["__v_isReadonly"]=n}get value(){const t=Bt(this);return Ht(t),!t._dirty&&t._cacheable||(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function ce(t,e,n=!1){let i,o;const s=(0,r.mf)(t);s?(i=t,o=r.dG):(i=t.get,o=t.set);const a=new le(i,o,s||!o,n);return a}},8473:function(t,e,n){"use strict";n.d(e,{$d:function(){return l},$y:function(){return r.$y},Ah:function(){return te},B:function(){return r.B},BK:function(){return r.BK},Bj:function(){return r.Bj},Bz:function(){return Ee},C3:function(){return lr},C_:function(){return i.C_},Cn:function(){return j},EB:function(){return r.EB},EM:function(){return an},Eo:function(){return Pn},F4:function(){return mr},FN:function(){return kr},Fl:function(){return Zr},G:function(){return oi},Gn:function(){return Ae},HX:function(){return H},HY:function(){return $n},Ho:function(){return gr},IU:function(){return r.IU},JJ:function(){return on},Jd:function(){return Qt},KU:function(){return a},Ko:function(){return fe},LL:function(){return ce},MW:function(){return Se},MX:function(){return ei},Mr:function(){return ti},Nv:function(){return pe},OT:function(){return r.OT},Ob:function(){return Bt},P$:function(){return Tt},PG:function(){return r.PG},Q2:function(){return ue},Q6:function(){return Pt},RC:function(){return It},Rh:function(){return ht},Rr:function(){return Oe},S3:function(){return c},SU:function(){return r.SU},Tn:function(){return r.Tn},U2:function(){return At},Uc:function(){return Jr},Uk:function(){return vr},Um:function(){return r.Um},Us:function(){return Rn},Vf:function(){return Ne},Vh:function(){return r.Vh},WI:function(){return me},WL:function(){return r.WL},WY:function(){return Me},Wl:function(){return Ce},Wm:function(){return fr},Wu:function(){return s},X3:function(){return r.X3},XI:function(){return r.XI},Xl:function(){return r.Xl},Xn:function(){return Kt},Y1:function(){return jr},Y3:function(){return _},Y8:function(){return xt},YP:function(){return mt},YS:function(){return r.YS},Yq:function(){return ne},Yu:function(){return Te},ZK:function(){return o},ZM:function(){return r.ZM},Zq:function(){return Qr},_:function(){return hr},_A:function(){return i._A},aZ:function(){return Lt},b9:function(){return ke},bT:function(){return re},bv:function(){return Zt},cE:function(){return r.cE},d1:function(){return ie},dD:function(){return z},dG:function(){return Sr},dl:function(){return zt},dq:function(){return r.dq},ec:function(){return D},eq:function(){return si},f3:function(){return sn},h:function(){return Kr},hR:function(){return i.hR},i8:function(){return ri},iD:function(){return ir},iH:function(){return r.iH},ic:function(){return Jt},j4:function(){return or},j5:function(){return i.j5},kC:function(){return i.kC},kq:function(){return br},l1:function(){return Re},lA:function(){return sr},lR:function(){return Wn},m0:function(){return dt},mW:function(){return R},mv:function(){return Fe},mx:function(){return ve},n4:function(){return tt},nJ:function(){return Et},nK:function(){return Rt},nQ:function(){return ni},nZ:function(){return r.nZ},oR:function(){return r.oR},of:function(){return Hr},p1:function(){return Ue},qG:function(){return Xn},qZ:function(){return nr},qb:function(){return M},qj:function(){return r.qj},qq:function(){return r.qq},ry:function(){return ai},sT:function(){return r.sT},se:function(){return jt},sv:function(){return Yn},tT:function(){return Pe},uE:function(){return yr},u_:function(){return Ie},up:function(){return ae},vl:function(){return ee},vs:function(){return i.vs},w5:function(){return W},wF:function(){return Xt},wg:function(){return Jn},wy:function(){return _t},xv:function(){return qn},yT:function(){return r.yT},yX:function(){return ft},zw:function(){return i.zw}});n(7658),n(1703);var r=n(4188),i=n(4887);function o(t,...e){}function s(t,e){}function a(t,e,n,r){let i;try{i=r?t(...r):t()}catch(o){c(o,e,n)}return i}function l(t,e,n,r){if((0,i.mf)(t)){const o=a(t,e,n,r);return o&&(0,i.tI)(o)&&o.catch((t=>{c(t,e,n)})),o}const o=[];for(let i=0;i<t.length;i++)o.push(l(t[i],e,n,r));return o}function c(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let r=e.parent;const i=e.proxy,o=n;while(r){const e=r.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,i,o))return;r=r.parent}const s=e.appContext.config.errorHandler;if(s)return void a(s,null,10,[t,i,o])}u(t,n,i,r)}function u(t,e,n,r=!0){console.error(t)}let d=!1,h=!1;const f=[];let p=0;const m=[];let g=null,v=0;const y=Promise.resolve();let b=null;function _(t){const e=b||y;return t?e.then(this?t.bind(this):t):e}function w(t){let e=p+1,n=f.length;while(e<n){const r=e+n>>>1,i=A(f[r]);i<t?e=r+1:n=r}return e}function x(t){f.length&&f.includes(t,d&&t.allowRecurse?p+1:p)||(null==t.id?f.push(t):f.splice(w(t.id),0,t),S())}function S(){d||h||(h=!0,b=y.then(O))}function E(t){const e=f.indexOf(t);e>p&&f.splice(e,1)}function M(t){(0,i.kJ)(t)?m.push(...t):g&&g.includes(t,t.allowRecurse?v+1:v)||m.push(t),S()}function T(t,e=(d?p+1:0)){for(0;e<f.length;e++){const t=f[e];t&&t.pre&&(f.splice(e,1),e--,t())}}function C(t){if(m.length){const t=[...new Set(m)];if(m.length=0,g)return void g.push(...t);for(g=t,g.sort(((t,e)=>A(t)-A(e))),v=0;v<g.length;v++)g[v]();g=null,v=0}}const A=t=>null==t.id?1/0:t.id,k=(t,e)=>{const n=A(t)-A(e);if(0===n){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function O(t){h=!1,d=!0,f.sort(k);i.dG;try{for(p=0;p<f.length;p++){const t=f[p];t&&!1!==t.active&&a(t,null,14)}}finally{p=0,f.length=0,C(t),d=!1,b=null,(f.length||m.length)&&O(t)}}let R,P=[],L=!1;function D(t,e){var n,r;if(R=t,R)R.enabled=!0,P.forEach((({event:t,args:e})=>R.emit(t,...e))),P=[];else if("undefined"!==typeof window&&window.HTMLElement&&!(null==(r=null==(n=window.navigator)?void 0:n.userAgent)?void 0:r.includes("jsdom"))){const t=e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[];t.push((t=>{D(t,e)})),setTimeout((()=>{R||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,L=!0,P=[])}),3e3)}else L=!0,P=[]}function I(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||i.kT;let o=n;const s=e.startsWith("update:"),a=s&&e.slice(7);if(a&&a in r){const t=`${"modelValue"===a?"model":a}Modifiers`,{number:e,trim:s}=r[t]||i.kT;s&&(o=n.map((t=>(0,i.HD)(t)?t.trim():t))),e&&(o=n.map(i.h5))}let c;let u=r[c=(0,i.hR)(e)]||r[c=(0,i.hR)((0,i._A)(e))];!u&&s&&(u=r[c=(0,i.hR)((0,i.rs)(e))]),u&&l(u,t,6,o);const d=r[c+"Once"];if(d){if(t.emitted){if(t.emitted[c])return}else t.emitted={};t.emitted[c]=!0,l(d,t,6,o)}}function N(t,e,n=!1){const r=e.emitsCache,o=r.get(t);if(void 0!==o)return o;const s=t.emits;let a={},l=!1;if(!(0,i.mf)(t)){const r=t=>{const n=N(t,e,!0);n&&(l=!0,(0,i.l7)(a,n))};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}return s||l?((0,i.kJ)(s)?s.forEach((t=>a[t]=null)):(0,i.l7)(a,s),(0,i.Kn)(t)&&r.set(t,a),a):((0,i.Kn)(t)&&r.set(t,null),null)}function U(t,e){return!(!t||!(0,i.F7)(e))&&(e=e.slice(2).replace(/Once$/,""),(0,i.RI)(t,e[0].toLowerCase()+e.slice(1))||(0,i.RI)(t,(0,i.rs)(e))||(0,i.RI)(t,e))}let F=null,B=null;function V(t){const e=F;return F=t,B=t&&t.type.__scopeId||null,e}function z(t){B=t}function j(){B=null}const H=t=>W;function W(t,e=F,n){if(!e)return t;if(t._n)return t;const r=(...n)=>{r._d&&nr(-1);const i=V(e);let o;try{o=t(...n)}finally{V(i),r._d&&nr(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function G(t){const{type:e,vnode:n,proxy:r,withProxy:o,props:s,propsOptions:[a],slots:l,attrs:u,emit:d,render:h,renderCache:f,data:p,setupState:m,ctx:g,inheritAttrs:v}=t;let y,b;const _=V(t);try{if(4&n.shapeFlag){const t=o||r;y=_r(h.call(t,t,f,s,m,p,g)),b=u}else{const t=e;0,y=_r(t.length>1?t(s,{attrs:u,slots:l,emit:d}):t(s,null)),b=e.props?u:q(u)}}catch(x){Zn.length=0,c(x,t,1),y=fr(Yn)}let w=y;if(b&&!1!==v){const t=Object.keys(b),{shapeFlag:e}=w;t.length&&7&e&&(a&&t.some(i.tR)&&(b=Y(b,a)),w=gr(w,b))}return n.dirs&&(w=gr(w),w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&(w.transition=n.transition),y=w,V(_),y}function $(t){let e;for(let n=0;n<t.length;n++){const r=t[n];if(!sr(r))return;if(r.type!==Yn||"v-if"===r.children){if(e)return;e=r}}return e}const q=t=>{let e;for(const n in t)("class"===n||"style"===n||(0,i.F7)(n))&&((e||(e={}))[n]=t[n]);return e},Y=(t,e)=>{const n={};for(const r in t)(0,i.tR)(r)&&r.slice(9)in e||(n[r]=t[r]);return n};function X(t,e,n){const{props:r,children:i,component:o}=t,{props:s,children:a,patchFlag:l}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&l>=0))return!(!i&&!a||a&&a.$stable)||r!==s&&(r?!s||Z(r,s,c):!!s);if(1024&l)return!0;if(16&l)return r?Z(r,s,c):!!s;if(8&l){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(s[n]!==r[n]&&!U(c,n))return!0}}return!1}function Z(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(e[o]!==t[o]&&!U(n,o))return!0}return!1}function K({vnode:t,parent:e},n){while(e&&e.subTree===t)(t=e.vnode).el=n,e=e.parent}const J=t=>t.__isSuspense,Q={name:"Suspense",__isSuspense:!0,process(t,e,n,r,i,o,s,a,l,c){null==t?nt(e,n,r,i,o,s,a,l,c):rt(t,e,n,r,i,s,a,l,c)},hydrate:ot,create:it,normalize:st},tt=Q;function et(t,e){const n=t.props&&t.props[e];(0,i.mf)(n)&&n()}function nt(t,e,n,r,i,o,s,a,l){const{p:c,o:{createElement:u}}=l,d=u("div"),h=t.suspense=it(t,i,r,e,d,n,o,s,a,l);c(null,h.pendingBranch=t.ssContent,d,null,r,h,o,s),h.deps>0?(et(t,"onPending"),et(t,"onFallback"),c(null,t.ssFallback,e,n,r,null,o,s),ct(h,t.ssFallback)):h.resolve(!1,!0)}function rt(t,e,n,r,i,o,s,a,{p:l,um:c,o:{createElement:u}}){const d=e.suspense=t.suspense;d.vnode=e,e.el=t.el;const h=e.ssContent,f=e.ssFallback,{activeBranch:p,pendingBranch:m,isInFallback:g,isHydrating:v}=d;if(m)d.pendingBranch=h,ar(h,m)?(l(m,h,d.hiddenContainer,null,i,d,o,s,a),d.deps<=0?d.resolve():g&&(l(p,f,n,r,i,null,o,s,a),ct(d,f))):(d.pendingId++,v?(d.isHydrating=!1,d.activeBranch=m):c(m,i,d),d.deps=0,d.effects.length=0,d.hiddenContainer=u("div"),g?(l(null,h,d.hiddenContainer,null,i,d,o,s,a),d.deps<=0?d.resolve():(l(p,f,n,r,i,null,o,s,a),ct(d,f))):p&&ar(h,p)?(l(p,h,n,r,i,d,o,s,a),d.resolve(!0)):(l(null,h,d.hiddenContainer,null,i,d,o,s,a),d.deps<=0&&d.resolve()));else if(p&&ar(h,p))l(p,h,n,r,i,d,o,s,a),ct(d,h);else if(et(e,"onPending"),d.pendingBranch=h,d.pendingId++,l(null,h,d.hiddenContainer,null,i,d,o,s,a),d.deps<=0)d.resolve();else{const{timeout:t,pendingId:e}=d;t>0?setTimeout((()=>{d.pendingId===e&&d.fallback(f)}),t):0===t&&d.fallback(f)}}function it(t,e,n,r,o,s,a,l,u,d,h=!1){const{p:f,m:p,um:m,n:g,o:{parentNode:v,remove:y}}=d;let b;const _=ut(t);_&&(null==e?void 0:e.pendingBranch)&&(b=e.pendingId,e.deps++);const w=t.props?(0,i.He)(t.props.timeout):void 0;const x={vnode:t,parent:e,parentComponent:n,isSVG:a,container:r,hiddenContainer:o,anchor:s,deps:0,pendingId:0,timeout:"number"===typeof w?w:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:h,isUnmounted:!1,effects:[],resolve(t=!1,n=!1){const{vnode:r,activeBranch:i,pendingBranch:o,pendingId:s,effects:a,parentComponent:l,container:c}=x;if(x.isHydrating)x.isHydrating=!1;else if(!t){const t=i&&o.transition&&"out-in"===o.transition.mode;t&&(i.transition.afterLeave=()=>{s===x.pendingId&&p(o,c,e,0)});let{anchor:e}=x;i&&(e=g(i),m(i,l,x,!0)),t||p(o,c,e,0)}ct(x,o),x.pendingBranch=null,x.isInFallback=!1;let u=x.parent,d=!1;while(u){if(u.pendingBranch){u.effects.push(...a),d=!0;break}u=u.parent}d||M(a),x.effects=[],_&&e&&e.pendingBranch&&b===e.pendingId&&(e.deps--,0!==e.deps||n||e.resolve()),et(r,"onResolve")},fallback(t){if(!x.pendingBranch)return;const{vnode:e,activeBranch:n,parentComponent:r,container:i,isSVG:o}=x;et(e,"onFallback");const s=g(n),a=()=>{x.isInFallback&&(f(null,t,i,s,r,null,o,l,u),ct(x,t))},c=t.transition&&"out-in"===t.transition.mode;c&&(n.transition.afterLeave=a),x.isInFallback=!0,m(n,r,null,!0),c||a()},move(t,e,n){x.activeBranch&&p(x.activeBranch,t,e,n),x.container=t},next(){return x.activeBranch&&g(x.activeBranch)},registerDep(t,e){const n=!!x.pendingBranch;n&&x.deps++;const r=t.vnode.el;t.asyncDep.catch((e=>{c(e,t,0)})).then((i=>{if(t.isUnmounted||x.isUnmounted||x.pendingId!==t.suspenseId)return;t.asyncResolved=!0;const{vnode:o}=t;zr(t,i,!1),r&&(o.el=r);const s=!r&&t.subTree.el;e(t,o,v(r||t.subTree.el),r?null:g(t.subTree),x,a,u),s&&y(s),K(t,o.el),n&&0===--x.deps&&x.resolve()}))},unmount(t,e){x.isUnmounted=!0,x.activeBranch&&m(x.activeBranch,n,t,e),x.pendingBranch&&m(x.pendingBranch,n,t,e)}};return x}function ot(t,e,n,r,i,o,s,a,l){const c=e.suspense=it(e,r,n,t.parentNode,document.createElement("div"),null,i,o,s,a,!0),u=l(t,c.pendingBranch=e.ssContent,n,c,o,s);return 0===c.deps&&c.resolve(!1,!0),u}function st(t){const{shapeFlag:e,children:n}=t,r=32&e;t.ssContent=at(r?n.default:n),t.ssFallback=r?at(n.fallback):fr(Yn)}function at(t){let e;if((0,i.mf)(t)){const n=er&&t._c;n&&(t._d=!1,Jn()),t=t(),n&&(t._d=!0,e=Kn,Qn())}if((0,i.kJ)(t)){const e=$(t);0,t=e}return t=_r(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter((e=>e!==t))),t}function lt(t,e){e&&e.pendingBranch?(0,i.kJ)(t)?e.effects.push(...t):e.effects.push(t):M(t)}function ct(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t,i=n.el=e.el;r&&r.subTree===n&&(r.vnode.el=i,K(r,i))}function ut(t){var e;return null!=(null==(e=t.props)?void 0:e.suspensible)&&!1!==t.props.suspensible}function dt(t,e){return gt(t,null,e)}function ht(t,e){return gt(t,null,{flush:"post"})}function ft(t,e){return gt(t,null,{flush:"sync"})}const pt={};function mt(t,e,n){return gt(t,e,n)}function gt(t,e,{immediate:n,deep:o,flush:s,onTrack:c,onTrigger:u}=i.kT){var d;const h=(0,r.nZ)()===(null==(d=Ar)?void 0:d.scope)?Ar:null;let f,p,m=!1,g=!1;if((0,r.dq)(t)?(f=()=>t.value,m=(0,r.yT)(t)):(0,r.PG)(t)?(f=()=>t,o=!0):(0,i.kJ)(t)?(g=!0,m=t.some((t=>(0,r.PG)(t)||(0,r.yT)(t))),f=()=>t.map((t=>(0,r.dq)(t)?t.value:(0,r.PG)(t)?bt(t):(0,i.mf)(t)?a(t,h,2):void 0))):f=(0,i.mf)(t)?e?()=>a(t,h,2):()=>{if(!h||!h.isUnmounted)return p&&p(),l(t,h,3,[y])}:i.dG,e&&o){const t=f;f=()=>bt(t())}let v,y=t=>{p=S.onStop=()=>{a(t,h,4)}};if(Fr){if(y=i.dG,e?n&&l(e,h,3,[f(),g?[]:void 0,y]):f(),"sync"!==s)return i.dG;{const t=Qr();v=t.__watcherHandles||(t.__watcherHandles=[])}}let b=g?new Array(t.length).fill(pt):pt;const _=()=>{if(S.active)if(e){const t=S.run();(o||m||(g?t.some(((t,e)=>(0,i.aU)(t,b[e]))):(0,i.aU)(t,b)))&&(p&&p(),l(e,h,3,[t,b===pt?void 0:g&&b[0]===pt?[]:b,y]),b=t)}else S.run()};let w;_.allowRecurse=!!e,"sync"===s?w=_:"post"===s?w=()=>On(_,h&&h.suspense):(_.pre=!0,h&&(_.id=h.uid),w=()=>x(_));const S=new r.qq(f,w);e?n?_():b=S.run():"post"===s?On(S.run.bind(S),h&&h.suspense):S.run();const E=()=>{S.stop(),h&&h.scope&&(0,i.Od)(h.scope.effects,S)};return v&&v.push(E),E}function vt(t,e,n){const r=this.proxy,o=(0,i.HD)(t)?t.includes(".")?yt(r,t):()=>r[t]:t.bind(r,r);let s;(0,i.mf)(e)?s=e:(s=e.handler,n=e);const a=Ar;Lr(this);const l=gt(o,s.bind(r),n);return a?Lr(a):Dr(),l}function yt(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}function bt(t,e){if(!(0,i.Kn)(t)||t["__v_skip"])return t;if(e=e||new Set,e.has(t))return t;if(e.add(t),(0,r.dq)(t))bt(t.value,e);else if((0,i.kJ)(t))for(let n=0;n<t.length;n++)bt(t[n],e);else if((0,i.DM)(t)||(0,i._N)(t))t.forEach((t=>{bt(t,e)}));else if((0,i.PO)(t))for(const n in t)bt(t[n],e);return t}function _t(t,e){const n=F;if(null===n)return t;const r=qr(n)||n.proxy,o=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[t,n,a,l=i.kT]=e[s];t&&((0,i.mf)(t)&&(t={mounted:t,updated:t}),t.deep&&bt(n),o.push({dir:t,instance:r,value:n,oldValue:void 0,arg:a,modifiers:l}))}return t}function wt(t,e,n,i){const o=t.dirs,s=e&&e.dirs;for(let a=0;a<o.length;a++){const c=o[a];s&&(c.oldValue=s[a].value);let u=c.dir[i];u&&((0,r.Jd)(),l(u,n,8,[t.el,c,t,e]),(0,r.lk)())}}function xt(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Zt((()=>{t.isMounted=!0})),Qt((()=>{t.isUnmounting=!0})),t}const St=[Function,Array],Et={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:St,onEnter:St,onAfterEnter:St,onEnterCancelled:St,onBeforeLeave:St,onLeave:St,onAfterLeave:St,onLeaveCancelled:St,onBeforeAppear:St,onAppear:St,onAfterAppear:St,onAppearCancelled:St},Mt={name:"BaseTransition",props:Et,setup(t,{slots:e}){const n=kr(),i=xt();let o;return()=>{const s=e.default&&Pt(e.default(),!0);if(!s||!s.length)return;let a=s[0];if(s.length>1){let t=!1;for(const e of s)if(e.type!==Yn){0,a=e,t=!0;break}}const l=(0,r.IU)(t),{mode:c}=l;if(i.isLeaving)return kt(a);const u=Ot(a);if(!u)return kt(a);const d=At(u,l,i,n);Rt(u,d);const h=n.subTree,f=h&&Ot(h);let p=!1;const{getTransitionKey:m}=u.type;if(m){const t=m();void 0===o?o=t:t!==o&&(o=t,p=!0)}if(f&&f.type!==Yn&&(!ar(u,f)||p)){const t=At(f,l,i,n);if(Rt(f,t),"out-in"===c)return i.isLeaving=!0,t.afterLeave=()=>{i.isLeaving=!1,!1!==n.update.active&&n.update()},kt(a);"in-out"===c&&u.type!==Yn&&(t.delayLeave=(t,e,n)=>{const r=Ct(i,f);r[String(f.key)]=f,t._leaveCb=()=>{e(),t._leaveCb=void 0,delete d.delayedLeave},d.delayedLeave=n})}return a}}},Tt=Mt;function Ct(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function At(t,e,n,r){const{appear:o,mode:s,persisted:a=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:d,onEnterCancelled:h,onBeforeLeave:f,onLeave:p,onAfterLeave:m,onLeaveCancelled:g,onBeforeAppear:v,onAppear:y,onAfterAppear:b,onAppearCancelled:_}=e,w=String(t.key),x=Ct(n,t),S=(t,e)=>{t&&l(t,r,9,e)},E=(t,e)=>{const n=e[1];S(t,e),(0,i.kJ)(t)?t.every((t=>t.length<=1))&&n():t.length<=1&&n()},M={mode:s,persisted:a,beforeEnter(e){let r=c;if(!n.isMounted){if(!o)return;r=v||c}e._leaveCb&&e._leaveCb(!0);const i=x[w];i&&ar(t,i)&&i.el._leaveCb&&i.el._leaveCb(),S(r,[e])},enter(t){let e=u,r=d,i=h;if(!n.isMounted){if(!o)return;e=y||u,r=b||d,i=_||h}let s=!1;const a=t._enterCb=e=>{s||(s=!0,S(e?i:r,[t]),M.delayedLeave&&M.delayedLeave(),t._enterCb=void 0)};e?E(e,[t,a]):a()},leave(e,r){const i=String(t.key);if(e._enterCb&&e._enterCb(!0),n.isUnmounting)return r();S(f,[e]);let o=!1;const s=e._leaveCb=n=>{o||(o=!0,r(),S(n?g:m,[e]),e._leaveCb=void 0,x[i]===t&&delete x[i])};x[i]=t,p?E(p,[e,s]):s()},clone(t){return At(t,e,n,r)}};return M}function kt(t){if(Ut(t))return t=gr(t),t.children=null,t}function Ot(t){return Ut(t)?t.children?t.children[0]:void 0:t}function Rt(t,e){6&t.shapeFlag&&t.component?Rt(t.component.subTree,e):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Pt(t,e=!1,n){let r=[],i=0;for(let o=0;o<t.length;o++){let s=t[o];const a=null==n?s.key:String(n)+String(null!=s.key?s.key:o);s.type===$n?(128&s.patchFlag&&i++,r=r.concat(Pt(s.children,e,a))):(e||s.type!==Yn)&&r.push(null!=a?gr(s,{key:a}):s)}if(i>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}function Lt(t,e){return(0,i.mf)(t)?(()=>(0,i.l7)({name:t.name},e,{setup:t}))():t}const Dt=t=>!!t.type.__asyncLoader;function It(t){(0,i.mf)(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:o,delay:s=200,timeout:a,suspensible:l=!0,onError:u}=t;let d,h=null,f=0;const p=()=>(f++,h=null,m()),m=()=>{let t;return h||(t=h=e().catch((t=>{if(t=t instanceof Error?t:new Error(String(t)),u)return new Promise(((e,n)=>{const r=()=>e(p()),i=()=>n(t);u(t,r,i,f+1)}));throw t})).then((e=>t!==h&&h?h:(e&&(e.__esModule||"Module"===e[Symbol.toStringTag])&&(e=e.default),d=e,e))))};return Lt({name:"AsyncComponentWrapper",__asyncLoader:m,get __asyncResolved(){return d},setup(){const t=Ar;if(d)return()=>Nt(d,t);const e=e=>{h=null,c(e,t,13,!o)};if(l&&t.suspense||Fr)return m().then((e=>()=>Nt(e,t))).catch((t=>(e(t),()=>o?fr(o,{error:t}):null)));const i=(0,r.iH)(!1),u=(0,r.iH)(),f=(0,r.iH)(!!s);return s&&setTimeout((()=>{f.value=!1}),s),null!=a&&setTimeout((()=>{if(!i.value&&!u.value){const t=new Error(`Async component timed out after ${a}ms.`);e(t),u.value=t}}),a),m().then((()=>{i.value=!0,t.parent&&Ut(t.parent.vnode)&&x(t.parent.update)})).catch((t=>{e(t),u.value=t})),()=>i.value&&d?Nt(d,t):u.value&&o?fr(o,{error:u.value}):n&&!f.value?fr(n):void 0}})}function Nt(t,e){const{ref:n,props:r,children:i,ce:o}=e.vnode,s=fr(t,r,i);return s.ref=n,s.ce=o,delete e.vnode.ce,s}const Ut=t=>t.type.__isKeepAlive,Ft={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=kr(),r=n.ctx;if(!r.renderer)return()=>{const t=e.default&&e.default();return t&&1===t.length?t[0]:t};const o=new Map,s=new Set;let a=null;const l=n.suspense,{renderer:{p:c,m:u,um:d,o:{createElement:h}}}=r,f=h("div");function p(t){Gt(t),d(t,n,l,!0)}function m(t){o.forEach(((e,n)=>{const r=Yr(e.type);!r||t&&t(r)||g(n)}))}function g(t){const e=o.get(t);a&&ar(e,a)?a&&Gt(a):p(e),o.delete(t),s.delete(t)}r.activate=(t,e,n,r,o)=>{const s=t.component;u(t,e,n,0,l),c(s.vnode,t,e,n,s,l,r,t.slotScopeIds,o),On((()=>{s.isDeactivated=!1,s.a&&(0,i.ir)(s.a);const e=t.props&&t.props.onVnodeMounted;e&&Er(e,s.parent,t)}),l)},r.deactivate=t=>{const e=t.component;u(t,f,null,1,l),On((()=>{e.da&&(0,i.ir)(e.da);const n=t.props&&t.props.onVnodeUnmounted;n&&Er(n,e.parent,t),e.isDeactivated=!0}),l)},mt((()=>[t.include,t.exclude]),(([t,e])=>{t&&m((e=>Vt(t,e))),e&&m((t=>!Vt(e,t)))}),{flush:"post",deep:!0});let v=null;const y=()=>{null!=v&&o.set(v,$t(n.subTree))};return Zt(y),Jt(y),Qt((()=>{o.forEach((t=>{const{subTree:e,suspense:r}=n,i=$t(e);if(t.type!==i.type||t.key!==i.key)p(t);else{Gt(i);const t=i.component.da;t&&On(t,r)}}))})),()=>{if(v=null,!e.default)return null;const n=e.default(),r=n[0];if(n.length>1)return a=null,n;if(!sr(r)||!(4&r.shapeFlag)&&!(128&r.shapeFlag))return a=null,r;let i=$t(r);const l=i.type,c=Yr(Dt(i)?i.type.__asyncResolved||{}:l),{include:u,exclude:d,max:h}=t;if(u&&(!c||!Vt(u,c))||d&&c&&Vt(d,c))return a=i,r;const f=null==i.key?l:i.key,p=o.get(f);return i.el&&(i=gr(i),128&r.shapeFlag&&(r.ssContent=i)),v=f,p?(i.el=p.el,i.component=p.component,i.transition&&Rt(i,i.transition),i.shapeFlag|=512,s.delete(f),s.add(f)):(s.add(f),h&&s.size>parseInt(h,10)&&g(s.values().next().value)),i.shapeFlag|=256,a=i,J(r.type)?r:i}}},Bt=Ft;function Vt(t,e){return(0,i.kJ)(t)?t.some((t=>Vt(t,e))):(0,i.HD)(t)?t.split(",").includes(e):!!(0,i.Kj)(t)&&t.test(e)}function zt(t,e){Ht(t,"a",e)}function jt(t,e){Ht(t,"da",e)}function Ht(t,e,n=Ar){const r=t.__wdc||(t.__wdc=()=>{let e=n;while(e){if(e.isDeactivated)return;e=e.parent}return t()});if(qt(e,r,n),n){let t=n.parent;while(t&&t.parent)Ut(t.parent.vnode)&&Wt(r,e,n,t),t=t.parent}}function Wt(t,e,n,r){const o=qt(e,t,r,!0);te((()=>{(0,i.Od)(r[e],o)}),n)}function Gt(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function $t(t){return 128&t.shapeFlag?t.ssContent:t}function qt(t,e,n=Ar,i=!1){if(n){const o=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...i)=>{if(n.isUnmounted)return;(0,r.Jd)(),Lr(n);const o=l(e,n,t,i);return Dr(),(0,r.lk)(),o});return i?o.unshift(s):o.push(s),s}}const Yt=t=>(e,n=Ar)=>(!Fr||"sp"===t)&&qt(t,((...t)=>e(...t)),n),Xt=Yt("bm"),Zt=Yt("m"),Kt=Yt("bu"),Jt=Yt("u"),Qt=Yt("bum"),te=Yt("um"),ee=Yt("sp"),ne=Yt("rtg"),re=Yt("rtc");function ie(t,e=Ar){qt("ec",t,e)}const oe="components",se="directives";function ae(t,e){return de(oe,t,!0,e)||t}const le=Symbol.for("v-ndc");function ce(t){return(0,i.HD)(t)?de(oe,t,!1)||t:t||le}function ue(t){return de(se,t)}function de(t,e,n=!0,r=!1){const o=F||Ar;if(o){const n=o.type;if(t===oe){const t=Yr(n,!1);if(t&&(t===e||t===(0,i._A)(e)||t===(0,i.kC)((0,i._A)(e))))return n}const s=he(o[t]||n[t],e)||he(o.appContext[t],e);return!s&&r?n:s}}function he(t,e){return t&&(t[e]||t[(0,i._A)(e)]||t[(0,i.kC)((0,i._A)(e))])}function fe(t,e,n,r){let o;const s=n&&n[r];if((0,i.kJ)(t)||(0,i.HD)(t)){o=new Array(t.length);for(let n=0,r=t.length;n<r;n++)o[n]=e(t[n],n,void 0,s&&s[n])}else if("number"===typeof t){0,o=new Array(t);for(let n=0;n<t;n++)o[n]=e(n+1,n,void 0,s&&s[n])}else if((0,i.Kn)(t))if(t[Symbol.iterator])o=Array.from(t,((t,n)=>e(t,n,void 0,s&&s[n])));else{const n=Object.keys(t);o=new Array(n.length);for(let r=0,i=n.length;r<i;r++){const i=n[r];o[r]=e(t[i],i,r,s&&s[r])}}else o=[];return n&&(n[r]=o),o}function pe(t,e){for(let n=0;n<e.length;n++){const r=e[n];if((0,i.kJ)(r))for(let e=0;e<r.length;e++)t[r[e].name]=r[e].fn;else r&&(t[r.name]=r.key?(...t)=>{const e=r.fn(...t);return e&&(e.key=r.key),e}:r.fn)}return t}function me(t,e,n={},r,i){if(F.isCE||F.parent&&Dt(F.parent)&&F.parent.isCE)return"default"!==e&&(n.name=e),fr("slot",n,r&&r());let o=t[e];o&&o._c&&(o._d=!1),Jn();const s=o&&ge(o(n)),a=or($n,{key:n.key||s&&s.key||`_${e}`},s||(r?r():[]),s&&1===t._?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),o&&o._c&&(o._d=!0),a}function ge(t){return t.some((t=>!sr(t)||t.type!==Yn&&!(t.type===$n&&!ge(t.children))))?t:null}function ve(t,e){const n={};for(const r in t)n[e&&/[A-Z]/.test(r)?`on:${r}`:(0,i.hR)(r)]=t[r];return n}const ye=t=>t?Ir(t)?qr(t)||t.proxy:ye(t.parent):null,be=(0,i.l7)(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>ye(t.parent),$root:t=>ye(t.root),$emit:t=>t.emit,$options:t=>We(t),$forceUpdate:t=>t.f||(t.f=()=>x(t.update)),$nextTick:t=>t.n||(t.n=_.bind(t.proxy)),$watch:t=>vt.bind(t)}),_e=(t,e)=>t!==i.kT&&!t.__isScriptSetup&&(0,i.RI)(t,e),we={get({_:t},e){const{ctx:n,setupState:o,data:s,props:a,accessCache:l,type:c,appContext:u}=t;let d;if("$"!==e[0]){const r=l[e];if(void 0!==r)switch(r){case 1:return o[e];case 2:return s[e];case 4:return n[e];case 3:return a[e]}else{if(_e(o,e))return l[e]=1,o[e];if(s!==i.kT&&(0,i.RI)(s,e))return l[e]=2,s[e];if((d=t.propsOptions[0])&&(0,i.RI)(d,e))return l[e]=3,a[e];if(n!==i.kT&&(0,i.RI)(n,e))return l[e]=4,n[e];Be&&(l[e]=0)}}const h=be[e];let f,p;return h?("$attrs"===e&&(0,r.j)(t,"get",e),h(t)):(f=c.__cssModules)&&(f=f[e])?f:n!==i.kT&&(0,i.RI)(n,e)?(l[e]=4,n[e]):(p=u.config.globalProperties,(0,i.RI)(p,e)?p[e]:void 0)},set({_:t},e,n){const{data:r,setupState:o,ctx:s}=t;return _e(o,e)?(o[e]=n,!0):r!==i.kT&&(0,i.RI)(r,e)?(r[e]=n,!0):!(0,i.RI)(t.props,e)&&(("$"!==e[0]||!(e.slice(1)in t))&&(s[e]=n,!0))},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:o,propsOptions:s}},a){let l;return!!n[a]||t!==i.kT&&(0,i.RI)(t,a)||_e(e,a)||(l=s[0])&&(0,i.RI)(l,a)||(0,i.RI)(r,a)||(0,i.RI)(be,a)||(0,i.RI)(o.config.globalProperties,a)},defineProperty(t,e,n){return null!=n.get?t._.accessCache[e]=0:(0,i.RI)(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};const xe=(0,i.l7)({},we,{get(t,e){if(e!==Symbol.unscopables)return we.get(t,e,t)},has(t,e){const n="_"!==e[0]&&!(0,i.e1)(e);return n}});function Se(){return null}function Ee(){return null}function Me(t){0}function Te(t){0}function Ce(){return null}function Ae(){0}function ke(t,e){return null}function Oe(){return Le().slots}function Re(){return Le().attrs}function Pe(t,e,n){const i=kr();if(n&&n.local){const n=(0,r.iH)(t[e]);return mt((()=>t[e]),(t=>n.value=t)),mt(n,(n=>{n!==t[e]&&i.emit(`update:${e}`,n)})),n}return{__v_isRef:!0,get value(){return t[e]},set value(t){i.emit(`update:${e}`,t)}}}function Le(){const t=kr();return t.setupContext||(t.setupContext=$r(t))}function De(t){return(0,i.kJ)(t)?t.reduce(((t,e)=>(t[e]=null,t)),{}):t}function Ie(t,e){const n=De(t);for(const r in e){if(r.startsWith("__skip"))continue;let t=n[r];t?(0,i.kJ)(t)||(0,i.mf)(t)?t=n[r]={type:t,default:e[r]}:t.default=e[r]:null===t&&(t=n[r]={default:e[r]}),t&&e[`__skip_${r}`]&&(t.skipFactory=!0)}return n}function Ne(t,e){return t&&e?(0,i.kJ)(t)&&(0,i.kJ)(e)?t.concat(e):(0,i.l7)({},De(t),De(e)):t||e}function Ue(t,e){const n={};for(const r in t)e.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>t[r]});return n}function Fe(t){const e=kr();let n=t();return Dr(),(0,i.tI)(n)&&(n=n.catch((t=>{throw Lr(e),t}))),[n,()=>Lr(e)]}let Be=!0;function Ve(t){const e=We(t),n=t.proxy,o=t.ctx;Be=!1,e.beforeCreate&&je(e.beforeCreate,t,"bc");const{data:s,computed:a,methods:l,watch:c,provide:u,inject:d,created:h,beforeMount:f,mounted:p,beforeUpdate:m,updated:g,activated:v,deactivated:y,beforeDestroy:b,beforeUnmount:_,destroyed:w,unmounted:x,render:S,renderTracked:E,renderTriggered:M,errorCaptured:T,serverPrefetch:C,expose:A,inheritAttrs:k,components:O,directives:R,filters:P}=e,L=null;if(d&&ze(d,o,L),l)for(const r in l){const t=l[r];(0,i.mf)(t)&&(o[r]=t.bind(n))}if(s){0;const e=s.call(n,n);0,(0,i.Kn)(e)&&(t.data=(0,r.qj)(e))}if(Be=!0,a)for(const r in a){const t=a[r],e=(0,i.mf)(t)?t.bind(n,n):(0,i.mf)(t.get)?t.get.bind(n,n):i.dG;0;const s=!(0,i.mf)(t)&&(0,i.mf)(t.set)?t.set.bind(n):i.dG,l=Zr({get:e,set:s});Object.defineProperty(o,r,{enumerable:!0,configurable:!0,get:()=>l.value,set:t=>l.value=t})}if(c)for(const r in c)He(c[r],o,n,r);if(u){const t=(0,i.mf)(u)?u.call(n):u;Reflect.ownKeys(t).forEach((e=>{on(e,t[e])}))}function D(t,e){(0,i.kJ)(e)?e.forEach((e=>t(e.bind(n)))):e&&t(e.bind(n))}if(h&&je(h,t,"c"),D(Xt,f),D(Zt,p),D(Kt,m),D(Jt,g),D(zt,v),D(jt,y),D(ie,T),D(re,E),D(ne,M),D(Qt,_),D(te,x),D(ee,C),(0,i.kJ)(A))if(A.length){const e=t.exposed||(t.exposed={});A.forEach((t=>{Object.defineProperty(e,t,{get:()=>n[t],set:e=>n[t]=e})}))}else t.exposed||(t.exposed={});S&&t.render===i.dG&&(t.render=S),null!=k&&(t.inheritAttrs=k),O&&(t.components=O),R&&(t.directives=R)}function ze(t,e,n=i.dG){(0,i.kJ)(t)&&(t=Xe(t));for(const o in t){const n=t[o];let s;s=(0,i.Kn)(n)?"default"in n?sn(n.from||o,n.default,!0):sn(n.from||o):sn(n),(0,r.dq)(s)?Object.defineProperty(e,o,{enumerable:!0,configurable:!0,get:()=>s.value,set:t=>s.value=t}):e[o]=s}}function je(t,e,n){l((0,i.kJ)(t)?t.map((t=>t.bind(e.proxy))):t.bind(e.proxy),e,n)}function He(t,e,n,r){const o=r.includes(".")?yt(n,r):()=>n[r];if((0,i.HD)(t)){const n=e[t];(0,i.mf)(n)&&mt(o,n)}else if((0,i.mf)(t))mt(o,t.bind(n));else if((0,i.Kn)(t))if((0,i.kJ)(t))t.forEach((t=>He(t,e,n,r)));else{const r=(0,i.mf)(t.handler)?t.handler.bind(n):e[t.handler];(0,i.mf)(r)&&mt(o,r,t)}else 0}function We(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:o,optionsCache:s,config:{optionMergeStrategies:a}}=t.appContext,l=s.get(e);let c;return l?c=l:o.length||n||r?(c={},o.length&&o.forEach((t=>Ge(c,t,a,!0))),Ge(c,e,a)):c=e,(0,i.Kn)(e)&&s.set(e,c),c}function Ge(t,e,n,r=!1){const{mixins:i,extends:o}=e;o&&Ge(t,o,n,!0),i&&i.forEach((e=>Ge(t,e,n,!0)));for(const s in e)if(r&&"expose"===s);else{const r=$e[s]||n&&n[s];t[s]=r?r(t[s],e[s]):e[s]}return t}const $e={data:qe,props:Je,emits:Je,methods:Ke,computed:Ke,beforeCreate:Ze,created:Ze,beforeMount:Ze,mounted:Ze,beforeUpdate:Ze,updated:Ze,beforeDestroy:Ze,beforeUnmount:Ze,destroyed:Ze,unmounted:Ze,activated:Ze,deactivated:Ze,errorCaptured:Ze,serverPrefetch:Ze,components:Ke,directives:Ke,watch:Qe,provide:qe,inject:Ye};function qe(t,e){return e?t?function(){return(0,i.l7)((0,i.mf)(t)?t.call(this,this):t,(0,i.mf)(e)?e.call(this,this):e)}:e:t}function Ye(t,e){return Ke(Xe(t),Xe(e))}function Xe(t){if((0,i.kJ)(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ze(t,e){return t?[...new Set([].concat(t,e))]:e}function Ke(t,e){return t?(0,i.l7)(Object.create(null),t,e):e}function Je(t,e){return t?(0,i.kJ)(t)&&(0,i.kJ)(e)?[...new Set([...t,...e])]:(0,i.l7)(Object.create(null),De(t),De(null!=e?e:{})):e}function Qe(t,e){if(!t)return e;if(!e)return t;const n=(0,i.l7)(Object.create(null),t);for(const r in e)n[r]=Ze(t[r],e[r]);return n}function tn(){return{app:null,config:{isNativeTag:i.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let en=0;function nn(t,e){return function(n,r=null){(0,i.mf)(n)||(n=(0,i.l7)({},n)),null==r||(0,i.Kn)(r)||(r=null);const o=tn();const s=new Set;let a=!1;const l=o.app={_uid:en++,_component:n,_props:r,_container:null,_context:o,_instance:null,version:ri,get config(){return o.config},set config(t){0},use(t,...e){return s.has(t)||(t&&(0,i.mf)(t.install)?(s.add(t),t.install(l,...e)):(0,i.mf)(t)&&(s.add(t),t(l,...e))),l},mixin(t){return o.mixins.includes(t)||o.mixins.push(t),l},component(t,e){return e?(o.components[t]=e,l):o.components[t]},directive(t,e){return e?(o.directives[t]=e,l):o.directives[t]},mount(i,s,c){if(!a){0;const u=fr(n,r);return u.appContext=o,s&&e?e(u,i):t(u,i,c),a=!0,l._container=i,i.__vue_app__=l,qr(u.component)||u.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(t,e){return o.provides[t]=e,l},runWithContext(t){rn=l;try{return t()}finally{rn=null}}};return l}}let rn=null;function on(t,e){if(Ar){let n=Ar.provides;const r=Ar.parent&&Ar.parent.provides;r===n&&(n=Ar.provides=Object.create(r)),n[t]=e}else 0}function sn(t,e,n=!1){const r=Ar||F;if(r||rn){const o=r?null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:rn._context.provides;if(o&&t in o)return o[t];if(arguments.length>1)return n&&(0,i.mf)(e)?e.call(r&&r.proxy):e}else 0}function an(){return!!(Ar||F||rn)}function ln(t,e,n,o=!1){const s={},a={};(0,i.Nj)(a,cr,1),t.propsDefaults=Object.create(null),un(t,e,s,a);for(const r in t.propsOptions[0])r in s||(s[r]=void 0);n?t.props=o?s:(0,r.Um)(s):t.type.props?t.props=s:t.props=a,t.attrs=a}function cn(t,e,n,o){const{props:s,attrs:a,vnode:{patchFlag:l}}=t,c=(0,r.IU)(s),[u]=t.propsOptions;let d=!1;if(!(o||l>0)||16&l){let r;un(t,e,s,a)&&(d=!0);for(const o in c)e&&((0,i.RI)(e,o)||(r=(0,i.rs)(o))!==o&&(0,i.RI)(e,r))||(u?!n||void 0===n[o]&&void 0===n[r]||(s[o]=dn(u,c,o,void 0,t,!0)):delete s[o]);if(a!==c)for(const t in a)e&&(0,i.RI)(e,t)||(delete a[t],d=!0)}else if(8&l){const n=t.vnode.dynamicProps;for(let r=0;r<n.length;r++){let o=n[r];if(U(t.emitsOptions,o))continue;const l=e[o];if(u)if((0,i.RI)(a,o))l!==a[o]&&(a[o]=l,d=!0);else{const e=(0,i._A)(o);s[e]=dn(u,c,e,l,t,!1)}else l!==a[o]&&(a[o]=l,d=!0)}}d&&(0,r.X$)(t,"set","$attrs")}function un(t,e,n,o){const[s,a]=t.propsOptions;let l,c=!1;if(e)for(let r in e){if((0,i.Gg)(r))continue;const u=e[r];let d;s&&(0,i.RI)(s,d=(0,i._A)(r))?a&&a.includes(d)?(l||(l={}))[d]=u:n[d]=u:U(t.emitsOptions,r)||r in o&&u===o[r]||(o[r]=u,c=!0)}if(a){const e=(0,r.IU)(n),o=l||i.kT;for(let r=0;r<a.length;r++){const l=a[r];n[l]=dn(s,e,l,o[l],t,!(0,i.RI)(o,l))}}return c}function dn(t,e,n,r,o,s){const a=t[n];if(null!=a){const t=(0,i.RI)(a,"default");if(t&&void 0===r){const t=a.default;if(a.type!==Function&&!a.skipFactory&&(0,i.mf)(t)){const{propsDefaults:i}=o;n in i?r=i[n]:(Lr(o),r=i[n]=t.call(null,e),Dr())}else r=t}a[0]&&(s&&!t?r=!1:!a[1]||""!==r&&r!==(0,i.rs)(n)||(r=!0))}return r}function hn(t,e,n=!1){const r=e.propsCache,o=r.get(t);if(o)return o;const s=t.props,a={},l=[];let c=!1;if(!(0,i.mf)(t)){const r=t=>{c=!0;const[n,r]=hn(t,e,!0);(0,i.l7)(a,n),r&&l.push(...r)};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}if(!s&&!c)return(0,i.Kn)(t)&&r.set(t,i.Z6),i.Z6;if((0,i.kJ)(s))for(let d=0;d<s.length;d++){0;const t=(0,i._A)(s[d]);fn(t)&&(a[t]=i.kT)}else if(s){0;for(const t in s){const e=(0,i._A)(t);if(fn(e)){const n=s[t],r=a[e]=(0,i.kJ)(n)||(0,i.mf)(n)?{type:n}:(0,i.l7)({},n);if(r){const t=gn(Boolean,r.type),n=gn(String,r.type);r[0]=t>-1,r[1]=n<0||t<n,(t>-1||(0,i.RI)(r,"default"))&&l.push(e)}}}}const u=[a,l];return(0,i.Kn)(t)&&r.set(t,u),u}function fn(t){return"$"!==t[0]}function pn(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:null===t?"null":""}function mn(t,e){return pn(t)===pn(e)}function gn(t,e){return(0,i.kJ)(e)?e.findIndex((e=>mn(e,t))):(0,i.mf)(e)&&mn(e,t)?0:-1}const vn=t=>"_"===t[0]||"$stable"===t,yn=t=>(0,i.kJ)(t)?t.map(_r):[_r(t)],bn=(t,e,n)=>{if(e._n)return e;const r=W(((...t)=>yn(e(...t))),n);return r._c=!1,r},_n=(t,e,n)=>{const r=t._ctx;for(const o in t){if(vn(o))continue;const n=t[o];if((0,i.mf)(n))e[o]=bn(o,n,r);else if(null!=n){0;const t=yn(n);e[o]=()=>t}}},wn=(t,e)=>{const n=yn(e);t.slots.default=()=>n},xn=(t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=(0,r.IU)(e),(0,i.Nj)(e,"_",n)):_n(e,t.slots={})}else t.slots={},e&&wn(t,e);(0,i.Nj)(t.slots,cr,1)},Sn=(t,e,n)=>{const{vnode:r,slots:o}=t;let s=!0,a=i.kT;if(32&r.shapeFlag){const t=e._;t?n&&1===t?s=!1:((0,i.l7)(o,e),n||1!==t||delete o._):(s=!e.$stable,_n(e,o)),a=e}else e&&(wn(t,e),a={default:1});if(s)for(const i in o)vn(i)||i in a||delete o[i]};function En(t,e,n,o,s=!1){if((0,i.kJ)(t))return void t.forEach(((t,r)=>En(t,e&&((0,i.kJ)(e)?e[r]:e),n,o,s)));if(Dt(o)&&!s)return;const l=4&o.shapeFlag?qr(o.component)||o.component.proxy:o.el,c=s?null:l,{i:u,r:d}=t;const h=e&&e.r,f=u.refs===i.kT?u.refs={}:u.refs,p=u.setupState;if(null!=h&&h!==d&&((0,i.HD)(h)?(f[h]=null,(0,i.RI)(p,h)&&(p[h]=null)):(0,r.dq)(h)&&(h.value=null)),(0,i.mf)(d))a(d,u,12,[c,f]);else{const e=(0,i.HD)(d),o=(0,r.dq)(d);if(e||o){const r=()=>{if(t.f){const n=e?(0,i.RI)(p,d)?p[d]:f[d]:d.value;s?(0,i.kJ)(n)&&(0,i.Od)(n,l):(0,i.kJ)(n)?n.includes(l)||n.push(l):e?(f[d]=[l],(0,i.RI)(p,d)&&(p[d]=f[d])):(d.value=[l],t.k&&(f[t.k]=d.value))}else e?(f[d]=c,(0,i.RI)(p,d)&&(p[d]=c)):o&&(d.value=c,t.k&&(f[t.k]=c))};c?(r.id=-1,On(r,n)):r()}else 0}}let Mn=!1;const Tn=t=>/svg/.test(t.namespaceURI)&&"foreignObject"!==t.tagName,Cn=t=>8===t.nodeType;function An(t){const{mt:e,p:n,o:{patchProp:r,createText:o,nextSibling:s,parentNode:a,remove:l,insert:c,createComment:u}}=t,d=(t,e)=>{if(!e.hasChildNodes())return n(null,t,e),C(),void(e._vnode=t);Mn=!1,h(e.firstChild,t,null,null,null),C(),e._vnode=t,Mn&&console.error("Hydration completed but contains mismatches.")},h=(n,r,i,l,u,d=!1)=>{const y=Cn(n)&&"["===n.data,b=()=>g(n,r,i,l,u,y),{type:_,ref:w,shapeFlag:x,patchFlag:S}=r;let E=n.nodeType;r.el=n,-2===S&&(d=!1,r.dynamicChildren=null);let M=null;switch(_){case qn:3!==E?""===r.children?(c(r.el=o(""),a(n),n),M=n):M=b():(n.data!==r.children&&(Mn=!0,n.data=r.children),M=s(n));break;case Yn:M=8!==E||y?b():s(n);break;case Xn:if(y&&(n=s(n),E=n.nodeType),1===E||3===E){M=n;const t=!r.children.length;for(let e=0;e<r.staticCount;e++)t&&(r.children+=1===M.nodeType?M.outerHTML:M.data),e===r.staticCount-1&&(r.anchor=M),M=s(M);return y?s(M):M}b();break;case $n:M=y?m(n,r,i,l,u,d):b();break;default:if(1&x)M=1!==E||r.type.toLowerCase()!==n.tagName.toLowerCase()?b():f(n,r,i,l,u,d);else if(6&x){r.slotScopeIds=u;const t=a(n);if(e(r,t,null,i,l,Tn(t),d),M=y?v(n):s(n),M&&Cn(M)&&"teleport end"===M.data&&(M=s(M)),Dt(r)){let e;y?(e=fr($n),e.anchor=M?M.previousSibling:t.lastChild):e=3===n.nodeType?vr(""):fr("div"),e.el=n,r.component.subTree=e}}else 64&x?M=8!==E?b():r.type.hydrate(n,r,i,l,u,d,t,p):128&x&&(M=r.type.hydrate(n,r,i,l,Tn(a(n)),u,d,t,h))}return null!=w&&En(w,null,l,r),M},f=(t,e,n,o,s,a)=>{a=a||!!e.dynamicChildren;const{type:c,props:u,patchFlag:d,shapeFlag:h,dirs:f}=e,m="input"===c&&f||"option"===c;if(m||-1!==d){if(f&&wt(e,null,n,"created"),u)if(m||!a||48&d)for(const e in u)(m&&e.endsWith("value")||(0,i.F7)(e)&&!(0,i.Gg)(e))&&r(t,e,null,u[e],!1,void 0,n);else u.onClick&&r(t,"onClick",null,u.onClick,!1,void 0,n);let c;if((c=u&&u.onVnodeBeforeMount)&&Er(c,n,e),f&&wt(e,null,n,"beforeMount"),((c=u&&u.onVnodeMounted)||f)&&lt((()=>{c&&Er(c,n,e),f&&wt(e,null,n,"mounted")}),o),16&h&&(!u||!u.innerHTML&&!u.textContent)){let r=p(t.firstChild,e,t,n,o,s,a);while(r){Mn=!0;const t=r;r=r.nextSibling,l(t)}}else 8&h&&t.textContent!==e.children&&(Mn=!0,t.textContent=e.children)}return t.nextSibling},p=(t,e,r,i,o,s,a)=>{a=a||!!e.dynamicChildren;const l=e.children,c=l.length;for(let u=0;u<c;u++){const e=a?l[u]:l[u]=_r(l[u]);if(t)t=h(t,e,i,o,s,a);else{if(e.type===qn&&!e.children)continue;Mn=!0,n(null,e,r,null,i,o,Tn(r),s)}}return t},m=(t,e,n,r,i,o)=>{const{slotScopeIds:l}=e;l&&(i=i?i.concat(l):l);const d=a(t),h=p(s(t),e,d,n,r,i,o);return h&&Cn(h)&&"]"===h.data?s(e.anchor=h):(Mn=!0,c(e.anchor=u("]"),d,h),h)},g=(t,e,r,i,o,c)=>{if(Mn=!0,e.el=null,c){const e=v(t);while(1){const n=s(t);if(!n||n===e)break;l(n)}}const u=s(t),d=a(t);return l(t),n(null,e,d,u,r,i,Tn(d),o),u},v=t=>{let e=0;while(t)if(t=s(t),t&&Cn(t)&&("["===t.data&&e++,"]"===t.data)){if(0===e)return s(t);e--}return t};return[d,h]}function kn(){}const On=lt;function Rn(t){return Ln(t)}function Pn(t){return Ln(t,An)}function Ln(t,e){kn();const n=(0,i.E9)();n.__VUE__=!0;const{insert:o,remove:s,patchProp:a,createElement:l,createText:c,createComment:u,setText:d,setElementText:h,parentNode:f,nextSibling:p,setScopeId:m=i.dG,insertStaticContent:g}=t,v=(t,e,n,r=null,i=null,o=null,s=!1,a=null,l=!!e.dynamicChildren)=>{if(t===e)return;t&&!ar(t,e)&&(r=J(t),W(t,i,o,!0),t=null),-2===e.patchFlag&&(l=!1,e.dynamicChildren=null);const{type:c,ref:u,shapeFlag:d}=e;switch(c){case qn:y(t,e,n,r);break;case Yn:b(t,e,n,r);break;case Xn:null==t&&_(e,n,r,s);break;case $n:D(t,e,n,r,i,o,s,a,l);break;default:1&d?M(t,e,n,r,i,o,s,a,l):6&d?I(t,e,n,r,i,o,s,a,l):(64&d||128&d)&&c.process(t,e,n,r,i,o,s,a,l,tt)}null!=u&&i&&En(u,t&&t.ref,o,e||t,!e)},y=(t,e,n,r)=>{if(null==t)o(e.el=c(e.children),n,r);else{const n=e.el=t.el;e.children!==t.children&&d(n,e.children)}},b=(t,e,n,r)=>{null==t?o(e.el=u(e.children||""),n,r):e.el=t.el},_=(t,e,n,r)=>{[t.el,t.anchor]=g(t.children,e,n,r,t.el,t.anchor)},w=({el:t,anchor:e},n,r)=>{let i;while(t&&t!==e)i=p(t),o(t,n,r),t=i;o(e,n,r)},S=({el:t,anchor:e})=>{let n;while(t&&t!==e)n=p(t),s(t),t=n;s(e)},M=(t,e,n,r,i,o,s,a,l)=>{s=s||"svg"===e.type,null==t?A(e,n,r,i,o,s,a,l):R(t,e,i,o,s,a,l)},A=(t,e,n,r,s,c,u,d)=>{let f,p;const{type:m,props:g,shapeFlag:v,transition:y,dirs:b}=t;if(f=t.el=l(t.type,c,g&&g.is,g),8&v?h(f,t.children):16&v&&O(t.children,f,null,r,s,c&&"foreignObject"!==m,u,d),b&&wt(t,null,r,"created"),k(f,t,t.scopeId,u,r),g){for(const e in g)"value"===e||(0,i.Gg)(e)||a(f,e,null,g[e],c,t.children,r,s,Z);"value"in g&&a(f,"value",null,g.value),(p=g.onVnodeBeforeMount)&&Er(p,r,t)}b&&wt(t,null,r,"beforeMount");const _=(!s||s&&!s.pendingBranch)&&y&&!y.persisted;_&&y.beforeEnter(f),o(f,e,n),((p=g&&g.onVnodeMounted)||_||b)&&On((()=>{p&&Er(p,r,t),_&&y.enter(f),b&&wt(t,null,r,"mounted")}),s)},k=(t,e,n,r,i)=>{if(n&&m(t,n),r)for(let o=0;o<r.length;o++)m(t,r[o]);if(i){let n=i.subTree;if(e===n){const e=i.vnode;k(t,e,e.scopeId,e.slotScopeIds,i.parent)}}},O=(t,e,n,r,i,o,s,a,l=0)=>{for(let c=l;c<t.length;c++){const l=t[c]=a?wr(t[c]):_r(t[c]);v(null,l,e,n,r,i,o,s,a)}},R=(t,e,n,r,o,s,l)=>{const c=e.el=t.el;let{patchFlag:u,dynamicChildren:d,dirs:f}=e;u|=16&t.patchFlag;const p=t.props||i.kT,m=e.props||i.kT;let g;n&&Dn(n,!1),(g=m.onVnodeBeforeUpdate)&&Er(g,n,e,t),f&&wt(e,t,n,"beforeUpdate"),n&&Dn(n,!0);const v=o&&"foreignObject"!==e.type;if(d?P(t.dynamicChildren,d,c,n,r,v,s):l||V(t,e,c,null,n,r,v,s,!1),u>0){if(16&u)L(c,e,p,m,n,r,o);else if(2&u&&p.class!==m.class&&a(c,"class",null,m.class,o),4&u&&a(c,"style",p.style,m.style,o),8&u){const i=e.dynamicProps;for(let e=0;e<i.length;e++){const s=i[e],l=p[s],u=m[s];u===l&&"value"!==s||a(c,s,l,u,o,t.children,n,r,Z)}}1&u&&t.children!==e.children&&h(c,e.children)}else l||null!=d||L(c,e,p,m,n,r,o);((g=m.onVnodeUpdated)||f)&&On((()=>{g&&Er(g,n,e,t),f&&wt(e,t,n,"updated")}),r)},P=(t,e,n,r,i,o,s)=>{for(let a=0;a<e.length;a++){const l=t[a],c=e[a],u=l.el&&(l.type===$n||!ar(l,c)||70&l.shapeFlag)?f(l.el):n;v(l,c,u,null,r,i,o,s,!0)}},L=(t,e,n,r,o,s,l)=>{if(n!==r){if(n!==i.kT)for(const c in n)(0,i.Gg)(c)||c in r||a(t,c,n[c],null,l,e.children,o,s,Z);for(const c in r){if((0,i.Gg)(c))continue;const u=r[c],d=n[c];u!==d&&"value"!==c&&a(t,c,d,u,l,e.children,o,s,Z)}"value"in r&&a(t,"value",n.value,r.value)}},D=(t,e,n,r,i,s,a,l,u)=>{const d=e.el=t?t.el:c(""),h=e.anchor=t?t.anchor:c("");let{patchFlag:f,dynamicChildren:p,slotScopeIds:m}=e;m&&(l=l?l.concat(m):m),null==t?(o(d,n,r),o(h,n,r),O(e.children,n,h,i,s,a,l,u)):f>0&&64&f&&p&&t.dynamicChildren?(P(t.dynamicChildren,p,n,i,s,a,l),(null!=e.key||i&&e===i.subTree)&&In(t,e,!0)):V(t,e,n,h,i,s,a,l,u)},I=(t,e,n,r,i,o,s,a,l)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?i.ctx.activate(e,n,r,s,l):N(e,n,r,i,o,s,l):U(t,e,l)},N=(t,e,n,r,i,o,s)=>{const a=t.component=Cr(t,r,i);if(Ut(t)&&(a.ctx.renderer=tt),Br(a),a.asyncDep){if(i&&i.registerDep(a,F),!t.el){const t=a.subTree=fr(Yn);b(null,t,e,n)}}else F(a,t,e,n,i,o,s)},U=(t,e,n)=>{const r=e.component=t.component;if(X(t,e,n)){if(r.asyncDep&&!r.asyncResolved)return void B(r,e,n);r.next=e,E(r.update),r.update()}else e.el=t.el,r.vnode=e},F=(t,e,n,o,s,a,l)=>{const c=()=>{if(t.isMounted){let e,{next:n,bu:r,u:o,parent:c,vnode:u}=t,d=n;0,Dn(t,!1),n?(n.el=u.el,B(t,n,l)):n=u,r&&(0,i.ir)(r),(e=n.props&&n.props.onVnodeBeforeUpdate)&&Er(e,c,n,u),Dn(t,!0);const h=G(t);0;const p=t.subTree;t.subTree=h,v(p,h,f(p.el),J(p),t,s,a),n.el=h.el,null===d&&K(t,h.el),o&&On(o,s),(e=n.props&&n.props.onVnodeUpdated)&&On((()=>Er(e,c,n,u)),s)}else{let r;const{el:l,props:c}=e,{bm:u,m:d,parent:h}=t,f=Dt(e);if(Dn(t,!1),u&&(0,i.ir)(u),!f&&(r=c&&c.onVnodeBeforeMount)&&Er(r,h,e),Dn(t,!0),l&&nt){const n=()=>{t.subTree=G(t),nt(l,t.subTree,t,s,null)};f?e.type.__asyncLoader().then((()=>!t.isUnmounted&&n())):n()}else{0;const r=t.subTree=G(t);0,v(null,r,n,o,t,s,a),e.el=r.el}if(d&&On(d,s),!f&&(r=c&&c.onVnodeMounted)){const t=e;On((()=>Er(r,h,t)),s)}(256&e.shapeFlag||h&&Dt(h.vnode)&&256&h.vnode.shapeFlag)&&t.a&&On(t.a,s),t.isMounted=!0,e=n=o=null}},u=t.effect=new r.qq(c,(()=>x(d)),t.scope),d=t.update=()=>u.run();d.id=t.uid,Dn(t,!0),d()},B=(t,e,n)=>{e.component=t;const i=t.vnode.props;t.vnode=e,t.next=null,cn(t,e.props,i,n),Sn(t,e.children,n),(0,r.Jd)(),T(),(0,r.lk)()},V=(t,e,n,r,i,o,s,a,l=!1)=>{const c=t&&t.children,u=t?t.shapeFlag:0,d=e.children,{patchFlag:f,shapeFlag:p}=e;if(f>0){if(128&f)return void j(c,d,n,r,i,o,s,a,l);if(256&f)return void z(c,d,n,r,i,o,s,a,l)}8&p?(16&u&&Z(c,i,o),d!==c&&h(n,d)):16&u?16&p?j(c,d,n,r,i,o,s,a,l):Z(c,i,o,!0):(8&u&&h(n,""),16&p&&O(d,n,r,i,o,s,a,l))},z=(t,e,n,r,o,s,a,l,c)=>{t=t||i.Z6,e=e||i.Z6;const u=t.length,d=e.length,h=Math.min(u,d);let f;for(f=0;f<h;f++){const r=e[f]=c?wr(e[f]):_r(e[f]);v(t[f],r,n,null,o,s,a,l,c)}u>d?Z(t,o,s,!0,!1,h):O(e,n,r,o,s,a,l,c,h)},j=(t,e,n,r,o,s,a,l,c)=>{let u=0;const d=e.length;let h=t.length-1,f=d-1;while(u<=h&&u<=f){const r=t[u],i=e[u]=c?wr(e[u]):_r(e[u]);if(!ar(r,i))break;v(r,i,n,null,o,s,a,l,c),u++}while(u<=h&&u<=f){const r=t[h],i=e[f]=c?wr(e[f]):_r(e[f]);if(!ar(r,i))break;v(r,i,n,null,o,s,a,l,c),h--,f--}if(u>h){if(u<=f){const t=f+1,i=t<d?e[t].el:r;while(u<=f)v(null,e[u]=c?wr(e[u]):_r(e[u]),n,i,o,s,a,l,c),u++}}else if(u>f)while(u<=h)W(t[u],o,s,!0),u++;else{const p=u,m=u,g=new Map;for(u=m;u<=f;u++){const t=e[u]=c?wr(e[u]):_r(e[u]);null!=t.key&&g.set(t.key,u)}let y,b=0;const _=f-m+1;let w=!1,x=0;const S=new Array(_);for(u=0;u<_;u++)S[u]=0;for(u=p;u<=h;u++){const r=t[u];if(b>=_){W(r,o,s,!0);continue}let i;if(null!=r.key)i=g.get(r.key);else for(y=m;y<=f;y++)if(0===S[y-m]&&ar(r,e[y])){i=y;break}void 0===i?W(r,o,s,!0):(S[i-m]=u+1,i>=x?x=i:w=!0,v(r,e[i],n,null,o,s,a,l,c),b++)}const E=w?Nn(S):i.Z6;for(y=E.length-1,u=_-1;u>=0;u--){const t=m+u,i=e[t],h=t+1<d?e[t+1].el:r;0===S[u]?v(null,i,n,h,o,s,a,l,c):w&&(y<0||u!==E[y]?H(i,n,h,2):y--)}}},H=(t,e,n,r,i=null)=>{const{el:s,type:a,transition:l,children:c,shapeFlag:u}=t;if(6&u)return void H(t.component.subTree,e,n,r);if(128&u)return void t.suspense.move(e,n,r);if(64&u)return void a.move(t,e,n,tt);if(a===$n){o(s,e,n);for(let t=0;t<c.length;t++)H(c[t],e,n,r);return void o(t.anchor,e,n)}if(a===Xn)return void w(t,e,n);const d=2!==r&&1&u&&l;if(d)if(0===r)l.beforeEnter(s),o(s,e,n),On((()=>l.enter(s)),i);else{const{leave:t,delayLeave:r,afterLeave:i}=l,a=()=>o(s,e,n),c=()=>{t(s,(()=>{a(),i&&i()}))};r?r(s,a,c):c()}else o(s,e,n)},W=(t,e,n,r=!1,i=!1)=>{const{type:o,props:s,ref:a,children:l,dynamicChildren:c,shapeFlag:u,patchFlag:d,dirs:h}=t;if(null!=a&&En(a,null,n,t,!0),256&u)return void e.ctx.deactivate(t);const f=1&u&&h,p=!Dt(t);let m;if(p&&(m=s&&s.onVnodeBeforeUnmount)&&Er(m,e,t),6&u)Y(t.component,n,r);else{if(128&u)return void t.suspense.unmount(n,r);f&&wt(t,null,e,"beforeUnmount"),64&u?t.type.remove(t,e,n,i,tt,r):c&&(o!==$n||d>0&&64&d)?Z(c,e,n,!1,!0):(o===$n&&384&d||!i&&16&u)&&Z(l,e,n),r&&$(t)}(p&&(m=s&&s.onVnodeUnmounted)||f)&&On((()=>{m&&Er(m,e,t),f&&wt(t,null,e,"unmounted")}),n)},$=t=>{const{type:e,el:n,anchor:r,transition:i}=t;if(e===$n)return void q(n,r);if(e===Xn)return void S(t);const o=()=>{s(n),i&&!i.persisted&&i.afterLeave&&i.afterLeave()};if(1&t.shapeFlag&&i&&!i.persisted){const{leave:e,delayLeave:r}=i,s=()=>e(n,o);r?r(t.el,o,s):s()}else o()},q=(t,e)=>{let n;while(t!==e)n=p(t),s(t),t=n;s(e)},Y=(t,e,n)=>{const{bum:r,scope:o,update:s,subTree:a,um:l}=t;r&&(0,i.ir)(r),o.stop(),s&&(s.active=!1,W(a,t,e,n)),l&&On(l,e),On((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},Z=(t,e,n,r=!1,i=!1,o=0)=>{for(let s=o;s<t.length;s++)W(t[s],e,n,r,i)},J=t=>6&t.shapeFlag?J(t.component.subTree):128&t.shapeFlag?t.suspense.next():p(t.anchor||t.el),Q=(t,e,n)=>{null==t?e._vnode&&W(e._vnode,null,null,!0):v(e._vnode||null,t,e,null,null,null,n),T(),C(),e._vnode=t},tt={p:v,um:W,m:H,r:$,mt:N,mc:O,pc:V,pbc:P,n:J,o:t};let et,nt;return e&&([et,nt]=e(tt)),{render:Q,hydrate:et,createApp:nn(Q,et)}}function Dn({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function In(t,e,n=!1){const r=t.children,o=e.children;if((0,i.kJ)(r)&&(0,i.kJ)(o))for(let i=0;i<r.length;i++){const t=r[i];let e=o[i];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=o[i]=wr(o[i]),e.el=t.el),n||In(t,e)),e.type===qn&&(e.el=t.el)}}function Nn(t){const e=t.slice(),n=[0];let r,i,o,s,a;const l=t.length;for(r=0;r<l;r++){const l=t[r];if(0!==l){if(i=n[n.length-1],t[i]<l){e[r]=i,n.push(r);continue}o=0,s=n.length-1;while(o<s)a=o+s>>1,t[n[a]]<l?o=a+1:s=a;l<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}o=n.length,s=n[o-1];while(o-- >0)n[o]=s,s=e[s];return n}const Un=t=>t.__isTeleport,Fn=t=>t&&(t.disabled||""===t.disabled),Bn=t=>"undefined"!==typeof SVGElement&&t instanceof SVGElement,Vn=(t,e)=>{const n=t&&t.to;if((0,i.HD)(n)){if(e){const t=e(n);return t}return null}return n},zn={__isTeleport:!0,process(t,e,n,r,i,o,s,a,l,c){const{mc:u,pc:d,pbc:h,o:{insert:f,querySelector:p,createText:m,createComment:g}}=c,v=Fn(e.props);let{shapeFlag:y,children:b,dynamicChildren:_}=e;if(null==t){const t=e.el=m(""),c=e.anchor=m("");f(t,n,r),f(c,n,r);const d=e.target=Vn(e.props,p),h=e.targetAnchor=m("");d&&(f(h,d),s=s||Bn(d));const g=(t,e)=>{16&y&&u(b,t,e,i,o,s,a,l)};v?g(n,c):d&&g(d,h)}else{e.el=t.el;const r=e.anchor=t.anchor,u=e.target=t.target,f=e.targetAnchor=t.targetAnchor,m=Fn(t.props),g=m?n:u,y=m?r:f;if(s=s||Bn(u),_?(h(t.dynamicChildren,_,g,i,o,s,a),In(t,e,!0)):l||d(t,e,g,y,i,o,s,a,!1),v)m||jn(e,n,r,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const t=e.target=Vn(e.props,p);t&&jn(e,t,null,c,0)}else m&&jn(e,u,f,c,1)}Gn(e)},remove(t,e,n,r,{um:i,o:{remove:o}},s){const{shapeFlag:a,children:l,anchor:c,targetAnchor:u,target:d,props:h}=t;if(d&&o(u),(s||!Fn(h))&&(o(c),16&a))for(let f=0;f<l.length;f++){const t=l[f];i(t,e,n,!0,!!t.dynamicChildren)}},move:jn,hydrate:Hn};function jn(t,e,n,{o:{insert:r},m:i},o=2){0===o&&r(t.targetAnchor,e,n);const{el:s,anchor:a,shapeFlag:l,children:c,props:u}=t,d=2===o;if(d&&r(s,e,n),(!d||Fn(u))&&16&l)for(let h=0;h<c.length;h++)i(c[h],e,n,2);d&&r(a,e,n)}function Hn(t,e,n,r,i,o,{o:{nextSibling:s,parentNode:a,querySelector:l}},c){const u=e.target=Vn(e.props,l);if(u){const l=u._lpa||u.firstChild;if(16&e.shapeFlag)if(Fn(e.props))e.anchor=c(s(t),e,a(t),n,r,i,o),e.targetAnchor=l;else{e.anchor=s(t);let a=l;while(a)if(a=s(a),a&&8===a.nodeType&&"teleport anchor"===a.data){e.targetAnchor=a,u._lpa=e.targetAnchor&&s(e.targetAnchor);break}c(l,e,u,n,r,i,o)}Gn(e)}return e.anchor&&s(e.anchor)}const Wn=zn;function Gn(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;while(n!==t.targetAnchor)1===n.nodeType&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const $n=Symbol.for("v-fgt"),qn=Symbol.for("v-txt"),Yn=Symbol.for("v-cmt"),Xn=Symbol.for("v-stc"),Zn=[];let Kn=null;function Jn(t=!1){Zn.push(Kn=t?null:[])}function Qn(){Zn.pop(),Kn=Zn[Zn.length-1]||null}let tr,er=1;function nr(t){er+=t}function rr(t){return t.dynamicChildren=er>0?Kn||i.Z6:null,Qn(),er>0&&Kn&&Kn.push(t),t}function ir(t,e,n,r,i,o){return rr(hr(t,e,n,r,i,o,!0))}function or(t,e,n,r,i){return rr(fr(t,e,n,r,i,!0))}function sr(t){return!!t&&!0===t.__v_isVNode}function ar(t,e){return t.type===e.type&&t.key===e.key}function lr(t){tr=t}const cr="__vInternal",ur=({key:t})=>null!=t?t:null,dr=({ref:t,ref_key:e,ref_for:n})=>("number"===typeof t&&(t=""+t),null!=t?(0,i.HD)(t)||(0,r.dq)(t)||(0,i.mf)(t)?{i:F,r:t,k:e,f:!!n}:t:null);function hr(t,e=null,n=null,r=0,o=null,s=(t===$n?0:1),a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ur(e),ref:e&&dr(e),scopeId:B,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:F};return l?(xr(c,n),128&s&&t.normalize(c)):n&&(c.shapeFlag|=(0,i.HD)(n)?8:16),er>0&&!a&&Kn&&(c.patchFlag>0||6&s)&&32!==c.patchFlag&&Kn.push(c),c}const fr=pr;function pr(t,e=null,n=null,o=0,s=null,a=!1){if(t&&t!==le||(t=Yn),sr(t)){const r=gr(t,e,!0);return n&&xr(r,n),er>0&&!a&&Kn&&(6&r.shapeFlag?Kn[Kn.indexOf(t)]=r:Kn.push(r)),r.patchFlag|=-2,r}if(Xr(t)&&(t=t.__vccOpts),e){e=mr(e);let{class:t,style:n}=e;t&&!(0,i.HD)(t)&&(e.class=(0,i.C_)(t)),(0,i.Kn)(n)&&((0,r.X3)(n)&&!(0,i.kJ)(n)&&(n=(0,i.l7)({},n)),e.style=(0,i.j5)(n))}const l=(0,i.HD)(t)?1:J(t)?128:Un(t)?64:(0,i.Kn)(t)?4:(0,i.mf)(t)?2:0;return hr(t,e,n,o,s,l,a,!0)}function mr(t){return t?(0,r.X3)(t)||cr in t?(0,i.l7)({},t):t:null}function gr(t,e,n=!1){const{props:r,ref:o,patchFlag:s,children:a}=t,l=e?Sr(r||{},e):r,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&ur(l),ref:e&&e.ref?n&&o?(0,i.kJ)(o)?o.concat(dr(e)):[o,dr(e)]:dr(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==$n?-1===s?16:16|s:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&gr(t.ssContent),ssFallback:t.ssFallback&&gr(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c}function vr(t=" ",e=0){return fr(qn,null,t,e)}function yr(t,e){const n=fr(Xn,null,t);return n.staticCount=e,n}function br(t="",e=!1){return e?(Jn(),or(Yn,null,t)):fr(Yn,null,t)}function _r(t){return null==t||"boolean"===typeof t?fr(Yn):(0,i.kJ)(t)?fr($n,null,t.slice()):"object"===typeof t?wr(t):fr(qn,null,String(t))}function wr(t){return null===t.el&&-1!==t.patchFlag||t.memo?t:gr(t)}function xr(t,e){let n=0;const{shapeFlag:r}=t;if(null==e)e=null;else if((0,i.kJ)(e))n=16;else if("object"===typeof e){if(65&r){const n=e.default;return void(n&&(n._c&&(n._d=!1),xr(t,n()),n._c&&(n._d=!0)))}{n=32;const r=e._;r||cr in e?3===r&&F&&(1===F.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=F}}else(0,i.mf)(e)?(e={default:e,_ctx:F},n=32):(e=String(e),64&r?(n=16,e=[vr(e)]):n=8);t.children=e,t.shapeFlag|=n}function Sr(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const t in r)if("class"===t)e.class!==r.class&&(e.class=(0,i.C_)([e.class,r.class]));else if("style"===t)e.style=(0,i.j5)([e.style,r.style]);else if((0,i.F7)(t)){const n=e[t],o=r[t];!o||n===o||(0,i.kJ)(n)&&n.includes(o)||(e[t]=n?[].concat(n,o):o)}else""!==t&&(e[t]=r[t])}return e}function Er(t,e,n,r=null){l(t,e,7,[n,r])}const Mr=tn();let Tr=0;function Cr(t,e,n){const o=t.type,s=(e?e.appContext:t.appContext)||Mr,a={uid:Tr++,vnode:t,type:o,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new r.Bj(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:hn(o,s),emitsOptions:N(o,s),emit:null,emitted:null,propsDefaults:i.kT,inheritAttrs:o.inheritAttrs,ctx:i.kT,data:i.kT,props:i.kT,attrs:i.kT,slots:i.kT,refs:i.kT,setupState:i.kT,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=I.bind(null,a),t.ce&&t.ce(a),a}let Ar=null;const kr=()=>Ar||F;let Or,Rr,Pr="__VUE_INSTANCE_SETTERS__";(Rr=(0,i.E9)()[Pr])||(Rr=(0,i.E9)()[Pr]=[]),Rr.push((t=>Ar=t)),Or=t=>{Rr.length>1?Rr.forEach((e=>e(t))):Rr[0](t)};const Lr=t=>{Or(t),t.scope.on()},Dr=()=>{Ar&&Ar.scope.off(),Or(null)};function Ir(t){return 4&t.vnode.shapeFlag}let Nr,Ur,Fr=!1;function Br(t,e=!1){Fr=e;const{props:n,children:r}=t.vnode,i=Ir(t);ln(t,n,i,e),xn(t,r);const o=i?Vr(t,e):void 0;return Fr=!1,o}function Vr(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=(0,r.Xl)(new Proxy(t.ctx,we));const{setup:o}=n;if(o){const n=t.setupContext=o.length>1?$r(t):null;Lr(t),(0,r.Jd)();const s=a(o,t,0,[t.props,n]);if((0,r.lk)(),Dr(),(0,i.tI)(s)){if(s.then(Dr,Dr),e)return s.then((n=>{zr(t,n,e)})).catch((e=>{c(e,t,0)}));t.asyncDep=s}else zr(t,s,e)}else Wr(t,e)}function zr(t,e,n){(0,i.mf)(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:(0,i.Kn)(e)&&(t.setupState=(0,r.WL)(e)),Wr(t,n)}function jr(t){Nr=t,Ur=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,xe))}}const Hr=()=>!Nr;function Wr(t,e,n){const o=t.type;if(!t.render){if(!e&&Nr&&!o.render){const e=o.template||We(t).template;if(e){0;const{isCustomElement:n,compilerOptions:r}=t.appContext.config,{delimiters:s,compilerOptions:a}=o,l=(0,i.l7)((0,i.l7)({isCustomElement:n,delimiters:s},r),a);o.render=Nr(e,l)}}t.render=o.render||i.dG,Ur&&Ur(t)}Lr(t),(0,r.Jd)(),Ve(t),(0,r.lk)(),Dr()}function Gr(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return(0,r.j)(t,"get","$attrs"),e[n]}}))}function $r(t){const e=e=>{t.exposed=e||{}};return{get attrs(){return Gr(t)},slots:t.slots,emit:t.emit,expose:e}}function qr(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy((0,r.WL)((0,r.Xl)(t.exposed)),{get(e,n){return n in e?e[n]:n in be?be[n](t):void 0},has(t,e){return e in t||e in be}}))}function Yr(t,e=!0){return(0,i.mf)(t)?t.displayName||t.name:t.name||e&&t.__name}function Xr(t){return(0,i.mf)(t)&&"__vccOpts"in t}const Zr=(t,e)=>(0,r.Fl)(t,e,Fr);function Kr(t,e,n){const r=arguments.length;return 2===r?(0,i.Kn)(e)&&!(0,i.kJ)(e)?sr(e)?fr(t,null,[e]):fr(t,e):fr(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&sr(n)&&(n=[n]),fr(t,e,n))}const Jr=Symbol.for("v-scx"),Qr=()=>{{const t=sn(Jr);return t}};function ti(){return void 0}function ei(t,e,n,r){const i=n[r];if(i&&ni(i,t))return i;const o=e();return o.memo=t.slice(),n[r]=o}function ni(t,e){const n=t.memo;if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if((0,i.aU)(n[r],e[r]))return!1;return er>0&&Kn&&Kn.push(t),!0}const ri="3.3.4",ii={createComponentInstance:Cr,setupComponent:Br,renderComponentRoot:G,setCurrentRenderingInstance:V,isVNode:sr,normalizeVNode:_r},oi=ii,si=null,ai=null},9197:function(t,e,n){"use strict";n.d(e,{$d:function(){return i.$d},$y:function(){return i.$y},Ah:function(){return D},B:function(){return i.B},BK:function(){return i.BK},Bj:function(){return i.Bj},Bz:function(){return i.Bz},C3:function(){return i.C3},C_:function(){return i.C_},Cn:function(){return i.Cn},D2:function(){return Lt},EB:function(){return i.EB},EM:function(){return i.EM},Eo:function(){return i.Eo},F4:function(){return i.F4},F8:function(){return Dt},FN:function(){return i.FN},Fl:function(){return i.Fl},G:function(){return i.G},G2:function(){return _t},Gn:function(){return i.Gn},HX:function(){return i.HX},HY:function(){return i.HY},Ho:function(){return i.Ho},IU:function(){return i.IU},JJ:function(){return i.JJ},Jd:function(){return i.Jd},KU:function(){return i.KU},Ko:function(){return i.Ko},LL:function(){return i.LL},MW:function(){return L},MX:function(){return i.MX},Mr:function(){return i.Mr},Nd:function(){return Yt},Nv:function(){return i.Nv},OT:function(){return i.OT},Ob:function(){return i.Ob},P$:function(){return i.P$},PG:function(){return i.PG},Q2:function(){return i.Q2},Q6:function(){return i.Q6},RC:function(){return i.RC},Rh:function(){return i.Rh},Rr:function(){return i.Rr},S3:function(){return i.S3},SK:function(){return i.Ah},SU:function(){return i.SU},Tn:function(){return i.Tn},U2:function(){return i.U2},Uc:function(){return i.Uc},Uk:function(){return i.Uk},Um:function(){return i.Um},Us:function(){return i.Us},Vf:function(){return i.Vf},Vh:function(){return i.Vh},W3:function(){return ct},WI:function(){return i.WI},WL:function(){return i.WL},WY:function(){return i.WY},Wl:function(){return i.Wl},Wm:function(){return i.Wm},Wu:function(){return i.Wu},X3:function(){return i.X3},XI:function(){return i.XI},Xl:function(){return i.Xl},Xn:function(){return i.Xn},Y1:function(){return i.Y1},Y3:function(){return i.Y3},Y8:function(){return i.Y8},YP:function(){return i.YP},YS:function(){return i.YS},YZ:function(){return Mt},Yq:function(){return i.Yq},Yu:function(){return i.Yu},ZB:function(){return Ht},ZK:function(){return i.ZK},ZM:function(){return i.ZM},Zq:function(){return i.Zq},_:function(){return i._},_A:function(){return i._A},a2:function(){return N},aZ:function(){return i.aZ},b9:function(){return i.b9},bM:function(){return wt},bT:function(){return i.bT},bv:function(){return i.bv},cE:function(){return i.cE},d1:function(){return i.d1},dD:function(){return i.dD},dG:function(){return i.dG},dl:function(){return i.dl},dq:function(){return i.dq},e8:function(){return yt},ec:function(){return i.ec},eq:function(){return i.eq},f3:function(){return i.f3},fb:function(){return U},h:function(){return i.h},hR:function(){return i.hR},i8:function(){return i.i8},iD:function(){return i.iD},iH:function(){return i.iH},iM:function(){return Rt},ic:function(){return i.ic},j4:function(){return i.j4},j5:function(){return i.j5},kC:function(){return i.kC},kq:function(){return i.kq},l1:function(){return i.l1},lA:function(){return i.lA},lR:function(){return i.lR},m0:function(){return i.m0},mW:function(){return i.mW},mv:function(){return i.mv},mx:function(){return i.mx},n4:function(){return i.n4},nJ:function(){return i.nJ},nK:function(){return i.nK},nQ:function(){return i.nQ},nZ:function(){return i.nZ},nr:function(){return vt},oR:function(){return i.oR},of:function(){return i.of},p1:function(){return i.p1},qG:function(){return i.qG},qZ:function(){return i.qZ},qb:function(){return i.qb},qj:function(){return i.qj},qq:function(){return i.qq},ri:function(){return Wt},ry:function(){return i.ry},sT:function(){return i.sT},sY:function(){return jt},se:function(){return i.se},sj:function(){return F},sv:function(){return i.sv},tT:function(){return i.tT},uE:function(){return i.uE},uT:function(){return H},u_:function(){return i.u_},up:function(){return i.up},vl:function(){return i.vl},vr:function(){return Gt},vs:function(){return i.vs},w5:function(){return i.w5},wF:function(){return i.wF},wg:function(){return i.wg},wy:function(){return i.wy},xv:function(){return i.xv},yT:function(){return i.yT},yX:function(){return i.yX},yb:function(){return i.MW},zw:function(){return i.zw}});n(7658);var r=n(4887),i=n(8473),o=n(4188);const s="http://www.w3.org/2000/svg",a="undefined"!==typeof document?document:null,l=a&&a.createElement("template"),c={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e?a.createElementNS(s,t):a.createElement(t,n?{is:n}:void 0);return"select"===t&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:t=>a.createTextNode(t),createComment:t=>a.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>a.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,o){const s=n?n.previousSibling:e.lastChild;if(i&&(i===o||i.nextSibling)){while(1)if(e.insertBefore(i.cloneNode(!0),n),i===o||!(i=i.nextSibling))break}else{l.innerHTML=r?`<svg>${t}</svg>`:t;const i=l.content;if(r){const t=i.firstChild;while(t.firstChild)i.appendChild(t.firstChild);i.removeChild(t)}e.insertBefore(i,n)}return[s?s.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function u(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),null==e?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function d(t,e,n){const i=t.style,o=(0,r.HD)(n);if(n&&!o){if(e&&!(0,r.HD)(e))for(const t in e)null==n[t]&&f(i,t,"");for(const t in n)f(i,t,n[t])}else{const r=i.display;o?e!==n&&(i.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(i.display=r)}}const h=/\s*!important$/;function f(t,e,n){if((0,r.kJ)(n))n.forEach((n=>f(t,e,n)));else if(null==n&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const i=g(t,e);h.test(n)?t.setProperty((0,r.rs)(i),n.replace(h,""),"important"):t[i]=n}}const p=["Webkit","Moz","ms"],m={};function g(t,e){const n=m[e];if(n)return n;let i=(0,r._A)(e);if("filter"!==i&&i in t)return m[e]=i;i=(0,r.kC)(i);for(let r=0;r<p.length;r++){const n=p[r]+i;if(n in t)return m[e]=n}return e}const v="http://www.w3.org/1999/xlink";function y(t,e,n,i,o){if(i&&e.startsWith("xlink:"))null==n?t.removeAttributeNS(v,e.slice(6,e.length)):t.setAttributeNS(v,e,n);else{const i=(0,r.Pq)(e);null==n||i&&!(0,r.yA)(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function b(t,e,n,i,o,s,a){if("innerHTML"===e||"textContent"===e)return i&&a(i,o,s),void(t[e]=null==n?"":n);const l=t.tagName;if("value"===e&&"PROGRESS"!==l&&!l.includes("-")){t._value=n;const r="OPTION"===l?t.getAttribute("value"):t.value,i=null==n?"":n;return r!==i&&(t.value=i),void(null==n&&t.removeAttribute(e))}let c=!1;if(""===n||null==n){const i=typeof t[e];"boolean"===i?n=(0,r.yA)(n):null==n&&"string"===i?(n="",c=!0):"number"===i&&(n=0,c=!0)}try{t[e]=n}catch(u){0}c&&t.removeAttribute(e)}function _(t,e,n,r){t.addEventListener(e,n,r)}function w(t,e,n,r){t.removeEventListener(e,n,r)}function x(t,e,n,r,i=null){const o=t._vei||(t._vei={}),s=o[e];if(r&&s)s.value=r;else{const[n,a]=E(e);if(r){const s=o[e]=A(r,i);_(t,n,s,a)}else s&&(w(t,n,s,a),o[e]=void 0)}}const S=/(?:Once|Passive|Capture)$/;function E(t){let e;if(S.test(t)){let n;e={};while(n=t.match(S))t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}const n=":"===t[2]?t.slice(3):(0,r.rs)(t.slice(2));return[n,e]}let M=0;const T=Promise.resolve(),C=()=>M||(T.then((()=>M=0)),M=Date.now());function A(t,e){const n=t=>{if(t._vts){if(t._vts<=n.attached)return}else t._vts=Date.now();(0,i.$d)(k(t,n.value),e,5,[t])};return n.value=t,n.attached=C(),n}function k(t,e){if((0,r.kJ)(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t&&t(e)))}return e}const O=/^on[a-z]/,R=(t,e,n,i,o=!1,s,a,l,c)=>{"class"===e?u(t,i,o):"style"===e?d(t,n,i):(0,r.F7)(e)?(0,r.tR)(e)||x(t,e,n,i,a):("."===e[0]?(e=e.slice(1),1):"^"===e[0]?(e=e.slice(1),0):P(t,e,i,o))?b(t,e,i,s,a,l,c):("true-value"===e?t._trueValue=i:"false-value"===e&&(t._falseValue=i),y(t,e,i,o))};function P(t,e,n,i){return i?"innerHTML"===e||"textContent"===e||!!(e in t&&O.test(e)&&(0,r.mf)(n)):"spellcheck"!==e&&"draggable"!==e&&"translate"!==e&&("form"!==e&&(("list"!==e||"INPUT"!==t.tagName)&&(("type"!==e||"TEXTAREA"!==t.tagName)&&((!O.test(e)||!(0,r.HD)(n))&&e in t))))}function L(t,e){const n=(0,i.aZ)(t);class r extends N{constructor(t){super(n,t,e)}}return r.def=n,r}const D=t=>L(t,Ht),I="undefined"!==typeof HTMLElement?HTMLElement:class{};class N extends I{constructor(t,e={},n){super(),this._def=t,this._props=e,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&n?n(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,(0,i.Y3)((()=>{this._connected||(jt(null,this.shadowRoot),this._instance=null)}))}_resolveDef(){this._resolved=!0;for(let n=0;n<this.attributes.length;n++)this._setAttr(this.attributes[n].name);new MutationObserver((t=>{for(const e of t)this._setAttr(e.attributeName)})).observe(this,{attributes:!0});const t=(t,e=!1)=>{const{props:n,styles:i}=t;let o;if(n&&!(0,r.kJ)(n))for(const s in n){const t=n[s];(t===Number||t&&t.type===Number)&&(s in this._props&&(this._props[s]=(0,r.He)(this._props[s])),(o||(o=Object.create(null)))[(0,r._A)(s)]=!0)}this._numberProps=o,e&&this._resolveProps(t),this._applyStyles(i),this._update()},e=this._def.__asyncLoader;e?e().then((e=>t(e,!0))):t(this._def)}_resolveProps(t){const{props:e}=t,n=(0,r.kJ)(e)?e:Object.keys(e||{});for(const r of Object.keys(this))"_"!==r[0]&&n.includes(r)&&this._setProp(r,this[r],!0,!1);for(const i of n.map(r._A))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(t){this._setProp(i,t)}})}_setAttr(t){let e=this.getAttribute(t);const n=(0,r._A)(t);this._numberProps&&this._numberProps[n]&&(e=(0,r.He)(e)),this._setProp(n,e,!1)}_getProp(t){return this._props[t]}_setProp(t,e,n=!0,i=!0){e!==this._props[t]&&(this._props[t]=e,i&&this._instance&&this._update(),n&&(!0===e?this.setAttribute((0,r.rs)(t),""):"string"===typeof e||"number"===typeof e?this.setAttribute((0,r.rs)(t),e+""):e||this.removeAttribute((0,r.rs)(t))))}_update(){jt(this._createVNode(),this.shadowRoot)}_createVNode(){const t=(0,i.Wm)(this._def,(0,r.l7)({},this._props));return this._instance||(t.ce=t=>{this._instance=t,t.isCE=!0;const e=(t,e)=>{this.dispatchEvent(new CustomEvent(t,{detail:e}))};t.emit=(t,...n)=>{e(t,n),(0,r.rs)(t)!==t&&e((0,r.rs)(t),n)};let n=this;while(n=n&&(n.parentNode||n.host))if(n instanceof N){t.parent=n._instance,t.provides=n._instance.provides;break}}),t}_applyStyles(t){t&&t.forEach((t=>{const e=document.createElement("style");e.textContent=t,this.shadowRoot.appendChild(e)}))}}function U(t="$style"){{const e=(0,i.FN)();if(!e)return r.kT;const n=e.type.__cssModules;if(!n)return r.kT;const o=n[t];return o||r.kT}}function F(t){const e=(0,i.FN)();if(!e)return;const n=e.ut=(n=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach((t=>V(t,n)))},r=()=>{const r=t(e.proxy);B(e.subTree,r),n(r)};(0,i.Rh)(r),(0,i.bv)((()=>{const t=new MutationObserver(r);t.observe(e.subTree.el.parentNode,{childList:!0}),(0,i.Ah)((()=>t.disconnect()))}))}function B(t,e){if(128&t.shapeFlag){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push((()=>{B(n.activeBranch,e)}))}while(t.component)t=t.component.subTree;if(1&t.shapeFlag&&t.el)V(t.el,e);else if(t.type===i.HY)t.children.forEach((t=>B(t,e)));else if(t.type===i.qG){let{el:n,anchor:r}=t;while(n){if(V(n,e),n===r)break;n=n.nextSibling}}}function V(t,e){if(1===t.nodeType){const n=t.style;for(const t in e)n.setProperty(`--${t}`,e[t])}}const z="transition",j="animation",H=(t,{slots:e})=>(0,i.h)(i.P$,Y(t),e);H.displayName="Transition";const W={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},G=H.props=(0,r.l7)({},i.nJ,W),$=(t,e=[])=>{(0,r.kJ)(t)?t.forEach((t=>t(...e))):t&&t(...e)},q=t=>!!t&&((0,r.kJ)(t)?t.some((t=>t.length>1)):t.length>1);function Y(t){const e={};for(const r in t)r in W||(e[r]=t[r]);if(!1===t.css)return e;const{name:n="v",type:i,duration:o,enterFromClass:s=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:c=s,appearActiveClass:u=a,appearToClass:d=l,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=t,m=X(o),g=m&&m[0],v=m&&m[1],{onBeforeEnter:y,onEnter:b,onEnterCancelled:_,onLeave:w,onLeaveCancelled:x,onBeforeAppear:S=y,onAppear:E=b,onAppearCancelled:M=_}=e,T=(t,e,n)=>{J(t,e?d:l),J(t,e?u:a),n&&n()},C=(t,e)=>{t._isLeaving=!1,J(t,h),J(t,p),J(t,f),e&&e()},A=t=>(e,n)=>{const r=t?E:b,o=()=>T(e,t,n);$(r,[e,o]),Q((()=>{J(e,t?c:s),K(e,t?d:l),q(r)||et(e,i,g,o)}))};return(0,r.l7)(e,{onBeforeEnter(t){$(y,[t]),K(t,s),K(t,a)},onBeforeAppear(t){$(S,[t]),K(t,c),K(t,u)},onEnter:A(!1),onAppear:A(!0),onLeave(t,e){t._isLeaving=!0;const n=()=>C(t,e);K(t,h),ot(),K(t,f),Q((()=>{t._isLeaving&&(J(t,h),K(t,p),q(w)||et(t,i,v,n))})),$(w,[t,n])},onEnterCancelled(t){T(t,!1),$(_,[t])},onAppearCancelled(t){T(t,!0),$(M,[t])},onLeaveCancelled(t){C(t),$(x,[t])}})}function X(t){if(null==t)return null;if((0,r.Kn)(t))return[Z(t.enter),Z(t.leave)];{const e=Z(t);return[e,e]}}function Z(t){const e=(0,r.He)(t);return e}function K(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.add(e))),(t._vtc||(t._vtc=new Set)).add(e)}function J(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.remove(e)));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function Q(t){requestAnimationFrame((()=>{requestAnimationFrame(t)}))}let tt=0;function et(t,e,n,r){const i=t._endId=++tt,o=()=>{i===t._endId&&r()};if(n)return setTimeout(o,n);const{type:s,timeout:a,propCount:l}=nt(t,e);if(!s)return r();const c=s+"end";let u=0;const d=()=>{t.removeEventListener(c,h),o()},h=e=>{e.target===t&&++u>=l&&d()};setTimeout((()=>{u<l&&d()}),a+1),t.addEventListener(c,h)}function nt(t,e){const n=window.getComputedStyle(t),r=t=>(n[t]||"").split(", "),i=r(`${z}Delay`),o=r(`${z}Duration`),s=rt(i,o),a=r(`${j}Delay`),l=r(`${j}Duration`),c=rt(a,l);let u=null,d=0,h=0;e===z?s>0&&(u=z,d=s,h=o.length):e===j?c>0&&(u=j,d=c,h=l.length):(d=Math.max(s,c),u=d>0?s>c?z:j:null,h=u?u===z?o.length:l.length:0);const f=u===z&&/\b(transform|all)(,|$)/.test(r(`${z}Property`).toString());return{type:u,timeout:d,propCount:h,hasTransform:f}}function rt(t,e){while(t.length<e.length)t=t.concat(t);return Math.max(...e.map(((e,n)=>it(e)+it(t[n]))))}function it(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function ot(){return document.body.offsetHeight}const st=new WeakMap,at=new WeakMap,lt={name:"TransitionGroup",props:(0,r.l7)({},G,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=(0,i.FN)(),r=(0,i.Y8)();let s,a;return(0,i.ic)((()=>{if(!s.length)return;const e=t.moveClass||`${t.name||"v"}-move`;if(!ft(s[0].el,n.vnode.el,e))return;s.forEach(ut),s.forEach(dt);const r=s.filter(ht);ot(),r.forEach((t=>{const n=t.el,r=n.style;K(n,e),r.transform=r.webkitTransform=r.transitionDuration="";const i=n._moveCb=t=>{t&&t.target!==n||t&&!/transform$/.test(t.propertyName)||(n.removeEventListener("transitionend",i),n._moveCb=null,J(n,e))};n.addEventListener("transitionend",i)}))})),()=>{const l=(0,o.IU)(t),c=Y(l);let u=l.tag||i.HY;s=a,a=e.default?(0,i.Q6)(e.default()):[];for(let t=0;t<a.length;t++){const e=a[t];null!=e.key&&(0,i.nK)(e,(0,i.U2)(e,c,r,n))}if(s)for(let t=0;t<s.length;t++){const e=s[t];(0,i.nK)(e,(0,i.U2)(e,c,r,n)),st.set(e,e.el.getBoundingClientRect())}return(0,i.Wm)(u,null,a)}}};lt.props;const ct=lt;function ut(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function dt(t){at.set(t,t.el.getBoundingClientRect())}function ht(t){const e=st.get(t),n=at.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const e=t.el.style;return e.transform=e.webkitTransform=`translate(${r}px,${i}px)`,e.transitionDuration="0s",t}}function ft(t,e,n){const r=t.cloneNode();t._vtc&&t._vtc.forEach((t=>{t.split(/\s+/).forEach((t=>t&&r.classList.remove(t)))})),n.split(/\s+/).forEach((t=>t&&r.classList.add(t))),r.style.display="none";const i=1===e.nodeType?e:e.parentNode;i.appendChild(r);const{hasTransform:o}=nt(r);return i.removeChild(r),o}const pt=t=>{const e=t.props["onUpdate:modelValue"]||!1;return(0,r.kJ)(e)?t=>(0,r.ir)(e,t):e};function mt(t){t.target.composing=!0}function gt(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const vt={created(t,{modifiers:{lazy:e,trim:n,number:i}},o){t._assign=pt(o);const s=i||o.props&&"number"===o.props.type;_(t,e?"change":"input",(e=>{if(e.target.composing)return;let i=t.value;n&&(i=i.trim()),s&&(i=(0,r.h5)(i)),t._assign(i)})),n&&_(t,"change",(()=>{t.value=t.value.trim()})),e||(_(t,"compositionstart",mt),_(t,"compositionend",gt),_(t,"change",gt))},mounted(t,{value:e}){t.value=null==e?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:i,number:o}},s){if(t._assign=pt(s),t.composing)return;if(document.activeElement===t&&"range"!==t.type){if(n)return;if(i&&t.value.trim()===e)return;if((o||"number"===t.type)&&(0,r.h5)(t.value)===e)return}const a=null==e?"":e;t.value!==a&&(t.value=a)}},yt={deep:!0,created(t,e,n){t._assign=pt(n),_(t,"change",(()=>{const e=t._modelValue,n=St(t),i=t.checked,o=t._assign;if((0,r.kJ)(e)){const t=(0,r.hq)(e,n),s=-1!==t;if(i&&!s)o(e.concat(n));else if(!i&&s){const n=[...e];n.splice(t,1),o(n)}}else if((0,r.DM)(e)){const t=new Set(e);i?t.add(n):t.delete(n),o(t)}else o(Et(t,i))}))},mounted:bt,beforeUpdate(t,e,n){t._assign=pt(n),bt(t,e,n)}};function bt(t,{value:e,oldValue:n},i){t._modelValue=e,(0,r.kJ)(e)?t.checked=(0,r.hq)(e,i.props.value)>-1:(0,r.DM)(e)?t.checked=e.has(i.props.value):e!==n&&(t.checked=(0,r.WV)(e,Et(t,!0)))}const _t={created(t,{value:e},n){t.checked=(0,r.WV)(e,n.props.value),t._assign=pt(n),_(t,"change",(()=>{t._assign(St(t))}))},beforeUpdate(t,{value:e,oldValue:n},i){t._assign=pt(i),e!==n&&(t.checked=(0,r.WV)(e,i.props.value))}},wt={deep:!0,created(t,{value:e,modifiers:{number:n}},i){const o=(0,r.DM)(e);_(t,"change",(()=>{const e=Array.prototype.filter.call(t.options,(t=>t.selected)).map((t=>n?(0,r.h5)(St(t)):St(t)));t._assign(t.multiple?o?new Set(e):e:e[0])})),t._assign=pt(i)},mounted(t,{value:e}){xt(t,e)},beforeUpdate(t,e,n){t._assign=pt(n)},updated(t,{value:e}){xt(t,e)}};function xt(t,e){const n=t.multiple;if(!n||(0,r.kJ)(e)||(0,r.DM)(e)){for(let i=0,o=t.options.length;i<o;i++){const o=t.options[i],s=St(o);if(n)(0,r.kJ)(e)?o.selected=(0,r.hq)(e,s)>-1:o.selected=e.has(s);else if((0,r.WV)(St(o),e))return void(t.selectedIndex!==i&&(t.selectedIndex=i))}n||-1===t.selectedIndex||(t.selectedIndex=-1)}}function St(t){return"_value"in t?t._value:t.value}function Et(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const Mt={created(t,e,n){Ct(t,e,n,null,"created")},mounted(t,e,n){Ct(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){Ct(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){Ct(t,e,n,r,"updated")}};function Tt(t,e){switch(t){case"SELECT":return wt;case"TEXTAREA":return vt;default:switch(e){case"checkbox":return yt;case"radio":return _t;default:return vt}}}function Ct(t,e,n,r,i){const o=Tt(t.tagName,n.props&&n.props.type),s=o[i];s&&s(t,e,n,r)}function At(){vt.getSSRProps=({value:t})=>({value:t}),_t.getSSRProps=({value:t},e)=>{if(e.props&&(0,r.WV)(e.props.value,t))return{checked:!0}},yt.getSSRProps=({value:t},e)=>{if((0,r.kJ)(t)){if(e.props&&(0,r.hq)(t,e.props.value)>-1)return{checked:!0}}else if((0,r.DM)(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},Mt.getSSRProps=(t,e)=>{if("string"!==typeof e.type)return;const n=Tt(e.type.toUpperCase(),e.props&&e.props.type);return n.getSSRProps?n.getSSRProps(t,e):void 0}}const kt=["ctrl","shift","alt","meta"],Ot={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&0!==t.button,middle:t=>"button"in t&&1!==t.button,right:t=>"button"in t&&2!==t.button,exact:(t,e)=>kt.some((n=>t[`${n}Key`]&&!e.includes(n)))},Rt=(t,e)=>(n,...r)=>{for(let t=0;t<e.length;t++){const r=Ot[e[t]];if(r&&r(n,e))return}return t(n,...r)},Pt={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Lt=(t,e)=>n=>{if(!("key"in n))return;const i=(0,r.rs)(n.key);return e.some((t=>t===i||Pt[t]===i))?t(n):void 0},Dt={beforeMount(t,{value:e},{transition:n}){t._vod="none"===t.style.display?"":t.style.display,n&&e?n.beforeEnter(t):It(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!==!n&&(r?e?(r.beforeEnter(t),It(t,!0),r.enter(t)):r.leave(t,(()=>{It(t,!1)})):It(t,e))},beforeUnmount(t,{value:e}){It(t,e)}};function It(t,e){t.style.display=e?t._vod:"none"}function Nt(){Dt.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const Ut=(0,r.l7)({patchProp:R},c);let Ft,Bt=!1;function Vt(){return Ft||(Ft=(0,i.Us)(Ut))}function zt(){return Ft=Bt?Ft:(0,i.Eo)(Ut),Bt=!0,Ft}const jt=(...t)=>{Vt().render(...t)},Ht=(...t)=>{zt().hydrate(...t)},Wt=(...t)=>{const e=Vt().createApp(...t);const{mount:n}=e;return e.mount=t=>{const i=$t(t);if(!i)return;const o=e._component;(0,r.mf)(o)||o.render||o.template||(o.template=i.innerHTML),i.innerHTML="";const s=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},e},Gt=(...t)=>{const e=zt().createApp(...t);const{mount:n}=e;return e.mount=t=>{const e=$t(t);if(e)return n(e,!0,e instanceof SVGElement)},e};function $t(t){if((0,r.HD)(t)){const e=document.querySelector(t);return e}return t}let qt=!1;const Yt=()=>{qt||(qt=!0,At(),Nt())}},4887:function(t,e,n){"use strict";n.d(e,{C_:function(){return J},DM:function(){return v},E9:function(){return W},F7:function(){return c},Gg:function(){return O},HD:function(){return w},He:function(){return j},Kj:function(){return b},Kn:function(){return S},NO:function(){return a},Nj:function(){return V},Od:function(){return h},PO:function(){return A},Pq:function(){return et},RI:function(){return p},S0:function(){return k},W7:function(){return C},WV:function(){return it},Z6:function(){return o},_A:function(){return L},_N:function(){return g},aU:function(){return F},dG:function(){return s},e1:function(){return $},fY:function(){return r},h5:function(){return z},hR:function(){return U},hq:function(){return ot},ir:function(){return B},j5:function(){return q},kC:function(){return N},kJ:function(){return m},kT:function(){return i},l7:function(){return d},mf:function(){return _},rs:function(){return I},tI:function(){return E},tR:function(){return u},vs:function(){return Q},yA:function(){return nt},yk:function(){return x},zw:function(){return st}});n(7658);function r(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}const i={},o=[],s=()=>{},a=()=>!1,l=/^on[^a-z]/,c=t=>l.test(t),u=t=>t.startsWith("onUpdate:"),d=Object.assign,h=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},f=Object.prototype.hasOwnProperty,p=(t,e)=>f.call(t,e),m=Array.isArray,g=t=>"[object Map]"===T(t),v=t=>"[object Set]"===T(t),y=t=>"[object Date]"===T(t),b=t=>"[object RegExp]"===T(t),_=t=>"function"===typeof t,w=t=>"string"===typeof t,x=t=>"symbol"===typeof t,S=t=>null!==t&&"object"===typeof t,E=t=>S(t)&&_(t.then)&&_(t.catch),M=Object.prototype.toString,T=t=>M.call(t),C=t=>T(t).slice(8,-1),A=t=>"[object Object]"===T(t),k=t=>w(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,O=r(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),R=t=>{const e=Object.create(null);return n=>{const r=e[n];return r||(e[n]=t(n))}},P=/-(\w)/g,L=R((t=>t.replace(P,((t,e)=>e?e.toUpperCase():"")))),D=/\B([A-Z])/g,I=R((t=>t.replace(D,"-$1").toLowerCase())),N=R((t=>t.charAt(0).toUpperCase()+t.slice(1))),U=R((t=>t?`on${N(t)}`:"")),F=(t,e)=>!Object.is(t,e),B=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},V=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},z=t=>{const e=parseFloat(t);return isNaN(e)?t:e},j=t=>{const e=w(t)?Number(t):NaN;return isNaN(e)?t:e};let H;const W=()=>H||(H="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{});const G="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console",$=r(G);function q(t){if(m(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=w(r)?K(r):q(r);if(i)for(const t in i)e[t]=i[t]}return e}return w(t)||S(t)?t:void 0}const Y=/;(?![^(]*\))/g,X=/:([^]+)/,Z=/\/\*[^]*?\*\//g;function K(t){const e={};return t.replace(Z,"").split(Y).forEach((t=>{if(t){const n=t.split(X);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function J(t){let e="";if(w(t))e=t;else if(m(t))for(let n=0;n<t.length;n++){const r=J(t[n]);r&&(e+=r+" ")}else if(S(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Q(t){if(!t)return null;let{class:e,style:n}=t;return e&&!w(e)&&(t.class=J(e)),n&&(t.style=q(n)),t}const tt="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",et=r(tt);function nt(t){return!!t||""===t}function rt(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=it(t[r],e[r]);return n}function it(t,e){if(t===e)return!0;let n=y(t),r=y(e);if(n||r)return!(!n||!r)&&t.getTime()===e.getTime();if(n=x(t),r=x(e),n||r)return t===e;if(n=m(t),r=m(e),n||r)return!(!n||!r)&&rt(t,e);if(n=S(t),r=S(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,o=Object.keys(e).length;if(i!==o)return!1;for(const n in t){const r=t.hasOwnProperty(n),i=e.hasOwnProperty(n);if(r&&!i||!r&&i||!it(t[n],e[n]))return!1}}return String(t)===String(e)}function ot(t,e){return t.findIndex((t=>it(t,e)))}const st=t=>w(t)?t:null==t?"":m(t)||S(t)&&(t.toString===M||!_(t.toString))?JSON.stringify(t,at,2):String(t),at=(t,e)=>e&&e.__v_isRef?at(t,e.value):g(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,n])=>(t[`${e} =>`]=n,t)),{})}:v(e)?{[`Set(${e.size})`]:[...e.values()]}:!S(e)||m(e)||A(e)?e:String(e)},2217:function(t,e,n){"use strict";n(7658);var r=n(9004);function i(){var t={},e=0,n=0,r=0;function i(i,o){o||(o=i,i=0),i>n?n=i:i<r&&(r=i),t[i]||(t[i]=[]),t[i].push(o),e++}function o(){for(var e=r;e<=n;e++)for(var i=t[e],o=0;o<i.length;o++){var s=i[o];s()}}function s(){return e}return{add:i,process:o,size:s}}t.exports=function(t){t=t||{};var e=t.reporter,n=r.getOption(t,"async",!0),o=r.getOption(t,"auto",!0);o&&!n&&(e&&e.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),n=!0);var s,a=i(),l=!1;function c(t,e){!l&&o&&n&&0===a.size()&&h(),a.add(t,e)}function u(){l=!0;while(a.size()){var t=a;a=i(),t.process()}l=!1}function d(t){l||(void 0===t&&(t=n),s&&(f(s),s=null),t?h():u())}function h(){s=p(u)}function f(t){var e=clearTimeout;return e(t)}function p(t){var e=function(t){return setTimeout(t,0)};return e(t)}return{add:c,force:d}}},9004:function(t){"use strict";var e=t.exports={};function n(t,e,n){var r=t[e];return void 0!==r&&null!==r||void 0===n?r:n}e.getOption=n},8396:function(t,e,n){"use strict";n.d(e,{ZP:function(){return Of}});var r={};n.r(r),n.d(r,{afterMain:function(){return l.wX},afterRead:function(){return l.r5},afterWrite:function(){return l.MS},applyStyles:function(){return c.Z},arrow:function(){return u.Z},auto:function(){return l.d7},basePlacements:function(){return l.mv},beforeMain:function(){return l.XM},beforeRead:function(){return l.N7},beforeWrite:function(){return l.iv},bottom:function(){return l.I},clippingParents:function(){return l.zV},computeStyles:function(){return d.Z},createPopper:function(){return _.fi},createPopperBase:function(){return y.fi},createPopperLite:function(){return x},detectOverflow:function(){return b.Z},end:function(){return l.ut},eventListeners:function(){return h.Z},flip:function(){return f.Z},hide:function(){return p.Z},left:function(){return l.t$},main:function(){return l.DH},modifierPhases:function(){return l.xs},offset:function(){return m.Z},placements:function(){return l.Ct},popper:function(){return l.k5},popperGenerator:function(){return y.kZ},popperOffsets:function(){return g.Z},preventOverflow:function(){return v.Z},read:function(){return l.ij},reference:function(){return l.YP},right:function(){return l.F2},start:function(){return l.BL},top:function(){return l.we},variationPlacements:function(){return l.bw},viewport:function(){return l.Pj},write:function(){return l.cW}});n(1703),n(7658);var i=n(8473),o=n(4188),s=n(4887),a=n(9197),l=n(7385),c=n(94),u=n(2066),d=n(1870),h=n(3116),f=n(5805),p=n(8948),m=n(7953),g=n(3268),v=n(8285),y=n(8106),b=n(6707),_=n(1320),w=[h.Z,g.Z,d.Z,c.Z],x=(0,y.kZ)({defaultModifiers:w});
/*!
  * Bootstrap v5.2.1 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
const S=1e6,E=1e3,M="transitionend",T=t=>null===t||void 0===t?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),C=t=>{do{t+=Math.floor(Math.random()*S)}while(document.getElementById(t));return t},A=t=>{let e=t.getAttribute("data-bs-target");if(!e||"#"===e){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&"#"!==n?n.trim():null}return e},k=t=>{const e=A(t);return e&&document.querySelector(e)?e:null},O=t=>{const e=A(t);return e?document.querySelector(e):null},R=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const r=Number.parseFloat(e),i=Number.parseFloat(n);return r||i?(e=e.split(",")[0],n=n.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(n))*E):0},P=t=>{t.dispatchEvent(new Event(M))},L=t=>!(!t||"object"!==typeof t)&&("undefined"!==typeof t.jquery&&(t=t[0]),"undefined"!==typeof t.nodeType),D=t=>L(t)?t.jquery?t[0]:t:"string"===typeof t&&t.length>0?document.querySelector(t):null,I=t=>{if(!L(t)||0===t.getClientRects().length)return!1;const e="visible"===getComputedStyle(t).getPropertyValue("visibility"),n=t.closest("details:not([open])");if(!n)return e;if(n!==t){const e=t.closest("summary");if(e&&e.parentNode!==n)return!1;if(null===e)return!1}return e},N=t=>!t||t.nodeType!==Node.ELEMENT_NODE||(!!t.classList.contains("disabled")||("undefined"!==typeof t.disabled?t.disabled:t.hasAttribute("disabled")&&"false"!==t.getAttribute("disabled"))),U=t=>{if(!document.documentElement.attachShadow)return null;if("function"===typeof t.getRootNode){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?U(t.parentNode):null},F=()=>{},B=t=>{t.offsetHeight},V=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,z=[],j=t=>{"loading"===document.readyState?(z.length||document.addEventListener("DOMContentLoaded",(()=>{for(const t of z)t()})),z.push(t)):t()},H=()=>"rtl"===document.documentElement.dir,W=t=>{j((()=>{const e=V();if(e){const n=t.NAME,r=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=r,t.jQueryInterface)}}))},G=t=>{"function"===typeof t&&t()},$=(t,e,n=!0)=>{if(!n)return void G(t);const r=5,i=R(e)+r;let o=!1;const s=({target:n})=>{n===e&&(o=!0,e.removeEventListener(M,s),G(t))};e.addEventListener(M,s),setTimeout((()=>{o||P(e)}),i)},q=(t,e,n,r)=>{const i=t.length;let o=t.indexOf(e);return-1===o?!n&&r?t[i-1]:t[0]:(o+=n?1:-1,r&&(o=(o+i)%i),t[Math.max(0,Math.min(o,i-1))])},Y=/[^.]*(?=\..*)\.|.*/,X=/\..*/,Z=/::\d+$/,K={};let J=1;const Q={mouseenter:"mouseover",mouseleave:"mouseout"},tt=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function et(t,e){return e&&`${e}::${J++}`||t.uidEvent||J++}function nt(t){const e=et(t);return t.uidEvent=e,K[e]=K[e]||{},K[e]}function rt(t,e){return function n(r){return ht(r,{delegateTarget:t}),n.oneOff&&dt.off(t,r.type,e),e.apply(t,[r])}}function it(t,e,n){return function r(i){const o=t.querySelectorAll(e);for(let{target:s}=i;s&&s!==this;s=s.parentNode)for(const a of o)if(a===s)return ht(i,{delegateTarget:s}),r.oneOff&&dt.off(t,i.type,e,n),n.apply(s,[i])}}function ot(t,e,n=null){return Object.values(t).find((t=>t.callable===e&&t.delegationSelector===n))}function st(t,e,n){const r="string"===typeof e,i=r?n:e||n;let o=ut(t);return tt.has(o)||(o=t),[r,i,o]}function at(t,e,n,r,i){if("string"!==typeof e||!t)return;let[o,s,a]=st(e,n,r);if(e in Q){const t=t=>function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return t.call(this,e)};s=t(s)}const l=nt(t),c=l[a]||(l[a]={}),u=ot(c,s,o?n:null);if(u)return void(u.oneOff=u.oneOff&&i);const d=et(s,e.replace(Y,"")),h=o?it(t,n,s):rt(t,s);h.delegationSelector=o?n:null,h.callable=s,h.oneOff=i,h.uidEvent=d,c[d]=h,t.addEventListener(a,h,o)}function lt(t,e,n,r,i){const o=ot(e[n],r,i);o&&(t.removeEventListener(n,o,Boolean(i)),delete e[n][o.uidEvent])}function ct(t,e,n,r){const i=e[n]||{};for(const o of Object.keys(i))if(o.includes(r)){const r=i[o];lt(t,e,n,r.callable,r.delegationSelector)}}function ut(t){return t=t.replace(X,""),Q[t]||t}const dt={on(t,e,n,r){at(t,e,n,r,!1)},one(t,e,n,r){at(t,e,n,r,!0)},off(t,e,n,r){if("string"!==typeof e||!t)return;const[i,o,s]=st(e,n,r),a=s!==e,l=nt(t),c=l[s]||{},u=e.startsWith(".");if("undefined"===typeof o){if(u)for(const n of Object.keys(l))ct(t,l,n,e.slice(1));for(const n of Object.keys(c)){const r=n.replace(Z,"");if(!a||e.includes(r)){const e=c[n];lt(t,l,s,e.callable,e.delegationSelector)}}}else{if(!Object.keys(c).length)return;lt(t,l,s,o,i?n:null)}},trigger(t,e,n){if("string"!==typeof e||!t)return null;const r=V(),i=ut(e),o=e!==i;let s=null,a=!0,l=!0,c=!1;o&&r&&(s=r.Event(e,n),r(t).trigger(s),a=!s.isPropagationStopped(),l=!s.isImmediatePropagationStopped(),c=s.isDefaultPrevented());let u=new Event(e,{bubbles:a,cancelable:!0});return u=ht(u,n),c&&u.preventDefault(),l&&t.dispatchEvent(u),u.defaultPrevented&&s&&s.preventDefault(),u}};function ht(t,e){for(const[r,i]of Object.entries(e||{}))try{t[r]=i}catch(n){Object.defineProperty(t,r,{configurable:!0,get(){return i}})}return t}const ft=new Map,pt={set(t,e,n){ft.has(t)||ft.set(t,new Map);const r=ft.get(t);r.has(e)||0===r.size?r.set(e,n):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(r.keys())[0]}.`)},get(t,e){return ft.has(t)&&ft.get(t).get(e)||null},remove(t,e){if(!ft.has(t))return;const n=ft.get(t);n.delete(e),0===n.size&&ft.delete(t)}};function mt(t){if("true"===t)return!0;if("false"===t)return!1;if(t===Number(t).toString())return Number(t);if(""===t||"null"===t)return null;if("string"!==typeof t)return t;try{return JSON.parse(decodeURIComponent(t))}catch(e){return t}}function gt(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}const vt={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${gt(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${gt(e)}`)},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter((t=>t.startsWith("bs")&&!t.startsWith("bsConfig")));for(const r of n){let n=r.replace(/^bs/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),e[n]=mt(t.dataset[r])}return e},getDataAttribute(t,e){return mt(t.getAttribute(`data-bs-${gt(e)}`))}};class yt{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const n=L(e)?vt.getDataAttribute(e,"config"):{};return{...this.constructor.Default,..."object"===typeof n?n:{},...L(e)?vt.getDataAttributes(e):{},..."object"===typeof t?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const n of Object.keys(e)){const r=e[n],i=t[n],o=L(i)?"element":T(i);if(!new RegExp(r).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${n}" provided type "${o}" but expected type "${r}".`)}}}const bt="5.2.1";class _t extends yt{constructor(t,e){super(),t=D(t),t&&(this._element=t,this._config=this._getConfig(e),pt.set(this._element,this.constructor.DATA_KEY,this))}dispose(){pt.remove(this._element,this.constructor.DATA_KEY),dt.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,n=!0){$(t,e,n)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return pt.get(D(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,"object"===typeof e?e:null)}static get VERSION(){return bt}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const wt=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,r=t.NAME;dt.on(document,n,`[data-bs-dismiss="${r}"]`,(function(n){if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),N(this))return;const i=O(this)||this.closest(`.${r}`),o=t.getOrCreateInstance(i);o[e]()}))},xt="alert",St="bs.alert",Et=`.${St}`,Mt=`close${Et}`,Tt=`closed${Et}`,Ct="fade",At="show";class kt extends _t{static get NAME(){return xt}close(){const t=dt.trigger(this._element,Mt);if(t.defaultPrevented)return;this._element.classList.remove(At);const e=this._element.classList.contains(Ct);this._queueCallback((()=>this._destroyElement()),this._element,e)}_destroyElement(){this._element.remove(),dt.trigger(this._element,Tt),this.dispose()}static jQueryInterface(t){return this.each((function(){const e=kt.getOrCreateInstance(this);if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}wt(kt,"close"),W(kt);const Ot="button",Rt="bs.button",Pt=`.${Rt}`,Lt=".data-api",Dt="active",It='[data-bs-toggle="button"]',Nt=`click${Pt}${Lt}`;class Ut extends _t{static get NAME(){return Ot}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Dt))}static jQueryInterface(t){return this.each((function(){const e=Ut.getOrCreateInstance(this);"toggle"===t&&e[t]()}))}}dt.on(document,Nt,It,(t=>{t.preventDefault();const e=t.target.closest(It),n=Ut.getOrCreateInstance(e);n.toggle()})),W(Ut);const Ft={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter((t=>t.matches(e)))},parents(t,e){const n=[];let r=t.parentNode.closest(e);while(r)n.push(r),r=r.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;while(n){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;while(n){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((t=>`${t}:not([tabindex^="-"])`)).join(",");return this.find(e,t).filter((t=>!N(t)&&I(t)))}},Bt="swipe",Vt=".bs.swipe",zt=`touchstart${Vt}`,jt=`touchmove${Vt}`,Ht=`touchend${Vt}`,Wt=`pointerdown${Vt}`,Gt=`pointerup${Vt}`,$t="touch",qt="pen",Yt="pointer-event",Xt=40,Zt={endCallback:null,leftCallback:null,rightCallback:null},Kt={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Jt extends yt{constructor(t,e){super(),this._element=t,t&&Jt.isSupported()&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return Zt}static get DefaultType(){return Kt}static get NAME(){return Bt}dispose(){dt.off(this._element,Vt)}_start(t){this._supportPointerEvents?this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX):this._deltaX=t.touches[0].clientX}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),G(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=Xt)return;const e=t/this._deltaX;this._deltaX=0,e&&G(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(dt.on(this._element,Wt,(t=>this._start(t))),dt.on(this._element,Gt,(t=>this._end(t))),this._element.classList.add(Yt)):(dt.on(this._element,zt,(t=>this._start(t))),dt.on(this._element,jt,(t=>this._move(t))),dt.on(this._element,Ht,(t=>this._end(t))))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===qt||t.pointerType===$t)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Qt="carousel",te="bs.carousel",ee=`.${te}`,ne=".data-api",re="ArrowLeft",ie="ArrowRight",oe=500,se="next",ae="prev",le="left",ce="right",ue=`slide${ee}`,de=`slid${ee}`,he=`keydown${ee}`,fe=`mouseenter${ee}`,pe=`mouseleave${ee}`,me=`dragstart${ee}`,ge=`load${ee}${ne}`,ve=`click${ee}${ne}`,ye="carousel",be="active",_e="slide",we="carousel-item-end",xe="carousel-item-start",Se="carousel-item-next",Ee="carousel-item-prev",Me=".active",Te=".carousel-item",Ce=Me+Te,Ae=".carousel-item img",ke=".carousel-indicators",Oe="[data-bs-slide], [data-bs-slide-to]",Re='[data-bs-ride="carousel"]',Pe={[re]:ce,[ie]:le},Le={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},De={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Ie extends _t{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Ft.findOne(ke,this._element),this._addEventListeners(),this._config.ride===ye&&this.cycle()}static get Default(){return Le}static get DefaultType(){return De}static get NAME(){return Qt}next(){this._slide(se)}nextWhenVisible(){!document.hidden&&I(this._element)&&this.next()}prev(){this._slide(ae)}pause(){this._isSliding&&P(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval((()=>this.nextWhenVisible()),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?dt.one(this._element,de,(()=>this.cycle())):this.cycle())}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding)return void dt.one(this._element,de,(()=>this.to(t)));const n=this._getItemIndex(this._getActive());if(n===t)return;const r=t>n?se:ae;this._slide(r,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&dt.on(this._element,he,(t=>this._keydown(t))),"hover"===this._config.pause&&(dt.on(this._element,fe,(()=>this.pause())),dt.on(this._element,pe,(()=>this._maybeEnableCycle()))),this._config.touch&&Jt.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const n of Ft.find(Ae,this._element))dt.on(n,me,(t=>t.preventDefault()));const t=()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((()=>this._maybeEnableCycle()),oe+this._config.interval))},e={leftCallback:()=>this._slide(this._directionToOrder(le)),rightCallback:()=>this._slide(this._directionToOrder(ce)),endCallback:t};this._swipeHelper=new Jt(this._element,e)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=Pe[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=Ft.findOne(Me,this._indicatorsElement);e.classList.remove(be),e.removeAttribute("aria-current");const n=Ft.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);n&&(n.classList.add(be),n.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const n=this._getActive(),r=t===se,i=e||q(this._getItems(),n,r,this._config.wrap);if(i===n)return;const o=this._getItemIndex(i),s=e=>dt.trigger(this._element,e,{relatedTarget:i,direction:this._orderToDirection(t),from:this._getItemIndex(n),to:o}),a=s(ue);if(a.defaultPrevented)return;if(!n||!i)return;const l=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=i;const c=r?xe:we,u=r?Se:Ee;i.classList.add(u),B(i),n.classList.add(c),i.classList.add(c);const d=()=>{i.classList.remove(c,u),i.classList.add(be),n.classList.remove(be,u,c),this._isSliding=!1,s(de)};this._queueCallback(d,n,this._isAnimated()),l&&this.cycle()}_isAnimated(){return this._element.classList.contains(_e)}_getActive(){return Ft.findOne(Ce,this._element)}_getItems(){return Ft.find(Te,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return H()?t===le?ae:se:t===le?se:ae}_orderToDirection(t){return H()?t===ae?le:ce:t===ae?ce:le}static jQueryInterface(t){return this.each((function(){const e=Ie.getOrCreateInstance(this,t);if("number"!==typeof t){if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}else e.to(t)}))}}dt.on(document,ve,Oe,(function(t){const e=O(this);if(!e||!e.classList.contains(ye))return;t.preventDefault();const n=Ie.getOrCreateInstance(e),r=this.getAttribute("data-bs-slide-to");return r?(n.to(r),void n._maybeEnableCycle()):"next"===vt.getDataAttribute(this,"slide")?(n.next(),void n._maybeEnableCycle()):(n.prev(),void n._maybeEnableCycle())})),dt.on(window,ge,(()=>{const t=Ft.find(Re);for(const e of t)Ie.getOrCreateInstance(e)})),W(Ie);const Ne="collapse",Ue="bs.collapse",Fe=`.${Ue}`,Be=".data-api",Ve=`show${Fe}`,ze=`shown${Fe}`,je=`hide${Fe}`,He=`hidden${Fe}`,We=`click${Fe}${Be}`,Ge="show",$e="collapse",qe="collapsing",Ye="collapsed",Xe=`:scope .${$e} .${$e}`,Ze="collapse-horizontal",Ke="width",Je="height",Qe=".collapse.show, .collapse.collapsing",tn='[data-bs-toggle="collapse"]',en={parent:null,toggle:!0},nn={parent:"(null|element)",toggle:"boolean"};class rn extends _t{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const n=Ft.find(tn);for(const r of n){const t=k(r),e=Ft.find(t).filter((t=>t===this._element));null!==t&&e.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return en}static get DefaultType(){return nn}static get NAME(){return Ne}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(Qe).filter((t=>t!==this._element)).map((t=>rn.getOrCreateInstance(t,{toggle:!1})))),t.length&&t[0]._isTransitioning)return;const e=dt.trigger(this._element,Ve);if(e.defaultPrevented)return;for(const s of t)s.hide();const n=this._getDimension();this._element.classList.remove($e),this._element.classList.add(qe),this._element.style[n]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(qe),this._element.classList.add($e,Ge),this._element.style[n]="",dt.trigger(this._element,ze)},i=n[0].toUpperCase()+n.slice(1),o=`scroll${i}`;this._queueCallback(r,this._element,!0),this._element.style[n]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown())return;const t=dt.trigger(this._element,je);if(t.defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,B(this._element),this._element.classList.add(qe),this._element.classList.remove($e,Ge);for(const r of this._triggerArray){const t=O(r);t&&!this._isShown(t)&&this._addAriaAndCollapsedClass([r],!1)}this._isTransitioning=!0;const n=()=>{this._isTransitioning=!1,this._element.classList.remove(qe),this._element.classList.add($e),dt.trigger(this._element,He)};this._element.style[e]="",this._queueCallback(n,this._element,!0)}_isShown(t=this._element){return t.classList.contains(Ge)}_configAfterMerge(t){return t.toggle=Boolean(t.toggle),t.parent=D(t.parent),t}_getDimension(){return this._element.classList.contains(Ze)?Ke:Je}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(tn);for(const e of t){const t=O(e);t&&this._addAriaAndCollapsedClass([e],this._isShown(t))}}_getFirstLevelChildren(t){const e=Ft.find(Xe,this._config.parent);return Ft.find(t,this._config.parent).filter((t=>!e.includes(t)))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const n of t)n.classList.toggle(Ye,!e),n.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return"string"===typeof t&&/show|hide/.test(t)&&(e.toggle=!1),this.each((function(){const n=rn.getOrCreateInstance(this,e);if("string"===typeof t){if("undefined"===typeof n[t])throw new TypeError(`No method named "${t}"`);n[t]()}}))}}dt.on(document,We,tn,(function(t){("A"===t.target.tagName||t.delegateTarget&&"A"===t.delegateTarget.tagName)&&t.preventDefault();const e=k(this),n=Ft.find(e);for(const r of n)rn.getOrCreateInstance(r,{toggle:!1}).toggle()})),W(rn);const on="dropdown",sn="bs.dropdown",an=`.${sn}`,ln=".data-api",cn="Escape",un="Tab",dn="ArrowUp",hn="ArrowDown",fn=2,pn=`hide${an}`,mn=`hidden${an}`,gn=`show${an}`,vn=`shown${an}`,yn=`click${an}${ln}`,bn=`keydown${an}${ln}`,_n=`keyup${an}${ln}`,wn="show",xn="dropup",Sn="dropend",En="dropstart",Mn="dropup-center",Tn="dropdown-center",Cn='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',An=`${Cn}.${wn}`,kn=".dropdown-menu",On=".navbar",Rn=".navbar-nav",Pn=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Ln=H()?"top-end":"top-start",Dn=H()?"top-start":"top-end",In=H()?"bottom-end":"bottom-start",Nn=H()?"bottom-start":"bottom-end",Un=H()?"left-start":"right-start",Fn=H()?"right-start":"left-start",Bn="top",Vn="bottom",zn={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},jn={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Hn extends _t{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=Ft.next(this._element,kn)[0]||Ft.prev(this._element,kn)[0],this._inNavbar=this._detectNavbar()}static get Default(){return zn}static get DefaultType(){return jn}static get NAME(){return on}toggle(){return this._isShown()?this.hide():this.show()}show(){if(N(this._element)||this._isShown())return;const t={relatedTarget:this._element},e=dt.trigger(this._element,gn,t);if(!e.defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(Rn))for(const t of[].concat(...document.body.children))dt.on(t,"mouseover",F);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(wn),this._element.classList.add(wn),dt.trigger(this._element,vn,t)}}hide(){if(N(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){const e=dt.trigger(this._element,pn,t);if(!e.defaultPrevented){if("ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))dt.off(t,"mouseover",F);this._popper&&this._popper.destroy(),this._menu.classList.remove(wn),this._element.classList.remove(wn),this._element.setAttribute("aria-expanded","false"),vt.removeDataAttribute(this._menu,"popper"),dt.trigger(this._element,mn,t)}}_getConfig(t){if(t=super._getConfig(t),"object"===typeof t.reference&&!L(t.reference)&&"function"!==typeof t.reference.getBoundingClientRect)throw new TypeError(`${on.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if("undefined"===typeof r)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;"parent"===this._config.reference?t=this._parent:L(this._config.reference)?t=D(this._config.reference):"object"===typeof this._config.reference&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=_.fi(t,this._menu,e)}_isShown(){return this._menu.classList.contains(wn)}_getPlacement(){const t=this._parent;if(t.classList.contains(Sn))return Un;if(t.classList.contains(En))return Fn;if(t.classList.contains(Mn))return Bn;if(t.classList.contains(Tn))return Vn;const e="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return t.classList.contains(xn)?e?Dn:Ln:e?Nn:In}_detectNavbar(){return null!==this._element.closest(On)}_getOffset(){const{offset:t}=this._config;return"string"===typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"===typeof t?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(vt.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,..."function"===typeof this._config.popperConfig?this._config.popperConfig(t):this._config.popperConfig}}_selectMenuItem({key:t,target:e}){const n=Ft.find(Pn,this._menu).filter((t=>I(t)));n.length&&q(n,e,t===hn,!n.includes(e)).focus()}static jQueryInterface(t){return this.each((function(){const e=Hn.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}static clearMenus(t){if(t.button===fn||"keyup"===t.type&&t.key!==un)return;const e=Ft.find(An);for(const n of e){const e=Hn.getInstance(n);if(!e||!1===e._config.autoClose)continue;const r=t.composedPath(),i=r.includes(e._menu);if(r.includes(e._element)||"inside"===e._config.autoClose&&!i||"outside"===e._config.autoClose&&i)continue;if(e._menu.contains(t.target)&&("keyup"===t.type&&t.key===un||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const o={relatedTarget:e._element};"click"===t.type&&(o.clickEvent=t),e._completeHide(o)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),n=t.key===cn,r=[dn,hn].includes(t.key);if(!r&&!n)return;if(e&&!n)return;t.preventDefault();const i=this.matches(Cn)?this:Ft.prev(this,Cn)[0]||Ft.next(this,Cn)[0],o=Hn.getOrCreateInstance(i);if(r)return t.stopPropagation(),o.show(),void o._selectMenuItem(t);o._isShown()&&(t.stopPropagation(),o.hide(),i.focus())}}dt.on(document,bn,Cn,Hn.dataApiKeydownHandler),dt.on(document,bn,kn,Hn.dataApiKeydownHandler),dt.on(document,yn,Hn.clearMenus),dt.on(document,_n,Hn.clearMenus),dt.on(document,yn,Cn,(function(t){t.preventDefault(),Hn.getOrCreateInstance(this).toggle()})),W(Hn);const Wn=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Gn=".sticky-top",$n="padding-right",qn="margin-right";class Yn{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,$n,(e=>e+t)),this._setElementAttributes(Wn,$n,(e=>e+t)),this._setElementAttributes(Gn,qn,(e=>e-t))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,$n),this._resetElementAttributes(Wn,$n),this._resetElementAttributes(Gn,qn)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,n){const r=this.getWidth(),i=t=>{if(t!==this._element&&window.innerWidth>t.clientWidth+r)return;this._saveInitialAttribute(t,e);const i=window.getComputedStyle(t).getPropertyValue(e);t.style.setProperty(e,`${n(Number.parseFloat(i))}px`)};this._applyManipulationCallback(t,i)}_saveInitialAttribute(t,e){const n=t.style.getPropertyValue(e);n&&vt.setDataAttribute(t,e,n)}_resetElementAttributes(t,e){const n=t=>{const n=vt.getDataAttribute(t,e);null!==n?(vt.removeDataAttribute(t,e),t.style.setProperty(e,n)):t.style.removeProperty(e)};this._applyManipulationCallback(t,n)}_applyManipulationCallback(t,e){if(L(t))e(t);else for(const n of Ft.find(t,this._element))e(n)}}const Xn="backdrop",Zn="fade",Kn="show",Jn=`mousedown.bs.${Xn}`,Qn={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},tr={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class er extends yt{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return Qn}static get DefaultType(){return tr}static get NAME(){return Xn}show(t){if(!this._config.isVisible)return void G(t);this._append();const e=this._getElement();this._config.isAnimated&&B(e),e.classList.add(Kn),this._emulateAnimation((()=>{G(t)}))}hide(t){this._config.isVisible?(this._getElement().classList.remove(Kn),this._emulateAnimation((()=>{this.dispose(),G(t)}))):G(t)}dispose(){this._isAppended&&(dt.off(this._element,Jn),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(Zn),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=D(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),dt.on(t,Jn,(()=>{G(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(t){$(t,this._getElement(),this._config.isAnimated)}}const nr="focustrap",rr="bs.focustrap",ir=`.${rr}`,or=`focusin${ir}`,sr=`keydown.tab${ir}`,ar="Tab",lr="forward",cr="backward",ur={autofocus:!0,trapElement:null},dr={autofocus:"boolean",trapElement:"element"};class hr extends yt{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return ur}static get DefaultType(){return dr}static get NAME(){return nr}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),dt.off(document,ir),dt.on(document,or,(t=>this._handleFocusin(t))),dt.on(document,sr,(t=>this._handleKeydown(t))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,dt.off(document,ir))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const n=Ft.focusableChildren(e);0===n.length?e.focus():this._lastTabNavDirection===cr?n[n.length-1].focus():n[0].focus()}_handleKeydown(t){t.key===ar&&(this._lastTabNavDirection=t.shiftKey?cr:lr)}}const fr="modal",pr="bs.modal",mr=`.${pr}`,gr=".data-api",vr="Escape",yr=`hide${mr}`,br=`hidePrevented${mr}`,_r=`hidden${mr}`,wr=`show${mr}`,xr=`shown${mr}`,Sr=`resize${mr}`,Er=`click.dismiss${mr}`,Mr=`mousedown.dismiss${mr}`,Tr=`keydown.dismiss${mr}`,Cr=`click${mr}${gr}`,Ar="modal-open",kr="fade",Or="show",Rr="modal-static",Pr=".modal.show",Lr=".modal-dialog",Dr=".modal-body",Ir='[data-bs-toggle="modal"]',Nr={backdrop:!0,focus:!0,keyboard:!0},Ur={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Fr extends _t{constructor(t,e){super(t,e),this._dialog=Ft.findOne(Lr,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Yn,this._addEventListeners()}static get Default(){return Nr}static get DefaultType(){return Ur}static get NAME(){return fr}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||this._isTransitioning)return;const e=dt.trigger(this._element,wr,{relatedTarget:t});e.defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Ar),this._adjustDialog(),this._backdrop.show((()=>this._showElement(t))))}hide(){if(!this._isShown||this._isTransitioning)return;const t=dt.trigger(this._element,yr);t.defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Or),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated()))}dispose(){for(const t of[window,this._dialog])dt.off(t,mr);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new er({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new hr({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=Ft.findOne(Dr,this._dialog);e&&(e.scrollTop=0),B(this._element),this._element.classList.add(Or);const n=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,dt.trigger(this._element,xr,{relatedTarget:t})};this._queueCallback(n,this._dialog,this._isAnimated())}_addEventListeners(){dt.on(this._element,Tr,(t=>{if(t.key===vr)return this._config.keyboard?(t.preventDefault(),void this.hide()):void this._triggerBackdropTransition()})),dt.on(window,Sr,(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),dt.on(this._element,Mr,(t=>{dt.one(this._element,Er,(e=>{this._dialog.contains(t.target)||this._dialog.contains(e.target)||("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(Ar),this._resetAdjustments(),this._scrollBar.reset(),dt.trigger(this._element,_r)}))}_isAnimated(){return this._element.classList.contains(kr)}_triggerBackdropTransition(){const t=dt.trigger(this._element,br);if(t.defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._element.style.overflowY;"hidden"===n||this._element.classList.contains(Rr)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(Rr),this._queueCallback((()=>{this._element.classList.remove(Rr),this._queueCallback((()=>{this._element.style.overflowY=n}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),n=e>0;if(n&&!t){const t=H()?"paddingLeft":"paddingRight";this._element.style[t]=`${e}px`}if(!n&&t){const t=H()?"paddingRight":"paddingLeft";this._element.style[t]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each((function(){const n=Fr.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof n[t])throw new TypeError(`No method named "${t}"`);n[t](e)}}))}}dt.on(document,Cr,Ir,(function(t){const e=O(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),dt.one(e,wr,(t=>{t.defaultPrevented||dt.one(e,_r,(()=>{I(this)&&this.focus()}))}));const n=Ft.findOne(Pr);n&&Fr.getInstance(n).hide();const r=Fr.getOrCreateInstance(e);r.toggle(this)})),wt(Fr),W(Fr);const Br="offcanvas",Vr="bs.offcanvas",zr=`.${Vr}`,jr=".data-api",Hr=`load${zr}${jr}`,Wr="Escape",Gr="show",$r="showing",qr="hiding",Yr="offcanvas-backdrop",Xr=".offcanvas.show",Zr=`show${zr}`,Kr=`shown${zr}`,Jr=`hide${zr}`,Qr=`hidePrevented${zr}`,ti=`hidden${zr}`,ei=`resize${zr}`,ni=`click${zr}${jr}`,ri=`keydown.dismiss${zr}`,ii='[data-bs-toggle="offcanvas"]',oi={backdrop:!0,keyboard:!0,scroll:!1},si={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class ai extends _t{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return oi}static get DefaultType(){return si}static get NAME(){return Br}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown)return;const e=dt.trigger(this._element,Zr,{relatedTarget:t});if(e.defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||(new Yn).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add($r);const n=()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Gr),this._element.classList.remove($r),dt.trigger(this._element,Kr,{relatedTarget:t})};this._queueCallback(n,this._element,!0)}hide(){if(!this._isShown)return;const t=dt.trigger(this._element,Jr);if(t.defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(qr),this._backdrop.hide();const e=()=>{this._element.classList.remove(Gr,qr),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new Yn).reset(),dt.trigger(this._element,ti)};this._queueCallback(e,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{"static"!==this._config.backdrop?this.hide():dt.trigger(this._element,Qr)},e=Boolean(this._config.backdrop);return new er({className:Yr,isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?t:null})}_initializeFocusTrap(){return new hr({trapElement:this._element})}_addEventListeners(){dt.on(this._element,ri,(t=>{t.key===Wr&&(this._config.keyboard?this.hide():dt.trigger(this._element,Qr))}))}static jQueryInterface(t){return this.each((function(){const e=ai.getOrCreateInstance(this,t);if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}dt.on(document,ni,ii,(function(t){const e=O(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),N(this))return;dt.one(e,ti,(()=>{I(this)&&this.focus()}));const n=Ft.findOne(Xr);n&&n!==e&&ai.getInstance(n).hide();const r=ai.getOrCreateInstance(e);r.toggle(this)})),dt.on(window,Hr,(()=>{for(const t of Ft.find(Xr))ai.getOrCreateInstance(t).show()})),dt.on(window,ei,(()=>{for(const t of Ft.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(t).position&&ai.getOrCreateInstance(t).hide()})),wt(ai),W(ai);const li=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),ci=/^aria-[\w-]*$/i,ui=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,di=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,hi=(t,e)=>{const n=t.nodeName.toLowerCase();return e.includes(n)?!li.has(n)||Boolean(ui.test(t.nodeValue)||di.test(t.nodeValue)):e.filter((t=>t instanceof RegExp)).some((t=>t.test(n)))},fi={"*":["class","dir","id","lang","role",ci],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function pi(t,e,n){if(!t.length)return t;if(n&&"function"===typeof n)return n(t);const r=new window.DOMParser,i=r.parseFromString(t,"text/html"),o=[].concat(...i.body.querySelectorAll("*"));for(const s of o){const t=s.nodeName.toLowerCase();if(!Object.keys(e).includes(t)){s.remove();continue}const n=[].concat(...s.attributes),r=[].concat(e["*"]||[],e[t]||[]);for(const e of n)hi(e,r)||s.removeAttribute(e.nodeName)}return i.body.innerHTML}const mi="TemplateFactory",gi={allowList:fi,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},vi={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},yi={entry:"(string|element|function|null)",selector:"(string|element)"};class bi extends yt{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return gi}static get DefaultType(){return vi}static get NAME(){return mi}getContent(){return Object.values(this._config.content).map((t=>this._resolvePossibleFunction(t))).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[r,i]of Object.entries(this._config.content))this._setContent(t,i,r);const e=t.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&e.classList.add(...n.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,n]of Object.entries(t))super._typeCheckConfig({selector:e,entry:n},yi)}_setContent(t,e,n){const r=Ft.findOne(n,t);r&&(e=this._resolvePossibleFunction(e),e?L(e)?this._putElementInTemplate(D(e),r):this._config.html?r.innerHTML=this._maybeSanitize(e):r.textContent=e:r.remove())}_maybeSanitize(t){return this._config.sanitize?pi(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return"function"===typeof t?t(this):t}_putElementInTemplate(t,e){if(this._config.html)return e.innerHTML="",void e.append(t);e.textContent=t.textContent}}const _i="tooltip",wi=new Set(["sanitize","allowList","sanitizeFn"]),xi="fade",Si="modal",Ei="show",Mi=".tooltip-inner",Ti=`.${Si}`,Ci="hide.bs.modal",Ai="hover",ki="focus",Oi="click",Ri="manual",Pi="hide",Li="hidden",Di="show",Ii="shown",Ni="inserted",Ui="click",Fi="focusin",Bi="focusout",Vi="mouseenter",zi="mouseleave",ji={AUTO:"auto",TOP:"top",RIGHT:H()?"left":"right",BOTTOM:"bottom",LEFT:H()?"right":"left"},Hi={allowList:fi,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Wi={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Gi extends _t{constructor(t,e){if("undefined"===typeof r)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners()}static get Default(){return Hi}static get DefaultType(){return Wi}static get NAME(){return _i}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(t){if(this._isEnabled){if(t){const e=this._initializeOnDelegatedTarget(t);return e._activeTrigger.click=!e._activeTrigger.click,void(e._isWithActiveTrigger()?e._enter():e._leave())}this._isShown()?this._leave():this._enter()}}dispose(){clearTimeout(this._timeout),dt.off(this._element.closest(Ti),Ci,this._hideModalHandler),this.tip&&this.tip.remove(),this._config.originalTitle&&this._element.setAttribute("title",this._config.originalTitle),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const t=dt.trigger(this._element,this.constructor.eventName(Di)),e=U(this._element),n=(e||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!n)return;this.tip&&(this.tip.remove(),this.tip=null);const r=this._getTipElement();this._element.setAttribute("aria-describedby",r.getAttribute("id"));const{container:i}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(i.append(r),dt.trigger(this._element,this.constructor.eventName(Ni))),this._popper?this._popper.update():this._popper=this._createPopper(r),r.classList.add(Ei),"ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))dt.on(s,"mouseover",F);const o=()=>{dt.trigger(this._element,this.constructor.eventName(Ii)),!1===this._isHovered&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown())return;const t=dt.trigger(this._element,this.constructor.eventName(Pi));if(t.defaultPrevented)return;const e=this._getTipElement();if(e.classList.remove(Ei),"ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))dt.off(r,"mouseover",F);this._activeTrigger[Oi]=!1,this._activeTrigger[ki]=!1,this._activeTrigger[Ai]=!1,this._isHovered=null;const n=()=>{this._isWithActiveTrigger()||(this._isHovered||e.remove(),this._element.removeAttribute("aria-describedby"),dt.trigger(this._element,this.constructor.eventName(Li)),this._disposePopper())};this._queueCallback(n,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(xi,Ei),e.classList.add(`bs-${this.constructor.NAME}-auto`);const n=C(this.constructor.NAME).toString();return e.setAttribute("id",n),this._isAnimated()&&e.classList.add(xi),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new bi({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Mi]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._config.originalTitle}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(xi)}_isShown(){return this.tip&&this.tip.classList.contains(Ei)}_createPopper(t){const e="function"===typeof this._config.placement?this._config.placement.call(this,t,this._element):this._config.placement,n=ji[e.toUpperCase()];return _.fi(this._element,t,this._getPopperConfig(n))}_getOffset(){const{offset:t}=this._config;return"string"===typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"===typeof t?e=>t(e,this._element):t}_resolvePossibleFunction(t){return"function"===typeof t?t.call(this._element):t}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:t=>{this._getTipElement().setAttribute("data-popper-placement",t.state.placement)}}]};return{...e,..."function"===typeof this._config.popperConfig?this._config.popperConfig(e):this._config.popperConfig}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if("click"===e)dt.on(this._element,this.constructor.eventName(Ui),this._config.selector,(t=>this.toggle(t)));else if(e!==Ri){const t=e===Ai?this.constructor.eventName(Vi):this.constructor.eventName(Fi),n=e===Ai?this.constructor.eventName(zi):this.constructor.eventName(Bi);dt.on(this._element,t,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusin"===t.type?ki:Ai]=!0,e._enter()})),dt.on(this._element,n,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusout"===t.type?ki:Ai]=e._element.contains(t.relatedTarget),e._leave()}))}this._hideModalHandler=()=>{this._element&&this.hide()},dt.on(this._element.closest(Ti),Ci,this._hideModalHandler),this._config.selector?this._config={...this._config,trigger:"manual",selector:""}:this._fixTitle()}_fixTitle(){const t=this._config.originalTitle;t&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",t),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout((()=>{this._isHovered&&this.show()}),this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout((()=>{this._isHovered||this.hide()}),this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=vt.getDataAttributes(this._element);for(const n of Object.keys(e))wi.has(n)&&delete e[n];return t={...e,..."object"===typeof t&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=!1===t.container?document.body:D(t.container),"number"===typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t.originalTitle=this._element.getAttribute("title")||"","number"===typeof t.title&&(t.title=t.title.toString()),"number"===typeof t.content&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const e in this._config)this.constructor.Default[e]!==this._config[e]&&(t[e]=this._config[e]);return t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null)}static jQueryInterface(t){return this.each((function(){const e=Gi.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}W(Gi);const $i="popover",qi=".popover-header",Yi=".popover-body",Xi={...Gi.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Zi={...Gi.DefaultType,content:"(null|string|element|function)"};class Ki extends Gi{static get Default(){return Xi}static get DefaultType(){return Zi}static get NAME(){return $i}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[qi]:this._getTitle(),[Yi]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each((function(){const e=Ki.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}W(Ki);const Ji="scrollspy",Qi="bs.scrollspy",to=`.${Qi}`,eo=".data-api",no=`activate${to}`,ro=`click${to}`,io=`load${to}${eo}`,oo="dropdown-item",so="active",ao='[data-bs-spy="scroll"]',lo="[href]",co=".nav, .list-group",uo=".nav-link",ho=".nav-item",fo=".list-group-item",po=`${uo}, ${ho} > ${uo}, ${fo}`,mo=".dropdown",go=".dropdown-toggle",vo={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},yo={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class bo extends _t{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return vo}static get DefaultType(){return yo}static get NAME(){return Ji}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=D(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,"string"===typeof t.threshold&&(t.threshold=t.threshold.split(",").map((t=>Number.parseFloat(t)))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(dt.off(this._config.target,ro),dt.on(this._config.target,ro,lo,(t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const n=this._rootElement||window,r=e.offsetTop-this._element.offsetTop;if(n.scrollTo)return void n.scrollTo({top:r,behavior:"smooth"});n.scrollTop=r}})))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver((t=>this._observerCallback(t)),t)}_observerCallback(t){const e=t=>this._targetLinks.get(`#${t.target.id}`),n=t=>{this._previousScrollData.visibleEntryTop=t.target.offsetTop,this._process(e(t))},r=(this._rootElement||document.documentElement).scrollTop,i=r>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=r;for(const o of t){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(o));continue}const t=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(i&&t){if(n(o),!r)return}else i||t||n(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=Ft.find(lo,this._config.target);for(const e of t){if(!e.hash||N(e))continue;const t=Ft.findOne(e.hash,this._element);I(t)&&(this._targetLinks.set(e.hash,e),this._observableSections.set(e.hash,t))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(so),this._activateParents(t),dt.trigger(this._element,no,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(oo))Ft.findOne(go,t.closest(mo)).classList.add(so);else for(const e of Ft.parents(t,co))for(const t of Ft.prev(e,po))t.classList.add(so)}_clearActiveClass(t){t.classList.remove(so);const e=Ft.find(`${lo}.${so}`,t);for(const n of e)n.classList.remove(so)}static jQueryInterface(t){return this.each((function(){const e=bo.getOrCreateInstance(this,t);if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}))}}dt.on(window,io,(()=>{for(const t of Ft.find(ao))bo.getOrCreateInstance(t)})),W(bo);const _o="tab",wo="bs.tab",xo=`.${wo}`,So=`hide${xo}`,Eo=`hidden${xo}`,Mo=`show${xo}`,To=`shown${xo}`,Co=`click${xo}`,Ao=`keydown${xo}`,ko=`load${xo}`,Oo="ArrowLeft",Ro="ArrowRight",Po="ArrowUp",Lo="ArrowDown",Do="active",Io="fade",No="show",Uo="dropdown",Fo=".dropdown-toggle",Bo=".dropdown-menu",Vo=".dropdown-item",zo=":not(.dropdown-toggle)",jo='.list-group, .nav, [role="tablist"]',Ho=".nav-item, .list-group-item",Wo=`.nav-link${zo}, .list-group-item${zo}, [role="tab"]${zo}`,Go='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',$o=`${Wo}, ${Go}`,qo=`.${Do}[data-bs-toggle="tab"], .${Do}[data-bs-toggle="pill"], .${Do}[data-bs-toggle="list"]`;class Yo extends _t{constructor(t){super(t),this._parent=this._element.closest(jo),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),dt.on(this._element,Ao,(t=>this._keydown(t))))}static get NAME(){return _o}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),n=e?dt.trigger(e,So,{relatedTarget:t}):null,r=dt.trigger(t,Mo,{relatedTarget:e});r.defaultPrevented||n&&n.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){if(!t)return;t.classList.add(Do),this._activate(O(t));const n=()=>{"tab"===t.getAttribute("role")?(t.focus(),t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),dt.trigger(t,To,{relatedTarget:e})):t.classList.add(No)};this._queueCallback(n,t,t.classList.contains(Io))}_deactivate(t,e){if(!t)return;t.classList.remove(Do),t.blur(),this._deactivate(O(t));const n=()=>{"tab"===t.getAttribute("role")?(t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),dt.trigger(t,Eo,{relatedTarget:e})):t.classList.remove(No)};this._queueCallback(n,t,t.classList.contains(Io))}_keydown(t){if(![Oo,Ro,Po,Lo].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=[Ro,Lo].includes(t.key),n=q(this._getChildren().filter((t=>!N(t))),t.target,e,!0);n&&Yo.getOrCreateInstance(n).show()}_getChildren(){return Ft.find($o,this._parent)}_getActiveElem(){return this._getChildren().find((t=>this._elemIsActive(t)))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const n of e)this._setInitialAttributesOnChild(n)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),n=this._getOuterElement(t);t.setAttribute("aria-selected",e),n!==t&&this._setAttributeIfNotExists(n,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=O(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`#${t.id}`))}_toggleDropDown(t,e){const n=this._getOuterElement(t);if(!n.classList.contains(Uo))return;const r=(t,r)=>{const i=Ft.findOne(t,n);i&&i.classList.toggle(r,e)};r(Fo,Do),r(Bo,No),r(Vo,Do),n.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,n){t.hasAttribute(e)||t.setAttribute(e,n)}_elemIsActive(t){return t.classList.contains(Do)}_getInnerElement(t){return t.matches($o)?t:Ft.findOne($o,t)}_getOuterElement(t){return t.closest(Ho)||t}static jQueryInterface(t){return this.each((function(){const e=Yo.getOrCreateInstance(this);if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}))}}dt.on(document,Co,Go,(function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),N(this)||Yo.getOrCreateInstance(this).show()})),dt.on(window,ko,(()=>{for(const t of Ft.find(qo))Yo.getOrCreateInstance(t)})),W(Yo);const Xo="toast",Zo="bs.toast",Ko=`.${Zo}`,Jo=`mouseover${Ko}`,Qo=`mouseout${Ko}`,ts=`focusin${Ko}`,es=`focusout${Ko}`,ns=`hide${Ko}`,rs=`hidden${Ko}`,is=`show${Ko}`,os=`shown${Ko}`,ss="fade",as="hide",ls="show",cs="showing",us={animation:"boolean",autohide:"boolean",delay:"number"},ds={animation:!0,autohide:!0,delay:5e3};class hs extends _t{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return ds}static get DefaultType(){return us}static get NAME(){return Xo}show(){const t=dt.trigger(this._element,is);if(t.defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(ss);const e=()=>{this._element.classList.remove(cs),dt.trigger(this._element,os),this._maybeScheduleHide()};this._element.classList.remove(as),B(this._element),this._element.classList.add(ls,cs),this._queueCallback(e,this._element,this._config.animation)}hide(){if(!this.isShown())return;const t=dt.trigger(this._element,ns);if(t.defaultPrevented)return;const e=()=>{this._element.classList.add(as),this._element.classList.remove(cs,ls),dt.trigger(this._element,rs)};this._element.classList.add(cs),this._queueCallback(e,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(ls),super.dispose()}isShown(){return this._element.classList.contains(ls)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=e;break;case"focusin":case"focusout":this._hasKeyboardInteraction=e;break}if(e)return void this._clearTimeout();const n=t.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){dt.on(this._element,Jo,(t=>this._onInteraction(t,!0))),dt.on(this._element,Qo,(t=>this._onInteraction(t,!1))),dt.on(this._element,ts,(t=>this._onInteraction(t,!0))),dt.on(this._element,es,(t=>this._onInteraction(t,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each((function(){const e=hs.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}wt(hs),W(hs);var fs=Object.defineProperty,ps=(t,e,n)=>e in t?fs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ms=(t,e,n)=>(ps(t,"symbol"!=typeof e?e+"":e,n),n);const gs=t=>(0,i.Fl)((()=>"center"===t.value?"justify-content-center":"end"===t.value?"justify-content-end":"justify-content-start")),vs=(t,e)=>Object.keys(t).filter((t=>!e.includes(t))).reduce(((e,n)=>({...e,[n]:t[n]})),{}),ys=()=>({enumerable:!0,configurable:!1,writable:!1}),bs=t=>Array.isArray(t)?t.map((t=>bs(t))):t instanceof Date?new Date(t.getTime()):t&&"object"==typeof t?Object.getOwnPropertyNames(t).reduce(((e,n)=>{var r;return Object.defineProperty(e,n,null!=(r=Object.getOwnPropertyDescriptor(t,n))?r:{}),e[n]=bs(t[n]),e}),Object.create(Object.getPrototypeOf(t))):t,_s=t=>new Promise((e=>e(bs(t))));class ws{constructor(t,e={}){if(ms(this,"cancelable",!0),ms(this,"componentId",null),ms(this,"defaultPrevented",!1),ms(this,"nativeEvent",null),ms(this,"preventDefault"),ms(this,"relatedTarget",null),ms(this,"target",null),ms(this,"eventType",""),ms(this,"vueTarget",null),!t)throw new TypeError(`Failed to construct '${this.constructor.name}'. 1 argument required, ${arguments.length} given.`);Object.assign(this,ws.Defaults,this.constructor.Defaults,e,{eventType:t}),Object.defineProperties(this,{type:ys(),cancelable:ys(),nativeEvent:ys(),target:ys(),relatedTarget:ys(),vueTarget:ys(),componentId:ys()});let n=!1;this.preventDefault=function(){this.cancelable&&(n=!0)},Object.defineProperty(this,"defaultPrevented",{enumerable:!0,get(){return n}})}static get Defaults(){return{eventType:"",cancelable:!0,nativeEvent:null,target:null,relatedTarget:null,vueTarget:null,componentId:null}}}const xs=t=>null!==t&&"object"==typeof t,Ss=t=>/^[0-9]*\.?[0-9]+$/.test(String(t)),Es=t=>"[object Object]"===Object.prototype.toString.call(t),Ms=/_/g,Ts=/([a-z])([A-Z])/g,Cs=/(\s|^)(\w)/g,As=/(\s|^)(\w)/,ks=/\s+/,Os=/^#/,Rs=/^#[A-Za-z]+[\w\-:.]*$/,Ps=(t,e=2)=>"string"==typeof t?t:null==t?"":Array.isArray(t)||Es(t)&&t.toString===Object.prototype.toString?JSON.stringify(t,null,e):String(t),Ls=t=>t.replace(Ms," ").replace(Ts,((t,e,n)=>`${e} ${n}`)).replace(As,((t,e,n)=>e+n.toUpperCase())),Ds=t=>t.replace(Ms," ").replace(Ts,((t,e,n)=>`${e} ${n}`)).replace(Cs,((t,e,n)=>e+n.toUpperCase())),Is=t=>{const e=t.trim();return e.charAt(0).toUpperCase()+e.slice(1)},Ns=t=>`\\${t}`,Us=t=>{t=Ps(t);const{length:e}=t,n=t.charCodeAt(0);return t.split("").reduce(((r,i,o)=>{const s=t.charCodeAt(o);return 0===s?`${r}�`:127===s||s>=1&&s<=31||0===o&&s>=48&&s<=57||1===o&&s>=48&&s<=57&&45===n?r+Ns(`${s.toString(16)} `):0===o&&45===s&&1===e?r+Ns(i):s>=128||45===s||95===s||s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122?r+i:r+Ns(i)}),"")},Fs=typeof window<"u",Bs=typeof document<"u",Vs=typeof navigator<"u",zs=Fs&&Bs&&Vs,js=Bs?document:{},Hs=t=>!(!t||t.nodeType!==Node.ELEMENT_NODE),Ws=t=>Hs(t)?t.getBoundingClientRect():null,Gs=(t=[])=>{const{activeElement:e}=document;return e&&!t.some((t=>t===e))?e:null},$s=t=>Hs(t)&&t===Gs(),qs=(t,e={})=>{try{t.focus(e)}catch(n){console.error(n)}return $s(t)},Ys=(t,e)=>e&&Hs(t)&&t.getAttribute(e)||null,Xs=t=>{if("none"===Ys(t,"display"))return!1;const e=Ws(t);return!!(e&&e.height>0&&e.width>0)},Zs=(t,e)=>!t||t(e).filter((t=>t.type!==i.sv)).length<1,Ks=(t,e)=>(Hs(e)?e:js).querySelector(t)||null,Js=(t,e)=>Array.from([(Hs(e)?e:js).querySelectorAll(t)]),Qs=(t,e)=>e&&Hs(t)?t.getAttribute(e):null,ta=(t,e,n)=>{e&&Hs(t)&&t.setAttribute(e,n)},ea=(t,e)=>{e&&Hs(t)&&t.removeAttribute(e)},na=(t,e)=>Ps(t).toLowerCase()===Ps(e).toLowerCase(),ra=Fs?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||(t=>setTimeout(t,16)):t=>setTimeout(t,0),ia=(t,e,n)=>e.concat(["sm","md","lg","xl","xxl"]).reduce(((e,r)=>(e[t?`${t}${r.charAt(0).toUpperCase()+r.slice(1)}`:r]=n,e)),Object.create(null)),oa=(t,e,n,r=n)=>Object.keys(e).reduce(((e,i)=>(t[i]&&e.push([r,i.replace(n,""),t[i]].filter((t=>t&&"boolean"!=typeof t)).join("-").toLowerCase()),e)),[]),sa=(t="")=>`__BVID__${Math.random().toString().slice(2,8)}___BV_${t}__`,aa=(t,e)=>!0===t||"true"===t||""===t?"true":"grammar"===t||"spelling"===t?t:!1===e?"true":!1===t||"false"===t?"false":void 0,la=t=>!!t&&"object"==typeof t&&t.constructor===Object,ca=(t,e,n=!0)=>{const r=t instanceof Date&&"function"==typeof t.getMonth?new Date(t.getTime()):Object.assign({},t);return la(t)&&la(e)&&Object.keys(e).forEach((i=>{la(e[i])?i in t?r[i]=ca(t[i],e[i],n):Object.assign(r,{[i]:e[i]}):Array.isArray(e[i])&&Array.isArray(t[i])?Object.assign(r,{[i]:n?t[i].concat(e[i].filter((e=>!t[i].includes(e)))):e[i]}):Object.assign(r,{[i]:e[i]})})),r},ua=(t,e={},n={})=>{const r=[t];let i;for(let o=0;o<r.length&&!i;o++){const t=r[o];i=n[t]}return i&&"function"==typeof i?i(e):i},da=(t,e=NaN)=>Number.isInteger(t)?t:e,ha=(t,e=NaN)=>{const n=parseInt(t,10);return isNaN(n)?e:n},fa=(t,e=NaN)=>{const n=parseFloat(t.toString());return isNaN(n)?e:n},pa=(t,e)=>e+(t?Is(t):""),ma=(t,e)=>(Array.isArray(e)?e.slice():Object.keys(e)).reduce(((e,n)=>(e[n]=t[n],e)),{}),ga=t=>"boolean"==typeof t?t:""===t||"true"===t,va=t=>!(!t.href&&!t.to);function ya(t){return(0,i.Fl)((()=>void 0===t.value?void 0:ga(t.value)))}const ba=Symbol(),_a={items:(0,o.qj)([]),reset(){this.items=(0,o.qj)([])}},wa=t=>{t.provide(ba,_a)},xa=()=>{const t=(0,i.f3)(ba);return t||_a},Sa=(t,e,n)=>{(0,i.bv)((()=>{var r;null==(r=null==t?void 0:t.value)||r.addEventListener(e,n)})),(0,i.Jd)((()=>{var r;null==(r=null==t?void 0:t.value)||r.removeEventListener(e,n)}))},Ea=t=>(0,i.Fl)((()=>({"form-check":!t.plain&&!t.button,"form-check-inline":t.inline,"form-switch":t.switch,[`form-control-${t.size}`]:t.size&&"md"!==t.size}))),Ma=t=>(0,i.Fl)((()=>({"form-check-input":!t.plain&&!t.button,"is-valid":!0===t.state,"is-invalid":!1===t.state,"btn-check":t.button}))),Ta=t=>(0,i.Fl)((()=>({"form-check-label":!t.plain&&!t.button,btn:t.button,[`btn-${t.buttonVariant}`]:t.button,[`btn-${t.size}`]:t.button&&t.size&&"md"!==t.size}))),Ca=t=>(0,i.Fl)((()=>{var e;return{"aria-invalid":aa(t.ariaInvalid,t.state),"aria-required":"true"===(null==(e=t.required)?void 0:e.toString())?"true":null}})),Aa=t=>(0,i.Fl)((()=>({"was-validated":t.validated,"btn-group":t.buttons&&!t.stacked,"btn-group-vertical":t.stacked,[`btn-group-${t.size}`]:t.size}))),ka=(t,e,n)=>t.reduce(((t,e)=>"Symbol(Fragment)"===e.type.toString()?t.concat(e.children):t.concat([e])),[]).filter((t=>(t.type.__name||t.type.name)===e)).map((t=>{const e=(t.children.default?t.children.default():[]).find((t=>"Symbol(Text)"===t.type.toString()));return{props:{disabled:n,...t.props},text:e?e.children:""}})),Oa=(t,e)=>"string"==typeof t?{props:{value:t,disabled:e.disabled},text:t}:{props:{value:t[e.valueField],disabled:e.disabled||t[e.disabledField],...t.props},text:t[e.textField],html:t[e.htmlField]},Ra=(t,e,n,r,i)=>({...t,props:{"button-variant":n.buttonVariant,form:n.form,name:r.value,id:`${i.value}_option_${e}`,button:n.buttons,state:n.state,plain:n.plain,size:n.size,inline:!n.stacked,required:n.required,...t.props}}),Pa=(t,e)=>(0,i.Fl)((()=>(null==t?void 0:t.value)||sa(e))),La={ariaInvalid:{type:[Boolean,String],default:void 0},autocomplete:{type:String,required:!1},autofocus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},form:{type:String,required:!1},formatter:{type:Function,required:!1},id:{type:String,required:!1},lazy:{type:Boolean,default:!1},lazyFormatter:{type:Boolean,default:!1},list:{type:String,required:!1},modelValue:{type:[String,Number],default:""},name:{type:String,required:!1},number:{type:Boolean,default:!1},placeholder:{type:String,required:!1},plaintext:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},size:{type:String,required:!1},state:{type:Boolean,default:null},trim:{type:Boolean,default:!1}},Da=(t,e)=>{const n=(0,o.iH)();let r=null,s=!0;const a=Pa((0,o.Vh)(t,"id"),"input"),l=(e,n,r=!1)=>(e=String(e),"function"!=typeof t.formatter||t.lazyFormatter&&!r?e:(s=!1,t.formatter(e,n))),c=e=>t.trim?e.trim():t.number?parseFloat(e):e,u=()=>{(0,i.Y3)((()=>{var e;t.autofocus&&(null==(e=n.value)||e.focus())}))};(0,i.bv)(u),(0,i.bv)((()=>{n.value&&(n.value.value=t.modelValue)})),(0,i.dl)(u);const d=(0,i.Fl)((()=>{var e;return aa(t.ariaInvalid,null!=(e=t.state)?e:void 0)})),h=n=>{const{value:i}=n.target,o=l(i,n);if(!1===o||n.defaultPrevented)return void n.preventDefault();if(t.lazy)return;const s=c(o);t.modelValue!==s&&(r=i,e("update:modelValue",s)),e("input",o)},f=n=>{const{value:i}=n.target,o=l(i,n);if(!1===o||n.defaultPrevented)return void n.preventDefault();if(!t.lazy)return;r=i,e("update:modelValue",o);const s=c(o);t.modelValue!==s&&e("change",o)},p=n=>{if(e("blur",n),!t.lazy&&!t.lazyFormatter)return;const{value:i}=n.target,o=l(i,n,!0);r=i,e("update:modelValue",o)},m=()=>{var e;t.disabled||null==(e=n.value)||e.focus()},g=()=>{var e;t.disabled||null==(e=n.value)||e.blur()};return(0,i.YP)((()=>t.modelValue),(t=>{!n.value||(n.value.value=r&&s?r:t,r=null,s=!0)})),{input:n,computedId:a,computedAriaInvalid:d,onInput:h,onChange:f,onBlur:p,focus:m,blur:g}},Ia=(t,e)=>{if(!t)return t;if(e in t)return t[e];const n=e.split(".");return Ia(t[n[0]],n.splice(1).join("."))},Na=(t,e=null,n,r)=>{if("[object Object]"===Object.prototype.toString.call(t)){const i=Ia(t,r.valueField),o=Ia(t,r.textField),s=Ia(t,r.htmlField),a=Ia(t,r.disabledField),l=t[r.optionsField]||null;return null!==l?{label:String(Ia(t,r.labelField)||o),options:Ua(l,n,r)}:{value:typeof i>"u"?e||o:i,text:String(typeof o>"u"?e:o),html:s,disabled:Boolean(a)}}return{value:e||t,text:String(t),disabled:!1}},Ua=(t,e,n)=>Array.isArray(t)?t.map((t=>Na(t,null,e,n))):"[object Object]"===Object.prototype.toString.call(t)?(console.warn(`[BootstrapVue warn]: ${e} - Setting prop "options" to an object is deprecated. Use the array format instead.`),Object.keys(t).map((r=>{const i=t[r];switch(typeof i){case"object":return Na(i.text,String(i.value),e,n);default:return Na(i,String(r),e,n)}}))):[],Fa=["id"],Ba=Symbol(),Va=(0,i.aZ)({__name:"BAccordion",props:{flush:{default:!1},free:{default:!1},id:{default:void 0}},setup(t){const e=t,n=Pa((0,o.Vh)(e,"id"),"accordion"),r=ya((0,o.Vh)(e,"flush")),a=ya((0,o.Vh)(e,"free")),l=(0,i.Fl)((()=>({"accordion-flush":r.value})));return a.value||(0,i.JJ)(Ba,n.value.toString()),(t,e)=>((0,i.wg)(),(0,i.iD)("div",{id:(0,o.SU)(n),class:(0,s.C_)(["accordion",(0,o.SU)(l)])},[(0,i.WI)(t.$slots,"default")],10,Fa))}}),za=(0,i.aZ)({__name:"BCollapse",props:{accordion:null,id:{default:sa()},modelValue:{default:!1},tag:{default:"div"},toggle:{default:!1},visible:{default:!1},isNav:{default:!1}},emits:["update:modelValue","show","shown","hide","hidden"],setup(t,{emit:e}){const n=t,r=ya((0,o.Vh)(n,"modelValue")),a=ya((0,o.Vh)(n,"toggle")),l=ya((0,o.Vh)(n,"visible")),c=ya((0,o.Vh)(n,"isNav")),u=(0,o.iH)(),d=(0,o.iH)(),h=(0,i.Fl)((()=>({show:r.value,"navbar-collapse":c.value}))),f=()=>e("update:modelValue",!1);return Sa(u,"show.bs.collapse",(()=>{e("show"),e("update:modelValue",!0)})),Sa(u,"hide.bs.collapse",(()=>{e("hide"),e("update:modelValue",!1)})),Sa(u,"shown.bs.collapse",(()=>e("shown"))),Sa(u,"hidden.bs.collapse",(()=>e("hidden"))),(0,i.bv)((()=>{var t;d.value=new rn(u.value,{parent:n.accordion?`#${n.accordion}`:void 0,toggle:a.value}),(l.value||r.value)&&(e("update:modelValue",!0),null==(t=d.value)||t.show())})),(0,i.YP)((()=>r.value),(t=>{var e,n;t?null==(e=d.value)||e.show():null==(n=d.value)||n.hide()})),(0,i.YP)((()=>l.value),(t=>{var n,r;t?(e("update:modelValue",!!t),null==(n=d.value)||n.show()):(e("update:modelValue",!!t),null==(r=d.value)||r.hide())})),(e,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(t.tag),{id:t.id,ref_key:"element",ref:u,class:(0,s.C_)(["collapse",(0,o.SU)(h)]),"data-bs-parent":t.accordion||null,"is-nav":(0,o.SU)(c)},{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default",{visible:(0,o.SU)(r),close:f})])),_:3},8,["id","class","data-bs-parent","is-nav"]))}}),ja={mounted(t,e){let n=e.value;Object.keys(e.modifiers).length>0&&([n]=Object.keys(e.modifiers)),t.setAttribute("data-bs-toggle","modal"),t.setAttribute("data-bs-target",`#${n}`)}},Ha={mounted(t,e){let n="right";const r=[];e.modifiers.left?n="left":e.modifiers.right?n="right":e.modifiers.bottom?n="bottom":e.modifiers.top&&(n="top"),e.modifiers.manual?r.push("manual"):(e.modifiers.click&&r.push("click"),e.modifiers.hover&&r.push("hover"),e.modifiers.focus&&r.push("focus")),t.setAttribute("data-bs-toggle","popover"),new Ki(t,{trigger:0===r.length?"click":r.join(" "),placement:n,content:e.value})},unmounted(t){const e=Ki.getInstance(t);null==e||e.dispose()}},Wa=t=>{if(t.classList.contains("offcanvas"))return"offcanvas";if(t.classList.contains("collapse"))return"collapse";throw Error("Couldn't resolve toggle type")},Ga=(t,e)=>{const{modifiers:n,arg:r,value:i}=t,o=Object.keys(n||{}),s="string"==typeof i?i.split(ks):i;if(na(e.tagName,"a")){const t=Qs(e,"href")||"";Rs.test(t)&&o.push(t.replace(Os,""))}return Array.prototype.concat.apply([],[r,s]).forEach((t=>"string"==typeof t&&o.push(t))),o.filter(((t,e,n)=>t&&n.indexOf(t)===e))},$a={mounted(t,e){const n=Ga(e,t),r=[];let i="data-bs-target";"a"===t.tagName&&(i="href");for(let o=0;o<n.length;o++){const e=n[o],i=document.getElementById(e);i&&(t.setAttribute("data-bs-toggle",Wa(i)),r.push(`#${e}`))}r.length>0&&t.setAttribute(i,r.join(","))}},qa=(t,e)=>{if(null!=e&&e.trigger)return e.trigger;if(t.manual)return"manual";const n=[];return t.click&&n.push("click"),t.hover&&n.push("hover"),t.focus&&n.push("focus"),n.length>0?n.join(" "):"hover focus"},Ya=(t,e)=>null!=e&&e.placement?e.placement:t.left?"left":t.right?"right":t.bottom?"bottom":"top",Xa=t=>null!=t&&t.delay?t.delay:0,Za=t=>"object"==typeof t?null==t?void 0:t.title:t,Ka={beforeMount(t,e){t.setAttribute("data-bs-toggle","tooltip"),t.getAttribute("title")||t.setAttribute("title",Za(e.value).toString());const n=/<("[^"]*"|'[^']*'|[^'">])*>/.test(t.title),r=qa(e.modifiers,e.value),i=Ya(e.modifiers,e.value),o=Xa(e.value),s=t.getAttribute("title");new Gi(t,{trigger:r,placement:i,delay:o,html:n}),s&&t.setAttribute("data-bs-original-title",s)},updated(t,e){t.getAttribute("title")||t.setAttribute("title",Za(e.value).toString());const n=t.getAttribute("title"),r=t.getAttribute("data-bs-original-title"),i=Gi.getInstance(t);t.removeAttribute("title"),n&&n!==r&&(null==i||i.setContent({".tooltip-inner":n}),t.setAttribute("data-bs-original-title",n))},unmounted(t){const e=Gi.getInstance(t);null==e||e.dispose()}},Ja=new Map,Qa=t=>{if(Ja.has(t)){const e=Ja.get(t);e&&e.stop&&e.stop(),Ja.delete(t)}},tl=(t,e)=>{const n={margin:"0px",once:!1,callback:e.value};Object.keys(e.modifiers).forEach((t=>{Number.isInteger(t)?n.margin=`${t}px`:"once"===t.toLowerCase()&&(n.once=!0)})),Qa(t);const r=new nl(t,n.margin,n.once,n.callback,e.instance);Ja.set(t,r)},el={beforeMount(t,e){tl(t,e)},updated(t,e){tl(t,e)},unmounted(t){Qa(t)}};class nl{constructor(t,e,n,r,i){ms(this,"element"),ms(this,"margin"),ms(this,"once"),ms(this,"callback"),ms(this,"instance"),ms(this,"observer"),ms(this,"doneOnce"),ms(this,"visible"),this.element=t,this.margin=e,this.once=n,this.callback=r,this.instance=i,this.createObserver()}createObserver(){if(this.observer&&this.stop(),!this.doneOnce&&"function"==typeof this.callback){try{this.observer=new IntersectionObserver(this.handler.bind(this),{root:null,rootMargin:this.margin,threshold:0})}catch{return console.error("Intersection Observer not supported"),this.doneOnce=!0,this.observer=void 0,void this.callback(null)}this.instance.$nextTick((()=>{this.observer&&this.observer.observe(this.element)}))}}handler(t){const[e]=t,n=Boolean(e.isIntersecting||e.intersectionRatio>0);n!==this.visible&&(this.visible=n,this.callback(n),this.once&&this.visible&&(this.doneOnce=!0,this.stop()))}stop(){this.observer&&this.observer.disconnect(),this.observer=null}}const rl={mounted(t,e){!1!==e.value&&t.focus()}},il={BModal:ja,BPopover:Ha,BToggle:$a,BTooltip:Ka,BVisible:el,focus:rl},ol={class:"accordion-item"},sl=["id"],al=["aria-expanded","aria-controls"],ll={class:"accordion-body"},cl=(0,i.aZ)({__name:"BAccordionItem",props:{id:null,title:null,visible:{default:!1}},setup(t){const e=t,n=ya((0,o.Vh)(e,"visible")),r=Pa((0,o.Vh)(e,"id"),"accordion_item"),a=(0,i.f3)(Ba,"");return(e,l)=>((0,i.wg)(),(0,i.iD)("div",ol,[(0,i._)("h2",{id:`${(0,o.SU)(r)}heading`,class:"accordion-header"},[(0,i.wy)(((0,i.wg)(),(0,i.iD)("button",{class:(0,s.C_)(["accordion-button",{collapsed:!(0,o.SU)(n)}]),type:"button","aria-expanded":(0,o.SU)(n)?"true":"false","aria-controls":(0,o.SU)(r)},[(0,i.WI)(e.$slots,"title",{},(()=>[(0,i.Uk)((0,s.zw)(t.title),1)]))],10,al)),[[(0,o.SU)($a),void 0,(0,o.SU)(r)]])],8,sl),(0,i.Wm)(za,{id:(0,o.SU)(r),class:"accordion-collapse",visible:(0,o.SU)(n),accordion:(0,o.SU)(a),"aria-labelledby":`heading${(0,o.SU)(r)}`},{default:(0,i.w5)((()=>[(0,i._)("div",ll,[(0,i.WI)(e.$slots,"default")])])),_:3},8,["id","visible","accordion","aria-labelledby"])]))}}),ul=["type","disabled","aria-label"],dl=(0,i.aZ)({__name:"BCloseButton",props:{disabled:{default:!1},white:{default:!1},ariaLabel:{default:"Close"},type:{default:"button"}},setup(t){const e=t,n=ya((0,o.Vh)(e,"disabled")),r=ya((0,o.Vh)(e,"white")),a=(0,i.Fl)((()=>({"btn-close-white":r.value})));return(e,r)=>((0,i.wg)(),(0,i.iD)("button",{type:t.type,class:(0,s.C_)(["btn-close",(0,o.SU)(a)]),disabled:(0,o.SU)(n),"aria-label":t.ariaLabel},null,10,ul))}}),hl=(0,i.aZ)({__name:"BAlert",props:{dismissLabel:{default:"Close"},dismissible:{default:!1},fade:{default:!1},modelValue:{type:[Boolean,Number],default:!1},show:{default:!1},variant:{default:"info"}},emits:["dismissed","dismiss-count-down","update:modelValue"],setup(t,{emit:e}){const n=t,r=ya((0,o.Vh)(n,"dismissible"));ya((0,o.Vh)(n,"fade"));const a=ya((0,o.Vh)(n,"show")),l=(0,o.iH)(),c=(0,o.iH)(),u=(0,i.Fl)((()=>({[`alert-${n.variant}`]:!!n.variant,show:!!n.modelValue,"alert-dismissible":r.value,fade:!!n.modelValue})));let d;const h=t=>{if("boolean"==typeof t)return 0;const e=da(t,0);return e>0?e:0},f=()=>{void 0!==d&&(clearTimeout(d),d=void 0)},p=(0,o.iH)(h(n.modelValue)),m=(0,i.Fl)((()=>!!n.modelValue||a.value));(0,i.Jd)((()=>{var t;f(),null==(t=c.value)||t.dispose(),c.value=void 0}));const g=(0,i.Fl)((()=>!0===n.modelValue||!(!1===n.modelValue||da(n.modelValue,0)<1)&&!!n.modelValue)),v=()=>{p.value=h(n.modelValue),(g.value||a.value)&&!c.value&&(c.value=new kt(l.value))},y=()=>{"boolean"==typeof n.modelValue?e("update:modelValue",!1):e("update:modelValue",0),e("dismissed")};return(0,i.YP)((()=>n.modelValue),v),(0,i.YP)((()=>a.value),v),(0,i.YP)(p,(t=>{f(),"boolean"!=typeof n.modelValue&&(e("dismiss-count-down",t),0===t&&n.modelValue>0&&e("dismissed"),n.modelValue!==t&&e("update:modelValue",t),t>0&&(d=setTimeout((()=>{p.value--}),1e3)))})),(e,n)=>(0,o.SU)(m)?((0,i.wg)(),(0,i.iD)("div",{key:0,ref_key:"element",ref:l,class:(0,s.C_)(["alert",(0,o.SU)(u)]),role:"alert"},[(0,i.WI)(e.$slots,"default"),(0,o.SU)(r)?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[e.$slots.dismissible?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button","data-bs-dismiss":"alert",onClick:y},[(0,i.WI)(e.$slots,"dismissible")])):((0,i.wg)(),(0,i.j4)(dl,{key:1,"aria-label":t.dismissLabel,"data-bs-dismiss":"alert",onClick:y},null,8,["aria-label"]))],64)):(0,i.kq)("",!0)],2)):(0,i.kq)("",!0)}}),fl=Symbol(),pl=(0,i.aZ)({__name:"BAvatarGroup",props:{overlap:{default:.3},rounded:{type:[Boolean,String],default:!1},size:null,square:{default:!1},tag:{default:"div"},variant:null},setup(t){const e=t,n=ya((0,o.Vh)(e,"square")),r=(0,i.Fl)((()=>yl(e.size))),a=t=>"string"==typeof t&&Ss(t)?fa(t,0):t||0,l=(0,i.Fl)((()=>Math.min(Math.max(a(e.overlap),0),1)/2)),c=(0,i.Fl)((()=>{const t=r.value?`calc(${r.value} * ${l.value})`:null;return t?{paddingLeft:t,paddingRight:t}:{}}));return(0,i.JJ)(fl,{overlapScale:l,size:e.size,square:n.value,rounded:e.rounded,variant:e.variant}),(e,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(t.tag),{class:"b-avatar-group",role:"group"},{default:(0,i.w5)((()=>[(0,i._)("div",{class:"b-avatar-group-inner",style:(0,s.j5)((0,o.SU)(c))},[(0,i.WI)(e.$slots,"default")],4)])),_:3}))}}),ml={key:0,class:"b-avatar-custom"},gl={key:1,class:"b-avatar-img"},vl=["src","alt"],yl=t=>{const e="string"==typeof t&&Ss(t)?fa(t,0):t;return"number"==typeof e?`${e}px`:e||null},bl=(0,i.aZ)({__name:"BAvatar",props:{alt:{default:"avatar"},ariaLabel:null,badge:{type:[Boolean,String],default:!1},badgeLeft:{default:!1},badgeOffset:null,badgeTop:{default:!1},badgeVariant:{default:"primary"},button:{default:!1},buttonType:{default:"button"},disabled:{default:!1},icon:null,rounded:{type:[Boolean,String],default:"circle"},size:null,square:{default:!1},src:null,text:null,textVariant:{default:void 0},variant:{default:"secondary"}},emits:["click","img-error"],setup(t,{emit:e}){const n=t,r=ya((0,o.Vh)(n,"badgeLeft")),a=ya((0,o.Vh)(n,"badgeTop")),l=ya((0,o.Vh)(n,"button")),c=ya((0,o.Vh)(n,"disabled")),u=ya((0,o.Vh)(n,"square")),d=(0,i.Rr)(),h=["sm",null,"lg"],f=.4,p=.7*f,m=(0,i.f3)(fl,null),g=t=>{const e=t;return"light"===e||"warning"===e?"dark":"light"},v=(0,i.Fl)((()=>!Zs(d.default))),y=(0,i.Fl)((()=>!Zs(d.badge))),b=(0,i.Fl)((()=>n.badge||""===n.badge||y.value)),_=(0,i.Fl)((()=>null!=m&&m.size?m.size:yl(n.size))),w=(0,i.Fl)((()=>null!=m&&m.variant?m.variant:n.variant)),x=(0,i.Fl)((()=>null!=m&&m.rounded?m.rounded:n.rounded)),S=(0,i.Fl)((()=>({"aria-label":n.ariaLabel||null,disabled:c.value||null}))),E=(0,i.Fl)((()=>({[`bg-${n.badgeVariant}`]:!!n.badgeVariant}))),M=(0,i.Fl)((()=>!0===n.badge?"":n.badge)),T=(0,i.Fl)((()=>`text-${g(n.badgeVariant)}`)),C=(0,i.Fl)((()=>({[`b-avatar-${n.size}`]:!!n.size&&-1!==h.indexOf(yl(n.size)),[`bg-${w.value}`]:!!w.value,badge:!l.value&&w.value&&v.value,rounded:""===x.value||!0===x.value,["rounded-circle"]:!u.value&&"circle"===x.value,["rounded-0"]:u.value||"0"===x.value,["rounded-1"]:!u.value&&"sm"===x.value,["rounded-3"]:!u.value&&"lg"===x.value,["rounded-top"]:!u.value&&"top"===x.value,["rounded-bottom"]:!u.value&&"bottom"===x.value,["rounded-start"]:!u.value&&"left"===x.value,["rounded-end"]:!u.value&&"right"===x.value,btn:l.value,[`btn-${w.value}`]:!!l.value&&!!w.value}))),A=(0,i.Fl)((()=>`text-${n.textVariant||g(w.value)}`)),k=(0,i.Fl)((()=>{const t=n.badgeOffset||"0px";return{fontSize:(-1===h.indexOf(_.value||null)?`calc(${_.value} * ${p})`:"")||"",top:a.value?t:"",bottom:a.value?"":t,left:r.value?t:"",right:r.value?"":t}})),O=(0,i.Fl)((()=>{const t=-1===h.indexOf(_.value||null)?`calc(${_.value} * ${f})`:null;return t?{fontSize:t}:{}})),R=(0,i.Fl)((()=>{var t;const e=(null==(t=null==m?void 0:m.overlapScale)?void 0:t.value)||0,n=_.value&&e?`calc(${_.value} * -${e})`:null;return n?{marginLeft:n,marginRight:n}:{}})),P=(0,i.Fl)((()=>l.value?n.buttonType:"span")),L=(0,i.Fl)((()=>({...R.value,width:_.value,height:_.value}))),D=t=>{!c.value&&l.value&&e("click",t)},I=t=>e("img-error",t);return(e,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)((0,o.SU)(P)),(0,i.dG)({class:["b-avatar",(0,o.SU)(C)],style:(0,o.SU)(L)},(0,o.SU)(S),{onClick:D}),{default:(0,i.w5)((()=>[(0,o.SU)(v)?((0,i.wg)(),(0,i.iD)("span",ml,[(0,i.WI)(e.$slots,"default")])):t.src?((0,i.wg)(),(0,i.iD)("span",gl,[(0,i._)("img",{src:t.src,alt:t.alt,onError:I},null,40,vl)])):t.text?((0,i.wg)(),(0,i.iD)("span",{key:2,class:(0,s.C_)(["b-avatar-text",(0,o.SU)(A)]),style:(0,s.j5)((0,o.SU)(O))},(0,s.zw)(t.text),7)):(0,i.kq)("",!0),(0,o.SU)(b)?((0,i.wg)(),(0,i.iD)("span",{key:3,class:(0,s.C_)(["b-avatar-badge",(0,o.SU)(E)]),style:(0,s.j5)((0,o.SU)(k))},[(0,o.SU)(y)?(0,i.WI)(e.$slots,"badge",{key:0}):((0,i.wg)(),(0,i.iD)("span",{key:1,class:(0,s.C_)((0,o.SU)(T))},(0,s.zw)((0,o.SU)(M)),3))],6)):(0,i.kq)("",!0)])),_:3},16,["class","style"]))}}),_l={active:{type:[Boolean,String],default:!1},activeClass:{type:String,default:"router-link-active"},append:{type:[Boolean,String],default:!1},disabled:{type:[Boolean,String],default:!1},event:{type:[String,Array],default:"click"},exact:{type:[Boolean,String],default:!1},exactActiveClass:{type:String,default:"router-link-exact-active"},href:{type:String},rel:{type:String,default:null},replace:{type:[Boolean,String],default:!1},routerComponentName:{type:String,default:"router-link"},routerTag:{type:String,default:"a"},target:{type:String,default:"_self"},to:{type:[String,Object],default:null}},wl=(0,i.aZ)({props:_l,emits:["click"],setup(t,{emit:e,attrs:n}){const r=ya((0,o.Vh)(t,"active")),s=ya((0,o.Vh)(t,"append")),a=ya((0,o.Vh)(t,"disabled")),l=ya((0,o.Vh)(t,"exact")),c=ya((0,o.Vh)(t,"replace")),u=(0,i.FN)(),d=(0,o.iH)(null),h=(0,i.Fl)((()=>{const e=t.routerComponentName.split("-").map((t=>t.charAt(0).toUpperCase()+t.slice(1))).join("");return void 0===(null==u?void 0:u.appContext.app.component(e))||a.value||!t.to?"a":t.routerComponentName})),f=(0,i.Fl)((()=>{const e="#";if(t.href)return t.href;if("string"==typeof t.to)return t.to||e;const n=t.to;if("[object Object]"===Object.prototype.toString.call(n)&&(n.path||n.query||n.hash)){const t=n.path||"",r=n.query?`?${Object.keys(n.query).map((t=>`${t}=${n.query[t]}`)).join("=")}`:"",i=n.hash&&"#"!==n.hash.charAt(0)?`#${n.hash}`:n.hash||"";return`${t}${r}${i}`||e}return e})),p=(0,i.Fl)((()=>({to:t.to,href:f.value,target:t.target,rel:"_blank"===t.target&&null===t.rel?"noopener":t.rel||null,tabindex:a.value?"-1":typeof n.tabindex>"u"?null:n.tabindex,"aria-disabled":a.value?"true":null})));return{tag:h,routerAttr:p,link:d,clicked:t=>{if(a.value)return t.preventDefault(),void t.stopImmediatePropagation();e("click",t)},activeBoolean:r,appendBoolean:s,disabledBoolean:a,replaceBoolean:c,exactBoolean:l}}}),xl=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n};function Sl(t,e,n,r,o,s){return"router-link"===t.tag?((0,i.wg)(),(0,i.j4)((0,i.LL)(t.tag),(0,i.dG)({key:0},t.routerAttr,{custom:""}),{default:(0,i.w5)((({href:e,navigate:n,isActive:r,isExactActive:o})=>[((0,i.wg)(),(0,i.j4)((0,i.LL)(t.routerTag),(0,i.dG)({ref:"link",href:e,class:[r&&t.activeClass,o&&t.exactActiveClass]},t.$attrs,{onClick:n}),{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default")])),_:2},1040,["href","class","onClick"]))])),_:3},16)):((0,i.wg)(),(0,i.j4)((0,i.LL)(t.tag),(0,i.dG)({key:1,ref:"link",class:{active:t.activeBoolean,disabled:t.disabledBoolean}},t.routerAttr,{onClick:t.clicked}),{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default")])),_:3},16,["class","onClick"]))}const El=xl(wl,[["render",Sl]]),Ml=vs(_l,["event","routerTag"]),Tl=(0,i.aZ)({components:{BLink:El},props:{pill:{type:[Boolean,String],default:!1},tag:{type:String,default:"span"},variant:{type:String,default:"secondary"},textIndicator:{type:[Boolean,String],default:!1},dotIndicator:{type:[Boolean,String],default:!1},...Ml},setup(t){const e=(0,i.Fl)((()=>va(t))),n=(0,i.Fl)((()=>e.value?El:t.tag)),r=ya((0,o.Vh)(t,"pill")),s=ya((0,o.Vh)(t,"textIndicator")),a=ya((0,o.Vh)(t,"dotIndicator"));return{classes:(0,i.Fl)((()=>({[`bg-${t.variant}`]:t.variant,active:t.active,disabled:t.disabled,"text-dark":["warning","info","light"].includes(t.variant),"rounded-pill":r.value,"position-absolute top-0 start-100 translate-middle":s.value||a.value,"p-2 border border-light rounded-circle":a.value,"text-decoration-none":e.value}))),props:e.value?ma(t,Ml):{},computedTag:n}}});function Cl(t,e,n,r,o,s){return(0,i.wg)(),(0,i.j4)((0,i.LL)(t.computedTag),(0,i.dG)({class:["badge",t.classes]},t.props),{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default")])),_:3},16,["class"])}const Al=xl(Tl,[["render",Cl]]),kl=vs(_l,["event","routerTag"]),Ol=(0,i.aZ)({components:{BLink:El},props:{...kl,active:{type:[Boolean,String],default:!1},ariaCurrent:{type:String,default:"location"},disabled:{type:[Boolean,String],default:!1},text:{type:String,required:!1}},emits:["click"],setup(t,{emit:e}){const n=ya((0,o.Vh)(t,"active")),r=ya((0,o.Vh)(t,"disabled")),s=(0,i.Fl)((()=>({active:n.value}))),a=(0,i.Fl)((()=>n.value?"span":El)),l=(0,i.Fl)((()=>n.value?t.ariaCurrent:void 0));return{liClasses:s,computedTag:a,computedAriaCurrent:l,clicked:t=>{if(r.value||n.value)return t.preventDefault(),void t.stopImmediatePropagation();r.value||e("click",t)}}}});function Rl(t,e,n,r,o,a){return(0,i.wg)(),(0,i.iD)("li",{class:(0,s.C_)(["breadcrumb-item",t.liClasses])},[((0,i.wg)(),(0,i.j4)((0,i.LL)(t.computedTag),(0,i.dG)({"aria-current":t.computedAriaCurrent},t.$props,{onClick:t.clicked}),{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default")])),_:3},16,["aria-current","onClick"]))],2)}const Pl=xl(Ol,[["render",Rl]]),Ll={"aria-label":"breadcrumb"},Dl={class:"breadcrumb"},Il=(0,i.aZ)({__name:"BBreadcrumb",props:{items:null},setup(t){const e=t,n=xa(),r=(0,i.Fl)((()=>{const t=e.items||(null==n?void 0:n.items)||[];let r=!1;return t.map(((e,n)=>("string"==typeof e&&(e={text:e},n<t.length-1&&(e.href="#")),e.active&&(r=!0),!e.active&&!r&&(e.active=n+1===t.length),e)))}));return(t,e)=>((0,i.wg)(),(0,i.iD)("nav",Ll,[(0,i._)("ol",Dl,[(0,i.WI)(t.$slots,"prepend"),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,o.SU)(r),((t,e)=>((0,i.wg)(),(0,i.j4)(Pl,(0,i.dG)({key:e},t),{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(t.text),1)])),_:2},1040)))),128)),(0,i.WI)(t.$slots,"default"),(0,i.WI)(t.$slots,"append")])]))}}),Nl={key:0,class:"visually-hidden"},Ul=(0,i.aZ)({__name:"BSpinner",props:{label:null,role:{default:"status"},small:{default:!1},tag:{default:"span"},type:{default:"border"},variant:null},setup(t){const e=t,n=ya((0,o.Vh)(e,"small")),r=(0,i.Fl)((()=>({"spinner-border":"border"===e.type,"spinner-border-sm":"border"===e.type&&n.value,"spinner-grow":"grow"===e.type,"spinner-grow-sm":"grow"===e.type&&n.value,[`text-${e.variant}`]:void 0!==e.variant})));return(e,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(t.tag),{class:(0,s.C_)((0,o.SU)(r)),role:t.label||e.$slots.label?t.role:null,"aria-hidden":!t.label&&!e.$slots.label||null},{default:(0,i.w5)((()=>[t.label||e.$slots.label?((0,i.wg)(),(0,i.iD)("span",Nl,[(0,i.WI)(e.$slots,"label",{},(()=>[(0,i.Uk)((0,s.zw)(t.label),1)]))])):(0,i.kq)("",!0)])),_:3},8,["class","role","aria-hidden"]))}}),Fl=(0,i.aZ)({components:{BLink:El,BSpinner:Ul},props:{..._l,active:{type:[Boolean,String],default:!1},disabled:{type:[Boolean,String],default:!1},href:{type:String,required:!1},pill:{type:[Boolean,String],default:!1},pressed:{type:[Boolean,String],default:!1},rel:{type:String,default:void 0},size:{type:String,default:"md"},squared:{type:[Boolean,String],default:!1},tag:{type:String,default:"button"},target:{type:String,default:"_self"},type:{type:String,default:"button"},variant:{type:String,default:"secondary"},loading:{type:[Boolean,String],default:!1},loadingMode:{type:String,default:"inline"}},emits:["click","update:pressed"],setup(t,{emit:e}){const n=ya((0,o.Vh)(t,"active")),r=ya((0,o.Vh)(t,"disabled")),s=ya((0,o.Vh)(t,"pill")),a=ya((0,o.Vh)(t,"pressed")),l=ya((0,o.Vh)(t,"squared")),c=ya((0,o.Vh)(t,"loading")),u=(0,i.Fl)((()=>!0===a.value)),d=(0,i.Fl)((()=>"button"===t.tag&&void 0===t.href&&null===t.to)),h=(0,i.Fl)((()=>va(t))),f=(0,i.Fl)((()=>null!==t.to)),p=(0,i.Fl)((()=>void 0===t.href&&!d.value)),m=(0,i.Fl)((()=>({[`btn-${t.variant}`]:!!t.variant,[`btn-${t.size}`]:!!t.size,active:n.value||a.value,"rounded-pill":s.value,"rounded-0":l.value,disabled:r.value}))),g=(0,i.Fl)((()=>({"aria-disabled":p.value?r.value:null,"aria-pressed":u.value?a.value:null,autocomplete:u.value?"off":null,disabled:d.value?r.value:null,href:t.href,rel:h.value?t.rel:null,role:p.value||h.value?"button":null,target:h.value?t.target:null,type:d.value?t.type:null,to:d.value?null:t.to,append:h.value?t.append:null,activeClass:f.value?t.activeClass:null,event:f.value?t.event:null,exact:f.value?t.exact:null,exactActiveClass:f.value?t.exactActiveClass:null,replace:f.value?t.replace:null,routerComponentName:f.value?t.routerComponentName:null,routerTag:f.value?t.routerTag:null}))),v=(0,i.Fl)((()=>f.value?El:t.href?"a":t.tag));return{classes:m,attrs:g,computedTag:v,clicked:t=>{if(r.value)return t.preventDefault(),void t.stopPropagation();e("click",t),u.value&&e("update:pressed",!a.value)},loadingBoolean:c}}});function Bl(t,e,n,r,o,a){const l=(0,i.up)("b-spinner");return(0,i.wg)(),(0,i.j4)((0,i.LL)(t.computedTag),(0,i.dG)({class:["btn",t.classes]},t.attrs,{onClick:t.clicked}),{default:(0,i.w5)((()=>[t.loadingBoolean?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,s.C_)(["btn-loading",{"mode-fill":"fill"===t.loadingMode,"mode-inline":"inline"===t.loadingMode}])},[(0,i.WI)(t.$slots,"loading",{},(()=>[(0,i.Wm)(l,{class:"btn-spinner",small:"lg"!==t.size},null,8,["small"])]))],2)):(0,i.kq)("",!0),(0,i._)("div",{class:(0,s.C_)(["btn-content",{"btn-loading-fill":t.loadingBoolean&&"fill"===t.loadingMode}])},[(0,i.WI)(t.$slots,"default")],2)])),_:3},16,["class","onClick"])}const Vl=xl(Fl,[["render",Bl]]),zl=(0,i.aZ)({__name:"BButtonGroup",props:{ariaLabel:{default:"Group"},size:null,tag:{default:"div"},vertical:{default:!1}},setup(t){const e=t,n=ya((0,o.Vh)(e,"vertical")),r=(0,i.Fl)((()=>({"btn-group":!n.value&&void 0===e.size,[`btn-group-${e.size}`]:void 0!==e.size,"btn-group-vertical":n.value})));return(e,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(t.tag),{class:(0,s.C_)((0,o.SU)(r)),role:"group","aria-label":t.ariaLabel},{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default")])),_:3},8,["class","aria-label"]))}}),jl=["aria-label"],Hl=(0,i.aZ)({__name:"BButtonToolbar",props:{ariaLabel:{default:"Group"},justify:{default:!1}},setup(t){const e=ya((0,o.Vh)(t,"justify")),n=(0,i.Fl)((()=>({"justify-content-between":e.value})));return(e,r)=>((0,i.wg)(),(0,i.iD)("div",{class:(0,s.C_)([(0,o.SU)(n),"btn-toolbar"]),role:"toolbar","aria-label":t.ariaLabel},[(0,i.WI)(e.$slots,"default")],10,jl))}}),Wl=(0,i.aZ)({__name:"BCardImg",props:{alt:{default:void 0},bottom:{default:!1},end:{default:!1},height:null,left:{default:!1},right:{default:!1},src:null,lazy:{default:!1},start:{default:!1},top:{default:!1},width:null},setup(t){const e=t,n=ya((0,o.Vh)(e,"bottom")),r=ya((0,o.Vh)(e,"end")),s=ya((0,o.Vh)(e,"left")),a=ya((0,o.Vh)(e,"right")),l=ya((0,o.Vh)(e,"start")),c=ya((0,o.Vh)(e,"top")),u=ya((0,o.Vh)(e,"lazy")),d=(0,i.Fl)((()=>({loading:u.value?"lazy":"eager",src:e.src,alt:e.alt,width:("number"==typeof e.width?e.width:parseInt(e.width,10))||void 0,height:("number"==typeof e.height?e.height:parseInt(e.height,10))||void 0}))),h=(0,i.Fl)((()=>s.value?"float-start":a.value?"float-end":"")),f=(0,i.Fl)((()=>c.value?"card-img-top":a.value||r.value?"card-img-right":n.value?"card-img-bottom":s.value||l.value?"card-img-left":"card-img")),p=(0,i.Fl)((()=>({[h.value]:!!h.value,[f.value]:!!f.value})));return(t,e)=>((0,i.wg)(),(0,i.iD)("img",(0,i.dG)({class:(0,o.SU)(p)},(0,o.SU)(d)),null,16))}}),Gl=["innerHTML"],$l=(0,i.aZ)({__name:"BCardHeadFoot",props:{text:null,bgVariant:null,borderVariant:null,html:null,tag:{default:"div"},textVariant:null},setup(t){const e=t,n=(0,i.Fl)((()=>({[`text-${e.textVariant}`]:void 0!==e.textVariant,[`bg-${e.bgVariant}`]:void 0!==e.bgVariant,[`border-${e.borderVariant}`]:void 0!==e.borderVariant})));return(e,r)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(t.tag),{class:(0,s.C_)((0,o.SU)(n))},{default:(0,i.w5)((()=>[t.html?((0,i.wg)(),(0,i.iD)("div",{key:0,innerHTML:t.html},null,8,Gl)):(0,i.WI)(e.$slots,"default",{key:1},(()=>[(0,i.Uk)((0,s.zw)(t.text),1)]))])),_:3},8,["class"]))}}),ql=(0,i.aZ)({__name:"BCardHeader",props:{text:null,bgVariant:null,borderVariant:null,html:null,tag:{default:"div"},textVariant:null},setup(t){return(t,e)=>((0,i.wg)(),(0,i.j4)($l,(0,i.dG)({class:"card-header"},t.$props),{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default")])),_:3},16))}}),Yl=(0,i.aZ)({__name:"BCardTitle",props:{text:null,tag:{default:"h4"}},setup(t){return(e,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(t.tag),{class:"card-title"},{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default",{},(()=>[(0,i.Uk)((0,s.zw)(t.text),1)]))])),_:3}))}}),Xl=(0,i.aZ)({__name:"BCardSubTitle",props:{text:null,tag:{default:"h6"},textVariant:{default:"muted"}},setup(t){const e=t,n=(0,i.Fl)((()=>({[`text-${e.textVariant}`]:!!e.textVariant})));return(e,r)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(t.tag),{class:(0,s.C_)(["card-subtitle mb-2",(0,o.SU)(n)])},{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default",{},(()=>[(0,i.Uk)((0,s.zw)(t.text),1)]))])),_:3},8,["class"]))}}),Zl=(0,i.aZ)({__name:"BCardBody",props:{bodyBgVariant:null,bodyTag:{default:"div"},bodyTextVariant:null,overlay:{default:!1},subTitle:null,subTitleTag:{default:"h4"},subTitleTextVariant:null,title:null,titleTag:{default:"h4"},text:null},setup(t){const e=t,n=ya((0,o.Vh)(e,"overlay")),r=(0,i.Fl)((()=>({"card-img-overlay":n.value,[`text-${e.bodyTextVariant}`]:void 0!==e.bodyTextVariant,[`bg-${e.bodyBgVariant}`]:void 0!==e.bodyBgVariant})));return(e,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(t.bodyTag),{class:(0,s.C_)(["card-body",(0,o.SU)(r)])},{default:(0,i.w5)((()=>[t.title||e.$slots.title?((0,i.wg)(),(0,i.j4)(Yl,{key:0,tag:t.titleTag},{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"title",{},(()=>[(0,i.Uk)((0,s.zw)(t.title),1)]))])),_:3},8,["tag"])):(0,i.kq)("",!0),t.subTitle||e.$slots.subTitle?((0,i.wg)(),(0,i.j4)(Xl,{key:1,tag:t.subTitleTag,"text-variant":t.subTitleTextVariant},{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"subTitle",{},(()=>[(0,i.Uk)((0,s.zw)(t.subTitle),1)]))])),_:3},8,["tag","text-variant"])):(0,i.kq)("",!0),(0,i.WI)(e.$slots,"default",{},(()=>[(0,i.Uk)((0,s.zw)(t.text),1)]))])),_:3},8,["class"]))}}),Kl=(0,i.aZ)({__name:"BCardFooter",props:{text:null,bgVariant:null,borderVariant:null,html:null,tag:{default:"div"},textVariant:null},setup(t){return(e,n)=>((0,i.wg)(),(0,i.j4)($l,(0,i.dG)({class:"card-footer"},e.$props),{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default",{},(()=>[(0,i.Uk)((0,s.zw)(t.text),1)]))])),_:3},16))}}),Jl=(0,i.aZ)({__name:"BCard",props:{align:null,bgVariant:null,bodyBgVariant:null,bodyClass:null,bodyTag:{default:"div"},bodyTextVariant:null,borderVariant:null,footer:null,footerBgVariant:null,footerBorderVariant:null,footerClass:null,footerHtml:{default:""},footerTag:{default:"div"},footerTextVariant:null,header:null,headerBgVariant:null,headerBorderVariant:null,headerClass:null,headerHtml:{default:""},headerTag:{default:"div"},headerTextVariant:null,imgAlt:null,imgBottom:{default:!1},imgEnd:{default:!1},imgHeight:null,imgLeft:{default:!1},imgRight:{default:!1},imgSrc:null,imgStart:{default:!1},imgTop:{default:!1},imgWidth:null,noBody:{default:!1},overlay:{default:!1},subTitle:null,subTitleTag:{default:"h6"},subTitleTextVariant:{default:"muted"},tag:{default:"div"},textVariant:null,title:null,titleTag:{default:"h4"},bodyText:{default:""}},setup(t){const e=t,n=ya((0,o.Vh)(e,"imgBottom")),r=ya((0,o.Vh)(e,"imgEnd")),a=ya((0,o.Vh)(e,"imgLeft")),l=ya((0,o.Vh)(e,"imgRight")),c=ya((0,o.Vh)(e,"imgStart")),u=ya((0,o.Vh)(e,"noBody")),d=(0,i.Fl)((()=>({[`text-${e.align}`]:void 0!==e.align,[`text-${e.textVariant}`]:void 0!==e.textVariant,[`bg-${e.bgVariant}`]:void 0!==e.bgVariant,[`border-${e.borderVariant}`]:void 0!==e.borderVariant,"flex-row":a.value||c.value,"flex-row-reverse":r.value||l.value}))),h=(0,i.Fl)((()=>({bgVariant:e.headerBgVariant,borderVariant:e.headerBorderVariant,html:e.headerHtml,tag:e.headerTag,textVariant:e.headerTextVariant}))),f=(0,i.Fl)((()=>({overlay:e.overlay,bodyBgVariant:e.bodyBgVariant,bodyTag:e.bodyTag,bodyTextVariant:e.bodyTextVariant,subTitle:e.subTitle,subTitleTag:e.subTitleTag,subTitleTextVariant:e.subTitleTextVariant,title:e.title,titleTag:e.titleTag}))),p=(0,i.Fl)((()=>({bgVariant:e.footerBgVariant,borderVariant:e.footerBorderVariant,html:e.footerHtml,tag:e.footerTag,textVariant:e.footerTextVariant}))),m=(0,i.Fl)((()=>({src:e.imgSrc,alt:e.imgAlt,height:e.imgHeight,width:e.imgWidth,bottom:e.imgBottom,end:e.imgEnd,left:e.imgLeft,right:e.imgRight,start:e.imgStart,top:e.imgTop})));return(e,r)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(t.tag),{class:(0,s.C_)(["card",(0,o.SU)(d)])},{default:(0,i.w5)((()=>[t.imgSrc&&!(0,o.SU)(n)?((0,i.wg)(),(0,i.j4)(Wl,(0,s.vs)((0,i.dG)({key:0},(0,o.SU)(m))),null,16)):(0,i.kq)("",!0),t.header||e.$slots.header||t.headerHtml?((0,i.wg)(),(0,i.j4)(ql,(0,i.dG)({key:1},(0,o.SU)(h),{class:t.headerClass}),{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"header",{},(()=>[(0,i.Uk)((0,s.zw)(t.header),1)]))])),_:3},16,["class"])):(0,i.kq)("",!0),(0,o.SU)(u)?(0,i.WI)(e.$slots,"default",{key:3},(()=>[(0,i.Uk)((0,s.zw)(t.bodyText),1)])):((0,i.wg)(),(0,i.j4)(Zl,(0,i.dG)({key:2},(0,o.SU)(f),{class:t.bodyClass}),{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default",{},(()=>[(0,i.Uk)((0,s.zw)(t.bodyText),1)]))])),_:3},16,["class"])),t.footer||e.$slots.footer||t.footerHtml?((0,i.wg)(),(0,i.j4)(Kl,(0,i.dG)({key:4},(0,o.SU)(p),{class:t.footerClass}),{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"footer",{},(()=>[(0,i.Uk)((0,s.zw)(t.footer),1)]))])),_:3},16,["class"])):(0,i.kq)("",!0),t.imgSrc&&(0,o.SU)(n)?((0,i.wg)(),(0,i.j4)(Wl,(0,s.vs)((0,i.dG)({key:5},(0,o.SU)(m))),null,16)):(0,i.kq)("",!0)])),_:3},8,["class"]))}}),Ql=(0,i.aZ)({__name:"BCardGroup",props:{columns:{default:!1},deck:{default:!1},tag:{default:"div"}},setup(t){const e=t,n=ya((0,o.Vh)(e,"columns")),r=ya((0,o.Vh)(e,"deck")),a=(0,i.Fl)((()=>r.value?"card-deck":n.value?"card-columns":"card-group")),l=(0,i.Fl)((()=>({[a.value]:!!a.value})));return(e,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(t.tag),{class:(0,s.C_)((0,o.SU)(l))},{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default")])),_:3},8,["class"]))}}),tc=(0,i.aZ)({__name:"BCardText",props:{text:null,tag:{default:"p"}},setup(t){return(e,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(t.tag),{class:"card-text"},{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default",{},(()=>[(0,i.Uk)((0,s.zw)(t.text),1)]))])),_:3}))}}),ec=["id"],nc={key:0,class:"carousel-indicators"},rc=["data-bs-target","data-bs-slide-to","aria-label"],ic={class:"carousel-inner"},oc=["data-bs-target"],sc=(0,i._)("span",{class:"carousel-control-prev-icon","aria-hidden":"true"},null,-1),ac={class:"visually-hidden"},lc=["data-bs-target"],cc=(0,i._)("span",{class:"carousel-control-next-icon","aria-hidden":"true"},null,-1),uc={class:"visually-hidden"},dc=Symbol(),hc=(0,i.aZ)({__name:"BCarousel",props:{id:null,imgHeight:null,imgWidth:null,background:null,modelValue:{default:0},controls:{default:!1},indicators:{default:!1},interval:{default:5e3},noTouch:{default:!1},noWrap:{default:!1},controlsPrevText:{default:"Previous"},controlsNextText:{default:"Next"},indicatorsButtonLabel:{default:"Slide"}},emits:["sliding-start","sliding-end"],setup(t,{emit:e}){const n=t,r=ya((0,o.Vh)(n,"controls")),a=ya((0,o.Vh)(n,"indicators")),l=ya((0,o.Vh)(n,"noTouch"));ya((0,o.Vh)(n,"noWrap"));const c=(0,i.Rr)(),u=(0,o.iH)(),d=(0,o.iH)(),h=Pa((0,o.Vh)(n,"id"),"accordion"),f=(0,o.iH)([]);return Sa(u,"slide.bs.carousel",(t=>e("sliding-start",t))),Sa(u,"slid.bs.carousel",(t=>e("sliding-end",t))),(0,i.bv)((()=>{d.value=new Ie(u.value,{wrap:!l.value,interval:n.interval,touch:!l.value}),c.default&&(f.value=c.default().filter((t=>{var e;return"BCarouselSlide"===(null==(e=t.type)?void 0:e.name)})))})),(0,i.JJ)(dc,{background:n.background,width:n.imgWidth,height:n.imgHeight}),(e,n)=>((0,i.wg)(),(0,i.iD)("div",{id:(0,o.SU)(h),ref_key:"element",ref:u,class:"carousel slide","data-bs-ride":"carousel"},[(0,o.SU)(a)?((0,i.wg)(),(0,i.iD)("div",nc,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(f.value,((e,n)=>((0,i.wg)(),(0,i.iD)("button",{key:n,type:"button","data-bs-target":`#${(0,o.SU)(h)}`,"data-bs-slide-to":n,class:(0,s.C_)(0===n?"active":""),"aria-current":"true","aria-label":`${t.indicatorsButtonLabel} ${n}`},null,10,rc)))),128))])):(0,i.kq)("",!0),(0,i._)("div",ic,[(0,i.WI)(e.$slots,"default")]),(0,o.SU)(r)?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i._)("button",{class:"carousel-control-prev",type:"button","data-bs-target":`#${(0,o.SU)(h)}`,"data-bs-slide":"prev"},[sc,(0,i._)("span",ac,(0,s.zw)(t.controlsPrevText),1)],8,oc),(0,i._)("button",{class:"carousel-control-next",type:"button","data-bs-target":`#${(0,o.SU)(h)}`,"data-bs-slide":"next"},[cc,(0,i._)("span",uc,(0,s.zw)(t.controlsNextText),1)],8,lc)],64)):(0,i.kq)("",!0)],8,ec))}}),fc=(0,i.aZ)({__name:"BImg",props:{alt:null,blank:{default:!1},blankColor:{default:"transparent"},block:{default:!1},center:{default:!1},fluid:{default:!1},lazy:{default:!1},fluidGrow:{default:!1},height:null,left:{default:!1},right:{default:!1},rounded:{type:[Boolean,String],default:!1},sizes:null,src:null,srcset:null,thumbnail:{default:!1},width:null},emits:["load"],setup(t,{emit:e}){const n=t,r=ya((0,o.Vh)(n,"lazy")),s=ya((0,o.Vh)(n,"blank")),a=ya((0,o.Vh)(n,"block")),l=ya((0,o.Vh)(n,"center")),c=ya((0,o.Vh)(n,"fluid")),u=ya((0,o.Vh)(n,"fluidGrow")),d=ya((0,o.Vh)(n,"left")),h=ya((0,o.Vh)(n,"right")),f=ya((0,o.Vh)(n,"thumbnail")),p='<svg width="%{w}" height="%{h}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 %{w} %{h}" preserveAspectRatio="none"><rect width="100%" height="100%" style="fill:%{f};"></rect></svg>',m=(t,e,n)=>`data:image/svg+xml;charset=UTF-8,${encodeURIComponent(p.replace("%{w}",String(t)).replace("%{h}",String(e)).replace("%{f}",n))}`,g=(0,i.Fl)((()=>"string"==typeof n.srcset?n.srcset.split(",").filter((t=>t)).join(","):Array.isArray(n.srcset)?n.srcset.filter((t=>t)).join(","):void 0)),v=(0,i.Fl)((()=>"string"==typeof n.sizes?n.sizes.split(",").filter((t=>t)).join(","):Array.isArray(n.sizes)?n.sizes.filter((t=>t)).join(","):void 0)),y=(0,i.Fl)((()=>{const t="number"==typeof n.width?n.width:parseInt(n.width,10)||void 0,e="number"==typeof n.height?n.height:parseInt(n.height,10)||void 0;if(s.value){if(t&&!e)return{height:t,width:t};if(!t&&e)return{height:e,width:e};if(!t&&!e)return{height:1,width:1}}return{width:t,height:e}})),b=(0,i.Fl)((()=>m(y.value.width,y.value.height,n.blankColor||"transparent"))),_=(0,i.Fl)((()=>({src:s.value?b.value:n.src,alt:n.alt,width:y.value.width||void 0,height:y.value.height||void 0,srcset:s.value?void 0:g.value,sizes:s.value?void 0:v.value,loading:r.value?"lazy":"eager"}))),w=(0,i.Fl)((()=>d.value?"float-start":h.value?"float-end":l.value?"mx-auto":void 0)),x=(0,i.Fl)((()=>({"img-thumbnail":f.value,"img-fluid":c.value||u.value,"w-100":u.value,rounded:""===n.rounded||!0===n.rounded,[`rounded-${n.rounded}`]:"string"==typeof n.rounded&&""!==n.rounded,[`${w.value}`]:void 0!==w.value,"d-block":a.value||l.value})));return(t,n)=>((0,i.wg)(),(0,i.iD)("img",(0,i.dG)({class:(0,o.SU)(x)},(0,o.SU)(_),{onLoad:n[0]||(n[0]=t=>e("load",t))}),null,16))}}),pc=["id","data-bs-interval"],mc=["innerHTML"],gc={key:1},vc=["innerHTML"],yc={key:1},bc=(0,i.aZ)({__name:"BCarouselSlide",props:{imgSrc:null,imgHeight:null,imgWidth:null,interval:null,active:{default:!1},background:null,caption:null,captionHtml:null,captionTag:{default:"h3"},contentTag:{default:"div"},contentVisibleUp:null,id:null,imgAlt:null,imgBlank:{default:!1},imgBlankColor:{default:"transparent"},text:null,textHtml:null,textTag:{default:"p"}},setup(t){const e=t,n=ya((0,o.Vh)(e,"active")),r=ya((0,o.Vh)(e,"imgBlank")),a=(0,i.f3)(dc,{}),l=Pa((0,o.Vh)(e,"id"),"accordion");(0,i.Fl)((()=>r.value?r.value:e.imgSrc));const c=(0,i.Fl)((()=>({background:`${e.background||a.background||"rgb(171, 171, 171)"} none repeat scroll 0% 0%`}))),u=(0,i.Fl)((()=>({"d-none":void 0!==e.contentVisibleUp,[`d-${e.contentVisibleUp}-block`]:void 0!==e.contentVisibleUp}))),d=(0,i.Fl)((()=>a.width)),h=(0,i.Fl)((()=>a.height));return(e,a)=>((0,i.wg)(),(0,i.iD)("div",{id:(0,o.SU)(l),class:(0,s.C_)(["carousel-item",{active:(0,o.SU)(n)}]),"data-bs-interval":t.interval,style:(0,s.j5)((0,o.SU)(c))},[(0,i.WI)(e.$slots,"img",{},(()=>[(0,i.Wm)(fc,{class:"d-block w-100",alt:t.imgAlt,src:t.imgSrc,width:t.imgWidth||(0,o.SU)(d),height:t.imgHeight||(0,o.SU)(h),blank:(0,o.SU)(r),"blank-color":t.imgBlankColor},null,8,["alt","src","width","height","blank","blank-color"])])),t.caption||t.captionHtml||t.text||t.textHtml||e.$slots.default?((0,i.wg)(),(0,i.j4)((0,i.LL)(t.contentTag),{key:0,class:(0,s.C_)(["carousel-caption",(0,o.SU)(u)])},{default:(0,i.w5)((()=>[t.caption||t.captionHtml?((0,i.wg)(),(0,i.j4)((0,i.LL)(t.captionTag),{key:0},{default:(0,i.w5)((()=>[t.captionHtml?((0,i.wg)(),(0,i.iD)("span",{key:0,innerHTML:t.captionHtml},null,8,mc)):((0,i.wg)(),(0,i.iD)("span",gc,(0,s.zw)(t.caption),1))])),_:1})):(0,i.kq)("",!0),t.text||t.textHtml?((0,i.wg)(),(0,i.j4)((0,i.LL)(t.textTag),{key:1},{default:(0,i.w5)((()=>[t.textHtml?((0,i.wg)(),(0,i.iD)("span",{key:0,innerHTML:t.textHtml},null,8,vc)):((0,i.wg)(),(0,i.iD)("span",yc,(0,s.zw)(t.text),1))])),_:1})):(0,i.kq)("",!0),(0,i.WI)(e.$slots,"default")])),_:3},8,["class"])):(0,i.kq)("",!0)],14,pc))}}),_c=ia("",[],{type:[Boolean,String,Number],default:!1}),wc=ia("offset",[""],{type:[String,Number],default:null}),xc=ia("order",[""],{type:[String,Number],default:null}),Sc=(0,i.aZ)({name:"BCol",props:{col:{type:[Boolean,String],default:!1},cols:{type:[String,Number],default:null},..._c,offset:{type:[String,Number],default:null},...wc,order:{type:[String,Number],default:null},...xc,alignSelf:{type:String,default:null},tag:{type:String,default:"div"}},setup(t){const e=ya((0,o.Vh)(t,"col")),n=[{content:_c,propPrefix:"cols",classPrefix:"col"},{content:wc,propPrefix:"offset"},{content:xc,propPrefix:"order"}],r=(0,i.Fl)((()=>n.flatMap((e=>oa(t,e.content,e.propPrefix,e.classPrefix)))));return{classes:(0,i.Fl)((()=>({col:e.value||!r.value.some((e=>/^col-/.test(e)&&!t.cols)),[`col-${t.cols}`]:!!t.cols,[`offset-${t.offset}`]:!!t.offset,[`order-${t.order}`]:!!t.order,[`align-self-${t.alignSelf}`]:!!t.alignSelf}))),classList:r}}});function Ec(t,e,n,r,o,a){return(0,i.wg)(),(0,i.j4)((0,i.LL)(t.tag),{class:(0,s.C_)([t.classes,t.classList])},{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default")])),_:3},8,["class"])}const Mc=xl(Sc,[["render",Ec]]),Tc={name:"",enterActiveClass:"",enterToClass:"",leaveActiveClass:"",leaveToClass:"showing",enterFromClass:"showing",leaveFromClass:""},Cc={...Tc,enterActiveClass:"fade showing",leaveActiveClass:"fade showing"},Ac=(0,i.aZ)({props:{appear:{type:[Boolean,String],default:!1},mode:{type:String,required:!1},noFade:{type:[Boolean,String],default:!1},transProps:{type:Object,required:!1}},setup(t,{slots:e}){const n=ya((0,o.Vh)(t,"appear")),r=ya((0,o.Vh)(t,"noFade")),s=(0,o.iH)(t.transProps);return Es(s.value)||(s.value=r.value?Tc:Cc,n.value&&(s.value={...s.value,appear:!0,appearClass:s.value.enterClass,appearActiveClass:s.value.enterActiveClass,appearToClass:s.value.enterToClass})),s.value={mode:t.mode,...s.value,css:!0},()=>(0,i.h)(a.uT,{...s.value},{default:()=>e.default?e.default():[]})}}),kc="toast-title",Oc=1e3,Rc=(0,i.aZ)({components:{BLink:El},props:{..._l,delay:{type:Number,default:5e3},bodyClass:{type:String},body:{type:[Object,String]},headerClass:{type:String},headerTag:{type:String,default:"div"},animation:{type:[Boolean,String],default:!0},id:{type:String},isStatus:{type:[Boolean,String],default:!1},autoHide:{type:[Boolean,String],default:!0},noCloseButton:{type:[Boolean,String],default:!1},noFade:{type:[Boolean,String],default:!1},noHoverPause:{type:[Boolean,String],default:!1},solid:{type:[Boolean,String],default:!1},static:{type:[Boolean,String],default:!1},title:{type:String},modelValue:{type:[Boolean,String],default:!1},toastClass:{type:Array},variant:{type:String}},emits:["destroyed","update:modelValue"],setup(t,{emit:e,slots:n}){ya((0,o.Vh)(t,"animation"));const r=ya((0,o.Vh)(t,"isStatus")),s=ya((0,o.Vh)(t,"autoHide")),a=ya((0,o.Vh)(t,"noCloseButton")),l=ya((0,o.Vh)(t,"noFade")),c=ya((0,o.Vh)(t,"noHoverPause"));ya((0,o.Vh)(t,"solid")),ya((0,o.Vh)(t,"static"));const u=ya((0,o.Vh)(t,"modelValue")),d=(0,o.iH)(!1),h=(0,o.iH)(!1),f=(0,o.iH)(!1),p=(0,i.Fl)((()=>({[`b-toast-${t.variant}`]:void 0!==t.variant,show:f.value||d.value})));let m,g,v;const y=()=>{typeof m>"u"||(clearTimeout(m),m=void 0)},b=(0,i.Fl)((()=>Math.max(da(t.delay,0),Oc))),_=()=>{u.value&&(g=v=0,y(),h.value=!0,ra((()=>{f.value=!1})))},w=()=>{y(),e("update:modelValue",!0),g=v=0,h.value=!1,(0,i.Y3)((()=>{ra((()=>{f.value=!0}))}))},x=()=>{if(!s.value||c.value||!m||v)return;const t=Date.now()-g;t>0&&(y(),v=Math.max(b.value-t,Oc))},S=()=>{(!s.value||c.value||!v)&&(v=g=0),E()};(0,i.YP)((()=>u.value),(t=>{t?w():_()}));const E=()=>{y(),s.value&&(m=setTimeout(_,v||b.value),g=Date.now(),v=0)},M=()=>{d.value=!0,e("update:modelValue",!0)},T=()=>{d.value=!1,E()},C=()=>{d.value=!0},A=()=>{d.value=!1,v=g=0,e("update:modelValue",!1)};(0,i.Ah)((()=>{y(),s.value&&e("destroyed",t.id)})),(0,i.bv)((()=>{(0,i.Y3)((()=>{u.value&&ra((()=>{w()}))}))}));const k=()=>{(0,i.Y3)((()=>{ra((()=>{_()}))}))};return()=>{const e=()=>{const e=[],r=ua(kc,{hide:_},n);r?e.push((0,i.h)(r)):t.title&&e.push((0,i.h)("strong",{class:"me-auto"},t.title)),!a.value&&0!==e.length&&e.push((0,i.h)(dl,{class:["btn-close"],onClick:()=>{_()}}));const o=[];if(e.length>0&&o.push((0,i.h)(t.headerTag,{class:"toast-header"},{default:()=>e})),ua("default",{hide:_},n)||t.body){const e=(0,i.h)(va(t)?"b-link":"div",{class:["toast-body",t.bodyClass],onClick:va(t)?{click:k}:{}},ua("default",{hide:_},n)||t.body);o.push(e)}return(0,i.h)("div",{class:["toast",t.toastClass,p.value],tabindex:"0"},o)};return(0,i.h)("div",{class:["b-toast"],id:t.id,role:h.value?null:r.value?"status":"alert","aria-live":h.value?null:r.value?"polite":"assertive","aria-atomic":h.value?null:"true",onmouseenter:x,onmouseleave:S},[(0,i.h)(Ac,{noFade:l.value,onAfterEnter:T,onBeforeEnter:M,onAfterLeave:A,onBeforeLeave:C},(()=>[f.value?e():""]))])}}}),Pc=(0,i.aZ)({__name:"BToaster",props:{position:{default:"top-right"},instance:null},setup(t){const e=t,n={"top-left":"top-0 start-0","top-center":"top-0 start-50 translate-middle-x","top-right":"top-0 end-0","middle-left":"top-50 start-0 translate-middle-y","middle-center":"top-50 start-50 translate-middle","middle-right":"top-50 end-0 translate-middle-y","bottom-left":"bottom-0 start-0","bottom-center":"bottom-0 start-50 translate-middle-x","bottom-right":"bottom-0 end-0"},r=(0,i.Fl)((()=>n[e.position])),a=t=>{var n;null==(n=e.instance)||n.remove(t)};return(e,n)=>{var l;return(0,i.wg)(),(0,i.iD)("div",{class:(0,s.C_)([[(0,o.SU)(r)],"b-toaster position-fixed p-3"]),style:{"z-index":"11"}},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(null==(l=t.instance)?void 0:l.toasts(t.position).value,(t=>((0,i.wg)(),(0,i.j4)(Rc,{id:t.options.id,key:t.options.id,modelValue:t.options.value,"onUpdate:modelValue":e=>t.options.value=e,delay:t.options.delay,title:t.content.title,body:t.content.body,component:t.content.body,variant:t.options.variant,onDestroyed:a},null,8,["id","modelValue","onUpdate:modelValue","delay","title","body","component","variant"])))),128))],2)}}}),Lc={delay:5e3,value:!0,pos:"top-right"};class Dc{constructor(t){ms(this,"vm"),ms(this,"containerPositions"),(0,o.PG)(t)?this.vm=t:this.vm=(0,o.qj)(t),this.containerPositions=(0,i.Fl)((()=>{const t=new Set([]);return this.vm.toasts.map((e=>{e.options.pos&&t.add(e.options.pos)})),t}))}toasts(t){return t?(0,i.Fl)((()=>this.vm.toasts.filter((e=>{if(e.options.pos===t&&e.options.value)return e})))):(0,i.Fl)((()=>this.vm.toasts))}remove(...t){this.vm.toasts=this.vm.toasts.filter((e=>{if(e.options.id&&!t.includes(e.options.id))return e}))}isRoot(){var t;return null!=(t=this.vm.root)&&t}show(t,e=Lc){const n={id:sa(),...Lc,...e},r={options:(0,o.qj)(n),content:t};return this.vm.toasts.push(r),r}info(t,e=Lc){return this.show(t,{variant:"info",...e})}danger(t,e=Lc){return this.show(t,{variant:"danger",...e})}warning(t,e=Lc){return this.show(t,{variant:"warning",...e})}success(t,e=Lc){return this.show(t,{variant:"success",...e})}hide(){}}class Ic{constructor(){ms(this,"vms"),ms(this,"rootInstance"),ms(this,"useToast",Vc),this.vms={}}getOrCreateViewModel(t){if(!t){if(this.rootInstance)return this.vms[this.rootInstance];const t={root:!0,toasts:[],container:void 0,id:Symbol("toast")};return this.rootInstance=t.id,this.vms[t.id]=t,t}if(t.root){if(this.rootInstance)return this.vms[this.rootInstance];this.rootInstance=t.id}return this.vms[t.id]=t,t}getVM(t){return!t&&this.rootInstance?this.vms[this.rootInstance]:t?this.vms[t]:void 0}}const Nc=Symbol(),Uc=Symbol(),Fc={container:void 0,toasts:[],root:!1};function Bc(){return(0,i.f3)(Uc)}function Vc(t,e=Nc){const n=(0,i.f3)(Bc());if(!t)return new Dc(n.getOrCreateViewModel());const r={id:Symbol("toastInstance")},o={...Fc,...r,...t},s=n.getOrCreateViewModel(o);return new Dc(s)}const zc={install:(t,e={})=>{var n,r,i,o;t.provide(Uc,null!=(r=null==(n=null==e?void 0:e.BToast)?void 0:n.injectkey)?r:Nc),t.provide(null!=(o=null==(i=null==e?void 0:e.BToast)?void 0:i.injectkey)?o:Nc,new Ic)}},jc=(0,i.aZ)({name:"BContainer",props:{gutterX:{type:String,default:null},gutterY:{type:String,default:null},fluid:{type:[Boolean,String],default:!1},toast:{type:Object},position:{type:String,required:!1},tag:{type:String,default:"div"}},setup(t,{slots:e,expose:n}){const r=(0,o.iH)();let s;const a=(0,i.Fl)((()=>({container:!t.fluid,["container-fluid"]:"boolean"==typeof t.fluid&&t.fluid,[`container-${t.fluid}`]:"string"==typeof t.fluid,[`gx-${t.gutterX}`]:null!==t.gutterX,[`gy-${t.gutterY}`]:null!==t.gutterY})));return(0,i.bv)((()=>{t.toast})),t.toast&&(s=Vc({container:r,root:t.toast.root}),n({})),()=>{var n;const o=[];return null==s||s.containerPositions.value.forEach((t=>{o.push((0,i.h)(Pc,{key:t,instance:s,position:t}))})),(0,i.h)(t.tag,{class:[a.value,t.position],ref:r},[...o,null==(n=e.default)?void 0:n.call(e)])}},methods:{}}),Hc={class:"visually-hidden"},Wc=["aria-labelledby","role"],Gc=(0,i.aZ)({__name:"BDropdown",props:{id:null,menuClass:null,size:null,splitClass:null,splitVariant:null,text:null,toggleClass:null,autoClose:{type:[Boolean,String],default:!0},block:{default:!1},boundary:{default:"clippingParents"},dark:{default:!1},disabled:{default:!1},isNav:{default:!1},dropup:{default:!1},dropright:{default:!1},dropleft:{default:!1},noFlip:{default:!1},offset:{default:0},popperOpts:{default:()=>({})},right:{default:!1},role:{default:"menu"},split:{default:!1},splitButtonType:{default:"button"},splitHref:{default:void 0},noCaret:{default:!1},toggleText:{default:"Toggle dropdown"},variant:{default:"secondary"}},emits:["show","shown","hide","hidden","click","toggle"],setup(t,{expose:e,emit:n}){const r=t,a=ya((0,o.Vh)(r,"block")),l=ya((0,o.Vh)(r,"dark")),c=ya((0,o.Vh)(r,"disabled")),u=ya((0,o.Vh)(r,"dropup")),d=ya((0,o.Vh)(r,"dropright")),h=ya((0,o.Vh)(r,"isNav")),f=ya((0,o.Vh)(r,"dropleft")),p=ya((0,o.Vh)(r,"right")),m=ya((0,o.Vh)(r,"split")),g=ya((0,o.Vh)(r,"noCaret")),v=(0,o.iH)(),y=(0,o.iH)(),b=(0,o.iH)(),_=Pa((0,o.Vh)(r,"id"),"dropdown");Sa(v,"show.bs.dropdown",(()=>n("show"))),Sa(v,"shown.bs.dropdown",(()=>n("shown"))),Sa(v,"hide.bs.dropdown",(()=>n("hide"))),Sa(v,"hidden.bs.dropdown",(()=>n("hidden")));const w=t=>{m.value&&n("click",t)},x=(0,i.Fl)((()=>({"d-grid":a.value,"d-flex":a.value&&m.value}))),S=(0,i.Fl)((()=>({"nav-link":h.value,"dropdown-toggle":!m.value,"dropdown-toggle-no-caret":g.value&&!m.value,"w-100":m.value&&a.value}))),E=(0,i.Fl)((()=>({"dropdown-menu-dark":l.value,"dropdown-menu-end":p.value}))),M=(0,i.Fl)((()=>({"data-bs-toggle":m.value?void 0:"dropdown","aria-expanded":!!m.value&&void 0,ref:m.value?void 0:y,href:m.value?r.splitHref:void 0}))),T=(0,i.Fl)((()=>({ref:m.value?y:void 0}))),C=()=>{var t;null==(t=b.value)||t.hide()};return(0,i.bv)((()=>{var t;b.value=new Hn(null==(t=y.value)?void 0:t.$el,{autoClose:r.autoClose,boundary:r.boundary,offset:r.offset?r.offset.toString():"",reference:r.offset||m.value?"parent":"toggle",popperConfig:t=>{const e={placement:"bottom-start",modifiers:r.noFlip?[{name:"flip",options:{fallbackPlacements:[]}}]:[]};return u.value?e.placement=p.value?"top-end":"top-start":d.value?e.placement="right-start":f.value?e.placement="left-start":p.value&&(e.placement="bottom-end"),ca(t,ca(e,r.popperOpts))}})})),e({hide:C}),(e,r)=>((0,i.wg)(),(0,i.iD)("div",{ref_key:"parent",ref:v,class:(0,s.C_)([(0,o.SU)(x),"btn-group"])},[(0,i.Wm)(Vl,(0,i.dG)({id:(0,o.SU)(_),variant:t.splitVariant||t.variant,size:t.size,class:[(0,o.SU)(S),(0,o.SU)(m)?t.splitClass:t.toggleClass],disabled:(0,o.SU)(c),type:t.splitButtonType},(0,o.SU)(M),{onClick:w}),{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"button-content",{},(()=>[(0,i.Uk)((0,s.zw)(t.text),1)]))])),_:3},16,["id","variant","size","class","disabled","type"]),(0,o.SU)(m)?((0,i.wg)(),(0,i.j4)(Vl,(0,i.dG)({key:0,variant:t.variant,size:t.size,disabled:(0,o.SU)(c)},(0,o.SU)(T),{class:[t.toggleClass,"dropdown-toggle-split dropdown-toggle"],"data-bs-toggle":"dropdown","aria-expanded":"false",onClick:r[0]||(r[0]=t=>n("toggle"))}),{default:(0,i.w5)((()=>[(0,i._)("span",Hc,[(0,i.WI)(e.$slots,"toggle-text",{},(()=>[(0,i.Uk)((0,s.zw)(t.toggleText),1)]))])])),_:3},16,["variant","size","disabled","class"])):(0,i.kq)("",!0),(0,i._)("ul",{class:(0,s.C_)(["dropdown-menu",[t.menuClass,(0,o.SU)(E)]]),"aria-labelledby":(0,o.SU)(_),role:t.role},[(0,i.WI)(e.$slots,"default")],10,Wc)],2))}}),$c={role:"presentation"},qc=(0,i.aZ)({__name:"BDropdownDivider",props:{tag:{default:"hr"}},setup(t){return(e,n)=>((0,i.wg)(),(0,i.iD)("li",$c,[((0,i.wg)(),(0,i.j4)((0,i.LL)(t.tag),{class:"dropdown-divider",role:"separator","aria-orientation":"horizontal"}))]))}}),Yc={},Xc={role:"presentation"},Zc={class:"px-4 py-3"};function Kc(t,e){return(0,i.wg)(),(0,i.iD)("li",Xc,[(0,i._)("form",Zc,[(0,i.WI)(t.$slots,"default")])])}const Jc=xl(Yc,[["render",Kc]]),Qc={role:"presentation"},tu=["id","aria-describedby"],eu={inheritAttrs:!1},nu=(0,i.aZ)({...eu,__name:"BDropdownGroup",props:{id:null,ariaDescribedby:null,header:null,headerClass:{default:void 0},headerTag:{default:"header"},headerVariant:null},setup(t){const e=t,n=(0,i.Fl)((()=>e.id?`${e.id}_group_dd_header`:void 0)),r=(0,i.Fl)((()=>"header"===e.headerTag?void 0:"heading")),a=(0,i.Fl)((()=>({[`text-${e.headerVariant}`]:void 0!==e.headerVariant})));return(e,l)=>((0,i.wg)(),(0,i.iD)("li",Qc,[((0,i.wg)(),(0,i.j4)((0,i.LL)(t.headerTag),{id:(0,o.SU)(n),class:(0,s.C_)(["dropdown-header",[(0,o.SU)(a),t.headerClass]]),role:(0,o.SU)(r)},{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"header",{},(()=>[(0,i.Uk)((0,s.zw)(t.header),1)]))])),_:3},8,["id","class","role"])),(0,i._)("ul",(0,i.dG)({id:t.id,role:"group",class:"list-unstyled"},e.$attrs,{"aria-describedby":t.ariaDescribedby||(0,o.SU)(n)}),[(0,i.WI)(e.$slots,"default")],16,tu)]))}}),ru={},iu={class:"dropdown-header"};function ou(t,e){return(0,i.wg)(),(0,i.iD)("li",null,[(0,i._)("h6",iu,[(0,i.WI)(t.$slots,"default")])])}const su=xl(ru,[["render",ou]]),au={inheritAttrs:!1},lu=(0,i.aZ)({...au,__name:"BDropdownItem",props:{href:null,linkClass:null,active:{default:!1},disabled:{default:!1},rel:{default:void 0},target:{default:"_self"},variant:null},emits:["click"],setup(t,{emit:e}){const n=t,r=ya((0,o.Vh)(n,"active")),a=ya((0,o.Vh)(n,"disabled")),l=(0,i.l1)(),c=(0,i.Fl)((()=>({active:r.value,disabled:a.value,[`text-${n.variant}`]:void 0!==n.variant}))),u=(0,i.Fl)((()=>n.href?"a":l.to?El:"button")),d=(0,i.Fl)((()=>({disabled:a.value,"aria-current":r.value?"true":null,href:"a"===u.value?n.href:null,rel:n.rel,type:"button"===u.value?"button":null,target:n.target,...l.to?{activeClass:"active",...l}:{}}))),h=t=>e("click",t);return(e,n)=>((0,i.wg)(),(0,i.iD)("li",{role:"presentation",class:(0,s.C_)(e.$attrs.class)},[((0,i.wg)(),(0,i.j4)((0,i.LL)((0,o.SU)(u)),(0,i.dG)({class:["dropdown-item",[(0,o.SU)(c),t.linkClass]]},(0,o.SU)(d),{onClick:h}),{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default")])),_:3},16,["class"]))],2))}}),cu={inheritAttrs:!1},uu=(0,i.aZ)({...cu,__name:"BDropdownItemButton",props:{buttonClass:null,active:{default:!1},activeClass:{default:"active"},disabled:{default:!1},variant:null},emits:["click"],setup(t,{emit:e}){const n=t,r=ya((0,o.Vh)(n,"active")),a=ya((0,o.Vh)(n,"disabled")),l=(0,i.Fl)((()=>({[n.activeClass]:r.value,disabled:a.value,[`text-${n.variant}`]:void 0!==n.variant}))),c=(0,i.Fl)((()=>({disabled:a.value}))),u=t=>e("click",t);return(e,n)=>((0,i.wg)(),(0,i.iD)("li",{role:"presentation",class:(0,s.C_)(e.$attrs.class)},[(0,i._)("button",(0,i.dG)({role:"menu",type:"button",class:["dropdown-item",[(0,o.SU)(l),t.buttonClass]]},(0,o.SU)(c),{onClick:u}),[(0,i.WI)(e.$slots,"default")],16)],2))}}),du={role:"presentation"},hu={class:"px-4 py-1 mb-0 text-muted"},fu=(0,i.aZ)({__name:"BDropdownText",props:{text:{default:""}},setup(t){return(e,n)=>((0,i.wg)(),(0,i.iD)("li",du,[(0,i._)("p",hu,[(0,i.WI)(e.$slots,"default",{},(()=>[(0,i.Uk)((0,s.zw)(t.text),1)]))])]))}}),pu=["id","novalidate","onSubmit"],mu=(0,i.aZ)({__name:"BForm",props:{id:null,floating:{default:!1},novalidate:{default:!1},validated:{default:!1}},emits:["submit"],setup(t,{emit:e}){const n=t,r=ya((0,o.Vh)(n,"floating")),l=ya((0,o.Vh)(n,"novalidate")),c=ya((0,o.Vh)(n,"validated")),u=(0,i.Fl)((()=>({"form-floating":r.value,"was-validated":c.value}))),d=t=>e("submit",t);return(e,n)=>((0,i.wg)(),(0,i.iD)("form",{id:t.id,novalidate:(0,o.SU)(l),class:(0,s.C_)((0,o.SU)(u)),onSubmit:(0,a.iM)(d,["prevent"])},[(0,i.WI)(e.$slots,"default")],42,pu))}}),gu={class:"form-floating"},vu=["for"],yu=(0,i.aZ)({__name:"BFormFloatingLabel",props:{labelFor:null,label:null,text:null},setup(t){return(e,n)=>((0,i.wg)(),(0,i.iD)("div",gu,[(0,i.WI)(e.$slots,"default",{},(()=>[(0,i.Uk)((0,s.zw)(t.text),1)])),(0,i._)("label",{for:t.labelFor},[(0,i.WI)(e.$slots,"label",{},(()=>[(0,i.Uk)((0,s.zw)(t.label),1)]))],8,vu)]))}}),bu=(0,i.aZ)({__name:"BFormInvalidFeedback",props:{ariaLive:null,forceShow:{default:!1},id:null,text:null,role:null,state:{default:void 0},tag:{default:"div"},tooltip:{default:!1}},setup(t){const e=t,n=ya((0,o.Vh)(e,"forceShow")),r=ya((0,o.Vh)(e,"state")),a=ya((0,o.Vh)(e,"tooltip")),l=(0,i.Fl)((()=>!0===n.value||!1===r.value)),c=(0,i.Fl)((()=>({"d-block":l.value,"invalid-feedback":!a.value,"invalid-tooltip":a.value}))),u=(0,i.Fl)((()=>({id:e.id,role:e.role,"aria-live":e.ariaLive,"aria-atomic":e.ariaLive?"true":void 0})));return(e,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(t.tag),(0,i.dG)({class:(0,o.SU)(c)},(0,o.SU)(u)),{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default",{},(()=>[(0,i.Uk)((0,s.zw)(t.text),1)]))])),_:3},16,["class"]))}}),_u=(0,i.aZ)({__name:"BFormRow",props:{tag:{default:"div"}},setup(t){return(e,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(t.tag),{class:"row d-flex flex-wrap"},{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default")])),_:3}))}}),wu=(0,i.aZ)({__name:"BFormText",props:{id:null,inline:{default:!1},tag:{default:"small"},text:null,textVariant:{default:"muted"}},setup(t){const e=t,n=ya((0,o.Vh)(e,"inline")),r=(0,i.Fl)((()=>({"form-text":!n.value,[`text-${e.textVariant}`]:!!e.textVariant}))),a=(0,i.Fl)((()=>({id:e.id})));return(e,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(t.tag),(0,i.dG)({class:(0,o.SU)(r)},(0,o.SU)(a)),{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default",{},(()=>[(0,i.Uk)((0,s.zw)(t.text),1)]))])),_:3},16,["class"]))}}),xu=(0,i.aZ)({__name:"BFormValidFeedback",props:{ariaLive:null,forceShow:{default:!1},id:null,role:null,text:null,state:{default:void 0},tag:{default:"div"},tooltip:{default:!1}},setup(t){const e=t,n=ya((0,o.Vh)(e,"forceShow")),r=ya((0,o.Vh)(e,"state")),a=ya((0,o.Vh)(e,"tooltip")),l=(0,i.Fl)((()=>!0===n.value||!0===r.value)),c=(0,i.Fl)((()=>({"d-block":l.value,"valid-feedback":!a.value,"valid-tooltip":a.value}))),u=(0,i.Fl)((()=>({id:e.id||null,role:e.role||null,"aria-live":e.ariaLive||null,"aria-atomic":e.ariaLive?"true":null})));return(e,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(t.tag),(0,i.dG)({class:(0,o.SU)(c)},(0,o.SU)(u)),{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default",{},(()=>[(0,i.Uk)((0,s.zw)(t.text),1)]))])),_:3},16,["class"]))}}),Su=["id","disabled","required","name","form","aria-label","aria-labelledby","aria-required","value","indeterminate"],Eu=["for"],Mu={inheritAttrs:!1},Tu=(0,i.aZ)({...Mu,__name:"BFormCheckbox",props:{ariaLabel:null,ariaLabelledBy:null,form:null,indeterminate:null,name:null,id:{default:void 0},autofocus:{default:!1},plain:{default:!1},button:{default:!1},switch:{default:!1},disabled:{default:!1},buttonVariant:{default:"secondary"},inline:{default:!1},required:{default:void 0},size:{default:"md"},state:{default:void 0},uncheckedValue:{type:[Array,Set,Boolean,String,Object,Number],default:!1},value:{type:[Array,Set,Boolean,String,Object,Number],default:!0},modelValue:{type:[Array,Set,Boolean,String,Object,Number],default:void 0}},emits:["update:modelValue","input","change"],setup(t,{emit:e}){const n=t,r=ya((0,o.Vh)(n,"indeterminate")),l=ya((0,o.Vh)(n,"autofocus")),c=ya((0,o.Vh)(n,"plain")),u=ya((0,o.Vh)(n,"button")),d=ya((0,o.Vh)(n,"switch")),h=ya((0,o.Vh)(n,"disabled")),f=ya((0,o.Vh)(n,"inline")),p=ya((0,o.Vh)(n,"required")),m=ya((0,o.Vh)(n,"state")),g=Pa((0,o.Vh)(n,"id"),"form-check"),v=(0,o.iH)(null),y=(0,o.iH)(!1),b=(0,i.Fl)({get:()=>n.uncheckedValue?Array.isArray(n.modelValue)?n.modelValue.indexOf(n.value)>-1:n.modelValue===n.value:n.modelValue,set:t=>{let r=t;Array.isArray(n.modelValue)?n.uncheckedValue&&(r=n.modelValue,t?(r.indexOf(n.uncheckedValue)>-1&&r.splice(r.indexOf(n.uncheckedValue),1),r.push(n.value)):(r.indexOf(n.value)>-1&&r.splice(r.indexOf(n.value),1),r.push(n.uncheckedValue))):r=t?n.value:n.uncheckedValue,e("input",r),e("update:modelValue",r),e("change",r)}}),_=(0,i.Fl)((()=>Array.isArray(n.modelValue)?n.modelValue.indexOf(n.value)>-1:JSON.stringify(n.modelValue)===JSON.stringify(n.value))),w=(0,o.qj)({plain:(0,o.Vh)(c,"value"),button:(0,o.Vh)(u,"value"),inline:(0,o.Vh)(f,"value"),switch:(0,o.Vh)(d,"value"),size:(0,o.Vh)(n,"size"),state:(0,o.Vh)(m,"value"),buttonVariant:(0,o.Vh)(n,"buttonVariant")}),x=Ea(w),S=Ma(w),E=Ta(w);return(0,i.bv)((()=>{l.value&&v.value.focus()})),(e,n)=>((0,i.wg)(),(0,i.iD)("div",{class:(0,s.C_)((0,o.SU)(x))},[(0,i.wy)((0,i._)("input",(0,i.dG)({id:(0,o.SU)(g)},e.$attrs,{ref_key:"input",ref:v,"onUpdate:modelValue":n[0]||(n[0]=t=>(0,o.dq)(b)?b.value=t:null),class:(0,o.SU)(S),type:"checkbox",disabled:(0,o.SU)(h),required:!!t.name&&!!(0,o.SU)(p),name:t.name,form:t.form,"aria-label":t.ariaLabel,"aria-labelledby":t.ariaLabelledBy,"aria-required":t.name&&(0,o.SU)(p)?"true":void 0,value:t.value,indeterminate:(0,o.SU)(r),onFocus:n[1]||(n[1]=t=>y.value=!0),onBlur:n[2]||(n[2]=t=>y.value=!1)}),null,16,Su),[[a.e8,(0,o.SU)(b)]]),e.$slots.default||!(0,o.SU)(c)?((0,i.wg)(),(0,i.iD)("label",{key:0,for:(0,o.SU)(g),class:(0,s.C_)([(0,o.SU)(E),{active:(0,o.SU)(_),focus:y.value}])},[(0,i.WI)(e.$slots,"default")],10,Eu)):(0,i.kq)("",!0)],2))}}),Cu=["id"],Au=["innerHTML"],ku=["textContent"],Ou=(0,i.aZ)({__name:"BFormCheckboxGroup",props:{id:null,form:null,modelValue:{default:()=>[]},ariaInvalid:{default:void 0},autofocus:{default:!1},buttonVariant:{default:"secondary"},buttons:{default:!1},disabled:{default:!1},disabledField:{default:"disabled"},htmlField:{default:"html"},name:null,options:{default:()=>[]},plain:{default:!1},required:{default:!1},size:null,stacked:{default:!1},state:{default:void 0},switches:{default:!1},textField:{default:"text"},validated:{default:!1},valueField:{default:"value"}},emits:["input","update:modelValue","change"],setup(t,{emit:e}){const n=t;ya((0,o.Vh)(n,"autofocus"));const r=ya((0,o.Vh)(n,"buttons")),a=ya((0,o.Vh)(n,"disabled"));ya((0,o.Vh)(n,"plain"));const l=ya((0,o.Vh)(n,"required")),c=ya((0,o.Vh)(n,"stacked")),u=ya((0,o.Vh)(n,"state")),d=ya((0,o.Vh)(n,"switches")),h=ya((0,o.Vh)(n,"validated")),f=(0,i.Rr)(),p="BFormCheckbox",m=Pa((0,o.Vh)(n,"id"),"checkbox"),g=Pa((0,o.Vh)(n,"name"),"checkbox"),v=(0,i.Fl)({get:()=>n.modelValue,set:t=>{if(JSON.stringify(t)===JSON.stringify(n.modelValue))return;const r=n.options.filter((e=>t.map((t=>JSON.stringify(t))).includes(JSON.stringify("string"==typeof e?e:e[n.valueField])))).map((t=>"string"==typeof t?t:t[n.valueField]));e("input",r),e("update:modelValue",r),e("change",r)}}),y=(0,i.Fl)((()=>(f.first?ka(f.first(),p,a.value):[]).concat(n.options.map((t=>Oa(t,n)))).concat(f.default?ka(f.default(),p,a.value):[]).map(((t,e)=>Ra(t,e,n,g,m))).map((t=>({...t,props:{switch:d.value,...t.props}}))))),b=(0,o.qj)({required:(0,o.Vh)(l,"value"),ariaInvalid:(0,o.Vh)(n,"ariaInvalid"),state:(0,o.Vh)(u,"value"),validated:(0,o.Vh)(h,"value"),buttons:(0,o.Vh)(r,"value"),stacked:(0,o.Vh)(c,"value"),size:(0,o.Vh)(n,"size")}),_=Ca(b),w=Aa(b);return(t,e)=>((0,i.wg)(),(0,i.iD)("div",(0,i.dG)((0,o.SU)(_),{id:(0,o.SU)(m),role:"group",class:[(0,o.SU)(w),"bv-no-focus-ring"],tabindex:"-1"}),[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,o.SU)(y),((t,n)=>((0,i.wg)(),(0,i.j4)(Tu,(0,i.dG)({key:n,modelValue:(0,o.SU)(v),"onUpdate:modelValue":e[0]||(e[0]=t=>(0,o.dq)(v)?v.value=t:null)},t.props),{default:(0,i.w5)((()=>[t.html?((0,i.wg)(),(0,i.iD)("span",{key:0,innerHTML:t.html},null,8,Au)):((0,i.wg)(),(0,i.iD)("span",{key:1,textContent:(0,s.zw)(t.text)},null,8,ku))])),_:2},1040,["modelValue"])))),128))],16,Cu))}}),Ru=["input","select","textarea"],Pu=Ru.map((t=>`${t}:not([disabled])`)).join(),Lu=[...Ru,"a","button","label"],Du="label",Iu="invalid-feedback",Nu="valid-feedback",Uu="description",Fu="default",Bu=(0,i.aZ)({components:{BCol:Mc,BFormInvalidFeedback:bu,BFormRow:_u,BFormText:wu,BFormValidFeedback:xu},props:{contentCols:{type:[Boolean,String,Number],required:!1},contentColsLg:{type:[Boolean,String,Number],required:!1},contentColsMd:{type:[Boolean,String,Number],required:!1},contentColsSm:{type:[Boolean,String,Number],required:!1},contentColsXl:{type:[Boolean,String,Number],required:!1},description:{type:[String],required:!1},disabled:{type:[Boolean,String],default:!1},feedbackAriaLive:{type:String,default:"assertive"},id:{type:String,required:!1},invalidFeedback:{type:String,required:!1},label:{type:String,required:!1},labelAlign:{type:[Boolean,String,Number],required:!1},labelAlignLg:{type:[Boolean,String,Number],required:!1},labelAlignMd:{type:[Boolean,String,Number],required:!1},labelAlignSm:{type:[Boolean,String,Number],required:!1},labelAlignXl:{type:[Boolean,String,Number],required:!1},labelClass:{type:[Array,Object,String],required:!1},labelCols:{type:[Boolean,String,Number],required:!1},labelColsLg:{type:[Boolean,String,Number],required:!1},labelColsMd:{type:[Boolean,String,Number],required:!1},labelColsSm:{type:[Boolean,String,Number],required:!1},labelColsXl:{type:[Boolean,String,Number],required:!1},labelFor:{type:String,required:!1},labelSize:{type:String,required:!1},labelSrOnly:{type:[Boolean,String],default:!1},state:{type:[Boolean,String],default:null},tooltip:{type:[Boolean,String],default:!1},validFeedback:{type:String,required:!1},validated:{type:[Boolean,String],default:!1},floating:{type:[Boolean,String],default:!1}},setup(t,{attrs:e}){const n=ya((0,o.Vh)(t,"disabled")),r=ya((0,o.Vh)(t,"labelSrOnly")),s=ya((0,o.Vh)(t,"state")),a=ya((0,o.Vh)(t,"tooltip")),l=ya((0,o.Vh)(t,"validated")),c=ya((0,o.Vh)(t,"floating")),u=null,d=["xs","sm","md","lg","xl"],h=(t,e)=>d.reduce(((n,r)=>{const i=t[pa(r,`${e}Align`)]||null;return i&&n.push(["text",r,i].filter((t=>t)).join("-")),n}),[]),f=(t,e)=>d.reduce(((n,r)=>{let i=t[pa(r,`${e}Cols`)];return i=""===i||(i||!1),"boolean"!=typeof i&&"auto"!==i&&(i=ha(i,0),i=i>0&&i),i&&(n[r||("boolean"==typeof i?"col":"cols")]=i),n}),{}),p=(0,o.iH)(),m=(e,n=null)=>{if(zs&&t.labelFor){const r=Ks(`#${Us(t.labelFor)}`,p);if(r){const t="aria-describedby",i=(e||"").split(ks),o=(n||"").split(ks),s=(Qs(r,t)||"").split(ks).filter((t=>!o.includes(t))).concat(i).filter(((t,e,n)=>n.indexOf(t)===e)).filter((t=>t)).join(" ").trim();s?ta(r,t,s):ea(r,t)}}},g=(0,i.Fl)((()=>f(t,"content"))),v=(0,i.Fl)((()=>h(t,"label"))),y=(0,i.Fl)((()=>f(t,"label"))),b=(0,i.Fl)((()=>Object.keys(g.value).length>0||Object.keys(y.value).length>0)),_=(0,i.Fl)((()=>"boolean"==typeof s.value?s.value:null)),w=(0,i.Fl)((()=>{const t=_.value;return!0===t?"is-valid":!1===t?"is-invalid":null})),x=(0,i.Fl)((()=>aa(e.ariaInvalid,s.value)));return(0,i.YP)((()=>u),((t,e)=>{t!==e&&m(t,e)})),(0,i.bv)((()=>{(0,i.Y3)((()=>{m(u)}))})),{disabledBoolean:n,labelSrOnlyBoolean:r,stateBoolean:s,tooltipBoolean:a,validatedBoolean:l,floatingBoolean:c,ariaDescribedby:u,computedAriaInvalid:x,contentColProps:g,isHorizontal:b,labelAlignClasses:v,labelColProps:y,onLegendClick:e=>{if(t.labelFor)return;const{target:n}=e,r=n?n.tagName:"";if(-1!==Lu.indexOf(r))return;const i=Js(Pu,p).filter(Xs);1===i.length&&qs(i[0])},stateClass:w}},render(){const t=this.$props,e=this.$slots,n=Pa(),r=!t.labelFor;let s=null;const a=ua(Du,{},e)||t.label,l=a?sa("_BV_label_"):null;if(a||this.isHorizontal){const e=r?"legend":"label";if(this.labelSrOnlyBoolean)a&&(s=(0,i.h)(e,{class:"visually-hidden",id:l,for:t.labelFor||null},a)),s=this.isHorizontal?(0,i.h)(Mc,this.labelColProps,{default:()=>s}):(0,i.h)("div",{},[s]);else{const n={onClick:r?this.onLegendClick:null,...this.isHorizontal?this.labelColProps:{},tag:this.isHorizontal?e:null,id:l,for:t.labelFor||null,tabIndex:r?"-1":null,class:[this.isHorizontal?"col-form-label":"form-label",{"bv-no-focus-ring":r,"col-form-label":this.isHorizontal||r,"pt-0":!this.isHorizontal&&r,"d-block":!this.isHorizontal&&!r,[`col-form-label-${t.labelSize}`]:!!t.labelSize},this.labelAlignClasses,t.labelClass]};s=this.isHorizontal?(0,i.h)(Mc,n,{default:()=>a}):(0,i.h)(e,n,a)}}let c=null;const u=ua(Iu,{},e)||this.invalidFeedback,d=u?sa("_BV_feedback_invalid_"):void 0;u&&(c=(0,i.h)(bu,{ariaLive:t.feedbackAriaLive,id:d,state:this.stateBoolean,tooltip:this.tooltipBoolean},{default:()=>u}));let h=null;const f=ua(Nu,{},e)||this.validFeedback,p=f?sa("_BV_feedback_valid_"):void 0;f&&(h=(0,i.h)(xu,{ariaLive:t.feedbackAriaLive,id:p,state:this.stateBoolean,tooltip:this.tooltipBoolean},{default:()=>f}));let m=null;const g=ua(Uu,{},e)||this.description,v=g?sa("_BV_description_"):void 0;g&&(m=(0,i.h)(wu,{id:v},{default:()=>g}));const y=this.ariaDescribedby=[v,!1===this.stateBoolean?d:null,!0===this.stateBoolean?p:null].filter((t=>t)).join(" ")||null,b=[ua(Fu,{ariaDescribedby:y,descriptionId:v,id:n,labelId:l},e)||"",c,h,m];!this.isHorizontal&&this.floatingBoolean&&b.push(s);let _=(0,i.h)("div",{ref:"content",class:[{"form-floating":!this.isHorizontal&&this.floatingBoolean}]},b);this.isHorizontal&&(_=(0,i.h)(Mc,{ref:"content",...this.contentColProps},{default:()=>b}));const w={class:["mb-3",this.stateClass,{"was-validated":this.validatedBoolean}],id:Pa((0,o.Vh)(t,"id")).value,disabled:r?this.disabledBoolean:null,role:r?null:"group","aria-invalid":this.computedAriaInvalid,"aria-labelledby":r&&this.isHorizontal?l:null};return this.isHorizontal&&!r?(0,i.h)(_u,w,{default:()=>[s,_]}):(0,i.h)(r?"fieldset":"div",w,this.isHorizontal&&r?[(0,i.h)(_u,{},{default:()=>[s,_]})]:this.isHorizontal||!this.floatingBoolean?[s,_]:[_])}}),Vu=["text","number","email","password","search","url","tel","date","time","range","color"],zu=(0,i.aZ)({props:{...La,max:{type:[String,Number],required:!1},min:{type:[String,Number],required:!1},step:{type:[String,Number],required:!1},type:{type:String,default:"text",validator:t=>Vu.includes(t)}},emits:["update:modelValue","change","blur","input"],setup(t,{emit:e}){const n=(0,i.Fl)((()=>{const e="range"===t.type,n="color"===t.type;return{"form-range":e,"form-control":n||!t.plaintext&&!e,"form-control-color":n,"form-control-plaintext":t.plaintext&&!e&&!n,[`form-control-${t.size}`]:!!t.size,"is-valid":!0===t.state,"is-invalid":!1===t.state}})),r=(0,i.Fl)((()=>Vu.includes(t.type)?t.type:"text")),{input:o,computedId:s,computedAriaInvalid:a,onInput:l,onChange:c,onBlur:u,focus:d,blur:h}=Da(t,e);return{classes:n,localType:r,input:o,computedId:s,computedAriaInvalid:a,onInput:l,onChange:c,onBlur:u,focus:d,blur:h}}}),ju=["id","name","form","type","disabled","placeholder","required","autocomplete","readonly","min","max","step","list","aria-required","aria-invalid"];function Hu(t,e,n,r,o,s){return(0,i.wg)(),(0,i.iD)("input",(0,i.dG)({id:t.computedId,ref:"input",class:t.classes,name:t.name||void 0,form:t.form||void 0,type:t.localType,disabled:t.disabled,placeholder:t.placeholder,required:t.required,autocomplete:t.autocomplete||void 0,readonly:t.readonly||t.plaintext,min:t.min,max:t.max,step:t.step,list:"password"!==t.type?t.list:void 0,"aria-required":t.required?"true":void 0,"aria-invalid":t.computedAriaInvalid},t.$attrs,{onInput:e[0]||(e[0]=e=>t.onInput(e)),onChange:e[1]||(e[1]=e=>t.onChange(e)),onBlur:e[2]||(e[2]=e=>t.onBlur(e))}),null,16,ju)}const Wu=xl(zu,[["render",Hu]]),Gu=["id","disabled","required","name","form","aria-label","aria-labelledby","value","aria-required"],$u=["for"],qu=(0,i.aZ)({__name:"BFormRadio",props:{ariaLabel:null,ariaLabelledBy:null,form:null,id:null,name:null,size:null,autofocus:{default:!1},modelValue:{type:[Boolean,String,Array,Object,Number],default:void 0},plain:{default:!1},button:{default:!1},switch:{default:!1},disabled:{default:!1},buttonVariant:{default:"secondary"},inline:{default:!1},required:{default:!1},state:{default:void 0},value:{type:[String,Boolean,Object,Number],default:!0}},emits:["input","change","update:modelValue"],setup(t,{emit:e}){const n=t,r=ya((0,o.Vh)(n,"autofocus")),l=ya((0,o.Vh)(n,"plain")),c=ya((0,o.Vh)(n,"button")),u=ya((0,o.Vh)(n,"switch")),d=ya((0,o.Vh)(n,"disabled")),h=ya((0,o.Vh)(n,"inline")),f=ya((0,o.Vh)(n,"required")),p=ya((0,o.Vh)(n,"state")),m=Pa((0,o.Vh)(n,"id"),"form-check"),g=(0,o.iH)(null),v=(0,o.iH)(!1),y=(0,i.Fl)({get:()=>Array.isArray(n.modelValue)?n.modelValue[0]:n.modelValue,set:t=>{const r=!!t&&n.value,i=Array.isArray(n.modelValue)?[r]:r;e("input",i),e("change",i),e("update:modelValue",i)}}),b=(0,i.Fl)((()=>Array.isArray(n.modelValue)?(n.modelValue||[]).find((t=>t===n.value)):JSON.stringify(n.modelValue)===JSON.stringify(n.value))),_=(0,o.qj)({plain:(0,o.Vh)(l,"value"),button:(0,o.Vh)(c,"value"),inline:(0,o.Vh)(h,"value"),switch:(0,o.Vh)(u,"value"),size:(0,o.Vh)(n,"size"),state:(0,o.Vh)(p,"value"),buttonVariant:(0,o.Vh)(n,"buttonVariant")}),w=Ea(_),x=Ma(_),S=Ta(_);return(0,i.bv)((()=>{r.value&&g.value.focus()})),(e,n)=>((0,i.wg)(),(0,i.iD)("div",{class:(0,s.C_)((0,o.SU)(w))},[(0,i.wy)((0,i._)("input",(0,i.dG)({id:(0,o.SU)(m)},e.$attrs,{ref_key:"input",ref:g,"onUpdate:modelValue":n[0]||(n[0]=t=>(0,o.dq)(y)?y.value=t:null),class:(0,o.SU)(x),type:"radio",disabled:(0,o.SU)(d),required:!!t.name&&!!(0,o.SU)(f),name:t.name,form:t.form,"aria-label":t.ariaLabel,"aria-labelledby":t.ariaLabelledBy,value:t.value,"aria-required":!(!t.name||!(0,o.SU)(f))||void 0,onFocus:n[1]||(n[1]=t=>v.value=!0),onBlur:n[2]||(n[2]=t=>v.value=!1)}),null,16,Gu),[[a.G2,(0,o.SU)(y)]]),e.$slots.default||!(0,o.SU)(l)?((0,i.wg)(),(0,i.iD)("label",{key:0,for:(0,o.SU)(m),class:(0,s.C_)([(0,o.SU)(S),{active:(0,o.SU)(b),focus:v.value}])},[(0,i.WI)(e.$slots,"default")],10,$u)):(0,i.kq)("",!0)],2))}}),Yu=["id"],Xu=["innerHTML"],Zu=["textContent"],Ku=(0,i.aZ)({__name:"BFormRadioGroup",props:{size:null,form:null,id:null,name:null,modelValue:{type:[String,Boolean,Array,Object,Number],default:""},ariaInvalid:{default:void 0},autofocus:{default:!1},buttonVariant:{default:"secondary"},buttons:{default:!1},disabled:{default:!1},disabledField:{default:"disabled"},htmlField:{default:"html"},options:{default:()=>[]},plain:{default:!1},required:{default:!1},stacked:{default:!1},state:{default:void 0},textField:{default:"text"},validated:{default:!1},valueField:{default:"value"}},emits:["input","update:modelValue","change"],setup(t,{emit:e}){const n=t;ya((0,o.Vh)(n,"autofocus"));const r=ya((0,o.Vh)(n,"buttons")),a=ya((0,o.Vh)(n,"disabled"));ya((0,o.Vh)(n,"plain"));const l=ya((0,o.Vh)(n,"required")),c=ya((0,o.Vh)(n,"stacked")),u=ya((0,o.Vh)(n,"state")),d=ya((0,o.Vh)(n,"validated")),h=(0,i.Rr)(),f="BFormRadio",p=Pa((0,o.Vh)(n,"id"),"radio"),m=Pa((0,o.Vh)(n,"name"),"checkbox"),g=(0,i.Fl)({get:()=>n.modelValue,set:t=>{e("input",t),e("update:modelValue",t),e("change",t)}}),v=(0,i.Fl)((()=>(h.first?ka(h.first(),f,a.value):[]).concat(n.options.map((t=>Oa(t,n)))).concat(h.default?ka(h.default(),f,a.value):[]).map(((t,e)=>Ra(t,e,n,m,p))).map((t=>({...t}))))),y=(0,o.qj)({required:(0,o.Vh)(l,"value"),ariaInvalid:(0,o.Vh)(n,"ariaInvalid"),state:(0,o.Vh)(u,"value"),validated:(0,o.Vh)(d,"value"),buttons:(0,o.Vh)(r,"value"),stacked:(0,o.Vh)(c,"value"),size:(0,o.Vh)(n,"size")}),b=Ca(y),_=Aa(y);return(t,e)=>((0,i.wg)(),(0,i.iD)("div",(0,i.dG)((0,o.SU)(b),{id:(0,o.SU)(p),role:"radiogroup",class:[(0,o.SU)(_),"bv-no-focus-ring"],tabindex:"-1"}),[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,o.SU)(v),((t,n)=>((0,i.wg)(),(0,i.j4)(qu,(0,i.dG)({key:n,modelValue:(0,o.SU)(g),"onUpdate:modelValue":e[0]||(e[0]=t=>(0,o.dq)(g)?g.value=t:null)},t.props),{default:(0,i.w5)((()=>[t.html?((0,i.wg)(),(0,i.iD)("span",{key:0,innerHTML:t.html},null,8,Xu)):((0,i.wg)(),(0,i.iD)("span",{key:1,textContent:(0,s.zw)(t.text)},null,8,Zu))])),_:2},1040,["modelValue"])))),128))],16,Yu))}}),Ju=["value","disabled"],Qu=(0,i.aZ)({__name:"BFormSelectOption",props:{value:null,disabled:{default:!1}},setup(t){const e=ya((0,o.Vh)(t,"disabled"));return(n,r)=>((0,i.wg)(),(0,i.iD)("option",{value:t.value,disabled:(0,o.SU)(e)},[(0,i.WI)(n.$slots,"default")],8,Ju))}}),td=["label"],ed=(0,i.aZ)({__name:"BFormSelectOptionGroup",props:{label:null,disabledField:{default:"disabled"},htmlField:{default:"html"},options:{default:()=>[]},textField:{default:"text"},valueField:{default:"value"}},setup(t){const e=t,n=(0,i.Fl)((()=>Ua(e.options,"BFormSelectOptionGroup",e)));return(e,r)=>((0,i.wg)(),(0,i.iD)("optgroup",{label:t.label},[(0,i.WI)(e.$slots,"first"),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,o.SU)(n),((t,n)=>((0,i.wg)(),(0,i.j4)(Qu,(0,i.dG)({key:`option_${n}`,value:t.value,disabled:t.disabled},e.$attrs,{innerHTML:t.html||t.text}),null,16,["value","disabled","innerHTML"])))),128)),(0,i.WI)(e.$slots,"default")],8,td))}}),nd=["id","name","form","multiple","size","disabled","required","aria-required","aria-invalid"],rd=(0,i.aZ)({__name:"BFormSelect",props:{ariaInvalid:{default:void 0},autofocus:{default:!1},disabled:{default:!1},disabledField:{default:"disabled"},form:null,htmlField:{default:"html"},id:null,labelField:{default:"label"},multiple:{default:!1},name:null,options:{default:()=>[]},optionsField:{default:"options"},plain:{default:!1},required:{default:!1},selectSize:{default:0},size:null,state:{default:void 0},textField:{default:"text"},valueField:{default:"value"},modelValue:{default:""}},emits:["input","update:modelValue","change"],setup(t,{expose:e,emit:n}){const r=t,s=ya((0,o.Vh)(r,"autofocus")),l=ya((0,o.Vh)(r,"disabled")),c=ya((0,o.Vh)(r,"multiple")),u=ya((0,o.Vh)(r,"plain")),d=ya((0,o.Vh)(r,"required")),h=ya((0,o.Vh)(r,"state")),f=(0,o.iH)(),p=Pa((0,o.Vh)(r,"id"),"input"),m=()=>{(0,i.Y3)((()=>{var t;s.value&&(null==(t=f.value)||t.focus())}))};(0,i.bv)(m),(0,i.dl)(m);const g=(0,i.Fl)((()=>({"form-control":u.value,[`form-control-${r.size}`]:r.size&&u.value,"form-select":!u.value,[`form-select-${r.size}`]:r.size&&!u.value,"is-valid":!0===h.value,"is-invalid":!1===h.value}))),v=(0,i.Fl)((()=>{if(r.selectSize||u.value)return r.selectSize})),y=(0,i.Fl)((()=>aa(r.ariaInvalid,h.value))),b=(0,i.Fl)((()=>Ua(r.options,"BFormSelect",r))),_=(0,i.Fl)({get(){return r.modelValue},set(t){n("change",t),n("update:modelValue",t),n("input",t)}});return e({blur:()=>{var t;l.value||null==(t=f.value)||t.blur()},focus:()=>{var t;l.value||null==(t=f.value)||t.focus()}}),(e,n)=>(0,i.wy)(((0,i.wg)(),(0,i.iD)("select",(0,i.dG)({id:(0,o.SU)(p),ref_key:"input",ref:f},e.$attrs,{"onUpdate:modelValue":n[0]||(n[0]=t=>(0,o.dq)(_)?_.value=t:null),class:(0,o.SU)(g),name:t.name,form:t.form||void 0,multiple:(0,o.SU)(c)||void 0,size:(0,o.SU)(v),disabled:(0,o.SU)(l),required:(0,o.SU)(d),"aria-required":!!(0,o.SU)(d)||void 0,"aria-invalid":(0,o.SU)(y)}),[(0,i.WI)(e.$slots,"first"),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,o.SU)(b),((t,e)=>((0,i.wg)(),(0,i.iD)(i.HY,null,[Array.isArray(t.options)?((0,i.wg)(),(0,i.j4)(ed,{key:`option_${e}`,label:t.label,options:t.options},null,8,["label","options"])):((0,i.wg)(),(0,i.j4)(Qu,{key:`option2_${e}`,value:t.value,disabled:t.disabled,innerHTML:t.html||t.text},null,8,["value","disabled","innerHTML"]))],64)))),256)),(0,i.WI)(e.$slots,"default")],16,nd)),[[a.bM,(0,o.SU)(_)]])}}),id=["id"],od=(0,i.aZ)({__name:"BFormTag",props:{id:null,title:null,disabled:{default:!1},noRemove:{default:!1},pill:{default:!1},removeLabel:{default:"Remove tag"},tag:{default:"span"},variant:{default:"secondary"}},emits:["remove"],setup(t,{emit:e}){const n=t,r=ya((0,o.Vh)(n,"disabled")),a=ya((0,o.Vh)(n,"noRemove")),l=ya((0,o.Vh)(n,"pill")),c=(0,i.Rr)(),u=(0,i.Fl)((()=>{var t,e,r;return null!=(r=(null==(e=null==(t=c.default)?void 0:t.call(c)[0].children)?void 0:e.toString())||n.title)?r:""})),d=Pa((0,o.Vh)(n,"id")),h=(0,i.Fl)((()=>`${d.value}taglabel__`)),f=(0,i.Fl)((()=>[`bg-${n.variant}`,{"text-dark":["warning","info","light"].includes(n.variant),"rounded-pill":l.value,disabled:r.value}]));return(n,l)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(t.tag),{id:(0,o.SU)(d),title:(0,o.SU)(u),class:(0,s.C_)(["badge b-form-tag d-inline-flex align-items-center mw-100",(0,o.SU)(f)]),"aria-labelledby":(0,o.SU)(h)},{default:(0,i.w5)((()=>[(0,i._)("span",{id:(0,o.SU)(h),class:"b-form-tag-content flex-grow-1 text-truncate"},[(0,i.WI)(n.$slots,"default",{},(()=>[(0,i.Uk)((0,s.zw)((0,o.SU)(u)),1)]))],8,id),(0,o.SU)(r)||(0,o.SU)(a)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(dl,{key:0,"aria-keyshortcuts":"Delete",type:"button","aria-label":t.removeLabel,class:"b-form-tag-remove",white:!["warning","info","light"].includes(t.variant),"aria-describedby":(0,o.SU)(h),"aria-controls":t.id,onClick:l[0]||(l[0]=t=>e("remove",(0,o.SU)(u)))},null,8,["aria-label","white","aria-describedby","aria-controls"]))])),_:3},8,["id","title","class","aria-labelledby"]))}}),sd=["id"],ad=["id","for","aria-live"],ld=["id","aria-live"],cd=["id"],ud=["aria-controls"],dd={role:"group",class:"d-flex"},hd=["id","disabled","value","type","placeholder","form","required"],fd=["disabled"],pd={"aria-live":"polite","aria-atomic":"true"},md={key:0,class:"d-block invalid-feedback"},gd={key:1,class:"form-text text-muted"},vd={key:2,class:"form-text text-muted"},yd=["name","value"],bd=(0,i.aZ)({__name:"BFormTags",props:{addButtonText:{default:"Add"},addButtonVariant:{default:"outline-secondary"},addOnChange:{default:!1},autofocus:{default:!1},disabled:{default:!1},duplicateTagText:{default:"Duplicate tag(s)"},inputAttrs:null,inputClass:null,inputId:null,inputType:{default:"text"},invalidTagText:{default:"Invalid tag(s)"},form:null,limit:null,limitTagsText:{default:"Tag limit reached"},modelValue:{default:()=>[]},name:null,noAddOnEnter:{default:!1},noOuterFocus:{default:!1},noTagRemove:{default:!1},placeholder:{default:"Add tag..."},removeOnDelete:{default:!1},required:{default:!1},separator:null,state:{default:void 0},size:null,tagClass:null,tagPills:{default:!1},tagRemoveLabel:null,tagRemovedLabel:{default:"Tag removed"},tagValidator:{type:Function,default:()=>!0},tagVariant:{default:"secondary"}},emits:["update:modelValue","input","tag-state","focus","focusin","focusout","blur"],setup(t,{emit:e}){const n=t,r=ya((0,o.Vh)(n,"addOnChange")),a=ya((0,o.Vh)(n,"autofocus")),l=ya((0,o.Vh)(n,"disabled")),c=ya((0,o.Vh)(n,"noAddOnEnter")),u=ya((0,o.Vh)(n,"noOuterFocus")),d=ya((0,o.Vh)(n,"noTagRemove")),h=ya((0,o.Vh)(n,"removeOnDelete")),f=ya((0,o.Vh)(n,"required")),p=ya((0,o.Vh)(n,"state")),m=ya((0,o.Vh)(n,"tagPills")),g=(0,o.iH)(null),v=Pa(),y=(0,i.Fl)((()=>n.inputId||`${v.value}input__`));(0,i.bv)((()=>{P(),n.modelValue.length>0&&(w.value=!0)})),(0,i.dl)((()=>P())),(0,i.YP)((()=>n.modelValue),(t=>{b.value=t}));const b=(0,o.iH)(n.modelValue),_=(0,o.iH)(""),w=(0,o.iH)(!1),x=(0,o.iH)(!1),S=(0,o.iH)(""),E=(0,o.iH)([]),M=(0,o.iH)([]),T=(0,o.iH)([]),C=(0,i.Fl)((()=>({[`form-control-${n.size}`]:void 0!==n.size,disabled:l.value,focus:x.value,"is-invalid":!1===p.value,"is-valid":!0===p.value}))),A=(0,i.Fl)((()=>b.value.includes(_.value))),k=(0,i.Fl)((()=>""!==_.value&&!n.tagValidator(_.value))),O=(0,i.Fl)((()=>b.value.length===n.limit)),R=(0,i.Fl)((()=>!k.value&&!A.value)),P=()=>{var t;a.value&&(null==(t=g.value)||t.focus())},L=t=>{l.value?t.target.blur():e("focusin",t)},D=t=>{l.value||u.value||(x.value=!0,e("focus",t))},I=t=>{x.value=!1,e("blur",t)},N=t=>{var r,i;const o="string"==typeof t?t:t.target.value;w.value=!1,(null==(r=n.separator)?void 0:r.includes(o.charAt(0)))&&o.length>0?g.value&&(g.value.value=""):(_.value=o,null!=(i=n.separator)&&i.includes(o.charAt(o.length-1))?B(o.slice(0,o.length-1)):(E.value=n.tagValidator(o)&&!A.value?[o]:[],M.value=n.tagValidator(o)?[]:[o],T.value=A.value?[o]:[],e("tag-state",E.value,M.value,T.value)))},U=t=>{r.value&&(N(t),A.value||B(_.value))},F=t=>{"Enter"!==t.key||c.value?("Backspace"===t.key||"Delete"===t.key)&&h.value&&""===_.value&&w.value&&b.value.length>0?V(b.value[b.value.length-1]):w.value=!0:B(_.value)},B=t=>{var r;if(t=(t||_.value).trim(),""===t||A.value||!n.tagValidator(t)||n.limit&&O.value)return;const i=[...n.modelValue,t];_.value="",w.value=!0,e("update:modelValue",i),e("input",i),null==(r=g.value)||r.focus()},V=t=>{var n;const r=b.value.indexOf(null!=(n=null==t?void 0:t.toString())?n:"");S.value=b.value.splice(r,1).toString(),e("update:modelValue",b.value)},z=(0,i.Fl)((()=>{const{addButtonText:t,addButtonVariant:e,duplicateTagText:r,inputAttrs:i,form:o,inputType:s,invalidTagText:a,limitTagsText:c,limit:u,placeholder:h,separator:g,size:v,tagClass:w,tagRemoveLabel:x,tagVariant:S}=n;return{addButtonText:t,addButtonVariant:e,addTag:B,disableAddButton:R,disabled:l.value,duplicateTagText:r,duplicateTags:T,form:o,inputAttrs:{...i,disabled:l.value,form:o,id:y,value:_},inputHandlers:{input:N,keydown:F,change:U},inputId:y,inputType:s,invalidTagText:a,invalidTags:M,isDuplicate:A,isInvalid:k,isLimitReached:O,limitTagsText:c,limit:u,noTagRemove:d.value,placeholder:h,removeTag:V,required:f.value,separator:g,size:v,state:p.value,tagClass:w,tagPills:m.value,tagRemoveLabel:x,tagVariant:S,tags:b}}));return(n,r)=>((0,i.wg)(),(0,i.iD)("div",{id:(0,o.SU)(v),class:(0,s.C_)(["b-form-tags form-control h-auto",(0,o.SU)(C)]),role:"group",tabindex:"-1",onFocusin:L,onFocusout:r[1]||(r[1]=t=>e("focusout",t))},[(0,i._)("output",{id:`${(0,o.SU)(v)}selected_tags__`,class:"visually-hidden",role:"status",for:(0,o.SU)(y),"aria-live":x.value?"polite":"off","aria-atomic":"true","aria-relevant":"additions text"},(0,s.zw)(b.value.join(", ")),9,ad),(0,i._)("div",{id:`${(0,o.SU)(v)}removed_tags__`,role:"status","aria-live":x.value?"assertive":"off","aria-atomic":"true",class:"visually-hidden"}," ("+(0,s.zw)(t.tagRemovedLabel)+") "+(0,s.zw)(S.value),9,ld),(0,i.WI)(n.$slots,"default",(0,s.vs)((0,i.F4)((0,o.SU)(z))),(()=>[(0,i._)("ul",{id:`${(0,o.SU)(v)}tag_list__`,class:"b-form-tags-list list-unstyled mb-0 d-flex flex-wrap align-items-center"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(b.value,(e=>((0,i.wg)(),(0,i.j4)(od,{key:e,class:(0,s.C_)(t.tagClass),tag:"li",variant:t.tagVariant,pill:(0,o.SU)(m),onRemove:V},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e),1)])),_:2},1032,["class","variant","pill"])))),128)),(0,i._)("li",{role:"none","aria-live":"off",class:"b-from-tags-field flex-grow-1","aria-controls":`${(0,o.SU)(v)}tag_list__`},[(0,i._)("div",dd,[(0,i._)("input",(0,i.dG)({id:(0,o.SU)(y),ref_key:"input",ref:g,disabled:(0,o.SU)(l),value:_.value,type:t.inputType,placeholder:t.placeholder,class:"b-form-tags-input w-100 flex-grow-1 p-0 m-0 bg-transparent border-0",style:{outline:"currentcolor none 0px","min-width":"5rem"}},t.inputAttrs,{form:t.form,required:(0,o.SU)(f),onInput:N,onChange:U,onKeydown:F,onFocus:D,onBlur:I}),null,16,hd),(0,o.SU)(R)?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",class:(0,s.C_)(["btn b-form-tags-button py-0",[`btn-${t.addButtonVariant}`,{"disabled invisible":0===_.value.length},t.inputClass]]),style:{"font-size":"90%"},disabled:(0,o.SU)(l)||0===_.value.length||(0,o.SU)(O),onClick:r[0]||(r[0]=t=>B(_.value))},[(0,i.WI)(n.$slots,"add-button-text",{},(()=>[(0,i.Uk)((0,s.zw)(t.addButtonText),1)]))],10,fd)):(0,i.kq)("",!0)])],8,ud)],8,cd),(0,i._)("div",pd,[(0,o.SU)(k)?((0,i.wg)(),(0,i.iD)("div",md,(0,s.zw)(t.invalidTagText)+": "+(0,s.zw)(_.value),1)):(0,i.kq)("",!0),(0,o.SU)(A)?((0,i.wg)(),(0,i.iD)("small",gd,(0,s.zw)(t.duplicateTagText)+": "+(0,s.zw)(_.value),1)):(0,i.kq)("",!0),b.value.length===t.limit?((0,i.wg)(),(0,i.iD)("small",vd,"Tag limit reached")):(0,i.kq)("",!0)])])),t.name?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:0},(0,i.Ko)(b.value,(e=>((0,i.wg)(),(0,i.iD)("input",{key:e,type:"hidden",name:t.name,value:e},null,8,yd)))),128)):(0,i.kq)("",!0)],42,sd))}}),_d=(0,i.aZ)({props:{...La,noResize:{type:[Boolean,String],default:!1},rows:{type:[String,Number],required:!1,default:2},wrap:{type:String,default:"soft"}},emits:["update:modelValue","change","blur","input"],setup(t,{emit:e}){const n=ya((0,o.Vh)(t,"noResize")),r=(0,i.Fl)((()=>({"form-control":!t.plaintext,"form-control-plaintext":t.plaintext,[`form-control-${t.size}`]:!!t.size,"is-valid":!0===t.state,"is-invalid":!1===t.state}))),s=(0,i.Fl)((()=>n.value?{resize:"none"}:void 0)),{input:a,computedId:l,computedAriaInvalid:c,onInput:u,onChange:d,onBlur:h,focus:f,blur:p}=Da(t,e);return{input:a,computedId:l,computedAriaInvalid:c,onInput:u,onChange:d,onBlur:h,focus:f,blur:p,classes:r,computedStyles:s}}}),wd=["id","name","form","disabled","placeholder","required","autocomplete","readonly","aria-required","aria-invalid","rows","wrap"];function xd(t,e,n,r,o,s){return(0,i.wg)(),(0,i.iD)("textarea",(0,i.dG)({id:t.computedId,ref:"input",class:t.classes,name:t.name||void 0,form:t.form||void 0,disabled:t.disabled,placeholder:t.placeholder,required:t.required,autocomplete:t.autocomplete||void 0,readonly:t.readonly||t.plaintext,"aria-required":t.required?"true":void 0,"aria-invalid":t.computedAriaInvalid,rows:t.rows,style:t.computedStyles,wrap:t.wrap||void 0},t.$attrs,{onInput:e[0]||(e[0]=e=>t.onInput(e)),onChange:e[1]||(e[1]=e=>t.onChange(e)),onBlur:e[2]||(e[2]=e=>t.onBlur(e))}),null,16,wd)}const Sd=xl(_d,[["render",xd]]),Ed={key:0,class:"input-group-text"},Md=["innerHTML"],Td={key:1},Cd={key:0,class:"input-group-text"},Ad=["innerHTML"],kd={key:1},Od=(0,i.aZ)({__name:"BInputGroup",props:{append:null,appendHtml:null,id:null,prepend:null,prependHtml:null,size:null,tag:{default:"div"}},setup(t){const e=t,n=(0,i.Fl)((()=>({"input-group-sm":"sm"===e.size,"input-group-lg":"lg"===e.size}))),r=(0,i.Fl)((()=>!!e.append||!!e.appendHtml)),a=(0,i.Fl)((()=>!!e.prepend||!!e.prependHtml));return(e,l)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(t.tag),{id:t.id,class:(0,s.C_)(["input-group",(0,o.SU)(n)]),role:"group"},{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"prepend",{},(()=>[(0,o.SU)(a)?((0,i.wg)(),(0,i.iD)("span",Ed,[t.prependHtml?((0,i.wg)(),(0,i.iD)("span",{key:0,innerHTML:t.prependHtml},null,8,Md)):((0,i.wg)(),(0,i.iD)("span",Td,(0,s.zw)(t.prepend),1))])):(0,i.kq)("",!0)])),(0,i.WI)(e.$slots,"default"),(0,i.WI)(e.$slots,"append",{},(()=>[(0,o.SU)(r)?((0,i.wg)(),(0,i.iD)("span",Cd,[t.appendHtml?((0,i.wg)(),(0,i.iD)("span",{key:0,innerHTML:t.appendHtml},null,8,Ad)):((0,i.wg)(),(0,i.iD)("span",kd,(0,s.zw)(t.append),1))])):(0,i.kq)("",!0)]))])),_:3},8,["id","class"]))}}),Rd=(0,i.aZ)({__name:"BInputGroupText",props:{tag:{default:"div"},text:null},setup(t){return(e,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(t.tag),{class:"input-group-text"},{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default",{},(()=>[(0,i.Uk)((0,s.zw)(t.text),1)]))])),_:3}))}}),Pd=(0,i.aZ)({__name:"BInputGroupAddon",props:{append:{default:!1},id:null,isText:{default:!1},tag:{default:"div"}},setup(t){const e=t,n=ya((0,o.Vh)(e,"append")),r=ya((0,o.Vh)(e,"isText")),a=(0,i.Fl)((()=>({"input-group-append":n.value,"input-group-prepend":!n.value})));return(e,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(t.tag),{id:t.id,class:(0,s.C_)(["d-flex",(0,o.SU)(a)])},{default:(0,i.w5)((()=>[(0,o.SU)(r)?((0,i.wg)(),(0,i.j4)(Rd,{key:0},{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default")])),_:3})):(0,i.WI)(e.$slots,"default",{key:1})])),_:3},8,["id","class"]))}}),Ld=(0,i.aZ)({__name:"BInputGroupAppend",props:{id:null,isText:{default:!1},tag:{default:"div"}},setup(t){const e=t,n=(0,i.Fl)((()=>({id:e.id,isText:e.isText,tag:e.tag,append:!0})));return(t,e)=>((0,i.wg)(),(0,i.j4)(Pd,(0,s.vs)((0,i.F4)((0,o.SU)(n))),{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default")])),_:3},16))}}),Dd=(0,i.aZ)({__name:"BInputGroupPrepend",props:{id:null,isText:{default:!1},tag:{default:"div"}},setup(t){const e=t,n=(0,i.Fl)((()=>({id:e.id,isText:e.isText,tag:e.tag,append:!1})));return(t,e)=>((0,i.wg)(),(0,i.j4)(Pd,(0,s.vs)((0,i.F4)((0,o.SU)(n))),{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default")])),_:3},16))}}),Id=Symbol(),Nd=(0,i.aZ)({__name:"BListGroup",props:{flush:{default:!1},horizontal:{type:[Boolean,String],default:!1},numbered:{default:!1},tag:{default:"div"}},setup(t){const e=t,n=ya((0,o.Vh)(e,"flush")),r=ya((0,o.Vh)(e,"numbered")),a=(0,i.Fl)((()=>{const t=!n.value&&e.horizontal;return{"list-group-flush":n.value,"list-group-horizontal":!0===t,[`list-group-horizontal-${t}`]:"string"==typeof t,"list-group-numbered":r.value}})),l=(0,i.Fl)((()=>!0===r.value?"ol":e.tag));return(0,i.JJ)(Id,{numbered:r.value}),(t,e)=>((0,i.wg)(),(0,i.j4)((0,i.LL)((0,o.SU)(l)),{class:(0,s.C_)(["list-group",(0,o.SU)(a)])},{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default")])),_:3},8,["class"]))}}),Ud=(0,i.aZ)({__name:"BListGroupItem",props:{action:{default:!1},active:{default:!1},button:{default:!1},disabled:{default:!1},href:null,tag:{default:"div"},target:{default:"_self"},to:null,variant:null},setup(t){const e=t,n=ya((0,o.Vh)(e,"action")),r=ya((0,o.Vh)(e,"active")),s=ya((0,o.Vh)(e,"button")),a=ya((0,o.Vh)(e,"disabled")),l=(0,i.l1)(),c=(0,i.f3)(Id,null),u=(0,i.Fl)((()=>!s.value&&(!!e.href||!!e.to))),d=(0,i.Fl)((()=>null!=c&&c.numbered?"li":s.value?"button":u.value?El:e.tag)),h=(0,i.Fl)((()=>{const t=n.value||u.value||s.value||["a","router-link","button","b-link"].includes(e.tag);return{[`list-group-item-${e.variant}`]:void 0!==e.variant,"list-group-item-action":t,active:r.value,disabled:a.value}})),f=(0,i.Fl)((()=>{const t={};return s.value&&((!l||!l.type)&&(t.type="button"),a.value&&(t.disabled=!0)),t}));return(e,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)((0,o.SU)(d)),(0,i.dG)({class:["list-group-item",(0,o.SU)(h)],"aria-current":!!(0,o.SU)(r)||null,"aria-disabled":!!(0,o.SU)(a)||null,target:(0,o.SU)(u)?t.target:null,href:(0,o.SU)(s)?null:t.href,to:(0,o.SU)(s)?null:t.to},(0,o.SU)(f)),{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default")])),_:3},16,["class","aria-current","aria-disabled","target","href","to"]))}}),Fd=["id"],Bd={inheritAttrs:!1},Vd=(0,i.aZ)({...Bd,__name:"BModal",props:{bodyBgVariant:null,bodyClass:null,bodyTextVariant:null,busy:{default:!1},lazy:{default:!1},buttonSize:{default:"md"},cancelDisabled:{default:!1},cancelTitle:{default:"Cancel"},cancelVariant:{default:"secondary"},centered:{default:!1},contentClass:null,dialogClass:null,footerBgVariant:null,footerBorderVariant:null,footerClass:null,footerTextVariant:null,fullscreen:{type:[Boolean,String],default:!1},headerBgVariant:null,headerBorderVariant:null,headerClass:null,headerCloseLabel:{default:"Close"},headerCloseWhite:{default:!1},headerTextVariant:null,hideBackdrop:{default:!1},hideFooter:{default:!1},hideHeader:{default:!1},hideHeaderClose:{default:!1},id:null,modalClass:null,modelValue:{default:!1},noCloseOnBackdrop:{default:!1},noCloseOnEsc:{default:!1},noFade:{default:!1},noFocus:{default:!1},okDisabled:{default:!1},okOnly:{default:!1},okTitle:{default:"Ok"},okVariant:{default:"primary"},scrollable:{default:!1},show:{default:!1},size:null,title:null,titleClass:null,titleSrOnly:{default:!1},titleTag:{default:"h5"}},emits:["update:modelValue","show","shown","hide","hidden","hide-prevented","ok","cancel"],setup(t,{emit:e}){const n=t,r=ya((0,o.Vh)(n,"busy")),l=ya((0,o.Vh)(n,"lazy")),c=ya((0,o.Vh)(n,"cancelDisabled")),u=ya((0,o.Vh)(n,"centered")),d=ya((0,o.Vh)(n,"headerCloseWhite")),h=ya((0,o.Vh)(n,"hideBackdrop")),f=ya((0,o.Vh)(n,"hideFooter")),p=ya((0,o.Vh)(n,"hideHeader")),m=ya((0,o.Vh)(n,"hideHeaderClose")),g=ya((0,o.Vh)(n,"modelValue")),v=ya((0,o.Vh)(n,"noCloseOnBackdrop")),y=ya((0,o.Vh)(n,"noCloseOnEsc")),b=ya((0,o.Vh)(n,"noFade")),_=ya((0,o.Vh)(n,"noFocus")),w=ya((0,o.Vh)(n,"okDisabled")),x=ya((0,o.Vh)(n,"okOnly")),S=ya((0,o.Vh)(n,"scrollable")),E=ya((0,o.Vh)(n,"show")),M=ya((0,o.Vh)(n,"titleSrOnly")),T=(0,o.iH)(!1),C=Pa((0,o.Vh)(n,"id"),"modal"),A=(0,o.iH)(),k=(0,o.iH)(),O=(0,i.Fl)((()=>[{fade:!b.value,show:E.value},n.modalClass])),R=(0,i.Fl)((()=>[{"modal-fullscreen":"boolean"==typeof n.fullscreen&&n.fullscreen,[`modal-fullscreen-${n.fullscreen}-down`]:"string"==typeof n.fullscreen&&n.fullscreen,[`modal-${n.size}`]:n.size,"modal-dialog-centered":u.value,"modal-dialog-scrollable":S.value},n.dialogClass])),P=(0,i.Fl)((()=>[{[`bg-${n.bodyBgVariant}`]:n.bodyBgVariant,[`text-${n.bodyTextVariant}`]:n.bodyTextVariant},n.bodyClass])),L=(0,i.Fl)((()=>[{[`bg-${n.headerBgVariant}`]:n.headerBgVariant,[`border-${n.headerBorderVariant}`]:n.headerBorderVariant,[`text-${n.headerTextVariant}`]:n.headerTextVariant},n.headerClass])),D=(0,i.Fl)((()=>[{[`bg-${n.footerBgVariant}`]:n.footerBgVariant,[`border-${n.footerBorderVariant}`]:n.footerBorderVariant,[`text-${n.footerTextVariant}`]:n.footerTextVariant},n.footerClass])),I=(0,i.Fl)((()=>[{["visually-hidden"]:M.value},n.titleClass])),N=(0,i.Fl)((()=>c.value||r.value)),U=(0,i.Fl)((()=>w.value||r.value));Sa(A,"shown.bs.modal",(t=>F(t))),Sa(A,"hidden.bs.modal",(t=>B(t))),Sa(A,"show.bs.modal",(t=>V(t))),Sa(A,"hide.bs.modal",(t=>z(t)));const F=t=>{e("shown",t),!0===l.value&&(T.value=!0),!1===g.value&&e("update:modelValue",!0),t.target.focus()},B=t=>{e("hidden",t),!0===l.value&&(T.value=!1),!0===g.value&&e("update:modelValue",!1);const n=document.querySelector(".modal");n&&n.focus()},V=t=>{e("show",t)},z=t=>{e("hide",t)},j=()=>{g.value&&e("update:modelValue",!0),W().show()},H=()=>{g.value&&e("update:modelValue",!1),W().hide()},W=()=>(void 0!==k.value||(k.value=new Fr(A.value,{backdrop:!1,keyboard:!y.value,focus:!_.value})),k.value);return(0,i.bv)((()=>{g.value&&W().show()})),(0,i.YP)((()=>n.noCloseOnBackdrop),(t=>{W()._config.backdrop=!n.hideBackdrop&&(t?"static":!n.hideBackdrop)})),(0,i.YP)((()=>n.noCloseOnEsc),(t=>{W()._config.keyboard=!t})),(0,i.YP)((()=>g.value),(t=>{(0,i.Y3)((()=>{t?j():H()}))})),(n,r)=>((0,i.wg)(),(0,i.j4)(i.lR,{to:"body"},[(0,i._)("div",(0,i.dG)({id:(0,o.SU)(C),ref_key:"element",ref:A,class:["modal",(0,o.SU)(O)],tabindex:"-1"},n.$attrs),[(0,i._)("div",{class:(0,s.C_)(["modal-dialog",(0,o.SU)(R)])},[!(0,o.SU)(l)||(0,o.SU)(l)&&T.value||(0,o.SU)(l)&&!0===(0,o.SU)(g)?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,s.C_)(["modal-content",t.contentClass])},[(0,o.SU)(p)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,s.C_)(["modal-header",(0,o.SU)(L)])},[((0,i.wg)(),(0,i.j4)((0,i.LL)(t.titleTag),{class:(0,s.C_)(["modal-title",(0,o.SU)(I)])},{default:(0,i.w5)((()=>[(0,i.WI)(n.$slots,"title",{},(()=>[(0,i.Uk)((0,s.zw)(t.title),1)]),!0)])),_:3},8,["class"])),(0,o.SU)(m)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[n.$slots["header-close"]?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button","data-bs-dismiss":"modal",onClick:r[0]||(r[0]=t=>H())},[(0,i.WI)(n.$slots,"header-close",{},void 0,!0)])):((0,i.wg)(),(0,i.j4)(dl,{key:1,type:"button","aria-label":t.headerCloseLabel,"data-bs-dismiss":"modal",white:(0,o.SU)(d),onClick:r[1]||(r[1]=t=>H())},null,8,["aria-label","white"]))],64))],2)),(0,i._)("div",{class:(0,s.C_)(["modal-body",(0,o.SU)(P)])},[(0,i.WI)(n.$slots,"default",{},void 0,!0)],2),(0,o.SU)(f)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",{key:1,class:(0,s.C_)(["modal-footer",(0,o.SU)(D)])},[(0,i.WI)(n.$slots,"footer",{},(()=>[(0,o.SU)(x)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(Vl,{key:0,type:"button",class:"btn",disabled:(0,o.SU)(N),size:t.buttonSize,variant:t.cancelVariant,onClick:r[2]||(r[2]=t=>(H(),e("cancel")))},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(t.cancelTitle),1)])),_:1},8,["disabled","size","variant"])),(0,i.Wm)(Vl,{type:"button",class:"btn",disabled:(0,o.SU)(U),size:t.buttonSize,variant:t.okVariant,onClick:r[3]||(r[3]=t=>(H(),e("ok")))},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(t.okTitle),1)])),_:1},8,["disabled","size","variant"])]),!0)],2))],2)):(0,i.kq)("",!0)],2),!1===(0,o.SU)(h)?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"modal-backdrop fade show",onClick:r[4]||(r[4]=(0,a.iM)((t=>!1===(0,o.SU)(v)&&H()),["prevent"]))})):(0,i.kq)("",!0)],16,Fd)]))}}),zd=xl(Vd,[["__scopeId","data-v-eba3f010"]]),jd=(0,i.aZ)({__name:"BNav",props:{align:null,cardHeader:{default:!1},fill:{default:!1},justified:{default:!1},pills:{default:!1},small:{default:!1},tabs:{default:!1},tag:{default:"ul"},vertical:{default:!1}},setup(t){const e=t,n=ya((0,o.Vh)(e,"cardHeader")),r=ya((0,o.Vh)(e,"fill")),a=ya((0,o.Vh)(e,"justified")),l=ya((0,o.Vh)(e,"pills")),c=ya((0,o.Vh)(e,"small")),u=ya((0,o.Vh)(e,"tabs")),d=ya((0,o.Vh)(e,"vertical")),h=(0,i.Fl)((()=>({"nav-tabs":u.value,"nav-pills":l.value&&!u.value,"card-header-tabs":!d.value&&n.value&&u.value,"card-header-pills":!d.value&&n.value&&l.value&&!u.value,"flex-column":d.value,"nav-fill":!d.value&&r.value,"nav-justified":!d.value&&a.value,[`justify-content-${e.align}`]:!d.value&&void 0!==e.align,small:c.value})));return(e,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(t.tag),{class:(0,s.C_)(["nav",(0,o.SU)(h)])},{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default")])),_:3},8,["class"]))}}),Hd=(0,i.aZ)({__name:"BNavForm",props:{role:null,id:null,floating:{default:!1},novalidate:{default:!1},validated:{default:!1}},emits:["submit"],setup(t,{emit:e}){const n=t,r=t=>e("submit",t),s=(0,i.Fl)((()=>({floating:n.floating,role:n.role,id:n.id,novalidate:n.novalidate,validated:n.validated})));return(t,e)=>((0,i.wg)(),(0,i.j4)(mu,(0,i.dG)((0,o.SU)(s),{class:"d-flex",onSubmit:(0,a.iM)(r,["prevent"])}),{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default")])),_:3},16,["onSubmit"]))}}),Wd=(0,i.aZ)({components:{BLink:El},props:{...vs(_l,["event","routerTag"])},setup(t){return{disabledBoolean:ya((0,o.Vh)(t,"disabled"))}}}),Gd={class:"nav-item"};function $d(t,e,n,r,o,s){const a=(0,i.up)("b-link");return(0,i.wg)(),(0,i.iD)("li",Gd,[(0,i.Wm)(a,(0,i.dG)({class:"nav-link"},t.$props,{tabindex:t.disabledBoolean?-1:void 0,"aria-disabled":!!t.disabledBoolean||void 0}),{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default")])),_:3},16,["tabindex","aria-disabled"])])}const qd=xl(Wd,[["render",$d]]),Yd={class:"nav-item dropdown"},Xd=(0,i.aZ)({__name:"BNavItemDropdown",props:{id:null,text:null,toggleClass:null,size:null,offset:null,autoClose:{type:[Boolean,String],default:!0},dark:{type:Boolean,default:!1},dropleft:{type:Boolean,default:!1},dropright:{type:Boolean,default:!1},dropup:{type:Boolean,default:!1},right:{type:Boolean,default:!1},left:{type:[Boolean,String],default:!1},split:{type:Boolean,default:!1},splitVariant:null,noCaret:{type:Boolean,default:!1},variant:{default:"link"}},setup(t){return(t,e)=>((0,i.wg)(),(0,i.iD)("li",Yd,[(0,i.Wm)(Gc,(0,i.dG)(t.$props,{"is-nav":""}),(0,i.Nv)({_:2},[(0,i.Ko)(t.$slots,((e,n)=>({name:n,fn:(0,i.w5)((e=>[(0,i.WI)(t.$slots,n,(0,s.vs)((0,i.F4)(e||{})))]))})))]),1040)]))}}),Zd={class:"navbar-text"},Kd=(0,i.aZ)({__name:"BNavText",props:{text:null},setup(t){return(e,n)=>((0,i.wg)(),(0,i.iD)("li",Zd,[(0,i.WI)(e.$slots,"default",{},(()=>[(0,i.Uk)((0,s.zw)(t.text),1)]))]))}}),Jd=(0,i.aZ)({__name:"BNavbar",props:{fixed:null,print:{default:!1},sticky:null,tag:{default:"nav"},toggleable:{type:[Boolean,String],default:!1},dark:{default:!1},variant:null,container:{type:[String,Boolean],default:"fluid"}},setup(t){const e=t,n=ya((0,o.Vh)(e,"print")),r=ya((0,o.Vh)(e,"dark")),a=(0,i.Fl)((()=>"nav"===e.tag?void 0:"navigation")),l=(0,i.Fl)((()=>"string"==typeof e.toggleable?`navbar-expand-${e.toggleable}`:!1===e.toggleable?"navbar-expand":void 0)),c=(0,i.Fl)((()=>!1===e.container?void 0:!0===e.container?"container":`container-${e.container}`)),u=(0,i.Fl)((()=>({"d-print":n.value,[`sticky-${e.sticky}`]:void 0!==e.sticky,"navbar-dark":r.value,[`bg-${e.variant}`]:void 0!==e.variant,[`fixed-${e.fixed}`]:void 0!==e.fixed,[`${l.value}`]:void 0!==l.value})));return(e,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(t.tag),{class:(0,s.C_)(["navbar",(0,o.SU)(u)]),role:(0,o.SU)(a)},{default:(0,i.w5)((()=>[!1!==t.container?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,s.C_)((0,o.SU)(c))},[(0,i.WI)(e.$slots,"default")],2)):(0,i.WI)(e.$slots,"default",{key:1})])),_:3},8,["class","role"]))}}),Qd=vs(_l,["event","routerTag"]),th=(0,i.aZ)({components:{BLink:El},props:{tag:{type:String,default:"div"},...Qd},setup(t){const e=(0,i.Fl)((()=>va(t))),n=(0,i.Fl)((()=>e.value?El:t.tag));return{props:e.value?ma(t,Qd):{},computedTag:n}}});function eh(t,e,n,r,o,s){return(0,i.wg)(),(0,i.j4)((0,i.LL)(t.computedTag),(0,i.dG)({class:"navbar-brand"},t.props),{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default")])),_:3},16)}const nh=xl(th,[["render",eh]]),rh=(0,i.aZ)({__name:"BNavbarNav",props:{align:null,fill:{default:!1},justified:{default:!1},small:{default:!1},tag:{default:"ul"}},setup(t){const e=t,n=ya((0,o.Vh)(e,"fill")),r=ya((0,o.Vh)(e,"justified")),a=ya((0,o.Vh)(e,"small")),l=(0,i.Fl)((()=>({"nav-fill":n.value,"nav-justified":r.value,[`justify-content-${e.align}`]:void 0!==e.align,small:a.value})));return(t,e)=>((0,i.wg)(),(0,i.iD)("ul",{class:(0,s.C_)(["navbar-nav",(0,o.SU)(l)])},[(0,i.WI)(t.$slots,"default")],2))}}),ih=(0,i._)("span",{class:"navbar-toggler-icon"},null,-1),oh=(0,i.aZ)({__name:"BNavbarToggle",props:{disabled:{default:!1},label:{default:"Toggle navigation"},target:null},emits:["click"],setup(t,{emit:e}){const n=t,r=ya((0,o.Vh)(n,"disabled")),s=(0,i.Fl)((()=>({disabled:r.value,"aria-label":n.label}))),a=(0,i.Fl)((()=>({disabled:r.value}))),l=t=>{r.value||e("click",t)};return(e,n)=>(0,i.wy)(((0,i.wg)(),(0,i.iD)("button",(0,i.dG)({class:["navbar-toggler",(0,o.SU)(a)],type:"button"},(0,o.SU)(s),{onClick:l}),[(0,i.WI)(e.$slots,"default",{},(()=>[ih]))],16)),[[(0,o.SU)($a),(0,o.SU)(r)?void 0:t.target]])}}),sh=["data-bs-backdrop","data-bs-scroll"],ah={key:0,class:"offcanvas-header"},lh={id:"offcanvasLabel",class:"offcanvas-title"},ch={class:"offcanvas-body"},uh={key:1},dh=(0,i.aZ)({__name:"BOffcanvas",props:{dismissLabel:{default:"Close"},modelValue:{default:!1},bodyScrolling:{default:!1},backdrop:{default:!0},placement:{default:"start"},title:null,noHeaderClose:{default:!1},noHeader:{default:!1}},emits:["update:modelValue","show","shown","hide","hidden"],setup(t,{emit:e}){const n=t,r=ya((0,o.Vh)(n,"modelValue")),a=ya((0,o.Vh)(n,"bodyScrolling")),l=ya((0,o.Vh)(n,"backdrop")),c=ya((0,o.Vh)(n,"noHeaderClose")),u=ya((0,o.Vh)(n,"noHeader")),d=(0,o.iH)(),h=(0,o.iH)();Sa(d,"shown.bs.offcanvas",(()=>e("shown"))),Sa(d,"hidden.bs.offcanvas",(()=>e("hidden")));const f=()=>{e("show"),e("update:modelValue",!0)},p=()=>{e("hide"),e("update:modelValue",!1)};Sa(d,"show.bs.offcanvas",(()=>{f()})),Sa(d,"hide.bs.offcanvas",(()=>{p()})),(0,i.bv)((()=>{var t;h.value=new ai(d.value),r.value&&(null==(t=h.value)||t.show(d.value))}));const m=(0,i.Fl)((()=>({[`offcanvas-${n.placement}`]:!!n.placement})));return(0,i.YP)((()=>r.value),(t=>{var e,n;t?null==(e=h.value)||e.show(d.value):null==(n=h.value)||n.hide()})),(e,n)=>((0,i.wg)(),(0,i.iD)("div",{ref_key:"element",ref:d,class:(0,s.C_)(["offcanvas",(0,o.SU)(m)]),tabindex:"-1","aria-labelledby":"offcanvasLabel","data-bs-backdrop":(0,o.SU)(l),"data-bs-scroll":(0,o.SU)(a)},[(0,o.SU)(u)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",ah,[(0,i.WI)(e.$slots,"header",(0,s.vs)((0,i.F4)({visible:t.modelValue,placement:t.placement,hide:p})),(()=>[(0,i._)("h5",lh,[(0,i.WI)(e.$slots,"title",{},(()=>[(0,i.Uk)((0,s.zw)(t.title),1)]))]),(0,o.SU)(c)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(dl,{key:0,type:"button",class:"text-reset","data-bs-dismiss":"offcanvas","aria-label":t.dismissLabel},null,8,["aria-label"]))]))])),(0,i._)("div",ch,[(0,i.WI)(e.$slots,"default")]),e.$slots.footer?((0,i.wg)(),(0,i.iD)("div",uh,[(0,i.WI)(e.$slots,"footer",(0,s.vs)((0,i.F4)({visible:t.modelValue,placement:t.placement,hide:p})))])):(0,i.kq)("",!0)],10,sh))}}),hh={top:0,left:0,bottom:0,right:0},fh="default",ph="overlay",mh=(0,i.aZ)({components:{BTransition:Ac},props:{bgColor:{type:String,required:!1},blur:{type:String,default:"2px"},fixed:{type:[Boolean,String],default:!1},noCenter:{type:[Boolean,String],default:!1},noFade:{type:[Boolean,String],default:!1},noWrap:{type:[Boolean,String],default:!1},opacity:{type:[Number,String],default:.85,validator:t=>{const e=fa(t,0);return e>=0&&e<=1}},overlayTag:{type:String,default:"div"},rounded:{type:[Boolean,String],default:!1},show:{type:[Boolean,String],default:!1},spinnerSmall:{type:[Boolean,String],default:!1},spinnerType:{type:String,default:"border"},spinnerVariant:{type:String,required:!1},variant:{type:String,default:"light"},wrapTag:{type:String,default:"div"},zIndex:{type:[Number,String],default:10}},emits:["click","hidden","shown"],setup(t,{slots:e,emit:n}){const r=ya((0,o.Vh)(t,"fixed")),s=ya((0,o.Vh)(t,"noCenter")),a=ya((0,o.Vh)(t,"noFade")),l=ya((0,o.Vh)(t,"noWrap")),c=ya((0,o.Vh)(t,"show")),u=ya((0,o.Vh)(t,"spinnerSmall")),d=(0,i.Fl)((()=>!0===t.rounded||""===t.rounded?"rounded":t.rounded?`rounded-${t.rounded}`:"")),h=(0,i.Fl)((()=>t.variant&&!t.bgColor?`bg-${t.variant}`:"")),f=(0,i.Fl)((()=>({spinnerType:t.spinnerType||null,spinnerVariant:t.spinnerVariant||null,spinnerSmall:u.value})));return()=>{const o=t=>(0,i.h)((0,i.up)("BSpinner"),{type:t.spinnerType,variant:t.spinnerVariant,small:u.value});let p="";if(c.value){const a=(0,i.h)("div",{class:["position-absolute",h.value,d.value],style:{...hh,opacity:t.opacity,backgroundColor:t.bgColor||null,backdropFilter:t.blur?`blur(${t.blur})`:null}}),c=(0,i.h)("div",{class:"position-absolute",style:s.value?{...hh}:{top:"50%",left:"50%",transform:"translateX(-50%) translateY(-50%)"}},ua(ph,f.value,e)||o(f.value)||"");p=(0,i.h)(t.overlayTag,{class:["b-overlay",{"position-absolute":!l.value||l.value&&!r.value,"position-fixed":l.value&&r.value}],style:{...hh,zIndex:t.zIndex||10},onClick:t=>n("click",t),key:"overlay"},[a,c])}const m=()=>(0,i.h)(Ac,{noFade:a.value,transProps:{enterToClass:"show"},name:"fade",onAfterEnter:()=>n("shown"),onAfterLeave:()=>n("hidden")},{default:()=>p});return l.value?m():(0,i.h)(t.wrapTag,{class:["b-overlay-wrap position-relative"],"aria-busy":c.value?"true":null},[(0,i.h)("span",ua(fh,{},e)),m()])}}}),gh=5,vh=20,yh=0,bh=3,_h="ellipsis-text",wh="first-text",xh="last-text",Sh="next-text",Eh="page",Mh="prev-text",Th=t=>Math.max(da(t)||vh,1),Ch=t=>Math.max(da(t)||yh,0),Ah=(t,e)=>{const n=da(t)||1;return n>e?e:n<1?1:n},kh=(0,i.aZ)({name:"BPagination",props:{align:{type:String,default:"start"},ariaControls:{type:String,required:!1},ariaLabel:{type:String,default:"Pagination"},disabled:{type:[Boolean,String],default:!1},ellipsisClass:{type:[Array,String],default:()=>[]},ellipsisText:{type:String,default:"…"},firstClass:{type:[Array,String],default:()=>[]},firstNumber:{type:[Boolean,String],default:!1},firstText:{type:String,default:"«"},hideEllipsis:{type:[Boolean,String],default:!1},hideGotoEndButtons:{type:[Boolean,String],default:!1},labelFirstPage:{type:String,default:"Go to first page"},labelLastPage:{type:String,default:"Go to last page"},labelNextPage:{type:String,default:"Go to next page"},labelPage:{type:String,default:"Go to page"},labelPrevPage:{type:String,default:"Go to previous page"},lastClass:{type:[Array,String],default:()=>[]},lastNumber:{type:[Boolean,String],default:!1},lastText:{type:String,default:"»"},limit:{type:Number,default:gh},modelValue:{type:Number,default:1},nextClass:{type:[Array,String],default:()=>[]},nextText:{type:String,default:"›"},pageClass:{type:[Array,String],default:()=>[]},perPage:{type:Number,default:vh},pills:{type:[Boolean,String],default:!1},prevClass:{type:[Array,String],default:()=>[]},prevText:{type:String,default:"‹"},size:{type:String,required:!1},totalRows:{type:Number,default:yh}},emits:["update:modelValue","page-click"],setup(t,{emit:e,slots:n}){const r=ya((0,o.Vh)(t,"disabled")),s=ya((0,o.Vh)(t,"firstNumber")),a=ya((0,o.Vh)(t,"hideEllipsis")),l=ya((0,o.Vh)(t,"hideGotoEndButtons")),c=ya((0,o.Vh)(t,"lastNumber")),u=ya((0,o.Vh)(t,"pills")),d=gs((0,o.Vh)(t,"align")),h=(0,i.Fl)((()=>Math.ceil(Ch(t.totalRows)/Th(t.perPage)))),f=(0,i.Fl)((()=>{let e;return e=h.value-t.modelValue+2<t.limit&&t.limit>bh?h.value-m.value+1:t.modelValue-Math.floor(m.value/2),e<1?e=1:e>h.value-m.value&&(e=h.value-m.value+1),t.limit<=bh&&c.value&&h.value===e+m.value-1&&(e=Math.max(e-1,1)),e})),p=(0,i.Fl)((()=>{const e=h.value-t.modelValue;let n=!1;return e+2<t.limit&&t.limit>bh?t.limit>bh&&(n=!0):t.limit>bh&&(n=!(a.value&&!s.value)),f.value<=1&&(n=!1),n&&s.value&&f.value<4&&(n=!1),n})),m=(0,i.Fl)((()=>{let e=t.limit;return h.value<=t.limit?e=h.value:t.modelValue<t.limit-1&&t.limit>bh?((!a.value||c.value)&&(e=t.limit-(s.value?0:1)),e=Math.min(e,t.limit)):h.value-t.modelValue+2<t.limit&&t.limit>bh?(!a.value||s.value)&&(e=t.limit-(c.value?0:1)):t.limit>bh&&(e=t.limit-(a.value?0:2)),e})),g=(0,i.Fl)((()=>{const e=h.value-m.value;let n=!1;t.modelValue<t.limit-1&&t.limit>bh?(!a.value||c.value)&&(n=!0):t.limit>bh&&(n=!(a.value&&!c.value)),f.value>e&&(n=!1);const r=f.value+m.value-1;return n&&c.value&&r>h.value-3&&(n=!1),n})),v=(0,o.qj)({pageSize:Th(t.perPage),totalRows:Ch(t.totalRows),numberOfPages:h.value}),y=(n,r)=>{if(r===t.modelValue)return;const{target:i}=n,o=new ws("page-click",{cancelable:!0,vueTarget:this,target:i});e("page-click",o,r),!o.defaultPrevented&&e("update:modelValue",r)},b=(0,i.Fl)((()=>t.size?`pagination-${t.size}`:"")),_=(0,i.Fl)((()=>u.value?"b-pagination-pills":""));(0,i.YP)((()=>t.modelValue),(n=>{const r=Ah(n,h.value);r!==t.modelValue&&e("update:modelValue",r)})),(0,i.YP)(v,((n,r)=>{null!=n&&(r.pageSize!==n.pageSize&&r.totalRows===n.totalRows||r.numberOfPages!==n.numberOfPages&&t.modelValue>r.numberOfPages)&&e("update:modelValue",1)}));const w=(0,i.Fl)((()=>{const t=[];for(let e=0;e<m.value;e++)t.push({number:f.value+e,classes:null});return t}));return()=>{const e=[],o=w.value.map((t=>t.number)),a=e=>e===t.modelValue,u=t.modelValue<1,f="fill"===t.align,m=(e,o,s,l,c,d)=>{const p=r.value||a(d)||u||e<1||e>h.value,m=e<1?1:e>h.value?h.value:e,g={disabled:p,page:m,index:m-1},v=ua(s,g,n)||l||"";return(0,i.h)("li",{class:["page-item",{disabled:p,"flex-fill":f,"d-flex":f&&!p},c]},(0,i.h)(p?"span":"button",{class:["page-link",{"flex-grow-1":!p&&f}],"aria-label":o,"aria-controls":t.ariaControls||null,"aria-disabled":p?"true":null,role:"menuitem",type:p?null:"button",tabindex:p?null:"-1",onClick:t=>{p||y(t,m)}},v))},v=e=>(0,i.h)("li",{class:["page-item","disabled","bv-d-xs-down-none",f?"flex-fill":"",t.ellipsisClass],role:"separator",key:"ellipsis-"+(e?"last":"first")},[(0,i.h)("span",{class:["page-link"]},ua(_h,{},n)||t.ellipsisText||"...")]),x=(e,o)=>{const s=a(e.number)&&!u,l=r.value?null:s||u&&0===o?"0":"-1",c={active:s,disabled:r.value,page:e.number,index:e.number-1,content:e.number},d=ua(Eh,c,n)||e.number,h=(0,i.h)(r.value?"span":"button",{class:["page-link",{"flex-grow-1":!r.value&&f}],"aria-controls":t.ariaControls||null,"aria-disabled":r.value?"true":null,"aria-label":t.labelPage?`${t.labelPage} ${e.number}`:null,role:"menuitemradio",type:r.value?null:"button",tabindex:l,onClick:t=>{r.value||y(t,e.number)}},d);return(0,i.h)("li",{class:["page-item",{disabled:r.value,active:s,"flex-fill":f,"d-flex":f&&!r.value},t.pageClass],role:"presentation",key:`page-${e.number}`},h)};if(!l.value&&!s.value){const n=m(1,t.labelFirstPage,wh,t.firstText,t.firstClass,1);e.push(n)}const S=m(t.modelValue-1,t.labelFirstPage,Mh,t.prevText,t.prevClass,1);e.push(S),s.value&&1!==o[0]&&e.push(x({number:1},0)),p.value&&e.push(v(!1)),w.value.forEach(((t,n)=>{const r=p.value&&s.value&&1!==o[0]?1:0;e.push(x(t,n+r))})),g.value&&e.push(v(!0)),c.value&&o[o.length-1]!==h.value&&e.push(x({number:h.value},-1));const E=m(t.modelValue+1,t.labelNextPage,Sh,t.nextText,t.nextClass,h.value);if(e.push(E),!c.value&&!l.value){const n=m(h.value,t.labelLastPage,xh,t.lastText,t.lastClass,h.value);e.push(n)}return(0,i.h)("ul",{class:["pagination",b.value,d.value,_.value],role:"menubar","aria-disabled":r.value,"aria-label":t.ariaLabel||null},e)}}}),Oh=(0,i.aZ)({props:{container:{type:[String,Object],default:"body"},content:{type:String},id:{type:String},customClass:{type:String,default:""},noninteractive:{type:[Boolean,String],default:!1},placement:{type:String,default:"right"},target:{type:[String,Object],default:void 0},title:{type:String},delay:{type:[Number,Object],default:0},triggers:{type:String,default:"click"},show:{type:[Boolean,String],default:!1},variant:{type:String,default:void 0},html:{type:[Boolean,String],default:!0},sanitize:{type:[Boolean,String],default:!1},offset:{type:String,default:"0"}},emits:["show","shown","hide","hidden","inserted"],setup(t,{emit:e,slots:n}){ya((0,o.Vh)(t,"noninteractive"));const r=ya((0,o.Vh)(t,"show")),s=ya((0,o.Vh)(t,"html")),a=ya((0,o.Vh)(t,"sanitize")),l=(0,o.iH)(),c=(0,o.iH)(),u=(0,o.iH)(),d=(0,o.iH)(),h=(0,o.iH)(),f=(0,i.Fl)((()=>({[`b-popover-${t.variant}`]:void 0!==t.variant}))),p=t=>"string"==typeof t||t instanceof HTMLElement?t:typeof t<"u"?t.$el:void 0,m=t=>{if(t){if("string"==typeof t){const e=document.getElementById(t);return e||void 0}return t}},g=e=>{c.value=m(p(e)),c.value&&(u.value=new Ki(c.value,{customClass:t.customClass,container:p(t.container),trigger:t.triggers,placement:t.placement,title:t.title||n.title?d.value:"",content:h.value,html:s.value,delay:t.delay,sanitize:a.value,offset:t.offset}))};return(0,i.bv)((()=>{var e,n,o;(0,i.Y3)((()=>{g(t.target)})),null==(n=null==(e=l.value)?void 0:e.parentNode)||n.removeChild(l.value),r.value&&(null==(o=u.value)||o.show())})),(0,i.Jd)((()=>{var t;null==(t=u.value)||t.dispose()})),(0,i.YP)((()=>t.target),(t=>{var e;null==(e=u.value)||e.dispose(),g(t)})),(0,i.YP)((()=>r.value),((t,e)=>{var n,r;t!==e&&(t?null==(n=u.value)||n.show():null==(r=u.value)||r.hide())})),Sa(c,"show.bs.popover",(()=>e("show"))),Sa(c,"shown.bs.popover",(()=>e("shown"))),Sa(c,"hide.bs.popover",(()=>e("hide"))),Sa(c,"hidden.bs.popover",(()=>e("hidden"))),Sa(c,"inserted.bs.popover",(()=>e("inserted"))),{element:l,titleRef:d,contentRef:h,classes:f}}}),Rh=["id"],Ph={ref:"titleRef"},Lh={ref:"contentRef"};function Dh(t,e,n,r,o,a){return(0,i.wg)(),(0,i.iD)("div",{id:t.id,ref:"element",class:(0,s.C_)(["popover b-popover",t.classes]),role:"tooltip",tabindex:"-1"},[(0,i._)("div",Ph,[(0,i.WI)(t.$slots,"title",{},(()=>[(0,i.Uk)((0,s.zw)(t.title),1)]))],512),(0,i._)("div",Lh,[(0,i.WI)(t.$slots,"default",{},(()=>[(0,i.Uk)((0,s.zw)(t.content),1)]))],512)],10,Rh)}const Ih=xl(Oh,[["render",Dh]]),Nh=(0,i.aZ)({props:{animated:{type:[Boolean,String],default:!1},label:{type:String},labelHtml:{type:String},max:{type:[Number,String]},precision:{type:[Number,String],default:0},showProgress:{type:[Boolean,String],default:!1},showValue:{type:[Boolean,String],default:!1},striped:{type:[Boolean,String],default:!1},value:{type:[Number,String],default:0},variant:{type:String}},setup(t,{slots:e}){const n=ya((0,o.Vh)(t,"animated")),r=ya((0,o.Vh)(t,"showProgress")),s=ya((0,o.Vh)(t,"showValue")),a=ya((0,o.Vh)(t,"striped")),l=(0,i.f3)(Uh),c=(0,i.Fl)((()=>({"progress-bar-animated":n.value||(null==l?void 0:l.animated),"progress-bar-striped":a.value||(null==l?void 0:l.striped)||n.value||(null==l?void 0:l.animated),[`bg-${t.variant}`]:void 0!==t.variant}))),u=(0,i.Fl)((()=>{if(s.value||(null==l?void 0:l.showValue))return parseFloat(t.value).toFixed(t.precision);if(r.value||(null==l?void 0:l.showProgress)){const e=(100*t.value/parseInt(t.max||100)).toString();return parseFloat(e).toFixed(t.precision)}return t.label||""})),d=(0,i.Fl)((()=>t.max||(null==l?void 0:l.max)?100*t.value/parseInt(t.max||(null==l?void 0:l.max))+"%":"string"==typeof t.value?t.value:`${t.value}%`)),h=(0,i.Fl)((()=>{const e={class:["progress-bar",c.value],role:"progressbar","aria-valuenow":t.value,"aria-valuemin":0,"aria-valuemax":t.max,style:{width:d.value}};return t.labelHtml?{...e,innerHTML:t.labelHtml}:e}));return()=>{var t;return(0,i.h)("div",h.value,(null==(t=e.default)?void 0:t.call(e))||u.value)}}}),Uh=Symbol(),Fh=(0,i.aZ)({__name:"BProgress",props:{variant:null,max:null,height:null,animated:{default:!1},precision:{default:0},showProgress:{default:!1},showValue:{default:!1},striped:{default:!1},value:{default:0}},setup(t){const e=t,n=ya((0,o.Vh)(e,"animated")),r=ya((0,o.Vh)(e,"showProgress")),a=ya((0,o.Vh)(e,"showValue")),l=ya((0,o.Vh)(e,"striped")),c=(0,i.Fl)((()=>({animated:n.value,max:e.max,precision:e.precision,showProgress:r.value,showValue:a.value,striped:l.value,value:e.value,variant:e.variant})));return(0,i.JJ)(Uh,{animated:n.value,max:e.max,showProgress:r.value,showValue:a.value,striped:l.value}),(e,n)=>((0,i.wg)(),(0,i.iD)("div",{class:"progress",style:(0,s.j5)({height:t.height})},[(0,i.WI)(e.$slots,"default",{},(()=>[(0,i.Wm)(Nh,(0,s.vs)((0,i.F4)((0,o.SU)(c))),null,16)]))],4))}}),Bh=ia("cols",[""],{type:[String,Number],default:null}),Vh=(0,i.aZ)({name:"BRow",props:{tag:{type:String,default:"div"},gutterX:{type:String,default:null},gutterY:{type:String,default:null},noGutters:{type:[Boolean,String],default:!1},alignV:{type:String,default:null},alignH:{type:String,default:null},alignContent:{type:String,default:null},...Bh},setup(t){const e=ya((0,o.Vh)(t,"noGutters")),n=oa(t,Bh,"cols","row-cols");return{classes:(0,i.Fl)((()=>({[`gx-${t.gutterX}`]:null!==t.gutterX,[`gy-${t.gutterY}`]:null!==t.gutterY,"g-0":e.value,[`align-items-${t.alignV}`]:null!==t.alignV,[`justify-content-${t.alignH}`]:null!==t.alignH,[`align-content-${t.alignContent}`]:null!==t.alignContent}))),rowColsClasses:n}}});function zh(t,e,n,r,o,a){return(0,i.wg)(),(0,i.j4)((0,i.LL)(t.tag),{class:(0,s.C_)(["row",[t.classes,t.rowColsClasses]])},{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default")])),_:3},8,["class"])}const jh=xl(Vh,[["render",zh]]),Hh=(0,i.aZ)({__name:"BSkeleton",props:{height:null,width:null,size:null,animation:{default:"wave"},type:{default:"text"},variant:null},setup(t){const e=t,n=(0,i.Fl)((()=>[`b-skeleton-${e.type}`,{[`b-skeleton-animate-${e.animation}`]:"boolean"!=typeof e.animation&&e.animation,[`bg-${e.variant}`]:void 0!==e.variant}])),r=(0,i.Fl)((()=>({width:e.size||e.width,height:e.size||e.height})));return(t,e)=>((0,i.wg)(),(0,i.iD)("div",{class:(0,s.C_)(["b-skeleton",(0,o.SU)(n)]),style:(0,s.j5)((0,o.SU)(r))},null,6))}}),Wh=(0,i.aZ)({__name:"BSkeletonIcon",props:{animation:{default:"wave"}},setup(t){const e=t,n=(0,i.Fl)((()=>[`b-skeleton-animate-${e.animation}`]));return(t,e)=>((0,i.wg)(),(0,i.iD)("div",{class:(0,s.C_)(["b-skeleton-icon-wrapper position-relative d-inline-block overflow-hidden",(0,o.SU)(n)])},[(0,i.WI)(t.$slots,"default")],2))}}),Gh=(0,i.aZ)({__name:"BTableSimple",props:{bordered:{default:!1},borderless:{default:!1},borderVariant:null,captionTop:{default:!1},dark:{default:!1},hover:{default:!1},responsive:{type:[Boolean,String],default:!1},stacked:{type:[Boolean,String],default:!1},striped:{default:!1},small:{default:!1},tableClass:null,tableVariant:null,stickyHeader:{default:!1}},setup(t){const e=t,n=ya((0,o.Vh)(e,"captionTop")),r=ya((0,o.Vh)(e,"borderless")),a=ya((0,o.Vh)(e,"bordered")),l=ya((0,o.Vh)(e,"dark")),c=ya((0,o.Vh)(e,"hover")),u=ya((0,o.Vh)(e,"small")),d=ya((0,o.Vh)(e,"striped")),h=ya((0,o.Vh)(e,"stickyHeader")),f=(0,i.Fl)((()=>["table","b-table",{"table-bordered":a.value,"table-borderless":r.value,[`border-${e.borderVariant}`]:void 0!==e.borderVariant,"caption-top":n.value,"table-dark":l.value,"table-hover":c.value,"b-table-stacked":"boolean"==typeof e.stacked&&e.stacked,[`b-table-stacked-${e.stacked}`]:"string"==typeof e.stacked,"table-striped":d.value,"table-sm":u.value,[`table-${e.tableVariant}`]:void 0!==e.tableVariant},e.tableClass])),p=(0,i.Fl)((()=>[{"table-responsive":!0===e.responsive,[`table-responsive-${e.responsive}`]:"string"==typeof e.responsive,"b-table-sticky-header":h.value}]));return(e,n)=>t.responsive?((0,i.wg)(),(0,i.iD)("div",{key:1,class:(0,s.C_)((0,o.SU)(p))},[(0,i._)("table",{role:"table",class:(0,s.C_)((0,o.SU)(f))},[(0,i.WI)(e.$slots,"default")],2)],2)):((0,i.wg)(),(0,i.iD)("table",{key:0,role:"table",class:(0,s.C_)((0,o.SU)(f))},[(0,i.WI)(e.$slots,"default")],2))}}),$h={key:0},qh={key:1},Yh=(0,i.aZ)({__name:"BSkeletonTable",props:{animation:{default:"wave"},columns:{default:5},hideHeader:{default:!1},rows:{default:3},showFooter:{default:!1},tableProps:null},setup(t){const e=t,n=ya((0,o.Vh)(e,"hideHeader")),r=ya((0,o.Vh)(e,"showFooter"));return(e,a)=>((0,i.wg)(),(0,i.j4)(Gh,(0,s.vs)((0,i.F4)(t.tableProps)),{default:(0,i.w5)((()=>[(0,o.SU)(n)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("thead",$h,[(0,i._)("tr",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.columns,((t,e)=>((0,i.wg)(),(0,i.iD)("th",{key:e},[(0,i.Wm)(Hh)])))),128))])])),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.rows,((e,n)=>((0,i.wg)(),(0,i.iD)("tr",{key:n},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.columns,((t,e)=>((0,i.wg)(),(0,i.iD)("td",{key:e},[(0,i.Wm)(Hh,{width:"75%"})])))),128))])))),128))]),(0,o.SU)(r)?((0,i.wg)(),(0,i.iD)("tfoot",qh,[(0,i._)("tr",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.columns,((t,e)=>((0,i.wg)(),(0,i.iD)("th",{key:e},[(0,i.Wm)(Hh)])))),128))])])):(0,i.kq)("",!0)])),_:1},16))}}),Xh=(0,i.aZ)({__name:"BSkeletonWrapper",props:{loading:{default:!1}},setup(t){const e=ya((0,o.Vh)(t,"loading"));return(t,n)=>(0,o.SU)(e)?(0,i.WI)(t.$slots,"loading",{key:0}):(0,i.WI)(t.$slots,"default",{key:1})}}),Zh=()=>{const t=(t,e)=>{const n=[];return null!=t&&t.length||!(null==e?void 0:e.length)?(Array.isArray(t)&&t.forEach((t=>{"string"==typeof t?n.push({key:t,label:Ls(t)}):xs(t)&&t.key&&"string"==typeof t.key&&n.push({...t})})),n):(Object.keys(e[0]).forEach((t=>n.push({key:t,label:Ls(t)}))),n)},e=(0,o.iH)([]),n=(t,n,o,a)=>{if(e.value=bs(n),"isFilterableTable"in a&&!0===a.isFilterableTable.value&&o.filter&&(e.value=s(e.value,o.filter,o.filterable),r.value&&r.value(e.value)),"isSortable"in a&&!0===a.isSortable.value&&(e.value=i(t,e.value,{key:o.sortBy,desc:a.sortDescBoolean.value})),void 0!==o.perPage){const t=(o.currentPage-1)*o.perPage;e.value=e.value.splice(t,o.perPage)}return e.value},r=(0,o.iH)(void 0),i=(t,e,n)=>{if(!n||!n.key)return e;const r=n.key;return e.sort(((t,e)=>{const i=t=>"object"==typeof t?JSON.stringify(t):t;return i(t[r])>i(e[r])?n.desc?-1:1:i(e[r])>i(t[r])?n.desc?1:-1:0}))},s=(t,e,n)=>t.filter((t=>Object.entries(t).filter((t=>{const[r,i]=t;return!("_"===r[0]||n.length>0&&!n.includes(r))&&("object"==typeof i?JSON.stringify(Object.values(i)):"string"==typeof i?i:i.toString()).toLowerCase().includes(e.toLowerCase())})).length>0));return{normaliseFields:t,mapItems:n,internalItems:e,updateInternalItems:async t=>{try{return e.value=await _s(t),e.value}catch{return}},filterEvent:r}},Kh=["title","abbr","onClick"],Jh={class:"d-inline-flex flex-nowrap align-items-center gap-1"},Qh={key:0,class:"b-table-sort-icon text-muted small"},tf={key:1},ef=["onClick","onDblclick","onMouseenter","onMouseleave"],nf=["colspan"],rf=["colspan"],of={class:"d-flex align-items-center justify-content-center gap-2"},sf=(0,i._)("strong",null,"Loading...",-1),af={key:1,class:"b-table-empty-slot"},lf=["colspan"],cf={key:0},uf=["title","abbr","onClick"],df={key:1},hf={key:2},ff={key:3},pf=(0,i.aZ)({__name:"BTable",props:{align:null,caption:null,captionTop:{default:!1},borderless:{default:!1},bordered:{default:!1},borderVariant:null,dark:{default:!1},fields:{default:()=>[]},footClone:{default:!1},hover:{default:!1},items:{default:()=>[]},provider:null,noProvider:null,noProviderPaging:null,noProviderSorting:null,noProviderFiltering:null,responsive:{type:[Boolean,String],default:!1},small:{default:!1},striped:{default:!1},variant:null,sortBy:null,sortDesc:{default:!1},sortInternal:{default:!0},selectable:{default:!1},stickySelect:{default:!1},selectHead:{type:[Boolean,String],default:!0},selectMode:{default:"single"},selectionVariant:{default:"primary"},stickyHeader:{default:!1},busy:{default:!1},showEmpty:{default:!1},perPage:null,currentPage:{default:1},filter:null,filterable:null,emptyText:{default:"There are no records to show"},emptyFilteredText:{default:"There are no records matching your request"}},emits:["headClicked","rowClicked","rowDblClicked","rowHovered","rowUnhovered","rowSelected","rowUnselected","selection","update:busy","update:sortBy","update:sortDesc","sorted","filtered"],setup(t,{expose:e,emit:n}){const r=t,a=ya((0,o.Vh)(r,"footClone")),l=ya((0,o.Vh)(r,"sortDesc")),c=ya((0,o.Vh)(r,"sortInternal")),u=ya((0,o.Vh)(r,"selectable")),d=ya((0,o.Vh)(r,"stickySelect")),h=ya((0,o.Vh)(r,"busy")),f=ya((0,o.Vh)(r,"showEmpty")),p=ya((0,o.Vh)(r,"showEmpty")),m=ya((0,o.Vh)(r,"showEmpty")),g=ya((0,o.Vh)(r,"showEmpty")),v=(0,o.iH)(h.value),y=(0,i.Rr)(),b=(0,i.Fl)((()=>({[`align-${r.align}`]:void 0!==r.align,"b-table-selectable":u.value,[`b-table-select-${r.selectMode}`]:u.value,"b-table-selecting user-select-none":u.value&&F.value,"b-table-busy":v.value,"b-table-sortable":I.value,"b-table-sort-desc":I.value&&!0===l.value,"b-table-sort-asc":I.value&&!1===l.value}))),_=(0,i.Fl)((()=>({bordered:r.bordered,borderless:r.borderless,borderVariant:r.borderVariant,captionTop:r.captionTop,dark:r.dark,hover:r.hover,responsive:r.responsive,striped:r.striped,small:r.small,tableClass:b.value,tableVariant:r.variant,stickyHeader:r.stickyHeader}))),w=Zh();w.filterEvent.value=async t=>{if(M.value)return void await z();const e=await _s(t);n("filtered",e)};const x=(0,i.Fl)((()=>w.normaliseFields(r.fields,r.items))),S=(0,i.Fl)((()=>x.value.length+(u.value?1:0))),E=(0,i.Fl)((()=>void 0!==r.filter&&""!==r.filter)),M=(0,i.Fl)((()=>void 0!==r.provider)),T=(0,i.Fl)((()=>I.value&&!0===c.value)),C=(0,i.Fl)((()=>M.value?w.internalItems.value:T.value?w.mapItems(r.fields,r.items,r,{isSortable:I,isFilterableTable:E,sortDescBoolean:l}):r.items)),A=t=>"string"==typeof t?Ds(t):void 0!==t.label?t.label:"string"==typeof t.key?Ds(t.key):t.key,k=(t,e,r=!1)=>{const i="string"==typeof t?t:t.key;n("headClicked",i,t,e,r),N(t)},O=(t,e,r)=>{n("rowClicked",t,e,r),V(t,e,r.shiftKey)},R=(t,e,r)=>n("rowDblClicked",t,e,r),P=(t,e,r)=>n("rowHovered",t,e,r),L=(t,e,r)=>n("rowUnhovered",t,e,r),D=(0,i.Fl)((()=>u.value&&(!!r.selectHead||void 0!==y.selectHead))),I=(0,i.Fl)((()=>r.fields.filter((t=>"string"!=typeof t&&t.sortable)).length>0)),N=t=>{if(!I.value)return;const e="string"==typeof t?t:t.key,i="string"!=typeof t&&t.sortable;if(!0===I.value&&!0===i){const t=!l.value;e!==r.sortBy&&n("update:sortBy",e),n("update:sortDesc",t),n("sorted",e,t)}},U=(0,o.iH)(new Set([])),F=(0,i.Fl)((()=>U.value.size>0)),B=()=>{!u.value||n("selection",Array.from(U.value))},V=(t,e,i=!1)=>{if(u.value){if(U.value.has(t))U.value.delete(t),n("rowUnselected",t);else if("single"===r.selectMode&&U.value.size>0&&(U.value.forEach((t=>n("rowUnselected",t))),U.value.clear()),"range"===r.selectMode&&U.value.size>0&&i){const t=Array.from(U.value).pop(),r=C.value.findIndex((e=>e===t)),i=Math.min(r,e),o=Math.max(r,e);C.value.slice(i,o+1).forEach((t=>{U.value.has(t)||(U.value.add(t),n("rowSelected",t))}))}else U.value.add(t),n("rowSelected",t);B()}},z=async()=>{if(!M.value||!r.provider||v.value)return;v.value=!0;const t=new Proxy({currentPage:r.currentPage,filter:r.filter,sortBy:r.sortBy,sortDesc:r.sortDesc,perPage:r.perPage},{get(t,e){return e in t?t[e]:void 0},set(){return console.error("BTable provider context is a read-only object."),!0}}),e=r.provider(t,w.updateInternalItems);if(void 0!==e){if(e instanceof Promise)try{const t=await e;return Array.isArray(t)?await w.updateInternalItems(t):void 0}finally{v.value||(v.value=!1)}try{return await w.updateInternalItems(e)}finally{v.value&&(v.value=!1)}}},j=t=>{t._showDetails=!t._showDetails},H=t=>[t.class,t.thClass,t.variant?`table-${t.variant}`:void 0,{"b-table-sortable-column":I.value&&t.sortable,"b-table-sticky-column":t.stickyColumn}],W=(t,e)=>[t.class,t.tdClass,t.variant?`table-${t.variant}`:void 0,(null==e?void 0:e._cellVariants)&&(null==e?void 0:e._cellVariants[t.key])?`table-${null==e?void 0:e._cellVariants[t.key]}`:void 0,{"b-table-sticky-column":t.stickyColumn}],G=t=>[t._rowVariant?`table-${t._rowVariant}`:null,t._rowVariant?`table-${t._rowVariant}`:null,u.value&&U.value.has(t)?`selected table-${r.selectionVariant}`:null],$=()=>{if(!u.value)return;const t=U.value.size>0?Array.from(U.value):[];U.value=new Set([...C.value]),U.value.forEach((e=>{t.includes(e)||n("rowSelected",e)})),B()},q=()=>{!u.value||(U.value.forEach((t=>{n("rowUnselected",t)})),U.value=new Set([]),B())},Y=t=>{if(!u.value)return;const e=C.value[t];!e||U.value.has(e)||(U.value.add(e),n("rowSelected",e),B())},X=t=>{if(!u.value)return;const e=C.value[t];!e||!U.value.has(e)||(U.value.delete(e),n("rowUnselected",e),B())};(0,i.bv)((()=>{M.value&&z()})),(0,i.YP)((()=>r.filter),((t,e)=>{t===e||M.value||t||_s(r.items).then((t=>n("filtered",t)))}));const Z=async(t,e,n)=>{if(e===n)return;const i=t=>r.noProvider&&r.noProvider.includes(t),o=["currentPage","perPage"].includes(t)&&(i("paging")||!0===p.value),s=["filter"].includes(t)&&(i("filtering")||!0===g.value),a=["sortBy","sortDesc"].includes(t)&&(i("sorting")||!0===m.value);o||s||a||await z()};return(0,i.YP)((()=>v.value),(()=>v.value!==h.value&&n("update:busy",v.value))),(0,i.YP)((()=>h.value),(()=>v.value!==h.value&&(v.value=h.value))),(0,i.YP)((()=>r.filter),((t,e)=>Z("filter",t,e))),(0,i.YP)((()=>r.currentPage),((t,e)=>Z("currentPage",t,e))),(0,i.YP)((()=>r.perPage),((t,e)=>Z("perPage",t,e))),(0,i.YP)((()=>r.sortBy),((t,e)=>Z("sortBy",t,e))),(0,i.YP)((()=>r.sortDesc),((t,e)=>Z("sortDesc",t,e))),e({selectAllRows:$,clearSelected:q,selectRow:Y,unselectRow:X}),(e,n)=>((0,i.wg)(),(0,i.j4)(Gh,(0,s.vs)((0,i.F4)((0,o.SU)(_))),{default:(0,i.w5)((()=>{var n;return[(0,i._)("thead",null,[e.$slots["thead-top"]?(0,i.WI)(e.$slots,"thead-top",{key:0}):(0,i.kq)("",!0),(0,i._)("tr",null,[(0,o.SU)(D)?((0,i.wg)(),(0,i.iD)("th",{key:0,class:(0,s.C_)(["b-table-selection-column",{"b-table-sticky-column":(0,o.SU)(d)}])},[(0,i.WI)(e.$slots,"selectHead",{},(()=>[(0,i.Uk)((0,s.zw)("boolean"==typeof t.selectHead?"Selected":t.selectHead),1)]))],2)):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,o.SU)(x),(n=>((0,i.wg)(),(0,i.iD)("th",(0,i.dG)({key:n.key,scope:"col",class:H(n),title:n.headerTitle,abbr:n.headerAbbr,style:n.thStyle},n.thAttr,{onClick:t=>k(n,t)}),[(0,i._)("div",Jh,[(0,i.WI)(e.$slots,"sortIcon",{field:n,sortBy:t.sortBy,selected:n.key===t.sortBy,isDesc:(0,o.SU)(l),direction:(0,o.SU)(l)?"desc":"asc"},(()=>[(0,o.SU)(I)&&n.sortable&&n.key===t.sortBy?((0,i.wg)(),(0,i.iD)("span",Qh)):(0,i.kq)("",!0)])),(0,i._)("div",null,[e.$slots["head("+n.key+")"]||e.$slots["head()"]?(0,i.WI)(e.$slots,e.$slots["head("+n.key+")"]?"head("+n.key+")":"head()",{key:0,label:n.label}):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.Uk)((0,s.zw)(A(n)),1)],64))])])],16,Kh)))),128))]),e.$slots["thead-sub"]?((0,i.wg)(),(0,i.iD)("tr",tf,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,o.SU)(x),(t=>((0,i.wg)(),(0,i.iD)("td",{key:t.key,scope:"col",class:(0,s.C_)([t.class,t.thClass,t.variant?`table-${t.variant}`:""])},[e.$slots["thead-sub"]?(0,i.WI)(e.$slots,"thead-sub",(0,i.dG)({key:0,items:(0,o.SU)(x)},t)):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.Uk)((0,s.zw)(t.label),1)],64))],2)))),128))])):(0,i.kq)("",!0)]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,o.SU)(C),((n,r)=>((0,i.wg)(),(0,i.iD)(i.HY,{key:r},[(0,i._)("tr",{class:(0,s.C_)(G(n)),onClick:t=>O(n,r,t),onDblclick:t=>R(n,r,t),onMouseenter:t=>P(n,r,t),onMouseleave:t=>L(n,r,t)},[(0,o.SU)(D)?((0,i.wg)(),(0,i.iD)("td",{key:0,class:(0,s.C_)(["b-table-selection-column",{"b-table-sticky-column":(0,o.SU)(d)}])},[(0,i.WI)(e.$slots,"selectCell",{},(()=>[(0,i._)("span",{class:(0,s.C_)(U.value.has(n)?"text-primary":"")},"🗹",2)]))],2)):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,o.SU)(x),(o=>((0,i.wg)(),(0,i.iD)("td",(0,i.dG)({key:o.key},o.tdAttr,{class:W(o,n)}),[e.$slots["cell("+o.key+")"]||e.$slots["cell()"]?(0,i.WI)(e.$slots,e.$slots["cell("+o.key+")"]?"cell("+o.key+")":"cell()",{key:0,value:n[o.key],index:r,item:n,field:o,items:t.items,toggleDetails:()=>j(n),detailsShowing:n._showDetails}):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.Uk)((0,s.zw)(n[o.key]),1)],64))],16)))),128))],42,ef),!0===n._showDetails&&e.$slots["row-details"]?((0,i.wg)(),(0,i.iD)("tr",{key:0,class:(0,s.C_)(G(n))},[(0,i._)("td",{colspan:(0,o.SU)(S)},[(0,i.WI)(e.$slots,"row-details",{item:n,toggleDetails:()=>j(n)})],8,nf)],2)):(0,i.kq)("",!0)],64)))),128)),v.value?((0,i.wg)(),(0,i.iD)("tr",{key:0,class:(0,s.C_)(["b-table-busy-slot",{"b-table-static-busy":0==(0,o.SU)(C).length}])},[(0,i._)("td",{colspan:(0,o.SU)(S)},[(0,i.WI)(e.$slots,"table-busy",{},(()=>[(0,i._)("div",of,[(0,i.Wm)(Ul,{class:"align-middle"}),sf])]))],8,rf)],2)):(0,i.kq)("",!0),(0,o.SU)(f)&&0===(0,o.SU)(C).length?((0,i.wg)(),(0,i.iD)("tr",af,[(0,i._)("td",{colspan:(0,o.SU)(S)},[(0,i.WI)(e.$slots,"empty",{items:(0,o.SU)(C),filtered:(0,o.SU)(E)},(()=>[(0,i.Uk)((0,s.zw)((0,o.SU)(E)?t.emptyFilteredText:t.emptyText),1)]))],8,lf)])):(0,i.kq)("",!0)]),(0,o.SU)(a)?((0,i.wg)(),(0,i.iD)("tfoot",cf,[(0,i._)("tr",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,o.SU)(x),(t=>((0,i.wg)(),(0,i.iD)("th",(0,i.dG)({key:t.key},t.thAttr,{scope:"col",class:[t.class,t.thClass,t.variant?`table-${t.variant}`:""],title:t.headerTitle,abbr:t.headerAbbr,style:t.thStyle,onClick:e=>k(t,e,!0)}),(0,s.zw)(t.label),17,uf)))),128))])])):e.$slots["custom-foot"]?((0,i.wg)(),(0,i.iD)("tfoot",df,[(0,i.WI)(e.$slots,"custom-foot",{fields:(0,o.SU)(x),items:t.items,columns:null==(n=(0,o.SU)(x))?void 0:n.length})])):(0,i.kq)("",!0),e.$slots["table-caption"]?((0,i.wg)(),(0,i.iD)("caption",hf,[(0,i.WI)(e.$slots,"table-caption")])):t.caption?((0,i.wg)(),(0,i.iD)("caption",ff,(0,s.zw)(t.caption),1)):(0,i.kq)("",!0)]})),_:3},16))}}),mf=(0,i.aZ)({__name:"BTbody",props:{variant:null},setup(t){const e=t,n=(0,i.Fl)((()=>({[`thead-${e.variant}`]:void 0!==e.variant})));return(t,e)=>((0,i.wg)(),(0,i.iD)("tbody",{role:"rowgroup",class:(0,s.C_)((0,o.SU)(n))},[(0,i.WI)(t.$slots,"default")],2))}}),gf=["scope","colspan","rowspan","data-label"],vf={key:0},yf=(0,i.aZ)({__name:"BTd",props:{colspan:null,rowspan:null,stackedHeading:null,stickyColumn:{default:!1},variant:null},setup(t){const e=t,n=ya((0,o.Vh)(e,"stickyColumn")),r=(0,i.Fl)((()=>({[`table-${e.variant}`]:void 0!==e.variant,"b-table-sticky-column":n.value,"table-b-table-default":n.value&&!e.variant}))),a=(0,i.Fl)((()=>e.colspan?"colspan":e.rowspan?"rowspan":"col"));return(e,n)=>((0,i.wg)(),(0,i.iD)("td",{role:"cell",scope:(0,o.SU)(a),class:(0,s.C_)((0,o.SU)(r)),colspan:t.colspan,rowspan:t.rowspan,"data-label":t.stackedHeading},[t.stackedHeading?((0,i.wg)(),(0,i.iD)("div",vf,[(0,i.WI)(e.$slots,"default")])):(0,i.WI)(e.$slots,"default",{key:1})],10,gf))}}),bf=(0,i.aZ)({__name:"BTfoot",props:{variant:null},setup(t){const e=t,n=(0,i.Fl)((()=>({[`table-${e.variant}`]:void 0!==e.variant})));return(t,e)=>((0,i.wg)(),(0,i.iD)("tfoot",{role:"rowgroup",class:(0,s.C_)((0,o.SU)(n))},[(0,i.WI)(t.$slots,"default")],2))}}),_f=["scope","colspan","rowspan","data-label"],wf={key:0},xf=(0,i.aZ)({__name:"BTh",props:{colspan:null,rowspan:null,stackedHeading:null,stickyColumn:{default:!1},variant:null},setup(t){const e=t,n=ya((0,o.Vh)(e,"stickyColumn")),r=(0,i.Fl)((()=>({[`table-${e.variant}`]:void 0!==e.variant,"b-table-sticky-column":n.value,"table-b-table-default":n.value&&void 0===e.variant}))),a=(0,i.Fl)((()=>e.colspan?"colspan":e.rowspan?"rowspan":"col"));return(e,n)=>((0,i.wg)(),(0,i.iD)("th",{role:"columnheader",scope:(0,o.SU)(a),class:(0,s.C_)((0,o.SU)(r)),colspan:t.colspan,rowspan:t.rowspan,"data-label":t.stackedHeading},[void 0!==t.stackedHeading?((0,i.wg)(),(0,i.iD)("div",wf,[(0,i.WI)(e.$slots,"default")])):(0,i.WI)(e.$slots,"default",{key:1})],10,_f))}}),Sf=(0,i.aZ)({__name:"BThead",props:{variant:null},setup(t){const e=t,n=(0,i.Fl)((()=>({[`table-${e.variant}`]:void 0!==e.variant})));return(t,e)=>((0,i.wg)(),(0,i.iD)("thead",{role:"rowgroup",class:(0,s.C_)((0,o.SU)(n))},[(0,i.WI)(t.$slots,"default")],2))}}),Ef=(0,i.aZ)({__name:"BTr",props:{variant:null},setup(t){const e=t,n=(0,i.Fl)((()=>({[`table-${e.variant}`]:void 0!==e.variant})));return(t,e)=>((0,i.wg)(),(0,i.iD)("tr",{role:"row",class:(0,s.C_)((0,o.SU)(n))},[(0,i.WI)(t.$slots,"default")],2))}}),Mf=["id","data-bs-target","aria-controls","aria-selected","onClick"],Tf=Symbol(),Cf=(0,i.aZ)({__name:"BTabs",props:{activeNavItemClass:null,activeTabClass:null,align:null,card:{default:!1},contentClass:null,end:{default:!1},fill:{default:!1},id:null,justified:{default:!1},lazy:{default:!1},navClass:null,navWrapperClass:null,noFade:{default:!1},noNavStyle:{default:!1},pills:{default:!1},small:{default:!1},tag:{default:"div"},vertical:{default:!1},modelValue:{default:-1}},emits:["update:modelValue","activate-tab","click"],setup(t,{emit:e}){const n=t,r=ya((0,o.Vh)(n,"card")),l=ya((0,o.Vh)(n,"end")),c=ya((0,o.Vh)(n,"fill")),u=ya((0,o.Vh)(n,"justified")),d=ya((0,o.Vh)(n,"lazy")),h=ya((0,o.Vh)(n,"noFade")),f=ya((0,o.Vh)(n,"noNavStyle")),p=ya((0,o.Vh)(n,"pills")),m=ya((0,o.Vh)(n,"small")),g=ya((0,o.Vh)(n,"vertical")),v=(0,i.Rr)(),y=(0,o.iH)(n.modelValue),b=(0,o.iH)(""),_=(0,i.Fl)({get:()=>y.value,set:t=>{y.value=t,w.value.length>0&&t>=0&&t<w.value.length?b.value=w.value[t].buttonId:b.value="",e("update:modelValue",t)}}),w=(0,i.Fl)((()=>{let t=[];return v.default&&(t=C(v).map(((t,e)=>{t.props||(t.props={});const r=t.props["button-id"]||sa("tab"),i=t.props.id||sa(),o=_.value>-1?e===_.value:""===t.props.active,s=t.props["title-item-class"],a=t.props["title-link-attributes"];return{buttonId:r,contentId:i,active:o,disabled:""===t.props.disabled||!0===t.props.disabled,navItemClasses:[{active:o,disabled:""===t.props.disabled||!0===t.props.disabled},o&&n.activeNavItemClass?n.activeNavItemClass:null,t.props["title-link-class"]],tabClasses:[{fade:!h.value},o&&n.activeTabClass?n.activeTabClass:null],target:`#${i}`,title:t.props.title,titleItemClass:s,titleLinkAttributes:a,onClick:t.props.onClick,tab:t}}))),t})),x=(0,i.Fl)((()=>!((null==w?void 0:w.value)&&w.value.length>0))),S=(0,i.Fl)((()=>({"d-flex":g.value,"align-items-start":g.value}))),E=(0,i.Fl)((()=>({"nav-pills":p.value,"flex-column me-3":g.value,[`justify-content-${n.align}`]:void 0!==n.align,"nav-fill":c.value,"card-header-tabs":r.value,"nav-justified":u.value,"nav-tabs":!f.value&&!p.value,small:m.value}))),M=t=>{let r=!1;if(void 0!==t&&t>-1&&t<w.value.length&&!w.value[t].disabled&&(_.value<0||w.value[t].buttonId!==b.value)){const n=new ws("activate-tab",{cancelable:!0,vueTarget:this});e("activate-tab",t,_.value,n),n.defaultPrevented||(_.value=t,r=!0)}return!r&&n.modelValue!==_.value&&e("update:modelValue",_.value),r},T=(t,e)=>{var n;M(e),e>=0&&!w.value[e].disabled&&(null==(n=w.value[e])?void 0:n.onClick)&&"function"==typeof w.value[e].onClick&&w.value[e].onClick(t)},C=t=>t&&t.default?t.default().reduce(((t,e)=>("symbol"==typeof e.type?t=t.concat(e.children):t.push(e),t)),[]).filter((t=>{var e;return"BTab"===(null==(e=t.type)?void 0:e.__name)})):[];return M(y.value),(0,i.YP)((()=>n.modelValue),((t,e)=>{if(t===e)return;if(t=Math.max(t,-1),e=Math.max(e,-1),w.value.length<=0)return void(_.value=-1);const n=t>e;let r=t;const i=w.value.length-1;for(;r>=0&&r<=i&&w.value[r].disabled;)r+=n?1:-1;r<0?M(0):r>=w.value.length?M(w.value.length-1):M(r)})),(0,i.YP)((()=>w.value),(()=>{let t=w.value.map((t=>t.active&&!t.disabled)).lastIndexOf(!0);t<0&&(_.value>=w.value.length?t=w.value.map((t=>!t.disabled)).lastIndexOf(!0):w.value[_.value]&&!w.value[_.value].disabled&&(t=_.value)),t<0&&(t=w.value.map((t=>!t.disabled)).indexOf(!0)),w.value.forEach(((e,n)=>e.active=n===t)),M(t)})),(0,i.bv)((()=>{if(_.value<0&&w.value.length>0&&!w.value.some((t=>t.active))){const t=w.value.map((t=>!t.disabled)).indexOf(!0);M(t>=0?t:-1)}})),(0,i.JJ)(Tf,{lazy:d.value,card:r.value}),(e,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(t.tag),{id:t.id,class:(0,s.C_)(["tabs",(0,o.SU)(S)])},{default:(0,i.w5)((()=>[(0,o.SU)(l)?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,s.C_)(["tab-content",t.contentClass])},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,o.SU)(w),(({tab:t,contentId:e,tabClasses:n,active:r},o)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(t),{id:e,key:o,class:(0,s.C_)(n),active:r},null,8,["id","class","active"])))),128)),(0,o.SU)(x)?((0,i.wg)(),(0,i.iD)("div",{key:"bv-empty-tab",class:(0,s.C_)(["tab-pane active",{"card-body":(0,o.SU)(r)}])},[(0,i.WI)(e.$slots,"empty")],2)):(0,i.kq)("",!0)],2)):(0,i.kq)("",!0),(0,i._)("div",{class:(0,s.C_)([t.navWrapperClass,{"card-header":(0,o.SU)(r),"ms-auto":t.vertical&&(0,o.SU)(l)}])},[(0,i._)("ul",{class:(0,s.C_)(["nav",[(0,o.SU)(E),t.navClass]]),role:"tablist"},[(0,i.WI)(e.$slots,"tabs-start"),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,o.SU)(w),(({tab:t,buttonId:e,contentId:n,navItemClasses:r,active:o,target:l},c)=>((0,i.wg)(),(0,i.iD)("li",{key:c,class:(0,s.C_)(["nav-item",t.props["title-item-class"]])},[(0,i._)("button",(0,i.dG)({id:e,class:["nav-link",r],"data-bs-toggle":"tab","data-bs-target":l,role:"tab","aria-controls":n,"aria-selected":o},t.props["title-link-attributes"],{onClick:(0,a.iM)((t=>T(t,c)),["stop","prevent"])}),[t.children&&t.children.title?((0,i.wg)(),(0,i.j4)((0,i.LL)(t.children.title),{key:0})):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.Uk)((0,s.zw)(t.props.title),1)],64))],16,Mf)],2)))),128)),(0,i.WI)(e.$slots,"tabs-end")],2)],2),(0,o.SU)(l)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",{key:1,class:(0,s.C_)(["tab-content",t.contentClass])},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,o.SU)(w),(({tab:t,contentId:e,tabClasses:n,active:r},o)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(t),{id:e,key:o,class:(0,s.C_)(n),active:r},null,8,["id","class","active"])))),128)),(0,o.SU)(x)?((0,i.wg)(),(0,i.iD)("div",{key:"bv-empty-tab",class:(0,s.C_)(["tab-pane active",{"card-body":(0,o.SU)(r)}])},[(0,i.WI)(e.$slots,"empty")],2)):(0,i.kq)("",!0)],2))])),_:3},8,["id","class"]))}}),Af=(0,i.aZ)({__name:"BTab",props:{id:null,title:null,active:{default:!1},buttonId:{default:void 0},disabled:{default:!1},lazy:{default:void 0},lazyOnce:{default:void 0},noBody:{type:[Boolean,String],default:!1},tag:{default:"div"},titleItemClass:{default:void 0},titleLinkAttributes:{default:void 0},titleLinkClass:{default:void 0}},setup(t){const e=t,n=(0,o.iH)(!1),r=ya((0,o.Vh)(e,"active")),a=ya((0,o.Vh)(e,"disabled")),l=ya((0,o.Vh)(e,void 0!==e.lazyOnce?"lazyOnce":"lazy")),c=(0,i.f3)(Tf,null),u=(0,i.Fl)((()=>(null==c?void 0:c.lazy)||l.value)),d=(0,i.Fl)((()=>void 0!==e.lazyOnce)),h=(0,i.Fl)((()=>r.value&&!a.value)),f=(0,i.Fl)((()=>{const t=u.value&&d.value&&n.value;return h.value||!u.value||t})),p=(0,i.Fl)((()=>({active:r.value,show:r.value,"card-body":(null==c?void 0:c.card)&&!1===e.noBody})));return(0,i.YP)((()=>f.value),(t=>{t&&!n.value&&(n.value=!0)})),(e,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(t.tag),{id:t.id,class:(0,s.C_)(["tab-pane",(0,o.SU)(p)]),role:"tabpanel","aria-labelledby":"profile-tab"},{default:(0,i.w5)((()=>[(0,o.SU)(f)?(0,i.WI)(e.$slots,"default",{key:0}):(0,i.kq)("",!0)])),_:3},8,["id","class"]))}}),kf={BAccordion:Va,BAccordionItem:cl,BNavText:Kd,BAlert:hl,BAvatar:bl,BAvatarGroup:pl,BNavForm:Hd,BBadge:Al,BBreadcrumb:Il,BBreadcrumbItem:Pl,BButton:Vl,BButtonGroup:zl,BButtonToolbar:Hl,BCard:Jl,BCardBody:Zl,BCardFooter:Kl,BCardGroup:Ql,BCardHeader:ql,BCardImg:Wl,BCardSubTitle:Xl,BCardText:tc,BCardTitle:Yl,BCarousel:hc,BCarouselSlide:bc,BCloseButton:dl,BCol:Mc,BCollapse:za,BContainer:jc,BDropdown:Gc,BDropdownDivider:qc,BDropdownForm:Jc,BDropdownGroup:nu,BDropdownHeader:su,BDropdownItem:lu,BDropdownItemButton:uu,BDropdownText:fu,BForm:mu,BFormCheckbox:Tu,BFormCheckboxGroup:Ou,BFormFloatingLabel:yu,BFormGroup:Bu,BFormInput:Wu,BFormInvalidFeedback:bu,BFormRadio:qu,BFormRadioGroup:Ku,BFormRow:_u,BFormSelect:rd,BFormSelectOption:Qu,BFormSelectOptionGroup:ed,BFormText:wu,BFormTextarea:Sd,BFormTag:od,BFormTags:bd,BFormValidFeedback:xu,BImg:fc,BInputGroup:Od,BInputGroupAddon:Pd,BInputGroupAppend:Ld,BInputGroupPrepend:Dd,BInputGroupText:Rd,BLink:El,BListGroup:Nd,BListGroupItem:Ud,BModal:zd,BNav:jd,BNavbar:Jd,BNavbarBrand:nh,BNavbarNav:rh,BNavbarToggle:oh,BNavItem:qd,BNavItemDropdown:Xd,BOffcanvas:dh,BOverlay:mh,BPagination:kh,BPopover:Ih,BProgress:Fh,BProgressBar:Nh,BRow:jh,BSkeleton:Hh,BSkeletonIcon:Wh,BSkeletonTable:Yh,BSkeletonWrapper:Xh,BSpinner:Ul,BTab:Af,BTable:pf,BTableSimple:Gh,BTbody:mf,BTd:yf,BTfoot:bf,BTh:xf,BThead:Sf,BTr:Ef,BToast:Rc,BToaster:Pc,BToastContainer:Pc,BTabs:Cf,BTransition:Ac,BToastPlugin:zc},Of={install(t,e={}){Object.entries(kf).forEach((([e,n])=>{t.component(e,n)})),Object.entries(il).forEach((([e,n])=>{t.directive(e,n)})),wa(t)}}},1279:function(t){"use strict";var e=t.exports={};e.isIE=function(t){function e(){var t=navigator.userAgent.toLowerCase();return-1!==t.indexOf("msie")||-1!==t.indexOf("trident")||-1!==t.indexOf(" edge/")}if(!e())return!1;if(!t)return!0;var n=function(){var t,e=3,n=document.createElement("div"),r=n.getElementsByTagName("i");do{n.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e"}while(r[0]);return e>4?e:t}();return t===n},e.isLegacyOpera=function(){return!!window.opera}},3141:function(t){"use strict";var e=t.exports={};e.forEach=function(t,e){for(var n=0;n<t.length;n++){var r=e(t[n]);if(r)return r}}},8192:function(t,e,n){"use strict";n(1703);var r=n(1279);t.exports=function(t){t=t||{};var e=t.reporter,n=t.batchProcessor,i=t.stateHandler.getState;if(!e)throw new Error("Missing required dependency: reporter.");function o(t,e){function n(){e(t)}if(r.isIE(8))i(t).object={proxy:n},t.attachEvent("onresize",n);else{var o=l(t);if(!o)throw new Error("Element is not detectable by this strategy.");o.contentDocument.defaultView.addEventListener("resize",n)}}function s(e){var n=t.important?" !important; ":"; ";return(e.join(n)+n).trim()}function a(t,o,a){a||(a=o,o=t,t=null),t=t||{};t.debug;function l(o,a){var l=s(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),c=!1,u=window.getComputedStyle(o),d=o.offsetWidth,h=o.offsetHeight;function f(){function n(){if("static"===u.position){o.style.setProperty("position","relative",t.important?"important":"");var n=function(e,n,r,i){function o(t){return t.replace(/[^-\d\.]/g,"")}var s=r[i];"auto"!==s&&"0"!==o(s)&&(e.warn("An element that is positioned static has style."+i+"="+s+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+i+" will be set to 0. Element: ",n),n.style.setProperty(i,"0",t.important?"important":""))};n(e,o,u,"top"),n(e,o,u,"right"),n(e,o,u,"bottom"),n(e,o,u,"left")}}function s(){function t(e,n){if(!e.contentDocument){var r=i(e);return r.checkForObjectDocumentTimeoutId&&window.clearTimeout(r.checkForObjectDocumentTimeoutId),void(r.checkForObjectDocumentTimeoutId=setTimeout((function(){r.checkForObjectDocumentTimeoutId=0,t(e,n)}),100))}n(e.contentDocument)}c||n();var e=this;t(e,(function(t){a(o)}))}""!==u.position&&(n(u),c=!0);var d=document.createElement("object");d.style.cssText=l,d.tabIndex=-1,d.type="text/html",d.setAttribute("aria-hidden","true"),d.onload=s,r.isIE()||(d.data="about:blank"),i(o)&&(o.appendChild(d),i(o).object=d,r.isIE()&&(d.data="about:blank"))}i(o).startSize={width:d,height:h},n?n.add(f):f()}r.isIE(8)?a(o):l(o,a)}function l(t){return i(t).object}function c(t){if(i(t)){var e=l(t);e&&(r.isIE(8)?t.detachEvent("onresize",e.proxy):t.removeChild(e),i(t).checkForObjectDocumentTimeoutId&&window.clearTimeout(i(t).checkForObjectDocumentTimeoutId),delete i(t).object)}}return{makeDetectable:a,addListener:o,uninstall:c}}},2318:function(t,e,n){"use strict";n(1703),n(7658);var r=n(3141).forEach;t.exports=function(t){t=t||{};var e=t.reporter,n=t.batchProcessor,i=t.stateHandler.getState,o=(t.stateHandler.hasState,t.idHandler);if(!n)throw new Error("Missing required dependency: batchProcessor");if(!e)throw new Error("Missing required dependency: reporter.");var s=d(),a="erd_scroll_detection_scrollbar_style",l="erd_scroll_detection_container";function c(t){h(t,a,l)}function u(e){var n=t.important?" !important; ":"; ";return(e.join(n)+n).trim()}function d(){var t=500,e=500,n=document.createElement("div");n.style.cssText=u(["position: absolute","width: "+2*t+"px","height: "+2*e+"px","visibility: hidden","margin: 0","padding: 0"]);var r=document.createElement("div");r.style.cssText=u(["position: absolute","width: "+t+"px","height: "+e+"px","overflow: scroll","visibility: none","top: "+3*-t+"px","left: "+3*-e+"px","visibility: hidden","margin: 0","padding: 0"]),r.appendChild(n),document.body.insertBefore(r,document.body.firstChild);var i=t-r.clientWidth,o=e-r.clientHeight;return document.body.removeChild(r),{width:i,height:o}}function h(t,e,n){function r(n,r){r=r||function(e){t.head.appendChild(e)};var i=t.createElement("style");return i.innerHTML=n,i.id=e,r(i),i}if(!t.getElementById(e)){var i=n+"_animation",o=n+"_animation_active",s="/* Created by the element-resize-detector library. */\n";s+="."+n+" > div::-webkit-scrollbar { "+u(["display: none"])+" }\n\n",s+="."+o+" { "+u(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+i,"animation-name: "+i])+" }\n",s+="@-webkit-keyframes "+i+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }\n",s+="@keyframes "+i+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",r(s)}}function f(t){t.className+=" "+l+"_animation_active"}function p(t,n,r){if(t.addEventListener)t.addEventListener(n,r);else{if(!t.attachEvent)return e.error("[scroll] Don't know how to add event listeners.");t.attachEvent("on"+n,r)}}function m(t,n,r){if(t.removeEventListener)t.removeEventListener(n,r);else{if(!t.detachEvent)return e.error("[scroll] Don't know how to remove event listeners.");t.detachEvent("on"+n,r)}}function g(t){return i(t).container.childNodes[0].childNodes[0].childNodes[0]}function v(t){return i(t).container.childNodes[0].childNodes[0].childNodes[1]}function y(t,e){var n=i(t).listeners;if(!n.push)throw new Error("Cannot add listener to an element that is not detectable.");i(t).listeners.push(e)}function b(t,a,c){function d(){if(t.debug){var n=Array.prototype.slice.call(arguments);if(n.unshift(o.get(a),"Scroll: "),e.log.apply)e.log.apply(null,n);else for(var r=0;r<n.length;r++)e.log(n[r])}}function h(t){function e(t){var e=t.getRootNode&&t.getRootNode().contains(t);return t===t.ownerDocument.body||t.ownerDocument.body.contains(t)||e}return!e(t)||null===window.getComputedStyle(t)}function m(t){var e=i(t).container.childNodes[0],n=window.getComputedStyle(e);return!n.width||-1===n.width.indexOf("px")}function y(){var t=window.getComputedStyle(a),e={};return e.position=t.position,e.width=a.offsetWidth,e.height=a.offsetHeight,e.top=t.top,e.right=t.right,e.bottom=t.bottom,e.left=t.left,e.widthCSS=t.width,e.heightCSS=t.height,e}function b(){var t=y();i(a).startSize={width:t.width,height:t.height},d("Element start size",i(a).startSize)}function _(){i(a).listeners=[]}function w(){if(d("storeStyle invoked."),i(a)){var t=y();i(a).style=t}else d("Aborting because element has been uninstalled")}function x(t,e,n){i(t).lastWidth=e,i(t).lastHeight=n}function S(t){return g(t).childNodes[0]}function E(){return 2*s.width+1}function M(){return 2*s.height+1}function T(t){return t+10+E()}function C(t){return t+10+M()}function A(t){return 2*t+E()}function k(t){return 2*t+M()}function O(t,e,n){var r=g(t),i=v(t),o=T(e),s=C(n),a=A(e),l=k(n);r.scrollLeft=o,r.scrollTop=s,i.scrollLeft=a,i.scrollTop=l}function R(){var t=i(a).container;if(!t){t=document.createElement("div"),t.className=l,t.style.cssText=u(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),i(a).container=t,f(t),a.appendChild(t);var e=function(){i(a).onRendered&&i(a).onRendered()};p(t,"animationstart",e),i(a).onAnimationStart=e}return t}function P(){function n(){var n=i(a).style;if("static"===n.position){a.style.setProperty("position","relative",t.important?"important":"");var r=function(t,e,n,r){function i(t){return t.replace(/[^-\d\.]/g,"")}var o=n[r];"auto"!==o&&"0"!==i(o)&&(t.warn("An element that is positioned static has style."+r+"="+o+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+r+" will be set to 0. Element: ",e),e.style[r]=0)};r(e,a,n,"top"),r(e,a,n,"right"),r(e,a,n,"bottom"),r(e,a,n,"left")}}function r(t,e,n,r){return t=t?t+"px":"0",e=e?e+"px":"0",n=n?n+"px":"0",r=r?r+"px":"0",["left: "+t,"top: "+e,"right: "+r,"bottom: "+n]}if(d("Injecting elements"),i(a)){n();var o=i(a).container;o||(o=R());var c=s.width,h=s.height,f=u(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),m=u(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(r(-(1+c),-(1+h),-h,-c))),g=u(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),v=u(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),y=u(["position: absolute","left: 0","top: 0"]),b=u(["position: absolute","width: 200%","height: 200%"]),_=document.createElement("div"),w=document.createElement("div"),x=document.createElement("div"),S=document.createElement("div"),E=document.createElement("div"),M=document.createElement("div");_.dir="ltr",_.style.cssText=f,_.className=l,w.className=l,w.style.cssText=m,x.style.cssText=g,S.style.cssText=y,E.style.cssText=v,M.style.cssText=b,x.appendChild(S),E.appendChild(M),w.appendChild(x),w.appendChild(E),_.appendChild(w),o.appendChild(_),p(x,"scroll",T),p(E,"scroll",C),i(a).onExpandScroll=T,i(a).onShrinkScroll=C}else d("Aborting because element has been uninstalled");function T(){var t=i(a);t&&t.onExpand?t.onExpand():d("Aborting expand scroll handler: element has been uninstalled")}function C(){var t=i(a);t&&t.onShrink?t.onShrink():d("Aborting shrink scroll handler: element has been uninstalled")}}function L(){function s(e,n,r){var i=S(e),o=T(n),s=C(r);i.style.setProperty("width",o+"px",t.important?"important":""),i.style.setProperty("height",s+"px",t.important?"important":"")}function l(r){var l=a.offsetWidth,u=a.offsetHeight,h=l!==i(a).lastWidth||u!==i(a).lastHeight;d("Storing current size",l,u),x(a,l,u),n.add(0,(function(){if(h)if(i(a))if(c()){if(t.debug){var n=a.offsetWidth,r=a.offsetHeight;n===l&&r===u||e.warn(o.get(a),"Scroll: Size changed before updating detector elements.")}s(a,l,u)}else d("Aborting because element container has not been initialized");else d("Aborting because element has been uninstalled")})),n.add(1,(function(){i(a)?c()?O(a,l,u):d("Aborting because element container has not been initialized"):d("Aborting because element has been uninstalled")})),h&&r&&n.add(2,(function(){i(a)?c()?r():d("Aborting because element container has not been initialized"):d("Aborting because element has been uninstalled")}))}function c(){return!!i(a).container}function u(){function t(){return void 0===i(a).lastNotifiedWidth}d("notifyListenersIfNeeded invoked");var e=i(a);return t()&&e.lastWidth===e.startSize.width&&e.lastHeight===e.startSize.height?d("Not notifying: Size is the same as the start size, and there has been no notification yet."):e.lastWidth===e.lastNotifiedWidth&&e.lastHeight===e.lastNotifiedHeight?d("Not notifying: Size already notified"):(d("Current size not notified, notifying..."),e.lastNotifiedWidth=e.lastWidth,e.lastNotifiedHeight=e.lastHeight,void r(i(a).listeners,(function(t){t(a)})))}function h(){if(d("startanimation triggered."),m(a))d("Ignoring since element is still unrendered...");else{d("Element rendered.");var t=g(a),e=v(a);0!==t.scrollLeft&&0!==t.scrollTop&&0!==e.scrollLeft&&0!==e.scrollTop||(d("Scrollbars out of sync. Updating detector elements..."),l(u))}}function f(){d("Scroll detected."),m(a)?d("Scroll event fired while unrendered. Ignoring..."):l(u)}if(d("registerListenersAndPositionElements invoked."),i(a)){i(a).onRendered=h,i(a).onExpand=f,i(a).onShrink=f;var p=i(a).style;s(a,p.width,p.height)}else d("Aborting because element has been uninstalled")}function D(){if(d("finalizeDomMutation invoked."),i(a)){var t=i(a).style;x(a,t.width,t.height),O(a,t.width,t.height)}else d("Aborting because element has been uninstalled")}function I(){c(a)}function N(){d("Installing..."),_(),b(),n.add(0,w),n.add(1,P),n.add(2,L),n.add(3,D),n.add(4,I)}c||(c=a,a=t,t=null),t=t||{},d("Making detectable..."),h(a)?(d("Element is detached"),R(),d("Waiting until element is attached..."),i(a).onRendered=function(){d("Element is now attached"),N()}):N()}function _(t){var e=i(t);e&&(e.onExpandScroll&&m(g(t),"scroll",e.onExpandScroll),e.onShrinkScroll&&m(v(t),"scroll",e.onShrinkScroll),e.onAnimationStart&&m(e.container,"animationstart",e.onAnimationStart),e.container&&t.removeChild(e.container))}return c(window.document),{makeDetectable:b,addListener:y,uninstall:_,initDocument:c}}},7024:function(t,e,n){"use strict";n(7658),n(1703);var r=n(3141).forEach,i=n(9945),o=n(9499),s=n(9484),a=n(9141),l=n(2271),c=n(1279),u=n(2217),d=n(6795),h=n(8192),f=n(2318);function p(t){return Array.isArray(t)||void 0!==t.length}function m(t){if(Array.isArray(t))return t;var e=[];return r(t,(function(t){e.push(t)})),e}function g(t){return t&&1===t.nodeType}function v(t,e,n){var r=t[e];return void 0!==r&&null!==r||void 0===n?r:n}t.exports=function(t){var e;if(t=t||{},t.idHandler)e={get:function(e){return t.idHandler.get(e,!0)},set:t.idHandler.set};else{var n=s(),y=a({idGenerator:n,stateHandler:d});e=y}var b=t.reporter;if(!b){var _=!1===b;b=l(_)}var w=v(t,"batchProcessor",u({reporter:b})),x={};x.callOnAdd=!!v(t,"callOnAdd",!0),x.debug=!!v(t,"debug",!1);var S,E=o(e),M=i({stateHandler:d}),T=v(t,"strategy","object"),C=v(t,"important",!1),A={reporter:b,batchProcessor:w,stateHandler:d,idHandler:e,important:C};if("scroll"===T&&(c.isLegacyOpera()?(b.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),T="object"):c.isIE(9)&&(b.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),T="object")),"scroll"===T)S=f(A);else{if("object"!==T)throw new Error("Invalid strategy name: "+T);S=h(A)}var k={};function O(t,n,i){function o(t){var e=E.get(t);r(e,(function(e){e(t)}))}function s(t,e,n){E.add(e,n),t&&n(e)}if(i||(i=n,n=t,t={}),!n)throw new Error("At least one element required.");if(!i)throw new Error("Listener required.");if(g(n))n=[n];else{if(!p(n))return b.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");n=m(n)}var a=0,l=v(t,"callOnAdd",x.callOnAdd),c=v(t,"onReady",(function(){})),u=v(t,"debug",x.debug);r(n,(function(t){d.getState(t)||(d.initState(t),e.set(t));var h=e.get(t);if(u&&b.log("Attaching listener to element",h,t),!M.isDetectable(t))return u&&b.log(h,"Not detectable."),M.isBusy(t)?(u&&b.log(h,"System busy making it detectable"),s(l,t,i),k[h]=k[h]||[],void k[h].push((function(){a++,a===n.length&&c()}))):(u&&b.log(h,"Making detectable..."),M.markBusy(t,!0),S.makeDetectable({debug:u,important:C},t,(function(t){if(u&&b.log(h,"onElementDetectable"),d.getState(t)){M.markAsDetectable(t),M.markBusy(t,!1),S.addListener(t,o),s(l,t,i);var e=d.getState(t);if(e&&e.startSize){var f=t.offsetWidth,p=t.offsetHeight;e.startSize.width===f&&e.startSize.height===p||o(t)}k[h]&&r(k[h],(function(t){t()}))}else u&&b.log(h,"Element uninstalled before being detectable.");delete k[h],a++,a===n.length&&c()})));u&&b.log(h,"Already detecable, adding listener."),s(l,t,i),a++})),a===n.length&&c()}function R(t){if(!t)return b.error("At least one element is required.");if(g(t))t=[t];else{if(!p(t))return b.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");t=m(t)}r(t,(function(t){E.removeAllListeners(t),S.uninstall(t),d.cleanState(t)}))}function P(t){S.initDocument&&S.initDocument(t)}return{listenTo:O,removeListener:E.removeListener,removeAllListeners:E.removeAllListeners,uninstall:R,initDocument:P}}},9945:function(t){"use strict";t.exports=function(t){var e=t.stateHandler.getState;function n(t){var n=e(t);return n&&!!n.isDetectable}function r(t){e(t).isDetectable=!0}function i(t){return!!e(t).busy}function o(t,n){e(t).busy=!!n}return{isDetectable:n,markAsDetectable:r,isBusy:i,markBusy:o}}},9484:function(t){"use strict";t.exports=function(){var t=1;function e(){return t++}return{generate:e}}},9141:function(t,e,n){"use strict";n(1703),t.exports=function(t){var e=t.idGenerator,n=t.stateHandler.getState;function r(t){var e=n(t);return e&&void 0!==e.id?e.id:null}function i(t){var r=n(t);if(!r)throw new Error("setId required the element to have a resize detection state.");var i=e.generate();return r.id=i,i}return{get:r,set:i}}},9499:function(t,e,n){"use strict";n(7658),t.exports=function(t){var e={};function n(n){var r=t.get(n);return void 0===r?[]:e[r]||[]}function r(n,r){var i=t.get(n);e[i]||(e[i]=[]),e[i].push(r)}function i(t,e){for(var r=n(t),i=0,o=r.length;i<o;++i)if(r[i]===e){r.splice(i,1);break}}function o(t){var e=n(t);e&&(e.length=0)}return{get:n,add:r,removeListener:i,removeAllListeners:o}}},2271:function(t){"use strict";t.exports=function(t){function e(){}var n={log:e,warn:e,error:e};if(!t&&window.console){var r=function(t,e){t[e]=function(){var t=console[e];if(t.apply)t.apply(console,arguments);else for(var n=0;n<arguments.length;n++)t(arguments[n])}};r(n,"log"),r(n,"warn"),r(n,"error")}return n}},6795:function(t){"use strict";var e="_erd";function n(t){return t[e]={},r(t)}function r(t){return t[e]}function i(t){delete t[e]}t.exports={initState:n,getState:r,cleanState:i}},5292:function(t,e){"use strict";var n=function(t){var e=function(t,e){return t<<e|t>>>32-e},n=function(t,e){var n=void 0,r=void 0,i=void 0,o=void 0,s=void 0;return i=2147483648&t,o=2147483648&e,n=1073741824&t,r=1073741824&e,s=(1073741823&t)+(1073741823&e),n&r?2147483648^s^i^o:n|r?1073741824&s?3221225472^s^i^o:1073741824^s^i^o:s^i^o},r=function(t,e,n){return t&e|~t&n},i=function(t,e,n){return t&n|e&~n},o=function(t,e,n){return t^e^n},s=function(t,e,n){return e^(t|~n)},a=function(t,i,o,s,a,l,c){return t=n(t,n(n(r(i,o,s),a),c)),n(e(t,l),i)},l=function(t,r,o,s,a,l,c){return t=n(t,n(n(i(r,o,s),a),c)),n(e(t,l),r)},c=function(t,r,i,s,a,l,c){return t=n(t,n(n(o(r,i,s),a),c)),n(e(t,l),r)},u=function(t,r,i,o,a,l,c){return t=n(t,n(n(s(r,i,o),a),c)),n(e(t,l),r)},d=function(t){var e=void 0,n=t.length,r=n+8,i=(r-r%64)/64,o=16*(i+1),s=Array(o-1),a=0,l=0;while(l<n)e=(l-l%4)/4,a=l%4*8,s[e]=s[e]|t.charCodeAt(l)<<a,l++;return e=(l-l%4)/4,a=l%4*8,s[e]=s[e]|128<<a,s[o-2]=n<<3,s[o-1]=n>>>29,s},h=function(t){var e="",n="",r=void 0,i=void 0;for(i=0;i<=3;i++)r=t>>>8*i&255,n="0"+r.toString(16),e+=n.substr(n.length-2,2);return e},f=function(t){t=t.replace(/rn/g,"n");for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e},p=Array(),m=void 0,g=void 0,v=void 0,y=void 0,b=void 0,_=void 0,w=void 0,x=void 0,S=void 0,E=7,M=12,T=17,C=22,A=5,k=9,O=14,R=20,P=4,L=11,D=16,I=23,N=6,U=10,F=15,B=21;for(t=f(t),p=d(t),_=1732584193,w=4023233417,x=2562383102,S=271733878,m=0;m<p.length;m+=16){g=_,v=w,y=x,b=S,_=a(_,w,x,S,p[m+0],E,3614090360),S=a(S,_,w,x,p[m+1],M,3905402710),x=a(x,S,_,w,p[m+2],T,606105819),w=a(w,x,S,_,p[m+3],C,3250441966),_=a(_,w,x,S,p[m+4],E,4118548399),S=a(S,_,w,x,p[m+5],M,1200080426),x=a(x,S,_,w,p[m+6],T,2821735955),w=a(w,x,S,_,p[m+7],C,4249261313),_=a(_,w,x,S,p[m+8],E,1770035416),S=a(S,_,w,x,p[m+9],M,2336552879),x=a(x,S,_,w,p[m+10],T,4294925233),w=a(w,x,S,_,p[m+11],C,2304563134),_=a(_,w,x,S,p[m+12],E,1804603682),S=a(S,_,w,x,p[m+13],M,4254626195),x=a(x,S,_,w,p[m+14],T,2792965006),w=a(w,x,S,_,p[m+15],C,1236535329),_=l(_,w,x,S,p[m+1],A,4129170786),S=l(S,_,w,x,p[m+6],k,3225465664),x=l(x,S,_,w,p[m+11],O,643717713),w=l(w,x,S,_,p[m+0],R,3921069994),_=l(_,w,x,S,p[m+5],A,3593408605),S=l(S,_,w,x,p[m+10],k,38016083),x=l(x,S,_,w,p[m+15],O,3634488961),w=l(w,x,S,_,p[m+4],R,3889429448),_=l(_,w,x,S,p[m+9],A,568446438),S=l(S,_,w,x,p[m+14],k,3275163606),x=l(x,S,_,w,p[m+3],O,4107603335),w=l(w,x,S,_,p[m+8],R,1163531501),_=l(_,w,x,S,p[m+13],A,2850285829),S=l(S,_,w,x,p[m+2],k,4243563512),x=l(x,S,_,w,p[m+7],O,1735328473),w=l(w,x,S,_,p[m+12],R,2368359562),_=c(_,w,x,S,p[m+5],P,4294588738),S=c(S,_,w,x,p[m+8],L,2272392833),x=c(x,S,_,w,p[m+11],D,1839030562),w=c(w,x,S,_,p[m+14],I,4259657740),_=c(_,w,x,S,p[m+1],P,2763975236),S=c(S,_,w,x,p[m+4],L,1272893353),x=c(x,S,_,w,p[m+7],D,4139469664),w=c(w,x,S,_,p[m+10],I,3200236656),_=c(_,w,x,S,p[m+13],P,681279174),S=c(S,_,w,x,p[m+0],L,3936430074),x=c(x,S,_,w,p[m+3],D,3572445317),w=c(w,x,S,_,p[m+6],I,76029189),_=c(_,w,x,S,p[m+9],P,3654602809),S=c(S,_,w,x,p[m+12],L,3873151461),x=c(x,S,_,w,p[m+15],D,530742520),w=c(w,x,S,_,p[m+2],I,3299628645),_=u(_,w,x,S,p[m+0],N,4096336452),S=u(S,_,w,x,p[m+7],U,1126891415),x=u(x,S,_,w,p[m+14],F,2878612391),w=u(w,x,S,_,p[m+5],B,4237533241),_=u(_,w,x,S,p[m+12],N,1700485571),S=u(S,_,w,x,p[m+3],U,2399980690),x=u(x,S,_,w,p[m+10],F,4293915773),w=u(w,x,S,_,p[m+1],B,2240044497),_=u(_,w,x,S,p[m+8],N,1873313359),S=u(S,_,w,x,p[m+15],U,4264355552),x=u(x,S,_,w,p[m+6],F,2734768916),w=u(w,x,S,_,p[m+13],B,1309151649),_=u(_,w,x,S,p[m+4],N,4149444226),S=u(S,_,w,x,p[m+11],U,3174756917),x=u(x,S,_,w,p[m+2],F,718787259),w=u(w,x,S,_,p[m+9],B,3951481745),_=n(_,g),w=n(w,v),x=n(x,y),S=n(S,b);var V=h(_)+h(w)+h(x)+h(S);return V.toLowerCase()}};e.Z=n},3624:function(t,e,n){function r(t){var e=Object.create(null);return{on:function(n,r,i){if("function"!==typeof r)throw new Error("callback is expected to be a function");var o=e[n];return o||(o=e[n]=[]),o.push({callback:r,ctx:i}),t},off:function(n,r){var i="undefined"===typeof n;if(i)return e=Object.create(null),t;if(e[n]){var o="function"!==typeof r;if(o)delete e[n];else for(var s=e[n],a=0;a<s.length;++a)s[a].callback===r&&s.splice(a,1)}return t},fire:function(n){var r,i=e[n];if(!i)return t;arguments.length>1&&(r=Array.prototype.splice.call(arguments,1));for(var o=0;o<i.length;++o){var s=i[o];s.callback.apply(s.ctx,r)}return t}}}function i(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],n=0;n<e.length;++n)if(t.hasOwnProperty(e[n]))throw new Error("Subject cannot be eventified, since it already has property '"+e[n]+"'")}n(1703),n(7658),t.exports=function(t){i(t);var e=r(t);return t.on=e.on,t.off=e.off,t.fire=e.fire,t}},6334:function(t,e,n){n(1703),n(7658),t.exports=i,t.exports.simulator=n(2029);var r=n(3624);function i(t,e){if(!t)throw new Error("Graph structure cannot be undefined");var i=e&&e.createSimulator||n(2029),s=i(e);if(Array.isArray(e))throw new Error("Physics settings is expected to be an object");var a=t.version>19?P:R;e&&"function"===typeof e.nodeMass&&(a=e.nodeMass);var l=new Map,c={},u=0,d=s.settings.springTransform||o;x(),b();var h=!1,f={step:function(){if(0===u)return p(!0),!0;var t=s.step();f.lastMove=t,f.fire("step");var e=t/u,n=e<=.01;return p(n),n},getNodePosition:function(t){return O(t).pos},setNodePosition:function(t){var e=O(t);e.setPosition.apply(e,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(t){var e=c[t];if(e)return{from:e.from.pos,to:e.to.pos}},getGraphRect:function(){return s.getBBox()},forEachBody:m,pinNode:function(t,e){var n=O(t.id);n.isPinned=!!e},isNodePinned:function(t){return O(t.id).isPinned},dispose:function(){t.off("changed",w),f.fire("disposed")},getBody:y,getSpring:v,getForceVectorLength:g,simulator:s,graph:t,lastMove:0};return r(f),f;function p(t){h!==t&&(h=t,_(t))}function m(t){l.forEach(t)}function g(){var t=0,e=0;return m((function(n){t+=Math.abs(n.force.x),e+=Math.abs(n.force.y)})),Math.sqrt(t*t+e*e)}function v(e,n){var r;if(void 0===n)r="object"!==typeof e?e:e.id;else{var i=t.hasLink(e,n);if(!i)return;r=i.id}return c[r]}function y(t){return l.get(t)}function b(){t.on("changed",w)}function _(t){f.fire("stable",t)}function w(e){for(var n=0;n<e.length;++n){var r=e[n];"add"===r.changeType?(r.node&&S(r.node.id),r.link&&M(r.link)):"remove"===r.changeType&&(r.node&&E(r.node),r.link&&T(r.link))}u=t.getNodesCount()}function x(){u=0,t.forEachNode((function(t){S(t.id),u+=1})),t.forEachLink(M)}function S(e){var n=l.get(e);if(!n){var r=t.getNode(e);if(!r)throw new Error("initBody() was called with unknown node id");var i=r.position;if(!i){var o=C(r);i=s.getBestNewBodyPosition(o)}n=s.addBodyAt(i),n.id=e,l.set(e,n),A(e),k(r)&&(n.isPinned=!0)}}function E(t){var e=t.id,n=l.get(e);n&&(l.delete(e),s.removeBody(n))}function M(t){A(t.fromId),A(t.toId);var e=l.get(t.fromId),n=l.get(t.toId),r=s.addSpring(e,n,t.length);d(t,r),c[t.id]=r}function T(e){var n=c[e.id];if(n){var r=t.getNode(e.fromId),i=t.getNode(e.toId);r&&A(r.id),i&&A(i.id),delete c[e.id],s.removeSpring(n)}}function C(t){var e=[];if(!t.links)return e;for(var n=Math.min(t.links.length,2),r=0;r<n;++r){var i=t.links[r],o=i.fromId!==t.id?l.get(i.fromId):l.get(i.toId);o&&o.pos&&e.push(o)}return e}function A(t){var e=l.get(t);if(e.mass=a(t),Number.isNaN(e.mass))throw new Error("Node mass should be a number")}function k(t){return t&&(t.isPinned||t.data&&t.data.isPinned)}function O(t){var e=l.get(t);return e||(S(t),e=l.get(t)),e}function R(e){var n=t.getLinks(e);return n?1+n.length/3:1}function P(e){var n=t.getLinks(e);return n?1+n.size/3:1}}function o(){}},9848:function(t,e,n){n(7658);const r=n(9468);t.exports=function(t){return e;function e(e,n){let i=n&&n.indent||0,o=n&&void 0!==n.join?n.join:"\n",s=Array(i+1).join(" "),a=[];for(let l=0;l<t;++l){let t=r(l),n=0===l?"":s;a.push(n+e.replace(/{var}/g,t))}return a.join(o)}}},9411:function(t,e,n){t.exports=i,t.exports.generateFunctionBody=o;const r=n(9848);function i(t){let e=o(t);return new Function("bodies","settings","random",e)}function o(t){let e=r(t),n=`\n  var boundingBox = {\n    ${e("min_{var}: 0, max_{var}: 0,",{indent:4})}\n  };\n\n  return {\n    box: boundingBox,\n\n    update: updateBoundingBox,\n\n    reset: resetBoundingBox,\n\n    getBestNewPosition: function (neighbors) {\n      var ${e("base_{var} = 0",{join:", "})};\n\n      if (neighbors.length) {\n        for (var i = 0; i < neighbors.length; ++i) {\n          let neighborPos = neighbors[i].pos;\n          ${e("base_{var} += neighborPos.{var};",{indent:10})}\n        }\n\n        ${e("base_{var} /= neighbors.length;",{indent:8})}\n      } else {\n        ${e("base_{var} = (boundingBox.min_{var} + boundingBox.max_{var}) / 2;",{indent:8})}\n      }\n\n      var springLength = settings.springLength;\n      return {\n        ${e("{var}: base_{var} + (random.nextDouble() - 0.5) * springLength,",{indent:8})}\n      };\n    }\n  };\n\n  function updateBoundingBox() {\n    var i = bodies.length;\n    if (i === 0) return; // No bodies - no borders.\n\n    ${e("var max_{var} = -Infinity;",{indent:4})}\n    ${e("var min_{var} = Infinity;",{indent:4})}\n\n    while(i--) {\n      // this is O(n), it could be done faster with quadtree, if we check the root node bounds\n      var bodyPos = bodies[i].pos;\n      ${e("if (bodyPos.{var} < min_{var}) min_{var} = bodyPos.{var};",{indent:6})}\n      ${e("if (bodyPos.{var} > max_{var}) max_{var} = bodyPos.{var};",{indent:6})}\n    }\n\n    ${e("boundingBox.min_{var} = min_{var};",{indent:4})}\n    ${e("boundingBox.max_{var} = max_{var};",{indent:4})}\n  }\n\n  function resetBoundingBox() {\n    ${e("boundingBox.min_{var} = boundingBox.max_{var} = 0;",{indent:4})}\n  }\n`;return n}},792:function(t,e,n){const r=n(9848);function i(t,e){let n=o(t,e),{Body:r}=new Function(n)();return r}function o(t,e){let n=`\n${a(t,e)}\n${s(t,e)}\nreturn {Body: Body, Vector: Vector};\n`;return n}function s(t){let e=r(t),n=e("{var}",{join:", "});return`\nfunction Body(${n}) {\n  this.isPinned = false;\n  this.pos = new Vector(${n});\n  this.force = new Vector();\n  this.velocity = new Vector();\n  this.mass = 1;\n\n  this.springCount = 0;\n  this.springLength = 0;\n}\n\nBody.prototype.reset = function() {\n  this.force.reset();\n  this.springCount = 0;\n  this.springLength = 0;\n}\n\nBody.prototype.setPosition = function (${n}) {\n  ${e("this.pos.{var} = {var} || 0;",{indent:2})}\n};`}function a(t,e){let n=r(t),i="";e&&(i=`${n("\n   var v{var};\nObject.defineProperty(this, '{var}', {\n  set: function(v) { \n    if (!Number.isFinite(v)) throw new Error('Cannot set non-numbers to {var}');\n    v{var} = v; \n  },\n  get: function() { return v{var}; }\n});")}`);let o=n("{var}",{join:", "});return`function Vector(${o}) {\n  ${i}\n    if (typeof arguments[0] === 'object') {\n      // could be another vector\n      let v = arguments[0];\n      ${n('if (!Number.isFinite(v.{var})) throw new Error("Expected value is not a finite number at Vector constructor ({var})");',{indent:4})}\n      ${n("this.{var} = v.{var};",{indent:4})}\n    } else {\n      ${n('this.{var} = typeof {var} === "number" ? {var} : 0;',{indent:4})}\n    }\n  }\n  \n  Vector.prototype.reset = function () {\n    ${n("this.{var} = ",{join:""})}0;\n  };`}t.exports=i,t.exports.generateCreateBodyFunctionBody=o,t.exports.getVectorCode=a,t.exports.getBodyCode=s},7738:function(t,e,n){const r=n(9848);function i(t){let e=o(t);return new Function("options",e)}function o(t){let e=r(t),n=`\n  if (!Number.isFinite(options.dragCoefficient)) throw new Error('dragCoefficient is not a finite number');\n\n  return {\n    update: function(body) {\n      ${e("body.force.{var} -= options.dragCoefficient * body.velocity.{var};",{indent:6})}\n    }\n  };\n`;return n}t.exports=i,t.exports.generateCreateDragForceFunctionBody=o},9895:function(t,e,n){const r=n(9848);function i(t){let e=o(t);return new Function("options","random",e)}function o(t){let e=r(t),n=`\n  if (!Number.isFinite(options.springCoefficient)) throw new Error('Spring coefficient is not a number');\n  if (!Number.isFinite(options.springLength)) throw new Error('Spring length is not a number');\n\n  return {\n    /**\n     * Updates forces acting on a spring\n     */\n    update: function (spring) {\n      var body1 = spring.from;\n      var body2 = spring.to;\n      var length = spring.length < 0 ? options.springLength : spring.length;\n      ${e("var d{var} = body2.pos.{var} - body1.pos.{var};",{indent:6})}\n      var r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});\n\n      if (r === 0) {\n        ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:8})}\n        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});\n      }\n\n      var d = r - length;\n      var coefficient = ((spring.coefficient > 0) ? spring.coefficient : options.springCoefficient) * d / r;\n\n      ${e("body1.force.{var} += coefficient * d{var}",{indent:6})};\n      body1.springCount += 1;\n      body1.springLength += r;\n\n      ${e("body2.force.{var} -= coefficient * d{var}",{indent:6})};\n      body2.springCount += 1;\n      body2.springLength += r;\n    }\n  };\n`;return n}t.exports=i,t.exports.generateCreateSpringForceFunctionBody=o},7892:function(t,e,n){const r=n(9848);function i(t){let e=o(t);return new Function("bodies","timeStep","adaptiveTimeStepWeight",e)}function o(t){let e=r(t),n=`\n  var length = bodies.length;\n  if (length === 0) return 0;\n\n  ${e("var d{var} = 0, t{var} = 0;",{indent:2})}\n\n  for (var i = 0; i < length; ++i) {\n    var body = bodies[i];\n    if (body.isPinned) continue;\n\n    if (adaptiveTimeStepWeight && body.springCount) {\n      timeStep = (adaptiveTimeStepWeight * body.springLength/body.springCount);\n    }\n\n    var coeff = timeStep / body.mass;\n\n    ${e("body.velocity.{var} += coeff * body.force.{var};",{indent:4})}\n    ${e("var v{var} = body.velocity.{var};",{indent:4})}\n    var v = Math.sqrt(${e("v{var} * v{var}",{join:" + "})});\n\n    if (v > 1) {\n      // We normalize it so that we move within timeStep range. \n      // for the case when v <= 1 - we let velocity to fade out.\n      ${e("body.velocity.{var} = v{var} / v;",{indent:6})}\n    }\n\n    ${e("d{var} = timeStep * body.velocity.{var};",{indent:4})}\n\n    ${e("body.pos.{var} += d{var};",{indent:4})}\n\n    ${e("t{var} += Math.abs(d{var});",{indent:4})}\n  }\n\n  return (${e("t{var} * t{var}",{join:" + "})})/length;\n`;return n}t.exports=i,t.exports.generateIntegratorFunctionBody=o},6069:function(t,e,n){n(7658);const r=n(9848),i=n(9468);function o(t){let e=s(t);return new Function(e)()}function s(t){let e=r(t),n=Math.pow(2,t),o=`\n${d()}\n${u(t)}\n${a(t)}\n${c(t)}\n${l(t)}\n\nfunction createQuadTree(options, random) {\n  options = options || {};\n  options.gravity = typeof options.gravity === 'number' ? options.gravity : -1;\n  options.theta = typeof options.theta === 'number' ? options.theta : 0.8;\n\n  var gravity = options.gravity;\n  var updateQueue = [];\n  var insertStack = new InsertStack();\n  var theta = options.theta;\n\n  var nodesCache = [];\n  var currentInCache = 0;\n  var root = newNode();\n\n  return {\n    insertBodies: insertBodies,\n\n    /**\n     * Gets root node if it is present\n     */\n    getRoot: function() {\n      return root;\n    },\n\n    updateBodyForce: update,\n\n    options: function(newOptions) {\n      if (newOptions) {\n        if (typeof newOptions.gravity === 'number') {\n          gravity = newOptions.gravity;\n        }\n        if (typeof newOptions.theta === 'number') {\n          theta = newOptions.theta;\n        }\n\n        return this;\n      }\n\n      return {\n        gravity: gravity,\n        theta: theta\n      };\n    }\n  };\n\n  function newNode() {\n    // To avoid pressure on GC we reuse nodes.\n    var node = nodesCache[currentInCache];\n    if (node) {\n${f("      node.")}\n      node.body = null;\n      node.mass = ${e("node.mass_{var} = ",{join:""})}0;\n      ${e("node.min_{var} = node.max_{var} = ",{join:""})}0;\n    } else {\n      node = new QuadNode();\n      nodesCache[currentInCache] = node;\n    }\n\n    ++currentInCache;\n    return node;\n  }\n\n  function update(sourceBody) {\n    var queue = updateQueue;\n    var v;\n    ${e("var d{var};",{indent:4})}\n    var r; \n    ${e("var f{var} = 0;",{indent:4})}\n    var queueLength = 1;\n    var shiftIdx = 0;\n    var pushIdx = 1;\n\n    queue[0] = root;\n\n    while (queueLength) {\n      var node = queue[shiftIdx];\n      var body = node.body;\n\n      queueLength -= 1;\n      shiftIdx += 1;\n      var differentBody = (body !== sourceBody);\n      if (body && differentBody) {\n        // If the current node is a leaf node (and it is not source body),\n        // calculate the force exerted by the current node on body, and add this\n        // amount to body's net force.\n        ${e("d{var} = body.pos.{var} - sourceBody.pos.{var};",{indent:8})}\n        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});\n\n        if (r === 0) {\n          // Poor man's protection against zero distance.\n          ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}\n          r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});\n        }\n\n        // This is standard gravitation force calculation but we divide\n        // by r^3 to save two operations when normalizing force vector.\n        v = gravity * body.mass * sourceBody.mass / (r * r * r);\n        ${e("f{var} += v * d{var};",{indent:8})}\n      } else if (differentBody) {\n        // Otherwise, calculate the ratio s / r,  where s is the width of the region\n        // represented by the internal node, and r is the distance between the body\n        // and the node's center-of-mass\n        ${e("d{var} = node.mass_{var} / node.mass - sourceBody.pos.{var};",{indent:8})}\n        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});\n\n        if (r === 0) {\n          // Sorry about code duplication. I don't want to create many functions\n          // right away. Just want to see performance first.\n          ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}\n          r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});\n        }\n        // If s / r < θ, treat this internal node as a single body, and calculate the\n        // force it exerts on sourceBody, and add this amount to sourceBody's net force.\n        if ((node.max_${i(0)} - node.min_${i(0)}) / r < theta) {\n          // in the if statement above we consider node's width only\n          // because the region was made into square during tree creation.\n          // Thus there is no difference between using width or height.\n          v = gravity * node.mass * sourceBody.mass / (r * r * r);\n          ${e("f{var} += v * d{var};",{indent:10})}\n        } else {\n          // Otherwise, run the procedure recursively on each of the current node's children.\n\n          // I intentionally unfolded this loop, to save several CPU cycles.\n${h()}\n        }\n      }\n    }\n\n    ${e("sourceBody.force.{var} += f{var};",{indent:4})}\n  }\n\n  function insertBodies(bodies) {\n    ${e("var {var}min = Number.MAX_VALUE;",{indent:4})}\n    ${e("var {var}max = Number.MIN_VALUE;",{indent:4})}\n    var i = bodies.length;\n\n    // To reduce quad tree depth we are looking for exact bounding box of all particles.\n    while (i--) {\n      var pos = bodies[i].pos;\n      ${e("if (pos.{var} < {var}min) {var}min = pos.{var};",{indent:6})}\n      ${e("if (pos.{var} > {var}max) {var}max = pos.{var};",{indent:6})}\n    }\n\n    // Makes the bounds square.\n    var maxSideLength = -Infinity;\n    ${e("if ({var}max - {var}min > maxSideLength) maxSideLength = {var}max - {var}min ;",{indent:4})}\n\n    currentInCache = 0;\n    root = newNode();\n    ${e("root.min_{var} = {var}min;",{indent:4})}\n    ${e("root.max_{var} = {var}min + maxSideLength;",{indent:4})}\n\n    i = bodies.length - 1;\n    if (i >= 0) {\n      root.body = bodies[i];\n    }\n    while (i--) {\n      insert(bodies[i], root);\n    }\n  }\n\n  function insert(newBody) {\n    insertStack.reset();\n    insertStack.push(root, newBody);\n\n    while (!insertStack.isEmpty()) {\n      var stackItem = insertStack.pop();\n      var node = stackItem.node;\n      var body = stackItem.body;\n\n      if (!node.body) {\n        // This is internal node. Update the total mass of the node and center-of-mass.\n        ${e("var {var} = body.pos.{var};",{indent:8})}\n        node.mass += body.mass;\n        ${e("node.mass_{var} += body.mass * {var};",{indent:8})}\n\n        // Recursively insert the body in the appropriate quadrant.\n        // But first find the appropriate quadrant.\n        var quadIdx = 0; // Assume we are in the 0's quad.\n        ${e("var min_{var} = node.min_{var};",{indent:8})}\n        ${e("var max_{var} = (min_{var} + node.max_{var}) / 2;",{indent:8})}\n\n${s(8)}\n\n        var child = getChild(node, quadIdx);\n\n        if (!child) {\n          // The node is internal but this quadrant is not taken. Add\n          // subnode to it.\n          child = newNode();\n          ${e("child.min_{var} = min_{var};",{indent:10})}\n          ${e("child.max_{var} = max_{var};",{indent:10})}\n          child.body = body;\n\n          setChild(node, quadIdx, child);\n        } else {\n          // continue searching in this quadrant.\n          insertStack.push(child, body);\n        }\n      } else {\n        // We are trying to add to the leaf node.\n        // We have to convert current leaf into internal node\n        // and continue adding two nodes.\n        var oldBody = node.body;\n        node.body = null; // internal nodes do not cary bodies\n\n        if (isSamePosition(oldBody.pos, body.pos)) {\n          // Prevent infinite subdivision by bumping one node\n          // anywhere in this quadrant\n          var retriesCount = 3;\n          do {\n            var offset = random.nextDouble();\n            ${e("var d{var} = (node.max_{var} - node.min_{var}) * offset;",{indent:12})}\n\n            ${e("oldBody.pos.{var} = node.min_{var} + d{var};",{indent:12})}\n            retriesCount -= 1;\n            // Make sure we don't bump it out of the box. If we do, next iteration should fix it\n          } while (retriesCount > 0 && isSamePosition(oldBody.pos, body.pos));\n\n          if (retriesCount === 0 && isSamePosition(oldBody.pos, body.pos)) {\n            // This is very bad, we ran out of precision.\n            // if we do not return from the method we'll get into\n            // infinite loop here. So we sacrifice correctness of layout, and keep the app running\n            // Next layout iteration should get larger bounding box in the first step and fix this\n            return;\n          }\n        }\n        // Next iteration should subdivide node further.\n        insertStack.push(node, oldBody);\n        insertStack.push(node, body);\n      }\n    }\n  }\n}\nreturn createQuadTree;\n\n`;return o;function s(e){let n=[],r=Array(e+1).join(" ");for(let o=0;o<t;++o)n.push(r+`if (${i(o)} > max_${i(o)}) {`),n.push(r+`  quadIdx = quadIdx + ${Math.pow(2,o)};`),n.push(r+`  min_${i(o)} = max_${i(o)};`),n.push(r+`  max_${i(o)} = node.max_${i(o)};`),n.push(r+"}");return n.join("\n")}function h(){let t=Array(11).join(" "),e=[];for(let r=0;r<n;++r)e.push(t+`if (node.quad${r}) {`),e.push(t+`  queue[pushIdx] = node.quad${r};`),e.push(t+"  queueLength += 1;"),e.push(t+"  pushIdx += 1;"),e.push(t+"}");return e.join("\n")}function f(t){let e=[];for(let r=0;r<n;++r)e.push(`${t}quad${r} = null;`);return e.join("\n")}}function a(t){let e=r(t);return`\n  function isSamePosition(point1, point2) {\n    ${e("var d{var} = Math.abs(point1.{var} - point2.{var});",{indent:2})}\n  \n    return ${e("d{var} < 1e-8",{join:" && "})};\n  }  \n`}function l(t){var e=Math.pow(2,t);return`\nfunction setChild(node, idx, child) {\n  ${n()}\n}`;function n(){let t=[];for(let n=0;n<e;++n){let e=0===n?"  ":"  else ";t.push(`${e}if (idx === ${n}) node.quad${n} = child;`)}return t.join("\n")}}function c(t){return`function getChild(node, idx) {\n${e()}\n  return null;\n}`;function e(){let e=[],n=Math.pow(2,t);for(let t=0;t<n;++t)e.push(`  if (idx === ${t}) return node.quad${t};`);return e.join("\n")}}function u(t){let e=r(t),n=Math.pow(2,t);var i=`\nfunction QuadNode() {\n  // body stored inside this node. In quad tree only leaf nodes (by construction)\n  // contain bodies:\n  this.body = null;\n\n  // Child nodes are stored in quads. Each quad is presented by number:\n  // 0 | 1\n  // -----\n  // 2 | 3\n${o("  this.")}\n\n  // Total mass of current node\n  this.mass = 0;\n\n  // Center of mass coordinates\n  ${e("this.mass_{var} = 0;",{indent:2})}\n\n  // bounding box coordinates\n  ${e("this.min_{var} = 0;",{indent:2})}\n  ${e("this.max_{var} = 0;",{indent:2})}\n}\n`;return i;function o(t){let e=[];for(let r=0;r<n;++r)e.push(`${t}quad${r} = null;`);return e.join("\n")}}function d(){return"\n/**\n * Our implementation of QuadTree is non-recursive to avoid GC hit\n * This data structure represent stack of elements\n * which we are trying to insert into quad tree.\n */\nfunction InsertStack () {\n    this.stack = [];\n    this.popIdx = 0;\n}\n\nInsertStack.prototype = {\n    isEmpty: function() {\n        return this.popIdx === 0;\n    },\n    push: function (node, body) {\n        var item = this.stack[this.popIdx];\n        if (!item) {\n            // we are trying to avoid memory pressure: create new element\n            // only when absolutely necessary\n            this.stack[this.popIdx] = new InsertStackElement(node, body);\n        } else {\n            item.node = node;\n            item.body = body;\n        }\n        ++this.popIdx;\n    },\n    pop: function () {\n        if (this.popIdx > 0) {\n            return this.stack[--this.popIdx];\n        }\n    },\n    reset: function () {\n        this.popIdx = 0;\n    }\n};\n\nfunction InsertStackElement(node, body) {\n    this.node = node; // QuadTree node\n    this.body = body; // physical body which needs to be inserted to node\n}\n"}t.exports=o,t.exports.generateQuadTreeFunctionBody=s,t.exports.getInsertStackCode=d,t.exports.getQuadNodeCode=u,t.exports.isSamePosition=a,t.exports.getChildBodyCode=c,t.exports.setChildBodyCode=l},9468:function(t){t.exports=function(t){return 0===t?"x":1===t?"y":2===t?"z":"c"+(t+1)}},2029:function(t,e,n){n(1703),n(7658),t.exports=u;var r=n(792),i=n(6069),o=n(9411),s=n(7738),a=n(9895),l=n(7892),c={};function u(t){var e=n(2227),u=n(3829),h=n(3624);if(t){if(void 0!==t.springCoeff)throw new Error("springCoeff was renamed to springCoefficient");if(void 0!==t.dragCoeff)throw new Error("dragCoeff was renamed to dragCoefficient")}t=u(t,{springLength:10,springCoefficient:.8,gravity:-12,theta:.8,dragCoefficient:.9,timeStep:.5,adaptiveTimeStepWeight:0,dimensions:2,debug:!1});var f=c[t.dimensions];if(!f){var p=t.dimensions;f={Body:r(p,t.debug),createQuadTree:i(p),createBounds:o(p),createDragForce:s(p),createSpringForce:a(p),integrate:l(p)},c[p]=f}var m=f.Body,g=f.createQuadTree,v=f.createBounds,y=f.createDragForce,b=f.createSpringForce,_=f.integrate,w=t=>new m(t),x=n(7424).random(42),S=[],E=[],M=g(t,x),T=v(S,t,x),C=b(t,x),A=y(t),k=0,O=[],R=new Map,P=0;I("nbody",F),I("spring",B);var L={bodies:S,quadTree:M,springs:E,settings:t,addForce:I,removeForce:N,getForces:U,step:function(){for(var e=0;e<O.length;++e)O[e](P);var n=_(S,t.timeStep,t.adaptiveTimeStepWeight);return P+=1,n},addBody:function(t){if(!t)throw new Error("Body is required");return S.push(t),t},addBodyAt:function(t){if(!t)throw new Error("Body position is required");var e=w(t);return S.push(e),e},removeBody:function(t){if(t){var e=S.indexOf(t);if(!(e<0))return S.splice(e,1),0===S.length&&T.reset(),!0}},addSpring:function(t,n,r,i){if(!t||!n)throw new Error("Cannot add null spring to force simulator");"number"!==typeof r&&(r=-1);var o=new e(t,n,r,i>=0?i:-1);return E.push(o),o},getTotalMovement:function(){return k},removeSpring:function(t){if(t){var e=E.indexOf(t);return e>-1?(E.splice(e,1),!0):void 0}},getBestNewBodyPosition:function(t){return T.getBestNewPosition(t)},getBBox:D,getBoundingBox:D,invalidateBBox:function(){console.warn("invalidateBBox() is deprecated, bounds always recomputed on `getBBox()` call")},gravity:function(e){return void 0!==e?(t.gravity=e,M.options({gravity:e}),this):t.gravity},theta:function(e){return void 0!==e?(t.theta=e,M.options({theta:e}),this):t.theta},random:x};return d(t,L),h(L),L;function D(){return T.update(),T.box}function I(t,e){if(R.has(t))throw new Error("Force "+t+" is already added");R.set(t,e),O.push(e)}function N(t){var e=O.indexOf(R.get(t));e<0||(O.splice(e,1),R.delete(t))}function U(){return R}function F(){if(0!==S.length){M.insertBodies(S);var t=S.length;while(t--){var e=S[t];e.isPinned||(e.reset(),M.updateBodyForce(e),A.update(e))}}}function B(){var t=E.length;while(t--)C.update(E[t])}}function d(t,e){for(var n in t)h(t,e,n)}function h(t,e,n){if(t.hasOwnProperty(n)&&"function"!==typeof e[n]){var r=Number.isFinite(t[n]);e[n]=r?function(r){if(void 0!==r){if(!Number.isFinite(r))throw new Error("Value of "+n+" should be a valid number.");return t[n]=r,e}return t[n]}:function(r){return void 0!==r?(t[n]=r,e):t[n]}}}},2227:function(t){function e(t,e,n,r){this.from=t,this.to=e,this.length=n,this.coefficient=r}t.exports=e},2340:function(t,e,n){n(1703),n(7658),t.exports=i;var r=n(3624);function i(t){if(t=t||{},"uniqueLinkId"in t&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n","\n","Note: there is also change in default behavior: From now on each graph\nis considered to be not a multigraph by default (each edge is unique)."),t.multigraph=t.uniqueLinkId),void 0===t.multigraph&&(t.multigraph=!1),"function"!==typeof Map)throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var e=new Map,n=new Map,i={},c=0,u=t.multigraph?M:E,d=[],h=U,f=U,p=U,m=U,g={version:20,addNode:_,addLink:S,removeLink:k,removeNode:x,getNode:w,getNodeCount:T,getLinkCount:C,getEdgeCount:C,getLinksCount:C,getNodesCount:T,getLinks:A,forEachNode:V,forEachLinkedNode:D,forEachLink:L,beginUpdate:p,endUpdate:m,clear:P,hasLink:R,hasNode:w,getLink:R};return r(g),v(),g;function v(){var t=g.on;function e(){return g.beginUpdate=p=F,g.endUpdate=m=B,h=y,f=b,g.on=t,t.apply(g,arguments)}g.on=e}function y(t,e){d.push({link:t,changeType:e})}function b(t,e){d.push({node:t,changeType:e})}function _(t,n){if(void 0===t)throw new Error("Invalid node identifier");p();var r=w(t);return r?(r.data=n,f(r,"update")):(r=new o(t,n),f(r,"add")),e.set(t,r),m(),r}function w(t){return e.get(t)}function x(t){var n=w(t);if(!n)return!1;p();var r=n.links;return r&&(r.forEach(O),n.links=null),e.delete(t),f(n,"remove"),m(),!0}function S(t,e,r){p();var i=w(t)||_(t),o=w(e)||_(e),a=u(t,e,r),l=n.has(a.id);return n.set(a.id,a),s(i,a),t!==e&&s(o,a),h(a,l?"update":"add"),m(),a}function E(t,e,r){var i=l(t,e),o=n.get(i);return o?(o.data=r,o):new a(t,e,r,i)}function M(t,e,n){var r=l(t,e),o=i.hasOwnProperty(r);if(o||R(t,e)){o||(i[r]=0);var s="@"+ ++i[r];r=l(t+s,e+s)}return new a(t,e,n,r)}function T(){return e.size}function C(){return n.size}function A(t){var e=w(t);return e?e.links:null}function k(t,e){return void 0!==e&&(t=R(t,e)),O(t)}function O(t){if(!t)return!1;if(!n.get(t.id))return!1;p(),n.delete(t.id);var e=w(t.fromId),r=w(t.toId);return e&&e.links.delete(t),r&&r.links.delete(t),h(t,"remove"),m(),!0}function R(t,e){if(void 0!==t&&void 0!==e)return n.get(l(t,e))}function P(){p(),V((function(t){x(t.id)})),m()}function L(t){if("function"===typeof t){var e=n.values(),r=e.next();while(!r.done){if(t(r.value))return!0;r=e.next()}}}function D(t,e,n){var r=w(t);if(r&&r.links&&"function"===typeof e)return n?N(r.links,t,e):I(r.links,t,e)}function I(t,n,r){var i,o=t.values(),s=o.next();while(!s.done){var a=s.value,l=a.fromId===n?a.toId:a.fromId;if(i=r(e.get(l),a),i)return!0;s=o.next()}}function N(t,n,r){var i,o=t.values(),s=o.next();while(!s.done){var a=s.value;if(a.fromId===n&&(i=r(e.get(a.toId),a),i))return!0;s=o.next()}}function U(){}function F(){c+=1}function B(){c-=1,0===c&&d.length>0&&(g.fire("changed",d),d.length=0)}function V(t){if("function"!==typeof t)throw new Error("Function is expected to iterate over graph nodes. You passed "+t);var n=e.values(),r=n.next();while(!r.done){if(t(r.value))return!0;r=n.next()}}}function o(t,e){this.id=t,this.links=null,this.data=e}function s(t,e){t.links?t.links.add(e):t.links=new Set([e])}function a(t,e,n,r){this.fromId=t,this.toId=e,this.data=n,this.id=r}function l(t,e){return t.toString()+"👉 "+e.toString()}},3829:function(t){function e(t,n){var r;if(t||(t={}),n)for(r in n)if(n.hasOwnProperty(r)){var i=t.hasOwnProperty(r),o=typeof n[r],s=!i||typeof t[r]!==o;s?t[r]=n[r]:"object"===o&&(t[r]=e(t[r],n[r]))}return t}t.exports=e},7424:function(t,e,n){function r(t){var e="number"===typeof t?t:+new Date;return new i(e)}function i(t){this.seed=t}function o(){var t,e,n;do{e=2*this.nextDouble()-1,n=2*this.nextDouble()-1,t=e*e+n*n}while(t>=1||0===t);return e*Math.sqrt(-2*Math.log(t)/t)}function s(){var t=1.5,e=Math.pow(a(1+t)*Math.sin(Math.PI*t/2)/(a((1+t)/2)*t*Math.pow(2,(t-1)/2)),1/t);return this.gaussian()*e/Math.pow(Math.abs(this.gaussian()),1/t)}function a(t){return Math.sqrt(2*Math.PI/t)*Math.pow(1/Math.E*(t+1/(12*t-1/(10*t))),t)}function l(){var t=this.seed;return t=t+2127912214+(t<<12)&4294967295,t=4294967295&(3345072700^t^t>>>19),t=t+374761393+(t<<5)&4294967295,t=4294967295&(t+3550635116^t<<9),t=t+4251993797+(t<<3)&4294967295,t=4294967295&(3042594569^t^t>>>16),this.seed=t,(268435455&t)/268435456}function c(t){return Math.floor(this.nextDouble()*t)}function u(t,e){var n=e||r();if("function"!==typeof n.next)throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:o,shuffle:i};function i(){var e,r,i;for(e=t.length-1;e>0;--e)r=n.next(e+1),i=t[r],t[r]=t[e],t[e]=i;return t}function o(e){var r,i,o;for(r=t.length-1;r>0;--r)i=n.next(r+1),o=t[i],t[i]=t[r],t[r]=o,e(o);t.length&&e(t[0])}}n(1703),t.exports=r,t.exports.random=r,t.exports.randomIterator=u,i.prototype.next=c,i.prototype.nextDouble=l,i.prototype.uniform=l,i.prototype.gaussian=o,i.prototype.levy=s},9427:function(t,e,n){"use strict";n.d(e,{z:function(){return o}});n(1703);var r,i=function(){return Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))};function o(t,e){void 0===e&&(e={});var n=e.registrationOptions;void 0===n&&(n={}),delete e.registrationOptions;var o=function(t){var n=[],r=arguments.length-1;while(r-- >0)n[r]=arguments[r+1];e&&e[t]&&e[t].apply(e,n)};"serviceWorker"in navigator&&r.then((function(){i()?(l(t,o,n),navigator.serviceWorker.ready.then((function(t){o("ready",t)})).catch((function(t){return s(o,t)}))):(a(t,o,n),navigator.serviceWorker.ready.then((function(t){o("ready",t)})).catch((function(t){return s(o,t)})))}))}function s(t,e){navigator.onLine||t("offline"),t("error",e)}function a(t,e,n){navigator.serviceWorker.register(t,n).then((function(t){e("registered",t),t.waiting?e("updated",t):t.onupdatefound=function(){e("updatefound",t);var n=t.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?e("updated",t):e("cached",t))}}})).catch((function(t){return s(e,t)}))}function l(t,e,n){fetch(t).then((function(r){404===r.status?(e("error",new Error("Service worker not found at "+t)),c()):-1===r.headers.get("content-type").indexOf("javascript")?(e("error",new Error("Expected "+t+" to have javascript content-type, but received "+r.headers.get("content-type"))),c()):a(t,e,n)})).catch((function(t){return s(e,t)}))}function c(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){return s(emit,t)}))}"undefined"!==typeof window&&(r="undefined"!==typeof Promise?new Promise((function(t){return window.addEventListener("load",t)})):{then:function(t){return window.addEventListener("load",t)}})},8305:function(t,e,n){n(1703),n(7658),n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315),function(e){t.exports=e()}((function(){var t=Math.floor,e=Math.abs,r=Math.pow;return function(){function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var l=void 0;if(!a&&l)return require(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};e[s][0].call(u.exports,(function(t){var n=e[s][1][t];return i(n||t)}),u,u.exports,t,e,n,r)}return n[s].exports}for(var o=void 0,s=0;s<r.length;s++)i(r[s]);return i}return t}()({1:[function(t,e,n){"use strict";function r(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");-1===n&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function i(t,e,n){return 3*(e+n)/4-n}function o(t){var e,n,o=r(t),s=o[0],a=o[1],l=new d(i(t,s,a)),c=0,h=0<a?s-4:s;for(n=0;n<h;n+=4)e=u[t.charCodeAt(n)]<<18|u[t.charCodeAt(n+1)]<<12|u[t.charCodeAt(n+2)]<<6|u[t.charCodeAt(n+3)],l[c++]=255&e>>16,l[c++]=255&e>>8,l[c++]=255&e;return 2===a&&(e=u[t.charCodeAt(n)]<<2|u[t.charCodeAt(n+1)]>>4,l[c++]=255&e),1===a&&(e=u[t.charCodeAt(n)]<<10|u[t.charCodeAt(n+1)]<<4|u[t.charCodeAt(n+2)]>>2,l[c++]=255&e>>8,l[c++]=255&e),l}function s(t){return c[63&t>>18]+c[63&t>>12]+c[63&t>>6]+c[63&t]}function a(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(16711680&t[o]<<16)+(65280&t[o+1]<<8)+(255&t[o+2]),i.push(s(r));return i.join("")}function l(t){for(var e,n=t.length,r=n%3,i=[],o=16383,s=0,l=n-r;s<l;s+=o)i.push(a(t,s,s+o>l?l:s+o));return 1===r?(e=t[n-1],i.push(c[e>>2]+c[63&e<<4]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],i.push(c[e>>10]+c[63&e>>4]+c[63&e<<2]+"=")),i.join("")}n.byteLength=function(t){var e=r(t),n=e[0],i=e[1];return 3*(n+i)/4-i},n.toByteArray=o,n.fromByteArray=l;for(var c=[],u=[],d="undefined"==typeof Uint8Array?Array:Uint8Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,p=h.length;f<p;++f)c[f]=h[f],u[h.charCodeAt(f)]=f;u[45]=62,u[95]=63},{}],2:[function(){},{}],3:[function(t,e,n){(function(){(function(){
/*!
          * The buffer module from node.js, for the browser.
          *
          * @author   Feross Aboukhadijeh <https://feross.org>
          * @license  MIT
          */
"use strict";var e=String.fromCharCode,i=Math.min;function o(t){if(2147483647<t)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return e.__proto__=s.prototype,e}function s(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return u(t)}return a(t,e,n)}function a(t,e,n){if("string"==typeof t)return d(t,e);if(ArrayBuffer.isView(t))return h(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if($(t,ArrayBuffer)||t&&$(t.buffer,ArrayBuffer))return f(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return s.from(r,e,n);var i=p(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return s.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(0>t)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function c(t,e,n){return l(t),0>=t||void 0===e?o(t):"string"==typeof n?o(t).fill(e,n):o(t).fill(e)}function u(t){return l(t),o(0>t?0:0|m(t))}function d(t,e){if(("string"!=typeof e||""===e)&&(e="utf8"),!s.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var n=0|g(t,e),r=o(n),i=r.write(t,e);return i!==n&&(r=r.slice(0,i)),r}function h(t){for(var e=0>t.length?0:0|m(t.length),n=o(e),r=0;r<e;r+=1)n[r]=255&t[r];return n}function f(t,e,n){if(0>e||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),r.__proto__=s.prototype,r}function p(t){if(s.isBuffer(t)){var e=0|m(t.length),n=o(e);return 0===n.length||t.copy(n,0,0,e),n}return void 0===t.length?"Buffer"===t.type&&Array.isArray(t.data)?h(t.data):void 0:"number"!=typeof t.length||q(t.length)?o(0):h(t)}function m(t){if(t>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|t}function g(t,e){if(s.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||$(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,r=2<arguments.length&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(t).length;default:if(i)return r?-1:z(t).length;e=(""+e).toLowerCase(),i=!0}}function v(t,e,n){var r=!1;if((void 0===e||0>e)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),0>=n)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,n);case"utf8":case"utf-8":return A(this,e,n);case"ascii":return O(this,e,n);case"latin1":case"binary":return R(this,e,n);case"base64":return C(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function y(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function b(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:-2147483648>n&&(n=-2147483648),n=+n,q(n)&&(n=i?0:t.length-1),0>n&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(0>n){if(!i)return-1;n=0}if("string"==typeof e&&(e=s.from(e,r)),s.isBuffer(e))return 0===e.length?-1:_(t,e,n,r,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):_(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function _(t,e,n,r,i){function o(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}var s,a=1,l=t.length,c=e.length;if(void 0!==r&&(r=(r+"").toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(2>t.length||2>e.length)return-1;a=2,l/=2,c/=2,n/=2}if(i){var u=-1;for(s=n;s<l;s++)if(o(t,s)!==o(e,-1===u?0:s-u))-1!==u&&(s-=s-u),u=-1;else if(-1===u&&(u=s),s-u+1===c)return u*a}else for(n+c>l&&(n=l-c),s=n;0<=s;s--){for(var d=!0,h=0;h<c;h++)if(o(t,s+h)!==o(e,h)){d=!1;break}if(d)return s}return-1}function w(t,e,n,r){n=+n||0;var i=t.length-n;r?(r=+r,r>i&&(r=i)):r=i;var o=e.length;r>o/2&&(r=o/2);for(var s,a=0;a<r;++a){if(s=parseInt(e.substr(2*a,2),16),q(s))return a;t[n+a]=s}return a}function x(t,e,n,r){return G(z(e,t.length-n),t,n,r)}function S(t,e,n,r){return G(j(e),t,n,r)}function E(t,e,n,r){return S(t,e,n,r)}function M(t,e,n,r){return G(W(e),t,n,r)}function T(t,e,n,r){return G(H(e,t.length-n),t,n,r)}function C(t,e,n){return 0===e&&n===t.length?Y.fromByteArray(t):Y.fromByteArray(t.slice(e,n))}function A(t,e,n){n=i(t.length,n);for(var r=[],o=e;o<n;){var s,a,l,c,u=t[o],d=null,h=239<u?4:223<u?3:191<u?2:1;if(o+h<=n)1===h?128>u&&(d=u):2===h?(s=t[o+1],128==(192&s)&&(c=(31&u)<<6|63&s,127<c&&(d=c))):3===h?(s=t[o+1],a=t[o+2],128==(192&s)&&128==(192&a)&&(c=(15&u)<<12|(63&s)<<6|63&a,2047<c&&(55296>c||57343<c)&&(d=c))):4===h&&(s=t[o+1],a=t[o+2],l=t[o+3],128==(192&s)&&128==(192&a)&&128==(192&l)&&(c=(15&u)<<18|(63&s)<<12|(63&a)<<6|63&l,65535<c&&1114112>c&&(d=c)));null===d?(d=65533,h=1):65535<d&&(d-=65536,r.push(55296|1023&d>>>10),d=56320|1023&d),r.push(d),o+=h}return k(r)}function k(t){var n=t.length;if(n<=4096)return e.apply(String,t);for(var r="",i=0;i<n;)r+=e.apply(String,t.slice(i,i+=4096));return r}function O(t,n,r){var o="";r=i(t.length,r);for(var s=n;s<r;++s)o+=e(127&t[s]);return o}function R(t,n,r){var o="";r=i(t.length,r);for(var s=n;s<r;++s)o+=e(t[s]);return o}function P(t,e,n){var r=t.length;(!e||0>e)&&(e=0),(!n||0>n||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=V(t[o]);return i}function L(t,n,r){for(var i=t.slice(n,r),o="",s=0;s<i.length;s+=2)o+=e(i[s]+256*i[s+1]);return o}function D(t,e,n){if(0!=t%1||0>t)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function I(t,e,n,r,i,o){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function N(t,e,n,r){if(n+r>t.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("Index out of range")}function U(t,e,n,r,i){return e=+e,n>>>=0,i||N(t,e,n,4,34028234663852886e22,-34028234663852886e22),X.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,i){return e=+e,n>>>=0,i||N(t,e,n,8,17976931348623157e292,-17976931348623157e292),X.write(t,e,n,r,52,8),n+8}function B(t){if(t=t.split("=")[0],t=t.trim().replace(Z,""),2>t.length)return"";for(;0!=t.length%4;)t+="=";return t}function V(t){return 16>t?"0"+t.toString(16):t.toString(16)}function z(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],s=0;s<r;++s){if(n=t.charCodeAt(s),55295<n&&57344>n){if(!i){if(56319<n){-1<(e-=3)&&o.push(239,191,189);continue}if(s+1===r){-1<(e-=3)&&o.push(239,191,189);continue}i=n;continue}if(56320>n){-1<(e-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(e-=3)&&o.push(239,191,189);if(i=null,128>n){if(0>(e-=1))break;o.push(n)}else if(2048>n){if(0>(e-=2))break;o.push(192|n>>6,128|63&n)}else if(65536>n){if(0>(e-=3))break;o.push(224|n>>12,128|63&n>>6,128|63&n)}else{if(!(1114112>n))throw new Error("Invalid code point");if(0>(e-=4))break;o.push(240|n>>18,128|63&n>>12,128|63&n>>6,128|63&n)}}return o}function j(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function H(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!(0>(e-=2));++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function W(t){return Y.toByteArray(B(t))}function G(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function $(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function q(t){return t!==t}var Y=t("base64-js"),X=t("ieee754");n.Buffer=s,n.SlowBuffer=function(t){return+t!=t&&(t=0),s.alloc(+t)},n.INSPECT_MAX_BYTES=50,n.kMaxLength=2147483647,s.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(e){return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){return s.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){return s.isBuffer(this)?this.byteOffset:void 0}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192,s.from=function(t,e,n){return a(t,e,n)},s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,s.alloc=function(t,e,n){return c(t,e,n)},s.allocUnsafe=function(t){return u(t)},s.allocUnsafeSlow=function(t){return u(t)},s.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==s.prototype},s.compare=function(t,e){if($(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),$(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var n=t.length,r=e.length,o=0,a=i(n,r);o<a;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},s.isEncoding=function(t){switch((t+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=s.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if($(o,Uint8Array)&&(o=s.from(o)),!s.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},s.byteLength=g,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(0!=t%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},s.prototype.swap32=function(){var t=this.length;if(0!=t%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},s.prototype.swap64=function(){var t=this.length;if(0!=t%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},s.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?A(this,0,t):v.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},s.prototype.compare=function(t,e,n,r,o){if($(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),0>e||n>t.length||0>r||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,o>>>=0,this===t)return 0;for(var a=o-r,l=n-e,c=i(a,l),u=this.slice(r,o),d=t.slice(e,n),h=0;h<c;++h)if(u[h]!==d[h]){a=u[h],l=d[h];break}return a<l?-1:l<a?1:0},s.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},s.prototype.indexOf=function(t,e,n){return b(this,t,e,n,!0)},s.prototype.lastIndexOf=function(t,e,n){return b(this,t,e,n,!1)},s.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),0<t.length&&(0>n||0>e)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return w(this,t,e,n);case"utf8":case"utf-8":return x(this,t,e,n);case"ascii":return S(this,t,e,n);case"latin1":case"binary":return E(this,t,e,n);case"base64":return M(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},s.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),e<t&&(e=t);var r=this.subarray(t,e);return r.__proto__=s.prototype,r},s.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||D(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},s.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||D(t,e,this.length);for(var r=this[t+--e],i=1;0<e&&(i*=256);)r+=this[t+--e]*i;return r},s.prototype.readUInt8=function(t,e){return t>>>=0,e||D(t,1,this.length),this[t]},s.prototype.readUInt16LE=function(t,e){return t>>>=0,e||D(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUInt16BE=function(t,e){return t>>>=0,e||D(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUInt32LE=function(t,e){return t>>>=0,e||D(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUInt32BE=function(t,e){return t>>>=0,e||D(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||D(t,e,this.length);for(var i=this[t],o=1,s=0;++s<e&&(o*=256);)i+=this[t+s]*o;return o*=128,i>=o&&(i-=r(2,8*e)),i},s.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||D(t,e,this.length);for(var i=e,o=1,s=this[t+--i];0<i&&(o*=256);)s+=this[t+--i]*o;return o*=128,s>=o&&(s-=r(2,8*e)),s},s.prototype.readInt8=function(t,e){return t>>>=0,e||D(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){t>>>=0,e||D(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(t,e){t>>>=0,e||D(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(t,e){return t>>>=0,e||D(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return t>>>=0,e||D(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,e){return t>>>=0,e||D(t,4,this.length),X.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return t>>>=0,e||D(t,4,this.length),X.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return t>>>=0,e||D(t,8,this.length),X.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return t>>>=0,e||D(t,8,this.length),X.read(this,t,!1,52,8)},s.prototype.writeUIntLE=function(t,e,n,i){if(t=+t,e>>>=0,n>>>=0,!i){var o=r(2,8*n)-1;I(this,t,e,n,o,0)}var s=1,a=0;for(this[e]=255&t;++a<n&&(s*=256);)this[e+a]=255&t/s;return e+n},s.prototype.writeUIntBE=function(t,e,n,i){if(t=+t,e>>>=0,n>>>=0,!i){var o=r(2,8*n)-1;I(this,t,e,n,o,0)}var s=n-1,a=1;for(this[e+s]=255&t;0<=--s&&(a*=256);)this[e+s]=255&t/a;return e+n},s.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,1,255,0),this[e]=255&t,e+1},s.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},s.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e>>>=0,!i){var o=r(2,8*n-1);I(this,t,e,n,o-1,-o)}var s=0,a=1,l=0;for(this[e]=255&t;++s<n&&(a*=256);)0>t&&0===l&&0!==this[e+s-1]&&(l=1),this[e+s]=255&(t/a>>0)-l;return e+n},s.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e>>>=0,!i){var o=r(2,8*n-1);I(this,t,e,n,o-1,-o)}var s=n-1,a=1,l=0;for(this[e+s]=255&t;0<=--s&&(a*=256);)0>t&&0===l&&0!==this[e+s+1]&&(l=1),this[e+s]=255&(t/a>>0)-l;return e+n},s.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,1,127,-128),0>t&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},s.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeFloatLE=function(t,e,n){return U(this,t,e,!0,n)},s.prototype.writeFloatBE=function(t,e,n){return U(this,t,e,!1,n)},s.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},s.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},s.prototype.copy=function(t,e,n,r){if(!s.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),0<r&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("Index out of range");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i=r-n;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,n,r);else if(this===t&&n<e&&e<r)for(var o=i-1;0<=o;--o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,r),e);return i},s.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){var i=t.charCodeAt(0);("utf8"===r&&128>i||"latin1"===r)&&(t=i)}}else"number"==typeof t&&(t&=255);if(0>e||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=s.isBuffer(t)?t:s.from(t,r),l=a.length;if(0===l)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=a[o%l]}return this};var Z=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,t("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:9}],4:[function(t,e,n){(function(r){(function(){function i(){let t;try{t=n.storage.getItem("debug")}catch(t){}return!t&&"undefined"!=typeof r&&"env"in r&&(t=r.env.DEBUG),t}n.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"===t||(r++,"%c"===t&&(i=r))})),t.splice(i,0,n)},n.save=function(t){try{t?n.storage.setItem("debug",t):n.storage.removeItem("debug")}catch(t){}},n.load=i,n.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},n.storage=function(){try{return localStorage}catch(t){}}(),n.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],n.log=console.debug||console.log||(()=>{}),e.exports=t("./common")(n);const{formatters:o}=e.exports;o.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(this)}).call(this,t("_process"))},{"./common":5,_process:12}],5:[function(t,n){n.exports=function(n){function r(t){function e(...t){if(!e.enabled)return;const i=e,o=+new Date,s=o-(n||o);i.diff=s,i.prev=n,i.curr=o,n=o,t[0]=r.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let a=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((e,n)=>{if("%%"===e)return"%";a++;const o=r.formatters[n];if("function"==typeof o){const n=t[a];e=o.call(i,n),t.splice(a,1),a--}return e})),r.formatArgs.call(i,t);const l=i.log||r.log;l.apply(i,t)}let n,o=null;return e.namespace=t,e.useColors=r.useColors(),e.color=r.selectColor(t),e.extend=i,e.destroy=r.destroy,Object.defineProperty(e,"enabled",{enumerable:!0,configurable:!1,get:()=>null===o?r.enabled(t):o,set:t=>{o=t}}),"function"==typeof r.init&&r.init(e),e}function i(t,e){const n=r(this.namespace+("undefined"==typeof e?":":e)+t);return n.log=this.log,n}function o(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(t){return t instanceof Error?t.stack||t.message:t},r.disable=function(){const t=[...r.names.map(o),...r.skips.map(o).map((t=>"-"+t))].join(",");return r.enable(""),t},r.enable=function(t){let e;r.save(t),r.names=[],r.skips=[];const n=("string"==typeof t?t:"").split(/[\s,]+/),i=n.length;for(e=0;e<i;e++)n[e]&&(t=n[e].replace(/\*/g,".*?"),"-"===t[0]?r.skips.push(new RegExp("^"+t.substr(1)+"$")):r.names.push(new RegExp("^"+t+"$")))},r.enabled=function(t){if("*"===t[t.length-1])return!0;let e,n;for(e=0,n=r.skips.length;e<n;e++)if(r.skips[e].test(t))return!1;for(e=0,n=r.names.length;e<n;e++)if(r.names[e].test(t))return!0;return!1},r.humanize=t("ms"),r.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(n).forEach((t=>{r[t]=n[t]})),r.names=[],r.skips=[],r.formatters={},r.selectColor=function(t){let n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return r.colors[e(n)%r.colors.length]},r.enable(r.load()),r}},{ms:11}],6:[function(t,e){"use strict";function n(t,e){for(const n in e)Object.defineProperty(t,n,{value:e[n],enumerable:!0,configurable:!0});return t}e.exports=function(t,e,r){if(!t||"string"==typeof t)throw new TypeError("Please pass an Error to err-code");r||(r={}),"object"==typeof e&&(r=e,e=""),e&&(r.code=e);try{return n(t,r)}catch(e){r.message=t.message,r.stack=t.stack;const i=function(){};i.prototype=Object.create(Object.getPrototypeOf(t));const o=n(new i,r);return o}}},{}],7:[function(t,e){"use strict";function n(t){console&&console.warn&&console.warn(t)}function r(){r.init.call(this)}function i(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function o(t){return void 0===t._maxListeners?r.defaultMaxListeners:t._maxListeners}function s(t,e,r,s){var a,l,c;if(i(r),l=t._events,void 0===l?(l=t._events=Object.create(null),t._eventsCount=0):(void 0!==l.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),l=t._events),c=l[e]),void 0===c)c=l[e]=r,++t._eventsCount;else if("function"==typeof c?c=l[e]=s?[r,c]:[c,r]:s?c.unshift(r):c.push(r),a=o(t),0<a&&c.length>a&&!c.warned){c.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=c.length,n(u)}return t}function a(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=a.bind(r);return i.listener=n,r.wrapFn=i,i}function c(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?f(i):d(i,i.length)}function u(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function d(t,e){for(var n=Array(e),r=0;r<e;++r)n[r]=t[r];return n}function h(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function f(t){for(var e=Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function p(t,e,n){"function"==typeof t.on&&m(t,"error",e,n)}function m(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){r.once&&t.removeEventListener(e,i),n(o)}))}}var g,v="object"==typeof Reflect?Reflect:null,y=v&&"function"==typeof v.apply?v.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};g=v&&"function"==typeof v.ownKeys?v.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var b=Number.isNaN||function(t){return t!==t};e.exports=r,e.exports.once=function(t,e){return new Promise((function(n,r){function i(n){t.removeListener(e,o),r(n)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}m(t,e,o,{once:!0}),"error"!==e&&p(t,i,{once:!0})}))},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var _=10;Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return _},set:function(t){if("number"!=typeof t||0>t||b(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");_=t}}),r.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(t){if("number"!=typeof t||0>t||b(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},r.prototype.getMaxListeners=function(){return o(this)},r.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(0<e.length&&(o=e[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var a=i[t];if(void 0===a)return!1;if("function"==typeof a)y(a,this,e);else{var l=a.length,c=d(a,l);for(n=0;n<l;++n)y(c[n],this,e)}return!0},r.prototype.addListener=function(t,e){return s(this,t,e,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(t,e){return s(this,t,e,!0)},r.prototype.once=function(t,e){return i(e),this.on(t,l(this,t,e)),this},r.prototype.prependOnceListener=function(t,e){return i(e),this.prependListener(t,l(this,t,e)),this},r.prototype.removeListener=function(t,e){var n,r,o,s,a;if(i(e),r=this._events,void 0===r)return this;if(n=r[t],void 0===n)return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,s=n.length-1;0<=s;s--)if(n[s]===e||n[s].listener===e){a=n[s].listener,o=s;break}if(0>o)return this;0===o?n.shift():h(n,o),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(t){var e,n,r;if(n=this._events,void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)i=o[r],"removeListener"!==i&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=n[t],"function"==typeof e)this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;0<=r;r--)this.removeListener(t,e[r]);return this},r.prototype.listeners=function(t){return c(this,t,!0)},r.prototype.rawListeners=function(t){return c(this,t,!1)},r.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):u.call(t,e)},r.prototype.listenerCount=u,r.prototype.eventNames=function(){return 0<this._eventsCount?g(this._events):[]}},{}],8:[function(t,e){e.exports=function(){if("undefined"==typeof globalThis)return null;var t={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return t.RTCPeerConnection?t:null}},{}],9:[function(n,i,o){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */o.read=function(t,e,n,i,o){var s,a,l=8*o-i-1,c=(1<<l)-1,u=c>>1,d=-7,h=n?o-1:0,f=n?-1:1,p=t[e+h];for(h+=f,s=p&(1<<-d)-1,p>>=-d,d+=l;0<d;s=256*s+t[e+h],h+=f,d-=8);for(a=s&(1<<-d)-1,s>>=-d,d+=i;0<d;a=256*a+t[e+h],h+=f,d-=8);if(0===s)s=1-u;else{if(s===c)return a?NaN:1/0*(p?-1:1);a+=r(2,i),s-=u}return(p?-1:1)*a*r(2,s-i)},o.write=function(n,i,o,s,a,l){var c,u,d,h=Math.LN2,f=Math.log,p=8*l-a-1,m=(1<<p)-1,g=m>>1,v=23===a?r(2,-24)-r(2,-77):0,y=s?0:l-1,b=s?1:-1,_=0>i||0===i&&0>1/i?1:0;for(i=e(i),isNaN(i)||i===1/0?(u=isNaN(i)?1:0,c=m):(c=t(f(i)/h),1>i*(d=r(2,-c))&&(c--,d*=2),i+=1<=c+g?v/d:v*r(2,1-g),2<=i*d&&(c++,d/=2),c+g>=m?(u=0,c=m):1<=c+g?(u=(i*d-1)*r(2,a),c+=g):(u=i*r(2,g-1)*r(2,a),c=0));8<=a;n[o+y]=255&u,y+=b,u/=256,a-=8);for(c=c<<a|u,p+=a;0<p;n[o+y]=255&c,y+=b,c/=256,p-=8);n[o+y-b]|=128*_}},{}],10:[function(t,e){e.exports="function"==typeof Object.create?function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},{}],11:[function(t,n){var r=Math.round;function i(t){if(t+="",!(100<t.length)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();return"years"===r||"year"===r||"yrs"===r||"yr"===r||"y"===r?315576e5*n:"weeks"===r||"week"===r||"w"===r?6048e5*n:"days"===r||"day"===r||"d"===r?864e5*n:"hours"===r||"hour"===r||"hrs"===r||"hr"===r||"h"===r?36e5*n:"minutes"===r||"minute"===r||"mins"===r||"min"===r||"m"===r?6e4*n:"seconds"===r||"second"===r||"secs"===r||"sec"===r||"s"===r?1e3*n:"milliseconds"===r||"millisecond"===r||"msecs"===r||"msec"===r||"ms"===r?n:void 0}}}function o(t){var n=e(t);return 864e5<=n?r(t/864e5)+"d":36e5<=n?r(t/36e5)+"h":6e4<=n?r(t/6e4)+"m":1e3<=n?r(t/1e3)+"s":t+"ms"}function s(t){var n=e(t);return 864e5<=n?a(t,n,864e5,"day"):36e5<=n?a(t,n,36e5,"hour"):6e4<=n?a(t,n,6e4,"minute"):1e3<=n?a(t,n,1e3,"second"):t+" ms"}function a(t,e,n,i){return r(t/n)+" "+i+(e>=1.5*n?"s":"")}n.exports=function(t,e){e=e||{};var n=typeof t;if("string"==n&&0<t.length)return i(t);if("number"===n&&isFinite(t))return e.long?s(t):o(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},{}],12:[function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(u===setTimeout)return setTimeout(t,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(n){try{return u.call(null,t,0)}catch(n){return u.call(this,t,0)}}}function o(t){if(d===clearTimeout)return clearTimeout(t);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(t);try{return d(t)}catch(n){try{return d.call(null,t)}catch(n){return d.call(this,t)}}}function s(){m&&f&&(m=!1,f.length?p=f.concat(p):g=-1,p.length&&a())}function a(){if(!m){var t=i(s);m=!0;for(var e=p.length;e;){for(f=p,p=[];++g<e;)f&&f[g].run();g=-1,e=p.length}f=null,m=!1,o(t)}}function l(t,e){this.fun=t,this.array=e}function c(){}var u,d,h=e.exports={};(function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}})();var f,p=[],m=!1,g=-1;h.nextTick=function(t){var e=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new l(t,e)),1!==p.length||m||i(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(){return[]},h.binding=function(){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],13:[function(t,e){(function(t){(function(){
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let n;e.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"==typeof window?t:window):t=>(n||(n=Promise.resolve())).then(t).catch((t=>setTimeout((()=>{throw t}),0)))}).call(this)}).call(this,"undefined"==typeof n.g?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:n.g)},{}],14:[function(t,e){(function(n,r){(function(){"use strict";var i=t("safe-buffer").Buffer,o=r.crypto||r.msCrypto;e.exports=o&&o.getRandomValues?function(t,e){if(t>4294967295)throw new RangeError("requested too many random bytes");var r=i.allocUnsafe(t);if(0<t)if(65536<t)for(var s=0;s<t;s+=65536)o.getRandomValues(r.slice(s,s+65536));else o.getRandomValues(r);return"function"==typeof e?n.nextTick((function(){e(null,r)})):r}:function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this)}).call(this,t("_process"),"undefined"==typeof n.g?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:n.g)},{_process:12,"safe-buffer":30}],15:[function(t,e){"use strict";function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function r(t,e,r){function i(t,n,r){return"string"==typeof e?e:e(t,n,r)}r||(r=Error);var o=function(t){function e(e,n,r){return t.call(this,i(e,n,r))||this}return n(e,t),e}(r);o.prototype.name=r.name,o.prototype.code=t,l[t]=o}function i(t,e){if(Array.isArray(t)){var n=t.length;return t=t.map((function(t){return t+""})),2<n?"one of ".concat(e," ").concat(t.slice(0,n-1).join(", "),", or ")+t[n-1]:2===n?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(t+"")}function o(t,e,n){return t.substr(!n||0>n?0:+n,e.length)===e}function s(t,e,n){return(void 0===n||n>t.length)&&(n=t.length),t.substring(n-e.length,n)===e}function a(t,e,n){return"number"!=typeof n&&(n=0),!(n+e.length>t.length)&&-1!==t.indexOf(e,n)}var l={};r("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),r("ERR_INVALID_ARG_TYPE",(function(t,e,n){var r,l;if("string"==typeof e&&o(e,"not ")?(r="must not be",e=e.replace(/^not /,"")):r="must be",s(t," argument"))l="The ".concat(t," ").concat(r," ").concat(i(e,"type"));else{var c=a(t,".")?"property":"argument";l='The "'.concat(t,'" ').concat(c," ").concat(r," ").concat(i(e,"type"))}return l+=". Received type ".concat(typeof n),l}),TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=l},{}],16:[function(t,e){(function(n){(function(){"use strict";function r(t){return this instanceof r?(a.call(this,t),l.call(this,t),this.allowHalfOpen=!0,void(t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",i))))):new r(t)}function i(){this._writableState.ended||n.nextTick(o,this)}function o(t){t.end()}var s=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};e.exports=r;var a=t("./_stream_readable"),l=t("./_stream_writable");t("inherits")(r,a);for(var c,u=s(l.prototype),d=0;d<u.length;d++)c=u[d],r.prototype[c]||(r.prototype[c]=l.prototype[c]);Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(r.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(r.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=t,this._writableState.destroyed=t)}})}).call(this)}).call(this,t("_process"))},{"./_stream_readable":18,"./_stream_writable":20,_process:12,inherits:10}],17:[function(t,e){"use strict";function n(t){return this instanceof n?void r.call(this,t):new n(t)}e.exports=n;var r=t("./_stream_transform");t("inherits")(n,r),n.prototype._transform=function(t,e,n){n(null,t)}},{"./_stream_transform":19,inherits:10}],18:[function(t,e){(function(n,r){(function(){"use strict";function i(t){return L.from(t)}function o(t){return L.isBuffer(t)||t instanceof D}function s(t,e,n){return"function"==typeof t.prependListener?t.prependListener(e,n):void(t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n))}function a(e,n,r){k=k||t("./_stream_duplex"),e=e||{},"boolean"!=typeof r&&(r=n instanceof k),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=j(this,e,"readableHighWaterMark",r),this.buffer=new B,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(!N&&(N=t("string_decoder/").StringDecoder),this.decoder=new N(e.encoding),this.encoding=e.encoding)}function l(e){if(k=k||t("./_stream_duplex"),!(this instanceof l))return new l(e);var n=this instanceof k;this._readableState=new a(e,this,n),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),P.call(this)}function c(t,e,n,r,o){O("readableAddChunk",e);var s,a=t._readableState;if(null===e)a.reading=!1,p(t,a);else if(o||(s=d(a,e)),s)Y(t,s);else if(a.objectMode||e&&0<e.length)if("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===L.prototype||(e=i(e)),r)a.endEmitted?Y(t,new q):u(t,a,e,!0);else if(a.ended)Y(t,new G);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!n?(e=a.decoder.write(e),a.objectMode||0!==e.length?u(t,a,e,!1):v(t,a)):u(t,a,e,!1)}else r||(a.reading=!1,v(t,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function u(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",n)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&m(t)),v(t,e)}function d(t,e){var n;return o(e)||"string"==typeof e||void 0===e||t.objectMode||(n=new W("chunk",["string","Buffer","Uint8Array"],e)),n}function h(t){return 1073741824<=t?t=1073741824:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function f(t,e){return 0>=t||0===e.length&&e.ended?0:e.objectMode?1:t===t?(t>e.highWaterMark&&(e.highWaterMark=h(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0)):e.flowing&&e.length?e.buffer.head.data.length:e.length}function p(t,e){if(O("onEofChunk"),!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.sync?m(t):(e.needReadable=!1,!e.emittedReadable&&(e.emittedReadable=!0,g(t)))}}function m(t){var e=t._readableState;O("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(O("emitReadable",e.flowing),e.emittedReadable=!0,n.nextTick(g,t))}function g(t){var e=t._readableState;O("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,E(t)}function v(t,e){e.readingMore||(e.readingMore=!0,n.nextTick(y,t,e))}function y(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var n=e.length;if(O("maybeReadMore read 0"),t.read(0),n===e.length)break}e.readingMore=!1}function b(t){return function(){var e=t._readableState;O("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&R(t,"data")&&(e.flowing=!0,E(t))}}function _(t){var e=t._readableState;e.readableListening=0<t.listenerCount("readable"),e.resumeScheduled&&!e.paused?e.flowing=!0:0<t.listenerCount("data")&&t.resume()}function w(t){O("readable nexttick read 0"),t.read(0)}function x(t,e){e.resumeScheduled||(e.resumeScheduled=!0,n.nextTick(S,t,e))}function S(t,e){O("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),E(t),e.flowing&&!e.reading&&t.read(0)}function E(t){var e=t._readableState;for(O("flow",e.flowing);e.flowing&&null!==t.read(););}function M(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):n=e.buffer.consume(t,e.decoder),n);var n}function T(t){var e=t._readableState;O("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,n.nextTick(C,e,t))}function C(t,e){if(O("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var n=e._writableState;(!n||n.autoDestroy&&n.finished)&&e.destroy()}}function A(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}var k;e.exports=l,l.ReadableState=a;t("events").EventEmitter;var O,R=function(t,e){return t.listeners(e).length},P=t("./internal/streams/stream"),L=t("buffer").Buffer,D=r.Uint8Array||function(){},I=t("util");O=I&&I.debuglog?I.debuglog("stream"):function(){};var N,U,F,B=t("./internal/streams/buffer_list"),V=t("./internal/streams/destroy"),z=t("./internal/streams/state"),j=z.getHighWaterMark,H=t("../errors").codes,W=H.ERR_INVALID_ARG_TYPE,G=H.ERR_STREAM_PUSH_AFTER_EOF,$=H.ERR_METHOD_NOT_IMPLEMENTED,q=H.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;t("inherits")(l,P);var Y=V.errorOrDestroy,X=["error","close","destroy","pause","resume"];Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),l.prototype.destroy=V.destroy,l.prototype._undestroy=V.undestroy,l.prototype._destroy=function(t,e){e(t)},l.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=L.from(t,e),e=""),n=!0),c(this,t,e,!1,n)},l.prototype.unshift=function(t){return c(this,t,null,!0,!1)},l.prototype.isPaused=function(){return!1===this._readableState.flowing},l.prototype.setEncoding=function(e){N||(N=t("string_decoder/").StringDecoder);var n=new N(e);this._readableState.decoder=n,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=n.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this},l.prototype.read=function(t){O("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0===e.highWaterMark?0<e.length:e.length>=e.highWaterMark)||e.ended))return O("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?T(this):m(this),null;if(t=f(t,e),0===t&&e.ended)return 0===e.length&&T(this),null;var r,i=e.needReadable;return O("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&(i=!0,O("length less than watermark",i)),e.ended||e.reading?(i=!1,O("reading or ended",i)):i&&(O("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,!e.reading&&(t=f(n,e))),r=0<t?M(t,e):null,null===r?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(!e.ended&&(e.needReadable=!0),n!==t&&e.ended&&T(this)),null!==r&&this.emit("data",r),r},l.prototype._read=function(){Y(this,new $("_read()"))},l.prototype.pipe=function(t,e){function r(t,e){O("onunpipe"),t===h&&e&&!1===e.hasUnpiped&&(e.hasUnpiped=!0,o())}function i(){O("onend"),t.end()}function o(){O("cleanup"),t.removeListener("close",c),t.removeListener("finish",u),t.removeListener("drain",g),t.removeListener("error",l),t.removeListener("unpipe",r),h.removeListener("end",i),h.removeListener("end",d),h.removeListener("data",a),v=!0,f.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&g()}function a(e){O("ondata");var n=t.write(e);O("dest.write",n),!1===n&&((1===f.pipesCount&&f.pipes===t||1<f.pipesCount&&-1!==A(f.pipes,t))&&!v&&(O("false write response, pause",f.awaitDrain),f.awaitDrain++),h.pause())}function l(e){O("onerror",e),d(),t.removeListener("error",l),0===R(t,"error")&&Y(t,e)}function c(){t.removeListener("finish",u),d()}function u(){O("onfinish"),t.removeListener("close",c),d()}function d(){O("unpipe"),h.unpipe(t)}var h=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=t;break;case 1:f.pipes=[f.pipes,t];break;default:f.pipes.push(t)}f.pipesCount+=1,O("pipe count=%d opts=%j",f.pipesCount,e);var p=(!e||!1!==e.end)&&t!==n.stdout&&t!==n.stderr,m=p?i:d;f.endEmitted?n.nextTick(m):h.once("end",m),t.on("unpipe",r);var g=b(h);t.on("drain",g);var v=!1;return h.on("data",a),s(t,"error",l),t.once("close",c),t.once("finish",u),t.emit("pipe",h),f.flowing||(O("pipe resume"),h.resume()),t},l.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=A(e.pipes,t);return-1===s||(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},l.prototype.on=function(t,e){var r=P.prototype.on.call(this,t,e),i=this._readableState;return"data"===t?(i.readableListening=0<this.listenerCount("readable"),!1!==i.flowing&&this.resume()):"readable"==t&&!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,O("on readable",i.length,i.reading),i.length?m(this):!i.reading&&n.nextTick(w,this)),r},l.prototype.addListener=l.prototype.on,l.prototype.removeListener=function(t,e){var r=P.prototype.removeListener.call(this,t,e);return"readable"===t&&n.nextTick(_,this),r},l.prototype.removeAllListeners=function(t){var e=P.prototype.removeAllListeners.apply(this,arguments);return("readable"===t||void 0===t)&&n.nextTick(_,this),e},l.prototype.resume=function(){var t=this._readableState;return t.flowing||(O("resume"),t.flowing=!t.readableListening,x(this,t)),t.paused=!1,this},l.prototype.pause=function(){return O("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(O("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},l.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var i in t.on("end",(function(){if(O("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){if(O("wrapped data"),n.decoder&&(i=n.decoder.write(i)),(!n.objectMode||null!==i&&void 0!==i)&&(n.objectMode||i&&i.length)){var o=e.push(i);o||(r=!0,t.pause())}})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<X.length;o++)t.on(X[o],this.emit.bind(this,X[o]));return this._read=function(e){O("wrapped _read",e),r&&(r=!1,t.resume())},this},"function"==typeof Symbol&&(l.prototype[Symbol.asyncIterator]=function(){return void 0===U&&(U=t("./internal/streams/async_iterator")),U(this)}),Object.defineProperty(l.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(l.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(l.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),l._fromList=M,Object.defineProperty(l.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(l.from=function(e,n){return void 0===F&&(F=t("./internal/streams/from")),F(l,e,n)})}).call(this)}).call(this,t("_process"),"undefined"==typeof n.g?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:n.g)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/async_iterator":21,"./internal/streams/buffer_list":22,"./internal/streams/destroy":23,"./internal/streams/from":25,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,events:7,inherits:10,"string_decoder/":31,util:2}],19:[function(t,e){"use strict";function n(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new l);n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function r(t){return this instanceof r?(d.call(this,t),this._transformState={afterTransform:n.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),void this.on("prefinish",i)):new r(t)}function i(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?o(this,null,null):this._flush((function(e,n){o(t,e,n)}))}function o(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new u;if(t._transformState.transforming)throw new c;return t.push(null)}e.exports=r;var s=t("../errors").codes,a=s.ERR_METHOD_NOT_IMPLEMENTED,l=s.ERR_MULTIPLE_CALLBACK,c=s.ERR_TRANSFORM_ALREADY_TRANSFORMING,u=s.ERR_TRANSFORM_WITH_LENGTH_0,d=t("./_stream_duplex");t("inherits")(r,d),r.prototype.push=function(t,e){return this._transformState.needTransform=!1,d.prototype.push.call(this,t,e)},r.prototype._transform=function(t,e,n){n(new a("_transform()"))},r.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},r.prototype._read=function(){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},r.prototype._destroy=function(t,e){d.prototype._destroy.call(this,t,(function(t){e(t)}))}},{"../errors":15,"./_stream_duplex":16,inherits:10}],20:[function(t,e){(function(n,r){(function(){"use strict";function i(t){var e=this;this.next=null,this.entry=null,this.finish=function(){T(e,t)}}function o(t){return R.from(t)}function s(t){return R.isBuffer(t)||t instanceof P}function a(){}function l(e,n,r){C=C||t("./_stream_duplex"),e=e||{},"boolean"!=typeof r&&(r=n instanceof C),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=I(this,e,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===e.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){v(n,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function c(e){C=C||t("./_stream_duplex");var n=this instanceof C;return n||A.call(c,this)?(this._writableState=new l(e,this,n),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),void O.call(this)):new c(e)}function u(t,e){var r=new H;G(t,r),n.nextTick(e,r)}function d(t,e,r,i){var o;return null===r?o=new j:"string"!=typeof r&&!e.objectMode&&(o=new U("chunk",["string","Buffer"],r)),!o||(G(t,o),n.nextTick(i,o),!1)}function h(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=R.from(e,n)),e}function f(t,e,n,r,i,o){if(!n){var s=h(e,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=e.objectMode?1:r.length;e.length+=a;var l=e.length<e.highWaterMark;if(l||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else p(t,e,!1,a,r,i,o);return l}function p(t,e,n,r,i,o,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new z("write")):n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function m(t,e,r,i,o){--e.pendingcb,r?(n.nextTick(o,i),n.nextTick(E,t,e),t._writableState.errorEmitted=!0,G(t,i)):(o(i),t._writableState.errorEmitted=!0,G(t,i),E(t,e))}function g(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function v(t,e){var r=t._writableState,i=r.sync,o=r.writecb;if("function"!=typeof o)throw new B;if(g(r),e)m(t,r,i,e,o);else{var s=w(r)||t.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||_(t,r),i?n.nextTick(y,t,r,s,o):y(t,r,s,o)}}function y(t,e,n,r){n||b(t,e),e.pendingcb--,r(),E(t,e)}function b(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function _(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,o=Array(r),s=e.corkedRequestsFree;s.entry=n;for(var a=0,l=!0;n;)o[a]=n,n.isBuf||(l=!1),n=n.next,a+=1;o.allBuffers=l,p(t,e,!0,e.length,o,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new i(e),e.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,u=n.encoding,d=n.callback,h=e.objectMode?1:c.length;if(p(t,e,!1,h,c,u,d),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function w(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function x(t,e){t._final((function(n){e.pendingcb--,n&&G(t,n),e.prefinished=!0,t.emit("prefinish"),E(t,e)}))}function S(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,n.nextTick(x,t,e)))}function E(t,e){var n=w(e);if(n&&(S(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var r=t._readableState;(!r||r.autoDestroy&&r.endEmitted)&&t.destroy()}return n}function M(t,e,r){e.ending=!0,E(t,e),r&&(e.finished?n.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function T(t,e,n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree.next=t}var C;e.exports=c,c.WritableState=l;var A,k={deprecate:t("util-deprecate")},O=t("./internal/streams/stream"),R=t("buffer").Buffer,P=r.Uint8Array||function(){},L=t("./internal/streams/destroy"),D=t("./internal/streams/state"),I=D.getHighWaterMark,N=t("../errors").codes,U=N.ERR_INVALID_ARG_TYPE,F=N.ERR_METHOD_NOT_IMPLEMENTED,B=N.ERR_MULTIPLE_CALLBACK,V=N.ERR_STREAM_CANNOT_PIPE,z=N.ERR_STREAM_DESTROYED,j=N.ERR_STREAM_NULL_VALUES,H=N.ERR_STREAM_WRITE_AFTER_END,W=N.ERR_UNKNOWN_ENCODING,G=L.errorOrDestroy;t("inherits")(c,O),l.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(l.prototype,"buffer",{get:k.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(A=Function.prototype[Symbol.hasInstance],Object.defineProperty(c,Symbol.hasInstance,{value:function(t){return!!A.call(this,t)||!(this!==c)&&t&&t._writableState instanceof l}})):A=function(t){return t instanceof this},c.prototype.pipe=function(){G(this,new V)},c.prototype.write=function(t,e,n){var r=this._writableState,i=!1,l=!r.objectMode&&s(t);return l&&!R.isBuffer(t)&&(t=o(t)),"function"==typeof e&&(n=e,e=null),l?e="buffer":!e&&(e=r.defaultEncoding),"function"!=typeof n&&(n=a),r.ending?u(this,n):(l||d(this,r,t,n))&&(r.pendingcb++,i=f(this,r,l,t,e,n)),i},c.prototype.cork=function(){this._writableState.corked++},c.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&_(this,t))},c.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())))throw new W(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),c.prototype._write=function(t,e,n){n(new F("_write()"))},c.prototype._writev=null,c.prototype.end=function(t,e,n){var r=this._writableState;return"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!==t&&void 0!==t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||M(this,r,n),this},Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),c.prototype.destroy=L.destroy,c.prototype._undestroy=L.undestroy,c.prototype._destroy=function(t,e){e(t)}}).call(this)}).call(this,t("_process"),"undefined"==typeof n.g?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:n.g)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/destroy":23,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,inherits:10,"util-deprecate":32}],21:[function(t,e){(function(n){(function(){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){return{value:t,done:e}}function o(t){var e=t[u];if(null!==e){var n=t[g].read();null!==n&&(t[p]=null,t[u]=null,t[d]=null,e(i(n,!1)))}}function s(t){n.nextTick(o,t)}function a(t,e){return function(n,r){t.then((function(){return e[f]?void n(i(void 0,!0)):void e[m](n,r)}),r)}}var l,c=t("./end-of-stream"),u=Symbol("lastResolve"),d=Symbol("lastReject"),h=Symbol("error"),f=Symbol("ended"),p=Symbol("lastPromise"),m=Symbol("handlePromise"),g=Symbol("stream"),v=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((l={get stream(){return this[g]},next:function(){var t=this,e=this[h];if(null!==e)return Promise.reject(e);if(this[f])return Promise.resolve(i(void 0,!0));if(this[g].destroyed)return new Promise((function(e,r){n.nextTick((function(){t[h]?r(t[h]):e(i(void 0,!0))}))}));var r,o=this[p];if(o)r=new Promise(a(o,this));else{var s=this[g].read();if(null!==s)return Promise.resolve(i(s,!1));r=new Promise(this[m])}return this[p]=r,r}},r(l,Symbol.asyncIterator,(function(){return this})),r(l,"return",(function(){var t=this;return new Promise((function(e,n){t[g].destroy(null,(function(t){return t?void n(t):void e(i(void 0,!0))}))}))})),l),v);e.exports=function(t){var e,n=Object.create(y,(e={},r(e,g,{value:t,writable:!0}),r(e,u,{value:null,writable:!0}),r(e,d,{value:null,writable:!0}),r(e,h,{value:null,writable:!0}),r(e,f,{value:t._readableState.endEmitted,writable:!0}),r(e,m,{value:function(t,e){var r=n[g].read();r?(n[p]=null,n[u]=null,n[d]=null,t(i(r,!1))):(n[u]=t,n[d]=e)},writable:!0}),e));return n[p]=null,c(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=n[d];return null!==e&&(n[p]=null,n[u]=null,n[d]=null,e(t)),void(n[h]=t)}var r=n[u];null!==r&&(n[p]=null,n[u]=null,n[d]=null,r(i(void 0,!0))),n[f]=!0})),t.on("readable",s.bind(null,n)),n}}).call(this)}).call(this,t("_process"))},{"./end-of-stream":24,_process:12}],22:[function(t,e){"use strict";function n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function r(t){for(var e,r=1;r<arguments.length;r++)e=null==arguments[r]?{}:arguments[r],r%2?n(Object(e),!0).forEach((function(n){i(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):n(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}));return t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function a(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function l(t,e,n){u.prototype.copy.call(t,e,n)}var c=t("buffer"),u=c.Buffer,d=t("util"),h=d.inspect,f=h&&h.custom||"inspect";e.exports=function(){function t(){o(this,t),this.head=null,this.tail=null,this.length=0}return a(t,[{key:"push",value:function(t){var e={data:t,next:null};0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n}},{key:"concat",value:function(t){if(0===this.length)return u.alloc(0);for(var e=u.allocUnsafe(t>>>0),n=this.head,r=0;n;)l(n.data,e,r),r+=n.data.length,n=n.next;return e}},{key:"consume",value:function(t,e){var n;return t<this.head.data.length?(n=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):n=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,n=1,r=e.data;for(t-=r.length;e=e.next;){var i=e.data,o=t>i.length?i.length:t;if(r+=o===i.length?i:i.slice(0,t),t-=o,0===t){o===i.length?(++n,this.head=e.next?e.next:this.tail=null):(this.head=e,e.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(t){var e=u.allocUnsafe(t),n=this.head,r=1;for(n.data.copy(e),t-=n.data.length;n=n.next;){var i=n.data,o=t>i.length?i.length:t;if(i.copy(e,e.length-t,0,o),t-=o,0===t){o===i.length?(++r,this.head=n.next?n.next:this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,e}},{key:f,value:function(t,e){return h(this,r({},e,{depth:0,customInspect:!1}))}}]),t}()},{buffer:3,util:2}],23:[function(t,e){(function(t){(function(){"use strict";function n(t,e){i(t,e),r(t)}function r(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function i(t,e){t.emit("error",e)}e.exports={destroy:function(e,o){var s=this,a=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return a||l?(o?o(e):e&&(this._writableState?!this._writableState.errorEmitted&&(this._writableState.errorEmitted=!0,t.nextTick(i,this,e)):t.nextTick(i,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!o&&e?s._writableState?s._writableState.errorEmitted?t.nextTick(r,s):(s._writableState.errorEmitted=!0,t.nextTick(n,s,e)):t.nextTick(n,s,e):o?(t.nextTick(r,s),o(e)):t.nextTick(r,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var n=t._readableState,r=t._writableState;n&&n.autoDestroy||r&&r.autoDestroy?t.destroy(e):t.emit("error",e)}}}).call(this)}).call(this,t("_process"))},{_process:12}],24:[function(t,e){"use strict";function n(t){var e=!1;return function(){if(!e){e=!0;for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(this,r)}}}function r(){}function i(t){return t.setHeader&&"function"==typeof t.abort}function o(t,e,a){if("function"==typeof e)return o(t,null,e);e||(e={}),a=n(a||r);var l=e.readable||!1!==e.readable&&t.readable,c=e.writable||!1!==e.writable&&t.writable,u=function(){t.writable||h()},d=t._writableState&&t._writableState.finished,h=function(){c=!1,d=!0,l||a.call(t)},f=t._readableState&&t._readableState.endEmitted,p=function(){l=!1,f=!0,c||a.call(t)},m=function(e){a.call(t,e)},g=function(){var e;return l&&!f?(t._readableState&&t._readableState.ended||(e=new s),a.call(t,e)):c&&!d?(t._writableState&&t._writableState.ended||(e=new s),a.call(t,e)):void 0},v=function(){t.req.on("finish",h)};return i(t)?(t.on("complete",h),t.on("abort",g),t.req?v():t.on("request",v)):c&&!t._writableState&&(t.on("end",u),t.on("close",u)),t.on("end",p),t.on("finish",h),!1!==e.error&&t.on("error",m),t.on("close",g),function(){t.removeListener("complete",h),t.removeListener("abort",g),t.removeListener("request",v),t.req&&t.req.removeListener("finish",h),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",h),t.removeListener("end",p),t.removeListener("error",m),t.removeListener("close",g)}}var s=t("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;e.exports=o},{"../../../errors":15}],25:[function(t,e){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],26:[function(t,e){"use strict";function n(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}function r(t){if(t)throw t}function i(t){return t.setHeader&&"function"==typeof t.abort}function o(e,r,o,s){s=n(s);var a=!1;e.on("close",(function(){a=!0})),void 0===c&&(c=t("./end-of-stream")),c(e,{readable:r,writable:o},(function(t){return t?s(t):(a=!0,void s())}));var l=!1;return function(t){if(!a)return l?void 0:(l=!0,i(e)?e.abort():"function"==typeof e.destroy?e.destroy():void s(t||new h("pipe")))}}function s(t){t()}function a(t,e){return t.pipe(e)}function l(t){return t.length&&"function"==typeof t[t.length-1]?t.pop():r}var c,u=t("../../../errors").codes,d=u.ERR_MISSING_ARGS,h=u.ERR_STREAM_DESTROYED;e.exports=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=l(e);if(Array.isArray(e[0])&&(e=e[0]),2>e.length)throw new d("streams");var i,c=e.map((function(t,n){var a=n<e.length-1;return o(t,a,0<n,(function(t){i||(i=t),t&&c.forEach(s),a||(c.forEach(s),r(i))}))}));return e.reduce(a)}},{"../../../errors":15,"./end-of-stream":24}],27:[function(e,n){"use strict";function r(t,e,n){return null==t.highWaterMark?e?t[n]:null:t.highWaterMark}var i=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;n.exports={getHighWaterMark:function(e,n,o,s){var a=r(n,s,o);if(null!=a){if(!isFinite(a)||t(a)!==a||0>a){var l=s?o:"highWaterMark";throw new i(l,a)}return t(a)}return e.objectMode?16:16384}}},{"../../../errors":15}],28:[function(t,e){e.exports=t("events").EventEmitter},{events:7}],29:[function(t,e,n){n=e.exports=t("./lib/_stream_readable.js"),n.Stream=n,n.Readable=n,n.Writable=t("./lib/_stream_writable.js"),n.Duplex=t("./lib/_stream_duplex.js"),n.Transform=t("./lib/_stream_transform.js"),n.PassThrough=t("./lib/_stream_passthrough.js"),n.finished=t("./lib/internal/streams/end-of-stream.js"),n.pipeline=t("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":16,"./lib/_stream_passthrough.js":17,"./lib/_stream_readable.js":18,"./lib/_stream_transform.js":19,"./lib/_stream_writable.js":20,"./lib/internal/streams/end-of-stream.js":24,"./lib/internal/streams/pipeline.js":26}],30:[function(t,e,n){function r(t,e){for(var n in t)e[n]=t[n]}function i(t,e,n){return s(t,e,n)}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var o=t("buffer"),s=o.Buffer;s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?e.exports=o:(r(o,n),n.Buffer=i),i.prototype=Object.create(s.prototype),r(s,i),i.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return s(t,e,n)},i.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=s(t);return void 0===e?r.fill(0):"string"==typeof n?r.fill(e,n):r.fill(e),r},i.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return s(t)},i.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return o.SlowBuffer(t)}},{buffer:3}],31:[function(t,e,n){"use strict";function r(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function i(t){var e=r(t);if("string"!=typeof e&&(g.isEncoding===v||!v(t)))throw new Error("Unknown encoding: "+t);return e||t}function o(t){var e;switch(this.encoding=i(t),this.encoding){case"utf16le":this.text=u,this.end=d,e=4;break;case"utf8":this.fillLast=c,e=4;break;case"base64":this.text=h,this.end=f,e=3;break;default:return this.write=p,void(this.end=m)}this.lastNeed=0,this.lastTotal=0,this.lastChar=g.allocUnsafe(e)}function s(t){return 127>=t?0:6==t>>5?2:14==t>>4?3:30==t>>3?4:2==t>>6?-1:-2}function a(t,e,n){var r=e.length-1;if(r<n)return 0;var i=s(e[r]);return 0<=i?(0<i&&(t.lastNeed=i-1),i):--r<n||-2===i?0:(i=s(e[r]),0<=i?(0<i&&(t.lastNeed=i-2),i):--r<n||-2===i?0:(i=s(e[r]),0<=i?(0<i&&(2===i?i=0:t.lastNeed=i-3),i):0))}function l(t,e){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(1<t.lastNeed&&1<e.length){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(2<t.lastNeed&&2<e.length&&128!=(192&e[2]))return t.lastNeed=2,"�"}}function c(t){var e=this.lastTotal-this.lastNeed,n=l(this,t,e);return void 0===n?this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length)):n}function u(t,e){if(0==(t.length-e)%2){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(55296<=r&&56319>=r)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function d(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function h(t,e){var n=(t.length-e)%3;return 0==n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1==n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function f(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function p(t){return t.toString(this.encoding)}function m(t){return t&&t.length?this.write(t):""}var g=t("safe-buffer").Buffer,v=g.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};n.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(e=this.fillLast(t),void 0===e)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},o.prototype.text=function(t,e){var n=a(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){return this.lastNeed<=t.length?(t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),void(this.lastNeed-=t.length))}},{"safe-buffer":30}],32:[function(t,e){(function(t){(function(){function n(e){try{if(!t.localStorage)return!1}catch(t){return!1}var n=t.localStorage[e];return null!=n&&"true"===(n+"").toLowerCase()}e.exports=function(t,e){function r(){if(!i){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),i=!0}return t.apply(this,arguments)}if(n("noDeprecation"))return t;var i=!1;return r}}).call(this)}).call(this,"undefined"==typeof n.g?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:n.g)},{}],"/":[function(t,e){function n(t){return t.replace(/a=ice-options:trickle\s\n/g,"")}function r(t){console.warn(t)}/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const i=t("debug")("simple-peer"),o=t("get-browser-rtc"),s=t("randombytes"),a=t("readable-stream"),l=t("queue-microtask"),c=t("err-code"),{Buffer:u}=t("buffer"),d=65536;class h extends a.Duplex{constructor(t){if(t=Object.assign({allowHalfOpen:!1},t),super(t),this._id=s(4).toString("hex").slice(0,7),this._debug("new peer %o",t),this.channelName=t.initiator?t.channelName||s(20).toString("hex"):null,this.initiator=t.initiator||!1,this.channelConfig=t.channelConfig||h.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},h.config,t.config),this.offerOptions=t.offerOptions||{},this.answerOptions=t.answerOptions||{},this.sdpTransform=t.sdpTransform||(t=>t),this.streams=t.streams||(t.stream?[t.stream]:[]),this.trickle=void 0===t.trickle||t.trickle,this.allowHalfTrickle=void 0!==t.allowHalfTrickle&&t.allowHalfTrickle,this.iceCompleteTimeout=t.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=t.wrtc&&"object"==typeof t.wrtc?t.wrtc:o(),!this._wrtc)throw"undefined"==typeof window?c(new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"),"ERR_WEBRTC_SUPPORT"):c(new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(t){return void this.destroy(c(t,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc="number"==typeof this._pc._peerConnectionId,this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=t=>{this._onIceCandidate(t)},"object"==typeof this._pc.peerIdentity&&this._pc.peerIdentity.catch((t=>{this.destroy(c(t,"ERR_PC_PEER_IDENTITY"))})),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=t=>{this._setupData(t)},this.streams&&this.streams.forEach((t=>{this.addStream(t)})),this._pc.ontrack=t=>{this._onTrack(t)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&"open"===this._channel.readyState}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(t){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if("string"==typeof t)try{t=JSON.parse(t)}catch(e){t={}}this._debug("signal()"),t.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),t.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(t.transceiverRequest.kind,t.transceiverRequest.init)),t.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(t.candidate):this._pendingCandidates.push(t.candidate)),t.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(t)).then((()=>{this.destroyed||(this._pendingCandidates.forEach((t=>{this._addIceCandidate(t)})),this._pendingCandidates=[],"offer"===this._pc.remoteDescription.type&&this._createAnswer())})).catch((t=>{this.destroy(c(t,"ERR_SET_REMOTE_DESCRIPTION"))})),t.sdp||t.candidate||t.renegotiate||t.transceiverRequest||this.destroy(c(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(t){const e=new this._wrtc.RTCIceCandidate(t);this._pc.addIceCandidate(e).catch((t=>{!e.address||e.address.endsWith(".local")?r("Ignoring unsupported ICE candidate."):this.destroy(c(t,"ERR_ADD_ICE_CANDIDATE"))}))}send(t){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(t)}}addTransceiver(t,e){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(t,e),this._needsNegotiation()}catch(t){this.destroy(c(t,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:t,init:e}})}}addStream(t){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),t.getTracks().forEach((e=>{this.addTrack(e,t)}))}}addTrack(t,e){if(this.destroying)return;if(this.destroyed)throw c(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const n=this._senderMap.get(t)||new Map;let r=n.get(e);if(r)throw r.removed?c(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):c(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED");r=this._pc.addTrack(t,e),n.set(e,r),this._senderMap.set(t,n),this._needsNegotiation()}replaceTrack(t,e,n){if(this.destroying)return;if(this.destroyed)throw c(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const r=this._senderMap.get(t),i=r?r.get(n):null;if(!i)throw c(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");e&&this._senderMap.set(e,r),null==i.replaceTrack?this.destroy(c(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK")):i.replaceTrack(e)}removeTrack(t,e){if(this.destroying)return;if(this.destroyed)throw c(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const n=this._senderMap.get(t),r=n?n.get(e):null;if(!r)throw c(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{r.removed=!0,this._pc.removeTrack(r)}catch(t){"NS_ERROR_UNEXPECTED"===t.name?this._sendersAwaitingStable.push(r):this.destroy(c(t,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(t){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),t.getTracks().forEach((e=>{this.removeTrack(e,t)}))}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,l((()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1})))}negotiate(){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout((()=>{this._createOffer()}),0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(t){this._destroy(t,(()=>{}))}_destroy(t,e){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",t&&(t.message||t)),l((()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",t&&(t.message||t)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(t){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(t){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,t&&this.emit("error",t),this.emit("close"),e()})))}_setupData(t){if(!t.channel)return this.destroy(c(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=t.channel,this._channel.binaryType="arraybuffer","number"==typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=d),this.channelName=this._channel.label,this._channel.onmessage=t=>{this._onChannelMessage(t)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=t=>{const e=t.error instanceof Error?t.error:new Error(`Datachannel error: ${t.message} ${t.filename}:${t.lineno}:${t.colno}`);this.destroy(c(e,"ERR_DATA_CHANNEL"))};let e=!1;this._closingInterval=setInterval((()=>{this._channel&&"closing"===this._channel.readyState?(e&&this._onChannelClose(),e=!0):e=!1}),5e3)}_read(){}_write(t,e,n){if(this.destroyed)return n(c(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(t)}catch(t){return this.destroy(c(t,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>d?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=t,this._cb=n}_onFinish(){if(!this.destroyed){const t=()=>{setTimeout((()=>this.destroy()),1e3)};this._connected?t():this.once("connect",t)}}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout((()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))}),this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then((t=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(t.sdp=n(t.sdp)),t.sdp=this.sdpTransform(t.sdp);const e=()=>{if(!this.destroyed){const e=this._pc.localDescription||t;this._debug("signal"),this.emit("signal",{type:e.type,sdp:e.sdp})}};this._pc.setLocalDescription(t).then((()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?e():this.once("_iceComplete",e))})).catch((t=>{this.destroy(c(t,"ERR_SET_LOCAL_DESCRIPTION"))}))})).catch((t=>{this.destroy(c(t,"ERR_CREATE_OFFER"))}))}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach((t=>{t.mid||!t.sender.track||t.requested||(t.requested=!0,this.addTransceiver(t.sender.track.kind))}))}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then((t=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(t.sdp=n(t.sdp)),t.sdp=this.sdpTransform(t.sdp);const e=()=>{if(!this.destroyed){const e=this._pc.localDescription||t;this._debug("signal"),this.emit("signal",{type:e.type,sdp:e.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(t).then((()=>{this.destroyed||(this.trickle||this._iceComplete?e():this.once("_iceComplete",e))})).catch((t=>{this.destroy(c(t,"ERR_SET_LOCAL_DESCRIPTION"))}))})).catch((t=>{this.destroy(c(t,"ERR_CREATE_ANSWER"))}))}_onConnectionStateChange(){this.destroyed||"failed"===this._pc.connectionState&&this.destroy(c(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const t=this._pc.iceConnectionState,e=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",t,e),this.emit("iceStateChange",t,e),("connected"===t||"completed"===t)&&(this._pcReady=!0,this._maybeReady()),"failed"===t&&this.destroy(c(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),"closed"===t&&this.destroy(c(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(t){const e=t=>("[object Array]"===Object.prototype.toString.call(t.values)&&t.values.forEach((e=>{Object.assign(t,e)})),t);0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then((n=>{const r=[];n.forEach((t=>{r.push(e(t))})),t(null,r)}),(e=>t(e))):0<this._pc.getStats.length?this._pc.getStats((n=>{if(this.destroyed)return;const r=[];n.result().forEach((t=>{const n={};t.names().forEach((e=>{n[e]=t.stat(e)})),n.id=t.id,n.type=t.type,n.timestamp=t.timestamp,r.push(e(n))})),t(null,r)}),(e=>t(e))):t(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const t=()=>{this.destroyed||this.getStats(((e,n)=>{if(this.destroyed)return;e&&(n=[]);const r={},i={},o={};let s=!1;n.forEach((t=>{("remotecandidate"===t.type||"remote-candidate"===t.type)&&(r[t.id]=t),("localcandidate"===t.type||"local-candidate"===t.type)&&(i[t.id]=t),("candidatepair"===t.type||"candidate-pair"===t.type)&&(o[t.id]=t)}));const a=t=>{s=!0;let e=i[t.localCandidateId];e&&(e.ip||e.address)?(this.localAddress=e.ip||e.address,this.localPort=+e.port):e&&e.ipAddress?(this.localAddress=e.ipAddress,this.localPort=+e.portNumber):"string"==typeof t.googLocalAddress&&(e=t.googLocalAddress.split(":"),this.localAddress=e[0],this.localPort=+e[1]),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let n=r[t.remoteCandidateId];n&&(n.ip||n.address)?(this.remoteAddress=n.ip||n.address,this.remotePort=+n.port):n&&n.ipAddress?(this.remoteAddress=n.ipAddress,this.remotePort=+n.portNumber):"string"==typeof t.googRemoteAddress&&(n=t.googRemoteAddress.split(":"),this.remoteAddress=n[0],this.remotePort=+n[1]),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(n.forEach((t=>{"transport"===t.type&&t.selectedCandidatePairId&&a(o[t.selectedCandidatePairId]),("googCandidatePair"===t.type&&"true"===t.googActiveConnection||("candidatepair"===t.type||"candidate-pair"===t.type)&&t.selected)&&a(t)})),s||Object.keys(o).length&&!Object.keys(i).length){if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(t){return this.destroy(c(t,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const e=this._cb;this._cb=null,e(null)}"number"!=typeof this._channel.bufferedAmountLowThreshold&&(this._interval=setInterval((()=>this._onInterval()),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}else setTimeout(t,100)}))};t()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>d)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||("stable"===this._pc.signalingState&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach((t=>{this._pc.removeTrack(t),this._queuedNegotiation=!0})),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(t){this.destroyed||(t.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:t.candidate.candidate,sdpMLineIndex:t.candidate.sdpMLineIndex,sdpMid:t.candidate.sdpMid}}):!t.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),t.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(t){if(this.destroyed)return;let e=t.data;e instanceof ArrayBuffer&&(e=u.from(e)),this.push(e)}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const t=this._cb;this._cb=null,t(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(t){this.destroyed||t.streams.forEach((e=>{this._debug("on track"),this.emit("track",t.track,e),this._remoteTracks.push({track:t.track,stream:e}),this._remoteStreams.some((t=>t.id===e.id))||(this._remoteStreams.push(e),l((()=>{this._debug("on stream"),this.emit("stream",e)})))}))}_debug(){const t=[].slice.call(arguments);t[0]="["+this._id+"] "+t[0],i.apply(null,t)}}h.WEBRTC_SUPPORT=!!o(),h.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},h.channelConfig={},e.exports=h},{buffer:3,debug:4,"err-code":6,"get-browser-rtc":8,"queue-microtask":13,randombytes:14,"readable-stream":29}]},{},[])("/")}))},9241:function(t,e,n){"use strict";n.d(e,{Z:function(){return p}});n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315),n(1703);var r,i=new Uint8Array(16);function o(){if(!r&&(r="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}n(7658);var s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function a(t){return"string"===typeof t&&s.test(t)}for(var l=a,c=[],u=0;u<256;++u)c.push((u+256).toString(16).substr(1));function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(c[t[e+0]]+c[t[e+1]]+c[t[e+2]]+c[t[e+3]]+"-"+c[t[e+4]]+c[t[e+5]]+"-"+c[t[e+6]]+c[t[e+7]]+"-"+c[t[e+8]]+c[t[e+9]]+"-"+c[t[e+10]]+c[t[e+11]]+c[t[e+12]]+c[t[e+13]]+c[t[e+14]]+c[t[e+15]]).toLowerCase();if(!l(n))throw TypeError("Stringified UUID is invalid");return n}var h=d;function f(t,e,n){t=t||{};var r=t.random||(t.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return h(r)}var p=f},5312:function(t,e){"use strict";e.Z=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n}},3702:function(t,e,n){"use strict";n.r(e),n.d(e,{BaseTransition:function(){return r.P$},BaseTransitionPropsValidators:function(){return r.nJ},Comment:function(){return r.sv},EffectScope:function(){return r.Bj},Fragment:function(){return r.HY},KeepAlive:function(){return r.Ob},ReactiveEffect:function(){return r.qq},Static:function(){return r.qG},Suspense:function(){return r.n4},Teleport:function(){return r.lR},Text:function(){return r.xv},Transition:function(){return r.uT},TransitionGroup:function(){return r.W3},VueElement:function(){return r.a2},assertNumber:function(){return r.Wu},callWithAsyncErrorHandling:function(){return r.$d},callWithErrorHandling:function(){return r.KU},camelize:function(){return r._A},capitalize:function(){return r.kC},cloneVNode:function(){return r.Ho},compatUtils:function(){return r.ry},compile:function(){return i},computed:function(){return r.Fl},createApp:function(){return r.ri},createBlock:function(){return r.j4},createCommentVNode:function(){return r.kq},createElementBlock:function(){return r.iD},createElementVNode:function(){return r._},createHydrationRenderer:function(){return r.Eo},createPropsRestProxy:function(){return r.p1},createRenderer:function(){return r.Us},createSSRApp:function(){return r.vr},createSlots:function(){return r.Nv},createStaticVNode:function(){return r.uE},createTextVNode:function(){return r.Uk},createVNode:function(){return r.Wm},customRef:function(){return r.ZM},defineAsyncComponent:function(){return r.RC},defineComponent:function(){return r.aZ},defineCustomElement:function(){return r.MW},defineEmits:function(){return r.Bz},defineExpose:function(){return r.WY},defineModel:function(){return r.Gn},defineOptions:function(){return r.Yu},defineProps:function(){return r.yb},defineSSRCustomElement:function(){return r.Ah},defineSlots:function(){return r.Wl},devtools:function(){return r.mW},effect:function(){return r.cE},effectScope:function(){return r.B},getCurrentInstance:function(){return r.FN},getCurrentScope:function(){return r.nZ},getTransitionRawChildren:function(){return r.Q6},guardReactiveProps:function(){return r.F4},h:function(){return r.h},handleError:function(){return r.S3},hasInjectionContext:function(){return r.EM},hydrate:function(){return r.ZB},initCustomFormatter:function(){return r.Mr},initDirectivesForSSR:function(){return r.Nd},inject:function(){return r.f3},isMemoSame:function(){return r.nQ},isProxy:function(){return r.X3},isReactive:function(){return r.PG},isReadonly:function(){return r.$y},isRef:function(){return r.dq},isRuntimeOnly:function(){return r.of},isShallow:function(){return r.yT},isVNode:function(){return r.lA},markRaw:function(){return r.Xl},mergeDefaults:function(){return r.u_},mergeModels:function(){return r.Vf},mergeProps:function(){return r.dG},nextTick:function(){return r.Y3},normalizeClass:function(){return r.C_},normalizeProps:function(){return r.vs},normalizeStyle:function(){return r.j5},onActivated:function(){return r.dl},onBeforeMount:function(){return r.wF},onBeforeUnmount:function(){return r.Jd},onBeforeUpdate:function(){return r.Xn},onDeactivated:function(){return r.se},onErrorCaptured:function(){return r.d1},onMounted:function(){return r.bv},onRenderTracked:function(){return r.bT},onRenderTriggered:function(){return r.Yq},onScopeDispose:function(){return r.EB},onServerPrefetch:function(){return r.vl},onUnmounted:function(){return r.SK},onUpdated:function(){return r.ic},openBlock:function(){return r.wg},popScopeId:function(){return r.Cn},provide:function(){return r.JJ},proxyRefs:function(){return r.WL},pushScopeId:function(){return r.dD},queuePostFlushCb:function(){return r.qb},reactive:function(){return r.qj},readonly:function(){return r.OT},ref:function(){return r.iH},registerRuntimeCompiler:function(){return r.Y1},render:function(){return r.sY},renderList:function(){return r.Ko},renderSlot:function(){return r.WI},resolveComponent:function(){return r.up},resolveDirective:function(){return r.Q2},resolveDynamicComponent:function(){return r.LL},resolveFilter:function(){return r.eq},resolveTransitionHooks:function(){return r.U2},setBlockTracking:function(){return r.qZ},setDevtoolsHook:function(){return r.ec},setTransitionHooks:function(){return r.nK},shallowReactive:function(){return r.Um},shallowReadonly:function(){return r.YS},shallowRef:function(){return r.XI},ssrContextKey:function(){return r.Uc},ssrUtils:function(){return r.G},stop:function(){return r.sT},toDisplayString:function(){return r.zw},toHandlerKey:function(){return r.hR},toHandlers:function(){return r.mx},toRaw:function(){return r.IU},toRef:function(){return r.Vh},toRefs:function(){return r.BK},toValue:function(){return r.Tn},transformVNodeArgs:function(){return r.C3},triggerRef:function(){return r.oR},unref:function(){return r.SU},useAttrs:function(){return r.l1},useCssModule:function(){return r.fb},useCssVars:function(){return r.sj},useModel:function(){return r.tT},useSSRContext:function(){return r.Zq},useSlots:function(){return r.Rr},useTransitionState:function(){return r.Y8},vModelCheckbox:function(){return r.e8},vModelDynamic:function(){return r.YZ},vModelRadio:function(){return r.G2},vModelSelect:function(){return r.bM},vModelText:function(){return r.nr},vShow:function(){return r.F8},version:function(){return r.i8},warn:function(){return r.ZK},watch:function(){return r.YP},watchEffect:function(){return r.m0},watchPostEffect:function(){return r.Rh},watchSyncEffect:function(){return r.yX},withAsyncContext:function(){return r.mv},withCtx:function(){return r.w5},withDefaults:function(){return r.b9},withDirectives:function(){return r.wy},withKeys:function(){return r.D2},withMemo:function(){return r.MX},withModifiers:function(){return r.iM},withScopeId:function(){return r.HX}});var r=n(9197);const i=()=>{0}},8725:function(t,e,n){"use strict";n.d(e,{Z:function(){return g}});var r=n(8473),i=n(9197),o=n(4887),s=(0,r.aZ)({name:"Vue3SimpleTypeahead",emits:["onInput","onFocus","onBlur","selectItem"],inheritAttrs:!1,props:{id:{type:String},placeholder:{type:String,default:""},items:{type:Array,required:!0},defaultItem:{default:null},itemProjection:{type:Function,default(t){return t}},minInputLength:{type:Number,default:2,validator:t=>t>=0},minItemLength:{type:Number,default:0,validator:t=>t>=0},selectOnTab:{type:Boolean,default:!0}},mounted(){void 0!==this.defaultItem&&null!==this.defaultItem&&this.selectItem(this.defaultItem)},data(){return{inputId:this.id||`simple_typeahead_${(1e3*Math.random()).toFixed()}`,input:"",isInputFocused:!1,currentSelectionIndex:0}},methods:{onInput(){this.isListVisible&&this.currentSelectionIndex>=this.filteredItems.length&&(this.currentSelectionIndex=(this.filteredItems.length||1)-1),this.$emit("onInput",{input:this.input,items:this.filteredItems})},onFocus(){this.isInputFocused=!0,this.$emit("onFocus",{input:this.input,items:this.filteredItems})},onBlur(){this.isInputFocused=!1,this.$emit("onBlur",{input:this.input,items:this.filteredItems})},onArrowDown(t){this.isListVisible&&this.currentSelectionIndex<this.filteredItems.length-1&&this.currentSelectionIndex++,this.scrollSelectionIntoView()},onArrowUp(t){this.isListVisible&&this.currentSelectionIndex>0&&this.currentSelectionIndex--,this.scrollSelectionIntoView()},scrollSelectionIntoView(){setTimeout((()=>{const t=document.querySelector(`#${this.wrapperId} .simple-typeahead-list`),e=document.querySelector(`#${this.wrapperId} .simple-typeahead-list-item.simple-typeahead-list-item-active`);if(!(e.offsetTop>=t.scrollTop&&e.offsetTop+e.offsetHeight<t.scrollTop+t.offsetHeight)){let n=0;e.offsetTop>t.scrollTop?n=e.offsetTop+e.offsetHeight-t.offsetHeight:e.offsetTop<t.scrollTop&&(n=e.offsetTop),t.scrollTo(0,n)}}))},selectCurrentSelection(){this.currentSelection&&this.selectItem(this.currentSelection)},selectCurrentSelectionTab(){this.selectOnTab?this.selectCurrentSelection():this.$refs.inputRef.blur()},selectItem(t){this.input=this.itemProjection(t),this.currentSelectionIndex=0,this.$refs.inputRef.blur(),this.$emit("selectItem",t)},escapeRegExp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},boldMatchText(t){const e=new RegExp(`(${this.escapeRegExp(this.input)})`,"ig");return t.replace(e,"<strong>$1</strong>")},clearInput(){this.input=""},getInput(){return this.$refs.inputRef},focusInput(){this.$refs.inputRef.focus(),this.onFocus()},blurInput(){this.$refs.inputRef.blur(),this.onBlur()}},computed:{wrapperId(){return`${this.inputId}_wrapper`},filteredItems(){const t=new RegExp(this.escapeRegExp(this.input),"i");return this.items.filter((e=>this.itemProjection(e).match(t)))},isListVisible(){return this.isInputFocused&&this.input.length>=this.minInputLength&&this.filteredItems.length>this.minItemLength},currentSelection(){return this.isListVisible&&this.currentSelectionIndex<this.filteredItems.length?this.filteredItems[this.currentSelectionIndex]:void 0}}});(0,r.dD)("data-v-f81ca714");const a=["id"],l=["id","placeholder"],c={key:0,class:"simple-typeahead-list"},u={key:0,class:"simple-typeahead-list-header"},d=["onClick","onMouseenter"],h=["data-text"],f=["data-text","innerHTML"],p={key:1,class:"simple-typeahead-list-footer"};function m(t,e,n,s,m,g){return(0,r.wg)(),(0,r.iD)("div",{id:t.wrapperId,class:"simple-typeahead"},[(0,r.wy)((0,r._)("input",(0,r.dG)({ref:"inputRef",id:t.inputId,class:"simple-typeahead-input",type:"text",placeholder:t.placeholder,"onUpdate:modelValue":e[0]||(e[0]=e=>t.input=e),onInput:e[1]||(e[1]=(...e)=>t.onInput&&t.onInput(...e)),onFocus:e[2]||(e[2]=(...e)=>t.onFocus&&t.onFocus(...e)),onBlur:e[3]||(e[3]=(...e)=>t.onBlur&&t.onBlur(...e)),onKeydown:[e[4]||(e[4]=(0,i.D2)((0,i.iM)(((...e)=>t.onArrowDown&&t.onArrowDown(...e)),["prevent"]),["down"])),e[5]||(e[5]=(0,i.D2)((0,i.iM)(((...e)=>t.onArrowUp&&t.onArrowUp(...e)),["prevent"]),["up"])),e[6]||(e[6]=(0,i.D2)((0,i.iM)(((...e)=>t.selectCurrentSelection&&t.selectCurrentSelection(...e)),["prevent"]),["enter"])),e[7]||(e[7]=(0,i.D2)((0,i.iM)(((...e)=>t.selectCurrentSelectionTab&&t.selectCurrentSelectionTab(...e)),["prevent"]),["tab"]))],autocomplete:"off"},t.$attrs),null,16,l),[[i.nr,t.input]]),t.isListVisible?((0,r.wg)(),(0,r.iD)("div",c,[t.$slots["list-header"]?((0,r.wg)(),(0,r.iD)("div",u,[(0,r.WI)(t.$slots,"list-header")])):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.filteredItems,((n,s)=>((0,r.wg)(),(0,r.iD)("div",{class:(0,o.C_)(["simple-typeahead-list-item",{"simple-typeahead-list-item-active":t.currentSelectionIndex==s}]),key:s,onMousedown:e[8]||(e[8]=(0,i.iM)((()=>{}),["prevent"])),onClick:e=>t.selectItem(n),onMouseenter:e=>t.currentSelectionIndex=s},[t.$slots["list-item-text"]?((0,r.wg)(),(0,r.iD)("span",{key:0,class:"simple-typeahead-list-item-text","data-text":t.itemProjection(n)},[(0,r.WI)(t.$slots,"list-item-text",{item:n,itemProjection:t.itemProjection,boldMatchText:t.boldMatchText})],8,h)):((0,r.wg)(),(0,r.iD)("span",{key:1,class:"simple-typeahead-list-item-text","data-text":t.itemProjection(n),innerHTML:t.boldMatchText(t.itemProjection(n))},null,8,f))],42,d)))),128)),t.$slots["list-footer"]?((0,r.wg)(),(0,r.iD)("div",p,[(0,r.WI)(t.$slots,"list-footer")])):(0,r.kq)("",!0)])):(0,r.kq)("",!0)],8,a)}(0,r.Cn)(),s.render=m,s.__scopeId="data-v-f81ca714";var g=(()=>{const t=s;return t.install=e=>{e.component("Vue3SimpleTypeahead",t)},t})()},299:function(t,e,n){"use strict";n.d(e,{MT:function(){return tt}});n(7658),n(1703);var r=n(8473),i=n(4188);function o(){return s().__VUE_DEVTOOLS_GLOBAL_HOOK__}function s(){return"undefined"!==typeof navigator&&"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{}}const a="function"===typeof Proxy,l="devtools-plugin:setup",c="plugin:settings:set";let u,d;function h(){var t;return void 0!==u||("undefined"!==typeof window&&window.performance?(u=!0,d=window.performance):"undefined"!==typeof n.g&&(null===(t=n.g.perf_hooks)||void 0===t?void 0:t.performance)?(u=!0,d=n.g.perf_hooks.performance):u=!1),u}function f(){return h()?d.now():Date.now()}class p{constructor(t,e){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=e;const n={};if(t.settings)for(const s in t.settings){const e=t.settings[s];n[s]=e.defaultValue}const r=`__vue-devtools-plugin-settings__${t.id}`;let i=Object.assign({},n);try{const t=localStorage.getItem(r),e=JSON.parse(t);Object.assign(i,e)}catch(o){}this.fallbacks={getSettings(){return i},setSettings(t){try{localStorage.setItem(r,JSON.stringify(t))}catch(o){}i=t},now(){return f()}},e&&e.on(c,((t,e)=>{t===this.plugin.id&&this.fallbacks.setSettings(e)})),this.proxiedOn=new Proxy({},{get:(t,e)=>this.target?this.target.on[e]:(...t)=>{this.onQueue.push({method:e,args:t})}}),this.proxiedTarget=new Proxy({},{get:(t,e)=>this.target?this.target[e]:"on"===e?this.proxiedOn:Object.keys(this.fallbacks).includes(e)?(...t)=>(this.targetQueue.push({method:e,args:t,resolve:()=>{}}),this.fallbacks[e](...t)):(...t)=>new Promise((n=>{this.targetQueue.push({method:e,args:t,resolve:n})}))})}async setRealTarget(t){this.target=t;for(const e of this.onQueue)this.target.on[e.method](...e.args);for(const e of this.targetQueue)e.resolve(await this.target[e.method](...e.args))}}function m(t,e){const n=t,r=s(),i=o(),c=a&&n.enableEarlyProxy;if(!i||!r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__&&c){const t=c?new p(n,i):null,o=r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[];o.push({pluginDescriptor:n,setupFn:e,proxy:t}),t&&e(t.proxiedTarget)}else i.emit(l,t,e)}
/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */
var g="store";function v(t,e){Object.keys(t).forEach((function(n){return e(t[n],n)}))}function y(t){return null!==t&&"object"===typeof t}function b(t){return t&&"function"===typeof t.then}function _(t,e){return function(){return t(e)}}function w(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function x(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;E(t,n,[],t._modules.root,!0),S(t,n,e)}function S(t,e,n){var o=t._state,s=t._scope;t.getters={},t._makeLocalGettersCache=Object.create(null);var a=t._wrappedGetters,l={},c={},u=(0,i.B)(!0);u.run((function(){v(a,(function(e,n){l[n]=_(e,t),c[n]=(0,r.Fl)((function(){return l[n]()})),Object.defineProperty(t.getters,n,{get:function(){return c[n].value},enumerable:!0})}))})),t._state=(0,i.qj)({data:e}),t._scope=u,t.strict&&O(t),o&&n&&t._withCommit((function(){o.data=null})),s&&s.stop()}function E(t,e,n,r,i){var o=!n.length,s=t._modules.getNamespace(n);if(r.namespaced&&(t._modulesNamespaceMap[s],t._modulesNamespaceMap[s]=r),!o&&!i){var a=R(e,n.slice(0,-1)),l=n[n.length-1];t._withCommit((function(){a[l]=r.state}))}var c=r.context=M(t,s,n);r.forEachMutation((function(e,n){var r=s+n;C(t,r,e,c)})),r.forEachAction((function(e,n){var r=e.root?n:s+n,i=e.handler||e;A(t,r,i,c)})),r.forEachGetter((function(e,n){var r=s+n;k(t,r,e,c)})),r.forEachChild((function(r,o){E(t,e,n.concat(o),r,i)}))}function M(t,e,n){var r=""===e,i={dispatch:r?t.dispatch:function(n,r,i){var o=P(n,r,i),s=o.payload,a=o.options,l=o.type;return a&&a.root||(l=e+l),t.dispatch(l,s)},commit:r?t.commit:function(n,r,i){var o=P(n,r,i),s=o.payload,a=o.options,l=o.type;a&&a.root||(l=e+l),t.commit(l,s,a)}};return Object.defineProperties(i,{getters:{get:r?function(){return t.getters}:function(){return T(t,e)}},state:{get:function(){return R(t.state,n)}}}),i}function T(t,e){if(!t._makeLocalGettersCache[e]){var n={},r=e.length;Object.keys(t.getters).forEach((function(i){if(i.slice(0,r)===e){var o=i.slice(r);Object.defineProperty(n,o,{get:function(){return t.getters[i]},enumerable:!0})}})),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function C(t,e,n,r){var i=t._mutations[e]||(t._mutations[e]=[]);i.push((function(e){n.call(t,r.state,e)}))}function A(t,e,n,r){var i=t._actions[e]||(t._actions[e]=[]);i.push((function(e){var i=n.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},e);return b(i)||(i=Promise.resolve(i)),t._devtoolHook?i.catch((function(e){throw t._devtoolHook.emit("vuex:error",e),e})):i}))}function k(t,e,n,r){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(t){return n(r.state,r.getters,t.state,t.getters)})}function O(t){(0,r.YP)((function(){return t._state.data}),(function(){0}),{deep:!0,flush:"sync"})}function R(t,e){return e.reduce((function(t,e){return t[e]}),t)}function P(t,e,n){return y(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}var L="vuex bindings",D="vuex:mutations",I="vuex:actions",N="vuex",U=0;function F(t,e){m({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[L]},(function(n){n.addTimelineLayer({id:D,label:"Vuex Mutations",color:B}),n.addTimelineLayer({id:I,label:"Vuex Actions",color:B}),n.addInspector({id:N,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree((function(n){if(n.app===t&&n.inspectorId===N)if(n.filter){var r=[];G(r,e._modules.root,n.filter,""),n.rootNodes=r}else n.rootNodes=[W(e._modules.root,"")]})),n.on.getInspectorState((function(n){if(n.app===t&&n.inspectorId===N){var r=n.nodeId;T(e,r),n.state=$(Y(e._modules,r),"root"===r?e.getters:e._makeLocalGettersCache,r)}})),n.on.editInspectorState((function(n){if(n.app===t&&n.inspectorId===N){var r=n.nodeId,i=n.path;"root"!==r&&(i=r.split("/").filter(Boolean).concat(i)),e._withCommit((function(){n.set(e._state.data,i,n.state.value)}))}})),e.subscribe((function(t,e){var r={};t.payload&&(r.payload=t.payload),r.state=e,n.notifyComponentUpdate(),n.sendInspectorTree(N),n.sendInspectorState(N),n.addTimelineEvent({layerId:D,event:{time:Date.now(),title:t.type,data:r}})})),e.subscribeAction({before:function(t,e){var r={};t.payload&&(r.payload=t.payload),t._id=U++,t._time=Date.now(),r.state=e,n.addTimelineEvent({layerId:I,event:{time:t._time,title:t.type,groupId:t._id,subtitle:"start",data:r}})},after:function(t,e){var r={},i=Date.now()-t._time;r.duration={_custom:{type:"duration",display:i+"ms",tooltip:"Action duration",value:i}},t.payload&&(r.payload=t.payload),r.state=e,n.addTimelineEvent({layerId:I,event:{time:Date.now(),title:t.type,groupId:t._id,subtitle:"end",data:r}})}})}))}var B=8702998,V=6710886,z=16777215,j={label:"namespaced",textColor:z,backgroundColor:V};function H(t){return t&&"root"!==t?t.split("/").slice(-2,-1)[0]:"Root"}function W(t,e){return{id:e||"root",label:H(e),tags:t.namespaced?[j]:[],children:Object.keys(t._children).map((function(n){return W(t._children[n],e+n+"/")}))}}function G(t,e,n,r){r.includes(n)&&t.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:e.namespaced?[j]:[]}),Object.keys(e._children).forEach((function(i){G(t,e._children[i],n,r+i+"/")}))}function $(t,e,n){e="root"===n?e:e[n];var r=Object.keys(e),i={state:Object.keys(t.state).map((function(e){return{key:e,editable:!0,value:t.state[e]}}))};if(r.length){var o=q(e);i.getters=Object.keys(o).map((function(t){return{key:t.endsWith("/")?H(t):t,editable:!1,value:X((function(){return o[t]}))}}))}return i}function q(t){var e={};return Object.keys(t).forEach((function(n){var r=n.split("/");if(r.length>1){var i=e,o=r.pop();r.forEach((function(t){i[t]||(i[t]={_custom:{value:{},display:t,tooltip:"Module",abstract:!0}}),i=i[t]._custom.value})),i[o]=X((function(){return t[n]}))}else e[n]=X((function(){return t[n]}))})),e}function Y(t,e){var n=e.split("/").filter((function(t){return t}));return n.reduce((function(t,r,i){var o=t[r];if(!o)throw new Error('Missing module "'+r+'" for path "'+e+'".');return i===n.length-1?o:o._children}),"root"===e?t:t.root._children)}function X(t){try{return t()}catch(e){return e}}var Z=function(t,e){this.runtime=e,this._children=Object.create(null),this._rawModule=t;var n=t.state;this.state=("function"===typeof n?n():n)||{}},K={namespaced:{configurable:!0}};K.namespaced.get=function(){return!!this._rawModule.namespaced},Z.prototype.addChild=function(t,e){this._children[t]=e},Z.prototype.removeChild=function(t){delete this._children[t]},Z.prototype.getChild=function(t){return this._children[t]},Z.prototype.hasChild=function(t){return t in this._children},Z.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},Z.prototype.forEachChild=function(t){v(this._children,t)},Z.prototype.forEachGetter=function(t){this._rawModule.getters&&v(this._rawModule.getters,t)},Z.prototype.forEachAction=function(t){this._rawModule.actions&&v(this._rawModule.actions,t)},Z.prototype.forEachMutation=function(t){this._rawModule.mutations&&v(this._rawModule.mutations,t)},Object.defineProperties(Z.prototype,K);var J=function(t){this.register([],t,!1)};function Q(t,e,n){if(e.update(n),n.modules)for(var r in n.modules){if(!e.getChild(r))return void 0;Q(t.concat(r),e.getChild(r),n.modules[r])}}J.prototype.get=function(t){return t.reduce((function(t,e){return t.getChild(e)}),this.root)},J.prototype.getNamespace=function(t){var e=this.root;return t.reduce((function(t,n){return e=e.getChild(n),t+(e.namespaced?n+"/":"")}),"")},J.prototype.update=function(t){Q([],this.root,t)},J.prototype.register=function(t,e,n){var r=this;void 0===n&&(n=!0);var i=new Z(e,n);if(0===t.length)this.root=i;else{var o=this.get(t.slice(0,-1));o.addChild(t[t.length-1],i)}e.modules&&v(e.modules,(function(e,i){r.register(t.concat(i),e,n)}))},J.prototype.unregister=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1],r=e.getChild(n);r&&r.runtime&&e.removeChild(n)},J.prototype.isRegistered=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1];return!!e&&e.hasChild(n)};function tt(t){return new et(t)}var et=function(t){var e=this;void 0===t&&(t={});var n=t.plugins;void 0===n&&(n=[]);var r=t.strict;void 0===r&&(r=!1);var i=t.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new J(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=i;var o=this,s=this,a=s.dispatch,l=s.commit;this.dispatch=function(t,e){return a.call(o,t,e)},this.commit=function(t,e,n){return l.call(o,t,e,n)},this.strict=r;var c=this._modules.root.state;E(this,c,[],this._modules.root),S(this,c),n.forEach((function(t){return t(e)}))},nt={state:{configurable:!0}};et.prototype.install=function(t,e){t.provide(e||g,this),t.config.globalProperties.$store=this;var n=void 0!==this._devtools&&this._devtools;n&&F(t,this)},nt.state.get=function(){return this._state.data},nt.state.set=function(t){0},et.prototype.commit=function(t,e,n){var r=this,i=P(t,e,n),o=i.type,s=i.payload,a=(i.options,{type:o,payload:s}),l=this._mutations[o];l&&(this._withCommit((function(){l.forEach((function(t){t(s)}))})),this._subscribers.slice().forEach((function(t){return t(a,r.state)})))},et.prototype.dispatch=function(t,e){var n=this,r=P(t,e),i=r.type,o=r.payload,s={type:i,payload:o},a=this._actions[i];if(a){try{this._actionSubscribers.slice().filter((function(t){return t.before})).forEach((function(t){return t.before(s,n.state)}))}catch(c){0}var l=a.length>1?Promise.all(a.map((function(t){return t(o)}))):a[0](o);return new Promise((function(t,e){l.then((function(e){try{n._actionSubscribers.filter((function(t){return t.after})).forEach((function(t){return t.after(s,n.state)}))}catch(c){0}t(e)}),(function(t){try{n._actionSubscribers.filter((function(t){return t.error})).forEach((function(e){return e.error(s,n.state,t)}))}catch(c){0}e(t)}))}))}},et.prototype.subscribe=function(t,e){return w(t,this._subscribers,e)},et.prototype.subscribeAction=function(t,e){var n="function"===typeof t?{before:t}:t;return w(n,this._actionSubscribers,e)},et.prototype.watch=function(t,e,n){var i=this;return(0,r.YP)((function(){return t(i.state,i.getters)}),e,Object.assign({},n))},et.prototype.replaceState=function(t){var e=this;this._withCommit((function(){e._state.data=t}))},et.prototype.registerModule=function(t,e,n){void 0===n&&(n={}),"string"===typeof t&&(t=[t]),this._modules.register(t,e),E(this,this.state,t,this._modules.get(t),n.preserveState),S(this,this.state)},et.prototype.unregisterModule=function(t){var e=this;"string"===typeof t&&(t=[t]),this._modules.unregister(t),this._withCommit((function(){var n=R(e.state,t.slice(0,-1));delete n[t[t.length-1]]})),x(this)},et.prototype.hasModule=function(t){return"string"===typeof t&&(t=[t]),this._modules.isRegistered(t)},et.prototype.hotUpdate=function(t){this._modules.update(t),x(this,!0)},et.prototype._withCommit=function(t){var e=this._committing;this._committing=!0,t(),this._committing=e},Object.defineProperties(et.prototype,nt);ot((function(t,e){var n={};return rt(e).forEach((function(e){var r=e.key,i=e.val;n[r]=function(){var e=this.$store.state,n=this.$store.getters;if(t){var r=st(this.$store,"mapState",t);if(!r)return;e=r.context.state,n=r.context.getters}return"function"===typeof i?i.call(this,e,n):e[i]},n[r].vuex=!0})),n})),ot((function(t,e){var n={};return rt(e).forEach((function(e){var r=e.key,i=e.val;n[r]=function(){var e=[],n=arguments.length;while(n--)e[n]=arguments[n];var r=this.$store.commit;if(t){var o=st(this.$store,"mapMutations",t);if(!o)return;r=o.context.commit}return"function"===typeof i?i.apply(this,[r].concat(e)):r.apply(this.$store,[i].concat(e))}})),n})),ot((function(t,e){var n={};return rt(e).forEach((function(e){var r=e.key,i=e.val;i=t+i,n[r]=function(){if(!t||st(this.$store,"mapGetters",t))return this.$store.getters[i]},n[r].vuex=!0})),n})),ot((function(t,e){var n={};return rt(e).forEach((function(e){var r=e.key,i=e.val;n[r]=function(){var e=[],n=arguments.length;while(n--)e[n]=arguments[n];var r=this.$store.dispatch;if(t){var o=st(this.$store,"mapActions",t);if(!o)return;r=o.context.dispatch}return"function"===typeof i?i.apply(this,[r].concat(e)):r.apply(this.$store,[i].concat(e))}})),n}));function rt(t){return it(t)?Array.isArray(t)?t.map((function(t){return{key:t,val:t}})):Object.keys(t).map((function(e){return{key:e,val:t[e]}})):[]}function it(t){return Array.isArray(t)||y(t)}function ot(t){return function(e,n){return"string"!==typeof e?(n=e,e=""):"/"!==e.charAt(e.length-1)&&(e+="/"),t(e,n)}}function st(t,e,n){var r=t._modulesNamespaceMap[n];return r}},2993:function(t,e,n){"use strict";n.d(e,{VU:function(){return M}});n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315);var r=n(2428),i=n(9514),o=n(4251),s=n(4805),a=n(3428);const l=0,c=(t,e,n)=>{switch(s.yg(t)){case l:n(e,s.kf(t))}};var u=n(2405),d=n(3837),h=n(3035),f=n(3913);const p=t=>f.UI(t,((t,e)=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)).join("&"),m=0,g=3,v=1,y=2,b=[];b[m]=(t,e,n,r,i)=>{o.uE(t,m);const s=a.zu(e,t,n.doc,n);r&&s===a.Px&&!n.synced&&(n.synced=!0)},b[g]=(t,e,n,r,i)=>{o.uE(t,v),o.mP(t,u.xq(n.awareness,Array.from(n.awareness.getStates().keys())))},b[v]=(t,e,n,r,i)=>{u.oy(n.awareness,s.HN(e),n)},b[y]=(t,e,n,r,i)=>{c(e,n.doc,((t,e)=>w(n,e)))};const _=3e4,w=(t,e)=>console.warn(`Permission denied to access ${t.url}.\n${e}`),x=(t,e,n)=>{const r=s.l1(e),i=o.Mf(),a=s.yg(r),l=t.messageHandlers[a];return l?l(i,r,t,n,a):console.error("Unable to compute message"),i},S=t=>{if(t.shouldConnect&&null===t.ws){const e=new t._WS(t.url);e.binaryType="arraybuffer",t.ws=e,t.wsconnecting=!0,t.wsconnected=!1,t.synced=!1,e.onmessage=n=>{t.wsLastMessageReceived=i.ZG();const r=x(t,new Uint8Array(n.data),!0);o.kE(r)>1&&e.send(o._f(r))},e.onerror=e=>{t.emit("connection-error",[e,t])},e.onclose=e=>{t.emit("connection-close",[e,t]),t.ws=null,t.wsconnecting=!1,t.wsconnected?(t.wsconnected=!1,t.synced=!1,u.Ag(t.awareness,Array.from(t.awareness.getStates().keys()).filter((e=>e!==t.doc.clientID)),t),t.emit("status",[{status:"disconnected"}])):t.wsUnsuccessfulReconnects++,setTimeout(S,h.VV(100*h.sQ(2,t.wsUnsuccessfulReconnects),t.maxBackoffTime),t)},e.onopen=()=>{t.wsLastMessageReceived=i.ZG(),t.wsconnecting=!1,t.wsconnected=!0,t.wsUnsuccessfulReconnects=0,t.emit("status",[{status:"connected"}]);const n=o.Mf();if(o.uE(n,m),a._J(n,t.doc),e.send(o._f(n)),null!==t.awareness.getLocalState()){const n=o.Mf();o.uE(n,v),o.mP(n,u.xq(t.awareness,[t.doc.clientID])),e.send(o._f(n))}},t.emit("status",[{status:"connecting"}])}},E=(t,e)=>{const n=t.ws;t.wsconnected&&n&&n.readyState===n.OPEN&&n.send(e),t.bcconnected&&r.nY(t.bcChannel,e,t)};class M extends d.y{constructor(t,e,n,{connect:s=!0,awareness:l=new u.GL(n),params:c={},WebSocketPolyfill:d=WebSocket,resyncInterval:h=-1,maxBackoffTime:f=2500,disableBc:g=!1}={}){super();while("/"===t[t.length-1])t=t.slice(0,t.length-1);const y=p(c);this.maxBackoffTime=f,this.bcChannel=t+"/"+e,this.url=t+"/"+e+(0===y.length?"":"?"+y),this.roomname=e,this.doc=n,this._WS=d,this.awareness=l,this.wsconnected=!1,this.wsconnecting=!1,this.bcconnected=!1,this.disableBc=g,this.wsUnsuccessfulReconnects=0,this.messageHandlers=b.slice(),this._synced=!1,this.ws=null,this.wsLastMessageReceived=0,this.shouldConnect=s,this._resyncInterval=0,h>0&&(this._resyncInterval=setInterval((()=>{if(this.ws&&this.ws.readyState===WebSocket.OPEN){const t=o.Mf();o.uE(t,m),a._J(t,n),this.ws.send(o._f(t))}}),h)),this._bcSubscriber=(t,e)=>{if(e!==this){const e=x(this,new Uint8Array(t),!1);o.kE(e)>1&&r.nY(this.bcChannel,o._f(e),this)}},this._updateHandler=(t,e)=>{if(e!==this){const e=o.Mf();o.uE(e,m),a.lr(e,t),E(this,o._f(e))}},this.doc.on("update",this._updateHandler),this._awarenessUpdateHandler=({added:t,updated:e,removed:n},r)=>{const i=t.concat(e).concat(n),s=o.Mf();o.uE(s,v),o.mP(s,u.xq(l,i)),E(this,o._f(s))},this._unloadHandler=()=>{u.Ag(this.awareness,[n.clientID],"window unload")},"undefined"!==typeof window?window.addEventListener("unload",this._unloadHandler):"undefined"!==typeof process&&process.on("exit",this._unloadHandler),l.on("update",this._awarenessUpdateHandler),this._checkInterval=setInterval((()=>{this.wsconnected&&_<i.ZG()-this.wsLastMessageReceived&&this.ws.close()}),_/10),s&&this.connect()}get synced(){return this._synced}set synced(t){this._synced!==t&&(this._synced=t,this.emit("synced",[t]),this.emit("sync",[t]))}destroy(){0!==this._resyncInterval&&clearInterval(this._resyncInterval),clearInterval(this._checkInterval),this.disconnect(),"undefined"!==typeof window?window.removeEventListener("unload",this._unloadHandler):"undefined"!==typeof process&&process.off("exit",this._unloadHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.doc.off("update",this._updateHandler),super.destroy()}connectBc(){if(this.disableBc)return;this.bcconnected||(r.Ld(this.bcChannel,this._bcSubscriber),this.bcconnected=!0);const t=o.Mf();o.uE(t,m),a._J(t,this.doc),r.nY(this.bcChannel,o._f(t),this);const e=o.Mf();o.uE(e,m),a.K0(e,this.doc),r.nY(this.bcChannel,o._f(e),this);const n=o.Mf();o.uE(n,g),r.nY(this.bcChannel,o._f(n),this);const i=o.Mf();o.uE(i,v),o.mP(i,u.xq(this.awareness,[this.doc.clientID])),r.nY(this.bcChannel,o._f(i),this)}disconnectBc(){const t=o.Mf();o.uE(t,v),o.mP(t,u.xq(this.awareness,[this.doc.clientID],new Map)),E(this,o._f(t)),this.bcconnected&&(r.r1(this.bcChannel,this._bcSubscriber),this.bcconnected=!1)}disconnect(){this.shouldConnect=!1,this.disconnectBc(),null!==this.ws&&this.ws.close()}connect(){this.shouldConnect=!0,this.wsconnected||null!==this.ws||(S(this),this.connectBc())}}},4727:function(t,e,n){"use strict";t.exports=n.p+"img/remixicon.symbol.9a882558.svg"},5108:function(t,e,n){"use strict";n.d(e,{Z:function(){return ca}});n(7658),n(1703);var r=n(899);const i=new r.JOQ,o=new r.iMs,s=new r.FM8,a=new r.Pa4,l=new r.Pa4,c=new r.Pa4,u=new r.yGw;class d extends r.pBf{constructor(t,e,n){super(),n.style.touchAction="none";let r=null,d=null;const h=[],f=this;function p(){n.addEventListener("pointermove",b),n.addEventListener("pointerdown",_),n.addEventListener("pointerup",w),n.addEventListener("pointerleave",w)}function m(){n.removeEventListener("pointermove",b),n.removeEventListener("pointerdown",_),n.removeEventListener("pointerup",w),n.removeEventListener("pointerleave",w),n.style.cursor=""}function g(){m()}function v(){return t}function y(){return o}function b(p){if(!1!==f.enabled){if(x(p),o.setFromCamera(s,e),r)return o.ray.intersectPlane(i,l)&&r.position.copy(l.sub(a).applyMatrix4(u)),void f.dispatchEvent({type:"drag",object:r});if("mouse"===p.pointerType||"pen"===p.pointerType)if(h.length=0,o.setFromCamera(s,e),o.intersectObjects(t,!0,h),h.length>0){const t=h[0].object;i.setFromNormalAndCoplanarPoint(e.getWorldDirection(i.normal),c.setFromMatrixPosition(t.matrixWorld)),d!==t&&null!==d&&(f.dispatchEvent({type:"hoveroff",object:d}),n.style.cursor="auto",d=null),d!==t&&(f.dispatchEvent({type:"hoveron",object:t}),n.style.cursor="pointer",d=t)}else null!==d&&(f.dispatchEvent({type:"hoveroff",object:d}),n.style.cursor="auto",d=null)}}function _(d){!1!==f.enabled&&(x(d),h.length=0,o.setFromCamera(s,e),o.intersectObjects(t,!0,h),h.length>0&&(r=!0===f.transformGroup?t[0]:h[0].object,i.setFromNormalAndCoplanarPoint(e.getWorldDirection(i.normal),c.setFromMatrixPosition(r.matrixWorld)),o.ray.intersectPlane(i,l)&&(u.copy(r.parent.matrixWorld).invert(),a.copy(l).sub(c.setFromMatrixPosition(r.matrixWorld))),n.style.cursor="move",f.dispatchEvent({type:"dragstart",object:r})))}function w(){!1!==f.enabled&&(r&&(f.dispatchEvent({type:"dragend",object:r}),r=null),n.style.cursor=d?"pointer":"auto")}function x(t){const e=n.getBoundingClientRect();s.x=(t.clientX-e.left)/e.width*2-1,s.y=-(t.clientY-e.top)/e.height*2+1}p(),this.enabled=!0,this.transformGroup=!1,this.activate=p,this.deactivate=m,this.dispose=g,this.getObjects=v,this.getRaycaster=y}}n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315);var h={value:()=>{}};function f(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new p(r)}function p(t){this._=t}function m(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function g(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function v(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=h,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}p.prototype=f.prototype={constructor:p,on:function(t,e){var n,r=this._,i=m(t+"",r),o=-1,s=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!==typeof e)throw new Error("invalid callback: "+e);while(++o<s)if(n=(t=i[o]).type)r[n]=v(r[n],t.name,e);else if(null==e)for(n in r)r[n]=v(r[n],t.name,null);return this}while(++o<s)if((n=(t=i[o]).type)&&(n=g(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new p(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],o=0,n=r.length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var y,b,_=f,w=0,x=0,S=0,E=1e3,M=0,T=0,C=0,A="object"===typeof performance&&performance.now?performance:Date,k="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function O(){return T||(k(R),T=A.now()+C)}function R(){T=0}function P(){this._call=this._time=this._next=null}function L(t,e,n){var r=new P;return r.restart(t,e,n),r}function D(){O(),++w;var t,e=y;while(e)(t=T-e._time)>=0&&e._call.call(void 0,t),e=e._next;--w}function I(){T=(M=A.now())+C,w=x=0;try{D()}finally{w=0,U(),T=0}}function N(){var t=A.now(),e=t-M;e>E&&(C-=e,M=t)}function U(){var t,e,n=y,r=1/0;while(n)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:y=e);b=t,F(r)}function F(t){if(!w){x&&(x=clearTimeout(x));var e=t-T;e>24?(t<1/0&&(x=setTimeout(I,t-A.now()-C)),S&&(S=clearInterval(S))):(S||(M=A.now(),S=setInterval(N,E)),w=1,k(I))}}P.prototype=L.prototype={constructor:P,restart:function(t,e,n){if("function"!==typeof t)throw new TypeError("callback is not a function");n=(null==n?O():+n)+(null==e?0:+e),this._next||b===this||(b?b._next=this:y=this,b=this),this._call=t,this._time=n,F()},stop:function(){this._call&&(this._call=null,this._time=1/0,F())}};const B=1664525,V=1013904223,z=4294967296;function j(){let t=1;return()=>(t=(B*t+V)%z)/z}var H=3;function W(t){return t.x}function G(t){return t.y}function $(t){return t.z}var q=10,Y=Math.PI*(3-Math.sqrt(5)),X=20*Math.PI/(9+Math.sqrt(221));function Z(t,e){e=e||2;var n,r=Math.min(H,Math.max(1,Math.round(e))),i=1,o=.001,s=1-Math.pow(o,1/300),a=0,l=.6,c=new Map,u=L(f),d=_("tick","end"),h=j();function f(){p(),d.call("tick",n),i<o&&(u.stop(),d.call("end",n))}function p(e){var o,u,d=t.length;void 0===e&&(e=1);for(var h=0;h<e;++h)for(i+=(a-i)*s,c.forEach((function(t){t(i)})),o=0;o<d;++o)u=t[o],null==u.fx?u.x+=u.vx*=l:(u.x=u.fx,u.vx=0),r>1&&(null==u.fy?u.y+=u.vy*=l:(u.y=u.fy,u.vy=0)),r>2&&(null==u.fz?u.z+=u.vz*=l:(u.z=u.fz,u.vz=0));return n}function m(){for(var e,n=0,i=t.length;n<i;++n){if(e=t[n],e.index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),null!=e.fz&&(e.z=e.fz),isNaN(e.x)||r>1&&isNaN(e.y)||r>2&&isNaN(e.z)){var o=q*(r>2?Math.cbrt(.5+n):r>1?Math.sqrt(.5+n):n),s=n*Y,a=n*X;1===r?e.x=o:2===r?(e.x=o*Math.cos(s),e.y=o*Math.sin(s)):(e.x=o*Math.sin(s)*Math.cos(a),e.y=o*Math.cos(s),e.z=o*Math.sin(s)*Math.sin(a))}(isNaN(e.vx)||r>1&&isNaN(e.vy)||r>2&&isNaN(e.vz))&&(e.vx=0,r>1&&(e.vy=0),r>2&&(e.vz=0))}}function g(e){return e.initialize&&e.initialize(t,h,r),e}return null==t&&(t=[]),m(),n={tick:p,restart:function(){return u.restart(f),n},stop:function(){return u.stop(),n},numDimensions:function(t){return arguments.length?(r=Math.min(H,Math.max(1,Math.round(t))),c.forEach(g),n):r},nodes:function(e){return arguments.length?(t=e,m(),c.forEach(g),n):t},alpha:function(t){return arguments.length?(i=+t,n):i},alphaMin:function(t){return arguments.length?(o=+t,n):o},alphaDecay:function(t){return arguments.length?(s=+t,n):+s},alphaTarget:function(t){return arguments.length?(a=+t,n):a},velocityDecay:function(t){return arguments.length?(l=1-t,n):1-l},randomSource:function(t){return arguments.length?(h=t,c.forEach(g),n):h},force:function(t,e){return arguments.length>1?(null==e?c.delete(t):c.set(t,g(e)),n):c.get(t)},find:function(){var e,n,i,o,s,a,l=Array.prototype.slice.call(arguments),c=l.shift()||0,u=(r>1?l.shift():null)||0,d=(r>2?l.shift():null)||0,h=l.shift()||1/0,f=0,p=t.length;for(h*=h,f=0;f<p;++f)s=t[f],e=c-s.x,n=u-(s.y||0),i=d-(s.z||0),o=e*e+n*n+i*i,o<h&&(a=s,h=o);return a},on:function(t,e){return arguments.length>1?(d.on(t,e),n):d.on(t)}}}function K(t){return function(){return t}}function J(t){return 1e-6*(t()-.5)}function Q(t){return t.index}function tt(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function et(t){var e,n,r,i,o,s,a,l=Q,c=h,u=K(30),d=1;function h(t){return 1/Math.min(o[t.source.index],o[t.target.index])}function f(r){for(var o=0,l=t.length;o<d;++o)for(var c,u,h,f,p,m=0,g=0,v=0,y=0;m<l;++m)c=t[m],u=c.source,h=c.target,g=h.x+h.vx-u.x-u.vx||J(a),i>1&&(v=h.y+h.vy-u.y-u.vy||J(a)),i>2&&(y=h.z+h.vz-u.z-u.vz||J(a)),f=Math.sqrt(g*g+v*v+y*y),f=(f-n[m])/f*r*e[m],g*=f,v*=f,y*=f,h.vx-=g*(p=s[m]),i>1&&(h.vy-=v*p),i>2&&(h.vz-=y*p),u.vx+=g*(p=1-p),i>1&&(u.vy+=v*p),i>2&&(u.vz+=y*p)}function p(){if(r){var i,a,c=r.length,u=t.length,d=new Map(r.map(((t,e)=>[l(t,e,r),t])));for(i=0,o=new Array(c);i<u;++i)a=t[i],a.index=i,"object"!==typeof a.source&&(a.source=tt(d,a.source)),"object"!==typeof a.target&&(a.target=tt(d,a.target)),o[a.source.index]=(o[a.source.index]||0)+1,o[a.target.index]=(o[a.target.index]||0)+1;for(i=0,s=new Array(u);i<u;++i)a=t[i],s[i]=o[a.source.index]/(o[a.source.index]+o[a.target.index]);e=new Array(u),m(),n=new Array(u),g()}}function m(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+c(t[n],n,t)}function g(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+u(t[e],e,t)}return null==t&&(t=[]),f.initialize=function(t,...e){r=t,a=e.find((t=>"function"===typeof t))||Math.random,i=e.find((t=>[1,2,3].includes(t)))||2,p()},f.links=function(e){return arguments.length?(t=e,p(),f):t},f.id=function(t){return arguments.length?(l=t,f):l},f.iterations=function(t){return arguments.length?(d=+t,f):d},f.strength=function(t){return arguments.length?(c="function"===typeof t?t:K(+t),m(),f):c},f.distance=function(t){return arguments.length?(u="function"===typeof t?t:K(+t),g(),f):u},f}function nt(t){const e=+this._x.call(null,t);return rt(this.cover(e),e,t)}function rt(t,e,n){if(isNaN(e))return t;var r,i,o,s,a,l,c=t._root,u={data:n},d=t._x0,h=t._x1;if(!c)return t._root=u,t;while(c.length)if((s=e>=(i=(d+h)/2))?d=i:h=i,r=c,!(c=c[a=+s]))return r[a]=u,t;if(o=+t._x.call(null,c.data),e===o)return u.next=c,r?r[a]=u:t._root=u,t;do{r=r?r[a]=new Array(2):t._root=new Array(2),(s=e>=(i=(d+h)/2))?d=i:h=i}while((a=+s)===(l=+(o>=i)));return r[l]=c,r[a]=u,t}function it(t){Array.isArray(t)||(t=Array.from(t));const e=t.length,n=new Float64Array(e);let r=1/0,i=-1/0;for(let o,s=0;s<e;++s)isNaN(o=+this._x.call(null,t[s]))||(n[s]=o,o<r&&(r=o),o>i&&(i=o));if(r>i)return this;this.cover(r).cover(i);for(let o=0;o<e;++o)rt(this,n[o],t[o]);return this}function ot(t){if(isNaN(t=+t))return this;var e=this._x0,n=this._x1;if(isNaN(e))n=(e=Math.floor(t))+1;else{var r,i,o=n-e||1,s=this._root;while(e>t||t>=n)switch(i=+(t<e),r=new Array(2),r[i]=s,s=r,o*=2,i){case 0:n=e+o;break;case 1:e=n-o;break}this._root&&this._root.length&&(this._root=s)}return this._x0=e,this._x1=n,this}function st(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t}function at(t){return arguments.length?this.cover(+t[0][0]).cover(+t[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function lt(t,e,n){this.node=t,this.x0=e,this.x1=n}function ct(t,e){var n,r,i,o,s,a=this._x0,l=this._x1,c=[],u=this._root;u&&c.push(new lt(u,a,l)),null==e?e=1/0:(a=t-e,l=t+e);while(o=c.pop())if(!(!(u=o.node)||(r=o.x0)>l||(i=o.x1)<a))if(u.length){var d=(r+i)/2;c.push(new lt(u[1],d,i),new lt(u[0],r,d)),(s=+(t>=d))&&(o=c[c.length-1],c[c.length-1]=c[c.length-1-s],c[c.length-1-s]=o)}else{var h=Math.abs(t-+this._x.call(null,u.data));h<e&&(e=h,a=t-h,l=t+h,n=u.data)}return n}function ut(t){if(isNaN(o=+this._x.call(null,t)))return this;var e,n,r,i,o,s,a,l,c,u=this._root,d=this._x0,h=this._x1;if(!u)return this;if(u.length)while(1){if((a=o>=(s=(d+h)/2))?d=s:h=s,e=u,!(u=u[l=+a]))return this;if(!u.length)break;e[l+1&1]&&(n=e,c=l)}while(u.data!==t)if(r=u,!(u=u.next))return this;return(i=u.next)&&delete u.next,r?(i?r.next=i:delete r.next,this):e?(i?e[l]=i:delete e[l],(u=e[0]||e[1])&&u===(e[1]||e[0])&&!u.length&&(n?n[c]=u:this._root=u),this):(this._root=i,this)}function dt(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function ht(){return this._root}function ft(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t}function pt(t){var e,n,r,i,o=[],s=this._root;s&&o.push(new lt(s,this._x0,this._x1));while(e=o.pop())if(!t(s=e.node,r=e.x0,i=e.x1)&&s.length){var a=(r+i)/2;(n=s[1])&&o.push(new lt(n,a,i)),(n=s[0])&&o.push(new lt(n,r,a))}return this}function mt(t){var e,n=[],r=[];this._root&&n.push(new lt(this._root,this._x0,this._x1));while(e=n.pop()){var i=e.node;if(i.length){var o,s=e.x0,a=e.x1,l=(s+a)/2;(o=i[0])&&n.push(new lt(o,s,l)),(o=i[1])&&n.push(new lt(o,l,a))}r.push(e)}while(e=r.pop())t(e.node,e.x0,e.x1);return this}function gt(t){return t[0]}function vt(t){return arguments.length?(this._x=t,this):this._x}function yt(t,e){var n=new bt(null==e?gt:e,NaN,NaN);return null==t?n:n.addAll(t)}function bt(t,e,n){this._x=t,this._x0=e,this._x1=n,this._root=void 0}function _t(t){var e={data:t.data},n=e;while(t=t.next)n=n.next={data:t.data};return e}var wt=yt.prototype=bt.prototype;function xt(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return St(this.cover(e,n),e,n,t)}function St(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,s,a,l,c,u,d,h,f=t._root,p={data:r},m=t._x0,g=t._y0,v=t._x1,y=t._y1;if(!f)return t._root=p,t;while(f.length)if((c=e>=(o=(m+v)/2))?m=o:v=o,(u=n>=(s=(g+y)/2))?g=s:y=s,i=f,!(f=f[d=u<<1|c]))return i[d]=p,t;if(a=+t._x.call(null,f.data),l=+t._y.call(null,f.data),e===a&&n===l)return p.next=f,i?i[d]=p:t._root=p,t;do{i=i?i[d]=new Array(4):t._root=new Array(4),(c=e>=(o=(m+v)/2))?m=o:v=o,(u=n>=(s=(g+y)/2))?g=s:y=s}while((d=u<<1|c)===(h=(l>=s)<<1|a>=o));return i[h]=f,i[d]=p,t}function Et(t){var e,n,r,i,o=t.length,s=new Array(o),a=new Array(o),l=1/0,c=1/0,u=-1/0,d=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(s[n]=r,a[n]=i,r<l&&(l=r),r>u&&(u=r),i<c&&(c=i),i>d&&(d=i));if(l>u||c>d)return this;for(this.cover(l,c).cover(u,d),n=0;n<o;++n)St(this,s[n],a[n],t[n]);return this}function Mt(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{var s,a,l=i-n||1,c=this._root;while(n>t||t>=i||r>e||e>=o)switch(a=(e<r)<<1|t<n,s=new Array(4),s[a]=c,c=s,l*=2,a){case 0:i=n+l,o=r+l;break;case 1:n=i-l,o=r+l;break;case 2:i=n+l,r=o-l;break;case 3:n=i-l,r=o-l;break}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function Tt(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t}function Ct(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function At(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function kt(t,e,n){var r,i,o,s,a,l,c,u=this._x0,d=this._y0,h=this._x1,f=this._y1,p=[],m=this._root;m&&p.push(new At(m,u,d,h,f)),null==n?n=1/0:(u=t-n,d=e-n,h=t+n,f=e+n,n*=n);while(l=p.pop())if(!(!(m=l.node)||(i=l.x0)>h||(o=l.y0)>f||(s=l.x1)<u||(a=l.y1)<d))if(m.length){var g=(i+s)/2,v=(o+a)/2;p.push(new At(m[3],g,v,s,a),new At(m[2],i,v,g,a),new At(m[1],g,o,s,v),new At(m[0],i,o,g,v)),(c=(e>=v)<<1|t>=g)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=l)}else{var y=t-+this._x.call(null,m.data),b=e-+this._y.call(null,m.data),_=y*y+b*b;if(_<n){var w=Math.sqrt(n=_);u=t-w,d=e-w,h=t+w,f=e+w,r=m.data}}return r}function Ot(t){if(isNaN(o=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t)))return this;var e,n,r,i,o,s,a,l,c,u,d,h,f=this._root,p=this._x0,m=this._y0,g=this._x1,v=this._y1;if(!f)return this;if(f.length)while(1){if((c=o>=(a=(p+g)/2))?p=a:g=a,(u=s>=(l=(m+v)/2))?m=l:v=l,e=f,!(f=f[d=u<<1|c]))return this;if(!f.length)break;(e[d+1&3]||e[d+2&3]||e[d+3&3])&&(n=e,h=d)}while(f.data!==t)if(r=f,!(f=f.next))return this;return(i=f.next)&&delete f.next,r?(i?r.next=i:delete r.next,this):e?(i?e[d]=i:delete e[d],(f=e[0]||e[1]||e[2]||e[3])&&f===(e[3]||e[2]||e[1]||e[0])&&!f.length&&(n?n[h]=f:this._root=f),this):(this._root=i,this)}function Rt(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function Pt(){return this._root}function Lt(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t}function Dt(t){var e,n,r,i,o,s,a=[],l=this._root;l&&a.push(new At(l,this._x0,this._y0,this._x1,this._y1));while(e=a.pop())if(!t(l=e.node,r=e.x0,i=e.y0,o=e.x1,s=e.y1)&&l.length){var c=(r+o)/2,u=(i+s)/2;(n=l[3])&&a.push(new At(n,c,u,o,s)),(n=l[2])&&a.push(new At(n,r,u,c,s)),(n=l[1])&&a.push(new At(n,c,i,o,u)),(n=l[0])&&a.push(new At(n,r,i,c,u))}return this}function It(t){var e,n=[],r=[];this._root&&n.push(new At(this._root,this._x0,this._y0,this._x1,this._y1));while(e=n.pop()){var i=e.node;if(i.length){var o,s=e.x0,a=e.y0,l=e.x1,c=e.y1,u=(s+l)/2,d=(a+c)/2;(o=i[0])&&n.push(new At(o,s,a,u,d)),(o=i[1])&&n.push(new At(o,u,a,l,d)),(o=i[2])&&n.push(new At(o,s,d,u,c)),(o=i[3])&&n.push(new At(o,u,d,l,c))}r.push(e)}while(e=r.pop())t(e.node,e.x0,e.y0,e.x1,e.y1);return this}function Nt(t){return t[0]}function Ut(t){return arguments.length?(this._x=t,this):this._x}function Ft(t){return t[1]}function Bt(t){return arguments.length?(this._y=t,this):this._y}function Vt(t,e,n){var r=new zt(null==e?Nt:e,null==n?Ft:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function zt(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function jt(t){var e={data:t.data},n=e;while(t=t.next)n=n.next={data:t.data};return e}wt.copy=function(){var t,e,n=new bt(this._x,this._x0,this._x1),r=this._root;if(!r)return n;if(!r.length)return n._root=_t(r),n;t=[{source:r,target:n._root=new Array(2)}];while(r=t.pop())for(var i=0;i<2;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(2)}):r.target[i]=_t(e));return n},wt.add=nt,wt.addAll=it,wt.cover=ot,wt.data=st,wt.extent=at,wt.find=ct,wt.remove=ut,wt.removeAll=dt,wt.root=ht,wt.size=ft,wt.visit=pt,wt.visitAfter=mt,wt.x=vt;var Ht=Vt.prototype=zt.prototype;function Wt(t){const e=+this._x.call(null,t),n=+this._y.call(null,t),r=+this._z.call(null,t);return Gt(this.cover(e,n,r),e,n,r,t)}function Gt(t,e,n,r,i){if(isNaN(e)||isNaN(n)||isNaN(r))return t;var o,s,a,l,c,u,d,h,f,p,m,g,v=t._root,y={data:i},b=t._x0,_=t._y0,w=t._z0,x=t._x1,S=t._y1,E=t._z1;if(!v)return t._root=y,t;while(v.length)if((h=e>=(s=(b+x)/2))?b=s:x=s,(f=n>=(a=(_+S)/2))?_=a:S=a,(p=r>=(l=(w+E)/2))?w=l:E=l,o=v,!(v=v[m=p<<2|f<<1|h]))return o[m]=y,t;if(c=+t._x.call(null,v.data),u=+t._y.call(null,v.data),d=+t._z.call(null,v.data),e===c&&n===u&&r===d)return y.next=v,o?o[m]=y:t._root=y,t;do{o=o?o[m]=new Array(8):t._root=new Array(8),(h=e>=(s=(b+x)/2))?b=s:x=s,(f=n>=(a=(_+S)/2))?_=a:S=a,(p=r>=(l=(w+E)/2))?w=l:E=l}while((m=p<<2|f<<1|h)===(g=(d>=l)<<2|(u>=a)<<1|c>=s));return o[g]=v,o[m]=y,t}function $t(t){Array.isArray(t)||(t=Array.from(t));const e=t.length,n=new Float64Array(e),r=new Float64Array(e),i=new Float64Array(e);let o=1/0,s=1/0,a=1/0,l=-1/0,c=-1/0,u=-1/0;for(let d,h,f,p,m=0;m<e;++m)isNaN(h=+this._x.call(null,d=t[m]))||isNaN(f=+this._y.call(null,d))||isNaN(p=+this._z.call(null,d))||(n[m]=h,r[m]=f,i[m]=p,h<o&&(o=h),h>l&&(l=h),f<s&&(s=f),f>c&&(c=f),p<a&&(a=p),p>u&&(u=p));if(o>l||s>c||a>u)return this;this.cover(o,s,a).cover(l,c,u);for(let d=0;d<e;++d)Gt(this,n[d],r[d],i[d],t[d]);return this}function qt(t,e,n){if(isNaN(t=+t)||isNaN(e=+e)||isNaN(n=+n))return this;var r=this._x0,i=this._y0,o=this._z0,s=this._x1,a=this._y1,l=this._z1;if(isNaN(r))s=(r=Math.floor(t))+1,a=(i=Math.floor(e))+1,l=(o=Math.floor(n))+1;else{var c,u,d=s-r||1,h=this._root;while(r>t||t>=s||i>e||e>=a||o>n||n>=l)switch(u=(n<o)<<2|(e<i)<<1|t<r,c=new Array(8),c[u]=h,h=c,d*=2,u){case 0:s=r+d,a=i+d,l=o+d;break;case 1:r=s-d,a=i+d,l=o+d;break;case 2:s=r+d,i=a-d,l=o+d;break;case 3:r=s-d,i=a-d,l=o+d;break;case 4:s=r+d,a=i+d,o=l-d;break;case 5:r=s-d,a=i+d,o=l-d;break;case 6:s=r+d,i=a-d,o=l-d;break;case 7:r=s-d,i=a-d,o=l-d;break}this._root&&this._root.length&&(this._root=h)}return this._x0=r,this._y0=i,this._z0=o,this._x1=s,this._y1=a,this._z1=l,this}function Yt(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t}function Xt(t){return arguments.length?this.cover(+t[0][0],+t[0][1],+t[0][2]).cover(+t[1][0],+t[1][1],+t[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function Zt(t,e,n,r,i,o,s){this.node=t,this.x0=e,this.y0=n,this.z0=r,this.x1=i,this.y1=o,this.z1=s}function Kt(t,e,n,r){var i,o,s,a,l,c,u,d,h,f=this._x0,p=this._y0,m=this._z0,g=this._x1,v=this._y1,y=this._z1,b=[],_=this._root;_&&b.push(new Zt(_,f,p,m,g,v,y)),null==r?r=1/0:(f=t-r,p=e-r,m=n-r,g=t+r,v=e+r,y=n+r,r*=r);while(d=b.pop())if(!(!(_=d.node)||(o=d.x0)>g||(s=d.y0)>v||(a=d.z0)>y||(l=d.x1)<f||(c=d.y1)<p||(u=d.z1)<m))if(_.length){var w=(o+l)/2,x=(s+c)/2,S=(a+u)/2;b.push(new Zt(_[7],w,x,S,l,c,u),new Zt(_[6],o,x,S,w,c,u),new Zt(_[5],w,s,S,l,x,u),new Zt(_[4],o,s,S,w,x,u),new Zt(_[3],w,x,a,l,c,S),new Zt(_[2],o,x,a,w,c,S),new Zt(_[1],w,s,a,l,x,S),new Zt(_[0],o,s,a,w,x,S)),(h=(n>=S)<<2|(e>=x)<<1|t>=w)&&(d=b[b.length-1],b[b.length-1]=b[b.length-1-h],b[b.length-1-h]=d)}else{var E=t-+this._x.call(null,_.data),M=e-+this._y.call(null,_.data),T=n-+this._z.call(null,_.data),C=E*E+M*M+T*T;if(C<r){var A=Math.sqrt(r=C);f=t-A,p=e-A,m=n-A,g=t+A,v=e+A,y=n+A,i=_.data}}return i}function Jt(t){if(isNaN(o=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t))||isNaN(a=+this._z.call(null,t)))return this;var e,n,r,i,o,s,a,l,c,u,d,h,f,p,m,g=this._root,v=this._x0,y=this._y0,b=this._z0,_=this._x1,w=this._y1,x=this._z1;if(!g)return this;if(g.length)while(1){if((d=o>=(l=(v+_)/2))?v=l:_=l,(h=s>=(c=(y+w)/2))?y=c:w=c,(f=a>=(u=(b+x)/2))?b=u:x=u,e=g,!(g=g[p=f<<2|h<<1|d]))return this;if(!g.length)break;(e[p+1&7]||e[p+2&7]||e[p+3&7]||e[p+4&7]||e[p+5&7]||e[p+6&7]||e[p+7&7])&&(n=e,m=p)}while(g.data!==t)if(r=g,!(g=g.next))return this;return(i=g.next)&&delete g.next,r?(i?r.next=i:delete r.next,this):e?(i?e[p]=i:delete e[p],(g=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&g===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!g.length&&(n?n[m]=g:this._root=g),this):(this._root=i,this)}function Qt(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function te(){return this._root}function ee(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t}function ne(t){var e,n,r,i,o,s,a,l,c=[],u=this._root;u&&c.push(new Zt(u,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));while(e=c.pop())if(!t(u=e.node,r=e.x0,i=e.y0,o=e.z0,s=e.x1,a=e.y1,l=e.z1)&&u.length){var d=(r+s)/2,h=(i+a)/2,f=(o+l)/2;(n=u[7])&&c.push(new Zt(n,d,h,f,s,a,l)),(n=u[6])&&c.push(new Zt(n,r,h,f,d,a,l)),(n=u[5])&&c.push(new Zt(n,d,i,f,s,h,l)),(n=u[4])&&c.push(new Zt(n,r,i,f,d,h,l)),(n=u[3])&&c.push(new Zt(n,d,h,o,s,a,f)),(n=u[2])&&c.push(new Zt(n,r,h,o,d,a,f)),(n=u[1])&&c.push(new Zt(n,d,i,o,s,h,f)),(n=u[0])&&c.push(new Zt(n,r,i,o,d,h,f))}return this}function re(t){var e,n=[],r=[];this._root&&n.push(new Zt(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));while(e=n.pop()){var i=e.node;if(i.length){var o,s=e.x0,a=e.y0,l=e.z0,c=e.x1,u=e.y1,d=e.z1,h=(s+c)/2,f=(a+u)/2,p=(l+d)/2;(o=i[0])&&n.push(new Zt(o,s,a,l,h,f,p)),(o=i[1])&&n.push(new Zt(o,h,a,l,c,f,p)),(o=i[2])&&n.push(new Zt(o,s,f,l,h,u,p)),(o=i[3])&&n.push(new Zt(o,h,f,l,c,u,p)),(o=i[4])&&n.push(new Zt(o,s,a,p,h,f,d)),(o=i[5])&&n.push(new Zt(o,h,a,p,c,f,d)),(o=i[6])&&n.push(new Zt(o,s,f,p,h,u,d)),(o=i[7])&&n.push(new Zt(o,h,f,p,c,u,d))}r.push(e)}while(e=r.pop())t(e.node,e.x0,e.y0,e.z0,e.x1,e.y1,e.z1);return this}function ie(t){return t[0]}function oe(t){return arguments.length?(this._x=t,this):this._x}function se(t){return t[1]}function ae(t){return arguments.length?(this._y=t,this):this._y}function le(t){return t[2]}function ce(t){return arguments.length?(this._z=t,this):this._z}function ue(t,e,n,r){var i=new de(null==e?ie:e,null==n?se:n,null==r?le:r,NaN,NaN,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function de(t,e,n,r,i,o,s,a,l){this._x=t,this._y=e,this._z=n,this._x0=r,this._y0=i,this._z0=o,this._x1=s,this._y1=a,this._z1=l,this._root=void 0}function he(t){var e={data:t.data},n=e;while(t=t.next)n=n.next={data:t.data};return e}Ht.copy=function(){var t,e,n=new zt(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=jt(r),n;t=[{source:r,target:n._root=new Array(4)}];while(r=t.pop())for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=jt(e));return n},Ht.add=xt,Ht.addAll=Et,Ht.cover=Mt,Ht.data=Tt,Ht.extent=Ct,Ht.find=kt,Ht.remove=Ot,Ht.removeAll=Rt,Ht.root=Pt,Ht.size=Lt,Ht.visit=Dt,Ht.visitAfter=It,Ht.x=Ut,Ht.y=Bt;var fe=ue.prototype=de.prototype;function pe(){var t,e,n,r,i,o,s=K(-30),a=1,l=1/0,c=.81;function u(r){var o,s=t.length,a=(1===e?yt(t,W):2===e?Vt(t,W,G):3===e?ue(t,W,G,$):null).visitAfter(h);for(i=r,o=0;o<s;++o)n=t[o],a.visit(f)}function d(){if(t){var e,n,r=t.length;for(o=new Array(r),e=0;e<r;++e)n=t[e],o[n.index]=+s(n,e,t)}}function h(t){var n,r,i,s,a,l,c=0,u=0,d=t.length;if(d){for(i=s=a=l=0;l<d;++l)(n=t[l])&&(r=Math.abs(n.value))&&(c+=n.value,u+=r,i+=r*(n.x||0),s+=r*(n.y||0),a+=r*(n.z||0));c*=Math.sqrt(4/d),t.x=i/u,e>1&&(t.y=s/u),e>2&&(t.z=a/u)}else{n=t,n.x=n.data.x,e>1&&(n.y=n.data.y),e>2&&(n.z=n.data.z);do{c+=o[n.data.index]}while(n=n.next)}t.value=c}function f(t,s,u,d,h){if(!t.value)return!0;var f=[u,d,h][e-1],p=t.x-n.x,m=e>1?t.y-n.y:0,g=e>2?t.z-n.z:0,v=f-s,y=p*p+m*m+g*g;if(v*v/c<y)return y<l&&(0===p&&(p=J(r),y+=p*p),e>1&&0===m&&(m=J(r),y+=m*m),e>2&&0===g&&(g=J(r),y+=g*g),y<a&&(y=Math.sqrt(a*y)),n.vx+=p*t.value*i/y,e>1&&(n.vy+=m*t.value*i/y),e>2&&(n.vz+=g*t.value*i/y)),!0;if(!(t.length||y>=l)){(t.data!==n||t.next)&&(0===p&&(p=J(r),y+=p*p),e>1&&0===m&&(m=J(r),y+=m*m),e>2&&0===g&&(g=J(r),y+=g*g),y<a&&(y=Math.sqrt(a*y)));do{t.data!==n&&(v=o[t.data.index]*i/y,n.vx+=p*v,e>1&&(n.vy+=m*v),e>2&&(n.vz+=g*v))}while(t=t.next)}}return u.initialize=function(n,...i){t=n,r=i.find((t=>"function"===typeof t))||Math.random,e=i.find((t=>[1,2,3].includes(t)))||2,d()},u.strength=function(t){return arguments.length?(s="function"===typeof t?t:K(+t),d(),u):s},u.distanceMin=function(t){return arguments.length?(a=t*t,u):Math.sqrt(a)},u.distanceMax=function(t){return arguments.length?(l=t*t,u):Math.sqrt(l)},u.theta=function(t){return arguments.length?(c=t*t,u):Math.sqrt(c)},u}function me(t,e,n){var r,i=1;function o(){var o,s,a=r.length,l=0,c=0,u=0;for(o=0;o<a;++o)s=r[o],l+=s.x||0,c+=s.y||0,u+=s.z||0;for(l=(l/a-t)*i,c=(c/a-e)*i,u=(u/a-n)*i,o=0;o<a;++o)s=r[o],l&&(s.x-=l),c&&(s.y-=c),u&&(s.z-=u)}return null==t&&(t=0),null==e&&(e=0),null==n&&(n=0),o.initialize=function(t){r=t},o.x=function(e){return arguments.length?(t=+e,o):t},o.y=function(t){return arguments.length?(e=+t,o):e},o.z=function(t){return arguments.length?(n=+t,o):n},o.strength=function(t){return arguments.length?(i=+t,o):i},o}function ge(t,e,n,r){var i,o,s,a,l=K(.1);function c(t){for(var l=0,c=i.length;l<c;++l){var u=i[l],d=u.x-e||1e-6,h=(u.y||0)-n||1e-6,f=(u.z||0)-r||1e-6,p=Math.sqrt(d*d+h*h+f*f),m=(a[l]-p)*s[l]*t/p;u.vx+=d*m,o>1&&(u.vy+=h*m),o>2&&(u.vz+=f*m)}}function u(){if(i){var e,n=i.length;for(s=new Array(n),a=new Array(n),e=0;e<n;++e)a[e]=+t(i[e],e,i),s[e]=isNaN(a[e])?0:+l(i[e],e,i)}}return"function"!==typeof t&&(t=K(+t)),null==e&&(e=0),null==n&&(n=0),null==r&&(r=0),c.initialize=function(t,...e){i=t,o=e.find((t=>[1,2,3].includes(t)))||2,u()},c.strength=function(t){return arguments.length?(l="function"===typeof t?t:K(+t),u(),c):l},c.radius=function(e){return arguments.length?(t="function"===typeof e?e:K(+e),u(),c):t},c.x=function(t){return arguments.length?(e=+t,c):e},c.y=function(t){return arguments.length?(n=+t,c):n},c.z=function(t){return arguments.length?(r=+t,c):r},c}fe.copy=function(){var t,e,n=new de(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),r=this._root;if(!r)return n;if(!r.length)return n._root=he(r),n;t=[{source:r,target:n._root=new Array(8)}];while(r=t.pop())for(var i=0;i<8;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(8)}):r.target[i]=he(e));return n},fe.add=Wt,fe.addAll=$t,fe.cover=qt,fe.data=Yt,fe.extent=Xt,fe.find=Kt,fe.remove=Jt,fe.removeAll=Qt,fe.root=te,fe.size=ee,fe.visit=ne,fe.visitAfter=re,fe.x=oe,fe.y=ae,fe.z=ce;var ve=n(2340),ye=n(6334);function be(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var _e=be,we="object"==typeof global&&global&&global.Object===Object&&global,xe=we,Se="object"==typeof self&&self&&self.Object===Object&&self,Ee=xe||Se||Function("return this")(),Me=Ee,Te=function(){return Me.Date.now()},Ce=Te,Ae=/\s/;function ke(t){var e=t.length;while(e--&&Ae.test(t.charAt(e)));return e}var Oe=ke,Re=/^\s+/;function Pe(t){return t?t.slice(0,Oe(t)+1).replace(Re,""):t}var Le=Pe,De=Me.Symbol,Ie=De,Ne=Object.prototype,Ue=Ne.hasOwnProperty,Fe=Ne.toString,Be=Ie?Ie.toStringTag:void 0;function Ve(t){var e=Ue.call(t,Be),n=t[Be];try{t[Be]=void 0;var r=!0}catch(o){}var i=Fe.call(t);return r&&(e?t[Be]=n:delete t[Be]),i}var ze=Ve,je=Object.prototype,He=je.toString;function We(t){return He.call(t)}var Ge=We,$e="[object Null]",qe="[object Undefined]",Ye=Ie?Ie.toStringTag:void 0;function Xe(t){return null==t?void 0===t?qe:$e:Ye&&Ye in Object(t)?ze(t):Ge(t)}var Ze=Xe;function Ke(t){return null!=t&&"object"==typeof t}var Je=Ke,Qe="[object Symbol]";function tn(t){return"symbol"==typeof t||Je(t)&&Ze(t)==Qe}var en=tn,nn=NaN,rn=/^[-+]0x[0-9a-f]+$/i,on=/^0b[01]+$/i,sn=/^0o[0-7]+$/i,an=parseInt;function ln(t){if("number"==typeof t)return t;if(en(t))return nn;if(_e(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=_e(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Le(t);var n=on.test(t);return n||sn.test(t)?an(t.slice(2),n?2:8):rn.test(t)?nn:+t}var cn=ln,un="Expected a function",dn=Math.max,hn=Math.min;function fn(t,e,n){var r,i,o,s,a,l,c=0,u=!1,d=!1,h=!0;if("function"!=typeof t)throw new TypeError(un);function f(e){var n=r,o=i;return r=i=void 0,c=e,s=t.apply(o,n),s}function p(t){return c=t,a=setTimeout(v,e),u?f(t):s}function m(t){var n=t-l,r=t-c,i=e-n;return d?hn(i,o-r):i}function g(t){var n=t-l,r=t-c;return void 0===l||n>=e||n<0||d&&r>=o}function v(){var t=Ce();if(g(t))return y(t);a=setTimeout(v,m(t))}function y(t){return a=void 0,h&&r?f(t):(r=i=void 0,s)}function b(){void 0!==a&&clearTimeout(a),c=0,r=l=i=a=void 0}function _(){return void 0===a?s:y(Ce())}function w(){var t=Ce(),n=g(t);if(r=arguments,i=this,l=t,n){if(void 0===a)return p(l);if(d)return clearTimeout(a),a=setTimeout(v,e),f(l)}return void 0===a&&(a=setTimeout(v,e)),s}return e=cn(e)||0,_e(n)&&(u=!!n.leading,d="maxWait"in n,o=d?dn(cn(n.maxWait)||0,e):o,h="trailing"in n?!!n.trailing:h),w.cancel=b,w.flush=_,w}var pn=fn;function mn(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function gn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Mn(r.key),r)}}function yn(t,e,n){return e&&vn(t.prototype,e),n&&vn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function bn(t,e){return _n(t)||mn(t,e)||wn(t,e)||Sn()}function _n(t){if(Array.isArray(t))return t}function wn(t,e){if(t){if("string"===typeof t)return xn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xn(t,e):void 0}}function xn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Sn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function En(t,e){if("object"!==typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Mn(t){var e=En(t,"string");return"symbol"===typeof e?e:String(e)}var Tn=yn((function t(e,n){var r=n["default"],i=void 0===r?null:r,o=n.triggerUpdate,s=void 0===o||o,a=n.onChange,l=void 0===a?function(t,e){}:a;gn(this,t),this.name=e,this.defaultVal=i,this.triggerUpdate=s,this.onChange=l}));function Cn(t){var e=t.stateInit,n=void 0===e?function(){return{}}:e,r=t.props,i=void 0===r?{}:r,o=t.methods,s=void 0===o?{}:o,a=t.aliases,l=void 0===a?{}:a,c=t.init,u=void 0===c?function(){}:c,d=t.update,h=void 0===d?function(){}:d,f=Object.keys(i).map((function(t){return new Tn(t,i[t])}));return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.assign({},n instanceof Function?n(t):n,{initialised:!1}),r={};function i(e){return o(e,t),a(),i}var o=function(t,n){u.call(i,t,e,n),e.initialised=!0},a=pn((function(){e.initialised&&(h.call(i,e,r),r={})}),1);return f.forEach((function(t){function n(t){var n=t.name,o=t.triggerUpdate,s=void 0!==o&&o,l=t.onChange,c=void 0===l?function(t,e){}:l,u=t.defaultVal,d=void 0===u?null:u;return function(t){var o=e[n];if(!arguments.length)return o;var l=void 0===t?d:t;return e[n]=l,c.call(i,l,e,o),!r.hasOwnProperty(n)&&(r[n]=o),s&&a(),i}}i[t.name]=n(t)})),Object.keys(s).forEach((function(t){i[t]=function(){for(var n,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=s[t]).call.apply(n,[i,e].concat(o))}})),Object.entries(l).forEach((function(t){var e=bn(t,2),n=e[0],r=e[1];return i[n]=i[r]})),i.resetProps=function(){return f.forEach((function(t){i[t.name](t.defaultVal)})),i},i.resetProps(),e._rerender=a,i}}var An=function(t){return t instanceof Function?t:"string"===typeof t?function(e){return e[t]}:function(e){return t}};function kn(t,e){let n;if(void 0===e)for(const r of t)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function On(t,e){let n;if(void 0===e)for(const r of t)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function Rn(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function Pn(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}function Ln(t,e){if(null==t)return{};var n,r,i=Pn(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Dn(t,e){return Un(t)||Rn(t,e)||Bn(t,e)||jn()}function In(t){return Nn(t)||Fn(t)||Bn(t)||zn()}function Nn(t){if(Array.isArray(t))return Vn(t)}function Un(t){if(Array.isArray(t))return t}function Fn(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function Bn(t,e){if(t){if("string"===typeof t)return Vn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vn(t,e):void 0}}function Vn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zn(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Hn(t,e){if("object"!==typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Wn(t){var e=Hn(t,"string");return"symbol"===typeof e?e:String(e)}var Gn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=(e instanceof Array?e.length?e:[void 0]:[e]).map((function(t){return{keyAccessor:t,isProp:!(t instanceof Function)}})),o=t.reduce((function(t,e){var r=t,o=e;return i.forEach((function(t,e){var s,a=t.keyAccessor,l=t.isProp;if(l){var c=o,u=c[a],d=Ln(c,[a].map(Wn));s=u,o=d}else s=a(o,e);e+1<i.length?(r.hasOwnProperty(s)||(r[s]={}),r=r[s]):n?(r.hasOwnProperty(s)||(r[s]=[]),r[s].push(o)):r[s]=o})),t}),{});n instanceof Function&&function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;r===i.length?Object.keys(e).forEach((function(t){return e[t]=n(e[t])})):Object.values(e).forEach((function(e){return t(e,r+1)}))}(o);var s=o;return r&&(s=[],function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];n.length===i.length?s.push({keys:n,vals:e}):Object.entries(e).forEach((function(e){var r=Dn(e,2),i=r[0],o=r[1];return t(o,[].concat(In(n),[i]))}))}(o),e instanceof Array&&0===e.length&&1===s.length&&(s[0].keys=[])),s};function $n(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function qn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Yn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?qn(Object(n),!0).forEach((function(e){Xn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Xn(t,e,n){return e=lr(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zn(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}function Kn(t,e){if(null==t)return{};var n,r,i=Zn(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Jn(t,e){return er(t)||$n(t,e)||rr(t,e)||sr()}function Qn(t){return tr(t)||nr(t)||rr(t)||or()}function tr(t){if(Array.isArray(t))return ir(t)}function er(t){if(Array.isArray(t))return t}function nr(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function rr(t,e){if(t){if("string"===typeof t)return ir(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ir(t,e):void 0}}function ir(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function or(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function sr(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ar(t,e){if("object"!==typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function lr(t){var e=ar(t,"string");return"symbol"===typeof e?e:String(e)}var cr=["createObj","updateObj","exitObj","objBindAttr","dataBindAttr"];function ur(t,e,n){var r={enter:[],update:[],exit:[]};if(n){var i=Gn(t,n,!1),o=Gn(e,n,!1),s=Object.assign({},i,o);Object.entries(s).forEach((function(t){var e=Jn(t,2),n=e[0],s=e[1],a=i.hasOwnProperty(n)?o.hasOwnProperty(n)?"update":"exit":"enter";r[a].push("update"===a?[i[n],o[n]]:s)}))}else{var a=new Set(t),l=new Set(e);new Set([].concat(Qn(a),Qn(l))).forEach((function(t){var e=a.has(t)?l.has(t)?"update":"exit":"enter";r[e].push("update"===e?[t,t]:t)}))}return r}function dr(t,e,n){var r=n.objBindAttr,i=void 0===r?"__obj":r,o=n.dataBindAttr,s=void 0===o?"__data":o,a=n.idAccessor,l=n.purge,c=void 0!==l&&l,u=function(t){return t.hasOwnProperty(s)},d=e.filter((function(t){return!u(t)})),h=e.filter(u).map((function(t){return t[s]})),f=t,p=c?{enter:f,exit:h,update:[]}:ur(h,f,a);return p.update=p.update.map((function(t){var e=Jn(t,2),n=e[0],r=e[1];return n!==r&&(r[i]=n[i],r[i][s]=r),r})),p.exit=p.exit.concat(d.map((function(t){return Xn({},i,t)}))),p}function hr(t,e,n,r,i){var o=i.createObj,s=void 0===o?function(t){return{}}:o,a=i.updateObj,l=void 0===a?function(t,e){}:a,c=i.exitObj,u=void 0===c?function(t){}:c,d=i.objBindAttr,h=void 0===d?"__obj":d,f=i.dataBindAttr,p=void 0===f?"__data":f,m=Kn(i,cr),g=dr(t,e,Yn({objBindAttr:h,dataBindAttr:p},m)),v=g.enter,y=g.update,b=g.exit;b.forEach((function(t){var e=t[h];delete t[h],u(e),r(e)}));var _=x(v),w=[].concat(Qn(v),Qn(y));function x(t){var e=[];return t.forEach((function(t){var n=s(t);n&&(n[p]=t,t[h]=n,e.push(n))})),e}function S(t){t.forEach((function(t){var e=t[h];e&&(e[p]=t,l(e,t))}))}S(w),_.forEach(n)}class fr extends Map{constructor(t,e=vr){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[n,r]of t)this.set(n,r)}get(t){return super.get(pr(this,t))}has(t){return super.has(pr(this,t))}set(t,e){return super.set(mr(this,t),e)}delete(t){return super.delete(gr(this,t))}}function pr({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function mr({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function gr({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function vr(t){return null!==t&&"object"===typeof t?t.valueOf():t}function yr(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const br=Symbol("implicit");function _r(){var t=new fr,e=[],n=[],r=br;function i(i){let o=t.get(i);if(void 0===o){if(r!==br)return r;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new fr;for(const r of n)t.has(r)||t.set(r,e.push(r)-1);return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return _r(e,n).unknown(r)},yr.apply(i,arguments),i}function wr(t){var e=t.length/6|0,n=new Array(e),r=0;while(r<e)n[r]="#"+t.slice(6*r,6*++r);return n}var xr=wr("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function Sr(t){return Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sr(t)}var Er=/^\s+/,Mr=/\s+$/;function Tr(t,e){if(t=t||"",e=e||{},t instanceof Tr)return t;if(!(this instanceof Tr))return new Tr(t,e);var n=Cr(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}function Cr(t){var e={r:0,g:0,b:0},n=1,r=null,i=null,o=null,s=!1,a=!1;return"string"==typeof t&&(t=ci(t)),"object"==Sr(t)&&(li(t.r)&&li(t.g)&&li(t.b)?(e=Ar(t.r,t.g,t.b),s=!0,a="%"===String(t.r).substr(-1)?"prgb":"rgb"):li(t.h)&&li(t.s)&&li(t.v)?(r=ii(t.s),i=ii(t.v),e=Pr(t.h,r,i),s=!0,a="hsv"):li(t.h)&&li(t.s)&&li(t.l)&&(r=ii(t.s),o=ii(t.l),e=Or(t.h,r,o),s=!0,a="hsl"),t.hasOwnProperty("a")&&(n=t.a)),n=Kr(n),{ok:s,format:t.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}function Ar(t,e,n){return{r:255*Jr(t,255),g:255*Jr(e,255),b:255*Jr(n,255)}}function kr(t,e,n){t=Jr(t,255),e=Jr(e,255),n=Jr(n,255);var r,i,o=Math.max(t,e,n),s=Math.min(t,e,n),a=(o+s)/2;if(o==s)r=i=0;else{var l=o-s;switch(i=a>.5?l/(2-o-s):l/(o+s),o){case t:r=(e-n)/l+(e<n?6:0);break;case e:r=(n-t)/l+2;break;case n:r=(t-e)/l+4;break}r/=6}return{h:r,s:i,l:a}}function Or(t,e,n){var r,i,o;function s(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=Jr(t,360),e=Jr(e,100),n=Jr(n,100),0===e)r=i=o=n;else{var a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;r=s(l,a,t+1/3),i=s(l,a,t),o=s(l,a,t-1/3)}return{r:255*r,g:255*i,b:255*o}}function Rr(t,e,n){t=Jr(t,255),e=Jr(e,255),n=Jr(n,255);var r,i,o=Math.max(t,e,n),s=Math.min(t,e,n),a=o,l=o-s;if(i=0===o?0:l/o,o==s)r=0;else{switch(o){case t:r=(e-n)/l+(e<n?6:0);break;case e:r=(n-t)/l+2;break;case n:r=(t-e)/l+4;break}r/=6}return{h:r,s:i,v:a}}function Pr(t,e,n){t=6*Jr(t,360),e=Jr(e,100),n=Jr(n,100);var r=Math.floor(t),i=t-r,o=n*(1-e),s=n*(1-i*e),a=n*(1-(1-i)*e),l=r%6,c=[n,s,o,o,a,n][l],u=[a,n,n,s,o,o][l],d=[o,o,a,n,n,s][l];return{r:255*c,g:255*u,b:255*d}}function Lr(t,e,n,r){var i=[ri(Math.round(t).toString(16)),ri(Math.round(e).toString(16)),ri(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function Dr(t,e,n,r,i){var o=[ri(Math.round(t).toString(16)),ri(Math.round(e).toString(16)),ri(Math.round(n).toString(16)),ri(oi(r))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function Ir(t,e,n,r){var i=[ri(oi(r)),ri(Math.round(t).toString(16)),ri(Math.round(e).toString(16)),ri(Math.round(n).toString(16))];return i.join("")}function Nr(t,e){e=0===e?0:e||10;var n=Tr(t).toHsl();return n.s-=e/100,n.s=Qr(n.s),Tr(n)}function Ur(t,e){e=0===e?0:e||10;var n=Tr(t).toHsl();return n.s+=e/100,n.s=Qr(n.s),Tr(n)}function Fr(t){return Tr(t).desaturate(100)}function Br(t,e){e=0===e?0:e||10;var n=Tr(t).toHsl();return n.l+=e/100,n.l=Qr(n.l),Tr(n)}function Vr(t,e){e=0===e?0:e||10;var n=Tr(t).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-e/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-e/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-e/100*255))),Tr(n)}function zr(t,e){e=0===e?0:e||10;var n=Tr(t).toHsl();return n.l-=e/100,n.l=Qr(n.l),Tr(n)}function jr(t,e){var n=Tr(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,Tr(n)}function Hr(t){var e=Tr(t).toHsl();return e.h=(e.h+180)%360,Tr(e)}function Wr(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var n=Tr(t).toHsl(),r=[Tr(t)],i=360/e,o=1;o<e;o++)r.push(Tr({h:(n.h+o*i)%360,s:n.s,l:n.l}));return r}function Gr(t){var e=Tr(t).toHsl(),n=e.h;return[Tr(t),Tr({h:(n+72)%360,s:e.s,l:e.l}),Tr({h:(n+216)%360,s:e.s,l:e.l})]}function $r(t,e,n){e=e||6,n=n||30;var r=Tr(t).toHsl(),i=360/n,o=[Tr(t)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,o.push(Tr(r));return o}function qr(t,e){e=e||6;var n=Tr(t).toHsv(),r=n.h,i=n.s,o=n.v,s=[],a=1/e;while(e--)s.push(Tr({h:r,s:i,v:o})),o=(o+a)%1;return s}Tr.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,n,r,i,o,s=this.toRgb();return t=s.r/255,e=s.g/255,n=s.b/255,r=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4),i=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4),o=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4),.2126*r+.7152*i+.0722*o},setAlpha:function(t){return this._a=Kr(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=Rr(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=Rr(this._r,this._g,this._b),e=Math.round(360*t.h),n=Math.round(100*t.s),r=Math.round(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+r+"%)":"hsva("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var t=kr(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=kr(this._r,this._g,this._b),e=Math.round(360*t.h),n=Math.round(100*t.s),r=Math.round(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+r+"%)":"hsla("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(t){return Lr(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return Dr(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*Jr(this._r,255))+"%",g:Math.round(100*Jr(this._g,255))+"%",b:Math.round(100*Jr(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*Jr(this._r,255))+"%, "+Math.round(100*Jr(this._g,255))+"%, "+Math.round(100*Jr(this._b,255))+"%)":"rgba("+Math.round(100*Jr(this._r,255))+"%, "+Math.round(100*Jr(this._g,255))+"%, "+Math.round(100*Jr(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(Xr[Lr(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+Ir(this._r,this._g,this._b,this._a),n=e,r=this._gradientType?"GradientType = 1, ":"";if(t){var i=Tr(t);n="#"+Ir(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,r=this._a<1&&this._a>=0,i=!e&&r&&("hex"===t||"hex6"===t||"hex3"===t||"hex4"===t||"hex8"===t||"name"===t);return i?"name"===t&&0===this._a?this.toName():this.toRgbString():("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return Tr(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(Br,arguments)},brighten:function(){return this._applyModification(Vr,arguments)},darken:function(){return this._applyModification(zr,arguments)},desaturate:function(){return this._applyModification(Nr,arguments)},saturate:function(){return this._applyModification(Ur,arguments)},greyscale:function(){return this._applyModification(Fr,arguments)},spin:function(){return this._applyModification(jr,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination($r,arguments)},complement:function(){return this._applyCombination(Hr,arguments)},monochromatic:function(){return this._applyCombination(qr,arguments)},splitcomplement:function(){return this._applyCombination(Gr,arguments)},triad:function(){return this._applyCombination(Wr,[3])},tetrad:function(){return this._applyCombination(Wr,[4])}},Tr.fromRatio=function(t,e){if("object"==Sr(t)){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]="a"===r?t[r]:ii(t[r]));t=n}return Tr(t,e)},Tr.equals=function(t,e){return!(!t||!e)&&Tr(t).toRgbString()==Tr(e).toRgbString()},Tr.random=function(){return Tr.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},Tr.mix=function(t,e,n){n=0===n?0:n||50;var r=Tr(t).toRgb(),i=Tr(e).toRgb(),o=n/100,s={r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a};return Tr(s)},Tr.readability=function(t,e){var n=Tr(t),r=Tr(e);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)},Tr.isReadable=function(t,e,n){var r,i,o=Tr.readability(t,e);switch(i=!1,r=ui(n),r.level+r.size){case"AAsmall":case"AAAlarge":i=o>=4.5;break;case"AAlarge":i=o>=3;break;case"AAAsmall":i=o>=7;break}return i},Tr.mostReadable=function(t,e,n){var r,i,o,s,a=null,l=0;n=n||{},i=n.includeFallbackColors,o=n.level,s=n.size;for(var c=0;c<e.length;c++)r=Tr.readability(t,e[c]),r>l&&(l=r,a=Tr(e[c]));return Tr.isReadable(t,a,{level:o,size:s})||!i?a:(n.includeFallbackColors=!1,Tr.mostReadable(t,["#fff","#000"],n))};var Yr=Tr.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Xr=Tr.hexNames=Zr(Yr);function Zr(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Kr(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function Jr(t,e){ei(t)&&(t="100%");var n=ni(t);return t=Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function Qr(t){return Math.min(1,Math.max(0,t))}function ti(t){return parseInt(t,16)}function ei(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)}function ni(t){return"string"===typeof t&&-1!=t.indexOf("%")}function ri(t){return 1==t.length?"0"+t:""+t}function ii(t){return t<=1&&(t=100*t+"%"),t}function oi(t){return Math.round(255*parseFloat(t)).toString(16)}function si(t){return ti(t)/255}var ai=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",n="(?:"+e+")|(?:"+t+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function li(t){return!!ai.CSS_UNIT.exec(t)}function ci(t){t=t.replace(Er,"").replace(Mr,"").toLowerCase();var e,n=!1;if(Yr[t])t=Yr[t],n=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};return(e=ai.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=ai.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=ai.hsl.exec(t))?{h:e[1],s:e[2],l:e[3]}:(e=ai.hsla.exec(t))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=ai.hsv.exec(t))?{h:e[1],s:e[2],v:e[3]}:(e=ai.hsva.exec(t))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=ai.hex8.exec(t))?{r:ti(e[1]),g:ti(e[2]),b:ti(e[3]),a:si(e[4]),format:n?"name":"hex8"}:(e=ai.hex6.exec(t))?{r:ti(e[1]),g:ti(e[2]),b:ti(e[3]),format:n?"name":"hex"}:(e=ai.hex4.exec(t))?{r:ti(e[1]+""+e[1]),g:ti(e[2]+""+e[2]),b:ti(e[3]+""+e[3]),a:si(e[4]+""+e[4]),format:n?"name":"hex8"}:!!(e=ai.hex3.exec(t))&&{r:ti(e[1]+""+e[1]),g:ti(e[2]+""+e[2]),b:ti(e[3]+""+e[3]),format:n?"name":"hex"}}function ui(t){var e,n;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA"),"small"!==n&&"large"!==n&&(n="small"),{level:e,size:n}}function di(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function hi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function fi(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?hi(Object(n),!0).forEach((function(e){yi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function pi(t){return pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pi(t)}function mi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Bi(r.key),r)}}function vi(t,e,n){return e&&gi(t.prototype,e),n&&gi(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function yi(t,e,n){return e=Bi(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bi(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wi(t,e)}function _i(t){return _i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_i(t)}function wi(t,e){return wi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wi(t,e)}function xi(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Si(t,e,n){return Si=xi()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var i=Function.bind.apply(t,r),o=new i;return n&&wi(o,n.prototype),o},Si.apply(null,arguments)}function Ei(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}function Mi(t,e){if(null==t)return{};var n,r,i=Ei(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ti(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ci(t,e){if(e&&("object"===typeof e||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ti(t)}function Ai(t){var e=xi();return function(){var n,r=_i(t);if(e){var i=_i(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ci(this,n)}}function ki(t,e){return Pi(t)||di(t,e)||Di(t,e)||Ui()}function Oi(t){return Ri(t)||Li(t)||Di(t)||Ni()}function Ri(t){if(Array.isArray(t))return Ii(t)}function Pi(t){if(Array.isArray(t))return t}function Li(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function Di(t,e){if(t){if("string"===typeof t)return Ii(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ii(t,e):void 0}}function Ii(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ni(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ui(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Fi(t,e){if("object"!==typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Bi(t){var e=Fi(t,"string");return"symbol"===typeof e?e:String(e)}var Vi=function t(e){e instanceof Array?e.forEach(t):(e.map&&e.map.dispose(),e.dispose())},zi=function t(e){e.geometry&&e.geometry.dispose(),e.material&&Vi(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(t)},ji=function(t){while(t.children.length){var e=t.children[0];t.remove(e),zi(e)}},Hi=["objFilter"];function Wi(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.objFilter,i=void 0===r?function(){return!0}:r,o=Mi(n,Hi);return hr(t,e.children.filter(i),(function(t){return e.add(t)}),(function(t){e.remove(t),ji(t)}),fi({objBindAttr:"__threeObj"},o))}var Gi=function(t){return isNaN(t)?parseInt(Tr(t).toHex(),16):t},$i=function(t){return isNaN(t)?Tr(t).getAlpha():1},qi=_r(xr);function Yi(t,e,n){e&&"string"===typeof n&&t.filter((function(t){return!t[n]})).forEach((function(t){t[n]=qi(e(t))}))}function Xi(t,e){var n=t.nodes,r=t.links,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.nodeFilter,s=void 0===o?function(){return!0}:o,a=i.onLoopError,l=void 0===a?function(t){throw"Invalid DAG structure! Found cycle in node path: ".concat(t.join(" -> "),".")}:a,c={};n.forEach((function(t){return c[e(t)]={data:t,out:[],depth:-1,skip:!s(t)}})),r.forEach((function(t){var n=t.source,r=t.target,i=l(n),o=l(r);if(!c.hasOwnProperty(i))throw"Missing source node with id: ".concat(i);if(!c.hasOwnProperty(o))throw"Missing target node with id: ".concat(o);var s=c[i],a=c[o];function l(t){return"object"===pi(t)?e(t):t}s.out.push(a)}));var u=[];h(Object.values(c));var d=Object.assign.apply(Object,[{}].concat(Oi(Object.entries(c).filter((function(t){var e=ki(t,2),n=e[1];return!n.skip})).map((function(t){var e=ki(t,2),n=e[0],r=e[1];return yi({},n,r.depth)})))));return d;function h(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=function(){var i=t[o];if(-1!==n.indexOf(i)){var s=[].concat(Oi(n.slice(n.indexOf(i))),[i]).map((function(t){return e(t.data)}));return u.some((function(t){return t.length===s.length&&t.every((function(t,e){return t===s[e]}))}))||(u.push(s),l(s)),"continue"}r>i.depth&&(i.depth=r,h(i.out,[].concat(Oi(n),[i]),r+(i.skip?0:1)))},o=0,s=t.length;o<s;o++)i()}}var Zi=window.THREE?window.THREE:{Group:r.ZAu,Mesh:r.Kj0,MeshLambertMaterial:r.YBo,Color:r.Ilk,BufferGeometry:r.u9r,BufferAttribute:r.TlE,Matrix4:r.yGw,Vector3:r.Pa4,SphereGeometry:r.xo$,CylinderGeometry:r.fHI,TubeGeometry:r.WXh,ConeGeometry:r.b_z,Line:r.x12,LineBasicMaterial:r.nls,QuadraticBezierCurve3:r.mXe,CubicBezierCurve3:r.yj7,Box3:r.ZzF},Ki={graph:ve,forcelayout:ye},Ji=2,Qi=(new Zi.BufferGeometry).setAttribute?"setAttribute":"addAttribute",to=(new Zi.BufferGeometry).applyMatrix4?"applyMatrix4":"applyMatrix",eo=Cn({props:{jsonUrl:{onChange:function(t,e){var n=this;t&&!e.fetchingJson&&(e.fetchingJson=!0,e.onLoading(),fetch(t).then((function(t){return t.json()})).then((function(t){e.fetchingJson=!1,e.onFinishLoading(t),n.graphData(t)})))},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(t,e){e.engineRunning=!1}},numDimensions:{default:3,onChange:function(t,e){var n=e.d3ForceLayout.force("charge");function r(t,e){t.forEach((function(t){delete t[e],delete t["v".concat(e)]}))}n&&n.strength(t>2?-60:-30),t<3&&r(e.graphData.nodes,"z"),t<2&&r(e.graphData.nodes,"y")}},dagMode:{onChange:function(t,e){!t&&"d3"===e.forceEngine&&(e.graphData.nodes||[]).forEach((function(t){return t.fx=t.fy=t.fz=void 0}))}},dagLevelDistance:{},dagNodeFilter:{default:function(t){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4},nodeId:{default:"id"},nodeVal:{default:"val"},nodeResolution:{default:8},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeVisibility:{default:!0},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},nodePositionUpdate:{triggerUpdate:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{},linkResolution:{default:6},linkCurvature:{default:0,triggerUpdate:!1},linkCurveRotation:{default:0,triggerUpdate:!1},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{triggerUpdate:!1},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},forceEngine:{default:"d3"},d3AlphaMin:{default:0},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(t,e){e.d3ForceLayout.alphaDecay(t)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(t,e){e.d3ForceLayout.alphaTarget(t)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(t,e){e.d3ForceLayout.velocityDecay(t)}},ngraphPhysics:{default:{timeStep:20,gravity:-1.2,theta:.8,springLength:30,springCoefficient:8e-4,dragCoefficient:.02}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onLoading:{default:function(){},triggerUpdate:!1},onFinishLoading:{default:function(){},triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1}},methods:{refresh:function(t){return t._flushObjects=!0,t._rerender(),this},d3Force:function(t,e,n){return void 0===n?t.d3ForceLayout.force(e):(t.d3ForceLayout.force(e,n),this)},d3ReheatSimulation:function(t){return t.d3ForceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(t){return t.cntTicks=0,t.startTickTime=new Date,t.engineRunning=!0,this},tickFrame:function(t){var e="ngraph"!==t.forceEngine;return t.engineRunning&&n(),r(),i(),this;function n(){++t.cntTicks>t.cooldownTicks||new Date-t.startTickTime>t.cooldownTime||e&&t.d3AlphaMin>0&&t.d3ForceLayout.alpha()<t.d3AlphaMin?(t.engineRunning=!1,t.onEngineStop()):(t.layout[e?"tick":"step"](),t.onEngineTick());var n=An(t.nodeThreeObjectExtend);t.graphData.nodes.forEach((function(r){var i=r.__threeObj;if(i){var o=e?r:t.layout.getNodePosition(r[t.nodeId]),s=n(r);t.nodePositionUpdate&&t.nodePositionUpdate(s?i.children[0]:i,{x:o.x,y:o.y,z:o.z},r)&&!s||(i.position.x=o.x,i.position.y=o.y||0,i.position.z=o.z||0)}}));var r=An(t.linkWidth),i=An(t.linkCurvature),o=An(t.linkCurveRotation),s=An(t.linkThreeObjectExtend);function a(n){var r=e?n:t.layout.getLinkPosition(t.layout.graph.getLink(n.source,n.target).id),s=r[e?"source":"from"],a=r[e?"target":"to"];if(s&&a&&s.hasOwnProperty("x")&&a.hasOwnProperty("x")){var l=i(n);if(l){var c,u=new Zi.Vector3(s.x,s.y||0,s.z||0),d=new Zi.Vector3(a.x,a.y||0,a.z||0),h=u.distanceTo(d),f=o(n);if(h>0){var p=a.x-s.x,m=a.y-s.y||0,g=(new Zi.Vector3).subVectors(d,u),v=g.clone().multiplyScalar(l).cross(0!==p||0!==m?new Zi.Vector3(0,0,1):new Zi.Vector3(0,1,0)).applyAxisAngle(g.normalize(),f).add((new Zi.Vector3).addVectors(u,d).divideScalar(2));c=new Zi.QuadraticBezierCurve3(u,v,d)}else{var y=70*l,b=-f,_=b+Math.PI/2;c=new Zi.CubicBezierCurve3(u,new Zi.Vector3(y*Math.cos(_),y*Math.sin(_),0).add(u),new Zi.Vector3(y*Math.cos(b),y*Math.sin(b),0).add(u),d)}n.__curve=c}else n.__curve=null}}t.graphData.links.forEach((function(n){var i=n.__lineObj;if(i){var o=e?n:t.layout.getLinkPosition(t.layout.graph.getLink(n.source,n.target).id),l=o[e?"source":"from"],c=o[e?"target":"to"];if(l&&c&&l.hasOwnProperty("x")&&c.hasOwnProperty("x")){a(n);var u=s(n);if(!t.linkPositionUpdate||!t.linkPositionUpdate(u?i.children[1]:i,{start:{x:l.x,y:l.y,z:l.z},end:{x:c.x,y:c.y,z:c.z}},n)||u){var d=30,h=n.__curve,f=i.children.length?i.children[0]:i;if("Line"===f.type){if(h)f.geometry.setFromPoints(h.getPoints(d));else{var p=f.geometry.getAttribute("position");p&&p.array&&6===p.array.length||f.geometry[Qi]("position",p=new Zi.BufferAttribute(new Float32Array(6),3)),p.array[0]=l.x,p.array[1]=l.y||0,p.array[2]=l.z||0,p.array[3]=c.x,p.array[4]=c.y||0,p.array[5]=c.z||0,p.needsUpdate=!0}f.geometry.computeBoundingSphere()}else if("Mesh"===f.type)if(h){f.geometry.type.match(/^Tube(Buffer)?Geometry$/)||(f.position.set(0,0,0),f.rotation.set(0,0,0),f.scale.set(1,1,1));var m=Math.ceil(10*r(n))/10,g=m/2,v=new Zi.TubeGeometry(h,d,g,t.linkResolution,!1);f.geometry.dispose(),f.geometry=v}else{if(!f.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)){var y=Math.ceil(10*r(n))/10,b=y/2,_=new Zi.CylinderGeometry(b,b,1,t.linkResolution,1,!1);_[to]((new Zi.Matrix4).makeTranslation(0,.5,0)),_[to]((new Zi.Matrix4).makeRotationX(Math.PI/2)),f.geometry.dispose(),f.geometry=_}var w=new Zi.Vector3(l.x,l.y||0,l.z||0),x=new Zi.Vector3(c.x,c.y||0,c.z||0),S=w.distanceTo(x);f.position.x=w.x,f.position.y=w.y,f.position.z=w.z,f.scale.z=S,f.parent.localToWorld(x),f.lookAt(x)}}}}}))}function r(){var n=An(t.linkDirectionalArrowRelPos),r=An(t.linkDirectionalArrowLength),i=An(t.nodeVal);t.graphData.links.forEach((function(o){var s=o.__arrowObj;if(s){var a=e?o:t.layout.getLinkPosition(t.layout.graph.getLink(o.source,o.target).id),l=a[e?"source":"from"],c=a[e?"target":"to"];if(l&&c&&l.hasOwnProperty("x")&&c.hasOwnProperty("x")){var u=Math.cbrt(Math.max(0,i(l)||1))*t.nodeRelSize,d=Math.cbrt(Math.max(0,i(c)||1))*t.nodeRelSize,h=r(o),f=n(o),p=o.__curve?function(t){return o.__curve.getPoint(t)}:function(t){var e=function(t,e,n,r){return e[t]+(n[t]-e[t])*r||0};return{x:e("x",l,c,t),y:e("y",l,c,t),z:e("z",l,c,t)}},m=o.__curve?o.__curve.getLength():Math.sqrt(["x","y","z"].map((function(t){return Math.pow((c[t]||0)-(l[t]||0),2)})).reduce((function(t,e){return t+e}),0)),g=u+h+(m-u-d-h)*f,v=p(g/m),y=p((g-h)/m);["x","y","z"].forEach((function(t){return s.position[t]=y[t]}));var b=Si(Zi.Vector3,Oi(["x","y","z"].map((function(t){return v[t]}))));s.parent.localToWorld(b),s.lookAt(b)}}}))}function i(){var n=An(t.linkDirectionalParticleSpeed);t.graphData.links.forEach((function(r){var i=r.__photonsObj&&r.__photonsObj.children,o=r.__singleHopPhotonsObj&&r.__singleHopPhotonsObj.children;if(o&&o.length||i&&i.length){var s=e?r:t.layout.getLinkPosition(t.layout.graph.getLink(r.source,r.target).id),a=s[e?"source":"from"],l=s[e?"target":"to"];if(a&&l&&a.hasOwnProperty("x")&&l.hasOwnProperty("x")){var c=n(r),u=r.__curve?function(t){return r.__curve.getPoint(t)}:function(t){var e=function(t,e,n,r){return e[t]+(n[t]-e[t])*r||0};return{x:e("x",a,l,t),y:e("y",a,l,t),z:e("z",a,l,t)}},d=[].concat(Oi(i||[]),Oi(o||[]));d.forEach((function(t,e){var n="singleHopPhotons"===t.parent.__linkThreeObjType;if(t.hasOwnProperty("__progressRatio")||(t.__progressRatio=n?0:e/i.length),t.__progressRatio+=c,t.__progressRatio>=1){if(n)return t.parent.remove(t),void ji(t);t.__progressRatio=t.__progressRatio%1}var r=t.__progressRatio,o=u(r);["x","y","z"].forEach((function(e){return t.position[e]=o[e]}))}))}}}))}},emitParticle:function(t,e){if(e&&t.graphData.links.includes(e)){if(!e.__singleHopPhotonsObj){var n=new Zi.Group;n.__linkThreeObjType="singleHopPhotons",e.__singleHopPhotonsObj=n,t.graphScene.add(n)}var r=An(t.linkDirectionalParticleWidth),i=Math.ceil(10*r(e))/10/2,o=t.linkDirectionalParticleResolution,s=new Zi.SphereGeometry(i,o,o),a=An(t.linkColor),l=An(t.linkDirectionalParticleColor),c=l(e)||a(e)||"#f0f0f0",u=new Zi.Color(Gi(c)),d=3*t.linkOpacity,h=new Zi.MeshLambertMaterial({color:u,transparent:!0,opacity:d});e.__singleHopPhotonsObj.add(new Zi.Mesh(s,h))}return this},getGraphBbox:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};if(!t.initialised)return null;var n=function t(n){var r=[];if(n.geometry){n.geometry.computeBoundingBox();var i=new Zi.Box3;i.copy(n.geometry.boundingBox).applyMatrix4(n.matrixWorld),r.push(i)}return r.concat.apply(r,Oi((n.children||[]).filter((function(t){return!t.hasOwnProperty("__graphObjType")||"node"===t.__graphObjType&&e(t.__data)})).map(t)))}(t.graphScene);return n.length?Object.assign.apply(Object,Oi(["x","y","z"].map((function(t){return yi({},t,[kn(n,(function(e){return e.min[t]})),On(n,(function(e){return e.max[t]}))])})))):null}},stateInit:function(){return{d3ForceLayout:Z().force("link",et()).force("charge",pe()).force("center",me()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(t,e){e.graphScene=t},update:function(t,e){var n=function(t){return t.some((function(t){return e.hasOwnProperty(t)}))};if(t.engineRunning=!1,t.onUpdate(),null!==t.nodeAutoColorBy&&n(["nodeAutoColorBy","graphData","nodeColor"])&&Yi(t.graphData.nodes,An(t.nodeAutoColorBy),t.nodeColor),null!==t.linkAutoColorBy&&n(["linkAutoColorBy","graphData","linkColor"])&&Yi(t.graphData.links,An(t.linkAutoColorBy),t.linkColor),t._flushObjects||n(["graphData","nodeThreeObject","nodeThreeObjectExtend","nodeVal","nodeColor","nodeVisibility","nodeRelSize","nodeResolution","nodeOpacity"])){var r=An(t.nodeThreeObject),i=An(t.nodeThreeObjectExtend),o=An(t.nodeVal),s=An(t.nodeColor),a=An(t.nodeVisibility),l={},c={};Wi(t.graphData.nodes.filter(a),t.graphScene,{purge:t._flushObjects||n(["nodeThreeObject","nodeThreeObjectExtend"]),objFilter:function(t){return"node"===t.__graphObjType},createObj:function(e){var n,o=r(e),s=i(e);return o&&t.nodeThreeObject===o&&(o=o.clone()),o&&!s?n=o:(n=new Zi.Mesh,n.__graphDefaultObj=!0,o&&s&&n.add(o)),n.__graphObjType="node",n},updateObj:function(e,n){if(e.__graphDefaultObj){var r=o(n)||1,i=Math.cbrt(r)*t.nodeRelSize,a=t.nodeResolution;e.geometry.type.match(/^Sphere(Buffer)?Geometry$/)&&e.geometry.parameters.radius===i&&e.geometry.parameters.widthSegments===a||(l.hasOwnProperty(r)||(l[r]=new Zi.SphereGeometry(i,a,a)),e.geometry.dispose(),e.geometry=l[r]);var u=s(n),d=new Zi.Color(Gi(u||"#ffffaa")),h=t.nodeOpacity*$i(u);"MeshLambertMaterial"===e.material.type&&e.material.color.equals(d)&&e.material.opacity===h||(c.hasOwnProperty(u)||(c[u]=new Zi.MeshLambertMaterial({color:d,transparent:!0,opacity:h})),e.material.dispose(),e.material=c[u])}}})}if(t._flushObjects||n(["graphData","linkThreeObject","linkThreeObjectExtend","linkMaterial","linkColor","linkWidth","linkVisibility","linkResolution","linkOpacity","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution"])){var u=An(t.linkThreeObject),d=An(t.linkThreeObjectExtend),h=An(t.linkMaterial),f=An(t.linkVisibility),p=An(t.linkColor),m=An(t.linkWidth),g={},v={},y={},b=t.graphData.links.filter(f);if(Wi(b,t.graphScene,{objBindAttr:"__lineObj",purge:t._flushObjects||n(["linkThreeObject","linkThreeObjectExtend","linkWidth"]),objFilter:function(t){return"link"===t.__graphObjType},exitObj:function(t){var e=t.__data&&t.__data.__singleHopPhotonsObj;e&&(e.parent.remove(e),ji(e),delete t.__data.__singleHopPhotonsObj)},createObj:function(e){var n,r,i=u(e),o=d(e);if(i&&t.linkThreeObject===i&&(i=i.clone()),!i||o){var s=!!m(e);if(s)n=new Zi.Mesh;else{var a=new Zi.BufferGeometry;a[Qi]("position",new Zi.BufferAttribute(new Float32Array(6),3)),n=new Zi.Line(a)}}return i?o?(r=new Zi.Group,r.__graphDefaultObj=!0,r.add(n),r.add(i)):r=i:(r=n,r.__graphDefaultObj=!0),r.renderOrder=10,r.__graphObjType="link",r},updateObj:function(e,n){if(e.__graphDefaultObj){var r=e.children.length?e.children[0]:e,i=Math.ceil(10*m(n))/10,o=!!i;if(o){var s=i/2,a=t.linkResolution;if(!r.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)||r.geometry.parameters.radiusTop!==s||r.geometry.parameters.radialSegments!==a){if(!g.hasOwnProperty(i)){var l=new Zi.CylinderGeometry(s,s,1,a,1,!1);l[to]((new Zi.Matrix4).makeTranslation(0,.5,0)),l[to]((new Zi.Matrix4).makeRotationX(Math.PI/2)),g[i]=l}r.geometry.dispose(),r.geometry=g[i]}}var c=h(n);if(c)r.material=c;else{var u=p(n),d=new Zi.Color(Gi(u||"#f0f0f0")),f=t.linkOpacity*$i(u),b=o?"MeshLambertMaterial":"LineBasicMaterial";if(r.material.type!==b||!r.material.color.equals(d)||r.material.opacity!==f){var _=o?v:y;_.hasOwnProperty(u)||(_[u]=new Zi[b]({color:d,transparent:f<1,opacity:f,depthWrite:f>=1})),r.material.dispose(),r.material=_[u]}}}}}),t.linkDirectionalArrowLength||e.hasOwnProperty("linkDirectionalArrowLength")){var _=An(t.linkDirectionalArrowLength),w=An(t.linkDirectionalArrowColor);Wi(b.filter(_),t.graphScene,{objBindAttr:"__arrowObj",objFilter:function(t){return"arrow"===t.__linkThreeObjType},createObj:function(){var t=new Zi.Mesh(void 0,new Zi.MeshLambertMaterial({transparent:!0}));return t.__linkThreeObjType="arrow",t},updateObj:function(e,n){var r=_(n),i=t.linkDirectionalArrowResolution;if(!e.geometry.type.match(/^Cone(Buffer)?Geometry$/)||e.geometry.parameters.height!==r||e.geometry.parameters.radialSegments!==i){var o=new Zi.ConeGeometry(.25*r,r,i);o.translate(0,r/2,0),o.rotateX(Math.PI/2),e.geometry.dispose(),e.geometry=o}var s=w(n)||p(n)||"#f0f0f0";e.material.color=new Zi.Color(Gi(s)),e.material.opacity=3*t.linkOpacity*$i(s)}})}if(t.linkDirectionalParticles||e.hasOwnProperty("linkDirectionalParticles")){var x=An(t.linkDirectionalParticles),S=An(t.linkDirectionalParticleWidth),E=An(t.linkDirectionalParticleColor),M={},T={};Wi(b.filter(x),t.graphScene,{objBindAttr:"__photonsObj",objFilter:function(t){return"photons"===t.__linkThreeObjType},createObj:function(){var t=new Zi.Group;return t.__linkThreeObjType="photons",t},updateObj:function(e,n){var r,i=Math.round(Math.abs(x(n))),o=!!e.children.length&&e.children[0],s=Math.ceil(10*S(n))/10/2,a=t.linkDirectionalParticleResolution;o&&o.geometry.parameters.radius===s&&o.geometry.parameters.widthSegments===a?r=o.geometry:(T.hasOwnProperty(s)||(T[s]=new Zi.SphereGeometry(s,a,a)),r=T[s],o&&o.geometry.dispose());var l,c=E(n)||p(n)||"#f0f0f0",u=new Zi.Color(Gi(c)),d=3*t.linkOpacity;o&&o.material.color.equals(u)&&o.material.opacity===d?l=o.material:(M.hasOwnProperty(c)||(M[c]=new Zi.MeshLambertMaterial({color:u,transparent:!0,opacity:d})),l=M[c],o&&o.material.dispose()),Wi(Oi(new Array(i)).map((function(t,e){return{idx:e}})),e,{idAccessor:function(t){return t.idx},createObj:function(){return new Zi.Mesh(r,l)},updateObj:function(t){t.geometry=r,t.material=l}})}})}}if(t._flushObjects=!1,n(["graphData","nodeId","linkSource","linkTarget","numDimensions","forceEngine","dagMode","dagNodeFilter","dagLevelDistance"])){t.engineRunning=!1,t.graphData.links.forEach((function(e){e.source=e[t.linkSource],e.target=e[t.linkTarget]}));var C,A="ngraph"!==t.forceEngine;if(A){(C=t.d3ForceLayout).stop().alpha(1).numDimensions(t.numDimensions).nodes(t.graphData.nodes);var k=t.d3ForceLayout.force("link");k&&k.id((function(e){return e[t.nodeId]})).links(t.graphData.links);var O=t.dagMode&&Xi(t.graphData,(function(e){return e[t.nodeId]}),{nodeFilter:t.dagNodeFilter,onLoopError:t.onDagError||void 0}),R=Math.max.apply(Math,Oi(Object.values(O||[]))),P=t.dagLevelDistance||t.graphData.nodes.length/(R||1)*Ji*(-1!==["radialin","radialout"].indexOf(t.dagMode)?.7:1);if(t.dagMode){var L=function(e,n){return function(r){return e?(O[r[t.nodeId]]-R/2)*P*(n?-1:1):void 0}},D=L(-1!==["lr","rl"].indexOf(t.dagMode),"rl"===t.dagMode),I=L(-1!==["td","bu"].indexOf(t.dagMode),"td"===t.dagMode),N=L(-1!==["zin","zout"].indexOf(t.dagMode),"zout"===t.dagMode);t.graphData.nodes.filter(t.dagNodeFilter).forEach((function(t){t.fx=D(t),t.fy=I(t),t.fz=N(t)}))}t.d3ForceLayout.force("dagRadial",-1!==["radialin","radialout"].indexOf(t.dagMode)?ge((function(e){var n=O[e[t.nodeId]]||-1;return("radialin"===t.dagMode?R-n:n)*P})).strength((function(e){return t.dagNodeFilter(e)?1:0})):null)}else{var U=Ki.graph();t.graphData.nodes.forEach((function(e){U.addNode(e[t.nodeId])})),t.graphData.links.forEach((function(t){U.addLink(t.source,t.target)})),C=Ki.forcelayout(U,fi({dimensions:t.numDimensions},t.ngraphPhysics)),C.graph=U}for(var F=0;F<t.warmupTicks&&!(A&&t.d3AlphaMin>0&&t.d3ForceLayout.alpha()<t.d3AlphaMin);F++)C[A?"tick":"step"]();t.layout=C,this.resetCountdown()}t.engineRunning=!0,t.onFinishUpdate()}});function no(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e){bi(i,e);var r=Ai(i);function i(){var e;mi(this,i);for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return e=r.call.apply(r,[this].concat(s)),e.__kapsuleInstance=t().apply(void 0,[].concat(Oi(n?[Ti(e)]:[]),s)),e}return vi(i)}(e);return Object.keys(t()).forEach((function(t){return r.prototype[t]=function(){var e,n=(e=this.__kapsuleInstance)[t].apply(e,arguments);return n===this.__kapsuleInstance?this:n}})),r}var ro=window.THREE?window.THREE:{Group:r.ZAu},io=no(eo,ro.Group,!0);n(2262),n(4506);const oo={type:"change"},so={type:"start"},ao={type:"end"};class lo extends r.pBf{constructor(t,e){super();const n=this,i={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=t,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:r.RsA.ROTATE,MIDDLE:r.RsA.DOLLY,RIGHT:r.RsA.PAN},this.target=new r.Pa4;const o=1e-6,s=new r.Pa4;let a=1,l=i.NONE,c=i.NONE,u=0,d=0,h=0;const f=new r.Pa4,p=new r.FM8,m=new r.FM8,g=new r.Pa4,v=new r.FM8,y=new r.FM8,b=new r.FM8,_=new r.FM8,w=[],x={};this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,this.handleResize=function(){const t=n.domElement.getBoundingClientRect(),e=n.domElement.ownerDocument.documentElement;n.screen.left=t.left+window.pageXOffset-e.clientLeft,n.screen.top=t.top+window.pageYOffset-e.clientTop,n.screen.width=t.width,n.screen.height=t.height};const S=function(){const t=new r.FM8;return function(e,r){return t.set((e-n.screen.left)/n.screen.width,(r-n.screen.top)/n.screen.height),t}}(),E=function(){const t=new r.FM8;return function(e,r){return t.set((e-.5*n.screen.width-n.screen.left)/(.5*n.screen.width),(n.screen.height+2*(n.screen.top-r))/n.screen.width),t}}();function M(t){!1!==n.enabled&&(0===w.length&&(n.domElement.setPointerCapture(t.pointerId),n.domElement.addEventListener("pointermove",T),n.domElement.addEventListener("pointerup",C)),B(t),"touch"===t.pointerType?I(t):R(t))}function T(t){!1!==n.enabled&&("touch"===t.pointerType?N(t):P(t))}function C(t){!1!==n.enabled&&("touch"===t.pointerType?U(t):L(),V(t),0===w.length&&(n.domElement.releasePointerCapture(t.pointerId),n.domElement.removeEventListener("pointermove",T),n.domElement.removeEventListener("pointerup",C)))}function A(t){V(t)}function k(t){!1!==n.enabled&&(window.removeEventListener("keydown",k),c===i.NONE&&(t.code!==n.keys[i.ROTATE]||n.noRotate?t.code!==n.keys[i.ZOOM]||n.noZoom?t.code!==n.keys[i.PAN]||n.noPan||(c=i.PAN):c=i.ZOOM:c=i.ROTATE))}function O(){!1!==n.enabled&&(c=i.NONE,window.addEventListener("keydown",k))}function R(t){if(l===i.NONE)switch(t.button){case n.mouseButtons.LEFT:l=i.ROTATE;break;case n.mouseButtons.MIDDLE:l=i.ZOOM;break;case n.mouseButtons.RIGHT:l=i.PAN;break}const e=c!==i.NONE?c:l;e!==i.ROTATE||n.noRotate?e!==i.ZOOM||n.noZoom?e!==i.PAN||n.noPan||(b.copy(S(t.pageX,t.pageY)),_.copy(b)):(v.copy(S(t.pageX,t.pageY)),y.copy(v)):(m.copy(E(t.pageX,t.pageY)),p.copy(m)),n.dispatchEvent(so)}function P(t){const e=c!==i.NONE?c:l;e!==i.ROTATE||n.noRotate?e!==i.ZOOM||n.noZoom?e!==i.PAN||n.noPan||_.copy(S(t.pageX,t.pageY)):y.copy(S(t.pageX,t.pageY)):(p.copy(m),m.copy(E(t.pageX,t.pageY)))}function L(){l=i.NONE,n.dispatchEvent(ao)}function D(t){if(!1!==n.enabled&&!0!==n.noZoom){switch(t.preventDefault(),t.deltaMode){case 2:v.y-=.025*t.deltaY;break;case 1:v.y-=.01*t.deltaY;break;default:v.y-=25e-5*t.deltaY;break}n.dispatchEvent(so),n.dispatchEvent(ao)}}function I(t){switch(z(t),w.length){case 1:l=i.TOUCH_ROTATE,m.copy(E(w[0].pageX,w[0].pageY)),p.copy(m);break;default:l=i.TOUCH_ZOOM_PAN;const t=w[0].pageX-w[1].pageX,e=w[0].pageY-w[1].pageY;d=u=Math.sqrt(t*t+e*e);const n=(w[0].pageX+w[1].pageX)/2,r=(w[0].pageY+w[1].pageY)/2;b.copy(S(n,r)),_.copy(b);break}n.dispatchEvent(so)}function N(t){switch(z(t),w.length){case 1:p.copy(m),m.copy(E(t.pageX,t.pageY));break;default:const e=j(t),n=t.pageX-e.x,r=t.pageY-e.y;d=Math.sqrt(n*n+r*r);const i=(t.pageX+e.x)/2,o=(t.pageY+e.y)/2;_.copy(S(i,o));break}}function U(t){switch(w.length){case 0:l=i.NONE;break;case 1:l=i.TOUCH_ROTATE,m.copy(E(t.pageX,t.pageY)),p.copy(m);break;case 2:l=i.TOUCH_ZOOM_PAN;for(let e=0;e<w.length;e++)if(w[e].pointerId!==t.pointerId){const t=x[w[e].pointerId];m.copy(E(t.x,t.y)),p.copy(m);break}break}n.dispatchEvent(ao)}function F(t){!1!==n.enabled&&t.preventDefault()}function B(t){w.push(t)}function V(t){delete x[t.pointerId];for(let e=0;e<w.length;e++)if(w[e].pointerId==t.pointerId)return void w.splice(e,1)}function z(t){let e=x[t.pointerId];void 0===e&&(e=new r.FM8,x[t.pointerId]=e),e.set(t.pageX,t.pageY)}function j(t){const e=t.pointerId===w[0].pointerId?w[1]:w[0];return x[e.pointerId]}this.rotateCamera=function(){const t=new r.Pa4,e=new r._fP,i=new r.Pa4,o=new r.Pa4,s=new r.Pa4,a=new r.Pa4;return function(){a.set(m.x-p.x,m.y-p.y,0);let r=a.length();r?(f.copy(n.object.position).sub(n.target),i.copy(f).normalize(),o.copy(n.object.up).normalize(),s.crossVectors(o,i).normalize(),o.setLength(m.y-p.y),s.setLength(m.x-p.x),a.copy(o.add(s)),t.crossVectors(a,f).normalize(),r*=n.rotateSpeed,e.setFromAxisAngle(t,r),f.applyQuaternion(e),n.object.up.applyQuaternion(e),g.copy(t),h=r):!n.staticMoving&&h&&(h*=Math.sqrt(1-n.dynamicDampingFactor),f.copy(n.object.position).sub(n.target),e.setFromAxisAngle(g,h),f.applyQuaternion(e),n.object.up.applyQuaternion(e)),p.copy(m)}}(),this.zoomCamera=function(){let t;l===i.TOUCH_ZOOM_PAN?(t=u/d,u=d,n.object.isPerspectiveCamera?f.multiplyScalar(t):n.object.isOrthographicCamera?(n.object.zoom=r.M8C.clamp(n.object.zoom/t,n.minZoom,n.maxZoom),a!==n.object.zoom&&n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(t=1+(y.y-v.y)*n.zoomSpeed,1!==t&&t>0&&(n.object.isPerspectiveCamera?f.multiplyScalar(t):n.object.isOrthographicCamera?(n.object.zoom=r.M8C.clamp(n.object.zoom/t,n.minZoom,n.maxZoom),a!==n.object.zoom&&n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),n.staticMoving?v.copy(y):v.y+=(y.y-v.y)*this.dynamicDampingFactor)},this.panCamera=function(){const t=new r.FM8,e=new r.Pa4,i=new r.Pa4;return function(){if(t.copy(_).sub(b),t.lengthSq()){if(n.object.isOrthographicCamera){const e=(n.object.right-n.object.left)/n.object.zoom/n.domElement.clientWidth,r=(n.object.top-n.object.bottom)/n.object.zoom/n.domElement.clientWidth;t.x*=e,t.y*=r}t.multiplyScalar(f.length()*n.panSpeed),i.copy(f).cross(n.object.up).setLength(t.x),i.add(e.copy(n.object.up).setLength(t.y)),n.object.position.add(i),n.target.add(i),n.staticMoving?b.copy(_):b.add(t.subVectors(_,b).multiplyScalar(n.dynamicDampingFactor))}}}(),this.checkDistances=function(){n.noZoom&&n.noPan||(f.lengthSq()>n.maxDistance*n.maxDistance&&(n.object.position.addVectors(n.target,f.setLength(n.maxDistance)),v.copy(y)),f.lengthSq()<n.minDistance*n.minDistance&&(n.object.position.addVectors(n.target,f.setLength(n.minDistance)),v.copy(y)))},this.update=function(){f.subVectors(n.object.position,n.target),n.noRotate||n.rotateCamera(),n.noZoom||n.zoomCamera(),n.noPan||n.panCamera(),n.object.position.addVectors(n.target,f),n.object.isPerspectiveCamera?(n.checkDistances(),n.object.lookAt(n.target),s.distanceToSquared(n.object.position)>o&&(n.dispatchEvent(oo),s.copy(n.object.position))):n.object.isOrthographicCamera?(n.object.lookAt(n.target),(s.distanceToSquared(n.object.position)>o||a!==n.object.zoom)&&(n.dispatchEvent(oo),s.copy(n.object.position),a=n.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){l=i.NONE,c=i.NONE,n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.up.copy(n.up0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),f.subVectors(n.object.position,n.target),n.object.lookAt(n.target),n.dispatchEvent(oo),s.copy(n.object.position),a=n.object.zoom},this.dispose=function(){n.domElement.removeEventListener("contextmenu",F),n.domElement.removeEventListener("pointerdown",M),n.domElement.removeEventListener("pointercancel",A),n.domElement.removeEventListener("wheel",D),n.domElement.removeEventListener("pointermove",T),n.domElement.removeEventListener("pointerup",C),window.removeEventListener("keydown",k),window.removeEventListener("keyup",O)},this.domElement.addEventListener("contextmenu",F),this.domElement.addEventListener("pointerdown",M),this.domElement.addEventListener("pointercancel",A),this.domElement.addEventListener("wheel",D,{passive:!1}),window.addEventListener("keydown",k),window.addEventListener("keyup",O),this.handleResize(),this.update()}}const co={type:"change"},uo={type:"start"},ho={type:"end"};class fo extends r.pBf{constructor(t,e){super(),this.object=t,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new r.Pa4,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:r.RsA.ROTATE,MIDDLE:r.RsA.DOLLY,RIGHT:r.RsA.PAN},this.touches={ONE:r.QmN.ROTATE,TWO:r.QmN.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(t){t.addEventListener("keydown",nt),this._domElementKeyEvents=t},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",nt),this._domElementKeyEvents=null},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(co),n.update(),o=i.NONE},this.update=function(){const e=new r.Pa4,h=(new r._fP).setFromUnitVectors(t.up,new r.Pa4(0,1,0)),f=h.clone().invert(),p=new r.Pa4,m=new r._fP,g=new r.Pa4,v=2*Math.PI;return function(){const t=n.object.position;e.copy(t).sub(n.target),e.applyQuaternion(h),a.setFromVector3(e),n.autoRotate&&o===i.NONE&&M(S()),n.enableDamping?(a.theta+=l.theta*n.dampingFactor,a.phi+=l.phi*n.dampingFactor):(a.theta+=l.theta,a.phi+=l.phi);let r=n.minAzimuthAngle,y=n.maxAzimuthAngle;return isFinite(r)&&isFinite(y)&&(r<-Math.PI?r+=v:r>Math.PI&&(r-=v),y<-Math.PI?y+=v:y>Math.PI&&(y-=v),a.theta=r<=y?Math.max(r,Math.min(y,a.theta)):a.theta>(r+y)/2?Math.max(r,a.theta):Math.min(y,a.theta)),a.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=c,a.radius=Math.max(n.minDistance,Math.min(n.maxDistance,a.radius)),!0===n.enableDamping?n.target.addScaledVector(u,n.dampingFactor):n.target.add(u),e.setFromSpherical(a),e.applyQuaternion(f),t.copy(n.target).add(e),n.object.lookAt(n.target),!0===n.enableDamping?(l.theta*=1-n.dampingFactor,l.phi*=1-n.dampingFactor,u.multiplyScalar(1-n.dampingFactor)):(l.set(0,0,0),u.set(0,0,0)),c=1,!!(d||p.distanceToSquared(n.object.position)>s||8*(1-m.dot(n.object.quaternion))>s||g.distanceToSquared(n.target)>0)&&(n.dispatchEvent(co),p.copy(n.object.position),m.copy(n.object.quaternion),g.copy(n.target),d=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",ot),n.domElement.removeEventListener("pointerdown",Z),n.domElement.removeEventListener("pointercancel",J),n.domElement.removeEventListener("wheel",et),n.domElement.removeEventListener("pointermove",K),n.domElement.removeEventListener("pointerup",J),null!==n._domElementKeyEvents&&(n._domElementKeyEvents.removeEventListener("keydown",nt),n._domElementKeyEvents=null)};const n=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let o=i.NONE;const s=1e-6,a=new r.$V,l=new r.$V;let c=1;const u=new r.Pa4;let d=!1;const h=new r.FM8,f=new r.FM8,p=new r.FM8,m=new r.FM8,g=new r.FM8,v=new r.FM8,y=new r.FM8,b=new r.FM8,_=new r.FM8,w=[],x={};function S(){return 2*Math.PI/60/60*n.autoRotateSpeed}function E(){return Math.pow(.95,n.zoomSpeed)}function M(t){l.theta-=t}function T(t){l.phi-=t}const C=function(){const t=new r.Pa4;return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),u.add(t)}}(),A=function(){const t=new r.Pa4;return function(e,r){!0===n.screenSpacePanning?t.setFromMatrixColumn(r,1):(t.setFromMatrixColumn(r,0),t.crossVectors(n.object.up,t)),t.multiplyScalar(e),u.add(t)}}(),k=function(){const t=new r.Pa4;return function(e,r){const i=n.domElement;if(n.object.isPerspectiveCamera){const o=n.object.position;t.copy(o).sub(n.target);let s=t.length();s*=Math.tan(n.object.fov/2*Math.PI/180),C(2*e*s/i.clientHeight,n.object.matrix),A(2*r*s/i.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(C(e*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),A(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function O(t){n.object.isPerspectiveCamera?c/=t:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*t)),n.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function R(t){n.object.isPerspectiveCamera?c*=t:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/t)),n.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function P(t){h.set(t.clientX,t.clientY)}function L(t){y.set(t.clientX,t.clientY)}function D(t){m.set(t.clientX,t.clientY)}function I(t){f.set(t.clientX,t.clientY),p.subVectors(f,h).multiplyScalar(n.rotateSpeed);const e=n.domElement;M(2*Math.PI*p.x/e.clientHeight),T(2*Math.PI*p.y/e.clientHeight),h.copy(f),n.update()}function N(t){b.set(t.clientX,t.clientY),_.subVectors(b,y),_.y>0?O(E()):_.y<0&&R(E()),y.copy(b),n.update()}function U(t){g.set(t.clientX,t.clientY),v.subVectors(g,m).multiplyScalar(n.panSpeed),k(v.x,v.y),m.copy(g),n.update()}function F(t){t.deltaY<0?R(E()):t.deltaY>0&&O(E()),n.update()}function B(t){let e=!1;switch(t.code){case n.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?T(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):k(0,n.keyPanSpeed),e=!0;break;case n.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?T(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):k(0,-n.keyPanSpeed),e=!0;break;case n.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?M(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):k(n.keyPanSpeed,0),e=!0;break;case n.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?M(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):k(-n.keyPanSpeed,0),e=!0;break}e&&(t.preventDefault(),n.update())}function V(){if(1===w.length)h.set(w[0].pageX,w[0].pageY);else{const t=.5*(w[0].pageX+w[1].pageX),e=.5*(w[0].pageY+w[1].pageY);h.set(t,e)}}function z(){if(1===w.length)m.set(w[0].pageX,w[0].pageY);else{const t=.5*(w[0].pageX+w[1].pageX),e=.5*(w[0].pageY+w[1].pageY);m.set(t,e)}}function j(){const t=w[0].pageX-w[1].pageX,e=w[0].pageY-w[1].pageY,n=Math.sqrt(t*t+e*e);y.set(0,n)}function H(){n.enableZoom&&j(),n.enablePan&&z()}function W(){n.enableZoom&&j(),n.enableRotate&&V()}function G(t){if(1==w.length)f.set(t.pageX,t.pageY);else{const e=ct(t),n=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);f.set(n,r)}p.subVectors(f,h).multiplyScalar(n.rotateSpeed);const e=n.domElement;M(2*Math.PI*p.x/e.clientHeight),T(2*Math.PI*p.y/e.clientHeight),h.copy(f)}function $(t){if(1===w.length)g.set(t.pageX,t.pageY);else{const e=ct(t),n=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);g.set(n,r)}v.subVectors(g,m).multiplyScalar(n.panSpeed),k(v.x,v.y),m.copy(g)}function q(t){const e=ct(t),r=t.pageX-e.x,i=t.pageY-e.y,o=Math.sqrt(r*r+i*i);b.set(0,o),_.set(0,Math.pow(b.y/y.y,n.zoomSpeed)),O(_.y),y.copy(b)}function Y(t){n.enableZoom&&q(t),n.enablePan&&$(t)}function X(t){n.enableZoom&&q(t),n.enableRotate&&G(t)}function Z(t){!1!==n.enabled&&(0===w.length&&(n.domElement.setPointerCapture(t.pointerId),n.domElement.addEventListener("pointermove",K),n.domElement.addEventListener("pointerup",J)),st(t),"touch"===t.pointerType?rt(t):Q(t))}function K(t){!1!==n.enabled&&("touch"===t.pointerType?it(t):tt(t))}function J(t){at(t),0===w.length&&(n.domElement.releasePointerCapture(t.pointerId),n.domElement.removeEventListener("pointermove",K),n.domElement.removeEventListener("pointerup",J)),n.dispatchEvent(ho),o=i.NONE}function Q(t){let e;switch(t.button){case 0:e=n.mouseButtons.LEFT;break;case 1:e=n.mouseButtons.MIDDLE;break;case 2:e=n.mouseButtons.RIGHT;break;default:e=-1}switch(e){case r.RsA.DOLLY:if(!1===n.enableZoom)return;L(t),o=i.DOLLY;break;case r.RsA.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enablePan)return;D(t),o=i.PAN}else{if(!1===n.enableRotate)return;P(t),o=i.ROTATE}break;case r.RsA.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enableRotate)return;P(t),o=i.ROTATE}else{if(!1===n.enablePan)return;D(t),o=i.PAN}break;default:o=i.NONE}o!==i.NONE&&n.dispatchEvent(uo)}function tt(t){switch(o){case i.ROTATE:if(!1===n.enableRotate)return;I(t);break;case i.DOLLY:if(!1===n.enableZoom)return;N(t);break;case i.PAN:if(!1===n.enablePan)return;U(t);break}}function et(t){!1!==n.enabled&&!1!==n.enableZoom&&o===i.NONE&&(t.preventDefault(),n.dispatchEvent(uo),F(t),n.dispatchEvent(ho))}function nt(t){!1!==n.enabled&&!1!==n.enablePan&&B(t)}function rt(t){switch(lt(t),w.length){case 1:switch(n.touches.ONE){case r.QmN.ROTATE:if(!1===n.enableRotate)return;V(),o=i.TOUCH_ROTATE;break;case r.QmN.PAN:if(!1===n.enablePan)return;z(),o=i.TOUCH_PAN;break;default:o=i.NONE}break;case 2:switch(n.touches.TWO){case r.QmN.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;H(),o=i.TOUCH_DOLLY_PAN;break;case r.QmN.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;W(),o=i.TOUCH_DOLLY_ROTATE;break;default:o=i.NONE}break;default:o=i.NONE}o!==i.NONE&&n.dispatchEvent(uo)}function it(t){switch(lt(t),o){case i.TOUCH_ROTATE:if(!1===n.enableRotate)return;G(t),n.update();break;case i.TOUCH_PAN:if(!1===n.enablePan)return;$(t),n.update();break;case i.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;Y(t),n.update();break;case i.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;X(t),n.update();break;default:o=i.NONE}}function ot(t){!1!==n.enabled&&t.preventDefault()}function st(t){w.push(t)}function at(t){delete x[t.pointerId];for(let e=0;e<w.length;e++)if(w[e].pointerId==t.pointerId)return void w.splice(e,1)}function lt(t){let e=x[t.pointerId];void 0===e&&(e=new r.FM8,x[t.pointerId]=e),e.set(t.pageX,t.pageY)}function ct(t){const e=t.pointerId===w[0].pointerId?w[1]:w[0];return x[e.pointerId]}n.domElement.addEventListener("contextmenu",ot),n.domElement.addEventListener("pointerdown",Z),n.domElement.addEventListener("pointercancel",J),n.domElement.addEventListener("wheel",et,{passive:!1}),this.update()}}const po={type:"change"};class mo extends r.pBf{constructor(t,e){super(),this.object=t,this.domElement=e,this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1;const n=this,i=1e-6,o=new r._fP,s=new r.Pa4;this.tmpQuaternion=new r._fP,this.status=0,this.moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this.moveVector=new r.Pa4(0,0,0),this.rotationVector=new r.Pa4(0,0,0),this.keydown=function(t){if(!t.altKey){switch(t.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this.moveState.forward=1;break;case"KeyS":this.moveState.back=1;break;case"KeyA":this.moveState.left=1;break;case"KeyD":this.moveState.right=1;break;case"KeyR":this.moveState.up=1;break;case"KeyF":this.moveState.down=1;break;case"ArrowUp":this.moveState.pitchUp=1;break;case"ArrowDown":this.moveState.pitchDown=1;break;case"ArrowLeft":this.moveState.yawLeft=1;break;case"ArrowRight":this.moveState.yawRight=1;break;case"KeyQ":this.moveState.rollLeft=1;break;case"KeyE":this.moveState.rollRight=1;break}this.updateMovementVector(),this.updateRotationVector()}},this.keyup=function(t){switch(t.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this.moveState.forward=0;break;case"KeyS":this.moveState.back=0;break;case"KeyA":this.moveState.left=0;break;case"KeyD":this.moveState.right=0;break;case"KeyR":this.moveState.up=0;break;case"KeyF":this.moveState.down=0;break;case"ArrowUp":this.moveState.pitchUp=0;break;case"ArrowDown":this.moveState.pitchDown=0;break;case"ArrowLeft":this.moveState.yawLeft=0;break;case"ArrowRight":this.moveState.yawRight=0;break;case"KeyQ":this.moveState.rollLeft=0;break;case"KeyE":this.moveState.rollRight=0;break}this.updateMovementVector(),this.updateRotationVector()},this.pointerdown=function(t){if(this.dragToLook)this.status++;else{switch(t.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1;break}this.updateMovementVector()}},this.pointermove=function(t){if(!this.dragToLook||this.status>0){const e=this.getContainerDimensions(),n=e.size[0]/2,r=e.size[1]/2;this.moveState.yawLeft=-(t.pageX-e.offset[0]-n)/n,this.moveState.pitchDown=(t.pageY-e.offset[1]-r)/r,this.updateRotationVector()}},this.pointerup=function(t){if(this.dragToLook)this.status--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(t.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0;break}this.updateMovementVector()}this.updateRotationVector()},this.update=function(t){const e=t*n.movementSpeed,r=t*n.rollSpeed;n.object.translateX(n.moveVector.x*e),n.object.translateY(n.moveVector.y*e),n.object.translateZ(n.moveVector.z*e),n.tmpQuaternion.set(n.rotationVector.x*r,n.rotationVector.y*r,n.rotationVector.z*r,1).normalize(),n.object.quaternion.multiply(n.tmpQuaternion),(s.distanceToSquared(n.object.position)>i||8*(1-o.dot(n.object.quaternion))>i)&&(n.dispatchEvent(po),o.copy(n.object.quaternion),s.copy(n.object.position))},this.updateMovementVector=function(){const t=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-t+this.moveState.back},this.updateRotationVector=function(){this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft},this.getContainerDimensions=function(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}},this.dispose=function(){this.domElement.removeEventListener("contextmenu",go),this.domElement.removeEventListener("pointerdown",l),this.domElement.removeEventListener("pointermove",a),this.domElement.removeEventListener("pointerup",c),window.removeEventListener("keydown",u),window.removeEventListener("keyup",d)};const a=this.pointermove.bind(this),l=this.pointerdown.bind(this),c=this.pointerup.bind(this),u=this.keydown.bind(this),d=this.keyup.bind(this);this.domElement.addEventListener("contextmenu",go),this.domElement.addEventListener("pointerdown",l),this.domElement.addEventListener("pointermove",a),this.domElement.addEventListener("pointerup",c),window.addEventListener("keydown",u),window.addEventListener("keyup",d),this.updateMovementVector(),this.updateRotationVector()}}function go(t){t.preventDefault()}const vo={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor.a *= opacity;\n\n\n\t\t}"};class yo{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const bo=new r.iKG(-1,1,1,-1,0,1),_o=new r.u9r;_o.setAttribute("position",new r.a$l([-1,3,0,-1,-1,0,3,-1,0],3)),_o.setAttribute("uv",new r.a$l([0,2,0,0,2,0],2));class wo{constructor(t){this._mesh=new r.Kj0(_o,t)}dispose(){this._mesh.geometry.dispose()}render(t){t.render(this._mesh,bo)}get material(){return this._mesh.material}set material(t){this._mesh.material=t}}class xo extends yo{constructor(t,e){super(),this.textureID=void 0!==e?e:"tDiffuse",t instanceof r.jyz?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=r.rDY.clone(t.uniforms),this.material=new r.jyz({name:void 0!==t.name?t.name:"unspecified",defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new wo(this.material)}render(t,e,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class So extends yo{constructor(t,e){super(),this.scene=t,this.camera=e,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(t,e,n){const r=t.getContext(),i=t.state;let o,s;i.buffers.color.setMask(!1),i.buffers.depth.setMask(!1),i.buffers.color.setLocked(!0),i.buffers.depth.setLocked(!0),this.inverse?(o=0,s=1):(o=1,s=0),i.buffers.stencil.setTest(!0),i.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),i.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),i.buffers.stencil.setClear(s),i.buffers.stencil.setLocked(!0),t.setRenderTarget(n),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(e),this.clear&&t.clear(),t.render(this.scene,this.camera),i.buffers.color.setLocked(!1),i.buffers.depth.setLocked(!1),i.buffers.stencil.setLocked(!1),i.buffers.stencil.setFunc(r.EQUAL,1,4294967295),i.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),i.buffers.stencil.setLocked(!0)}}class Eo extends yo{constructor(){super(),this.needsSwap=!1}render(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}}class Mo{constructor(t,e){if(this.renderer=t,this._pixelRatio=t.getPixelRatio(),void 0===e){const n=t.getSize(new r.FM8);this._width=n.width,this._height=n.height,e=new r.dd2(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:r.cLu}),e.texture.name="EffectComposer.rt1"}else this._width=e.width,this._height=e.height;this.renderTarget1=e,this.renderTarget2=e.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new xo(vo),this.clock=new r.SUY}swapBuffers(){const t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}addPass(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(t,e){this.passes.splice(e,0,t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(t){const e=this.passes.indexOf(t);-1!==e&&this.passes.splice(e,1)}isLastEnabledPass(t){for(let e=t+1;e<this.passes.length;e++)if(this.passes[e].enabled)return!1;return!0}render(t){void 0===t&&(t=this.clock.getDelta());const e=this.renderer.getRenderTarget();let n=!1;for(let r=0,i=this.passes.length;r<i;r++){const e=this.passes[r];if(!1!==e.enabled){if(e.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),e.render(this.renderer,this.writeBuffer,this.readBuffer,t,n),e.needsSwap){if(n){const e=this.renderer.getContext(),n=this.renderer.state.buffers.stencil;n.setFunc(e.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),n.setFunc(e.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==So&&(e instanceof So?n=!0:e instanceof Eo&&(n=!1))}}this.renderer.setRenderTarget(e)}reset(t){if(void 0===t){const e=this.renderer.getSize(new r.FM8);this._pixelRatio=this.renderer.getPixelRatio(),this._width=e.width,this._height=e.height,t=this.renderTarget1.clone(),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(t,e){this._width=t,this._height=e;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let i=0;i<this.passes.length;i++)this.passes[i].setSize(n,r)}setPixelRatio(t){this._pixelRatio=t,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class To extends yo{constructor(t,e,n,i,o){super(),this.scene=t,this.camera=e,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=void 0!==o?o:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new r.Ilk}render(t,e,n){const r=t.autoClear;let i,o;t.autoClear=!1,void 0!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(t.getClearColor(this._oldClearColor),i=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:n),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.clearColor&&t.setClearColor(this._oldClearColor,i),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=o),t.autoClear=r}}function Co(){return Co=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Co.apply(this,arguments)}function Ao(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ko(t,e){return ko=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ko(t,e)}function Oo(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,ko(t,e)}function Ro(t){return Ro=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ro(t)}function Po(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function Lo(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Do(t,e,n){return Do=Lo()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var i=Function.bind.apply(t,r),o=new i;return n&&ko(o,n.prototype),o},Do.apply(null,arguments)}function Io(t){var e="function"===typeof Map?new Map:void 0;return Io=function(t){if(null===t||!Po(t))return t;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return Do(t,arguments,Ro(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ko(n,t)},Io(t)}var No=function(t){function e(e){var n;return n=t.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+e+" for more information.")||this,Ao(n)}return Oo(e,t),e}(Io(Error));function Uo(t){return Math.round(255*t)}function Fo(t,e,n){return Uo(t)+","+Uo(e)+","+Uo(n)}function Bo(t,e,n,r){if(void 0===r&&(r=Fo),0===e)return r(n,n,n);var i=(t%360+360)%360/60,o=(1-Math.abs(2*n-1))*e,s=o*(1-Math.abs(i%2-1)),a=0,l=0,c=0;i>=0&&i<1?(a=o,l=s):i>=1&&i<2?(a=s,l=o):i>=2&&i<3?(l=o,c=s):i>=3&&i<4?(l=s,c=o):i>=4&&i<5?(a=s,c=o):i>=5&&i<6&&(a=o,c=s);var u=n-o/2,d=a+u,h=l+u,f=c+u;return r(d,h,f)}var Vo={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};function zo(t){if("string"!==typeof t)return t;var e=t.toLowerCase();return Vo[e]?"#"+Vo[e]:t}var jo=/^#[a-fA-F0-9]{6}$/,Ho=/^#[a-fA-F0-9]{8}$/,Wo=/^#[a-fA-F0-9]{3}$/,Go=/^#[a-fA-F0-9]{4}$/,$o=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,qo=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,Yo=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,Xo=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i;function Zo(t){if("string"!==typeof t)throw new No(3);var e=zo(t);if(e.match(jo))return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16)};if(e.match(Ho)){var n=parseFloat((parseInt(""+e[7]+e[8],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16),alpha:n}}if(e.match(Wo))return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16)};if(e.match(Go)){var r=parseFloat((parseInt(""+e[4]+e[4],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16),alpha:r}}var i=$o.exec(e);if(i)return{red:parseInt(""+i[1],10),green:parseInt(""+i[2],10),blue:parseInt(""+i[3],10)};var o=qo.exec(e.substring(0,50));if(o)return{red:parseInt(""+o[1],10),green:parseInt(""+o[2],10),blue:parseInt(""+o[3],10),alpha:parseFloat(""+o[4])>1?parseFloat(""+o[4])/100:parseFloat(""+o[4])};var s=Yo.exec(e);if(s){var a=parseInt(""+s[1],10),l=parseInt(""+s[2],10)/100,c=parseInt(""+s[3],10)/100,u="rgb("+Bo(a,l,c)+")",d=$o.exec(u);if(!d)throw new No(4,e,u);return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10)}}var h=Xo.exec(e.substring(0,50));if(h){var f=parseInt(""+h[1],10),p=parseInt(""+h[2],10)/100,m=parseInt(""+h[3],10)/100,g="rgb("+Bo(f,p,m)+")",v=$o.exec(g);if(!v)throw new No(4,e,g);return{red:parseInt(""+v[1],10),green:parseInt(""+v[2],10),blue:parseInt(""+v[3],10),alpha:parseFloat(""+h[4])>1?parseFloat(""+h[4])/100:parseFloat(""+h[4])}}throw new No(5)}var Ko=function(t){return 7===t.length&&t[1]===t[2]&&t[3]===t[4]&&t[5]===t[6]?"#"+t[1]+t[3]+t[5]:t},Jo=Ko;function Qo(t){var e=t.toString(16);return 1===e.length?"0"+e:e}function ts(t,e,n){if("number"===typeof t&&"number"===typeof e&&"number"===typeof n)return Jo("#"+Qo(t)+Qo(e)+Qo(n));if("object"===typeof t&&void 0===e&&void 0===n)return Jo("#"+Qo(t.red)+Qo(t.green)+Qo(t.blue));throw new No(6)}function es(t,e,n,r){if("string"===typeof t&&"number"===typeof e){var i=Zo(t);return"rgba("+i.red+","+i.green+","+i.blue+","+e+")"}if("number"===typeof t&&"number"===typeof e&&"number"===typeof n&&"number"===typeof r)return r>=1?ts(t,e,n):"rgba("+t+","+e+","+n+","+r+")";if("object"===typeof t&&void 0===e&&void 0===n&&void 0===r)return t.alpha>=1?ts(t.red,t.green,t.blue):"rgba("+t.red+","+t.green+","+t.blue+","+t.alpha+")";throw new No(7)}function ns(t,e,n){return function(){var r=n.concat(Array.prototype.slice.call(arguments));return r.length>=e?t.apply(this,r):ns(t,e,r)}}function rs(t){return ns(t,t.length,[])}function is(t,e,n){return Math.max(t,Math.min(e,n))}function os(t,e){if("transparent"===e)return e;var n=Zo(e),r="number"===typeof n.alpha?n.alpha:1,i=Co({},n,{alpha:is(0,1,(100*r+100*parseFloat(t))/100)});return es(i)}var ss=rs(os),as=ss;var ls=Object.freeze({Linear:Object.freeze({None:function(t){return t},In:function(t){return this.None(t)},Out:function(t){return this.None(t)},InOut:function(t){return this.None(t)}}),Quadratic:Object.freeze({In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}}),Cubic:Object.freeze({In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}}),Quartic:Object.freeze({In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}}),Quintic:Object.freeze({In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}}),Sinusoidal:Object.freeze({In:function(t){return 1-Math.sin((1-t)*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.sin(Math.PI*(.5-t)))}}),Exponential:Object.freeze({In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}}),Circular:Object.freeze({In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}}),Elastic:Object.freeze({In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1)}}),Back:Object.freeze({In:function(t){var e=1.70158;return 1===t?1:t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return 0===t?0:--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}}),Bounce:Object.freeze({In:function(t){return 1-ls.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*ls.Bounce.In(2*t):.5*ls.Bounce.Out(2*t-1)+.5}}),generatePow:function(t){return void 0===t&&(t=4),t=t<Number.EPSILON?Number.EPSILON:t,t=t>1e4?1e4:t,{In:function(e){return Math.pow(e,t)},Out:function(e){return 1-Math.pow(1-e,t)},InOut:function(e){return e<.5?Math.pow(2*e,t)/2:(1-Math.pow(2-2*e,t))/2+.5}}}}),cs=function(){return performance.now()},us=function(){function t(){this._tweens={},this._tweensAddedDuringUpdate={}}return t.prototype.getAll=function(){var t=this;return Object.keys(this._tweens).map((function(e){return t._tweens[e]}))},t.prototype.removeAll=function(){this._tweens={}},t.prototype.add=function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},t.prototype.remove=function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},t.prototype.update=function(t,e){void 0===t&&(t=cs()),void 0===e&&(e=!1);var n=Object.keys(this._tweens);if(0===n.length)return!1;while(n.length>0){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var i=this._tweens[n[r]],o=!e;i&&!1===i.update(t,o)&&!e&&delete this._tweens[n[r]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},t}(),ds={Linear:function(t,e){var n=t.length-1,r=n*e,i=Math.floor(r),o=ds.Utils.Linear;return e<0?o(t[0],t[1],r):e>1?o(t[n],t[n-1],n-r):o(t[i],t[i+1>n?n:i+1],r-i)},Bezier:function(t,e){for(var n=0,r=t.length-1,i=Math.pow,o=ds.Utils.Bernstein,s=0;s<=r;s++)n+=i(1-e,r-s)*i(e,s)*t[s]*o(r,s);return n},CatmullRom:function(t,e){var n=t.length-1,r=n*e,i=Math.floor(r),o=ds.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(i=Math.floor(r=n*(1+e))),o(t[(i-1+n)%n],t[i],t[(i+1)%n],t[(i+2)%n],r-i)):e<0?t[0]-(o(t[0],t[0],t[1],t[1],-r)-t[0]):e>1?t[n]-(o(t[n],t[n],t[n-1],t[n-1],r-n)-t[n]):o(t[i?i-1:0],t[i],t[n<i+1?n:i+1],t[n<i+2?n:i+2],r-i)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=ds.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var n=1;if(t[e])return t[e];for(var r=e;r>1;r--)n*=r;return t[e]=n,n}}(),CatmullRom:function(t,e,n,r,i){var o=.5*(n-t),s=.5*(r-e),a=i*i,l=i*a;return(2*e-2*n+o+s)*l+(-3*e+3*n-2*o-s)*a+o*i+e}}},hs=function(){function t(){}return t.nextId=function(){return t._nextId++},t._nextId=0,t}(),fs=new us,ps=function(){function t(t,e){void 0===e&&(e=fs),this._object=t,this._group=e,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=ls.Linear.None,this._interpolationFunction=ds.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=hs.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return t.prototype.getId=function(){return this._id},t.prototype.isPlaying=function(){return this._isPlaying},t.prototype.isPaused=function(){return this._isPaused},t.prototype.to=function(t,e){if(void 0===e&&(e=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=t,this._propertiesAreSetUp=!1,this._duration=e,this},t.prototype.duration=function(t){return void 0===t&&(t=1e3),this._duration=t,this},t.prototype.dynamic=function(t){return void 0===t&&(t=!1),this._isDynamic=t,this},t.prototype.start=function(t,e){if(void 0===t&&(t=cs()),void 0===e&&(e=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var n in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=t,this._startTime+=this._delayTime,!this._propertiesAreSetUp||e){if(this._propertiesAreSetUp=!0,!this._isDynamic){var r={};for(var i in this._valuesEnd)r[i]=this._valuesEnd[i];this._valuesEnd=r}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,e)}return this},t.prototype.startFromCurrentValues=function(t){return this.start(t,!0)},t.prototype._setupProperties=function(t,e,n,r,i){for(var o in n){var s=t[o],a=Array.isArray(s),l=a?"array":typeof s,c=!a&&Array.isArray(n[o]);if("undefined"!==l&&"function"!==l){if(c){var u=n[o];if(0===u.length)continue;for(var d=[s],h=0,f=u.length;h<f;h+=1){var p=this._handleRelativeValue(s,u[h]);if(isNaN(p)){c=!1,console.warn("Found invalid interpolation list. Skipping.");break}d.push(p)}c&&(n[o]=d)}if("object"!==l&&!a||!s||c)("undefined"===typeof e[o]||i)&&(e[o]=s),a||(e[o]*=1),r[o]=c?n[o].slice().reverse():e[o]||0;else{e[o]=a?[]:{};var m=s;for(var g in m)e[o][g]=m[g];r[o]=a?[]:{};u=n[o];if(!this._isDynamic){var v={};for(var g in u)v[g]=u[g];n[o]=u=v}this._setupProperties(m,e[o],u,r[o],i)}}}},t.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},t.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},t.prototype.pause=function(t){return void 0===t&&(t=cs()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=t,this._group&&this._group.remove(this)),this},t.prototype.resume=function(t){return void 0===t&&(t=cs()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=t-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},t.prototype.stopChainedTweens=function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop();return this},t.prototype.group=function(t){return void 0===t&&(t=fs),this._group=t,this},t.prototype.delay=function(t){return void 0===t&&(t=0),this._delayTime=t,this},t.prototype.repeat=function(t){return void 0===t&&(t=0),this._initialRepeat=t,this._repeat=t,this},t.prototype.repeatDelay=function(t){return this._repeatDelayTime=t,this},t.prototype.yoyo=function(t){return void 0===t&&(t=!1),this._yoyo=t,this},t.prototype.easing=function(t){return void 0===t&&(t=ls.Linear.None),this._easingFunction=t,this},t.prototype.interpolation=function(t){return void 0===t&&(t=ds.Linear),this._interpolationFunction=t,this},t.prototype.chain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._chainedTweens=t,this},t.prototype.onStart=function(t){return this._onStartCallback=t,this},t.prototype.onEveryStart=function(t){return this._onEveryStartCallback=t,this},t.prototype.onUpdate=function(t){return this._onUpdateCallback=t,this},t.prototype.onRepeat=function(t){return this._onRepeatCallback=t,this},t.prototype.onComplete=function(t){return this._onCompleteCallback=t,this},t.prototype.onStop=function(t){return this._onStopCallback=t,this},t.prototype.update=function(t,e){if(void 0===t&&(t=cs()),void 0===e&&(e=!0),this._isPaused)return!0;var n,r,i=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(t>i)return!1;e&&this.start(t,!0)}if(this._goToEnd=!1,t<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),!1===this._onEveryStartCallbackFired&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0),r=(t-this._startTime)/this._duration,r=0===this._duration||r>1?1:r;var o=this._easingFunction(r);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,o),this._onUpdateCallback&&this._onUpdateCallback(this._object,r),1===r){if(this._repeat>0){for(n in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!==typeof this._valuesEnd[n]||(this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(this._valuesEnd[n])),this._yoyo&&this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,a=this._chainedTweens.length;s<a;s++)this._chainedTweens[s].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},t.prototype._updateProperties=function(t,e,n,r){for(var i in n)if(void 0!==e[i]){var o=e[i]||0,s=n[i],a=Array.isArray(t[i]),l=Array.isArray(s),c=!a&&l;c?t[i]=this._interpolationFunction(s,r):"object"===typeof s&&s?this._updateProperties(t[i],o,s,r):(s=this._handleRelativeValue(o,s),"number"===typeof s&&(t[i]=o+(s-o)*r))}},t.prototype._handleRelativeValue=function(t,e){return"string"!==typeof e?e:"+"===e.charAt(0)||"-"===e.charAt(0)?t+parseFloat(e):parseFloat(e)},t.prototype._swapEndStartRepeatValues=function(t){var e=this._valuesStartRepeat[t],n=this._valuesEnd[t];this._valuesStartRepeat[t]="string"===typeof n?this._valuesStartRepeat[t]+parseFloat(n):this._valuesEnd[t],this._valuesEnd[t]=e},t}(),ms="20.0.3",gs=hs.nextId,vs=fs,ys=vs.getAll.bind(vs),bs=vs.removeAll.bind(vs),_s=vs.add.bind(vs),ws=vs.remove.bind(vs),xs=vs.update.bind(vs),Ss={Easing:ls,Group:us,Interpolation:ds,now:cs,Sequence:hs,nextId:gs,Tween:ps,VERSION:ms,getAll:ys,removeAll:bs,add:_s,remove:ws,update:xs};function Es(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var Ms=".scene-nav-info {\n  bottom: 5px;\n  width: 100%;\n  text-align: center;\n  color: slategrey;\n  opacity: 0.7;\n  font-size: 10px;\n}\n\n.scene-tooltip {\n  top: 0;\n  color: lavender;\n  font-size: 15px;\n}\n\n.scene-nav-info, .scene-tooltip {\n  position: absolute;\n  font-family: sans-serif;\n  pointer-events: none;\n}\n\n.scene-container canvas:focus {\n  outline: none;\n}";function Ts(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function Cs(t,e,n){return e=Fs(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function As(t,e){return Rs(t)||Ts(t,e)||Ls(t,e)||Ns()}function ks(t){return Os(t)||Ps(t)||Ls(t)||Is()}function Os(t){if(Array.isArray(t))return Ds(t)}function Rs(t){if(Array.isArray(t))return t}function Ps(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function Ls(t,e){if(t){if("string"===typeof t)return Ds(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ds(t,e):void 0}}function Ds(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Is(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ns(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Us(t,e){if("object"!==typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Fs(t){var e=Us(t,"string");return"symbol"===typeof e?e:String(e)}Es(Ms);var Bs=window.THREE?window.THREE:{WebGLRenderer:r.CP7,Scene:r.xsS,PerspectiveCamera:r.cPb,Raycaster:r.iMs,SRGBColorSpace:r.KI_,TextureLoader:r.dpR,Vector2:r.FM8,Vector3:r.Pa4,Box3:r.ZzF,Color:r.Ilk,Mesh:r.Kj0,SphereGeometry:r.xo$,MeshBasicMaterial:r.vBJ,BackSide:r._Li,EventDispatcher:r.pBf,MOUSE:r.RsA,Quaternion:r._fP,Spherical:r.$V,Clock:r.SUY},Vs=Cn({props:{width:{default:window.innerWidth,onChange:function(t,e,n){isNaN(t)&&(e.width=n)}},height:{default:window.innerHeight,onChange:function(t,e,n){isNaN(t)&&(e.height=n)}},backgroundColor:{default:"#000011"},backgroundImageUrl:{},onBackgroundImageLoaded:{},showNavInfo:{default:!0},skyRadius:{default:5e4},objects:{default:[]},enablePointerInteraction:{default:!0,onChange:function(t,e){e.hoverObj=null,e.toolTipElem&&(e.toolTipElem.innerHTML="")},triggerUpdate:!1},lineHoverPrecision:{default:1,triggerUpdate:!1},hoverOrderComparator:{default:function(){return-1},triggerUpdate:!1},hoverFilter:{default:function(){return!0},triggerUpdate:!1},tooltipContent:{triggerUpdate:!1},hoverDuringDrag:{default:!1,triggerUpdate:!1},clickAfterDrag:{default:!1,triggerUpdate:!1},onHover:{default:function(){},triggerUpdate:!1},onClick:{default:function(){},triggerUpdate:!1},onRightClick:{triggerUpdate:!1}},methods:{tick:function(t){if(t.initialised){if(t.controls.update&&t.controls.update(t.clock.getDelta()),t.postProcessingComposer?t.postProcessingComposer.render():t.renderer.render(t.scene,t.camera),t.extraRenderers.forEach((function(e){return e.render(t.scene,t.camera)})),t.enablePointerInteraction){var e=null;if(t.hoverDuringDrag||!t.isPointerDragging){var n=this.intersectingObjects(t.pointerPos.x,t.pointerPos.y).filter((function(e){return t.hoverFilter(e.object)})).sort((function(e,n){return t.hoverOrderComparator(e.object,n.object)})),r=n.length?n[0]:null;e=r?r.object:null,t.intersectionPoint=r?r.point:null}e!==t.hoverObj&&(t.onHover(e,t.hoverObj),t.toolTipElem.innerHTML=e&&An(t.tooltipContent)(e)||"",t.hoverObj=e)}Ss.update()}return this},getPointerPos:function(t){var e=t.pointerPos,n=e.x,r=e.y;return{x:n,y:r}},cameraPosition:function(t,e,n,r){var i=t.camera;if(e&&t.initialised){var o=e,s=n||{x:0,y:0,z:0};if(r){var a=Object.assign({},i.position),l=d();new Ss.Tween(a).to(o,r).easing(Ss.Easing.Quadratic.Out).onUpdate(c).start(),new Ss.Tween(l).to(s,r/3).easing(Ss.Easing.Quadratic.Out).onUpdate(u).start()}else c(o),u(s);return this}return Object.assign({},i.position,{lookAt:d()});function c(t){var e=t.x,n=t.y,r=t.z;void 0!==e&&(i.position.x=e),void 0!==n&&(i.position.y=n),void 0!==r&&(i.position.z=r)}function u(e){var n=new Bs.Vector3(e.x,e.y,e.z);t.controls.target?t.controls.target=n:i.lookAt(n)}function d(){return Object.assign(new Bs.Vector3(0,0,-1e3).applyQuaternion(i.quaternion).add(i.position))}},zoomToFit:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];return this.fitToBbox(this.getBbox.apply(this,i),e,n)},fitToBbox:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,i=t.camera;if(e){var o=new Bs.Vector3(0,0,0),s=2*Math.max.apply(Math,ks(Object.entries(e).map((function(t){var e=As(t,2),n=e[0],r=e[1];return Math.max.apply(Math,ks(r.map((function(t){return Math.abs(o[n]-t)}))))})))),a=(1-2*r/t.height)*i.fov,l=s/Math.atan(a*Math.PI/180),c=l/i.aspect,u=Math.max(l,c);if(u>0){var d=o.clone().sub(i.position).normalize().multiplyScalar(-u);this.cameraPosition(d,o,n)}}return this},getBbox:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},n=new Bs.Box3(new Bs.Vector3(0,0,0),new Bs.Vector3(0,0,0)),r=t.objects.filter(e);return r.length?(r.forEach((function(t){return n.expandByObject(t)})),Object.assign.apply(Object,ks(["x","y","z"].map((function(t){return Cs({},t,[n.min[t],n.max[t]])}))))):null},getScreenCoords:function(t,e,n,r){var i=new Bs.Vector3(e,n,r);return i.project(this.camera()),{x:(i.x+1)*t.width/2,y:-(i.y-1)*t.height/2}},getSceneCoords:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=new Bs.Vector2(e/t.width*2-1,-n/t.height*2+1),o=new Bs.Raycaster;return o.setFromCamera(i,t.camera),Object.assign({},o.ray.at(r,new Bs.Vector3))},intersectingObjects:function(t,e,n){var r=new Bs.Vector2(e/t.width*2-1,-n/t.height*2+1),i=new Bs.Raycaster;return i.params.Line.threshold=t.lineHoverPrecision,i.setFromCamera(r,t.camera),i.intersectObjects(t.objects,!0)},renderer:function(t){return t.renderer},scene:function(t){return t.scene},camera:function(t){return t.camera},postProcessingComposer:function(t){return t.postProcessingComposer},controls:function(t){return t.controls},tbControls:function(t){return t.controls}},stateInit:function(){return{scene:new Bs.Scene,camera:new Bs.PerspectiveCamera,clock:new Bs.Clock}},init:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.controlType,i=void 0===r?"trackball":r,o=n.rendererConfig,s=void 0===o?{}:o,a=n.extraRenderers,l=void 0===a?[]:a,c=n.waitForLoadComplete,u=void 0===c||c;t.innerHTML="",t.appendChild(e.container=document.createElement("div")),e.container.className="scene-container",e.container.style.position="relative",e.container.appendChild(e.navInfo=document.createElement("div")),e.navInfo.className="scene-nav-info",e.navInfo.textContent={orbit:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",trackball:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",fly:"WASD: move, R|F: up | down, Q|E: roll, up|down: pitch, left|right: yaw"}[i]||"",e.navInfo.style.display=e.showNavInfo?null:"none",e.toolTipElem=document.createElement("div"),e.toolTipElem.classList.add("scene-tooltip"),e.container.appendChild(e.toolTipElem),e.pointerPos=new Bs.Vector2,e.pointerPos.x=-2,e.pointerPos.y=-2,["pointermove","pointerdown"].forEach((function(t){return e.container.addEventListener(t,(function(n){if("pointerdown"===t&&(e.isPointerPressed=!0),!e.isPointerDragging&&"pointermove"===n.type&&(n.pressure>0||e.isPointerPressed)&&("touch"!==n.pointerType||void 0===n.movementX||[n.movementX,n.movementY].some((function(t){return Math.abs(t)>1})))&&(e.isPointerDragging=!0),e.enablePointerInteraction){var r=i(e.container);e.pointerPos.x=n.pageX-r.left,e.pointerPos.y=n.pageY-r.top,e.toolTipElem.style.top="".concat(e.pointerPos.y,"px"),e.toolTipElem.style.left="".concat(e.pointerPos.x,"px"),e.toolTipElem.style.transform="translate(-".concat(e.pointerPos.x/e.width*100,"%, ").concat(e.height-e.pointerPos.y<100?"calc(-100% - 8px)":"21px",")")}function i(t){var e=t.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop;return{top:e.top+r,left:e.left+n}}}),{passive:!0})})),e.container.addEventListener("pointerup",(function(t){e.isPointerPressed=!1,e.isPointerDragging&&(e.isPointerDragging=!1,!e.clickAfterDrag)||requestAnimationFrame((function(){0===t.button&&e.onClick(e.hoverObj||null,t,e.intersectionPoint),2===t.button&&e.onRightClick&&e.onRightClick(e.hoverObj||null,t,e.intersectionPoint)}))}),{passive:!0,capture:!0}),e.container.addEventListener("contextmenu",(function(t){e.onRightClick&&t.preventDefault()})),e.renderer=new Bs.WebGLRenderer(Object.assign({antialias:!0,alpha:!0},s)),e.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio)),e.container.appendChild(e.renderer.domElement),e.extraRenderers=l,e.extraRenderers.forEach((function(t){t.domElement.style.position="absolute",t.domElement.style.top="0px",t.domElement.style.pointerEvents="none",e.container.appendChild(t.domElement)})),e.postProcessingComposer=new Mo(e.renderer),e.postProcessingComposer.addPass(new To(e.scene,e.camera)),e.controls=new{trackball:lo,orbit:fo,fly:mo}[i](e.camera,e.renderer.domElement),"fly"===i&&(e.controls.movementSpeed=300,e.controls.rollSpeed=Math.PI/6,e.controls.dragToLook=!0),"trackball"!==i&&"orbit"!==i||(e.controls.minDistance=.1,e.controls.maxDistance=e.skyRadius,e.controls.addEventListener("start",(function(){e.controlsEngaged=!0})),e.controls.addEventListener("change",(function(){e.controlsEngaged&&(e.controlsDragging=!0)})),e.controls.addEventListener("end",(function(){e.controlsEngaged=!1,e.controlsDragging=!1}))),[e.renderer,e.postProcessingComposer].concat(ks(e.extraRenderers)).forEach((function(t){return t.setSize(e.width,e.height)})),e.camera.aspect=e.width/e.height,e.camera.updateProjectionMatrix(),e.camera.position.z=1e3,e.scene.add(e.skysphere=new Bs.Mesh),e.skysphere.visible=!1,e.loadComplete=e.scene.visible=!u,window.scene=e.scene},update:function(t,e){if(t.width&&t.height&&(e.hasOwnProperty("width")||e.hasOwnProperty("height"))&&(t.container.style.width="".concat(t.width,"px"),t.container.style.height="".concat(t.height,"px"),[t.renderer,t.postProcessingComposer].concat(ks(t.extraRenderers)).forEach((function(e){return e.setSize(t.width,t.height)})),t.camera.aspect=t.width/t.height,t.camera.updateProjectionMatrix()),e.hasOwnProperty("skyRadius")&&t.skyRadius&&(t.controls.hasOwnProperty("maxDistance")&&e.skyRadius&&(t.controls.maxDistance=Math.min(t.controls.maxDistance,t.skyRadius)),t.camera.far=2.5*t.skyRadius,t.camera.updateProjectionMatrix(),t.skysphere.geometry=new Bs.SphereGeometry(t.skyRadius)),e.hasOwnProperty("backgroundColor")){var n=Zo(t.backgroundColor).alpha;void 0===n&&(n=1),t.renderer.setClearColor(new Bs.Color(as(1,t.backgroundColor)),n)}function r(){t.loadComplete=t.scene.visible=!0}e.hasOwnProperty("backgroundImageUrl")&&(t.backgroundImageUrl?(new Bs.TextureLoader).load(t.backgroundImageUrl,(function(e){e.colorSpace=Bs.SRGBColorSpace,t.skysphere.material=new Bs.MeshBasicMaterial({map:e,side:Bs.BackSide}),t.skysphere.visible=!0,t.onBackgroundImageLoaded&&setTimeout(t.onBackgroundImageLoaded),!t.loadComplete&&r()})):(t.skysphere.visible=!1,t.skysphere.material.map=null,!t.loadComplete&&r())),e.hasOwnProperty("showNavInfo")&&(t.navInfo.style.display=t.showNavInfo?null:"none"),e.hasOwnProperty("objects")&&((e.objects||[]).forEach((function(e){return t.scene.remove(e)})),t.objects.forEach((function(e){return t.scene.add(e)})))}});function zs(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var js=".graph-info-msg {\n  top: 50%;\n  width: 100%;\n  text-align: center;\n  color: lavender;\n  opacity: 0.7;\n  font-size: 22px;\n  position: absolute;\n  font-family: Sans-serif;\n}\n\n.scene-container .clickable {\n  cursor: pointer;\n}\n\n.scene-container .grabbable {\n  cursor: move;\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n\n.scene-container .grabbable:active {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n}";function Hs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ws(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Hs(Object(n),!0).forEach((function(e){Gs(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hs(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Gs(t,e,n){return e=Qs(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $s(t){return qs(t)||Ys(t)||Xs(t)||Ks()}function qs(t){if(Array.isArray(t))return Zs(t)}function Ys(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function Xs(t,e){if(t){if("string"===typeof t)return Zs(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zs(t,e):void 0}}function Zs(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ks(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Js(t,e){if("object"!==typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Qs(t){var e=Js(t,"string");return"symbol"===typeof e?e:String(e)}function ta(t,e){var n=new e;return{linkProp:function(e){return{default:n[e](),onChange:function(n,r){r[t][e](n)},triggerUpdate:!1}},linkMethod:function(e){return function(n){for(var r=n[t],i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];var a=r[e].apply(r,o);return a===r?this:a}}}}zs(js);var ea=window.THREE?window.THREE:{AmbientLight:r.Mig,DirectionalLight:r.Ox3,Vector3:r.Pa4},na=170,ra=ta("forceGraph",io),ia=Object.assign.apply(Object,$s(["jsonUrl","graphData","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeColor","nodeAutoColorBy","nodeOpacity","nodeVisibility","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","forceEngine","d3AlphaDecay","d3VelocityDecay","d3AlphaMin","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map((function(t){return Gs({},t,ra.linkProp(t))})))),oa=Object.assign.apply(Object,$s(["refresh","getGraphBbox","d3Force","d3ReheatSimulation","emitParticle"].map((function(t){return Gs({},t,ra.linkMethod(t))})))),sa=ta("renderObjs",Vs),aa=Object.assign.apply(Object,$s(["width","height","backgroundColor","showNavInfo","enablePointerInteraction"].map((function(t){return Gs({},t,sa.linkProp(t))})))),la=Object.assign.apply(Object,$s(["cameraPosition","postProcessingComposer"].map((function(t){return Gs({},t,sa.linkMethod(t))}))).concat([{graph2ScreenCoords:sa.linkMethod("getScreenCoords"),screen2GraphCoords:sa.linkMethod("getSceneCoords")}])),ca=Cn({props:Ws(Ws({nodeLabel:{default:"name",triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:1,onChange:function(t,e){return e.renderObjs.lineHoverPrecision(t)},triggerUpdate:!1},enableNavigationControls:{default:!0,onChange:function(t,e){var n=e.renderObjs.controls();n&&(n.enabled=t,t&&n.domElement&&n.domElement.dispatchEvent(new PointerEvent("pointerup")))},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1}},ia),aa),methods:Ws(Ws({zoomToFit:function(t,e,n){for(var r,i=arguments.length,o=new Array(i>3?i-3:0),s=3;s<i;s++)o[s-3]=arguments[s];return t.renderObjs.fitToBbox((r=t.forceGraph).getGraphBbox.apply(r,o),e,n),this},pauseAnimation:function(t){return null!==t.animationFrameRequestId&&(cancelAnimationFrame(t.animationFrameRequestId),t.animationFrameRequestId=null),this},resumeAnimation:function(t){return null===t.animationFrameRequestId&&this._animationCycle(),this},_animationCycle:function(t){t.enablePointerInteraction&&(this.renderer().domElement.style.cursor=null),t.forceGraph.tickFrame(),t.renderObjs.tick(),t.animationFrameRequestId=requestAnimationFrame(this._animationCycle)},scene:function(t){return t.renderObjs.scene()},camera:function(t){return t.renderObjs.camera()},renderer:function(t){return t.renderObjs.renderer()},controls:function(t){return t.renderObjs.controls()},tbControls:function(t){return t.renderObjs.tbControls()},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},oa),la),stateInit:function(t){var e=t.controlType,n=t.rendererConfig,r=t.extraRenderers;return{forceGraph:new io,renderObjs:Vs({controlType:e,rendererConfig:n,extraRenderers:r})}},init:function(t,e){t.innerHTML="",t.appendChild(e.container=document.createElement("div")),e.container.style.position="relative";var n=document.createElement("div");e.container.appendChild(n),e.renderObjs(n);var r,i=e.renderObjs.camera(),o=e.renderObjs.renderer(),s=e.renderObjs.controls();s.enabled=!!e.enableNavigationControls,e.lastSetCameraZ=i.position.z,e.container.appendChild(r=document.createElement("div")),r.className="graph-info-msg",r.textContent="",e.forceGraph.onLoading((function(){r.textContent="Loading..."})).onFinishLoading((function(){r.textContent=""})).onUpdate((function(){e.graphData=e.forceGraph.graphData(),0===i.position.x&&0===i.position.y&&i.position.z===e.lastSetCameraZ&&e.graphData.nodes.length&&(i.lookAt(e.forceGraph.position),e.lastSetCameraZ=i.position.z=Math.cbrt(e.graphData.nodes.length)*na)})).onFinishUpdate((function(){if(e._dragControls){var t=e.graphData.nodes.find((function(t){return t.__initialFixedPos&&!t.__disposeControlsAfterDrag}));t?t.__disposeControlsAfterDrag=!0:e._dragControls.dispose(),e._dragControls=void 0}if(e.enableNodeDrag&&e.enablePointerInteraction&&"d3"===e.forceEngine){var n=e._dragControls=new d(e.graphData.nodes.map((function(t){return t.__threeObj})).filter((function(t){return t})),i,o.domElement);n.addEventListener("dragstart",(function(t){s.enabled=!1,t.object.__initialPos=t.object.position.clone(),t.object.__prevPos=t.object.position.clone();var e=ua(t.object).__data;!e.__initialFixedPos&&(e.__initialFixedPos={fx:e.fx,fy:e.fy,fz:e.fz}),!e.__initialPos&&(e.__initialPos={x:e.x,y:e.y,z:e.z}),["x","y","z"].forEach((function(t){return e["f".concat(t)]=e[t]})),o.domElement.classList.add("grabbable")})),n.addEventListener("drag",(function(t){var n=ua(t.object);if(!t.object.hasOwnProperty("__graphObjType")){var r=t.object.__initialPos,i=t.object.__prevPos,o=t.object.position;n.position.add(o.clone().sub(i)),i.copy(o),o.copy(r)}var s=n.__data,a=n.position,l={x:a.x-s.x,y:a.y-s.y,z:a.z-s.z};["x","y","z"].forEach((function(t){return s["f".concat(t)]=s[t]=a[t]})),e.forceGraph.d3AlphaTarget(.3).resetCountdown(),s.__dragged=!0,e.onNodeDrag(s,l)})),n.addEventListener("dragend",(function(t){delete t.object.__initialPos,delete t.object.__prevPos;var r=ua(t.object).__data;r.__disposeControlsAfterDrag&&(n.dispose(),delete r.__disposeControlsAfterDrag);var i=r.__initialFixedPos,a=r.__initialPos,l={x:a.x-r.x,y:a.y-r.y,z:a.z-r.z};i&&(["x","y","z"].forEach((function(t){var e="f".concat(t);void 0===i[e]&&delete r[e]})),delete r.__initialFixedPos,delete r.__initialPos,r.__dragged&&(delete r.__dragged,e.onNodeDragEnd(r,l))),e.forceGraph.d3AlphaTarget(0).resetCountdown(),e.enableNavigationControls&&(s.enabled=!0,s.domElement&&s.domElement.ownerDocument&&s.domElement.ownerDocument.dispatchEvent(new PointerEvent("pointerup",{pointerType:"touch"}))),o.domElement.classList.remove("grabbable")}))}})),e.renderObjs.objects([new ea.AmbientLight(13421772),new ea.DirectionalLight(16777215,.6),e.forceGraph]).hoverOrderComparator((function(t,e){var n=ua(t);if(!n)return 1;var r=ua(e);if(!r)return-1;var i=function(t){return"node"===t.__graphObjType};return i(r)-i(n)})).tooltipContent((function(t){var n=ua(t);return n&&An(e["".concat(n.__graphObjType,"Label")])(n.__data)||""})).hoverDuringDrag(!1).onHover((function(t){var n=ua(t);if(n!==e.hoverObj){var r=e.hoverObj?e.hoverObj.__graphObjType:null,i=e.hoverObj?e.hoverObj.__data:null,s=n?n.__graphObjType:null,a=n?n.__data:null;if(r&&r!==s){var l=e["on".concat("node"===r?"Node":"Link","Hover")];l&&l(null,i)}if(s){var c=e["on".concat("node"===s?"Node":"Link","Hover")];c&&c(a,r===s?i:null)}o.domElement.classList[n&&e["on".concat("node"===s?"Node":"Link","Click")]||!n&&e.onBackgroundClick?"add":"remove"]("clickable"),e.hoverObj=n}})).clickAfterDrag(!1).onClick((function(t,n){var r=ua(t);if(r){var i=e["on".concat("node"===r.__graphObjType?"Node":"Link","Click")];i&&i(r.__data,n)}else e.onBackgroundClick&&e.onBackgroundClick(n)})).onRightClick((function(t,n){var r=ua(t);if(r){var i=e["on".concat("node"===r.__graphObjType?"Node":"Link","RightClick")];i&&i(r.__data,n)}else e.onBackgroundRightClick&&e.onBackgroundRightClick(n)})),this._animationCycle()}});function ua(t){var e=t;while(e&&!e.hasOwnProperty("__graphObjType"))e=e.parent;return e}},1088:function(t,e,n){"use strict";n.d(e,{Ui:function(){return En}});n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315),n(7658),n(1703),n(2801);var r=n(7974);const i=t=>t.toLowerCase(),o=/^\s*/g,s=t=>t.replace(o,""),a=/([A-Z])/g,l=(t,e)=>s(t.replace(a,(t=>`${e}${i(t)}`))),c=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.codePointAt(i);return r},u="undefined"!==typeof TextEncoder?new TextEncoder:null,d=t=>u.encode(t),h=u?d:c;let f="undefined"===typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});f&&1===f.decode(new Uint8Array).length&&(f=null);const p=()=>new Map,m=t=>void 0===t?null:t;class g{constructor(){this.map=new Map}setItem(t,e){this.map.set(t,e)}getItem(t){return this.map.get(t)}}let v=new g,y=!0;try{"undefined"!==typeof localStorage&&(v=localStorage,y=!1)}catch(Mn){}const b=v,_=(t,e)=>e.includes(t),w="undefined"!==typeof process&&process.release&&/node|io\.js/.test(process.release.name);let x;"undefined"!==typeof navigator&&/Mac/.test(navigator.platform);const S=()=>{if(void 0===x)if(w){x=p();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];"-"===r[0]?(null!==e&&x.set(e,""),e=r):null!==e&&(x.set(e,r),e=null)}null!==e&&x.set(e,"")}else"object"===typeof location?(x=p(),(location.search||"?").slice(1).split("&").forEach((t=>{if(0!==t.length){const[e,n]=t.split("=");x.set(`--${l(e,"-")}`,n),x.set(`-${l(e,"-")}`,n)}}))):x=p();return x},E=t=>S().has(t),M=t=>m(w?{NODE_ENV:"production",BASE_URL:"/noosld/"}[t.toUpperCase()]:b.getItem(t)),T=t=>E("--"+t)||null!==M(t);T("production");const C=w&&_({NODE_ENV:"production",BASE_URL:"/noosld/"}.FORCE_COLOR,["true","1","2"]);!E("no-colors")&&(!w||process.stdout.isTTY||C)&&(!w||E("color")||C||null!==M("COLORTERM")||(M("TERM")||"").includes("color"));const A=128,k=127,O=Math.floor,R=(t,e)=>t<e?t:e,P=(t,e)=>t>e?t:e,L=Number.MAX_SAFE_INTEGER,D=t=>new Error(t),I=D("Unexpected end of array"),N=D("Integer out of Range"),U=(t,e)=>{const n=W(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},F=t=>U(t,V(t)),B=t=>t.arr[t.pos++],V=t=>{let e=0,n=1;const r=t.arr.length;while(t.pos<r){const r=t.arr[t.pos++];if(e+=(r&k)*n,n*=128,r<A)return e;if(e>L)throw N}throw I},z=t=>{let e=V(t);if(0===e)return"";{let n=String.fromCodePoint(B(t));if(--e<100)while(e--)n+=String.fromCodePoint(B(t));else while(e>0){const r=e<1e4?e:1e4,i=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,i),e-=r}return decodeURIComponent(escape(n))}},j=t=>f.decode(F(t)),H=f?j:z,W=(t,e,n)=>new Uint8Array(t,e,n),G=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(2*n),t.cpos=0),t.cbuf[t.cpos++]=e},$=(t,e)=>{while(e>k)G(t,A|k&e),e=O(e/128);G(t,k&e)},q=new Uint8Array(3e4),Y=q.length/3,X=(t,e)=>{if(e.length<Y){const n=u.encodeInto(e,q).written||0;$(t,n);for(let e=0;e<n;e++)G(t,q[e])}else Q(t,h(e))},Z=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;$(t,r);for(let i=0;i<r;i++)G(t,n.codePointAt(i))},K=u&&u.encodeInto?X:Z,J=(t,e)=>{const n=t.cbuf.length,r=t.cpos,i=R(n-r,e.length),o=e.length-i;t.cbuf.set(e.subarray(0,i),r),t.cpos+=i,o>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(P(2*n,o)),t.cbuf.set(e.subarray(i)),t.cpos=o)},Q=(t,e)=>{$(t,e.byteLength),J(t,e)};var tt;(function(t){t[t["Token"]=0]="Token",t[t["PermissionDenied"]=1]="PermissionDenied",t[t["Authenticated"]=2]="Authenticated"})(tt||(tt={}));const et=(t,e)=>{$(t,tt.Token),K(t,e)},nt=(t,e,n)=>{switch(V(t)){case tt.PermissionDenied:e(H(t));break;case tt.Authenticated:n(H(t));break}},rt={code:1009,reason:"Message Too Big"},it={code:4401,reason:"Unauthorized"},ot={code:4403,reason:"Forbidden"},st=t=>Array.from(t.entries()).map((([t,e])=>({clientId:t,...e})));var at;function lt(t){return t||(t={}),{delay:void 0===t.delay?200:t.delay,initialDelay:void 0===t.initialDelay?0:t.initialDelay,minDelay:void 0===t.minDelay?0:t.minDelay,maxDelay:void 0===t.maxDelay?0:t.maxDelay,factor:void 0===t.factor?0:t.factor,maxAttempts:void 0===t.maxAttempts?3:t.maxAttempts,timeout:void 0===t.timeout?0:t.timeout,jitter:!0===t.jitter,handleError:void 0===t.handleError?null:t.handleError,handleTimeout:void 0===t.handleTimeout?null:t.handleTimeout,beforeAttempt:void 0===t.beforeAttempt?null:t.beforeAttempt,calculateDelay:void 0===t.calculateDelay?null:t.calculateDelay}}async function ct(t){return new Promise(((e,n)=>{setTimeout(e,t)}))}function ut(t,e){let n=e.delay;if(0===n)return 0;if(e.factor&&(n*=Math.pow(e.factor,t.attemptNum-1),0!==e.maxDelay&&(n=Math.min(n,e.maxDelay))),e.jitter){const t=Math.ceil(e.minDelay),r=Math.floor(n);n=Math.floor(Math.random()*(r-t+1))+t}return Math.round(n)}async function dt(t,e){const n=lt(e);for(const a of["delay","initialDelay","minDelay","maxDelay","maxAttempts","timeout"]){const t=n[a];if(!Number.isInteger(t)||t<0)throw new Error(`Value for ${a} must be an integer greater than or equal to 0`)}if(n.factor.constructor!==Number||n.factor<0)throw new Error("Value for factor must be a number greater than or equal to 0");if(n.delay<n.minDelay)throw new Error(`delay cannot be less than minDelay (delay: ${n.delay}, minDelay: ${n.minDelay}`);const r={attemptNum:0,attemptsRemaining:n.maxAttempts?n.maxAttempts:-1,aborted:!1,abort(){r.aborted=!0}},i=n.calculateDelay||ut;async function o(){if(n.beforeAttempt&&n.beforeAttempt(r,n),r.aborted){const t=new Error("Attempt aborted");throw t.code="ATTEMPT_ABORTED",t}const e=async t=>{if(n.handleError&&await n.handleError(t,r,n),r.aborted||0===r.attemptsRemaining)throw t;r.attemptNum++;const e=i(r,n);return e&&await ct(e),o()};return r.attemptsRemaining>0&&r.attemptsRemaining--,n.timeout?new Promise(((i,o)=>{const s=setTimeout((()=>{if(n.handleTimeout)try{i(n.handleTimeout(r,n))}catch(Mn){o(Mn)}else{const t=new Error(`Retry timeout (attemptNum: ${r.attemptNum}, timeout: ${n.timeout})`);t.code="ATTEMPT_TIMEOUT",o(t)}}),n.timeout);t(r,n).then((t=>{clearTimeout(s),i(t)})).catch((t=>{clearTimeout(s),e(t).then(i).catch(o)}))})):t(r,n).catch(e)}const s=n.calculateDelay?n.calculateDelay(r,n):n.initialDelay;return s&&await ct(s),o()}(function(t){t[t["Connecting"]=0]="Connecting",t[t["Open"]=1]="Open",t[t["Closing"]=2]="Closing",t[t["Closed"]=3]="Closed"})(at||(at={}));const ht=()=>new Map,ft=(t,e,n)=>{let r=t.get(e);return void 0===r&&t.set(e,r=n()),r},pt=()=>new Set,mt=String.fromCharCode,gt=t=>t.toLowerCase(),vt=/^\s*/g,yt=t=>t.replace(vt,""),bt=/([A-Z])/g,_t=(t,e)=>yt(t.replace(bt,(t=>`${e}${gt(t)}`))),wt=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.codePointAt(i);return r},xt="undefined"!==typeof TextEncoder?new TextEncoder:null,St=t=>xt.encode(t),Et=xt?St:wt;let Mt="undefined"===typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Mt&&1===Mt.decode(new Uint8Array).length&&(Mt=null);const Tt=t=>void 0===t?null:t;class Ct{constructor(){this.map=new Map}setItem(t,e){this.map.set(t,e)}getItem(t){return this.map.get(t)}}let At=new Ct,kt=!0;try{"undefined"!==typeof localStorage&&(At=localStorage,kt=!1)}catch(Mn){}const Ot=At,Rt=t=>kt||addEventListener("storage",t),Pt=t=>kt||removeEventListener("storage",t),Lt=Array.from,Dt=Object.keys,It=(t,e)=>{const n=[];for(const r in t)n.push(e(t[r],r));return n},Nt=t=>Dt(t).length,Ut=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),Ft=(t,e)=>t===e,Bt=(t,e)=>{if(null==t||null==e)return Ft(t,e);if(t.constructor!==e.constructor)return!1;if(t===e)return!0;switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),e=new Uint8Array(e);case Uint8Array:if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;break;case Set:if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;break;case Map:if(t.size!==e.size)return!1;for(const n of t.keys())if(!e.has(n)||!Bt(t.get(n),e.get(n)))return!1;break;case Object:if(Nt(t)!==Nt(e))return!1;for(const n in t)if(!Ut(t,n)||!Bt(t[n],e[n]))return!1;break;case Array:if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Bt(t[n],e[n]))return!1;break;default:return!1}return!0},Vt=(t,e)=>e.includes(t),zt="undefined"!==typeof process&&process.release&&/node|io\.js/.test(process.release.name),jt="undefined"!==typeof window&&"undefined"!==typeof document&&!zt;let Ht;"undefined"!==typeof navigator&&/Mac/.test(navigator.platform);const Wt=()=>{if(void 0===Ht)if(zt){Ht=ht();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];"-"===r[0]?(null!==e&&Ht.set(e,""),e=r):null!==e&&(Ht.set(e,r),e=null)}null!==e&&Ht.set(e,"")}else"object"===typeof location?(Ht=ht(),(location.search||"?").slice(1).split("&").forEach((t=>{if(0!==t.length){const[e,n]=t.split("=");Ht.set(`--${_t(e,"-")}`,n),Ht.set(`-${_t(e,"-")}`,n)}}))):Ht=ht();return Ht},Gt=t=>Wt().has(t),$t=t=>Tt(zt?{NODE_ENV:"production",BASE_URL:"/noosld/"}[t.toUpperCase()]:Ot.getItem(t)),qt=t=>Gt("--"+t)||null!==$t(t);qt("production");const Yt=zt&&Vt({NODE_ENV:"production",BASE_URL:"/noosld/"}.FORCE_COLOR,["true","1","2"]);!Gt("no-colors")&&(!zt||process.stdout.isTTY||Yt)&&(!zt||Gt("color")||Yt||null!==$t("COLORTERM")||($t("TERM")||"").includes("color"));const Xt=Math.floor,Zt=(t,e)=>t<e?t:e,Kt=(t,e)=>t>e?t:e,Jt=128,Qt=127,te=Number.MAX_SAFE_INTEGER;class ee{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const ne=()=>new ee,re=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},ie=t=>{const e=new Uint8Array(re(t));let n=0;for(let r=0;r<t.bufs.length;r++){const i=t.bufs[r];e.set(i,n),n+=i.length}return e.set(Ce(t.cbuf.buffer,0,t.cpos),n),e},oe=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(2*n),t.cpos=0),t.cbuf[t.cpos++]=e},se=(t,e)=>{while(e>Qt)oe(t,Jt|Qt&e),e=Xt(e/128);oe(t,Qt&e)},ae=new Uint8Array(3e4),le=ae.length/3,ce=(t,e)=>{if(e.length<le){const n=xt.encodeInto(e,ae).written||0;se(t,n);for(let e=0;e<n;e++)oe(t,ae[e])}else fe(t,Et(e))},ue=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;se(t,r);for(let i=0;i<r;i++)oe(t,n.codePointAt(i))},de=xt&&xt.encodeInto?ce:ue,he=(t,e)=>{const n=t.cbuf.length,r=t.cpos,i=Zt(n-r,e.length),o=e.length-i;t.cbuf.set(e.subarray(0,i),r),t.cpos+=i,o>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(Kt(2*n,o)),t.cbuf.set(e.subarray(i)),t.cpos=o)},fe=(t,e)=>{se(t,e.byteLength),he(t,e)},pe=t=>new Error(t),me=pe("Unexpected end of array"),ge=pe("Integer out of Range");class ve{constructor(t){this.arr=t,this.pos=0}}const ye=t=>new ve(t),be=(t,e)=>{const n=Ce(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},_e=t=>be(t,xe(t)),we=t=>t.arr[t.pos++],xe=t=>{let e=0,n=1;const r=t.arr.length;while(t.pos<r){const r=t.arr[t.pos++];if(e+=(r&Qt)*n,n*=128,r<Jt)return e;if(e>te)throw ge}throw me},Se=t=>{let e=xe(t);if(0===e)return"";{let n=String.fromCodePoint(we(t));if(--e<100)while(e--)n+=String.fromCodePoint(we(t));else while(e>0){const r=e<1e4?e:1e4,i=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,i),e-=r}return decodeURIComponent(escape(n))}},Ee=t=>Mt.decode(_e(t)),Me=Mt?Ee:Se,Te=t=>new Uint8Array(t),Ce=(t,e,n)=>new Uint8Array(t,e,n),Ae=t=>new Uint8Array(t),ke=t=>{let e="";for(let n=0;n<t.byteLength;n++)e+=mt(t[n]);return btoa(e)},Oe=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),Re=t=>{const e=atob(t),n=Te(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},Pe=t=>{const e=Buffer.from(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)},Le=jt?ke:Oe,De=jt?Re:Pe,Ie=new Map;class Ne{constructor(t){this.room=t,this.onmessage=null,this._onChange=e=>e.key===t&&null!==this.onmessage&&this.onmessage({data:De(e.newValue||"")}),Rt(this._onChange)}postMessage(t){Ot.setItem(this.room,Le(Ae(t)))}close(){Pt(this._onChange)}}const Ue="undefined"===typeof BroadcastChannel?Ne:BroadcastChannel,Fe=t=>ft(Ie,t,(()=>{const e=pt(),n=new Ue(t);return n.onmessage=t=>e.forEach((e=>e(t.data,"broadcastchannel"))),{bc:n,subs:e}})),Be=(t,e)=>(Fe(t).subs.add(e),e),Ve=(t,e)=>{const n=Fe(t),r=n.subs.delete(e);return r&&0===n.subs.size&&(n.bc.close(),Ie.delete(t)),r},ze=(t,e,n=null)=>{const r=Fe(t);r.bc.postMessage(e),r.subs.forEach((t=>t(e,n)))},je=Date.now;class He{constructor(){this._observers=ht()}on(t,e){ft(this._observers,t,pt).add(e)}once(t,e){const n=(...r)=>{this.off(t,n),e(...r)};this.on(t,n)}off(t,e){const n=this._observers.get(t);void 0!==n&&(n.delete(e),0===n.size&&this._observers.delete(t))}emit(t,e){return Lt((this._observers.get(t)||ht()).values()).forEach((t=>t(...e)))}destroy(){this._observers=ht()}}const We=3e4;class Ge extends He{constructor(t){super(),this.doc=t,this.clientID=t.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval((()=>{const t=je();null!==this.getLocalState()&&We/2<=t-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const e=[];this.meta.forEach(((n,r)=>{r!==this.clientID&&We<=t-n.lastUpdated&&this.states.has(r)&&e.push(r)})),e.length>0&&$e(this,e,"timeout")}),Xt(We/10)),t.on("destroy",(()=>{this.destroy()})),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(t){const e=this.clientID,n=this.meta.get(e),r=void 0===n?0:n.clock+1,i=this.states.get(e);null===t?this.states.delete(e):this.states.set(e,t),this.meta.set(e,{clock:r,lastUpdated:je()});const o=[],s=[],a=[],l=[];null===t?l.push(e):null==i?null!=t&&o.push(e):(s.push(e),Bt(i,t)||a.push(e)),(o.length>0||a.length>0||l.length>0)&&this.emit("change",[{added:o,updated:a,removed:l},"local"]),this.emit("update",[{added:o,updated:s,removed:l},"local"])}setLocalStateField(t,e){const n=this.getLocalState();null!==n&&this.setLocalState({...n,[t]:e})}getStates(){return this.states}}const $e=(t,e,n)=>{const r=[];for(let i=0;i<e.length;i++){const n=e[i];if(t.states.has(n)){if(t.states.delete(n),n===t.clientID){const e=t.meta.get(n);t.meta.set(n,{clock:e.clock+1,lastUpdated:je()})}r.push(n)}}r.length>0&&(t.emit("change",[{added:[],updated:[],removed:r},n]),t.emit("update",[{added:[],updated:[],removed:r},n]))},qe=(t,e,n=t.states)=>{const r=e.length,i=ne();se(i,r);for(let o=0;o<r;o++){const r=e[o],s=n.get(r)||null,a=t.meta.get(r).clock;se(i,r),se(i,a),de(i,JSON.stringify(s))}return ie(i)},Ye=(t,e,n)=>{const r=ye(e),i=je(),o=[],s=[],a=[],l=[],c=xe(r);for(let u=0;u<c;u++){const e=xe(r);let n=xe(r);const c=JSON.parse(Me(r)),u=t.meta.get(e),d=t.states.get(e),h=void 0===u?0:u.clock;(h<n||h===n&&null===c&&t.states.has(e))&&(null===c?e===t.clientID&&null!=t.getLocalState()?n++:t.states.delete(e):t.states.set(e,c),t.meta.set(e,{clock:n,lastUpdated:i}),void 0===u&&null!==c?o.push(e):void 0!==u&&null===c?l.push(e):null!==c&&(Bt(c,d)||a.push(e),s.push(e)))}(o.length>0||a.length>0||l.length>0)&&t.emit("change",[{added:o,updated:a,removed:l},n]),(o.length>0||s.length>0||l.length>0)&&t.emit("update",[{added:o,updated:s,removed:l},n])},Xe=()=>{let t=!0;return(e,n)=>{if(t){t=!1;try{e()}finally{t=!0}}else void 0!==n&&n()}};class Ze{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach((t=>t.apply(this,e))),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter((t=>t!==e)):delete this.callbacks[t]),this}removeAllListeners(){this.callbacks={}}}class Ke{constructor(t){this.data=t,this.encoder=ne(),this.decoder=ye(new Uint8Array(this.data))}readVarUint(){return xe(this.decoder)}readVarString(){return Me(this.decoder)}readVarUint8Array(){return _e(this.decoder)}writeVarUint(t){return se(this.encoder,t)}writeVarString(t){return de(this.encoder,t)}writeVarUint8Array(t){return fe(this.encoder,t)}length(){return re(this.encoder)}}const Je=0,Qe=1,tn=2,en=(t,e)=>{se(t,Je);const n=r.gJ(e);fe(t,n)},nn=(t,e,n)=>{se(t,Qe),fe(t,r.D$(e,n))},rn=(t,e,n)=>nn(e,n,_e(t)),on=(t,e,n)=>{try{r.NG(e,_e(t),n)}catch(i){console.error("Caught error while handling a Yjs update",i)}},sn=(t,e)=>{se(t,tn),fe(t,e)},an=on,ln=(t,e,n,r)=>{const i=xe(t);switch(i){case Je:rn(t,e,n);break;case Qe:on(t,n,r);break;case tn:an(t,n,r);break;default:throw new Error("Unknown message type")}return i};var cn,un;(function(t){t[t["Sync"]=0]="Sync",t[t["Awareness"]=1]="Awareness",t[t["Auth"]=2]="Auth",t[t["QueryAwareness"]=3]="QueryAwareness",t[t["Stateless"]=5]="Stateless",t[t["CLOSE"]=7]="CLOSE"})(cn||(cn={})),function(t){t["Connecting"]="connecting",t["Connected"]="connected",t["Disconnected"]="disconnected"}(un||(un={}));class dn{constructor(){this.encoder=ne()}get(t){return t.encoder}toUint8Array(){return ie(this.encoder)}}class hn{constructor(t){this.broadcasted=!1,this.message=t}setBroadcasted(t){return this.broadcasted=t,this}apply(t,e=!0){const{message:n}=this,r=n.readVarUint(),i=n.length();switch(r){case cn.Sync:this.applySyncMessage(t,e);break;case cn.Awareness:this.applyAwarenessMessage(t);break;case cn.Auth:this.applyAuthMessage(t);break;case cn.QueryAwareness:this.applyQueryAwarenessMessage(t);break;case cn.Stateless:t.receiveStateless(Me(n.decoder));break;default:throw new Error(`Can’t apply message of unknown type: ${r}`)}n.length()>i+1&&(this.broadcasted?t.broadcast(dn,{encoder:n.encoder}):t.send(dn,{encoder:n.encoder}))}applySyncMessage(t,e){const{message:n}=this;n.writeVarUint(cn.Sync);const r=ln(n.decoder,n.encoder,t.document,t);e&&r===Qe&&(t.synced=!0),r!==tn&&r!==Qe||t.unsyncedChanges>0&&t.updateUnsyncedChanges(-1)}applyAwarenessMessage(t){const{message:e}=this;Ye(t.awareness,e.readVarUint8Array(),t)}applyAuthMessage(t){const{message:e}=this;nt(e.decoder,t.permissionDeniedHandler.bind(t),t.authenticatedHandler.bind(t))}applyQueryAwarenessMessage(t){const{message:e}=this;e.writeVarUint(cn.Awareness),e.writeVarUint8Array(qe(t.awareness,Array.from(t.awareness.getStates().keys())))}}class fn{constructor(t,e={}){this.message=new t,this.encoder=this.message.get(e)}create(){return ie(this.encoder)}send(t){null===t||void 0===t||t.send(this.create())}broadcast(t){ze(t,this.create())}}class pn extends dn{constructor(){super(...arguments),this.type=cn.Sync,this.description="First sync step"}get(t){if("undefined"===typeof t.document)throw new Error("The sync step one message requires document as an argument");return de(this.encoder,t.documentName),se(this.encoder,this.type),en(this.encoder,t.document),this.encoder}}class mn extends dn{constructor(){super(...arguments),this.type=cn.Sync,this.description="Second sync step"}get(t){if("undefined"===typeof t.document)throw new Error("The sync step two message requires document as an argument");return de(this.encoder,t.documentName),se(this.encoder,this.type),nn(this.encoder,t.document),this.encoder}}class gn extends dn{constructor(){super(...arguments),this.type=cn.QueryAwareness,this.description="Queries awareness states"}get(t){return console.log("queryAwareness: writing string docName",t.documentName),console.log(this.encoder.cpos),de(this.encoder,t.documentName),se(this.encoder,this.type),this.encoder}}class vn extends dn{constructor(){super(...arguments),this.type=cn.Auth,this.description="Authentication"}get(t){if("undefined"===typeof t.token)throw new Error("The authentication message requires `token` as an argument.");return de(this.encoder,t.documentName),se(this.encoder,this.type),et(this.encoder,t.token),this.encoder}}class yn extends dn{constructor(){super(...arguments),this.type=cn.Awareness,this.description="Awareness states update"}get(t){if("undefined"===typeof t.awareness)throw new Error("The awareness message requires awareness as an argument");if("undefined"===typeof t.clients)throw new Error("The awareness message requires clients as an argument");let e;return de(this.encoder,t.documentName),se(this.encoder,this.type),e=void 0===t.states?qe(t.awareness,t.clients):qe(t.awareness,t.clients,t.states),fe(this.encoder,e),this.encoder}}class bn extends dn{constructor(){super(...arguments),this.type=cn.Sync,this.description="A document update"}get(t){return de(this.encoder,t.documentName),se(this.encoder,this.type),sn(this.encoder,t.update),this.encoder}}const _n=t=>It(t,((t,e)=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)).join("&");class wn extends Ze{constructor(t){super(),this.configuration={url:"",document:void 0,awareness:void 0,WebSocketPolyfill:void 0,parameters:{},connect:!0,broadcast:!0,forceSyncInterval:!1,messageReconnectTimeout:3e4,delay:1e3,initialDelay:0,factor:2,maxAttempts:0,minDelay:1e3,maxDelay:3e4,jitter:!0,timeout:0,onOpen:()=>null,onConnect:()=>null,onMessage:()=>null,onOutgoingMessage:()=>null,onStatus:()=>null,onDisconnect:()=>null,onClose:()=>null,onDestroy:()=>null,onAwarenessUpdate:()=>null,onAwarenessChange:()=>null,quiet:!1},this.subscribedToBroadcastChannel=!1,this.webSocket=null,this.shouldConnect=!0,this.status=un.Disconnected,this.lastMessageReceived=0,this.mux=Xe(),this.intervals={forceSync:null,connectionChecker:null},this.connectionAttempt=null,this.receivedOnOpenPayload=void 0,this.receivedOnStatusPayload=void 0,this.boundConnect=this.connect.bind(this),this.setConfiguration(t),this.configuration.WebSocketPolyfill=t.WebSocketPolyfill?t.WebSocketPolyfill:WebSocket,this.on("open",this.configuration.onOpen),this.on("open",this.onOpen.bind(this)),this.on("connect",this.configuration.onConnect),this.on("message",this.configuration.onMessage),this.on("outgoingMessage",this.configuration.onOutgoingMessage),this.on("status",this.configuration.onStatus),this.on("status",this.onStatus.bind(this)),this.on("disconnect",this.configuration.onDisconnect),this.on("close",this.configuration.onClose),this.on("destroy",this.configuration.onDestroy),this.on("awarenessUpdate",this.configuration.onAwarenessUpdate),this.on("awarenessChange",this.configuration.onAwarenessChange),this.on("close",this.onClose.bind(this)),this.on("message",this.onMessage.bind(this)),this.registerEventListeners(),this.intervals.connectionChecker=setInterval(this.checkConnection.bind(this),this.configuration.messageReconnectTimeout/10),"undefined"!==typeof t.connect&&(this.shouldConnect=t.connect),this.shouldConnect&&this.connect()}async onOpen(t){this.receivedOnOpenPayload=t}async onStatus(t){this.receivedOnStatusPayload=t}attach(t){this.receivedOnOpenPayload&&t.onOpen(this.receivedOnOpenPayload),this.receivedOnStatusPayload&&t.onStatus(this.receivedOnStatusPayload)}detach(t){}setConfiguration(t={}){this.configuration={...this.configuration,...t}}async connect(){if(this.status===un.Connected)return;this.cancelWebsocketRetry&&(this.cancelWebsocketRetry(),this.cancelWebsocketRetry=void 0),this.shouldConnect=!0;const t=()=>{let t=!1;const e=dt(this.createWebSocketConnection.bind(this),{delay:this.configuration.delay,initialDelay:this.configuration.initialDelay,factor:this.configuration.factor,maxAttempts:this.configuration.maxAttempts,minDelay:this.configuration.minDelay,maxDelay:this.configuration.maxDelay,jitter:this.configuration.jitter,timeout:this.configuration.timeout,beforeAttempt:e=>{this.shouldConnect&&!t||e.abort()}}).catch((t=>{if(t&&"ATTEMPT_ABORTED"!==t.code)throw t}));return{retryPromise:e,cancelFunc:()=>{t=!0}}},{retryPromise:e,cancelFunc:n}=t();return this.cancelWebsocketRetry=n,e}createWebSocketConnection(){return new Promise(((t,e)=>{this.webSocket&&(this.webSocket.close(),this.webSocket=null);const n=new this.configuration.WebSocketPolyfill(this.url);n.binaryType="arraybuffer",n.onmessage=t=>this.emit("message",t),n.onclose=t=>this.emit("close",{event:t}),n.onopen=t=>this.emit("open",t),n.onerror=t=>{e(t)},this.webSocket=n,this.status=un.Connecting,this.emit("status",{status:un.Connecting}),this.connectionAttempt={resolve:t,reject:e}}))}onMessage(t){this.resolveConnectionAttempt()}resolveConnectionAttempt(){this.connectionAttempt&&(this.connectionAttempt.resolve(),this.connectionAttempt=null,this.status=un.Connected,this.emit("status",{status:un.Connected}),this.emit("connect"))}stopConnectionAttempt(){this.connectionAttempt=null}rejectConnectionAttempt(){var t;null===(t=this.connectionAttempt)||void 0===t||t.reject(),this.connectionAttempt=null}checkConnection(){var t;this.status===un.Connected&&this.lastMessageReceived&&(this.configuration.messageReconnectTimeout>=je()-this.lastMessageReceived||null===(t=this.webSocket)||void 0===t||t.close())}registerEventListeners(){"undefined"!==typeof window&&window.addEventListener("online",this.boundConnect)}get serverUrl(){while("/"===this.configuration.url[this.configuration.url.length-1])return this.configuration.url.slice(0,this.configuration.url.length-1);return this.configuration.url}get url(){const t=_n(this.configuration.parameters);return`${this.serverUrl}${0===t.length?"":`?${t}`}`}disconnect(){if(this.shouldConnect=!1,null!==this.webSocket)try{this.webSocket.close()}catch{}}send(t){var e;(null===(e=this.webSocket)||void 0===e?void 0:e.readyState)===at.Open&&this.webSocket.send(t)}onClose({event:t}){this.webSocket=null,this.status===un.Connected&&(this.status=un.Disconnected,this.emit("status",{status:un.Disconnected}),this.emit("disconnect",{event:t})),t.code===it.code&&(t.reason===it.reason?console.warn("[HocuspocusProvider] An authentication token is required, but you didn’t send one. Try adding a `token` to your HocuspocusProvider configuration. Won’t try again."):console.warn(`[HocuspocusProvider] Connection closed with status Unauthorized: ${t.reason}`),this.shouldConnect=!1),t.code!==ot.code||this.configuration.quiet?(t.code===rt.code&&(console.warn(`[HocuspocusProvider] Connection closed with status MessageTooBig: ${t.reason}`),this.shouldConnect=!1),this.connectionAttempt?this.rejectConnectionAttempt():this.shouldConnect&&this.connect(),this.shouldConnect||this.status!==un.Disconnected&&(this.status=un.Disconnected,this.emit("status",{status:un.Disconnected}),this.emit("disconnect",{event:t}))):console.warn("[HocuspocusProvider] The provided authentication token isn’t allowed to connect to this server. Will try again.")}destroy(){this.emit("destroy"),this.intervals.forceSync&&clearInterval(this.intervals.forceSync),clearInterval(this.intervals.connectionChecker),this.stopConnectionAttempt(),this.disconnect(),this.removeAllListeners(),"undefined"!==typeof window&&window.removeEventListener("online",this.boundConnect)}}class xn extends dn{constructor(){super(...arguments),this.type=cn.Stateless,this.description="A stateless message"}get(t){var e;return de(this.encoder,t.documentName),se(this.encoder,this.type),de(this.encoder,null!==(e=t.payload)&&void 0!==e?e:""),this.encoder}}class Sn extends dn{constructor(){super(...arguments),this.type=cn.CLOSE,this.description="Ask the server to close the connection"}get(t){return de(this.encoder,t.documentName),se(this.encoder,this.type),this.encoder}}class En extends Ze{constructor(t){super(),this.configuration={name:"",document:void 0,awareness:void 0,token:null,parameters:{},broadcast:!0,forceSyncInterval:!1,onAuthenticated:()=>null,onAuthenticationFailed:()=>null,onOpen:()=>null,onConnect:()=>null,onMessage:()=>null,onOutgoingMessage:()=>null,onStatus:()=>null,onSynced:()=>null,onDisconnect:()=>null,onClose:()=>null,onDestroy:()=>null,onAwarenessUpdate:()=>null,onAwarenessChange:()=>null,onStateless:()=>null,quiet:!1},this.subscribedToBroadcastChannel=!1,this.isSynced=!1,this.unsyncedChanges=0,this.status=un.Disconnected,this.isAuthenticated=!1,this.authorizedScope=void 0,this.mux=Xe(),this.intervals={forceSync:null},this.isConnected=!0,this.boundBeforeUnload=this.beforeUnload.bind(this),this.boundBroadcastChannelSubscriber=this.broadcastChannelSubscriber.bind(this),this.setConfiguration(t),this.configuration.document=t.document?t.document:new r.QW,this.configuration.awareness=t.awareness?t.awareness:new Ge(this.document),this.on("open",this.configuration.onOpen),this.on("message",this.configuration.onMessage),this.on("outgoingMessage",this.configuration.onOutgoingMessage),this.on("synced",this.configuration.onSynced),this.on("destroy",this.configuration.onDestroy),this.on("awarenessUpdate",this.configuration.onAwarenessUpdate),this.on("awarenessChange",this.configuration.onAwarenessChange),this.on("stateless",this.configuration.onStateless),this.on("authenticated",this.configuration.onAuthenticated),this.on("authenticationFailed",this.configuration.onAuthenticationFailed),this.configuration.websocketProvider.on("connect",this.configuration.onConnect),this.configuration.websocketProvider.on("connect",(t=>this.emit("connect",t))),this.configuration.websocketProvider.on("open",this.onOpen.bind(this)),this.configuration.websocketProvider.on("open",(t=>this.emit("open",t))),this.configuration.websocketProvider.on("message",this.onMessage.bind(this)),this.configuration.websocketProvider.on("close",this.onClose.bind(this)),this.configuration.websocketProvider.on("close",this.configuration.onClose),this.configuration.websocketProvider.on("close",(t=>this.emit("close",t))),this.configuration.websocketProvider.on("status",this.onStatus.bind(this)),this.configuration.websocketProvider.on("disconnect",this.configuration.onDisconnect),this.configuration.websocketProvider.on("disconnect",(t=>this.emit("disconnect",t))),this.configuration.websocketProvider.on("destroy",this.configuration.onDestroy),this.configuration.websocketProvider.on("destroy",(t=>this.emit("destroy",t))),this.awareness.on("update",(()=>{this.emit("awarenessUpdate",{states:st(this.awareness.getStates())})})),this.awareness.on("change",(()=>{this.emit("awarenessChange",{states:st(this.awareness.getStates())})})),this.document.on("update",this.documentUpdateHandler.bind(this)),this.awareness.on("update",this.awarenessUpdateHandler.bind(this)),this.registerEventListeners(),this.configuration.forceSyncInterval&&(this.intervals.forceSync=setInterval(this.forceSync.bind(this),this.configuration.forceSyncInterval)),this.configuration.websocketProvider.attach(this)}onStatus({status:t}){this.status=t,this.configuration.onStatus({status:t}),this.emit("status",{status:t})}setConfiguration(t={}){if(!t.websocketProvider&&t.url){const e=t;this.configuration.websocketProvider=new wn({url:e.url,parameters:e.parameters})}this.configuration={...this.configuration,...t}}get document(){return this.configuration.document}get awareness(){return this.configuration.awareness}get hasUnsyncedChanges(){return this.unsyncedChanges>0}updateUnsyncedChanges(t=0){this.unsyncedChanges+=t,this.emit("unsyncedChanges",this.unsyncedChanges)}forceSync(){this.send(pn,{document:this.document,documentName:this.configuration.name})}beforeUnload(){$e(this.awareness,[this.document.clientID],"window unload")}registerEventListeners(){"undefined"!==typeof window&&window.addEventListener("beforeunload",this.boundBeforeUnload)}sendStateless(t){this.send(xn,{documentName:this.configuration.name,payload:t})}documentUpdateHandler(t,e){e!==this&&(this.updateUnsyncedChanges(1),this.send(bn,{update:t,documentName:this.configuration.name},!0))}awarenessUpdateHandler({added:t,updated:e,removed:n},r){const i=t.concat(e).concat(n);this.send(yn,{awareness:this.awareness,clients:i,documentName:this.configuration.name},!0)}get synced(){return this.isSynced}set synced(t){this.isSynced!==t&&(t&&this.unsyncedChanges>0&&this.updateUnsyncedChanges(-1*this.unsyncedChanges),this.isSynced=t,this.emit("synced",{state:t}),this.emit("sync",{state:t}))}receiveStateless(t){this.emit("stateless",{payload:t})}get isAuthenticationRequired(){return!!this.configuration.token&&!this.isAuthenticated}async connect(){return this.configuration.websocketProvider.connect()}disconnect(){this.disconnectBroadcastChannel(),this.configuration.websocketProvider.detach(this)}async onOpen(t){this.isAuthenticated=!1,this.emit("open",{event:t}),this.isAuthenticationRequired&&this.send(vn,{token:await this.getToken(),documentName:this.configuration.name}),this.startSync()}async getToken(){if("function"===typeof this.configuration.token){const t=await this.configuration.token();return t}return this.configuration.token}startSync(){this.send(pn,{document:this.document,documentName:this.configuration.name}),null!==this.awareness.getLocalState()&&this.send(yn,{awareness:this.awareness,clients:[this.document.clientID],documentName:this.configuration.name})}send(t,e,n=!1){if(!this.isConnected)return;n&&this.mux((()=>{this.broadcast(t,e)}));const r=new fn(t,e);this.emit("outgoingMessage",{message:r.message}),r.send(this.configuration.websocketProvider)}onMessage(t){const e=new Ke(t.data),n=e.readVarString();n===this.configuration.name&&(e.writeVarString(n),this.emit("message",{event:t,message:new Ke(t.data)}),new hn(e).apply(this))}onClose(t){this.isAuthenticated=!1,this.synced=!1,$e(this.awareness,Array.from(this.awareness.getStates().keys()).filter((t=>t!==this.document.clientID)),this)}destroy(){this.emit("destroy"),this.intervals.forceSync&&clearInterval(this.intervals.forceSync),$e(this.awareness,[this.document.clientID],"provider destroy"),this.disconnect(),this.awareness.off("update",this.awarenessUpdateHandler),this.document.off("update",this.documentUpdateHandler),this.removeAllListeners(),this.send(Sn,{documentName:this.configuration.name}),this.isConnected=!1,"undefined"!==typeof window&&window.removeEventListener("beforeunload",this.boundBeforeUnload)}permissionDeniedHandler(t){this.emit("authenticationFailed",{reason:t}),this.isAuthenticated=!1,this.disconnect(),this.status=un.Disconnected}authenticatedHandler(t){this.isAuthenticated=!0,this.authorizedScope=t,this.emit("authenticated"),this.startSync()}get broadcastChannel(){return`${this.configuration.name}`}broadcastChannelSubscriber(t){this.mux((()=>{const e=new Ke(t),n=e.readVarString();e.writeVarString(n),new hn(e).setBroadcasted(!0).apply(this,!1)}))}subscribeToBroadcastChannel(){this.subscribedToBroadcastChannel||(Be(this.broadcastChannel,this.boundBroadcastChannelSubscriber),this.subscribedToBroadcastChannel=!0),this.mux((()=>{this.broadcast(pn,{document:this.document}),this.broadcast(mn,{document:this.document}),this.broadcast(gn,{document:this.document}),this.broadcast(yn,{awareness:this.awareness,clients:[this.document.clientID],document:this.document})}))}disconnectBroadcastChannel(){this.send(yn,{awareness:this.awareness,clients:[this.document.clientID],states:new Map,documentName:this.configuration.name},!0),this.subscribedToBroadcastChannel&&(Ve(this.broadcastChannel,this.boundBroadcastChannelSubscriber),this.subscribedToBroadcastChannel=!1)}broadcast(t,e){this.configuration.broadcast&&this.subscribedToBroadcastChannel&&new fn(t,e).broadcast(this.broadcastChannel)}setAwarenessField(t,e){this.awareness.setLocalStateField(t,e)}}},2179:function(t,e,n){"use strict";n.d(e,{qF:function(){return Ct},QB:function(){return q},ms:function(){return Mt},QT:function(){return Et},wI:function(){return At}});var r={};n.r(r),n.d(r,{$reactive:function(){return A},$reactiveproxy:function(){return k},$skipreactive:function(){return C},Atom:function(){return B},Observer:function(){return d},Reaction:function(){return f},autorun:function(){return U},autorunAsync:function(){return F},createAtom:function(){return V},hasRunningReaction:function(){return p},isActionRunning:function(){return c},isReactive:function(){return O},isTrackingDisabled:function(){return y},markRaw:function(){return R},reaction:function(){return g},reactive:function(){return D},runInAction:function(){return u},runningReaction:function(){return m},untracked:function(){return b},untrackedCB:function(){return _}});n(1703),n(7658);function i(){return i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i.apply(this,arguments)}function o(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,s(t,e)}function s(t,e){return s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},s(t,e)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var l=0;function c(){return l>0}function u(t){l++;try{return t()}finally{l--,0===l&&x()}}var d=function(){function t(t){this.trigger=t,this.observing=new Map}var e=t.prototype;return e.registerConnection=function(t){var e=this.observing.get(t.observable);e||(e={byKey:new Set,iterate:!1},this.observing.set(t.observable,e)),"iterate"===t.type?e.iterate=!0:e.byKey.add(t.key)},e.removeObservers=function(){var t=this;this.observing.forEach((function(e,n){e.iterate&&n[A].connections.iterate.delete(t),e.byKey.forEach((function(e){n[A].connections.byKey.get(e).delete(t)}))})),this.observing.clear()},t}(),h=[],f=function(t){function e(e,n,r){var i;if(i=t.call(this,(function(){return i._trigger()}))||this,i.func=e,i.options=n,i.effect=r,i.isInitial=!0,i.reaction=function(){h.push(a(i));try{i.func()}finally{h.pop()}!i.effect||i.isInitial&&!i.options.fireImmediately||i.effect(),i.isInitial=!1},!r&&!i.options.fireImmediately)throw new Error("if no effect function passed, should always fireImmediately");return i.reaction(),i}o(e,t);var n=e.prototype;return n._trigger=function(){if(h.includes(this))throw new Error("already running reaction");this.removeObservers(),this.reaction()},e}(d);function p(){return!!h.length}function m(){return h.length?h[h.length-1]:void 0}function g(t,e,n){var r=i({name:"unnamed",fireImmediately:!0},n),o=new f(t,r,e);return o}var v=!1;function y(){return v}function b(t){v=!0;try{t()}finally{v=!1}}function _(t){return function(){return b(t)}}var w=[];function x(){var t=[].concat(w);w=[],S(t)}function S(t){var e=new Set;t.forEach((function(t){var n;"add"!==t.type&&"delete"!==t.type||t.observable[A].connections.iterate.forEach((function(t){e.add(t)})),null==(n=t.observable[A].connections.byKey.get(t.key))||n.forEach((function(t){e.add(t)}))})),e.forEach((function(t){t.trigger()}))}function E(t){c()?w.push(t):S([t])}function M(t,e){if("iterate"===t.type)t.observable[A].connections.iterate.add(e);else{var n=t.observable[A].connections.byKey.get(t.key);n||(n=new Set,t.observable[A].connections.byKey.set(t.key,n)),n.add(e)}}function T(t,e){if(!y()){var n=m();n&&(M(t,n),n.registerConnection(t)),e&&(M(t,e),e.registerConnection(t))}}var C=Symbol("$skipreactive"),A=Symbol("$reactive"),k=Symbol("$reactiveproxy");function O(t,e){return!(!t||!t[k]||t[k].implicitObserver!==e)}function R(t){return t[C]=!0,t}function P(t){return!(!t||O(t)||!t[A])}function L(t,e,n){if(void 0===n&&(n=!1),t[C])return t;if(O(t,e))return t;var r=I(t,n);if(!e)return r;var i=r[A].proxiesWithImplicitObserver.get(e);if(!i){var o={implicitObserver:e};Object.setPrototypeOf(o,N),i=new Proxy(r[A].raw,o),r[A].proxiesWithImplicitObserver.set(e,i)}return i}var D=L;function I(t,e){if(void 0===e&&(e=!1),O(t))return t;if(P(t))return t[A].proxy;if(t[A]||t[k])throw new Error("unexpected");var n={connections:{iterate:new Set,byKey:new Map},proxy:{},raw:t,proxiesWithImplicitObserver:new Map,shallow:e};Object.defineProperty(t,A,{enumerable:!1,writable:!0,configurable:!0,value:n});var r=new Proxy(t,N);return n.proxy=r,r}var N={has:function(t,e){var n=Reflect.has(t,e);return"symbol"===typeof e||T({observable:t,key:e,type:"has"},this.implicitObserver),n},get:function(t,e,n){if(e===k)return{implicitObserver:this.implicitObserver};var r=Reflect.get(t,e,n);if("symbol"===typeof e)return r;if("length"===e&&Array.isArray(t)?T({observable:t,type:"iterate"},this.implicitObserver):T({observable:t,key:e,type:"get"},this.implicitObserver),P(r))return L(r,this.implicitObserver);if(t[A].shallow)return r;if("object"===typeof r&&null!==r&&!O(r,this.implicitObserver)&&!Object.isFrozen(r)){var i=Reflect.getOwnPropertyDescriptor(t,e);if((!i||!1!==i.writable||!1!==i.configurable)&&(p()||this.implicitObserver))return L(r,this.implicitObserver)}return r},ownKeys:function(t){return T({observable:t,type:"iterate"},this.implicitObserver),Reflect.ownKeys(t)},set:function(t,e,n,r){return u((function(){if("symbol"===typeof e)return Reflect.set(t,e,n,r);var i=Object.hasOwnProperty.call(t,e),o=Reflect.get(t,e,r),s=Reflect.set(t,e,n,r);if(i){if(n!==o)if("length"===e&&Array.isArray(t))if(o<n);else for(var a=n+1;a<=o;a++)E({observable:t,key:""+(a-1),oldValue:void 0,type:"delete"});else E({observable:t,key:e,value:n,oldValue:o,type:"update"})}else E({observable:t,key:e,value:n,type:"add"});return s}))},deleteProperty:function(t,e){return u((function(){if("symbol"===typeof e)return Reflect.deleteProperty(t,e);var n=Object.hasOwnProperty.call(t,e),r=Reflect.get(t,e),i=Reflect.deleteProperty(t,e);return n&&E({observable:t,key:e,oldValue:r,type:"delete"}),i}))},preventExtensions:function(t){throw new Error("Dynamic observable objects cannot be frozen")}};function U(t,e){var n=i({name:"unnamed",fireImmediately:!0},e),r=new f(t,n);return r}function F(t,e,n){var r=i({name:"unnamed",fireImmediately:!0},n),o=new f((function(){t(e)}),r);return e=D(e,o),e.bla=4,r.fireImmediately&&o.trigger(),o}var B=function(){function t(){this._observable=D({_key:1})}var e=t.prototype;return e.reportObserved=function(t){return D(this._observable,t)._key},e.reportChanged=function(){this._observable._key++},t}();function V(t,e,n){return new B}var z=n(7974);let j,H,W=t=>t();function G(t,e){return H?H(t,e):void W(t)}function $(t,e,n){if(j)return j.apply(null,arguments);throw new Error("observable implementation not provided. Call enableReactiveBindings, enableVueBindings or enableMobxBindings.")}function q(t){j=function(e,n){let r=0;const i=t.reactive({data:r}),o={reportObserved(){return i.data},reportChanged(){i.data=++r}};return n&&n(),o},H=void 0}function Y(t){j=function(e,n,r){const i=t.createAtom(e);return n&&n(),i},H=(e,n)=>t.reaction(e,n,{fireImmediately:!1})}const X=new WeakSet;function Z(t){if(X.has(t))return t;let e;X.add(t);const n=new Map;function r(){if(!e){const n=t=>{(t.changes.added.size||t.changes.deleted.size||t.changes.keys.size||t.changes.delta.length)&&e.reportChanged()};e=$("map",(()=>{t.observe(n)}),(()=>{t.unobserve(n)}))}e.reportObserved(t._implicitObserver)}function i(e){let r=n.get(e);if(!r){const i=t=>{r.reportChanged()};r=$(e+"",(()=>{t.observe(i)}),(()=>{t.unobserve(i)})),n.set(e,r)}r.reportObserved(t._implicitObserver)}const o=t.get;function s(e){const n=t[e];t[e]=function(){r();const t=Reflect.apply(n,this,arguments);return t}}function a(e){let n=t,i=Object.getOwnPropertyDescriptor(n,e);if(i||(n=Object.getPrototypeOf(n),i=Object.getOwnPropertyDescriptor(n,e)),i||(n=Object.getPrototypeOf(n),i=Object.getOwnPropertyDescriptor(n,e)),!i)throw new Error("property not found");const o=i.get;i.get=function(){this._disableTracking||r();const t=Reflect.apply(o,this,arguments);return t},Object.defineProperty(t,e,i)}function l(e,n){let r=t,i=Object.getOwnPropertyDescriptor(r,e);if(i||(r=Object.getPrototypeOf(r),i=Object.getOwnPropertyDescriptor(r,e)),i||(r=Object.getPrototypeOf(r),i=Object.getOwnPropertyDescriptor(r,e)),!i)throw new Error("property not found");Object.defineProperty(t,n,i)}t.get=function(t){if("number"!==typeof t)throw new Error("unexpected");i(t);const e=Reflect.apply(o,this,arguments);return e},s("forEach"),s("toJSON"),s("toArray"),s("slice"),s("map"),l("length","lengthUntracked"),a("length");const c=t.push;t.push=function(t){this._disableTracking=!0;const e=c.call(this,t);return this._disableTracking=!1,e};const u=t.slice;return t.slice=function(t,e){this._disableTracking=!0;const n=u.call(this,t,e);return this._disableTracking=!1,n},t}const K=new WeakSet;function J(t){if(K.has(t))return t;let e;function n(){if(!e){let n=Array.from(t.share.keys());const r=r=>{const i=Array.from(t.share.keys());JSON.stringify(n)!==JSON.stringify(i)&&(n=i,e.reportChanged())};e=$("map",(()=>{t.on("beforeObserverCalls",r)}),(()=>{t.off("beforeObserverCalls",r)}))}e.reportObserved(t._implicitObserver)}K.add(t);const r=t.get;function i(r){const i=t[r];let o;t[r]=function(){let r,s=arguments;return n(),o&&o.removeObservers(),o=G((()=>(r=Reflect.apply(i,t,s),r)),(()=>e.reportChanged())),r}}return t.get=function(t){if("string"!==typeof t)throw new Error("unexpected");const e=Reflect.apply(r,this,arguments);return ot(e),e},i("toJSON"),Object.defineProperty(t,"keys",{get:()=>(n(),Object.keys(t.share))}),t}const Q=new WeakSet;function tt(t){if(Q.has(t))return t;let e;Q.add(t);const n=new Map;function r(){if(!e){const n=t=>{(t.changes.added.size||t.changes.deleted.size||t.changes.keys.size||t.changes.delta.length)&&e.reportChanged()};e=$("map",(()=>{t.observe(n)}),(()=>{t.unobserve(n)}))}e.reportObserved(t._implicitObserver)}function i(e){let r=n.get(e);if(!r){const i=t=>{t.keysChanged.has(e)&&(t.changes.added.size||t.changes.deleted.size||t.changes.keys.size||t.changes.delta.length)&&r.reportChanged()};r=$(e,(()=>{t.observe(i)}),(()=>{t.unobserve(i)})),n.set(e,r)}r.reportObserved(t._implicitObserver)}const o=t.get;function s(e){const n=t[e];t[e]=function(){r();const t=Reflect.apply(n,this,arguments);return t}}return t.get=function(t){if("string"!==typeof t)throw new Error("unexpected");i(t);const e=Reflect.apply(o,this,arguments);return e},s("values"),s("entries"),s("keys"),s("forEach"),s("toJSON"),t}const et=new WeakSet;function nt(t){if(et.has(t))return t;let e;et.add(t);const n=t=>{e.reportChanged()};function r(n){const r=t[n];t[n]=function(){e.reportObserved(this._implicitObserver);const t=Reflect.apply(r,this,arguments);return t}}return e=$("text",(()=>{t.observe(n)}),(()=>{t.unobserve(n)})),r("toString"),r("toJSON"),t}const rt=new WeakSet;function it(t){if(rt.has(t))return t;let e;rt.add(t);const n=t=>{(t.changes.added.size||t.changes.deleted.size||t.changes.keys.size||t.changes.delta.length)&&e.reportChanged()};function r(n){const r=t[n];t[n]=function(){e.reportObserved(this._implicitObserver);const t=Reflect.apply(r,this,arguments);return t}}function i(n){let r=t,i=Object.getOwnPropertyDescriptor(r,n);if(i||(r=Object.getPrototypeOf(r),i=Object.getOwnPropertyDescriptor(r,n)),i||(r=Object.getPrototypeOf(r),i=Object.getOwnPropertyDescriptor(r,n)),!i)throw new Error("property not found");const o=i.get;i.get=function(){e.reportObserved(this._implicitObserver);const t=Reflect.apply(o,this,arguments);return t},Object.defineProperty(t,n,i)}return e=$("xml",(()=>{t.observe(n)}),(()=>{t.unobserve(n)})),r("toString"),r("toDOM"),r("toArray"),r("getAttribute"),i("firstChild"),t}function ot(t){return t instanceof z.eI||t instanceof z.xv?nt(t):t instanceof z.mJ?Z(t):t instanceof z.D5?tt(t):t instanceof z.QW||Object.prototype.hasOwnProperty.call(t,"autoLoad")?J(t):t instanceof z.sI||t instanceof z.lt?it(t):t}function st(t){t.share.forEach((t=>{t.constructor!==z.QP&&ot(t)}))}function at(t,e){for(let r=t.length-1;r>=e;r--){let e=t[r];if(!e.deleted){var n;if(e instanceof z.GC)continue;null==(n=e.content)||n.getContent().forEach((t=>{t instanceof z.QP&&ot(t)}))}}}const lt=new WeakSet;function ct(t){lt.has(t)||(lt.add(t),ot(t),t.store.clients.forEach((t=>{t&&at(t,0)})),st(t),t.on("beforeObserverCalls",(e=>{st(t),e.afterState.forEach(((t,n)=>{const r=e.beforeState.get(n)||0;if(r!==t){const t=e.doc.store.clients.get(n);if(!t)return;const i=z.g4(t,r);at(t,i)}}))})))}class ut{constructor(t){this.value=void 0,this.value=t}}function dt(t){return ArrayBuffer.isView(t)?new ut(t):new ut(Object.freeze(t))}function ht(t){const e=function(){var e;let n=null==(e=this[k])?void 0:e.implicitObserver;t._implicitObserver=n;const r=t.slice.bind(t).apply(t,arguments);return r.map((t=>{const e=yt(t,n);return n&&"object"===typeof e?D(e,n):e}))},n=function(t){return t.map((t=>{const e=bt(t);let n=Tt(e)||e;if(n instanceof ut&&(n=n.value),n instanceof z.QP&&n.parent)throw new Error("Not supported: reassigning object that already occurs in the tree.");return n}))},r=function(){return[].findIndex.apply(e.apply(this),arguments)},i={slice:e,unshift:(...e)=>(t.unshift(n(e)),t.lengthUntracked),push:(...e)=>(t.push(n(e)),t.lengthUntracked),insert:t.insert.bind(t),toJSON:t.toJSON.bind(t),forEach:function(){return[].forEach.apply(e.apply(this),arguments)},every:function(){return[].every.apply(e.apply(this),arguments)},filter:function(){return[].filter.apply(e.apply(this),arguments)},find:function(){return[].find.apply(e.apply(this),arguments)},findIndex:r,some:function(){return[].some.apply(e.apply(this),arguments)},includes:function(){return[].includes.apply(e.apply(this),arguments)},map:function(){return[].map.apply(e.apply(this),arguments)},indexOf:function(){const t=arguments[0];return r.call(this,(e=>Ct(e,t)))},splice:function(){let r=arguments[0]<0?t.length-Math.abs(arguments[0]):arguments[0],i=arguments[1],o=Array.from(Array.from(arguments).slice(2)),s=e.apply(this,[r,Number.isInteger(i)?r+i:void 0]);return t.doc?t.doc.transact((()=>{t.delete(r,i),t.insert(r,n(o))})):(t.delete(r,i),t.insert(r,n(o))),s}},o=[];for(let s in i)o[s]=i[s];return o}function ft(t){if("string"===typeof t&&t.trim().length){const e=Number(t);if(Number.isInteger(e))return e}return t}function pt(t,e=new z.mJ){if(e[A])throw new Error("unexpected");const n=ht(e),r=new Proxy(n,{set:(t,e,n)=>{const r=ft(e);if("number"!==typeof r)throw new Error;throw new Error("array assignment is not implemented / supported")},get:(t,n,r)=>{const i=ft(n);if(i===St)return e;if("number"===typeof i){let t;var o;if(r&&r[k])t=null==(o=r[k])?void 0:o.implicitObserver,e._implicitObserver=t;let n=e.get(i);return n=yt(n,t),n}if(i===Symbol.toStringTag)return"Array";if(i===Symbol.iterator){const t=e.slice();return Reflect.get(t,i)}if("length"===i)return e.length;const s=Reflect.get(t,i,r);return s},deleteProperty:(t,n)=>{const r=ft(n);if("number"!==typeof r)throw new Error;return r<e.lengthUntracked&&r>=0&&(e.delete(r),!0)},has:(t,n)=>{const r=ft(n);return"number"!==typeof r?Reflect.has(t,r):r<e.lengthUntracked&&r>=0},getOwnPropertyDescriptor(t,n){const r=ft(n);return"length"===r?{enumerable:!1,configurable:!1,writable:!0}:"number"===typeof r&&r>=0&&r<e.lengthUntracked?{enumerable:!0,configurable:!0,writable:!0}:void 0},ownKeys:t=>{const n=[];for(let r=0;r<e.length;r++)n.push(r+"");return n.push("length"),n}});return n.push.apply(r,t),r}function mt(t,e=new z.D5){if(e[A])throw new Error("unexpected");const n=new Proxy({},{set:(t,n,r)=>{if("string"!==typeof n)throw new Error;const i=bt(r);let o=Tt(i)||i;if(o instanceof ut&&(o=o.value),o instanceof z.QP&&o.parent)throw new Error("Not supported: reassigning object that already occurs in the tree.");return e.set(n,o),!0},get:(t,n,r)=>{if(n===St)return e;if("string"!==typeof n)return Reflect.get(t,n);let i;var o;r&&r[k]&&(i=null==(o=r[k])?void 0:o.implicitObserver,e._implicitObserver=i);let s=e.get(n);return s=yt(s,i),s},deleteProperty:(t,n)=>{if("string"!==typeof n)throw new Error;return!!e.has(n)&&(e.delete(n),!0)},has:(t,n)=>!("string"!==typeof n||!e.has(n)),getOwnPropertyDescriptor(t,n){if("string"===typeof n&&e.has(n))return{enumerable:!0,configurable:!0}},ownKeys:t=>Array.from(e.keys())});vt.set(e,n);for(let r in t)n[r]=t[r];return n}function gt(t){return t instanceof z.QP}const vt=new WeakMap;function yt(t,e){if(gt(t)){if(t._implicitObserver=e,t instanceof z.mJ||t instanceof z.D5){if(!vt.has(t)){const e=bt(t);vt.set(t,e)}t=vt.get(t)}else{if(!(t instanceof z.lt||t instanceof z.sI||t instanceof z.eI||t instanceof z.yP||t instanceof z.xv))throw new Error("unknown YType");R(t),t.__v_skip=!0}return t}return null===t?null:"object"===typeof t?dt(t):t}function bt(t){if(null===t||void 0===t)return t;if(t=Tt(t)||t,t instanceof z.mJ)return pt([],t);if(t instanceof z.D5)return mt({},t);if("string"===typeof t)return t;if(Array.isArray(t))return pt(t);if(t instanceof z.lt||t instanceof z.sI||t instanceof z.eI||t instanceof z.yP)return t;if(t instanceof z.xv)return t;if("object"===typeof t)return t instanceof ut?t:mt(t);if("number"===typeof t||"boolean"===typeof t)return t;throw new Error("invalid")}function _t(t){for(let[e,n]of Object.entries(t))if(Array.isArray(n)){if(0!==n.length)throw new Error("Root Array initializer must always be empty array")}else if(n&&"object"===typeof n){if(0!==Object.keys(n).length||Object.getPrototypeOf(n)!==Object.prototype)throw new Error("Root Object initializer must always be {}")}else if("xml"!==n&&"text"!==n)throw new Error("unknown Root initializer")}function wt(t,e,n){let r=e[n];if(r)return"xml"===r?t.getXmlFragment(n):"text"===r?t.getText(n):Array.isArray(r)?t.getArray(n):t.getMap(n);"__v_raw"!==n&&"__v_isRef"!==n&&"__v_isReadonly"!==n&&console.warn("property not found on root doc",n)}function xt(t,e){if(t[A])throw new Error("unexpected");_t(e);const n=new Proxy({},{set:(t,e,n)=>{if("string"!==typeof e)throw new Error;throw new Error("cannot set new elements on root doc")},get:(n,r,i)=>{if(r===St)return t;if("string"!==typeof r)return Reflect.get(n,r);let o;var s;i&&i[k]&&(o=null==(s=i[k])?void 0:s.implicitObserver,t._implicitObserver=o);if("toJSON"===r){for(let r of Object.keys(e))wt(t,e,r);const n=Reflect.get(t,r);return n}let a=wt(t,e,r);return a=yt(a,o),a},deleteProperty:(t,e)=>{throw new Error("deleteProperty not available for doc")},has:(e,n)=>!("string"!==typeof n||!t.share.has(n)),getOwnPropertyDescriptor(e,n){if("string"===typeof n&&t.share.has(n)||"toJSON"===n)return{enumerable:!0,configurable:!0}},ownKeys:e=>Array.from(t.share.keys())});return vt.set(t,n),n}Y(r);const St=Symbol("INTERNAL_SYMBOL");function Et(t,e){const n=Tt(t)||t;if(!n)throw new Error("not a valid synced object");return n instanceof z.QW?(n.on("update",e),()=>{n.off("update",e)}):(n.observeDeep(e),()=>{n.unobserveDeep(e)})}function Mt(t){const e=Tt(t);if(!(e instanceof z.QW))throw new Error("store is not a valid syncedStore that maps to a Y.Doc");return e}function Tt(t){if("object"!==typeof t||null===t)return;const e=t[St];return e&&(R(e),e.__v_skip=!0),e}function Ct(t,e){if(t===e)return!0;if("object"===typeof t&&"object"===typeof e){const n=Tt(t),r=Tt(e);return!(!n||!r)&&n===r}return!1}function At(t,e=new z.QW){return ct(e),xt(e,t)}},292:function(t,e,n){"use strict";n.d(e,{ML:function(){return Tn},hj:function(){return At},vc:function(){return Rn},NB:function(){return Pn},nU:function(){return it},Nl:function(){return K},Jo:function(){return Ue},EG:function(){return $e},xh:function(){return Zt},Cf:function(){return Cn},K9:function(){return Ln},P1:function(){return et},x2:function(){return An},pr:function(){return qe},zK:function(){return kn},S0:function(){return On}});n(7658),n(1703);var r=n(1418),i=n(1617),o=n(7329),s=n(8443),a=n(4040);const l=(t,e)=>!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function c(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const u=(t,e,n)=>{let i=c(t,n);if(!i)return!1;let o=f(i);if(!o){let n=i.blockRange(),r=n&&(0,a.k9)(n);return null!=r&&(e&&e(t.tr.lift(n,r).scrollIntoView()),!0)}let l=o.nodeBefore;if(!l.type.spec.isolating&&R(t,o,e))return!0;if(0==i.parent.content.size&&(d(l,"end")||r.qv.isSelectable(l))){let n=(0,a.dR)(t.doc,i.before(),i.after(),s.p2.empty);if(n&&n.slice.size<n.to-n.from){if(e){let i=t.tr.step(n);i.setSelection(d(l,"end")?r.Y1.findFrom(i.doc.resolve(i.mapping.map(o.pos,-1)),-1):r.qv.create(i.doc,o.pos-l.nodeSize)),e(i.scrollIntoView())}return!0}}return!(!l.isAtom||o.depth!=i.depth-1)&&(e&&e(t.tr.delete(o.pos-l.nodeSize,o.pos).scrollIntoView()),!0)};function d(t,e,n=!1){for(let r=t;r;r="start"==e?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)return!1}return!1}const h=(t,e,n)=>{let{$head:i,empty:o}=t.selection,s=i;if(!o)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):i.parentOffset>0)return!1;s=f(i)}let a=s&&s.nodeBefore;return!(!a||!r.qv.isSelectable(a))&&(e&&e(t.tr.setSelection(r.qv.create(t.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)};function f(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function p(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const m=(t,e,n)=>{let i=p(t,n);if(!i)return!1;let o=v(i);if(!o)return!1;let l=o.nodeAfter;if(R(t,o,e))return!0;if(0==i.parent.content.size&&(d(l,"start")||r.qv.isSelectable(l))){let n=(0,a.dR)(t.doc,i.before(),i.after(),s.p2.empty);if(n&&n.slice.size<n.to-n.from){if(e){let i=t.tr.step(n);i.setSelection(d(l,"start")?r.Y1.findFrom(i.doc.resolve(i.mapping.map(o.pos)),1):r.qv.create(i.doc,i.mapping.map(o.pos))),e(i.scrollIntoView())}return!0}}return!(!l.isAtom||o.depth!=i.depth-1)&&(e&&e(t.tr.delete(o.pos,o.pos+l.nodeSize).scrollIntoView()),!0)},g=(t,e,n)=>{let{$head:i,empty:o}=t.selection,s=i;if(!o)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):i.parentOffset<i.parent.content.size)return!1;s=v(i)}let a=s&&s.nodeAfter;return!(!a||!r.qv.isSelectable(a))&&(e&&e(t.tr.setSelection(r.qv.create(t.doc,s.pos)).scrollIntoView()),!0)};function v(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const y=(t,e)=>{let n,i=t.selection,o=i instanceof r.qv;if(o){if(i.node.isTextblock||!(0,a.Mn)(t.doc,i.from))return!1;n=i.from}else if(n=(0,a.GJ)(t.doc,i.from,-1),null==n)return!1;if(e){let i=t.tr.join(n);o&&i.setSelection(r.qv.create(i.doc,n-t.doc.resolve(n).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},b=(t,e)=>{let n,i=t.selection;if(i instanceof r.qv){if(i.node.isTextblock||!(0,a.Mn)(t.doc,i.to))return!1;n=i.to}else if(n=(0,a.GJ)(t.doc,i.to,1),null==n)return!1;return e&&e(t.tr.join(n).scrollIntoView()),!0},_=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&(0,a.k9)(i);return null!=o&&(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},w=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!(!n.parent.type.spec.code||!n.sameParent(r))&&(e&&e(t.tr.insertText("\n").scrollIntoView()),!0)};function x(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const S=(t,e)=>{let{$head:n,$anchor:i}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(i))return!1;let o=n.node(-1),s=n.indexAfter(-1),a=x(o.contentMatchAt(s));if(!a||!o.canReplaceWith(s,s,a))return!1;if(e){let i=n.after(),o=t.tr.replaceWith(i,i,a.createAndFill());o.setSelection(r.Y1.near(o.doc.resolve(i),1)),e(o.scrollIntoView())}return!0},E=(t,e)=>{let n=t.selection,{$from:i,$to:o}=n;if(n instanceof r.C1||i.parent.inlineContent||o.parent.inlineContent)return!1;let s=x(o.parent.contentMatchAt(o.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let n=(!i.parentOffset&&o.index()<o.parent.childCount?i:o).pos,a=t.tr.insert(n,s.createAndFill());a.setSelection(r.Bs.create(a.doc,n+1)),e(a.scrollIntoView())}return!0},M=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let r=n.before();if((0,a.Ax)(t.doc,r))return e&&e(t.tr.split(r).scrollIntoView()),!0}let r=n.blockRange(),i=r&&(0,a.k9)(r);return null!=i&&(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function T(t){return(e,n)=>{let{$from:i,$to:o}=e.selection;if(e.selection instanceof r.qv&&e.selection.node.isBlock)return!(!i.parentOffset||!(0,a.Ax)(e.doc,i.pos))&&(n&&n(e.tr.split(i.pos).scrollIntoView()),!0);if(!i.parent.isBlock)return!1;if(n){let s=o.parentOffset==o.parent.content.size,l=e.tr;(e.selection instanceof r.Bs||e.selection instanceof r.C1)&&l.deleteSelection();let c=0==i.depth?null:x(i.node(-1).contentMatchAt(i.indexAfter(-1))),u=t&&t(o.parent,s),d=u?[u]:s&&c?[{type:c}]:void 0,h=(0,a.Ax)(l.doc,l.mapping.map(i.pos),1,d);if(d||h||!(0,a.Ax)(l.doc,l.mapping.map(i.pos),1,c?[{type:c}]:void 0)||(c&&(d=[{type:c}]),h=!0),h&&(l.split(l.mapping.map(i.pos),1,d),!s&&!i.parentOffset&&i.parent.type!=c)){let t=l.mapping.map(i.before()),e=l.doc.resolve(t);c&&i.node(-1).canReplaceWith(e.index(),e.index()+1,c)&&l.setNodeMarkup(l.mapping.map(i.before()),c)}n(l.scrollIntoView())}return!0}}const C=T(),A=(t,e)=>{let n,{$from:i,to:o}=t.selection,s=i.sharedDepth(o);return 0!=s&&(n=i.before(s),e&&e(t.tr.setSelection(r.qv.create(t.doc,n))),!0)},k=(t,e)=>(e&&e(t.tr.setSelection(new r.C1(t.doc))),!0);function O(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!!(r&&i&&r.type.compatibleContent(i.type))&&(!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!(!e.parent.canReplace(o,o+1)||!i.isTextblock&&!(0,a.Mn)(t.doc,e.pos))&&(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0))}function R(t,e,n){let i,o,l=e.nodeBefore,c=e.nodeAfter;if(l.type.spec.isolating||c.type.spec.isolating)return!1;if(O(t,e,n))return!0;let u=e.parent.canReplace(e.index(),e.index()+1);if(u&&(i=(o=l.contentMatchAt(l.childCount)).findWrapping(c.type))&&o.matchType(i[0]||c.type).validEnd){if(n){let r=e.pos+c.nodeSize,o=s.HY.empty;for(let t=i.length-1;t>=0;t--)o=s.HY.from(i[t].create(null,o));o=s.HY.from(l.copy(o));let u=t.tr.step(new a.FC(e.pos-1,r,e.pos,r,new s.p2(o,1,0),i.length,!0)),d=r+2*i.length;(0,a.Mn)(u.doc,d)&&u.join(d),n(u.scrollIntoView())}return!0}let h=r.Y1.findFrom(e,1),f=h&&h.$from.blockRange(h.$to),p=f&&(0,a.k9)(f);if(null!=p&&p>=e.depth)return n&&n(t.tr.lift(f,p).scrollIntoView()),!0;if(u&&d(c,"start",!0)&&d(l,"end")){let r=l,i=[];for(;;){if(i.push(r),r.isTextblock)break;r=r.lastChild}let o=c,u=1;for(;!o.isTextblock;o=o.firstChild)u++;if(r.canReplace(r.childCount,r.childCount,o.content)){if(n){let r=s.HY.empty;for(let t=i.length-1;t>=0;t--)r=s.HY.from(i[t].copy(r));let o=t.tr.step(new a.FC(e.pos-i.length,e.pos+c.nodeSize,e.pos+u,e.pos+c.nodeSize-u,new s.p2(r,i.length,0),0,!0));n(o.scrollIntoView())}return!0}}return!1}function P(t){return function(e,n){let i=e.selection,o=t<0?i.$from:i.$to,s=o.depth;while(o.node(s).isInline){if(!s)return!1;s--}return!!o.node(s).isTextblock&&(n&&n(e.tr.setSelection(r.Bs.create(e.doc,t<0?o.start(s):o.end(s)))),!0)}}const L=P(-1),D=P(1);function I(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),l=s&&(0,a.nd)(s,t,e);return!!l&&(r&&r(n.tr.wrap(s,l).scrollIntoView()),!0)}}function N(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:r},$to:{pos:s}}=n.selection.ranges[o];n.doc.nodesBetween(r,s,((r,o)=>{if(i)return!1;if(r.isTextblock&&!r.hasMarkup(t,e))if(r.type==t)i=!0;else{let e=n.doc.resolve(o),r=e.index();i=e.parent.canReplaceWith(r,r+1,t)}}))}if(!i)return!1;if(r){let i=n.tr;for(let r=0;r<n.selection.ranges.length;r++){let{$from:{pos:o},$to:{pos:s}}=n.selection.ranges[r];i.setBlockType(o,s,t,e)}r(i.scrollIntoView())}return!0}}function U(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}let F=U(l,u,h),B=U(l,m,g);const V={Enter:U(w,E,M,C),"Mod-Enter":S,Backspace:F,"Mod-Backspace":F,"Shift-Backspace":F,Delete:B,"Mod-Delete":B,"Mod-a":k},z={"Ctrl-h":V["Backspace"],"Alt-Backspace":V["Mod-Backspace"],"Ctrl-d":V["Delete"],"Ctrl-Alt-Backspace":V["Mod-Delete"],"Alt-Delete":V["Mod-Delete"],"Alt-d":V["Mod-Delete"],"Ctrl-a":L,"Ctrl-e":D};for(let Dn in V)z[Dn]=V[Dn];"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!("undefined"==typeof os||!os.platform)&&os.platform();function j(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,l=i.blockRange(o),c=!1,u=l;if(!l)return!1;if(l.depth>=2&&i.node(l.depth-1).type.compatibleContent(t)&&0==l.startIndex){if(0==i.index(l.depth-1))return!1;let t=n.doc.resolve(l.start-2);u=new s.Ts(t,t,l.depth),l.endIndex<l.parent.childCount&&(l=new s.Ts(i,n.doc.resolve(o.end(l.depth)),l.depth)),c=!0}let d=(0,a.nd)(u,t,e,l);return!!d&&(r&&r(H(n.tr,l,d,c,t).scrollIntoView()),!0)}}function H(t,e,n,r,i){let o=s.HY.empty;for(let a=n.length-1;a>=0;a--)o=s.HY.from(n[a].type.create(n[a].attrs,o));t.step(new a.FC(e.start-(r?2:0),e.end,e.start,e.end,new s.p2(o,0,0),n.length,!0));let l=0;for(let s=0;s<n.length;s++)n[s].type==i&&(l=s+1);let c=n.length-l,u=e.start+n.length-(r?2:0),d=e.parent;for(let s=e.startIndex,h=e.endIndex,f=!0;s<h;s++,f=!1)!f&&(0,a.Ax)(t.doc,u,c)&&(t.split(u,c),u+=2*c),u+=d.child(s).nodeSize;return t}function W(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,(e=>e.childCount>0&&e.firstChild.type==t));return!!o&&(!n||(r.node(o.depth-1).type==t?G(e,n,t,o):$(e,n,o)))}}function G(t,e,n,r){let i=t.tr,o=r.end,l=r.$to.end(r.depth);o<l&&(i.step(new a.FC(o-1,l,o,l,new s.p2(s.HY.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new s.Ts(i.doc.resolve(r.$from.pos),i.doc.resolve(l),r.depth));const c=(0,a.k9)(r);if(null==c)return!1;i.lift(r,c);let u=i.mapping.map(o,-1)-1;return(0,a.Mn)(i.doc,u)&&i.join(u),e(i.scrollIntoView()),!0}function $(t,e,n){let r=t.tr,i=n.parent;for(let s=n.end,a=n.endIndex-1,m=n.startIndex;a>m;a--)s-=i.child(a).nodeSize,r.delete(s-1,s+1);let o=r.doc.resolve(n.start),l=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let c=0==n.startIndex,u=n.endIndex==i.childCount,d=o.node(-1),h=o.index(-1);if(!d.canReplace(h+(c?0:1),h+1,l.content.append(u?s.HY.empty:s.HY.from(i))))return!1;let f=o.pos,p=f+l.nodeSize;return r.step(new a.FC(f-(c?1:0),p+(u?1:0),f+1,p-1,new s.p2((c?s.HY.empty:s.HY.from(i.copy(s.HY.empty))).append(u?s.HY.empty:s.HY.from(i.copy(s.HY.empty))),c?0:1,u?0:1),c?0:1)),e(r.scrollIntoView()),!0}function q(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,(e=>e.childCount>0&&e.firstChild.type==t));if(!o)return!1;let l=o.startIndex;if(0==l)return!1;let c=o.parent,u=c.child(l-1);if(u.type!=t)return!1;if(n){let r=u.lastChild&&u.lastChild.type==c.type,i=s.HY.from(r?t.create():null),l=new s.p2(s.HY.from(t.create(null,s.HY.from(c.type.create(null,i)))),r?3:1,0),d=o.start,h=o.end;n(e.tr.step(new a.FC(d-(r?3:1),h,d,h,l,1,!0)).scrollIntoView())}return!0}}function Y(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),filterTransaction:e.filterTransaction,plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}class X{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:i}=n,o=this.buildProps(i);return Object.fromEntries(Object.entries(t).map((([t,e])=>{const n=(...t)=>{const n=e(...t)(o);return i.getMeta("preventDispatch")||this.hasCustomState||r.dispatch(i),n};return[t,n]})))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:o}=r,s=[],a=!!t,l=t||i.tr,c=()=>(a||!e||l.getMeta("preventDispatch")||this.hasCustomState||o.dispatch(l),s.every((t=>!0===t))),u={...Object.fromEntries(Object.entries(n).map((([t,n])=>{const r=(...t)=>{const r=this.buildProps(l,e),i=n(...t)(r);return s.push(i),u};return[t,r]}))),run:c};return u}createCan(t){const{rawCommands:e,state:n}=this,r=!1,i=t||n.tr,o=this.buildProps(i,r),s=Object.fromEntries(Object.entries(e).map((([t,e])=>[t,(...t)=>e(...t)({...o,dispatch:void 0})])));return{...s,chain:()=>this.createChain(i,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:o}=r;i.storedMarks&&t.setStoredMarks(i.storedMarks);const s={tr:t,editor:r,view:o,state:Y({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map((([t,e])=>[t,(...t)=>e(...t)(s)])))}};return s}}class Z{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach((t=>t.apply(this,e))),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter((t=>t!==e)):delete this.callbacks[t]),this}removeAllListeners(){this.callbacks={}}}function K(t,e,n){if(void 0===t.config[e]&&t.parent)return K(t.parent,e,n);if("function"===typeof t.config[e]){const r=t.config[e].bind({...n,parent:t.parent?K(t.parent,e,n):null});return r}return t.config[e]}function J(t){const e=t.filter((t=>"extension"===t.type)),n=t.filter((t=>"node"===t.type)),r=t.filter((t=>"mark"===t.type));return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function Q(t){const e=[],{nodeExtensions:n,markExtensions:r}=J(t),i=[...n,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach((t=>{const n={name:t.name,options:t.options,storage:t.storage},r=K(t,"addGlobalAttributes",n);if(!r)return;const i=r();i.forEach((t=>{t.types.forEach((n=>{Object.entries(t.attributes).forEach((([t,r])=>{e.push({type:n,name:t,attribute:{...o,...r}})}))}))}))})),i.forEach((t=>{const n={name:t.name,options:t.options,storage:t.storage},r=K(t,"addAttributes",n);if(!r)return;const i=r();Object.entries(i).forEach((([n,r])=>{const i={...o,...r};"function"===typeof(null===i||void 0===i?void 0:i.default)&&(i.default=i.default()),(null===i||void 0===i?void 0:i.isRequired)&&void 0===(null===i||void 0===i?void 0:i.default)&&delete i.default,e.push({type:t.name,name:n,attribute:i})}))})),e}function tt(t,e){if("string"===typeof t){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function et(...t){return t.filter((t=>!!t)).reduce(((t,e)=>{const n={...t};return Object.entries(e).forEach((([t,e])=>{const r=n[t];n[t]=r?"class"===t?[n[t],e].join(" "):"style"===t?[n[t],e].join("; "):e:e})),n}),{})}function nt(t,e){return e.filter((t=>t.attribute.rendered)).map((e=>e.attribute.renderHTML?e.attribute.renderHTML(t.attrs)||{}:{[e.name]:t.attrs[e.name]})).reduce(((t,e)=>et(t,e)),{})}function rt(t){return"function"===typeof t}function it(t,e=void 0,...n){return rt(t)?e?t.bind(e)(...n):t(...n):t}function ot(t={}){return 0===Object.keys(t).length&&t.constructor===Object}function st(t){return"string"!==typeof t?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):"true"===t||"false"!==t&&t}function at(t,e){return t.style?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(!1===r)return!1;const i=e.reduce(((t,e)=>{const r=e.attribute.parseHTML?e.attribute.parseHTML(n):st(n.getAttribute(e.name));return null===r||void 0===r?t:{...t,[e.name]:r}}),{});return{...r,...i}}}}function lt(t){return Object.fromEntries(Object.entries(t).filter((([t,e])=>("attrs"!==t||!ot(e))&&(null!==e&&void 0!==e))))}function ct(t,e){var n;const r=Q(t),{nodeExtensions:i,markExtensions:o}=J(t),a=null===(n=i.find((t=>K(t,"topNode"))))||void 0===n?void 0:n.name,l=Object.fromEntries(i.map((n=>{const i=r.filter((t=>t.type===n.name)),o={name:n.name,options:n.options,storage:n.storage,editor:e},s=t.reduce(((t,e)=>{const r=K(e,"extendNodeSchema",o);return{...t,...r?r(n):{}}}),{}),a=lt({...s,content:it(K(n,"content",o)),marks:it(K(n,"marks",o)),group:it(K(n,"group",o)),inline:it(K(n,"inline",o)),atom:it(K(n,"atom",o)),selectable:it(K(n,"selectable",o)),draggable:it(K(n,"draggable",o)),code:it(K(n,"code",o)),defining:it(K(n,"defining",o)),isolating:it(K(n,"isolating",o)),attrs:Object.fromEntries(i.map((t=>{var e;return[t.name,{default:null===(e=null===t||void 0===t?void 0:t.attribute)||void 0===e?void 0:e.default}]})))}),l=it(K(n,"parseHTML",o));l&&(a.parseDOM=l.map((t=>at(t,i))));const c=K(n,"renderHTML",o);c&&(a.toDOM=t=>c({node:t,HTMLAttributes:nt(t,i)}));const u=K(n,"renderText",o);return u&&(a.toText=u),[n.name,a]}))),c=Object.fromEntries(o.map((n=>{const i=r.filter((t=>t.type===n.name)),o={name:n.name,options:n.options,storage:n.storage,editor:e},s=t.reduce(((t,e)=>{const r=K(e,"extendMarkSchema",o);return{...t,...r?r(n):{}}}),{}),a=lt({...s,inclusive:it(K(n,"inclusive",o)),excludes:it(K(n,"excludes",o)),group:it(K(n,"group",o)),spanning:it(K(n,"spanning",o)),code:it(K(n,"code",o)),attrs:Object.fromEntries(i.map((t=>{var e;return[t.name,{default:null===(e=null===t||void 0===t?void 0:t.attribute)||void 0===e?void 0:e.default}]})))}),l=it(K(n,"parseHTML",o));l&&(a.parseDOM=l.map((t=>at(t,i))));const c=K(n,"renderHTML",o);return c&&(a.toDOM=t=>c({mark:t,HTMLAttributes:nt(t,i)})),[n.name,a]})));return new s.V_({topNode:a,nodes:l,marks:c})}function ut(t,e){return e.nodes[t]||e.marks[t]||null}function dt(t,e){return Array.isArray(e)?e.some((e=>{const n="string"===typeof e?e:e.name;return n===t.name})):e}const ht=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,((t,e,i,o)=>{var s,a;const l=(null===(a=(s=t.type.spec).toText)||void 0===a?void 0:a.call(s,{node:t,pos:e,parent:i,index:o}))||t.textContent||"%leaf%";n+=l.slice(0,Math.max(0,r-e))})),n};function ft(t){return"[object RegExp]"===Object.prototype.toString.call(t)}class pt{constructor(t){this.find=t.find,this.handler=t.handler}}const mt=(t,e)=>{if(ft(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function gt(t){var e;const{editor:n,from:r,to:i,text:o,rules:s,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||(null===(e=c.nodeBefore||c.nodeAfter)||void 0===e?void 0:e.marks.find((t=>t.type.spec.code))))return!1;let u=!1;const d=ht(c)+o;return s.forEach((t=>{if(u)return;const e=mt(d,t.find);if(!e)return;const s=l.state.tr,c=Y({state:l.state,transaction:s}),h={from:r-(e[0].length-o.length),to:i},{commands:f,chain:p,can:m}=new X({editor:n,state:c}),g=t.handler({state:c,range:h,match:e,commands:f,chain:p,can:m});null!==g&&s.steps.length&&(s.setMeta(a,{transform:s,from:r,to:i,text:o}),l.dispatch(s),u=!0)})),u}function vt(t){const{editor:e,rules:n}=t,i=new r.Sy({state:{init(){return null},apply(t,e){const n=t.getMeta(i);return n||(t.selectionSet||t.docChanged?null:e)}},props:{handleTextInput(t,r,o,s){return gt({editor:e,from:r,to:o,text:s,rules:n,plugin:i})},handleDOMEvents:{compositionend:t=>(setTimeout((()=>{const{$cursor:r}=t.state.selection;r&&gt({editor:e,from:r.pos,to:r.pos,text:"",rules:n,plugin:i})})),!1)},handleKeyDown(t,r){if("Enter"!==r.key)return!1;const{$cursor:o}=t.state.selection;return!!o&&gt({editor:e,from:o.pos,to:o.pos,text:"\n",rules:n,plugin:i})}},isInputRules:!0});return i}function yt(t){return"number"===typeof t}class bt{constructor(t){this.find=t.find,this.handler=t.handler}}const _t=(t,e)=>{if(ft(e))return[...t.matchAll(e)];const n=e(t);return n?n.map((e=>{const n=[e.text];return n.index=e.index,n.input=t,n.data=e.data,e.replaceWith&&(e.text.includes(e.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),n.push(e.replaceWith)),n})):[]};function wt(t){const{editor:e,state:n,from:r,to:i,rule:o}=t,{commands:s,chain:a,can:l}=new X({editor:e,state:n}),c=[];n.doc.nodesBetween(r,i,((t,e)=>{if(!t.isTextblock||t.type.spec.code)return;const u=Math.max(r,e),d=Math.min(i,e+t.content.size),h=t.textBetween(u-e,d-e,void 0,"￼"),f=_t(h,o.find);f.forEach((t=>{if(void 0===t.index)return;const e=u+t.index+1,r=e+t[0].length,i={from:n.tr.mapping.map(e),to:n.tr.mapping.map(r)},d=o.handler({state:n,range:i,match:t,commands:s,chain:a,can:l});c.push(d)}))}));const u=c.every((t=>null!==t));return u}function xt(t){const{editor:e,rules:n}=t;let i=null,o=!1,s=!1;const a=n.map((t=>new r.Sy({view(t){const e=e=>{var n;i=(null===(n=t.dom.parentElement)||void 0===n?void 0:n.contains(e.target))?t.dom.parentElement:null};return window.addEventListener("dragstart",e),{destroy(){window.removeEventListener("dragstart",e)}}},props:{handleDOMEvents:{drop:t=>(s=i===t.dom.parentElement,!1),paste:(t,e)=>{var n;const r=null===(n=e.clipboardData)||void 0===n?void 0:n.getData("text/html");return o=!!(null===r||void 0===r?void 0:r.includes("data-pm-slice")),!1}}},appendTransaction:(n,r,i)=>{const a=n[0],l="paste"===a.getMeta("uiEvent")&&!o,c="drop"===a.getMeta("uiEvent")&&!s;if(!l&&!c)return;const u=r.doc.content.findDiffStart(i.doc.content),d=r.doc.content.findDiffEnd(i.doc.content);if(!yt(u)||!d||u===d.b)return;const h=i.tr,f=Y({state:i,transaction:h}),p=wt({editor:e,state:f,from:Math.max(u-1,0),to:d.b-1,rule:t});return p&&h.steps.length?h:void 0}})));return a}function St(t){const e=t.filter(((e,n)=>t.indexOf(e)!==n));return[...new Set(e)]}class Et{constructor(t,e){this.splittableMarks=[],this.editor=e,this.extensions=Et.resolve(t),this.schema=ct(this.extensions,e),this.extensions.forEach((t=>{var e;this.editor.extensionStorage[t.name]=t.storage;const n={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:ut(t.name,this.schema)};if("mark"===t.type){const r=null===(e=it(K(t,"keepOnSplit",n)))||void 0===e||e;r&&this.splittableMarks.push(t.name)}const r=K(t,"onBeforeCreate",n);r&&this.editor.on("beforeCreate",r);const i=K(t,"onCreate",n);i&&this.editor.on("create",i);const o=K(t,"onUpdate",n);o&&this.editor.on("update",o);const s=K(t,"onSelectionUpdate",n);s&&this.editor.on("selectionUpdate",s);const a=K(t,"onTransaction",n);a&&this.editor.on("transaction",a);const l=K(t,"onFocus",n);l&&this.editor.on("focus",l);const c=K(t,"onBlur",n);c&&this.editor.on("blur",c);const u=K(t,"onDestroy",n);u&&this.editor.on("destroy",u)}))}static resolve(t){const e=Et.sort(Et.flatten(t)),n=St(e.map((t=>t.name)));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map((t=>`'${t}'`)).join(", ")}]. This can lead to issues.`),e}static flatten(t){return t.map((t=>{const e={name:t.name,options:t.options,storage:t.storage},n=K(t,"addExtensions",e);return n?[t,...this.flatten(n())]:t})).flat(10)}static sort(t){const e=100;return t.sort(((t,n)=>{const r=K(t,"priority")||e,i=K(n,"priority")||e;return r>i?-1:r<i?1:0}))}get commands(){return this.extensions.reduce(((t,e)=>{const n={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:ut(e.name,this.schema)},r=K(e,"addCommands",n);return r?{...t,...r()}:t}),{})}get plugins(){const{editor:t}=this,e=Et.sort([...this.extensions].reverse()),n=[],r=[],i=e.map((e=>{const i={name:e.name,options:e.options,storage:e.storage,editor:t,type:ut(e.name,this.schema)},s=[],a=K(e,"addKeyboardShortcuts",i);let l={};if("mark"===e.type&&e.config.exitable&&(l.ArrowRight=()=>Rn.handleExit({editor:t,mark:e})),a){const e=Object.fromEntries(Object.entries(a()).map((([e,n])=>[e,()=>n({editor:t})])));l={...l,...e}}const c=(0,o.h)(l);s.push(c);const u=K(e,"addInputRules",i);dt(e,t.options.enableInputRules)&&u&&n.push(...u());const d=K(e,"addPasteRules",i);dt(e,t.options.enablePasteRules)&&d&&r.push(...d());const h=K(e,"addProseMirrorPlugins",i);if(h){const t=h();s.push(...t)}return s})).flat();return[vt({editor:t,rules:n}),...xt({editor:t,rules:r}),...i]}get attributes(){return Q(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=J(this.extensions);return Object.fromEntries(e.filter((t=>!!K(t,"addNodeView"))).map((e=>{const n=this.attributes.filter((t=>t.type===e.name)),r={name:e.name,options:e.options,storage:e.storage,editor:t,type:tt(e.name,this.schema)},i=K(e,"addNodeView",r);if(!i)return[];const o=(r,o,s,a)=>{const l=nt(r,n);return i()({editor:t,node:r,getPos:s,decorations:a,HTMLAttributes:l,extension:e})};return[e.name,o]})))}}function Mt(t){return Object.prototype.toString.call(t).slice(8,-1)}function Tt(t){return"Object"===Mt(t)&&(t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype)}function Ct(t,e){const n={...t};return Tt(t)&&Tt(e)&&Object.keys(e).forEach((r=>{Tt(e[r])?r in t?n[r]=Ct(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})})),n}class At{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=it(K(this,"addOptions",{name:this.name}))),this.storage=it(K(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new At(t)}configure(t={}){const e=this.extend();return e.options=Ct(this.options,t),e.storage=it(K(e,"addStorage",{name:e.name,options:e.options})),e}extend(t={}){const e=new At(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=it(K(e,"addOptions",{name:e.name})),e.storage=it(K(e,"addStorage",{name:e.name,options:e.options})),e}}function kt(t,e,n){const{from:r,to:i}=e,{blockSeparator:o="\n\n",textSerializers:s={}}=n||{};let a="",l=!0;return t.nodesBetween(r,i,((t,n,c,u)=>{var d;const h=null===s||void 0===s?void 0:s[t.type.name];h?(t.isBlock&&!l&&(a+=o,l=!0),c&&(a+=h({node:t,pos:n,parent:c,index:u,range:e}))):t.isText?(a+=null===(d=null===t||void 0===t?void 0:t.text)||void 0===d?void 0:d.slice(Math.max(r,n)-n,i-n),l=!1):t.isBlock&&!l&&(a+=o,l=!0)})),a}function Ot(t){return Object.fromEntries(Object.entries(t.nodes).filter((([,t])=>t.spec.toText)).map((([t,e])=>[t,e.spec.toText])))}const Rt=At.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new r.Sy({key:new r.H$("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,s=Math.min(...o.map((t=>t.$from.pos))),a=Math.max(...o.map((t=>t.$to.pos))),l=Ot(n),c={from:s,to:a};return kt(r,c,{textSerializers:l})}}})]}}),Pt=()=>({editor:t,view:e})=>(requestAnimationFrame((()=>{var n;t.isDestroyed||(e.dom.blur(),null===(n=null===window||void 0===window?void 0:window.getSelection())||void 0===n||n.removeAllRanges())})),!0),Lt=(t=!1)=>({commands:e})=>e.setContent("",t),Dt=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return!n||(i.forEach((({$from:n,$to:r})=>{t.doc.nodesBetween(n.pos,r.pos,((t,n)=>{if(t.type.isText)return;const{doc:r,mapping:i}=e,o=r.resolve(i.map(n)),s=r.resolve(i.map(n+t.nodeSize)),l=o.blockRange(s);if(!l)return;const c=(0,a.k9)(l);if(t.type.isTextblock){const{defaultType:t}=o.parent.contentMatchAt(o.index());e.setNodeMarkup(l.start,t)}(c||0===c)&&e.lift(l,c)}))})),!0)},It=t=>e=>t(e),Nt=()=>({state:t,dispatch:e})=>E(t,e),Ut=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1){const n=i.node(o);if(n.type===r.type){if(e){const e=i.before(o),n=i.after(o);t.delete(e,n).scrollIntoView()}return!0}}return!1},Ft=t=>({tr:e,state:n,dispatch:r})=>{const i=tt(t,n.schema),o=e.selection.$anchor;for(let t=o.depth;t>0;t-=1){const n=o.node(t);if(n.type===i){if(r){const n=o.before(t),r=o.after(t);e.delete(n,r).scrollIntoView()}return!0}}return!1},Bt=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},Vt=()=>({state:t,dispatch:e})=>l(t,e),zt=()=>({commands:t})=>t.keyboardShortcut("Enter"),jt=()=>({state:t,dispatch:e})=>S(t,e);function Ht(t,e,n={strict:!0}){const r=Object.keys(e);return!r.length||r.every((r=>n.strict?e[r]===t[r]:ft(e[r])?e[r].test(t[r]):e[r]===t[r]))}function Wt(t,e,n={}){return t.find((t=>t.type===e&&Ht(t.attrs,n)))}function Gt(t,e,n={}){return!!Wt(t,e,n)}function $t(t,e,n={}){if(!t||!e)return;let r=t.parent.childAfter(t.parentOffset);if(t.parentOffset===r.offset&&0!==r.offset&&(r=t.parent.childBefore(t.parentOffset)),!r.node)return;const i=Wt([...r.node.marks],e,n);if(!i)return;let o=r.index,s=t.start()+r.offset,a=o+1,l=s+r.node.nodeSize;Wt([...r.node.marks],e,n);while(o>0&&i.isInSet(t.parent.child(o-1).marks))o-=1,s-=t.parent.child(o).nodeSize;while(a<t.parent.childCount&&Gt([...t.parent.child(a).marks],e,n))l+=t.parent.child(a).nodeSize,a+=1;return{from:s,to:l}}function qt(t,e){if("string"===typeof t){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const Yt=(t,e={})=>({tr:n,state:i,dispatch:o})=>{const s=qt(t,i.schema),{doc:a,selection:l}=n,{$from:c,from:u,to:d}=l;if(o){const t=$t(c,s,e);if(t&&t.from<=u&&t.to>=d){const e=r.Bs.create(a,t.from,t.to);n.setSelection(e)}}return!0},Xt=t=>e=>{const n="function"===typeof t?t(e):t;for(let t=0;t<n.length;t+=1)if(n[t](e))return!0;return!1};function Zt(t){return t instanceof r.Bs}function Kt(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function Jt(t,e=null){if(!e)return null;const n=r.Y1.atStart(t),i=r.Y1.atEnd(t);if("start"===e||!0===e)return n;if("end"===e)return i;const o=n.from,s=i.to;return"all"===e?r.Bs.create(t,Kt(0,o,s),Kt(t.content.size,o,s)):r.Bs.create(t,Kt(e,o,s),Kt(e,o,s))}function Qt(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const te=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const s=()=>{Qt()&&r.dom.focus(),requestAnimationFrame((()=>{n.isDestroyed||(r.focus(),(null===e||void 0===e?void 0:e.scrollIntoView)&&n.commands.scrollIntoView())}))};if(r.hasFocus()&&null===t||!1===t)return!0;if(o&&null===t&&!Zt(n.state.selection))return s(),!0;const a=Jt(i.doc,t)||n.state.selection,l=n.state.selection.eq(a);return o&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},ee=(t,e)=>n=>t.every(((t,r)=>e(t,{...n,index:r}))),ne=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e);function re(t){const e=`<body>${t}</body>`;return(new window.DOMParser).parseFromString(e,"text/html").body}function ie(t,e,n){if(n={slice:!0,parseOptions:{},...n},"object"===typeof t&&null!==t)try{return Array.isArray(t)&&t.length>0?s.HY.fromArray(t.map((t=>e.nodeFromJSON(t)))):e.nodeFromJSON(t)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",r),ie("",e,n)}if("string"===typeof t){const r=s.aw.fromSchema(e);return n.slice?r.parseSlice(re(t),n.parseOptions).content:r.parse(re(t),n.parseOptions)}return ie("",e,n)}function oe(t,e,n){const i=t.steps.length-1;if(i<e)return;const o=t.steps[i];if(!(o instanceof a.Pu||o instanceof a.FC))return;const s=t.mapping.maps[i];let l=0;s.forEach(((t,e,n,r)=>{0===l&&(l=r)})),t.setSelection(r.Y1.near(t.doc.resolve(l),n))}const se=t=>t.toString().startsWith("<"),ae=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{if(i){n={parseOptions:{},updateSelection:!0,...n};const i=ie(e,o.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions}});if("<>"===i.toString())return!0;let{from:s,to:a}="number"===typeof t?{from:t,to:t}:t,l=!0,c=!0;const u=se(i)?i:[i];if(u.forEach((t=>{t.check(),l=!!l&&(t.isText&&0===t.marks.length),c=!!c&&t.isBlock})),s===a&&c){const{parent:t}=r.doc.resolve(s),e=t.isTextblock&&!t.type.spec.code&&!t.childCount;e&&(s-=1,a+=1)}l?Array.isArray(e)?r.insertText(e.map((t=>t.text||"")).join(""),s,a):"object"===typeof e&&e&&e.text?r.insertText(e.text,s,a):r.insertText(e,s,a):r.replaceWith(s,a,i),n.updateSelection&&oe(r,r.steps.length-1,-1)}return!0},le=()=>({state:t,dispatch:e})=>y(t,e),ce=()=>({state:t,dispatch:e})=>b(t,e),ue=()=>({state:t,dispatch:e})=>u(t,e),de=()=>({state:t,dispatch:e})=>m(t,e);function he(){return"undefined"!==typeof navigator&&/Mac/.test(navigator.platform)}function fe(t){const e=t.split(/-(?!$)/);let n,r,i,o,s=e[e.length-1];"Space"===s&&(s=" ");for(let a=0;a<e.length-1;a+=1){const t=e[a];if(/^(cmd|meta|m)$/i.test(t))o=!0;else if(/^a(lt)?$/i.test(t))n=!0;else if(/^(c|ctrl|control)$/i.test(t))r=!0;else if(/^s(hift)?$/i.test(t))i=!0;else{if(!/^mod$/i.test(t))throw new Error(`Unrecognized modifier name: ${t}`);Qt()||he()?o=!0:r=!0}}return n&&(s=`Alt-${s}`),r&&(s=`Ctrl-${s}`),o&&(s=`Meta-${s}`),i&&(s=`Shift-${s}`),s}const pe=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const o=fe(t).split(/-(?!$)/),s=o.find((t=>!["Alt","Ctrl","Meta","Shift"].includes(t))),a=new KeyboardEvent("keydown",{key:"Space"===s?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction((()=>{n.someProp("handleKeyDown",(t=>t(n,a)))}));return null===l||void 0===l||l.steps.forEach((t=>{const e=t.map(r.mapping);e&&i&&r.maybeStep(e)})),!0};function me(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,s=e?tt(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,((t,e)=>{if(t.isText)return;const n=Math.max(r,e),o=Math.min(i,e+t.nodeSize);a.push({node:t,from:n,to:o})}));const l=i-r,c=a.filter((t=>!s||s.name===t.node.type.name)).filter((t=>Ht(t.node.attrs,n,{strict:!1})));if(o)return!!c.length;const u=c.reduce(((t,e)=>t+e.to-e.from),0);return u>=l}const ge=(t,e={})=>({state:n,dispatch:r})=>{const i=tt(t,n.schema),o=me(n,i,e);return!!o&&_(n,r)},ve=()=>({state:t,dispatch:e})=>M(t,e),ye=t=>({state:e,dispatch:n})=>{const r=tt(t,e.schema);return W(r)(e,n)},be=()=>({state:t,dispatch:e})=>w(t,e);function _e(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function we(t,e){const n="string"===typeof e?[e]:e;return Object.keys(t).reduce(((e,r)=>(n.includes(r)||(e[r]=t[r]),e)),{})}const xe=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const a=_e("string"===typeof t?t:t.name,r.schema);return!!a&&("node"===a&&(o=tt(t,r.schema)),"mark"===a&&(s=qt(t,r.schema)),i&&n.selection.ranges.forEach((t=>{r.doc.nodesBetween(t.$from.pos,t.$to.pos,((t,r)=>{o&&o===t.type&&n.setNodeMarkup(r,void 0,we(t.attrs,e)),s&&t.marks.length&&t.marks.forEach((i=>{s===i.type&&n.addMark(r,r+t.nodeSize,s.create(we(i.attrs,e)))}))}))})),!0)},Se=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),Ee=()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),Me=()=>({state:t,dispatch:e})=>h(t,e),Te=()=>({state:t,dispatch:e})=>g(t,e),Ce=()=>({state:t,dispatch:e})=>A(t,e),Ae=()=>({state:t,dispatch:e})=>D(t,e),ke=()=>({state:t,dispatch:e})=>L(t,e);function Oe(t,e,n={}){return ie(t,e,{slice:!1,parseOptions:n})}const Re=(t,e=!1,n={})=>({tr:r,editor:i,dispatch:o})=>{const{doc:s}=r,a=Oe(t,i.schema,n);return o&&r.replaceWith(0,s.content.size,a).setMeta("preventUpdate",!e),!0};function Pe(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Le(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function De(t){return e=>Le(e.$from,t)}function Ie(t,e){const n=s.PW.fromSchema(e).serializeFragment(t),r=document.implementation.createHTMLDocument(),i=r.createElement("div");return i.appendChild(n),i.innerHTML}function Ne(t,e){const n={from:0,to:t.content.size};return kt(t,n,e)}function Ue(t,e){const n=qt(e,t.schema),{from:r,to:i,empty:o}=t.selection,s=[];o?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,(t=>{s.push(...t.marks)}));const a=s.find((t=>t.type.name===n.name));return a?{...a.attrs}:{}}function Fe(t,e){const n=tt(e,t.schema),{from:r,to:i}=t.selection,o=[];t.doc.nodesBetween(r,i,(t=>{o.push(t)}));const s=o.reverse().find((t=>t.type.name===n.name));return s?{...s.attrs}:{}}function Be(t,e){const n=_e("string"===typeof e?e:e.name,t.schema);return"node"===n?Fe(t,e):"mark"===n?Ue(t,e):{}}function Ve(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach((e=>{const i=n.resolve(t-1),o=$t(i,e.type);o&&r.push({mark:e,...o})})):n.nodesBetween(t,e,((t,e)=>{r.push(...t.marks.map((n=>({from:e,to:e+t.nodeSize,mark:n}))))})),r}function ze(t,e,n){return Object.fromEntries(Object.entries(n).filter((([n])=>{const r=t.find((t=>t.type===e&&t.name===n));return!!r&&r.attribute.keepOnSplit})))}function je(t,e,n={}){const{empty:r,ranges:i}=t.selection,o=e?qt(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter((t=>!o||o.name===t.type.name)).find((t=>Ht(t.attrs,n,{strict:!1})));let s=0;const a=[];if(i.forEach((({$from:e,$to:n})=>{const r=e.pos,i=n.pos;t.doc.nodesBetween(r,i,((t,e)=>{if(!t.isText&&!t.marks.length)return;const n=Math.max(r,e),o=Math.min(i,e+t.nodeSize),l=o-n;s+=l,a.push(...t.marks.map((t=>({mark:t,from:n,to:o}))))}))})),0===s)return!1;const l=a.filter((t=>!o||o.name===t.mark.type.name)).filter((t=>Ht(t.mark.attrs,n,{strict:!1}))).reduce(((t,e)=>t+e.to-e.from),0),c=a.filter((t=>!o||t.mark.type!==o&&t.mark.type.excludes(o))).reduce(((t,e)=>t+e.to-e.from),0),u=l>0?l+c:l;return u>=s}function He(t,e,n={}){if(!e)return me(t,null,n)||je(t,null,n);const r=_e(e,t.schema);return"node"===r?me(t,e,n):"mark"===r&&je(t,e,n)}function We(t,e){const{nodeExtensions:n}=J(e),r=n.find((e=>e.name===t));if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=it(K(r,"group",i));return"string"===typeof o&&o.split(" ").includes("list")}function Ge(t){var e;const n=null===(e=t.type.createAndFill())||void 0===e?void 0:e.toJSON(),r=t.toJSON();return JSON.stringify(n)===JSON.stringify(r)}function $e(t){return t instanceof r.qv}function qe(t,e,n){const r=0,i=t.state.doc.content.size,o=Kt(e,r,i),s=Kt(n,r,i),a=t.coordsAtPos(o),l=t.coordsAtPos(s,-1),c=Math.min(a.top,l.top),u=Math.max(a.bottom,l.bottom),d=Math.min(a.left,l.left),h=Math.max(a.right,l.right),f=h-d,p=u-c,m=d,g=c,v={top:c,bottom:u,left:d,right:h,width:f,height:p,x:m,y:g};return{...v,toJSON:()=>v}}function Ye(t,e,n){var r;const{selection:i}=e;let o=null;if(Zt(i)&&(o=i.$cursor),o){const e=null!==(r=t.storedMarks)&&void 0!==r?r:o.marks();return!!n.isInSet(e)||!e.some((t=>t.type.excludes(n)))}const{ranges:s}=i;return s.some((({$from:e,$to:r})=>{let i=0===e.depth&&(t.doc.inlineContent&&t.doc.type.allowsMarkType(n));return t.doc.nodesBetween(e.pos,r.pos,((t,e,r)=>{if(i)return!1;if(t.isInline){const e=!r||r.type.allowsMarkType(n),o=!!n.isInSet(t.marks)||!t.marks.some((t=>t.type.excludes(n)));i=e&&o}return!i})),i}))}const Xe=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:s,ranges:a}=o,l=qt(t,r.schema);if(i)if(s){const t=Ue(r,l);n.addStoredMark(l.create({...t,...e}))}else a.forEach((t=>{const i=t.$from.pos,o=t.$to.pos;r.doc.nodesBetween(i,o,((t,r)=>{const s=Math.max(r,i),a=Math.min(r+t.nodeSize,o),c=t.marks.find((t=>t.type===l));c?t.marks.forEach((t=>{l===t.type&&n.addMark(s,a,l.create({...t.attrs,...e}))})):n.addMark(s,a,l.create(e))}))}));return Ye(r,n,l)},Ze=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),Ke=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const o=tt(t,n.schema);return o.isTextblock?i().command((({commands:t})=>{const r=N(o,e)(n);return!!r||t.clearNodes()})).command((({state:t})=>N(o,e)(t,r))).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Je=t=>({tr:e,dispatch:n})=>{if(n){const{doc:n}=e,i=Kt(t,0,n.content.size),o=r.qv.create(n,i);e.setSelection(o)}return!0},Qe=t=>({tr:e,dispatch:n})=>{if(n){const{doc:n}=e,{from:i,to:o}="number"===typeof t?{from:t,to:t}:t,s=r.Bs.atStart(n).from,a=r.Bs.atEnd(n).to,l=Kt(i,s,a),c=Kt(o,s,a),u=r.Bs.create(n,l,c);e.setSelection(u)}return!0},tn=t=>({state:e,dispatch:n})=>{const r=tt(t,e.schema);return q(r)(e,n)};function en(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter((t=>null===e||void 0===e?void 0:e.includes(t.type.name)));t.tr.ensureMarks(r)}}const nn=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:i,editor:o})=>{const{selection:s,doc:l}=e,{$from:c,$to:u}=s,d=o.extensionManager.attributes,h=ze(d,c.node().type.name,c.node().attrs);if(s instanceof r.qv&&s.node.isBlock)return!(!c.parentOffset||!(0,a.Ax)(l,c.pos))&&(i&&(t&&en(n,o.extensionManager.splittableMarks),e.split(c.pos).scrollIntoView()),!0);if(!c.parent.isBlock)return!1;if(i){const i=u.parentOffset===u.parent.content.size;s instanceof r.Bs&&e.deleteSelection();const l=0===c.depth?void 0:Pe(c.node(-1).contentMatchAt(c.indexAfter(-1)));let d=i&&l?[{type:l,attrs:h}]:void 0,f=(0,a.Ax)(e.doc,e.mapping.map(c.pos),1,d);if(d||f||!(0,a.Ax)(e.doc,e.mapping.map(c.pos),1,l?[{type:l}]:void 0)||(f=!0,d=l?[{type:l,attrs:h}]:void 0),f&&(e.split(e.mapping.map(c.pos),1,d),l&&!i&&!c.parentOffset&&c.parent.type!==l)){const t=e.mapping.map(c.before()),n=e.doc.resolve(t);c.node(-1).canReplaceWith(n.index(),n.index()+1,l)&&e.setNodeMarkup(e.mapping.map(c.before()),l)}t&&en(n,o.extensionManager.splittableMarks),e.scrollIntoView()}return!0},rn=t=>({tr:e,state:n,dispatch:i,editor:o})=>{var l;const c=tt(t,n.schema),{$from:u,$to:d}=n.selection,h=n.selection.node;if(h&&h.isBlock||u.depth<2||!u.sameParent(d))return!1;const f=u.node(-1);if(f.type!==c)return!1;const p=o.extensionManager.attributes;if(0===u.parent.content.size&&u.node(-1).childCount===u.indexAfter(-1)){if(2===u.depth||u.node(-3).type!==c||u.index(-2)!==u.node(-2).childCount-1)return!1;if(i){let t=s.HY.empty;const n=u.index(-1)?1:u.index(-2)?2:3;for(let e=u.depth-n;e>=u.depth-3;e-=1)t=s.HY.from(u.node(e).copy(t));const i=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3,o=ze(p,u.node().type.name,u.node().attrs),a=(null===(l=c.contentMatch.defaultType)||void 0===l?void 0:l.createAndFill(o))||void 0;t=t.append(s.HY.from(c.createAndFill(null,a)||void 0));const d=u.before(u.depth-(n-1));e.replace(d,u.after(-i),new s.p2(t,4-n,0));let h=-1;e.doc.nodesBetween(d,e.doc.content.size,((t,e)=>{if(h>-1)return!1;t.isTextblock&&0===t.content.size&&(h=e+1)})),h>-1&&e.setSelection(r.Bs.near(e.doc.resolve(h))),e.scrollIntoView()}return!0}const m=d.pos===u.end()?f.contentMatchAt(0).defaultType:null,g=ze(p,f.type.name,f.attrs),v=ze(p,u.node().type.name,u.node().attrs);e.delete(u.pos,d.pos);const y=m?[{type:c,attrs:g},{type:m,attrs:v}]:[{type:c,attrs:g}];if(!(0,a.Ax)(e.doc,u.pos,2))return!1;if(i){const{selection:t,storedMarks:r}=n,{splittableMarks:s}=o.extensionManager,a=r||t.$to.parentOffset&&t.$from.marks();if(e.split(u.pos,2,y).scrollIntoView(),!a||!i)return!0;const l=a.filter((t=>s.includes(t.type.name)));e.ensureMarks(l)}return!0},on=(t,e)=>{const n=De((t=>t.type===e))(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===r)return!0;const i=t.doc.nodeAt(r),o=n.node.type===(null===i||void 0===i?void 0:i.type)&&(0,a.Mn)(t.doc,n.pos);return!o||(t.join(n.pos),!0)},sn=(t,e)=>{const n=De((t=>t.type===e))(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(void 0===r)return!0;const i=t.doc.nodeAt(r),o=n.node.type===(null===i||void 0===i?void 0:i.type)&&(0,a.Mn)(t.doc,r);return!o||(t.join(r),!0)},an=(t,e,n,r={})=>({editor:i,tr:o,state:s,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:h}=i.extensionManager,f=tt(t,s.schema),p=tt(e,s.schema),{selection:m,storedMarks:g}=s,{$from:v,$to:y}=m,b=v.blockRange(y),_=g||m.$to.parentOffset&&m.$from.marks();if(!b)return!1;const w=De((t=>We(t.type.name,d)))(m);if(b.depth>=1&&w&&b.depth-w.depth<=1){if(w.node.type===f)return c.liftListItem(p);if(We(w.node.type.name,d)&&f.validContent(w.node.content)&&a)return l().command((()=>(o.setNodeMarkup(w.pos,f),!0))).command((()=>on(o,f))).command((()=>sn(o,f))).run()}return n&&_&&a?l().command((()=>{const t=u().wrapInList(f,r),e=_.filter((t=>h.includes(t.type.name)));return o.ensureMarks(e),!!t||c.clearNodes()})).wrapInList(f,r).command((()=>on(o,f))).command((()=>sn(o,f))).run():l().command((()=>{const t=u().wrapInList(f,r);return!!t||c.clearNodes()})).wrapInList(f,r).command((()=>on(o,f))).command((()=>sn(o,f))).run()},ln=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,s=qt(t,r.schema),a=je(r,s,e);return a?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,e)},cn=(t,e,n={})=>({state:r,commands:i})=>{const o=tt(t,r.schema),s=tt(e,r.schema),a=me(r,o,n);return a?i.setNode(s):i.setNode(o,n)},un=(t,e={})=>({state:n,commands:r})=>{const i=tt(t,n.schema),o=me(n,i,e);return o?r.lift(i):r.wrapIn(i,e)},dn=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){const e=t.tr,n=o.transform;for(let t=n.steps.length-1;t>=0;t-=1)e.step(n.steps[t].invert(n.docs[t]));if(o.text){const n=e.doc.resolve(o.from).marks();e.replaceWith(o.from,o.to,t.schema.text(o.text,n))}else e.delete(o.from,o.to)}return!0}}return!1},hn=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach((e=>{t.removeMark(e.$from.pos,e.$to.pos)})),!0},fn=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:s=!1}=e,{selection:a}=n,l=qt(t,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&s){let{from:t,to:e}=a;const r=null===(o=c.marks().find((t=>t.type===l)))||void 0===o?void 0:o.attrs,i=$t(c,l,r);i&&(t=i.from,e=i.to),n.removeMark(t,e,l)}else d.forEach((t=>{n.removeMark(t.$from.pos,t.$to.pos,l)}));return n.removeStoredMark(l),!0},pn=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const a=_e("string"===typeof t?t:t.name,r.schema);return!!a&&("node"===a&&(o=tt(t,r.schema)),"mark"===a&&(s=qt(t,r.schema)),i&&n.selection.ranges.forEach((t=>{const i=t.$from.pos,a=t.$to.pos;r.doc.nodesBetween(i,a,((t,r)=>{o&&o===t.type&&n.setNodeMarkup(r,void 0,{...t.attrs,...e}),s&&t.marks.length&&t.marks.forEach((o=>{if(s===o.type){const l=Math.max(r,i),c=Math.min(r+t.nodeSize,a);n.addMark(l,c,s.create({...o.attrs,...e}))}}))}))})),!0)},mn=(t,e={})=>({state:n,dispatch:r})=>{const i=tt(t,n.schema);return I(i,e)(n,r)},gn=(t,e={})=>({state:n,dispatch:r})=>{const i=tt(t,n.schema);return j(i,e)(n,r)};var vn=Object.freeze({__proto__:null,blur:Pt,clearContent:Lt,clearNodes:Dt,command:It,createParagraphNear:Nt,deleteCurrentNode:Ut,deleteNode:Ft,deleteRange:Bt,deleteSelection:Vt,enter:zt,exitCode:jt,extendMarkRange:Yt,first:Xt,focus:te,forEach:ee,insertContent:ne,insertContentAt:ae,joinUp:le,joinDown:ce,joinBackward:ue,joinForward:de,keyboardShortcut:pe,lift:ge,liftEmptyBlock:ve,liftListItem:ye,newlineInCode:be,resetAttributes:xe,scrollIntoView:Se,selectAll:Ee,selectNodeBackward:Me,selectNodeForward:Te,selectParentNode:Ce,selectTextblockEnd:Ae,selectTextblockStart:ke,setContent:Re,setMark:Xe,setMeta:Ze,setNode:Ke,setNodeSelection:Je,setTextSelection:Qe,sinkListItem:tn,splitBlock:nn,splitListItem:rn,toggleList:an,toggleMark:ln,toggleNode:cn,toggleWrap:un,undoInputRule:dn,unsetAllMarks:hn,unsetMark:fn,updateAttributes:pn,wrapIn:mn,wrapInList:gn});const yn=At.create({name:"commands",addCommands(){return{...vn}}}),bn=At.create({name:"editable",addProseMirrorPlugins(){return[new r.Sy({key:new r.H$("editable"),props:{editable:()=>this.editor.options.editable}})]}}),_n=At.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new r.Sy({key:new r.H$("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),wn=At.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first((({commands:t})=>[()=>t.undoInputRule(),()=>t.command((({tr:e})=>{const{selection:n,doc:i}=e,{empty:o,$anchor:s}=n,{pos:a,parent:l}=s,c=r.Y1.atStart(i).from===a;return!(!(o&&c&&l.type.isTextblock)||l.textContent.length)&&t.clearNodes()})),()=>t.deleteSelection(),()=>t.joinBackward(),()=>t.selectNodeBackward()])),e=()=>this.editor.commands.first((({commands:t})=>[()=>t.deleteSelection(),()=>t.deleteCurrentNode(),()=>t.joinForward(),()=>t.selectNodeForward()])),n=()=>this.editor.commands.first((({commands:t})=>[()=>t.newlineInCode(),()=>t.createParagraphNear(),()=>t.liftEmptyBlock(),()=>t.splitBlock()])),i={Enter:n,"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...i},s={...i,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Qt()||he()?s:o},addProseMirrorPlugins(){return[new r.Sy({key:new r.H$("clearDocument"),appendTransaction:(t,e,n)=>{const i=t.some((t=>t.docChanged))&&!e.doc.eq(n.doc);if(!i)return;const{empty:o,from:s,to:a}=e.selection,l=r.Y1.atStart(e.doc).from,c=r.Y1.atEnd(e.doc).to,u=s===l&&a===c;if(o||!u)return;const d=0===n.doc.textBetween(0,n.doc.content.size," "," ").length;if(!d)return;const h=n.tr,f=Y({state:n,transaction:h}),{commands:p}=new X({editor:this.editor,state:f});return p.clearNodes(),h.steps.length?h:void 0}})]}}),xn=At.create({name:"tabindex",addProseMirrorPlugins(){return[new r.Sy({key:new r.H$("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var Sn=Object.freeze({__proto__:null,ClipboardTextSerializer:Rt,Commands:yn,Editable:bn,FocusEvents:_n,Keymap:wn,Tabindex:xn});const En='.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 1px !important;\n  height: 1px !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}';function Mn(t,e){const n=document.querySelector("style[data-tiptap-style]");if(null!==n)return n;const r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.setAttribute("data-tiptap-style",""),r.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(r),r}class Tn extends Z{constructor(t={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout((()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))}),0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=Mn(En,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(t,e){const n=rt(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});this.view.updateState(r)}unregisterPlugin(t){if(this.isDestroyed)return;const e="string"===typeof t?`${t}$`:t.key,n=this.state.reconfigure({plugins:this.state.plugins.filter((t=>!t.key.startsWith(e)))});this.view.updateState(n)}createExtensionManager(){const t=this.options.enableCoreExtensions?Object.values(Sn):[],e=[...t,...this.options.extensions].filter((t=>["extension","node","mark"].includes(null===t||void 0===t?void 0:t.type)));this.extensionManager=new Et(e,this)}createCommandManager(){this.commandManager=new X({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const t=Oe(this.options.content,this.schema,this.options.parseOptions),e=Jt(t,this.options.autofocus);this.view=new i.tk(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:r.yy.create({doc:t,selection:e||void 0})});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.createNodeViews();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction)return this.capturedTransaction?void t.steps.forEach((t=>{var e;return null===(e=this.capturedTransaction)||void 0===e?void 0:e.step(t)})):void(this.capturedTransaction=t);const e=this.state.apply(t),n=!this.state.selection.eq(e.selection);this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t}),n&&this.emit("selectionUpdate",{editor:this,transaction:t});const r=t.getMeta("focus"),i=t.getMeta("blur");r&&this.emit("focus",{editor:this,event:r.event,transaction:t}),i&&this.emit("blur",{editor:this,event:i.event,transaction:t}),t.docChanged&&!t.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:t})}getAttributes(t){return Be(this.state,t)}isActive(t,e){const n="string"===typeof t?t:null,r="string"===typeof t?e:t;return He(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Ie(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e="\n\n",textSerializers:n={}}=t||{};return Ne(this.state.doc,{blockSeparator:e,textSerializers:{...Ot(this.schema),...n}})}get isEmpty(){return Ge(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var t;return!(null===(t=this.view)||void 0===t?void 0:t.docView)}}function Cn(t){return new pt({find:t.find,handler:({state:e,range:n,match:r})=>{const i=it(t.getAttributes,void 0,r);if(!1===i||null===i)return null;const{tr:o}=e,s=r[r.length-1],a=r[0];let l=n.to;if(s){const r=a.search(/\S/),c=n.from+a.indexOf(s),u=c+s.length,d=Ve(n.from,n.to,e.doc).filter((e=>{const n=e.mark.type.excluded;return n.find((n=>n===t.type&&n!==e.mark.type))})).filter((t=>t.to>c));if(d.length)return null;u<n.to&&o.delete(u,n.to),c>n.from&&o.delete(n.from+r,c),l=n.from+r+s.length,o.addMark(n.from+r,l,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}function An(t){return new pt({find:t.find,handler:({state:e,range:n,match:r})=>{const i=it(t.getAttributes,void 0,r)||{},{tr:o}=e,s=n.from;let a=n.to;if(r[1]){const e=r[0].lastIndexOf(r[1]);let n=s+e;n>a?n=a:a=n+r[1].length;const l=r[0][r[0].length-1];o.insertText(l,s+r[0].length-1),o.replaceWith(n,a,t.type.create(i))}else r[0]&&o.replaceWith(s,a,t.type.create(i))}})}function kn(t){return new pt({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),o=it(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)}})}function On(t){return new pt({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const o=it(t.getAttributes,void 0,r)||{},s=e.tr.delete(n.from,n.to),l=s.doc.resolve(n.from),c=l.blockRange(),u=c&&(0,a.nd)(c,t.type,o);if(!u)return null;if(s.wrap(c,u),t.keepMarks&&t.editor){const{selection:n,storedMarks:r}=e,{splittableMarks:i}=t.editor.extensionManager,o=r||n.$to.parentOffset&&n.$from.marks();if(o){const t=o.filter((t=>i.includes(t.type.name)));s.ensureMarks(t)}}if(t.keepAttributes){const e="bulletList"===t.type.name||"orderedList"===t.type.name?"listItem":"taskList";i().updateAttributes(e,o).run()}const d=s.doc.resolve(n.from-1).nodeBefore;d&&d.type===t.type&&(0,a.Mn)(s.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,d))&&s.join(n.from-1)}})}class Rn{constructor(t={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=it(K(this,"addOptions",{name:this.name}))),this.storage=it(K(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Rn(t)}configure(t={}){const e=this.extend();return e.options=Ct(this.options,t),e.storage=it(K(e,"addStorage",{name:e.name,options:e.options})),e}extend(t={}){const e=new Rn(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=it(K(e,"addOptions",{name:e.name})),e.storage=it(K(e,"addStorage",{name:e.name,options:e.options})),e}static handleExit({editor:t,mark:e}){const{tr:n}=t.state,r=t.state.selection.$from,i=r.pos===r.end();if(i){const i=r.marks(),o=!!i.find((t=>(null===t||void 0===t?void 0:t.type.name)===e.name));if(!o)return!1;const s=i.find((t=>(null===t||void 0===t?void 0:t.type.name)===e.name));return s&&n.removeStoredMark(s),n.insertText(" ",r.pos),t.view.dispatch(n),!0}return!1}}class Pn{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=it(K(this,"addOptions",{name:this.name}))),this.storage=it(K(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Pn(t)}configure(t={}){const e=this.extend();return e.options=Ct(this.options,t),e.storage=it(K(e,"addStorage",{name:e.name,options:e.options})),e}extend(t={}){const e=new Pn(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=it(K(e,"addOptions",{name:e.name})),e.storage=it(K(e,"addStorage",{name:e.name,options:e.options})),e}}function Ln(t){return new bt({find:t.find,handler:({state:e,range:n,match:r})=>{const i=it(t.getAttributes,void 0,r);if(!1===i||null===i)return null;const{tr:o}=e,s=r[r.length-1],a=r[0];let l=n.to;if(s){const r=a.search(/\S/),c=n.from+a.indexOf(s),u=c+s.length,d=Ve(n.from,n.to,e.doc).filter((e=>{const n=e.mark.type.excluded;return n.find((n=>n===t.type&&n!==e.mark.type))})).filter((t=>t.to>c));if(d.length)return null;u<n.to&&o.delete(u,n.to),c>n.from&&o.delete(n.from+r,c),l=n.from+r+s.length,o.addMark(n.from+r,l,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}},1872:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(292),i=n(1418);const o=r.hj.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize"}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(null===t||void 0===t?void 0:t.node)||this.editor.state.doc,n=(null===t||void 0===t?void 0:t.mode)||this.options.mode;if("textSize"===n){const t=e.textBetween(0,e.content.size,void 0," ");return t.length}return e.nodeSize},this.storage.words=t=>{const e=(null===t||void 0===t?void 0:t.node)||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," "),r=n.split(" ").filter((t=>""!==t));return r.length}},addProseMirrorPlugins(){return[new i.Sy({key:new i.H$("characterCount"),filterTransaction:(t,e)=>{const n=this.options.limit;if(!t.docChanged||0===n||null===n||void 0===n)return!0;const r=this.storage.characters({node:e.doc}),i=this.storage.characters({node:t.doc});if(i<=n)return!0;if(r>n&&i>n&&i<=r)return!0;if(r>n&&i>n&&i>r)return!1;const o=t.getMeta("paste");if(!o)return!1;const s=t.selection.$head.pos,a=i-n,l=s-a,c=s;t.deleteRange(l,c);const u=this.storage.characters({node:t.doc});return!(u>n)}})]}})},6602:function(t,e,n){"use strict";n.d(e,{Z:function(){return v}});var r=n(292),i=(n(7658),n(7974)),o=n(1617),s=n(1418),a=(n(2405),n(9087)),l=n(4714),c=n(3035);const u=t=>{const e=document.createElement("span");e.classList.add("ProseMirror-yjs-cursor"),e.setAttribute("style",`border-color: ${t.color}`);const n=document.createElement("div");n.setAttribute("style",`background-color: ${t.color}`),n.insertBefore(document.createTextNode(t.name),null);const r=document.createTextNode("⁠"),i=document.createTextNode("⁠");return e.insertBefore(r,null),e.insertBefore(n,null),e.insertBefore(i,null),e},d=t=>({style:`background-color: ${t.color}70`,class:"ProseMirror-yjs-selection"}),h=/^#[0-9a-fA-F]{6}$/,f=(t,e,n,r)=>{const s=l.Gt.getState(t),u=s.doc,d=[];return null!=s.snapshot||null!=s.prevSnapshot||null===s.binding?o.EH.create(t.doc,[]):(e.getStates().forEach(((e,l)=>{if(l!==u.clientID&&null!=e.cursor){const f=e.user||{};null==f.color?f.color="#ffa500":h.test(f.color)||console.warn("A user uses an unsupported color format",f),null==f.name&&(f.name=`User: ${l}`);let p=(0,a.SF)(u,s.type,i.og(e.cursor.anchor),s.binding.mapping),m=(0,a.SF)(u,s.type,i.og(e.cursor.head),s.binding.mapping);if(null!==p&&null!==m){const e=c.Fp(t.doc.content.size-1,0);p=c.VV(p,e),m=c.VV(m,e),d.push(o.p.widget(m,(()=>n(f)),{key:l+"",side:10}));const i=c.VV(p,m),s=c.Fp(p,m);d.push(o.p.inline(i,s,r(f),{inclusiveEnd:!0,inclusiveStart:!1}))}}})),o.EH.create(t.doc,d))},p=(t,{cursorBuilder:e=u,selectionBuilder:n=d,getSelection:r=(t=>t.selection)}={},o="cursor")=>new s.Sy({key:l.uJ,state:{init(r,i){return f(i,t,e,n)},apply(r,i,o,s){const a=l.Gt.getState(s),c=r.getMeta(l.uJ);return a&&a.isChangeOrigin||c&&c.awarenessUpdated?f(s,t,e,n):i.map(r.mapping,r.doc)}},props:{decorations:t=>l.uJ.getState(t)},view:e=>{const n=()=>{e.docView&&(0,a.US)(e,l.uJ,{awarenessUpdated:!0})},s=()=>{const n=l.Gt.getState(e.state),s=t.getLocalState()||{};if(null!=n.binding)if(e.hasFocus()){const l=r(e.state),c=(0,a.JR)(l.anchor,n.type,n.binding.mapping),u=(0,a.JR)(l.head,n.type,n.binding.mapping);null!=s.cursor&&i.Uq(i.og(s.cursor.anchor),c)&&i.Uq(i.og(s.cursor.head),u)||t.setLocalStateField(o,{anchor:c,head:u})}else null!=s.cursor&&null!==(0,a.SF)(n.doc,n.type,i.og(s.cursor.anchor),n.binding.mapping)&&t.setLocalStateField(o,null)};return t.on("change",n),e.dom.addEventListener("focusin",s),e.dom.addEventListener("focusout",s),{update:s,destroy:()=>{e.dom.removeEventListener("focusin",s),e.dom.removeEventListener("focusout",s),t.off("change",n),t.setLocalStateField(o,null)}}}}),m=t=>Array.from(t.entries()).map((([t,e])=>({clientId:t,...e.user}))),g=()=>null,v=r.hj.create({name:"collaborationCursor",addOptions(){return{provider:null,user:{name:null,color:null},render:t=>{const e=document.createElement("span");e.classList.add("collaboration-cursor__caret"),e.setAttribute("style",`border-color: ${t.color}`);const n=document.createElement("div");return n.classList.add("collaboration-cursor__label"),n.setAttribute("style",`background-color: ${t.color}`),n.insertBefore(document.createTextNode(t.name),null),e.insertBefore(n,null),e},onUpdate:g}},onCreate(){this.options.onUpdate!==g&&console.warn('[tiptap warn]: DEPRECATED: The "onUpdate" option is deprecated. Please use `editor.storage.collaborationCursor.users` instead. Read more: https://tiptap.dev/api/extensions/collaboration-cursor')},addStorage(){return{users:[]}},addCommands(){return{updateUser:t=>()=>(this.options.user=t,this.options.provider.awareness.setLocalStateField("user",this.options.user),!0),user:t=>({editor:e})=>(console.warn('[tiptap warn]: DEPRECATED: The "user" command is deprecated. Please use "updateUser" instead. Read more: https://tiptap.dev/api/extensions/collaboration-cursor'),e.commands.updateUser(t))}},addProseMirrorPlugins(){return[p((()=>(this.options.provider.awareness.setLocalStateField("user",this.options.user),this.storage.users=m(this.options.provider.awareness.states),this.options.provider.awareness.on("update",(()=>{this.storage.users=m(this.options.provider.awareness.states)})),this.options.provider.awareness))(),{cursorBuilder:this.options.render})]}})},4917:function(t,e,n){"use strict";n.d(e,{ZP:function(){return J}});var r=n(292),i=n(4714),o=n(1418),s=(n(7658),n(1703),n(5611)),a=n(8443),l=n(3035),c=n(3913),u=n(8674);const d=/[\uD800-\uDBFF]/,h=/[\uDC00-\uDFFF]/,f=(t,e)=>{let n=0,r=0;while(n<t.length&&n<e.length&&t[n]===e[n])n++;n>0&&d.test(t[n-1])&&n--;while(r+n<t.length&&r+n<e.length&&t[t.length-r-1]===e[e.length-r-1])r++;return r>0&&h.test(t[t.length-r])&&r--,{index:n,remove:t.length-n-r,insert:e.slice(n,e.length-r)}},p=f;var m=n(1755),g=n(7974),v=n(9087),y=n(3751),b=n(2269),_=n(5329),w=n(9765);const x=(t,e)=>void 0===e?!t.deleted:e.sv.has(t.id.client)&&e.sv.get(t.id.client)>t.id.clock&&!g.uY(e.ds,t.id),S=[{light:"#ecd44433",dark:"#ecd444"}],E=(t,e,n)=>{if(!t.has(n)){if(t.size<e.length){const n=u.Ue();t.forEach((t=>n.add(t))),e=e.filter((t=>!n.has(t)))}t.set(n,y.kw(e))}return t.get(n)},M=(t,{colors:e=S,colorMapping:n=new Map,permanentUserData:r=null,onFirstRender:s=(()=>{})}={})=>{let a,l=!1;const c=new o.Sy({props:{editable:t=>{const e=i.Gt.getState(t);return null==e.snapshot&&null==e.prevSnapshot}},key:i.Gt,state:{init:(i,o)=>({type:t,doc:t.doc,binding:null,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,colors:e,colorMapping:n,permanentUserData:r}),apply:(t,e)=>{const n=t.getMeta(i.Gt);if(void 0!==n){e=Object.assign({},e);for(const t in n)e[t]=n[t]}return e.isChangeOrigin=void 0!==n&&!!n.isChangeOrigin,null!==e.binding&&(void 0===n||null==n.snapshot&&null==n.prevSnapshot||w.Vs(0,(()=>{null==e.binding||e.binding.isDestroyed||(null==n.restore?e.binding._renderSnapshot(n.snapshot,n.prevSnapshot,e):(e.binding._renderSnapshot(n.snapshot,n.snapshot,e),delete e.restore,delete e.snapshot,delete e.prevSnapshot,e.binding._prosemirrorChanged(e.binding.prosemirrorView.state.doc)))}))),e}},view:e=>{const n=new A(t,e);return null!=a&&clearTimeout(a),a=w.Vs(0,(()=>{n._forceRerender(),e.dispatch(e.state.tr.setMeta(i.Gt,{binding:n})),s()})),{update:()=>{const t=c.getState(e.state);null==t.snapshot&&null==t.prevSnapshot&&(l||null!==e.state.doc.content.findDiffStart(e.state.doc.type.createAndFill().content))&&(l=!0,n._prosemirrorChanged(e.state.doc))},destroy:()=>{clearTimeout(a),n.destroy()}}}});return c},T=(t,e,n)=>{if(null!==e&&null!==e.anchor&&null!==e.head){const r=(0,v.SF)(n.doc,n.type,e.anchor,n.mapping),i=(0,v.SF)(n.doc,n.type,e.head,n.mapping);null!==r&&null!==i&&(t=t.setSelection(o.Bs.create(t.doc,r,i)))}},C=(t,e)=>({anchor:(0,v.JR)(e.selection.anchor,t.type,t.mapping),head:(0,v.JR)(e.selection.head,t.type,t.mapping)});class A{constructor(t,e){this.type=t,this.prosemirrorView=e,this.mux=(0,s.M)(),this.isDestroyed=!1,this.mapping=new Map,this._observeFunction=this._typeChanged.bind(this),this.doc=t.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{null===this.beforeTransactionSelection&&(this.beforeTransactionSelection=C(this,e.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),t.observeDeep(this._observeFunction),this._domSelectionInView=null}get _tr(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}_isLocalCursorInView(){return!!this.prosemirrorView.hasFocus()&&(b.jU&&null===this._domSelectionInView&&(w.Vs(0,(()=>{this._domSelectionInView=null})),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView)}_isDomSelectionInView(){const t=this.prosemirrorView._root.getSelection(),e=this.prosemirrorView._root.createRange();e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset);const n=e.getClientRects();0===n.length&&e.startContainer&&e.collapsed&&e.selectNodeContents(e.startContainer);const r=e.getBoundingClientRect(),i=_.JU.documentElement;return r.bottom>=0&&r.right>=0&&r.left<=(window.innerWidth||i.clientWidth||0)&&r.top<=(window.innerHeight||i.clientHeight||0)}renderSnapshot(t,e){e||(e=g.Ox(g.VG(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(i.Gt,{snapshot:t,prevSnapshot:e}))}unrenderSnapshot(){this.mapping=new Map,this.mux((()=>{const t=this.type.toArray().map((t=>O(t,this.prosemirrorView.state.schema,this.mapping))).filter((t=>null!==t)),e=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new a.p2(new a.HY(t),0,0));e.setMeta(i.Gt,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(e)}))}_forceRerender(){this.mapping=new Map,this.mux((()=>{const t=this.type.toArray().map((t=>O(t,this.prosemirrorView.state.schema,this.mapping))).filter((t=>null!==t)),e=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new a.p2(new a.HY(t),0,0));this.prosemirrorView.dispatch(e.setMeta(i.Gt,{isChangeOrigin:!0}))}))}_renderSnapshot(t,e,n){t||(t=g.CO(this.doc)),this.mapping=new Map,this.mux((()=>{this.doc.transact((r=>{const o=n.permanentUserData;o&&o.dss.forEach((t=>{g.UQ(r,t,(t=>{}))}));const s=(t,e)=>{const r="added"===t?o.getUserByClientId(e.client):o.getUserByDeletedId(e);return{user:r,type:t,color:E(n.colorMapping,n.colors,r)}},l=g.ud(this.type,new g.aC(e.ds,t.sv)).map((n=>!n._item.deleted||x(n._item,t)||x(n._item,e)?O(n,this.prosemirrorView.state.schema,new Map,t,e,s):null)).filter((t=>null!==t)),c=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new a.p2(new a.HY(l),0,0));this.prosemirrorView.dispatch(c.setMeta(i.Gt,{isChangeOrigin:!0}))}),i.Gt)}))}_typeChanged(t,e){const n=i.Gt.getState(this.prosemirrorView.state);0!==t.length&&null==n.snapshot&&null==n.prevSnapshot?this.mux((()=>{const t=(t,e)=>this.mapping.delete(e);g.UQ(e,e.deleteSet,(t=>t.constructor===g.ck&&this.mapping.delete(t.content.type))),e.changed.forEach(t),e.changedParentTypes.forEach(t);const n=this.type.toArray().map((t=>k(t,this.prosemirrorView.state.schema,this.mapping))).filter((t=>null!==t));let r=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new a.p2(new a.HY(n),0,0));T(r,this.beforeTransactionSelection,this),r=r.setMeta(i.Gt,{isChangeOrigin:!0}),null!==this.beforeTransactionSelection&&this._isLocalCursorInView()&&r.scrollIntoView(),this.prosemirrorView.dispatch(r)})):this.renderSnapshot(n.snapshot,n.prevSnapshot)}_prosemirrorChanged(t){this.mux((()=>{this.doc.transact((()=>{G(this.doc,this.type,t,this.mapping),this.beforeTransactionSelection=C(this,this.prosemirrorView.state)}),i.Gt)}))}destroy(){this.isDestroyed=!0,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions)}}const k=(t,e,n,r,i,o)=>{const s=n.get(t);if(void 0===s){if(t instanceof g.lt)return O(t,e,n,r,i,o);throw m.Nw()}return s},O=(t,e,n,r,o,s)=>{const a=[],l=t=>{if(t.constructor===g.lt){const i=k(t,e,n,r,o,s);null!==i&&a.push(i)}else{const i=R(t,e,n,r,o,s);null!==i&&i.forEach((t=>{null!==t&&a.push(t)}))}};void 0===r||void 0===o?t.toArray().forEach(l):g.ud(t,new g.aC(o.ds,r.sv)).forEach(l);try{const i=t.getAttributes(r);void 0!==r&&(x(t._item,r)?x(t._item,o)||(i.ychange=s?s("added",t._item.id):{type:"added"}):i.ychange=s?s("removed",t._item.id):{type:"removed"});const l=e.node(t.nodeName,i,a);return n.set(t,l),l}catch(c){return t.doc.transact((e=>{t._item.delete(e)}),i.Gt),n.delete(t),null}},R=(t,e,n,r,o,s)=>{const a=[],l=t.toDelta(r,o,s);try{for(let t=0;t<l.length;t++){const n=l[t],r=[];for(const t in n.attributes)r.push(e.mark(t,n.attributes[t]));a.push(e.text(n.insert,r))}}catch(c){return t.doc.transact((e=>{t._item.delete(e)}),i.Gt),null}return a},P=(t,e)=>{const n=new g.eI,r=t.map((t=>({insert:t.text,attributes:W(t.marks)})));return n.applyDelta(r),e.set(n,t),n},L=(t,e)=>{const n=new g.lt(t.type.name);for(const r in t.attrs){const e=t.attrs[r];null!==e&&"ychange"!==r&&n.setAttribute(r,e)}return n.insert(0,U(t).map((t=>D(t,e)))),e.set(n,t),n},D=(t,e)=>t instanceof Array?P(t,e):L(t,e),I=t=>"object"===typeof t&&null!==t,N=(t,e)=>{const n=Object.keys(t).filter((e=>null!==t[e]));let r=n.length===Object.keys(e).filter((t=>null!==e[t])).length;for(let i=0;i<n.length&&r;i++){const o=n[i],s=t[o],a=e[o];r="ychange"===o||s===a||I(s)&&I(a)&&N(s,a)}return r},U=t=>{const e=t.content.content,n=[];for(let r=0;r<e.length;r++){const t=e[r];if(t.isText){const t=[];for(let n=e[r];r<e.length&&n.isText;n=e[++r])t.push(n);r--,n.push(t)}else n.push(t)}return n},F=(t,e)=>{const n=t.toDelta();return n.length===e.length&&n.every(((t,n)=>t.insert===e[n].text&&c.XP(t.attributes||{}).length===e[n].marks.length&&e[n].marks.every((e=>N(t.attributes[e.type.name]||{},e.attrs)))))},B=(t,e)=>{if(t instanceof g.lt&&!(e instanceof Array)&&$(t,e)){const n=U(e);return t._length===n.length&&N(t.getAttributes(),e.attrs)&&t.toArray().every(((t,e)=>B(t,n[e])))}return t instanceof g.eI&&e instanceof Array&&F(t,e)},V=(t,e)=>t===e||t instanceof Array&&e instanceof Array&&t.length===e.length&&t.every(((t,n)=>e[n]===t)),z=(t,e,n)=>{const r=t.toArray(),i=U(e),o=i.length,s=r.length,a=l.VV(s,o);let c=0,u=0,d=!1;for(;c<a;c++){const t=r[c],e=i[c];if(V(n.get(t),e))d=!0;else if(!B(t,e))break}for(;c+u<a;u++){const t=r[s-u-1],e=i[o-u-1];if(V(n.get(t),e))d=!0;else if(!B(t,e))break}return{equalityFactor:c+u,foundMappedChild:d}},j=t=>{let e="",n=t._start;const r={};while(null!==n)n.deleted||(n.countable&&n.content instanceof g.$_?e+=n.content.str:n.content instanceof g.MM&&(r[n.content.key]=null)),n=n.right;return{str:e,nAttrs:r}},H=(t,e,n)=>{n.set(t,e);const{nAttrs:r,str:i}=j(t),o=e.map((t=>({insert:t.text,attributes:Object.assign({},r,W(t.marks))}))),{insert:s,remove:a,index:l}=p(i,o.map((t=>t.insert)).join(""));t.delete(l,a),t.insert(l,s),t.applyDelta(o.map((t=>({retain:t.insert.length,attributes:t.attributes}))))},W=t=>{const e={};return t.forEach((t=>{"ychange"!==t.type.name&&(e[t.type.name]=t.attrs)})),e},G=(t,e,n,r)=>{if(e instanceof g.lt&&e.nodeName!==n.type.name)throw new Error("node name mismatch!");if(r.set(e,n),e instanceof g.lt){const t=e.getAttributes(),r=n.attrs;for(const n in r)null!==r[n]?t[n]!==r[n]&&"ychange"!==n&&e.setAttribute(n,r[n]):e.removeAttribute(n);for(const n in t)void 0===r[n]&&e.removeAttribute(n)}const o=U(n),s=o.length,a=e.toArray(),c=a.length,u=l.VV(s,c);let d=0,h=0;for(;d<u;d++){const t=a[d],e=o[d];if(!V(r.get(t),e)){if(!B(t,e))break;r.set(t,e)}}for(;h+d+1<u;h++){const t=a[c-h-1],e=o[s-h-1];if(!V(r.get(t),e)){if(!B(t,e))break;r.set(t,e)}}t.transact((()=>{while(c-d-h>0&&s-d-h>0){const n=a[d],i=o[d],l=a[c-h-1],u=o[s-h-1];if(n instanceof g.eI&&i instanceof Array)F(n,i)||H(n,i,r),d+=1;else{let o=n instanceof g.lt&&$(n,i),s=l instanceof g.lt&&$(l,u);if(o&&s){const t=z(n,i,r),e=z(l,u,r);t.foundMappedChild&&!e.foundMappedChild?s=!1:!t.foundMappedChild&&e.foundMappedChild||t.equalityFactor<e.equalityFactor?o=!1:s=!1}o?(G(t,n,i,r),d+=1):s?(G(t,l,u,r),h+=1):(e.delete(d,1),e.insert(d,[D(i,r)]),d+=1)}}const n=c-d-h;if(1===c&&0===s&&a[0]instanceof g.eI?a[0].delete(0,a[0].length):n>0&&e.delete(d,n),d+h<s){const t=[];for(let e=d;e<s-h;e++)t.push(D(o[e],r));e.insert(d,t)}}),i.Gt)},$=(t,e)=>!(e instanceof Array)&&t.nodeName===e.type.name,q=t=>{const e=i.Gk.getState(t).undoManager;if(null!=e)return e.undo(),!0},Y=t=>{const e=i.Gk.getState(t).undoManager;if(null!=e)return e.redo(),!0},X=new Set(["paragraph"]),Z=(t,e)=>!(t instanceof g.ck)||!(t.content instanceof g.zc)||!(t.content.type instanceof g.xv||t.content.type instanceof g.lt&&e.has(t.content.type.nodeName))||0===t.content.type._length,K=({protectedNodes:t=X,trackedOrigins:e=[],undoManager:n=null}={})=>new o.Sy({key:i.Gk,state:{init:(r,o)=>{const s=i.Gt.getState(o),a=n||new g.H6(s.type,{trackedOrigins:new Set([i.Gt].concat(e)),deleteFilter:e=>Z(e,t)});return{undoManager:a,prevSel:null,hasUndoOps:a.undoStack.length>0,hasRedoOps:a.redoStack.length>0}},apply:(t,e,n,r)=>{const o=i.Gt.getState(r).binding,s=e.undoManager,a=s.undoStack.length>0,l=s.redoStack.length>0;return o?{undoManager:s,prevSel:C(o,n),hasUndoOps:a,hasRedoOps:l}:a!==e.hasUndoOps||l!==e.hasRedoOps?Object.assign({},e,{hasUndoOps:s.undoStack.length>0,hasRedoOps:s.redoStack.length>0}):e}},view:t=>{const e=i.Gt.getState(t.state),n=i.Gk.getState(t.state).undoManager;return n.on("stack-item-added",(({stackItem:n})=>{const r=e.binding;r&&n.meta.set(r,i.Gk.getState(t.state).prevSel)})),n.on("stack-item-popped",(({stackItem:t})=>{const n=e.binding;n&&(n.beforeTransactionSelection=t.meta.get(n)||n.beforeTransactionSelection)})),{destroy:()=>{n.destroy()}}}}),J=r.hj.create({name:"collaboration",priority:1e3,addOptions(){return{document:null,field:"default",fragment:null}},onCreate(){this.editor.extensionManager.extensions.find((t=>"history"===t.name))&&console.warn('[tiptap warn]: "@tiptap/extension-collaboration" comes with its own history support and is not compatible with "@tiptap/extension-history".')},addCommands(){return{undo:()=>({tr:t,state:e,dispatch:n})=>{t.setMeta("preventDispatch",!0);const r=i.Gk.getState(e).undoManager;return 0!==r.undoStack.length&&(!n||q(e))},redo:()=>({tr:t,state:e,dispatch:n})=>{t.setMeta("preventDispatch",!0);const r=i.Gk.getState(e).undoManager;return 0!==r.redoStack.length&&(!n||Y(e))}}},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo()}},addProseMirrorPlugins(){const t=this.options.fragment?this.options.fragment:this.options.document.getXmlFragment(this.options.field),e=K(),n=e.spec.view;return e.spec.view=t=>{const{undoManager:e}=i.Gk.getState(t.state);e.restore&&(e.restore(),e.restore=()=>{});const r=n(t);return{destroy:()=>{const t=e.trackedOrigins.has(e),n=e._observers;e.restore=()=>{t&&e.trackedOrigins.add(e),e.doc.on("afterTransaction",e.afterTransactionHandler),e._observers=n},r.destroy()}}},[M(t),e]}})},1537:function(t,e,n){"use strict";n.d(e,{ZP:function(){return s}});var r=n(292);const i=/(?:^|\s)((?:==)((?:[^~=]+))(?:==))$/,o=/(?:^|\s)((?:==)((?:[^~=]+))(?:==))/g,s=r.vc.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:t=>t.getAttribute("data-color")||t.style.backgroundColor,renderHTML:t=>t.color?{"data-color":t.color,style:`background-color: ${t.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:t}){return["mark",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setHighlight:t=>({commands:e})=>e.setMark(this.name,t),toggleHighlight:t=>({commands:e})=>e.toggleMark(this.name,t),unsetHighlight:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[(0,r.Cf)({find:i,type:this.type})]},addPasteRules(){return[(0,r.K9)({find:o,type:this.type})]}})},599:function(t,e,n){"use strict";n.d(e,{ZP:function(){return o}});var r=n(292);const i=/^\s*(\[([( |x])?\])\s$/,o=r.NB.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{}}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>"true"===t.getAttribute("data-checked"),renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",(0,r.P1)(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const i=document.createElement("li"),o=document.createElement("label"),s=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div");return o.contentEditable="false",a.type="checkbox",a.addEventListener("change",(e=>{if(!r.isEditable&&!this.options.onReadOnlyChecked)return void(a.checked=!a.checked);const{checked:i}=e.target;r.isEditable&&"function"===typeof n&&r.chain().focus(void 0,{scrollIntoView:!1}).command((({tr:t})=>{const e=n(),r=t.doc.nodeAt(e);return t.setNodeMarkup(e,void 0,{...null===r||void 0===r?void 0:r.attrs,checked:i}),!0})).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,i)||(a.checked=!a.checked))})),Object.entries(this.options.HTMLAttributes).forEach((([t,e])=>{i.setAttribute(t,e)})),i.dataset.checked=t.attrs.checked,t.attrs.checked&&a.setAttribute("checked","checked"),o.append(a,s),i.append(o,l),Object.entries(e).forEach((([t,e])=>{i.setAttribute(t,e)})),{dom:i,contentDOM:l,update:t=>t.type===this.type&&(i.dataset.checked=t.attrs.checked,t.attrs.checked?a.setAttribute("checked","checked"):a.removeAttribute("checked"),!0)}}},addInputRules(){return[(0,r.S0)({find:i,type:this.type,getAttributes:t=>({checked:"x"===t[t.length-1]})})]}})},7828:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(292);const i=r.NB.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",(0,r.P1)(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}})},9972:function(t,e,n){"use strict";n.d(e,{Z:function(){return Ot}});n(7658);var r=n(292);const i=/^\s*>\s$/,o=r.NB.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[(0,r.S0)({find:i,type:this.type})]}}),s=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,a=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,l=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,c=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,u=r.vc.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>"normal"!==t.style.fontWeight&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[(0,r.Cf)({find:s,type:this.type}),(0,r.Cf)({find:l,type:this.type})]},addPasteRules(){return[(0,r.K9)({find:a,type:this.type}),(0,r.K9)({find:c,type:this.type})]}}),d=r.NB.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",(0,r.P1)(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),h=r.vc.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>{const e=t.hasAttribute("style");return!!e&&{}}}]},renderHTML({HTMLAttributes:t}){return["span",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=(0,r.Jo)(t,this.type),i=Object.entries(n).some((([,t])=>!!t));return!!i||e.unsetMark(this.name)}}}}),f=/^\s*([-+*])\s$/,p=r.NB.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(d.name,this.editor.getAttributes(h.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=(0,r.S0)({find:f,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=(0,r.S0)({find:f,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(h.name),editor:this.editor})),[t]}}),m=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,g=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,v=r.vc.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[(0,r.Cf)({find:m,type:this.type})]},addPasteRules(){return[(0,r.K9)({find:g,type:this.type})]}});var y=n(1418);const b=/^```([a-z]+)?[\s\n]$/,_=/^~~~([a-z]+)?[\s\n]$/,w=r.NB.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,r=[...(null===(e=t.firstElementChild)||void 0===e?void 0:e.classList)||[]],i=r.filter((t=>t.startsWith(n))).map((t=>t.replace(n,""))),o=i[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",(0,r.P1)(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=1===e.pos;return!(!t||e.parent.type.name!==this.name)&&(!(!n&&e.parent.textContent.length)&&this.editor.commands.clearNodes())},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith("\n\n");return!(!o||!s)&&t.chain().command((({tr:t})=>(t.delete(r.pos-2,r.pos),!0))).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type)return!1;const s=i.parentOffset===i.parent.nodeSize-2;if(!s)return!1;const a=i.after();if(void 0===a)return!1;const l=r.nodeAt(a);return!l&&t.commands.exitCode()}}},addInputRules(){return[(0,r.zK)({find:b,type:this.type,getAttributes:t=>({language:t[1]})}),(0,r.zK)({find:_,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new y.Sy({key:new y.H$("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData)return!1;if(this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=null===i||void 0===i?void 0:i.mode;if(!n||!o)return!1;const{tr:s}=t.state;return s.replaceSelectionWith(this.type.create({language:o})),s.setSelection(y.Bs.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.insertText(n.replace(/\r\n?/g,"\n")),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}}),x=r.NB.create({name:"doc",topNode:!0,content:"block+"});var S=n(4040);function E(t={}){return new y.Sy({view(e){return new M(e,t)}})}class M{constructor(t,e){var n;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(n=e.width)&&void 0!==n?n:1,this.color=!1===e.color?void 0:e.color||"black",this.class=e.class,this.handlers=["dragover","dragend","drop","dragleave"].map((e=>{let n=t=>{this[e](t)};return t.dom.addEventListener(e,n),{name:e,handler:n}}))}destroy(){this.handlers.forEach((({name:t,handler:e})=>this.editorView.dom.removeEventListener(t,e)))}update(t,e){null!=this.cursorPos&&e.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,null==t?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t,e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent;if(n){let n=e.nodeBefore,r=e.nodeAfter;if(n||r){let e=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0));if(e){let i=e.getBoundingClientRect(),o=n?i.bottom:i.top;n&&r&&(o=(o+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),t={left:i.left,right:i.right,top:o-this.width/2,bottom:o+this.width/2}}}}if(!t){let e=this.editorView.coordsAtPos(this.cursorPos);t={left:e.left-this.width/2,right:e.left+this.width/2,top:e.top,bottom:e.bottom}}let r,i,o=this.editorView.dom.offsetParent;if(this.element||(this.element=o.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n),!o||o==document.body&&"static"==getComputedStyle(o).position)r=-pageXOffset,i=-pageYOffset;else{let t=o.getBoundingClientRect();r=t.left-o.scrollLeft,i=t.top-o.scrollTop}this.element.style.left=t.left-r+"px",this.element.style.top=t.top-i+"px",this.element.style.width=t.right-t.left+"px",this.element.style.height=t.bottom-t.top+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout((()=>this.setCursor(null)),t)}dragover(t){if(!this.editorView.editable)return;let e=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),n=e&&e.inside>=0&&this.editorView.state.doc.nodeAt(e.inside),r=n&&n.type.spec.disableDropCursor,i="function"==typeof r?r(this.editorView,e,t):r;if(e&&!i){let t=e.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let e=(0,S.nj)(this.editorView.state.doc,t,this.editorView.dragging.slice);null!=e&&(t=e)}this.setCursor(t),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){t.target!=this.editorView.dom&&this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}const T=r.hj.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[E(this.options)]}});n(1703);var C=n(7329),A=n(8443),k=n(1617);class O extends y.Y1{constructor(t){super(t,t)}map(t,e){let n=t.resolve(e.map(this.head));return O.valid(n)?new O(n):y.Y1.near(n)}content(){return A.p2.empty}eq(t){return t instanceof O&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new O(t.resolve(e.pos))}getBookmark(){return new R(this.anchor)}static valid(t){let e=t.parent;if(e.isTextblock||!P(t)||!L(t))return!1;let n=e.type.spec.allowGapCursor;if(null!=n)return n;let r=e.contentMatchAt(t.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(t,e,n=!1){t:for(;;){if(!n&&O.valid(t))return t;let r=t.pos,i=null;for(let n=t.depth;;n--){let o=t.node(n);if(e>0?t.indexAfter(n)<o.childCount:t.index(n)>0){i=o.child(e>0?t.indexAfter(n):t.index(n)-1);break}if(0==n)return null;r+=e;let s=t.doc.resolve(r);if(O.valid(s))return s}for(;;){let o=e>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!y.qv.isSelectable(i)){t=t.doc.resolve(r+i.nodeSize*e),n=!1;continue t}break}i=o,r+=e;let s=t.doc.resolve(r);if(O.valid(s))return s}return null}}}O.prototype.visible=!1,O.findFrom=O.findGapCursorFrom,y.Y1.jsonID("gapcursor",O);class R{constructor(t){this.pos=t}map(t){return new R(t.map(this.pos))}resolve(t){let e=t.resolve(this.pos);return O.valid(e)?new O(e):y.Y1.near(e)}}function P(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(0!=n)for(let t=r.child(n-1);;t=t.lastChild){if(0==t.childCount&&!t.inlineContent||t.isAtom||t.type.spec.isolating)return!0;if(t.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}function L(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n!=r.childCount)for(let t=r.child(n);;t=t.firstChild){if(0==t.childCount&&!t.inlineContent||t.isAtom||t.type.spec.isolating)return!0;if(t.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}function D(){return new y.Sy({props:{decorations:B,createSelectionBetween(t,e,n){return e.pos==n.pos&&O.valid(n)?new O(n):null},handleClick:U,handleKeyDown:I,handleDOMEvents:{beforeinput:F}}})}const I=(0,C.$)({ArrowLeft:N("horiz",-1),ArrowRight:N("horiz",1),ArrowUp:N("vert",-1),ArrowDown:N("vert",1)});function N(t,e){const n="vert"==t?e>0?"down":"up":e>0?"right":"left";return function(t,r,i){let o=t.selection,s=e>0?o.$to:o.$from,a=o.empty;if(o instanceof y.Bs){if(!i.endOfTextblock(n)||0==s.depth)return!1;a=!1,s=t.doc.resolve(e>0?s.after():s.before())}let l=O.findGapCursorFrom(s,e,a);return!!l&&(r&&r(t.tr.setSelection(new O(l))),!0)}}function U(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!O.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return!(i&&i.inside>-1&&y.qv.isSelectable(t.state.doc.nodeAt(i.inside)))&&(t.dispatch(t.state.tr.setSelection(new O(r))),!0)}function F(t,e){if("insertCompositionText"!=e.inputType||!(t.state.selection instanceof O))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=A.HY.empty;for(let s=r.length-1;s>=0;s--)i=A.HY.from(r[s].createAndFill(null,i));let o=t.state.tr.replace(n.pos,n.pos,new A.p2(i,0,0));return o.setSelection(y.Bs.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function B(t){if(!(t.selection instanceof O))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",k.EH.create(t.doc,[k.p.widget(t.selection.head,e,{key:"gapcursor"})])}const V=r.hj.create({name:"gapCursor",addProseMirrorPlugins(){return[D()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:null!==(e=(0,r.nU)((0,r.Nl)(t,"allowGapCursor",n)))&&void 0!==e?e:null}}}),z=r.NB.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",(0,r.P1)(this.options.HTMLAttributes,t)]},renderText(){return"\n"},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command((()=>{const{selection:t,storedMarks:i}=n;if(t.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:s}=r.extensionManager,a=i||t.$to.parentOffset&&t.$from.marks();return e().insertContent({type:this.name}).command((({tr:t,dispatch:e})=>{if(e&&a&&o){const e=a.filter((t=>s.includes(t.type.name)));t.ensureMarks(e)}return!0})).run()}))])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),j=r.NB.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map((t=>({tag:`h${t}`,attrs:{level:t}})))},renderHTML({node:t,HTMLAttributes:e}){const n=this.options.levels.includes(t.attrs.level),i=n?t.attrs.level:this.options.levels[0];return[`h${i}`,(0,r.P1)(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>!!this.options.levels.includes(t.level)&&e.setNode(this.name,t),toggleHeading:t=>({commands:e})=>!!this.options.levels.includes(t.level)&&e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return this.options.levels.reduce(((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})})),{})},addInputRules(){return this.options.levels.map((t=>(0,r.zK)({find:new RegExp(`^(#{1,${t}})\\s$`),type:this.type,getAttributes:{level:t}})))}});var H=200,W=function(){};W.prototype.append=function(t){return t.length?(t=W.from(t),!this.length&&t||t.length<H&&this.leafAppend(t)||this.length<H&&t.leafPrepend(this)||this.appendInner(t)):this},W.prototype.prepend=function(t){return t.length?W.from(t).append(this):this},W.prototype.appendInner=function(t){return new $(this,t)},W.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t>=e?W.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))},W.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},W.prototype.forEach=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)},W.prototype.map=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(e,n){return r.push(t(e,n))}),e,n),r},W.from=function(t){return t instanceof W?t:t&&t.length?new G(t):W.empty};var G=function(t){function e(e){t.call(this),this.values=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(t,n){return 0==t&&n==this.length?this:new e(this.values.slice(t,n))},e.prototype.getInner=function(t){return this.values[t]},e.prototype.forEachInner=function(t,e,n,r){for(var i=e;i<n;i++)if(!1===t(this.values[i],r+i))return!1},e.prototype.forEachInvertedInner=function(t,e,n,r){for(var i=e-1;i>=n;i--)if(!1===t(this.values[i],r+i))return!1},e.prototype.leafAppend=function(t){if(this.length+t.length<=H)return new e(this.values.concat(t.flatten()))},e.prototype.leafPrepend=function(t){if(this.length+t.length<=H)return new e(t.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(W);W.empty=new G([]);var $=function(t){function e(e,n){t.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)},e.prototype.forEachInner=function(t,e,n,r){var i=this.left.length;return!(e<i&&!1===this.left.forEachInner(t,e,Math.min(n,i),r))&&(!(n>i&&!1===this.right.forEachInner(t,Math.max(e-i,0),Math.min(this.length,n)-i,r+i))&&void 0)},e.prototype.forEachInvertedInner=function(t,e,n,r){var i=this.left.length;return!(e>i&&!1===this.right.forEachInvertedInner(t,e-i,Math.max(n,i)-i,r+i))&&(!(n<i&&!1===this.left.forEachInvertedInner(t,Math.min(e,i),n,r))&&void 0)},e.prototype.sliceInner=function(t,e){if(0==t&&e==this.length)return this;var n=this.left.length;return e<=n?this.left.slice(t,e):t>=n?this.right.slice(t-n,e-n):this.left.slice(t,n).append(this.right.slice(0,e-n))},e.prototype.leafAppend=function(t){var n=this.right.leafAppend(t);if(n)return new e(this.left,n)},e.prototype.leafPrepend=function(t){var n=this.left.leafPrepend(t);if(n)return new e(n,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}(W),q=W;const Y=500;class X{constructor(t,e){this.items=t,this.eventCount=e}popEvent(t,e){if(0==this.eventCount)return null;let n,r,i=this.items.length;for(;;i--){let t=this.items.get(i-1);if(t.selection){--i;break}}e&&(n=this.remapping(i,this.items.length),r=n.maps.length);let o,s,a=t.tr,l=[],c=[];return this.items.forEach(((t,e)=>{if(!t.step)return n||(n=this.remapping(i,e+1),r=n.maps.length),r--,void c.push(t);if(n){c.push(new K(t.map));let e,i=t.step.map(n.slice(r));i&&a.maybeStep(i).doc&&(e=a.mapping.maps[a.mapping.maps.length-1],l.push(new K(e,void 0,void 0,l.length+c.length))),r--,e&&n.appendMap(e,r)}else a.maybeStep(t.step);return t.selection?(o=n?t.selection.map(n.slice(r)):t.selection,s=new X(this.items.slice(0,i).append(c.reverse().concat(l)),this.eventCount-1),!1):void 0}),this.items.length,0),{remaining:s,transform:a,selection:o}}addTransform(t,e,n,r){let i=[],o=this.eventCount,s=this.items,a=!r&&s.length?s.get(s.length-1):null;for(let c=0;c<t.steps.length;c++){let n,l=t.steps[c].invert(t.docs[c]),u=new K(t.mapping.maps[c],l,e);(n=a&&a.merge(u))&&(u=n,c?i.pop():s=s.slice(0,s.length-1)),i.push(u),e&&(o++,e=void 0),r||(a=u)}let l=o-n.depth;return l>Q&&(s=Z(s,l),o-=l),new X(s.append(i),o)}remapping(t,e){let n=new S.vs;return this.items.forEach(((e,r)=>{let i=null!=e.mirrorOffset&&r-e.mirrorOffset>=t?n.maps.length-e.mirrorOffset:void 0;n.appendMap(e.map,i)}),t,e),n}addMaps(t){return 0==this.eventCount?this:new X(this.items.append(t.map((t=>new K(t)))),this.eventCount)}rebased(t,e){if(!this.eventCount)return this;let n=[],r=Math.max(0,this.items.length-e),i=t.mapping,o=t.steps.length,s=this.eventCount;this.items.forEach((t=>{t.selection&&s--}),r);let a=e;this.items.forEach((e=>{let r=i.getMirror(--a);if(null==r)return;o=Math.min(o,r);let l=i.maps[r];if(e.step){let o=t.steps[r].invert(t.docs[r]),c=e.selection&&e.selection.map(i.slice(a+1,r));c&&s++,n.push(new K(l,o,c))}else n.push(new K(l))}),r);let l=[];for(let d=e;d<o;d++)l.push(new K(i.maps[d]));let c=this.items.slice(0,r).append(l).append(n),u=new X(c,s);return u.emptyItemCount()>Y&&(u=u.compress(this.items.length-n.length)),u}emptyItemCount(){let t=0;return this.items.forEach((e=>{e.step||t++})),t}compress(t=this.items.length){let e=this.remapping(0,t),n=e.maps.length,r=[],i=0;return this.items.forEach(((o,s)=>{if(s>=t)r.push(o),o.selection&&i++;else if(o.step){let t=o.step.map(e.slice(n)),s=t&&t.getMap();if(n--,s&&e.appendMap(s,n),t){let a=o.selection&&o.selection.map(e.slice(n));a&&i++;let l,c=new K(s.invert(),t,a),u=r.length-1;(l=r.length&&r[u].merge(c))?r[u]=l:r.push(c)}}else o.map&&n--}),this.items.length,0),new X(q.from(r.reverse()),i)}}function Z(t,e){let n;return t.forEach(((t,r)=>{if(t.selection&&0==e--)return n=r,!1})),t.slice(n)}X.empty=new X(q.empty,0);class K{constructor(t,e,n,r){this.map=t,this.step=e,this.selection=n,this.mirrorOffset=r}merge(t){if(this.step&&t.step&&!t.selection){let e=t.step.merge(this.step);if(e)return new K(e.getMap().invert(),e,this.selection)}}}class J{constructor(t,e,n,r,i){this.done=t,this.undone=e,this.prevRanges=n,this.prevTime=r,this.prevComposition=i}}const Q=20;function tt(t,e,n,r){let i,o=n.getMeta(lt);if(o)return o.historyState;n.getMeta(ct)&&(t=new J(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(0==n.steps.length)return t;if(s&&s.getMeta(lt))return s.getMeta(lt).redo?new J(t.done.addTransform(n,void 0,r,at(e)),t.undone,nt(n.mapping.maps[n.steps.length-1]),t.prevTime,t.prevComposition):new J(t.done,t.undone.addTransform(n,void 0,r,at(e)),null,t.prevTime,t.prevComposition);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(i=n.getMeta("rebased"))?new J(t.done.rebased(n,i),t.undone.rebased(n,i),rt(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new J(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),rt(t.prevRanges,n.mapping),t.prevTime,t.prevComposition);{let i=n.getMeta("composition"),o=0==t.prevTime||!s&&t.prevComposition!=i&&(t.prevTime<(n.time||0)-r.newGroupDelay||!et(n,t.prevRanges)),a=s?rt(t.prevRanges,n.mapping):nt(n.mapping.maps[n.steps.length-1]);return new J(t.done.addTransform(n,o?e.selection.getBookmark():void 0,r,at(e)),X.empty,a,n.time,null==i?t.prevComposition:i)}}function et(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach(((t,r)=>{for(let i=0;i<e.length;i+=2)t<=e[i+1]&&r>=e[i]&&(n=!0)})),n}function nt(t){let e=[];return t.forEach(((t,n,r,i)=>e.push(r,i))),e}function rt(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function it(t,e,n,r){let i=at(e),o=lt.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,i);if(!s)return;let a=s.selection.resolve(s.transform.doc),l=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),o,i),c=new J(r?l:s.remaining,r?s.remaining:l,null,0,-1);n(s.transform.setSelection(a).setMeta(lt,{redo:r,historyState:c}).scrollIntoView())}let ot=!1,st=null;function at(t){let e=t.plugins;if(st!=e){ot=!1,st=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){ot=!0;break}}return ot}const lt=new y.H$("history"),ct=new y.H$("closeHistory");function ut(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new y.Sy({key:lt,state:{init(){return new J(X.empty,X.empty,null,0,-1)},apply(e,n,r){return tt(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(t,e){let n=e.inputType,r="historyUndo"==n?dt:"historyRedo"==n?ht:null;return!!r&&(e.preventDefault(),r(t.state,t.dispatch))}}}})}const dt=(t,e)=>{let n=lt.getState(t);return!(!n||0==n.done.eventCount)&&(e&&it(n,t,e,!1),!0)},ht=(t,e)=>{let n=lt.getState(t);return!(!n||0==n.undone.eventCount)&&(e&&it(n,t,e,!0),!0)};const ft=r.hj.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>dt(t,e),redo:()=>({state:t,dispatch:e})=>ht(t,e)}},addProseMirrorPlugins(){return[ut(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),pt=r.NB.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",(0,r.P1)(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t})=>t().insertContent({type:this.name}).command((({tr:t,dispatch:e})=>{var n;if(e){const{$to:e}=t.selection,r=e.end();if(e.nodeAfter)t.setSelection(y.Bs.create(t.doc,e.pos));else{const i=null===(n=e.parent.type.contentMatch.defaultType)||void 0===n?void 0:n.create();i&&(t.insert(r,i),t.setSelection(y.Bs.create(t.doc,r)))}t.scrollIntoView()}return!0})).run()}},addInputRules(){return[(0,r.x2)({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),mt=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,gt=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,vt=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,yt=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,bt=r.vc.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>"normal"!==t.style.fontStyle&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[(0,r.Cf)({find:mt,type:this.type}),(0,r.Cf)({find:vt,type:this.type})]},addPasteRules(){return[(0,r.K9)({find:gt,type:this.type}),(0,r.K9)({find:yt,type:this.type})]}}),_t=r.NB.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",(0,r.P1)(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),wt=r.NB.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",(0,r.P1)(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),xt=r.vc.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>{const e=t.hasAttribute("style");return!!e&&{}}}]},renderHTML({HTMLAttributes:t}){return["span",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=(0,r.Jo)(t,this.type),i=Object.entries(n).some((([,t])=>!!t));return!!i||e.unsetMark(this.name)}}}}),St=/^(\d+)\.\s$/,Et=r.NB.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return 1===e?["ol",(0,r.P1)(this.options.HTMLAttributes,n),0]:["ol",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(wt.name,this.editor.getAttributes(xt.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=(0,r.S0)({find:St,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,e)=>e.childCount+e.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=(0,r.S0)({find:St,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(xt.name)}),joinPredicate:(t,e)=>e.childCount+e.attrs.start===+t[1],editor:this.editor})),[t]}}),Mt=r.NB.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Tt=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,Ct=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,At=r.vc.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>!!t.includes("line-through")&&{}}]},renderHTML({HTMLAttributes:t}){return["s",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[(0,r.Cf)({find:Tt,type:this.type})]},addPasteRules(){return[(0,r.K9)({find:Ct,type:this.type})]}}),kt=r.NB.create({name:"text",group:"inline"}),Ot=r.hj.create({name:"starterKit",addExtensions(){var t,e,n,r,i,s,a,l,c,d,h,f,m,g,y,b,_,S;const E=[];return!1!==this.options.blockquote&&E.push(o.configure(null===(t=this.options)||void 0===t?void 0:t.blockquote)),!1!==this.options.bold&&E.push(u.configure(null===(e=this.options)||void 0===e?void 0:e.bold)),!1!==this.options.bulletList&&E.push(p.configure(null===(n=this.options)||void 0===n?void 0:n.bulletList)),!1!==this.options.code&&E.push(v.configure(null===(r=this.options)||void 0===r?void 0:r.code)),!1!==this.options.codeBlock&&E.push(w.configure(null===(i=this.options)||void 0===i?void 0:i.codeBlock)),!1!==this.options.document&&E.push(x.configure(null===(s=this.options)||void 0===s?void 0:s.document)),!1!==this.options.dropcursor&&E.push(T.configure(null===(a=this.options)||void 0===a?void 0:a.dropcursor)),!1!==this.options.gapcursor&&E.push(V.configure(null===(l=this.options)||void 0===l?void 0:l.gapcursor)),!1!==this.options.hardBreak&&E.push(z.configure(null===(c=this.options)||void 0===c?void 0:c.hardBreak)),!1!==this.options.heading&&E.push(j.configure(null===(d=this.options)||void 0===d?void 0:d.heading)),!1!==this.options.history&&E.push(ft.configure(null===(h=this.options)||void 0===h?void 0:h.history)),!1!==this.options.horizontalRule&&E.push(pt.configure(null===(f=this.options)||void 0===f?void 0:f.horizontalRule)),!1!==this.options.italic&&E.push(bt.configure(null===(m=this.options)||void 0===m?void 0:m.italic)),!1!==this.options.listItem&&E.push(_t.configure(null===(g=this.options)||void 0===g?void 0:g.listItem)),!1!==this.options.orderedList&&E.push(Et.configure(null===(y=this.options)||void 0===y?void 0:y.orderedList)),!1!==this.options.paragraph&&E.push(Mt.configure(null===(b=this.options)||void 0===b?void 0:b.paragraph)),!1!==this.options.strike&&E.push(At.configure(null===(_=this.options)||void 0===_?void 0:_.strike)),!1!==this.options.text&&E.push(kt.configure(null===(S=this.options)||void 0===S?void 0:S.text)),E}})},6764:function(t,e,n){"use strict";n.d(e,{ML:function(){return yt},kg:function(){return bt}});n(7658),n(1703);var r=n(292),i=n(1418),o=n(1320),s=n(94),a="tippy-box",l="tippy-content",c="tippy-backdrop",u="tippy-arrow",d="tippy-svg-arrow",h={passive:!0,capture:!0},f=function(){return document.body};function p(t,e,n){if(Array.isArray(t)){var r=t[e];return null==r?Array.isArray(n)?n[e]:n:r}return t}function m(t,e){var n={}.toString.call(t);return 0===n.indexOf("[object")&&n.indexOf(e+"]")>-1}function g(t,e){return"function"===typeof t?t.apply(void 0,e):t}function v(t,e){return 0===e?t:function(r){clearTimeout(n),n=setTimeout((function(){t(r)}),e)};var n}function y(t){return t.split(/\s+/).filter(Boolean)}function b(t){return[].concat(t)}function _(t,e){-1===t.indexOf(e)&&t.push(e)}function w(t){return t.filter((function(e,n){return t.indexOf(e)===n}))}function x(t){return t.split("-")[0]}function S(t){return[].slice.call(t)}function E(t){return Object.keys(t).reduce((function(e,n){return void 0!==t[n]&&(e[n]=t[n]),e}),{})}function M(){return document.createElement("div")}function T(t){return["Element","Fragment"].some((function(e){return m(t,e)}))}function C(t){return m(t,"NodeList")}function A(t){return m(t,"MouseEvent")}function k(t){return!(!t||!t._tippy||t._tippy.reference!==t)}function O(t){return T(t)?[t]:C(t)?S(t):Array.isArray(t)?t:S(document.querySelectorAll(t))}function R(t,e){t.forEach((function(t){t&&(t.style.transitionDuration=e+"ms")}))}function P(t,e){t.forEach((function(t){t&&t.setAttribute("data-state",e)}))}function L(t){var e,n=b(t),r=n[0];return null!=r&&null!=(e=r.ownerDocument)&&e.body?r.ownerDocument:document}function D(t,e){var n=e.clientX,r=e.clientY;return t.every((function(t){var e=t.popperRect,i=t.popperState,o=t.props,s=o.interactiveBorder,a=x(i.placement),l=i.modifiersData.offset;if(!l)return!0;var c="bottom"===a?l.top.y:0,u="top"===a?l.bottom.y:0,d="right"===a?l.left.x:0,h="left"===a?l.right.x:0,f=e.top-r+c>s,p=r-e.bottom-u>s,m=e.left-n+d>s,g=n-e.right-h>s;return f||p||m||g}))}function I(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(e){t[r](e,n)}))}function N(t,e){var n=e;while(n){var r;if(t.contains(n))return!0;n=null==n.getRootNode||null==(r=n.getRootNode())?void 0:r.host}return!1}var U={isTouch:!1},F=0;function B(){U.isTouch||(U.isTouch=!0,window.performance&&document.addEventListener("mousemove",V))}function V(){var t=performance.now();t-F<20&&(U.isTouch=!1,document.removeEventListener("mousemove",V)),F=t}function z(){var t=document.activeElement;if(k(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function j(){document.addEventListener("touchstart",B,h),window.addEventListener("blur",z)}var H="undefined"!==typeof window&&"undefined"!==typeof document,W=!!H&&!!window.msCrypto;var G={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},$={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},q=Object.assign({appendTo:f,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},G,$),Y=Object.keys(q),X=function(t){var e=Object.keys(t);e.forEach((function(e){q[e]=t[e]}))};function Z(t){var e=t.plugins||[],n=e.reduce((function(e,n){var r,i=n.name,o=n.defaultValue;i&&(e[i]=void 0!==t[i]?t[i]:null!=(r=q[i])?r:o);return e}),{});return Object.assign({},t,n)}function K(t,e){var n=e?Object.keys(Z(Object.assign({},q,{plugins:e}))):Y,r=n.reduce((function(e,n){var r=(t.getAttribute("data-tippy-"+n)||"").trim();if(!r)return e;if("content"===n)e[n]=r;else try{e[n]=JSON.parse(r)}catch(i){e[n]=r}return e}),{});return r}function J(t,e){var n=Object.assign({},e,{content:g(e.content,[t])},e.ignoreAttributes?{}:K(t,e.plugins));return n.aria=Object.assign({},q.aria,n.aria),n.aria={expanded:"auto"===n.aria.expanded?e.interactive:n.aria.expanded,content:"auto"===n.aria.content?e.interactive?null:"describedby":n.aria.content},n}var Q=function(){return"innerHTML"};function tt(t,e){t[Q()]=e}function et(t){var e=M();return!0===t?e.className=u:(e.className=d,T(t)?e.appendChild(t):tt(e,t)),e}function nt(t,e){T(e.content)?(tt(t,""),t.appendChild(e.content)):"function"!==typeof e.content&&(e.allowHTML?tt(t,e.content):t.textContent=e.content)}function rt(t){var e=t.firstElementChild,n=S(e.children);return{box:e,content:n.find((function(t){return t.classList.contains(l)})),arrow:n.find((function(t){return t.classList.contains(u)||t.classList.contains(d)})),backdrop:n.find((function(t){return t.classList.contains(c)}))}}function it(t){var e=M(),n=M();n.className=a,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=M();function i(n,r){var i=rt(e),o=i.box,s=i.content,a=i.arrow;r.theme?o.setAttribute("data-theme",r.theme):o.removeAttribute("data-theme"),"string"===typeof r.animation?o.setAttribute("data-animation",r.animation):o.removeAttribute("data-animation"),r.inertia?o.setAttribute("data-inertia",""):o.removeAttribute("data-inertia"),o.style.maxWidth="number"===typeof r.maxWidth?r.maxWidth+"px":r.maxWidth,r.role?o.setAttribute("role",r.role):o.removeAttribute("role"),n.content===r.content&&n.allowHTML===r.allowHTML||nt(s,t.props),r.arrow?a?n.arrow!==r.arrow&&(o.removeChild(a),o.appendChild(et(r.arrow))):o.appendChild(et(r.arrow)):a&&o.removeChild(a)}return r.className=l,r.setAttribute("data-state","hidden"),nt(r,t.props),e.appendChild(n),n.appendChild(r),i(t.props,t.props),{popper:e,onUpdate:i}}it.$$tippy=!0;var ot=1,st=[],at=[];function lt(t,e){var n,r,i,s,a,l,c,u=J(t,Object.assign({},q,Z(E(e)))),d=!1,m=!1,x=!1,T=!1,C=[],k=v(Mt,u.interactiveDebounce),O=ot++,F=null,B=w(u.plugins),V={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},z={id:O,reference:t,popper:M(),popperInstance:F,props:u,state:V,plugins:B,clearDelayTimeouts:Ut,setProps:Ft,setContent:Bt,show:Vt,hide:zt,hideWithInteractivity:jt,enable:It,disable:Nt,unmount:Ht,destroy:Wt};if(!u.render)return z;var j=u.render(z),H=j.popper,G=j.onUpdate;H.setAttribute("data-tippy-root",""),H.id="tippy-"+z.id,z.popper=H,t._tippy=z,H._tippy=z;var $=B.map((function(t){return t.fn(z)})),Y=t.hasAttribute("aria-expanded");return xt(),dt(),lt(),ct("onCreate",[z]),u.showOnCreate&&Lt(),H.addEventListener("mouseenter",(function(){z.props.interactive&&z.state.isVisible&&z.clearDelayTimeouts()})),H.addEventListener("mouseleave",(function(){z.props.interactive&&z.props.trigger.indexOf("mouseenter")>=0&&et().addEventListener("mousemove",k)})),z;function X(){var t=z.props.touch;return Array.isArray(t)?t:[t,0]}function K(){return"hold"===X()[0]}function Q(){var t;return!(null==(t=z.props.render)||!t.$$tippy)}function tt(){return c||t}function et(){var t=tt().parentNode;return t?L(t):document}function nt(){return rt(H)}function it(t){return z.state.isMounted&&!z.state.isVisible||U.isTouch||s&&"focus"===s.type?0:p(z.props.delay,t?0:1,q.delay)}function lt(t){void 0===t&&(t=!1),H.style.pointerEvents=z.props.interactive&&!t?"":"none",H.style.zIndex=""+z.props.zIndex}function ct(t,e,n){var r;(void 0===n&&(n=!0),$.forEach((function(n){n[t]&&n[t].apply(n,e)})),n)&&(r=z.props)[t].apply(r,e)}function ut(){var e=z.props.aria;if(e.content){var n="aria-"+e.content,r=H.id,i=b(z.props.triggerTarget||t);i.forEach((function(t){var e=t.getAttribute(n);if(z.state.isVisible)t.setAttribute(n,e?e+" "+r:r);else{var i=e&&e.replace(r,"").trim();i?t.setAttribute(n,i):t.removeAttribute(n)}}))}}function dt(){if(!Y&&z.props.aria.expanded){var e=b(z.props.triggerTarget||t);e.forEach((function(t){z.props.interactive?t.setAttribute("aria-expanded",z.state.isVisible&&t===tt()?"true":"false"):t.removeAttribute("aria-expanded")}))}}function ht(){et().removeEventListener("mousemove",k),st=st.filter((function(t){return t!==k}))}function ft(e){if(!U.isTouch||!x&&"mousedown"!==e.type){var n=e.composedPath&&e.composedPath()[0]||e.target;if(!z.props.interactive||!N(H,n)){if(b(z.props.triggerTarget||t).some((function(t){return N(t,n)}))){if(U.isTouch)return;if(z.state.isVisible&&z.props.trigger.indexOf("click")>=0)return}else ct("onClickOutside",[z,e]);!0===z.props.hideOnClick&&(z.clearDelayTimeouts(),z.hide(),m=!0,setTimeout((function(){m=!1})),z.state.isMounted||vt())}}}function pt(){x=!0}function mt(){x=!1}function gt(){var t=et();t.addEventListener("mousedown",ft,!0),t.addEventListener("touchend",ft,h),t.addEventListener("touchstart",mt,h),t.addEventListener("touchmove",pt,h)}function vt(){var t=et();t.removeEventListener("mousedown",ft,!0),t.removeEventListener("touchend",ft,h),t.removeEventListener("touchstart",mt,h),t.removeEventListener("touchmove",pt,h)}function yt(t,e){_t(t,(function(){!z.state.isVisible&&H.parentNode&&H.parentNode.contains(H)&&e()}))}function bt(t,e){_t(t,e)}function _t(t,e){var n=nt().box;function r(t){t.target===n&&(I(n,"remove",r),e())}if(0===t)return e();I(n,"remove",a),I(n,"add",r),a=r}function wt(e,n,r){void 0===r&&(r=!1);var i=b(z.props.triggerTarget||t);i.forEach((function(t){t.addEventListener(e,n,r),C.push({node:t,eventType:e,handler:n,options:r})}))}function xt(){K()&&(wt("touchstart",Et,{passive:!0}),wt("touchend",Tt,{passive:!0})),y(z.props.trigger).forEach((function(t){if("manual"!==t)switch(wt(t,Et),t){case"mouseenter":wt("mouseleave",Tt);break;case"focus":wt(W?"focusout":"blur",Ct);break;case"focusin":wt("focusout",Ct);break}}))}function St(){C.forEach((function(t){var e=t.node,n=t.eventType,r=t.handler,i=t.options;e.removeEventListener(n,r,i)})),C=[]}function Et(t){var e,n=!1;if(z.state.isEnabled&&!At(t)&&!m){var r="focus"===(null==(e=s)?void 0:e.type);s=t,c=t.currentTarget,dt(),!z.state.isVisible&&A(t)&&st.forEach((function(e){return e(t)})),"click"===t.type&&(z.props.trigger.indexOf("mouseenter")<0||d)&&!1!==z.props.hideOnClick&&z.state.isVisible?n=!0:Lt(t),"click"===t.type&&(d=!n),n&&!r&&Dt(t)}}function Mt(t){var e=t.target,n=tt().contains(e)||H.contains(e);if("mousemove"!==t.type||!n){var r=Pt().concat(H).map((function(t){var e,n=t._tippy,r=null==(e=n.popperInstance)?void 0:e.state;return r?{popperRect:t.getBoundingClientRect(),popperState:r,props:u}:null})).filter(Boolean);D(r,t)&&(ht(),Dt(t))}}function Tt(t){var e=At(t)||z.props.trigger.indexOf("click")>=0&&d;e||(z.props.interactive?z.hideWithInteractivity(t):Dt(t))}function Ct(t){z.props.trigger.indexOf("focusin")<0&&t.target!==tt()||z.props.interactive&&t.relatedTarget&&H.contains(t.relatedTarget)||Dt(t)}function At(t){return!!U.isTouch&&K()!==t.type.indexOf("touch")>=0}function kt(){Ot();var e=z.props,n=e.popperOptions,r=e.placement,i=e.offset,s=e.getReferenceClientRect,a=e.moveTransition,c=Q()?rt(H).arrow:null,u=s?{getBoundingClientRect:s,contextElement:s.contextElement||tt()}:t,d={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(t){var e=t.state;if(Q()){var n=nt(),r=n.box;["placement","reference-hidden","escaped"].forEach((function(t){"placement"===t?r.setAttribute("data-placement",e.placement):e.attributes.popper["data-popper-"+t]?r.setAttribute("data-"+t,""):r.removeAttribute("data-"+t)})),e.attributes.popper={}}}},h=[{name:"offset",options:{offset:i}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!a}},d];Q()&&c&&h.push({name:"arrow",options:{element:c,padding:3}}),h.push.apply(h,(null==n?void 0:n.modifiers)||[]),z.popperInstance=(0,o.fi)(u,H,Object.assign({},n,{placement:r,onFirstUpdate:l,modifiers:h}))}function Ot(){z.popperInstance&&(z.popperInstance.destroy(),z.popperInstance=null)}function Rt(){var t,e=z.props.appendTo,n=tt();t=z.props.interactive&&e===f||"parent"===e?n.parentNode:g(e,[n]),t.contains(H)||t.appendChild(H),z.state.isMounted=!0,kt()}function Pt(){return S(H.querySelectorAll("[data-tippy-root]"))}function Lt(t){z.clearDelayTimeouts(),t&&ct("onTrigger",[z,t]),gt();var e=it(!0),r=X(),i=r[0],o=r[1];U.isTouch&&"hold"===i&&o&&(e=o),e?n=setTimeout((function(){z.show()}),e):z.show()}function Dt(t){if(z.clearDelayTimeouts(),ct("onUntrigger",[z,t]),z.state.isVisible){if(!(z.props.trigger.indexOf("mouseenter")>=0&&z.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(t.type)>=0&&d)){var e=it(!1);e?r=setTimeout((function(){z.state.isVisible&&z.hide()}),e):i=requestAnimationFrame((function(){z.hide()}))}}else vt()}function It(){z.state.isEnabled=!0}function Nt(){z.hide(),z.state.isEnabled=!1}function Ut(){clearTimeout(n),clearTimeout(r),cancelAnimationFrame(i)}function Ft(e){if(!z.state.isDestroyed){ct("onBeforeUpdate",[z,e]),St();var n=z.props,r=J(t,Object.assign({},n,E(e),{ignoreAttributes:!0}));z.props=r,xt(),n.interactiveDebounce!==r.interactiveDebounce&&(ht(),k=v(Mt,r.interactiveDebounce)),n.triggerTarget&&!r.triggerTarget?b(n.triggerTarget).forEach((function(t){t.removeAttribute("aria-expanded")})):r.triggerTarget&&t.removeAttribute("aria-expanded"),dt(),lt(),G&&G(n,r),z.popperInstance&&(kt(),Pt().forEach((function(t){requestAnimationFrame(t._tippy.popperInstance.forceUpdate)}))),ct("onAfterUpdate",[z,e])}}function Bt(t){z.setProps({content:t})}function Vt(){var t=z.state.isVisible,e=z.state.isDestroyed,n=!z.state.isEnabled,r=U.isTouch&&!z.props.touch,i=p(z.props.duration,0,q.duration);if(!(t||e||n||r)&&!tt().hasAttribute("disabled")&&(ct("onShow",[z],!1),!1!==z.props.onShow(z))){if(z.state.isVisible=!0,Q()&&(H.style.visibility="visible"),lt(),gt(),z.state.isMounted||(H.style.transition="none"),Q()){var o=nt(),s=o.box,a=o.content;R([s,a],0)}l=function(){var t;if(z.state.isVisible&&!T){if(T=!0,H.offsetHeight,H.style.transition=z.props.moveTransition,Q()&&z.props.animation){var e=nt(),n=e.box,r=e.content;R([n,r],i),P([n,r],"visible")}ut(),dt(),_(at,z),null==(t=z.popperInstance)||t.forceUpdate(),ct("onMount",[z]),z.props.animation&&Q()&&bt(i,(function(){z.state.isShown=!0,ct("onShown",[z])}))}},Rt()}}function zt(){var t=!z.state.isVisible,e=z.state.isDestroyed,n=!z.state.isEnabled,r=p(z.props.duration,1,q.duration);if(!(t||e||n)&&(ct("onHide",[z],!1),!1!==z.props.onHide(z))){if(z.state.isVisible=!1,z.state.isShown=!1,T=!1,d=!1,Q()&&(H.style.visibility="hidden"),ht(),vt(),lt(!0),Q()){var i=nt(),o=i.box,s=i.content;z.props.animation&&(R([o,s],r),P([o,s],"hidden"))}ut(),dt(),z.props.animation?Q()&&yt(r,z.unmount):z.unmount()}}function jt(t){et().addEventListener("mousemove",k),_(st,k),k(t)}function Ht(){z.state.isVisible&&z.hide(),z.state.isMounted&&(Ot(),Pt().forEach((function(t){t._tippy.unmount()})),H.parentNode&&H.parentNode.removeChild(H),at=at.filter((function(t){return t!==z})),z.state.isMounted=!1,ct("onHidden",[z]))}function Wt(){z.state.isDestroyed||(z.clearDelayTimeouts(),z.unmount(),St(),delete t._tippy,z.state.isDestroyed=!0,ct("onDestroy",[z]))}}function ct(t,e){void 0===e&&(e={});var n=q.plugins.concat(e.plugins||[]);j();var r=Object.assign({},e,{plugins:n}),i=O(t),o=i.reduce((function(t,e){var n=e&&lt(e,r);return n&&t.push(n),t}),[]);return T(t)?o[0]:o}ct.defaultProps=q,ct.setDefaultProps=X,ct.currentInput=U;Object.assign({},s.Z,{effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow)}});ct.setDefaultProps({render:it});var ut=ct;class dt{constructor({editor:t,element:e,view:n,tippyOptions:i={},updateDelay:o=250,shouldShow:s}){this.preventHide=!1,this.shouldShow=({view:t,state:e,from:n,to:i})=>{const{doc:o,selection:s}=e,{empty:a}=s,l=!o.textBetween(n,i).length&&(0,r.xh)(e.selection),c=this.element.contains(document.activeElement),u=t.hasFocus()||c;return!(!u||a||l||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout((()=>this.update(this.editor.view)))},this.blurHandler=({event:t})=>{var e;this.preventHide?this.preventHide=!1:(null===t||void 0===t?void 0:t.relatedTarget)&&(null===(e=this.element.parentNode)||void 0===e?void 0:e.contains(t.relatedTarget))||this.hide()},this.tippyBlurHandler=t=>{this.blurHandler({event:t})},this.handleDebouncedUpdate=(t,e)=>{const n=!(null===e||void 0===e?void 0:e.selection.eq(t.state.selection)),r=!(null===e||void 0===e?void 0:e.doc.eq(t.state.doc));(n||r)&&(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout((()=>{this.updateHandler(t,n,r,e)}),this.updateDelay))},this.updateHandler=(t,e,n,i)=>{var o,s,a;const{state:l,composing:c}=t,{selection:u}=l,d=!e&&!n;if(c||d)return;this.createTooltip();const{ranges:h}=u,f=Math.min(...h.map((t=>t.$from.pos))),p=Math.max(...h.map((t=>t.$to.pos))),m=null===(o=this.shouldShow)||void 0===o?void 0:o.call(this,{editor:this.editor,view:t,state:l,oldState:i,from:f,to:p});m?(null===(s=this.tippy)||void 0===s||s.setProps({getReferenceClientRect:(null===(a=this.tippyOptions)||void 0===a?void 0:a.getReferenceClientRect)||(()=>{if((0,r.EG)(l.selection)){let e=t.nodeDOM(f);const n=e.dataset.nodeViewWrapper?e:e.querySelector("[data-node-view-wrapper]");if(n&&(e=n.firstChild),e)return e.getBoundingClientRect()}return(0,r.pr)(t,f,p)})}),this.show()):this.hide()},this.editor=t,this.element=e,this.view=n,this.updateDelay=o,s&&(this.shouldShow=s),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:t}=this.editor.options,e=!!t.parentElement;!this.tippy&&e&&(this.tippy=ut(t,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(t,e){const{state:n}=t,r=n.selection.$from.pos!==n.selection.$to.pos;if(this.updateDelay>0&&r)return void this.handleDebouncedUpdate(t,e);const i=!(null===e||void 0===e?void 0:e.selection.eq(t.state.selection)),o=!(null===e||void 0===e?void 0:e.doc.eq(t.state.doc));this.updateHandler(t,i,o,e)}show(){var t;null===(t=this.tippy)||void 0===t||t.show()}hide(){var t;null===(t=this.tippy)||void 0===t||t.hide()}destroy(){var t,e;(null===(t=this.tippy)||void 0===t?void 0:t.popper.firstChild)&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),null===(e=this.tippy)||void 0===e||e.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const ht=t=>new i.Sy({key:"string"===typeof t.pluginKey?new i.H$(t.pluginKey):t.pluginKey,view:e=>new dt({view:e,...t})});r.hj.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[ht({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});var ft=n(8473),pt=n(4188);class mt{constructor({editor:t,element:e,view:n,tippyOptions:r={},shouldShow:i}){this.preventHide=!1,this.shouldShow=({view:t,state:e})=>{const{selection:n}=e,{$anchor:r,empty:i}=n,o=1===r.depth,s=r.parent.isTextblock&&!r.parent.type.spec.code&&!r.parent.textContent;return!!(t.hasFocus()&&i&&o&&s&&this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout((()=>this.update(this.editor.view)))},this.blurHandler=({event:t})=>{var e;this.preventHide?this.preventHide=!1:(null===t||void 0===t?void 0:t.relatedTarget)&&(null===(e=this.element.parentNode)||void 0===e?void 0:e.contains(t.relatedTarget))||this.hide()},this.tippyBlurHandler=t=>{this.blurHandler({event:t})},this.editor=t,this.element=e,this.view=n,i&&(this.shouldShow=i),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=r,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:t}=this.editor.options,e=!!t.parentElement;!this.tippy&&e&&(this.tippy=ut(t,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(t,e){var n,i,o;const{state:s}=t,{doc:a,selection:l}=s,{from:c,to:u}=l,d=e&&e.doc.eq(a)&&e.selection.eq(l);if(d)return;this.createTooltip();const h=null===(n=this.shouldShow)||void 0===n?void 0:n.call(this,{editor:this.editor,view:t,state:s,oldState:e});h?(null===(i=this.tippy)||void 0===i||i.setProps({getReferenceClientRect:(null===(o=this.tippyOptions)||void 0===o?void 0:o.getReferenceClientRect)||(()=>(0,r.pr)(t,c,u))}),this.show()):this.hide()}show(){var t;null===(t=this.tippy)||void 0===t||t.show()}hide(){var t;null===(t=this.tippy)||void 0===t||t.hide()}destroy(){var t,e;(null===(t=this.tippy)||void 0===t?void 0:t.popper.firstChild)&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),null===(e=this.tippy)||void 0===e||e.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const gt=t=>new i.Sy({key:"string"===typeof t.pluginKey?new i.H$(t.pluginKey):t.pluginKey,view:e=>new mt({view:e,...t})});r.hj.create({name:"floatingMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"floatingMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[gt({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow})]:[]}}),(0,ft.aZ)({name:"BubbleMenu",props:{pluginKey:{type:[String,Object],default:"bubbleMenu"},editor:{type:Object,required:!0},updateDelay:{type:Number,default:void 0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(t,{slots:e}){const n=(0,pt.iH)(null);return(0,ft.bv)((()=>{const{updateDelay:e,editor:r,pluginKey:i,shouldShow:o,tippyOptions:s}=t;r.registerPlugin(ht({updateDelay:e,editor:r,element:n.value,pluginKey:i,shouldShow:o,tippyOptions:s}))})),(0,ft.Jd)((()=>{const{pluginKey:e,editor:n}=t;n.unregisterPlugin(e)})),()=>{var t;return(0,ft.h)("div",{ref:n},null===(t=e.default)||void 0===t?void 0:t.call(e))}}});function vt(t){return(0,pt.ZM)(((e,n)=>({get(){return e(),t},set(e){t=e,requestAnimationFrame((()=>{requestAnimationFrame((()=>{n()}))}))}})))}class yt extends r.ML{constructor(t={}){return super(t),this.vueRenderers=(0,pt.qj)(new Map),this.contentComponent=null,this.reactiveState=vt(this.view.state),this.reactiveExtensionStorage=vt(this.extensionStorage),this.on("transaction",(()=>{this.reactiveState.value=this.view.state,this.reactiveExtensionStorage.value=this.extensionStorage})),(0,pt.Xl)(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(t,e){super.registerPlugin(t,e),this.reactiveState.value=this.view.state}unregisterPlugin(t){super.unregisterPlugin(t),this.reactiveState.value=this.view.state}}const bt=(0,ft.aZ)({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(t){const e=(0,pt.iH)(),n=(0,ft.FN)();return(0,ft.m0)((()=>{const r=t.editor;r&&r.options.element&&e.value&&(0,ft.Y3)((()=>{if(!e.value||!r.options.element.firstChild)return;const t=(0,pt.SU)(e.value);e.value.append(...r.options.element.childNodes),r.contentComponent=n.ctx._,r.setOptions({element:t}),r.createNodeViews()}))})),(0,ft.Jd)((()=>{const e=t.editor;if(!e)return;if(e.isDestroyed||e.view.setProps({nodeViews:{}}),e.contentComponent=null,!e.options.element.firstChild)return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})})),{rootEl:e}},render(){const t=[];return this.editor&&this.editor.vueRenderers.forEach((e=>{const n=(0,ft.h)(ft.lR,{to:e.teleportElement,key:e.id},(0,ft.h)(e.component,{ref:e.id,...e.props}));t.push(n)})),(0,ft.h)("div",{ref:t=>{this.rootEl=t}},...t)}});(0,ft.aZ)({name:"FloatingMenu",props:{pluginKey:{type:null,default:"floatingMenu"},editor:{type:Object,required:!0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(t,{slots:e}){const n=(0,pt.iH)(null);return(0,ft.bv)((()=>{const{pluginKey:e,editor:r,tippyOptions:i,shouldShow:o}=t;r.registerPlugin(gt({pluginKey:e,editor:r,element:n.value,tippyOptions:i,shouldShow:o}))})),(0,ft.Jd)((()=>{const{pluginKey:e,editor:n}=t;n.unregisterPlugin(e)})),()=>{var t;return(0,ft.h)("div",{ref:n},null===(t=e.default)||void 0===t?void 0:t.call(e))}}}),(0,ft.aZ)({props:{as:{type:String,default:"div"}},render(){return(0,ft.h)(this.as,{style:{whiteSpace:"pre-wrap"},"data-node-view-content":""})}}),(0,ft.aZ)({props:{as:{type:String,default:"div"}},inject:["onDragStart","decorationClasses"],render(){var t,e;return(0,ft.h)(this.as,{class:this.decorationClasses,style:{whiteSpace:"normal"},"data-node-view-wrapper":"",onDragstart:this.onDragStart},null===(e=(t=this.$slots).default)||void 0===e?void 0:e.call(t))}});Boolean},9471:function(t,e,n){"use strict";n.d(e,{Dp:function(){return o},G:function(){return s},Z$:function(){return r},kJ:function(){return a},s7:function(){return i}});n(7658);const r=t=>t[t.length-1],i=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},o=Array.from,s=(t,e)=>{for(let n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1},a=Array.isArray},547:function(t,e,n){"use strict";n.d(e,{$2:function(){return d},CY:function(){return o},Ko:function(){return s},Qn:function(){return i},RP:function(){return f},Tg:function(){return p},Vw:function(){return r},cq:function(){return a},jS:function(){return h},kr:function(){return u},rc:function(){return l},x1:function(){return c}});const r=1,i=2,o=4,s=8,a=32,l=64,c=128,u=31,d=63,h=127,f=2147483647,p=4294967295},2428:function(t,e,n){"use strict";n.d(e,{Ld:function(){return d},nY:function(){return f},r1:function(){return h}});var r=n(7793),i=n(8674),o=n(4606),s=n(3259);const a=new Map;class l{constructor(t){this.room=t,this.onmessage=null,this._onChange=e=>e.key===t&&null!==this.onmessage&&this.onmessage({data:o.Gh(e.newValue||"")}),s.z2(this._onChange)}postMessage(t){s.XN.setItem(this.room,o.s3(o.eh(t)))}close(){s.F(this._onChange)}}const c="undefined"===typeof BroadcastChannel?l:BroadcastChannel,u=t=>r.Yu(a,t,(()=>{const e=i.Ue(),n=new c(t);return n.onmessage=t=>e.forEach((e=>e(t.data,"broadcastchannel"))),{bc:n,subs:e}})),d=(t,e)=>(u(t).subs.add(e),e),h=(t,e)=>{const n=u(t),r=n.subs.delete(e);return r&&0===n.subs.size&&(n.bc.close(),a.delete(t)),r},f=(t,e,n=null)=>{const r=u(t);r.bc.postMessage(e),r.subs.forEach((t=>t(e,n)))}},4606:function(t,e,n){"use strict";n.d(e,{Gh:function(){return f},Te:function(){return s},eh:function(){return a},f9:function(){return p},s3:function(){return h}});n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315),n(2801);var r=n(6003),i=n(2269);const o=t=>new Uint8Array(t),s=(t,e,n)=>new Uint8Array(t,e,n),a=t=>new Uint8Array(t),l=t=>{let e="";for(let n=0;n<t.byteLength;n++)e+=r.IK(t[n]);return btoa(e)},c=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),u=t=>{const e=atob(t),n=o(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},d=t=>{const e=Buffer.from(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)},h=i.jU?l:c,f=i.jU?u:d,p=t=>{const e=o(t.byteLength);return e.set(t),e}},4805:function(t,e,n){"use strict";n.d(e,{HN:function(){return m},UF:function(){return k},XW:function(){return A},dD:function(){return O},kf:function(){return w},kj:function(){return g},l1:function(){return h},sO:function(){return R},v_:function(){return C},yg:function(){return v}});n(7658);var r=n(4606),i=n(547),o=n(3035),s=n(5953),a=n(6003),l=n(1755);const c=l.Ue("Unexpected end of array"),u=l.Ue("Integer out of Range");class d{constructor(t){this.arr=t,this.pos=0}}const h=t=>new d(t),f=t=>t.pos!==t.arr.length,p=(t,e)=>{const n=r.Te(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},m=t=>p(t,v(t)),g=t=>t.arr[t.pos++],v=t=>{let e=0,n=1;const r=t.arr.length;while(t.pos<r){const r=t.arr[t.pos++];if(e+=(r&i.jS)*n,n*=128,r<i.x1)return e;if(e>s.YM)throw u}throw c},y=t=>{let e=t.arr[t.pos++],n=e&i.$2,r=64;const o=(e&i.rc)>0?-1:1;if(0===(e&i.x1))return o*n;const a=t.arr.length;while(t.pos<a){if(e=t.arr[t.pos++],n+=(e&i.jS)*r,r*=128,e<i.x1)return o*n;if(n>s.YM)throw u}throw c},b=t=>{let e=v(t);if(0===e)return"";{let n=String.fromCodePoint(g(t));if(--e<100)while(e--)n+=String.fromCodePoint(g(t));else while(e>0){const r=e<1e4?e:1e4,i=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,i),e-=r}return decodeURIComponent(escape(n))}},_=t=>a.CO.decode(m(t)),w=a.CO?_:b,x=(t,e)=>{const n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},S=t=>x(t,4).getFloat32(0,!1),E=t=>x(t,8).getFloat64(0,!1),M=t=>x(t,8).getBigInt64(0,!1),T=[t=>{},t=>null,y,S,E,M,t=>!1,t=>!0,w,t=>{const e=v(t),n={};for(let r=0;r<e;r++){const e=w(t);n[e]=C(t)}return n},t=>{const e=v(t),n=[];for(let r=0;r<e;r++)n.push(C(t));return n},m],C=t=>T[127-g(t)](t);class A extends d{constructor(t,e){super(t),this.reader=e,this.s=null,this.count=0}read(){return 0===this.count&&(this.s=this.reader(this),f(this)?this.count=v(this)+1:this.count=-1),this.count--,this.s}}class k extends d{constructor(t){super(t),this.s=0,this.count=0}read(){if(0===this.count){this.s=y(this);const t=o.GR(this.s);this.count=1,t&&(this.s=-this.s,this.count=v(this)+2)}return this.count--,this.s}}class O extends d{constructor(t){super(t),this.s=0,this.count=0,this.diff=0}read(){if(0===this.count){const t=y(this),e=1&t;this.diff=o.GW(t/2),this.count=1,e&&(this.count=v(this)+2)}return this.s+=this.diff,this.count--,this.s}}class R{constructor(t){this.decoder=new k(t),this.str=w(this.decoder),this.spos=0}read(){const t=this.spos+this.decoder.read(),e=this.str.slice(this.spos,t);return this.spos=t,e}}},5329:function(t,e,n){"use strict";n.d(e,{JU:function(){return i},x0:function(){return o}});var r=n(7793);const i="undefined"!==typeof document?document:{},o=("undefined"!==typeof DOMParser&&new DOMParser,t=>r.UI(t,((t,e)=>`${e}:${t};`)).join(""));i.ELEMENT_NODE,i.TEXT_NODE,i.CDATA_SECTION_NODE,i.COMMENT_NODE,i.DOCUMENT_NODE,i.DOCUMENT_TYPE_NODE,i.DOCUMENT_FRAGMENT_NODE},4251:function(t,e,n){"use strict";n.d(e,{$F:function(){return m},EM:function(){return R},GF:function(){return P},HE:function(){return D},HK:function(){return S},Mf:function(){return u},TS:function(){return U},_f:function(){return h},kE:function(){return d},mP:function(){return E},sX:function(){return N},uE:function(){return g},uw:function(){return x}});n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315),n(7658);var r=n(4606),i=n(3035),o=n(5953),s=n(547),a=n(6003),l=n(9471);class c{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const u=()=>new c,d=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},h=t=>{const e=new Uint8Array(d(t));let n=0;for(let r=0;r<t.bufs.length;r++){const i=t.bufs[r];e.set(i,n),n+=i.length}return e.set(r.Te(t.cbuf.buffer,0,t.cpos),n),e},f=(t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(r.Te(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(2*i.Fp(n,e)),t.cpos=0)},p=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(2*n),t.cpos=0),t.cbuf[t.cpos++]=e},m=p,g=(t,e)=>{while(e>s.jS)p(t,s.x1|s.jS&e),e=i.GW(e/128);p(t,s.jS&e)},v=(t,e)=>{const n=i.GR(e);n&&(e=-e),p(t,(e>s.$2?s.x1:0)|(n?s.rc:0)|s.$2&e),e=i.GW(e/64);while(e>0)p(t,(e>s.jS?s.x1:0)|s.jS&e),e=i.GW(e/128)},y=new Uint8Array(3e4),b=y.length/3,_=(t,e)=>{if(e.length<b){const n=a.YZ.encodeInto(e,y).written||0;g(t,n);for(let e=0;e<n;e++)p(t,y[e])}else E(t,a.lz(e))},w=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;g(t,r);for(let i=0;i<r;i++)p(t,n.codePointAt(i))},x=a.YZ&&a.YZ.encodeInto?_:w,S=(t,e)=>{const n=t.cbuf.length,r=t.cpos,o=i.VV(n-r,e.length),s=e.length-o;t.cbuf.set(e.subarray(0,o),r),t.cpos+=o,s>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(i.Fp(2*n,s)),t.cbuf.set(e.subarray(o)),t.cpos=s)},E=(t,e)=>{g(t,e.byteLength),S(t,e)},M=(t,e)=>{f(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},T=(t,e)=>M(t,4).setFloat32(0,e,!1),C=(t,e)=>M(t,8).setFloat64(0,e,!1),A=(t,e)=>M(t,8).setBigInt64(0,e,!1),k=new DataView(new ArrayBuffer(4)),O=t=>(k.setFloat32(0,t),k.getFloat32(0)===t),R=(t,e)=>{switch(typeof e){case"string":p(t,119),x(t,e);break;case"number":o.U(e)&&i.Wn(e)<=s.RP?(p(t,125),v(t,e)):O(e)?(p(t,124),T(t,e)):(p(t,123),C(t,e));break;case"bigint":p(t,122),A(t,e);break;case"object":if(null===e)p(t,126);else if(l.kJ(e)){p(t,117),g(t,e.length);for(let n=0;n<e.length;n++)R(t,e[n])}else if(e instanceof Uint8Array)p(t,116),E(t,e);else{p(t,118);const n=Object.keys(e);g(t,n.length);for(let r=0;r<n.length;r++){const i=n[r];x(t,i),R(t,e[i])}}break;case"boolean":p(t,e?120:121);break;default:p(t,127)}};class P extends c{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&g(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}const L=t=>{t.count>0&&(v(t.encoder,1===t.count?t.s:-t.s),t.count>1&&g(t.encoder,t.count-2))};class D{constructor(){this.encoder=new c,this.s=0,this.count=0}write(t){this.s===t?this.count++:(L(this),this.count=1,this.s=t)}toUint8Array(){return L(this),h(this.encoder)}}const I=t=>{if(t.count>0){const e=2*t.diff+(1===t.count?0:1);v(t.encoder,e),t.count>1&&g(t.encoder,t.count-2)}};class N{constructor(){this.encoder=new c,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(I(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return I(this),h(this.encoder)}}class U{constructor(){this.sarr=[],this.s="",this.lensE=new D}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){const t=new c;return this.sarr.push(this.s),this.s="",x(t,this.sarr.join("")),S(t,this.lensE.toUint8Array()),h(t)}}},2269:function(t,e,n){"use strict";n.d(e,{E0:function(){return p},jU:function(){return c},hH:function(){return v}});n(7658);var r=n(7793),i=n(6003);const o=t=>void 0===t?null:t;var s=n(3259),a=n(3918);const l="undefined"!==typeof process&&process.release&&/node|io\.js/.test(process.release.name),c="undefined"!==typeof window&&"undefined"!==typeof document&&!l;"undefined"!==typeof navigator&&/Mac/.test(navigator.platform);let u;const d=[],h=()=>{if(void 0===u)if(l){u=r.Ue();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];"-"===r[0]?(null!==e&&u.set(e,""),e=r):null!==e?(u.set(e,r),e=null):d.push(r)}null!==e&&u.set(e,"")}else"object"===typeof location?(u=r.Ue(),(location.search||"?").slice(1).split("&").forEach((t=>{if(0!==t.length){const[e,n]=t.split("=");u.set(`--${i.NF(e,"-")}`,n),u.set(`-${i.NF(e,"-")}`,n)}}))):u=r.Ue();return u},f=t=>h().has(t),p=t=>o(l?{NODE_ENV:"production",BASE_URL:"/noosld/"}[t.toUpperCase()]:s.XN.getItem(t)),m=t=>f("--"+t)||null!==p(t),g=(m("production"),l&&a.gB({NODE_ENV:"production",BASE_URL:"/noosld/"}.FORCE_COLOR,["true","1","2"])),v=!f("no-colors")&&(!l||process.stdout.isTTY||g)&&(!l||f("color")||g||null!==p("COLORTERM")||(p("TERM")||"").includes("color"))},1755:function(t,e,n){"use strict";n.d(e,{Nw:function(){return i},Ue:function(){return r},zR:function(){return o}});n(1703);const r=t=>new Error(t),i=()=>{throw r("Method unimplemented")},o=()=>{throw r("Unexpected case")}},9765:function(t,e,n){"use strict";n.d(e,{Vs:function(){return o}});n(7658);const r=t=>class{constructor(t){this._=t}destroy(){t(this._)}},i=r(clearTimeout),o=(t,e)=>new i(setTimeout(e,t));r(clearInterval),r((t=>"undefined"!==typeof requestAnimationFrame&&cancelAnimationFrame(t))),r((t=>"undefined"!==typeof cancelIdleCallback&&cancelIdleCallback(t)))},3918:function(t,e,n){"use strict";n.d(e,{Hi:function(){return c},PP:function(){return o},WY:function(){return s},gB:function(){return u},id:function(){return a}});n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315);var r=n(9471),i=n(3913);const o=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&o(t,e,n+1)}},s=()=>{},a=t=>t,l=(t,e)=>t===e,c=(t,e)=>{if(null==t||null==e)return l(t,e);if(t.constructor!==e.constructor)return!1;if(t===e)return!0;switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),e=new Uint8Array(e);case Uint8Array:if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;break;case Set:if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;break;case Map:if(t.size!==e.size)return!1;for(const n of t.keys())if(!e.has(n)||!c(t.get(n),e.get(n)))return!1;break;case Object:if(i.kE(t)!==i.kE(e))return!1;for(const n in t)if(!i.l$(t,n)||!c(t[n],e[n]))return!1;break;case Array:if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!c(t[n],e[n]))return!1;break;default:return!1}return!0},u=(t,e)=>e.includes(t);r.kJ},1886:function(t,e,n){"use strict";n.d(e,{Ej:function(){return c},Pl:function(){return a},ZA:function(){return d},s7:function(){return u},ud:function(){return p},Wd:function(){return f},hM:function(){return h},YW:function(){return l},WO:function(){return m},_X:function(){return g},YX:function(){return _}});n(7658);const r=Symbol;var i=n(9514),o=n(2269),s=n(3918);const a=r(),l=r(),c=r(),u=r(),d=r(),h=r(),f=r(),p=r(),m=r(),g=t=>{const e=[],n=[];let r=0;for(;r<t.length;r++){const i=t[r];i.constructor===String||i.constructor===Number?e.push(i):i.constructor===Object&&n.push(JSON.stringify(i))}return n},v=[d,f,p,c];let y=0,b=i.ZG();const _=(t,e)=>{const n=v[y],r=o.E0("log"),a=null!==r&&("*"===r||"true"===r||new RegExp(r,"gi").test(e));return y=(y+1)%v.length,e+=": ",a?(...r)=>{const o=i.ZG(),s=o-b;b=o,t(n,e,m,...r.map((t=>"string"===typeof t||"symbol"===typeof t?t:JSON.stringify(t))),n," +"+s+"ms")}:s.WY}},311:function(t,e,n){"use strict";n.d(e,{YX:function(){return m},S0:function(){return f}});n(7658);var r=n(2269),i=n(8674);class o{constructor(t,e){this.left=t,this.right=e}}const s=(t,e)=>new o(t,e);var a=n(5329),l=n(7793),c=n(1886);const u={[c.Pl]:s("font-weight","bold"),[c.YW]:s("font-weight","normal"),[c.Ej]:s("color","blue"),[c.ZA]:s("color","green"),[c.s7]:s("color","grey"),[c.hM]:s("color","red"),[c.Wd]:s("color","purple"),[c.ud]:s("color","orange"),[c.WO]:s("color","black")},d=t=>{const e=[],n=[],r=l.Ue();let i=[],o=0;for(;o<t.length;o++){const i=t[o],s=u[i];if(void 0!==s)r.set(s.left,s.right);else{if(i.constructor!==String&&i.constructor!==Number)break;{const t=a.x0(r);o>0||t.length>0?(e.push("%c"+i),n.push(t)):e.push(i)}}}for(o>0&&(i=n,i.unshift(e.join("")));o<t.length;o++){const e=t[o];e instanceof Symbol||i.push(e)}return i},h=r.hH?d:c._X,f=(...t)=>{console.log(...h(t)),p.forEach((e=>e.print(t)))},p=i.Ue();const m=t=>c.YX(f,t)},7793:function(t,e,n){"use strict";n.d(e,{JG:function(){return i},UI:function(){return s},Ue:function(){return r},Yj:function(){return a},Yu:function(){return o}});n(7658);const r=()=>new Map,i=t=>{const e=r();return t.forEach(((t,n)=>{e.set(n,t)})),e},o=(t,e,n)=>{let r=t.get(e);return void 0===r&&t.set(e,r=n()),r},s=(t,e)=>{const n=[];for(const[r,i]of t)n.push(e(i,r));return n},a=(t,e)=>{for(const[n,r]of t)if(e(r,n))return!0;return!1}},3035:function(t,e,n){"use strict";n.d(e,{Fp:function(){return a},GR:function(){return c},GW:function(){return r},VV:function(){return s},Wn:function(){return i},mv:function(){return o},sQ:function(){return l}});const r=Math.floor,i=(Math.ceil,Math.abs),o=(Math.imul,Math.round,Math.log10),s=(Math.log2,Math.log,Math.sqrt,(t,e)=>t<e?t:e),a=(t,e)=>t>e?t:e,l=(Number.isNaN,Math.pow),c=(Math.sign,t=>0!==t?t<0:1/t<0)},5611:function(t,e,n){"use strict";n.d(e,{M:function(){return r}});const r=()=>{let t=!0;return(e,n)=>{if(t){t=!1;try{e()}finally{t=!0}}else void 0!==n&&n()}}},5953:function(t,e,n){"use strict";n.d(e,{U:function(){return s},YM:function(){return o}});var r=n(3035),i=n(547);const o=Number.MAX_SAFE_INTEGER,s=(Number.MIN_SAFE_INTEGER,i.RP,i.Tg,Number.isInteger||(t=>"number"===typeof t&&isFinite(t)&&r.GW(t)===t));Number.isNaN,Number.parseInt},3913:function(t,e,n){"use strict";n.d(e,{$m:function(){return d},Ed:function(){return o},UI:function(){return s},XP:function(){return i},f0:function(){return r},kE:function(){return a},l$:function(){return u},xb:function(){return l}});n(7658);const r=Object.assign,i=Object.keys,o=(t,e)=>{for(const n in t)e(t[n],n)},s=(t,e)=>{const n=[];for(const r in t)n.push(e(t[r],r));return n},a=t=>i(t).length,l=t=>{for(const e in t)return!1;return!0},c=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},u=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),d=(t,e)=>t===e||a(t)===a(e)&&c(t,((t,n)=>(void 0!==t||u(e,n))&&e[n]===t))},3837:function(t,e,n){"use strict";n.d(e,{y:function(){return s}});var r=n(7793),i=n(8674),o=n(9471);class s{constructor(){this._observers=r.Ue()}on(t,e){r.Yu(this._observers,t,i.Ue).add(e)}once(t,e){const n=(...r)=>{this.off(t,n),e(...r)};this.on(t,n)}off(t,e){const n=this._observers.get(t);void 0!==n&&(n.delete(e),0===n.size&&this._observers.delete(t))}emit(t,e){return o.Dp((this._observers.get(t)||r.Ue()).values()).forEach((t=>t(...e)))}destroy(){this._observers=r.Ue()}}},2296:function(t,e,n){"use strict";n.d(e,{DB:function(){return o},Ue:function(){return r},d1:function(){return i}});n(1703);const r=t=>new Promise(t),i=(Promise.all.bind(Promise),t=>Promise.reject(t)),o=t=>Promise.resolve(t)},3751:function(t,e,n){"use strict";n.d(e,{kw:function(){return a},TN:function(){return o},U7:function(){return s},k$:function(){return c}});n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315);var r=n(3035);crypto.subtle;const i=crypto.getRandomValues.bind(crypto),o=Math.random,s=()=>i(new Uint32Array(1))[0],a=t=>t[r.GW(o()*t.length)],l=[1e7]+-1e3+-4e3+-8e3+-1e11,c=()=>l.replace(/[018]/g,(t=>(t^s()&15>>t/4).toString(16)))},8674:function(t,e,n){"use strict";n.d(e,{Ue:function(){return r}});const r=()=>new Set},3259:function(t,e,n){"use strict";n.d(e,{F:function(){return l},XN:function(){return s},z2:function(){return a}});class r{constructor(){this.map=new Map}setItem(t,e){this.map.set(t,e)}getItem(t){return this.map.get(t)}}let i=new r,o=!0;try{"undefined"!==typeof localStorage&&(i=localStorage,o=!1)}catch(c){}const s=i,a=t=>o||addEventListener("storage",t),l=t=>o||removeEventListener("storage",t)},6003:function(t,e,n){"use strict";n.d(e,{CO:function(){return f},IK:function(){return r},NF:function(){return l},YZ:function(){return u},lz:function(){return h}});n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315);const r=String.fromCharCode,i=(String.fromCodePoint,r(65535),t=>t.toLowerCase()),o=/^\s*/g,s=t=>t.replace(o,""),a=/([A-Z])/g,l=(t,e)=>s(t.replace(a,(t=>`${e}${i(t)}`))),c=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.codePointAt(i);return r},u="undefined"!==typeof TextEncoder?new TextEncoder:null,d=t=>u.encode(t),h=u?d:c;let f="undefined"===typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});f&&1===f.decode(new Uint8Array).length&&(f=null)},9514:function(t,e,n){"use strict";n.d(e,{ZG:function(){return r}});const r=Date.now},7329:function(t,e,n){"use strict";n.d(e,{$:function(){return g},h:function(){return m}});n(1703);for(var r={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},i={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},o="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),s="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),a=0;a<10;a++)r[48+a]=r[96+a]=String(a);for(a=1;a<=24;a++)r[a+111]="F"+a;for(a=65;a<=90;a++)r[a]=String.fromCharCode(a+32),i[a]=String.fromCharCode(a);for(var l in r)i.hasOwnProperty(l)||(i[l]=r[l]);function c(t){var e=o&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||s&&t.shiftKey&&t.key&&1==t.key.length||"Unidentified"==t.key,n=!e&&t.key||(t.shiftKey?i:r)[t.keyCode]||t.key||"Unidentified";return"Esc"==n&&(n="Escape"),"Del"==n&&(n="Delete"),"Left"==n&&(n="ArrowLeft"),"Up"==n&&(n="ArrowUp"),"Right"==n&&(n="ArrowRight"),"Down"==n&&(n="ArrowDown"),n}var u=n(1418);const d="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function h(t){let e,n,r,i,o=t.split(/-(?!$)/),s=o[o.length-1];"Space"==s&&(s=" ");for(let a=0;a<o.length-1;a++){let t=o[a];if(/^(cmd|meta|m)$/i.test(t))i=!0;else if(/^a(lt)?$/i.test(t))e=!0;else if(/^(c|ctrl|control)$/i.test(t))n=!0;else if(/^s(hift)?$/i.test(t))r=!0;else{if(!/^mod$/i.test(t))throw new Error("Unrecognized modifier name: "+t);d?i=!0:n=!0}}return e&&(s="Alt-"+s),n&&(s="Ctrl-"+s),i&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function f(t){let e=Object.create(null);for(let n in t)e[h(n)]=t[n];return e}function p(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function m(t){return new u.Sy({props:{handleKeyDown:g(t)}})}function g(t){let e=f(t);return function(t,n){let i,o=c(n),s=e[p(o,n)];if(s&&s(t.state,t.dispatch,t))return!0;if(1==o.length&&" "!=o){if(n.shiftKey){let r=e[p(o,n,!1)];if(r&&r(t.state,t.dispatch,t))return!0}if((n.shiftKey||n.altKey||n.metaKey||o.charCodeAt(0)>127)&&(i=r[n.keyCode])&&i!=o){let r=e[p(i,n)];if(r&&r(t.state,t.dispatch,t))return!0}}return!1}}},8443:function(t,e,n){"use strict";n.d(e,{aw:function(){return rt},PW:function(){return bt},HY:function(){return a},vc:function(){return d},ZU:function(){return tt},NB:function(){return P},Ts:function(){return O},e4:function(){return h},V_:function(){return et},p2:function(){return f}});n(7658),n(1703);function r(t){this.content=t}r.prototype={constructor:r,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,n){var i=n&&n!=t?this.remove(n):this,o=i.find(t),s=i.content.slice();return-1==o?s.push(n||t,e):(s[o+1]=e,n&&(s[o]=n)),new r(s)},remove:function(t){var e=this.find(t);if(-1==e)return this;var n=this.content.slice();return n.splice(e,2),new r(n)},addToStart:function(t,e){return new r([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new r(n)},addBefore:function(t,e,n){var i=this.remove(e),o=i.content.slice(),s=i.find(t);return o.splice(-1==s?o.length:s,0,e,n),new r(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=r.from(t),t.size?new r(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=r.from(t),t.size?new r(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=r.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach((function(e,n){t[e]=n})),t},get size(){return this.content.length>>1}},r.from=function(t){if(t instanceof r)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new r(e)};var i=r;function o(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i!=s){if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let t=0;i.text[t]==s.text[t];t++)n++;return n}if(i.content.size||s.content.size){let t=o(i.content,s.content,n+1);if(null!=t)return t}n+=i.nodeSize}else n+=i.nodeSize}}function s(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(0==i||0==o)return i==o?null:{a:n,b:r};let a=t.child(--i),l=e.child(--o),c=a.nodeSize;if(a!=l){if(!a.sameMarkup(l))return{a:n,b:r};if(a.isText&&a.text!=l.text){let t=0,e=Math.min(a.text.length,l.text.length);while(t<e&&a.text[a.text.length-t-1]==l.text[l.text.length-t-1])t++,n--,r--;return{a:n,b:r}}if(a.content.size||l.content.size){let t=s(a.content,l.content,n-1,r-1);if(t)return t}n-=c,r-=c}else n-=c,r-=c}}class a{constructor(t,e){if(this.content=t,this.size=e||0,null==e)for(let n=0;n<t.length;n++)this.size+=t[n].nodeSize}nodesBetween(t,e,n,r=0,i){for(let o=0,s=0;s<e;o++){let a=this.content[o],l=s+a.nodeSize;if(l>t&&!1!==n(a,r+s,i||null,o)&&a.content.size){let i=s+1;a.nodesBetween(Math.max(0,t-i),Math.min(a.content.size,e-i),n,r+i)}s=l}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,e,n,r){let i="",o=!0;return this.nodesBetween(t,e,((s,a)=>{s.isText?(i+=s.text.slice(Math.max(t,a)-a,e-a),o=!n):s.isLeaf?(r?i+="function"===typeof r?r(s):r:s.type.spec.leafText&&(i+=s.type.spec.leafText(s)),o=!n):!o&&s.isBlock&&(i+=n,o=!0)}),0),i}append(t){if(!t.size)return this;if(!this.size)return t;let e=this.lastChild,n=t.firstChild,r=this.content.slice(),i=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),i=1);i<t.content.length;i++)r.push(t.content[i]);return new a(r,this.size+t.size)}cut(t,e=this.size){if(0==t&&e==this.size)return this;let n=[],r=0;if(e>t)for(let i=0,o=0;o<e;i++){let s=this.content[i],a=o+s.nodeSize;a>t&&((o<t||a>e)&&(s=s.isText?s.cut(Math.max(0,t-o),Math.min(s.text.length,e-o)):s.cut(Math.max(0,t-o-1),Math.min(s.content.size,e-o-1))),n.push(s),r+=s.nodeSize),o=a}return new a(n,r)}cutByIndex(t,e){return t==e?a.empty:0==t&&e==this.content.length?this:new a(this.content.slice(t,e))}replaceChild(t,e){let n=this.content[t];if(n==e)return this;let r=this.content.slice(),i=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new a(r,i)}addToStart(t){return new a([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new a(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}maybeChild(t){return this.content[t]||null}forEach(t){for(let e=0,n=0;e<this.content.length;e++){let r=this.content[e];t(r,n,e),n+=r.nodeSize}}findDiffStart(t,e=0){return o(this,t,e)}findDiffEnd(t,e=this.size,n=t.size){return s(this,t,e,n)}findIndex(t,e=-1){if(0==t)return c(0,t);if(t==this.size)return c(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),o=r+i.nodeSize;if(o>=t)return o==t||e>0?c(n+1,o):c(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map((t=>t.toJSON())):null}static fromJSON(t,e){if(!e)return a.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new a(e.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return a.empty;let e,n=0;for(let r=0;r<t.length;r++){let i=t[r];n+=i.nodeSize,r&&i.isText&&t[r-1].sameMarkup(i)?(e||(e=t.slice(0,r)),e[e.length-1]=i.withText(e[e.length-1].text+i.text)):e&&e.push(i)}return new a(e||t,n)}static from(t){if(!t)return a.empty;if(t instanceof a)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new a([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}a.empty=new a([],0);const l={index:0,offset:0};function c(t,e){return l.index=t,l.offset=e,l}function u(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!u(t[n],e[n]))return!1}else{for(let n in t)if(!(n in e)||!u(t[n],e[n]))return!1;for(let n in e)if(!(n in t))return!1}return!0}class d{constructor(t,e){this.type=t,this.attrs=e}addToSet(t){let e,n=!1;for(let r=0;r<t.length;r++){let i=t[r];if(this.eq(i))return t;if(this.type.excludes(i.type))e||(e=t.slice(0,r));else{if(i.type.excludes(this.type))return t;!n&&i.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(i)}}return e||(e=t.slice()),n||e.push(this),e}removeFromSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t}isInSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1}eq(t){return this==t||this.type==t.type&&u(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");let n=t.marks[e.type];if(!n)throw new RangeError(`There is no mark type ${e.type} in this schema`);return n.create(e.attrs)}static sameSet(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&0==t.length)return d.none;if(t instanceof d)return[t];let e=t.slice();return e.sort(((t,e)=>t.type.rank-e.type.rank)),e}}d.none=[];class h extends Error{}class f{constructor(t,e,n){this.content=t,this.openStart=e,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,e){let n=m(this.content,t+this.openStart,e);return n&&new f(n,this.openStart,this.openEnd)}removeBetween(t,e){return new f(p(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,e){if(!e)return f.empty;let n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new f(a.fromJSON(t,e.content),n,r)}static maxOpen(t,e=!0){let n=0,r=0;for(let i=t.firstChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.firstChild)n++;for(let i=t.lastChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.lastChild)r++;return new f(t,n,r)}}function p(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:s,offset:a}=t.findIndex(n);if(i==e||o.isText){if(a!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(p(o.content,e-i-1,n-i-1)))}function m(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),s=t.maybeChild(i);if(o==e||s.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=m(s.content,e-o-1,n);return a&&t.replaceChild(i,s.copy(a))}function g(t,e,n){if(n.openStart>t.depth)throw new h("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new h("Inconsistent open depths");return v(t,e,n,0)}function v(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let s=v(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){let{start:i,end:s}=M(n,t);return x(o,S(t,i,s,e,r))}{let r=t.parent,i=r.content;return x(r,i.cut(0,t.parentOffset).append(n.content).append(i.cut(e.parentOffset)))}}return x(o,E(t,e,r))}function y(t,e){if(!e.type.compatibleContent(t.type))throw new h("Cannot join "+e.type.name+" onto "+t.type.name)}function b(t,e,n){let r=t.node(n);return y(r,e.node(n)),r}function _(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function w(t,e,n,r){let i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(_(t.nodeAfter,r),o++));for(let a=o;a<s;a++)_(i.child(a),r);e&&e.depth==n&&e.textOffset&&_(e.nodeBefore,r)}function x(t,e){return t.type.checkContent(e),t.copy(e)}function S(t,e,n,r,i){let o=t.depth>i&&b(t,e,i+1),s=r.depth>i&&b(n,r,i+1),l=[];return w(null,t,i,l),o&&s&&e.index(i)==n.index(i)?(y(o,s),_(x(o,S(t,e,n,r,i+1)),l)):(o&&_(x(o,E(t,e,i+1)),l),w(e,n,i,l),s&&_(x(s,E(n,r,i+1)),l)),w(r,null,i,l),new a(l)}function E(t,e,n){let r=[];if(w(null,t,n,r),t.depth>n){let i=b(t,e,n+1);_(x(i,E(t,e,n+1)),r)}return w(e,null,n,r),new a(r)}function M(t,e){let n=e.depth-t.openStart,r=e.node(n),i=r.copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(a.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}f.empty=new f(a.empty,0,0);class T{constructor(t,e,n){this.pos=t,this.path=e,this.parentOffset=n,this.depth=e.length/3-1}resolveDepth(t){return null==t?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[3*this.resolveDepth(t)]}index(t){return this.path[3*this.resolveDepth(t)+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)}start(t){return t=this.resolveDepth(t),0==t?0:this.path[3*t-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r}get nodeBefore(){let t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)}posAtIndex(t,e){e=this.resolveDepth(e);let n=this.path[3*e],r=0==e?0:this.path[3*e-1]+1;for(let i=0;i<t;i++)r+=n.child(i).nodeSize;return r}marks(){let t=this.parent,e=this.index();if(0==t.content.size)return d.none;if(this.textOffset)return t.child(e).marks;let n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){let t=n;n=r,r=t}let i=n.marks;for(var o=0;o<i.length;o++)!1!==i[o].type.spec.inclusive||r&&i[o].isInSet(r.marks)||(i=i[o--].removeFromSet(i));return i}marksAcross(t){let e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;let n=e.marks,r=t.parent.maybeChild(t.index());for(var i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n}sharedDepth(t){for(let e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0}blockRange(t=this,e){if(t.pos<this.pos)return t.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new O(this,t,n);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset}static resolve(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");let n=[],r=0,i=e;for(let o=t;;){let{index:t,offset:e}=o.content.findIndex(i),s=i-e;if(n.push(o,t,r+e),!s)break;if(o=o.child(t),o.isText)break;i=s-1,r+=e+1}return new T(e,n,i)}static resolveCached(t,e){for(let r=0;r<C.length;r++){let n=C[r];if(n.pos==e&&n.doc==t)return n}let n=C[A]=T.resolve(t,e);return A=(A+1)%k,n}}let C=[],A=0,k=12;class O{constructor(t,e,n){this.$from=t,this.$to=e,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const R=Object.create(null);class P{constructor(t,e,n,r=d.none){this.type=t,this.attrs=e,this.marks=r,this.content=n||a.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,e,n,r=0){this.content.nodesBetween(t,e,n,r,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,e,n,r){return this.content.textBetween(t,e,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,e,n){return this.type==t&&u(this.attrs,e||t.defaultAttrs||R)&&d.sameSet(this.marks,n||d.none)}copy(t=null){return t==this.content?this:new P(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new P(this.type,this.attrs,this.content,t)}cut(t,e=this.content.size){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))}slice(t,e=this.content.size,n=!1){if(t==e)return f.empty;let r=this.resolve(t),i=this.resolve(e),o=n?0:r.sharedDepth(e),s=r.start(o),a=r.node(o),l=a.content.cut(r.pos-s,i.pos-s);return new f(l,r.depth-o,i.depth-o)}replace(t,e,n){return g(this.resolve(t),this.resolve(e),n)}nodeAt(t){for(let e=this;;){let{index:n,offset:r}=e.content.findIndex(t);if(e=e.maybeChild(n),!e)return null;if(r==t||e.isText)return e;t-=r+1}}childAfter(t){let{index:e,offset:n}=this.content.findIndex(t);return{node:this.content.maybeChild(e),index:e,offset:n}}childBefore(t){if(0==t)return{node:null,index:0,offset:0};let{index:e,offset:n}=this.content.findIndex(t);if(n<t)return{node:this.content.child(e),index:e,offset:n};let r=this.content.child(e-1);return{node:r,index:e-1,offset:n-r.nodeSize}}resolve(t){return T.resolveCached(this,t)}resolveNoCache(t){return T.resolve(this,t)}rangeHasMark(t,e,n){let r=!1;return e>t&&this.nodesBetween(t,e,(t=>(n.isInSet(t.marks)&&(r=!0),!r))),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),D(this.marks,t)}contentMatchAt(t){let e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}canReplace(t,e,n=a.empty,r=0,i=n.childCount){let o=this.contentMatchAt(t).matchFragment(n,r,i),s=o&&o.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(let a=r;a<i;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0}canReplaceWith(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;let i=this.contentMatchAt(t).matchType(n),o=i&&i.matchFragment(this.content,e);return!!o&&o.validEnd}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content);let t=d.none;for(let e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!d.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map((t=>t.type.name))}`);this.content.forEach((t=>t.check()))}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((t=>t.toJSON()))),t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");let n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}let r=a.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)}}P.prototype.text=void 0;class L extends P{constructor(t,e,n,r){if(super(t,e,null,r),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):D(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,e){return this.text.slice(t,e)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new L(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new L(this.type,this.attrs,t,this.marks)}cut(t=0,e=this.text.length){return 0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function D(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class I{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,e){let n=new N(t,e);if(null==n.next)return I.empty;let r=U(n);n.next&&n.err("Unexpected trailing text");let i=q(W(r));return Y(i,n),i}matchType(t){for(let e=0;e<this.next.length;e++)if(this.next[e].type==t)return this.next[e].next;return null}matchFragment(t,e=0,n=t.childCount){let r=this;for(let i=e;r&&i<n;i++)r=r.matchType(t.child(i).type);return r}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:e}=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}return null}compatible(t){for(let e=0;e<this.next.length;e++)for(let n=0;n<t.next.length;n++)if(this.next[e].type==t.next[n].type)return!0;return!1}fillBefore(t,e=!1,n=0){let r=[this];function i(o,s){let l=o.matchFragment(t,n);if(l&&(!e||l.validEnd))return a.from(s.map((t=>t.createAndFill())));for(let t=0;t<o.next.length;t++){let{type:e,next:n}=o.next[t];if(!e.isText&&!e.hasRequiredAttrs()&&-1==r.indexOf(n)){r.push(n);let t=i(n,s.concat(e));if(t)return t}}return null}return i(this,[])}findWrapping(t){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==t)return this.wrapCache[n+1];let e=this.computeWrapping(t);return this.wrapCache.push(t,e),e}computeWrapping(t){let e=Object.create(null),n=[{match:this,type:null,via:null}];while(n.length){let r=n.shift(),i=r.match;if(i.matchType(t)){let t=[];for(let e=r;e.type;e=e.via)t.push(e.type);return t.reverse()}for(let t=0;t<i.next.length;t++){let{type:o,next:s}=i.next[t];o.isLeaf||o.hasRequiredAttrs()||o.name in e||r.type&&!s.validEnd||(n.push({match:o.contentMatch,type:o,via:r}),e[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function e(n){t.push(n);for(let r=0;r<n.next.length;r++)-1==t.indexOf(n.next[r].next)&&e(n.next[r].next)}return e(this),t.map(((e,n)=>{let r=n+(e.validEnd?"*":" ")+" ";for(let i=0;i<e.next.length;i++)r+=(i?", ":"")+e.next[i].type.name+"->"+t.indexOf(e.next[i].next);return r})).join("\n")}}I.empty=new I(!0);class N{constructor(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function U(t){let e=[];do{e.push(F(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function F(t){let e=[];do{e.push(B(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function B(t){let e=H(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=z(t,e)}return e}function V(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function z(t,e){let n=V(t),r=n;return t.eat(",")&&(r="}"!=t.next?V(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function j(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let t=n[o];t.groups.indexOf(e)>-1&&i.push(t)}return 0==i.length&&t.err("No node type or group '"+e+"' found"),i}function H(t){if(t.eat("(")){let e=U(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){let e=j(t,t.next).map((e=>(null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e})));return t.pos++,1==e.length?e[0]:{type:"choice",exprs:e}}t.err("Unexpected token '"+t.next+"'")}function W(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){let i={term:r,to:n};return e[t].push(i),i}function i(t,e){t.forEach((t=>t.to=e))}function o(t,e){if("choice"==t.type)return t.exprs.reduce(((t,n)=>t.concat(o(n,e))),[]);if("seq"!=t.type){if("star"==t.type){let s=n();return r(e,s),i(o(t.expr,s),s),[r(s)]}if("plus"==t.type){let s=n();return i(o(t.expr,e),s),i(o(t.expr,s),s),[r(s)]}if("opt"==t.type)return[r(e)].concat(o(t.expr,e));if("range"==t.type){let s=e;for(let e=0;e<t.min;e++){let e=n();i(o(t.expr,s),e),s=e}if(-1==t.max)i(o(t.expr,s),s);else for(let e=t.min;e<t.max;e++){let e=n();r(s,e),i(o(t.expr,s),e),s=e}return[r(s)]}if("name"==t.type)return[r(e,void 0,t.value)];throw new Error("Unknown expr type")}for(let r=0;;r++){let s=o(t.exprs[r],e);if(r==t.exprs.length-1)return s;i(s,e=n())}}}function G(t,e){return e-t}function $(t,e){let n=[];return r(e),n.sort(G);function r(e){let i=t[e];if(1==i.length&&!i[0].term)return r(i[0].to);n.push(e);for(let t=0;t<i.length;t++){let{term:e,to:o}=i[t];e||-1!=n.indexOf(o)||r(o)}}}function q(t){let e=Object.create(null);return n($(t,0));function n(r){let i=[];r.forEach((e=>{t[e].forEach((({term:e,to:n})=>{if(!e)return;let r;for(let t=0;t<i.length;t++)i[t][0]==e&&(r=i[t][1]);$(t,n).forEach((t=>{r||i.push([e,r=[]]),-1==r.indexOf(t)&&r.push(t)}))}))}));let o=e[r.join(",")]=new I(r.indexOf(t.length-1)>-1);for(let t=0;t<i.length;t++){let r=i[t][1].sort(G);o.next.push({type:i[t][0],next:e[r.join(",")]||n(r)})}return o}}function Y(t,e){for(let n=0,r=[t];n<r.length;n++){let t=r[n],i=!t.validEnd,o=[];for(let e=0;e<t.next.length;e++){let{type:n,next:s}=t.next[e];o.push(n.name),!i||n.isText||n.hasRequiredAttrs()||(i=!1),-1==r.indexOf(s)&&r.push(s)}i&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function X(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function Z(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(void 0===i){let e=t[r];if(!e.hasDefault)throw new RangeError("No value supplied for attribute "+r);i=e.default}n[r]=i}return n}function K(t){let e=Object.create(null);if(t)for(let n in t)e[n]=new Q(t[n]);return e}class J{constructor(t,e,n){this.name=t,this.schema=e,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=K(n.attrs),this.defaultAttrs=X(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==I.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:Z(this.attrs,t)}create(t=null,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new P(this,this.computeAttrs(t),a.from(e),d.setFrom(n))}createChecked(t=null,e,n){return e=a.from(e),this.checkContent(e),new P(this,this.computeAttrs(t),e,d.setFrom(n))}createAndFill(t=null,e,n){if(t=this.computeAttrs(t),e=a.from(e),e.size){let t=this.contentMatch.fillBefore(e);if(!t)return null;e=t.append(e)}let r=this.contentMatch.matchFragment(e),i=r&&r.fillBefore(a.empty,!0);return i?new P(this,t,e.append(i),d.setFrom(n)):null}validContent(t){let e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(let n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}allowsMarkType(t){return null==this.markSet||this.markSet.indexOf(t)>-1}allowsMarks(t){if(null==this.markSet)return!0;for(let e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0}allowedMarks(t){if(null==this.markSet)return t;let e;for(let n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:d.none:t}static compile(t,e){let n=Object.create(null);t.forEach(((t,r)=>n[t]=new J(t,e,r)));let r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let i in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}}class Q{constructor(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default}get isRequired(){return!this.hasDefault}}class tt{constructor(t,e,n,r){this.name=t,this.rank=e,this.schema=n,this.spec=r,this.attrs=K(r.attrs),this.excluded=null;let i=X(this.attrs);this.instance=i?new d(this,i):null}create(t=null){return!t&&this.instance?this.instance:new d(this,Z(this.attrs,t))}static compile(t,e){let n=Object.create(null),r=0;return t.forEach(((t,i)=>n[t]=new tt(t,r++,e,i))),n}removeFromSet(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t}isInSet(t){for(let e=0;e<t.length;e++)if(t[e].type==this)return t[e]}excludes(t){return this.excluded.indexOf(t)>-1}}class et{constructor(t){this.cached=Object.create(null);let e=this.spec={};for(let r in t)e[r]=t[r];e.nodes=i.from(t.nodes),e.marks=i.from(t.marks||{}),this.nodes=J.compile(this.spec.nodes,this),this.marks=tt.compile(this.spec.marks,this);let n=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let t=this.nodes[r],e=t.spec.content||"",i=t.spec.marks;t.contentMatch=n[e]||(n[e]=I.parse(e,this.nodes)),t.inlineContent=t.contentMatch.inlineContent,t.markSet="_"==i?null:i?nt(this,i.split(" ")):""!=i&&t.inlineContent?null:[]}for(let r in this.marks){let t=this.marks[r],e=t.spec.excludes;t.excluded=null==e?[t]:""==e?[]:nt(this,e.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,e=null,n,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof J))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)}text(t,e){let n=this.nodes.text;return new L(n,n.defaultAttrs,t,d.setFrom(e))}mark(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)}nodeFromJSON(t){return P.fromJSON(this,t)}markFromJSON(t){return d.fromJSON(this,t)}nodeType(t){let e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e}}function nt(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(let e in t.marks){let r=t.marks[e];("_"==i||r.spec.group&&r.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=r)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}class rt{constructor(t,e){this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach((t=>{t.tag?this.tags.push(t):t.style&&this.styles.push(t)})),this.normalizeLists=!this.tags.some((e=>{if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;let n=t.nodes[e.node];return n.contentMatch.matchType(n)}))}parse(t,e={}){let n=new ht(this,e,!1);return n.addAll(t,e.from,e.to),n.finish()}parseSlice(t,e={}){let n=new ht(this,e,!0);return n.addAll(t,e.from,e.to),f.maxOpen(n.finish())}matchTag(t,e,n){for(let r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){let n=this.tags[r];if(pt(t,n.tag)&&(void 0===n.namespace||t.namespaceURI==n.namespace)&&(!n.context||e.matchesContext(n.context))){if(n.getAttrs){let e=n.getAttrs(t);if(!1===e)continue;n.attrs=e||void 0}return n}}}matchStyle(t,e,n,r){for(let i=r?this.styles.indexOf(r)+1:0;i<this.styles.length;i++){let r=this.styles[i],o=r.style;if(!(0!=o.indexOf(t)||r.context&&!n.matchesContext(r.context)||o.length>t.length&&(61!=o.charCodeAt(t.length)||o.slice(t.length+1)!=e))){if(r.getAttrs){let t=r.getAttrs(e);if(!1===t)continue;r.attrs=t||void 0}return r}}}static schemaRules(t){let e=[];function n(t){let n=null==t.priority?50:t.priority,r=0;for(;r<e.length;r++){let t=e[r],i=null==t.priority?50:t.priority;if(i<n)break}e.splice(r,0,t)}for(let r in t.marks){let e=t.marks[r].spec.parseDOM;e&&e.forEach((t=>{n(t=gt(t)),t.mark||t.ignore||t.clearMark||(t.mark=r)}))}for(let r in t.nodes){let e=t.nodes[r].spec.parseDOM;e&&e.forEach((t=>{n(t=gt(t)),t.node||t.ignore||t.mark||(t.node=r)}))}return e}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new rt(t,rt.schemaRules(t)))}}const it={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ot={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},st={ol:!0,ul:!0},at=1,lt=2,ct=4;function ut(t,e,n){return null!=e?(e?at:0)|("full"===e?lt:0):t&&"pre"==t.whitespace?at|lt:n&~ct}class dt{constructor(t,e,n,r,i,o,s){this.type=t,this.attrs=e,this.marks=n,this.pendingMarks=r,this.solid=i,this.options=s,this.content=[],this.activeMarks=d.none,this.stashMarks=[],this.match=o||(s&ct?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let e=this.type.contentMatch.fillBefore(a.from(t));if(!e){let e,n=this.type.contentMatch;return(e=n.findWrapping(t.type))?(this.match=n,e):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&at)){let t,e=this.content[this.content.length-1];if(e&&e.isText&&(t=/[ \t\r\n\u000c]+$/.exec(e.text))){let n=e;e.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-t[0].length))}}let e=a.from(this.content);return!t&&this.match&&(e=e.append(this.match.fillBefore(a.empty,!0))),this.type?this.type.create(this.attrs,e,this.marks):e}popFromStashMark(t){for(let e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]}applyPending(t){for(let e=0,n=this.pendingMarks;e<n.length;e++){let r=n[e];(this.type?this.type.allowsMarkType(r.type):vt(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!it.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class ht{constructor(t,e,n){this.parser=t,this.options=e,this.isOpen=n,this.open=0;let r,i=e.topNode,o=ut(null,e.preserveWhitespace,0)|(n?ct:0);r=i?new dt(i.type,i.attrs,d.none,d.none,!0,e.topMatch||i.type.contentMatch,o):new dt(n?null:t.schema.topNodeType,null,d.none,d.none,!0,null,o),this.nodes=[r],this.find=e.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){let e=t.getAttribute("style");if(e){let n=this.readStyles(mt(e));if(!n)return;let[r,i]=n,o=this.top;for(let t=0;t<i.length;t++)this.removePendingMark(i[t],o);for(let t=0;t<r.length;t++)this.addPendingMark(r[t]);this.addElement(t);for(let t=0;t<r.length;t++)this.removePendingMark(r[t],o);for(let t=0;t<i.length;t++)this.addPendingMark(i[t])}else this.addElement(t)}}addTextNode(t){let e=t.nodeValue,n=this.top;if(n.options&lt||n.inlineContext(t)||/[^ \t\r\n\u000c]/.test(e)){if(n.options&at)e=n.options&lt?e.replace(/\r\n?/g,"\n"):e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){let r=n.content[n.content.length-1],i=t.previousSibling;(!r||i&&"BR"==i.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)}addElement(t,e){let n,r=t.nodeName.toLowerCase();st.hasOwnProperty(r)&&this.parser.normalizeLists&&ft(t);let i=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(n=this.parser.matchTag(t,this,e));if(i?i.ignore:ot.hasOwnProperty(r))this.findInside(t),this.ignoreFallback(t);else if(!i||i.skip||i.closeParent){i&&i.closeParent?this.open=Math.max(0,this.open-1):i&&i.skip.nodeType&&(t=i.skip);let e,n=this.top,o=this.needsBlock;if(it.hasOwnProperty(r))n.content.length&&n.content[0].isInline&&this.open&&(this.open--,n=this.top),e=!0,n.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),e&&this.sync(n),this.needsBlock=o}else this.addElementByRule(t,i,!1===i.consuming?n:void 0)}leafFallback(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))}ignoreFallback(t){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))}readStyles(t){let e=d.none,n=d.none;for(let r=0;r<t.length;r+=2)for(let i;;){let o=this.parser.matchStyle(t[r],t[r+1],this,i);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach((t=>{o.clearMark(t)&&(n=t.addToSet(n))})):e=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(e),!1!==o.consuming)break;i=o}return[e,n]}addElementByRule(t,e,n){let r,i,o;if(e.node)i=this.parser.schema.nodes[e.node],i.isLeaf?this.insertNode(i.create(e.attrs))||this.leafFallback(t):r=this.enter(i,e.attrs||null,e.preserveWhitespace);else{let t=this.parser.schema.marks[e.mark];o=t.create(e.attrs),this.addPendingMark(o)}let s=this.top;if(i&&i.isLeaf)this.findInside(t);else if(n)this.addElement(t,n);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((t=>this.insertNode(t)));else{let n=t;"string"==typeof e.contentElement?n=t.querySelector(e.contentElement):"function"==typeof e.contentElement?n=e.contentElement(t):e.contentElement&&(n=e.contentElement),this.findAround(t,n,!0),this.addAll(n)}r&&this.sync(s)&&this.open--,o&&this.removePendingMark(o,s)}addAll(t,e,n){let r=e||0;for(let i=e?t.childNodes[e]:t.firstChild,o=null==n?null:t.childNodes[n];i!=o;i=i.nextSibling,++r)this.findAtPoint(t,r),this.addDOM(i);this.findAtPoint(t,r)}findPlace(t){let e,n;for(let r=this.open;r>=0;r--){let i=this.nodes[r],o=i.findWrapping(t);if(o&&(!e||e.length>o.length)&&(e=o,n=i,!o.length))break;if(i.solid)break}if(!e)return!1;this.sync(n);for(let r=0;r<e.length;r++)this.enterInner(e[r],null,!1);return!0}insertNode(t){if(t.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(t)){this.closeExtra();let e=this.top;e.applyPending(t.type),e.match&&(e.match=e.match.matchType(t.type));let n=e.activeMarks;for(let r=0;r<t.marks.length;r++)e.type&&!e.type.allowsMarkType(t.marks[r].type)||(n=t.marks[r].addToSet(n));return e.content.push(t.mark(n)),!0}return!1}enter(t,e,n){let r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r}enterInner(t,e=null,n=!1,r){this.closeExtra();let i=this.top;i.applyPending(t),i.match=i.match&&i.match.matchType(t);let o=ut(t,r,i.options);i.options&ct&&0==i.content.length&&(o|=ct),this.nodes.push(new dt(t,e,i.activeMarks,i.pendingMarks,n,null,o)),this.open++}closeExtra(t=!1){let e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(t){for(let e=this.open;e>=0;e--)if(this.nodes[e]==t)return this.open=e,!0;return!1}get currentPos(){this.closeExtra();let t=0;for(let e=this.open;e>=0;e--){let n=this.nodes[e].content;for(let e=n.length-1;e>=0;e--)t+=n[e].nodeSize;e&&t++}return t}findAtPoint(t,e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)}findInside(t){if(this.find)for(let e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)}findAround(t,e,n){if(t!=e&&this.find)for(let r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node)){let t=e.compareDocumentPosition(this.find[r].node);t&(n?2:4)&&(this.find[r].pos=this.currentPos)}}findInText(t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let e=t.split("/"),n=this.options.context,r=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),i=-(n?n.depth+1:0)+(r?0:1),o=(t,s)=>{for(;t>=0;t--){let a=e[t];if(""==a){if(t==e.length-1||0==t)continue;for(;s>=i;s--)if(o(t-1,s))return!0;return!1}{let t=s>0||0==s&&r?this.nodes[s].type:n&&s>=i?n.node(s-i).type:null;if(!t||t.name!=a&&-1==t.groups.indexOf(a))return!1;s--}}return!0};return o(e.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let e=t.depth;e>=0;e--){let n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let e in this.parser.schema.nodes){let t=this.parser.schema.nodes[e];if(t.isTextblock&&t.defaultAttrs)return t}}addPendingMark(t){let e=yt(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)}removePendingMark(t,e){for(let n=this.open;n>=0;n--){let r=this.nodes[n],i=r.pendingMarks.lastIndexOf(t);if(i>-1)r.pendingMarks=t.removeFromSet(r.pendingMarks);else{r.activeMarks=t.removeFromSet(r.activeMarks);let e=r.popFromStashMark(t);e&&r.type&&r.type.allowsMarkType(e.type)&&(r.activeMarks=e.addToSet(r.activeMarks))}if(r==e)break}}}function ft(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let t=1==e.nodeType?e.nodeName.toLowerCase():null;t&&st.hasOwnProperty(t)&&n?(n.appendChild(e),e=n):"li"==t?n=e:t&&(n=null)}}function pt(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function mt(t){let e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];while(e=n.exec(t))r.push(e[1],e[2].trim());return r}function gt(t){let e={};for(let n in t)e[n]=t[n];return e}function vt(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],s=t=>{o.push(t);for(let n=0;n<t.edgeCount;n++){let{type:r,next:i}=t.edge(n);if(r==e)return!0;if(o.indexOf(i)<0&&s(i))return!0}};if(s(i.contentMatch))return!0}}function yt(t,e){for(let n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}class bt{constructor(t,e){this.nodes=t,this.marks=e}serializeFragment(t,e={},n){n||(n=wt(e).createDocumentFragment());let r=n,i=[];return t.forEach((t=>{if(i.length||t.marks.length){let n=0,o=0;while(n<i.length&&o<t.marks.length){let e=t.marks[o];if(this.marks[e.type.name]){if(!e.eq(i[n][0])||!1===e.type.spec.spanning)break;n++,o++}else o++}while(n<i.length)r=i.pop()[1];while(o<t.marks.length){let n=t.marks[o++],s=this.serializeMark(n,t.isInline,e);s&&(i.push([n,r]),r.appendChild(s.dom),r=s.contentDOM||s.dom)}}r.appendChild(this.serializeNodeInner(t,e))})),n}serializeNodeInner(t,e){let{dom:n,contentDOM:r}=bt.renderSpec(wt(e),this.nodes[t.type.name](t));if(r){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,e,r)}return n}serializeNode(t,e={}){let n=this.serializeNodeInner(t,e);for(let r=t.marks.length-1;r>=0;r--){let i=this.serializeMark(t.marks[r],t.isInline,e);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n}serializeMark(t,e,n={}){let r=this.marks[t.type.name];return r&&bt.renderSpec(wt(n),r(t,e))}static renderSpec(t,e,n=null){if("string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};if(e.dom&&null!=e.dom.nodeType)return e;let r,i=e[0],o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let s=n?t.createElementNS(n,i):t.createElement(i),a=e[1],l=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a)){l=2;for(let t in a)if(null!=a[t]){let e=t.indexOf(" ");e>0?s.setAttributeNS(t.slice(0,e),t.slice(e+1),a[t]):s.setAttribute(t,a[t])}}for(let c=l;c<e.length;c++){let i=e[c];if(0===i){if(c<e.length-1||c>l)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}{let{dom:e,contentDOM:o}=bt.renderSpec(t,i,n);if(s.appendChild(e),o){if(r)throw new RangeError("Multiple content holes");r=o}}}return{dom:s,contentDOM:r}}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new bt(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let e=_t(t.nodes);return e.text||(e.text=t=>t.text),e}static marksFromSchema(t){return _t(t.marks)}}function _t(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function wt(t){return t.document||window.document}},1418:function(t,e,n){"use strict";n.d(e,{Bs:function(){return u},C1:function(){return p},H$:function(){return R},Sy:function(){return A},Y1:function(){return s},qv:function(){return h},yy:function(){return T}});n(1703),n(7658);var r=n(8443),i=n(4040);const o=Object.create(null);class s{constructor(t,e,n){this.$anchor=t,this.$head=e,this.ranges=n||[new a(t.min(e),t.max(e))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,e=r.p2.empty){let n=e.content.lastChild,i=null;for(let r=0;r<e.openEnd;r++)i=n,n=n.lastChild;let o=t.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:c}=s[a],u=t.mapping.slice(o);t.replaceRange(u.map(l.pos),u.map(c.pos),a?r.p2.empty:e),0==a&&v(t,o,(n?n.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,e){let n=t.steps.length,r=this.ranges;for(let i=0;i<r.length;i++){let{$from:o,$to:s}=r[i],a=t.mapping.slice(n),l=a.map(o.pos),c=a.map(s.pos);i?t.deleteRange(l,c):(t.replaceRangeWith(l,c,e),v(t,n,e.isInline?-1:1))}}static findFrom(t,e,n=!1){let r=t.parent.inlineContent?new u(t):g(t.node(0),t.parent,t.pos,t.index(),e,n);if(r)return r;for(let i=t.depth-1;i>=0;i--){let r=e<0?g(t.node(0),t.node(i),t.before(i+1),t.index(i),e,n):g(t.node(0),t.node(i),t.after(i+1),t.index(i)+1,e,n);if(r)return r}return null}static near(t,e=1){return this.findFrom(t,e)||this.findFrom(t,-e)||new p(t.node(0))}static atStart(t){return g(t,t,0,0,1)||new p(t)}static atEnd(t){return g(t,t,t.content.size,t.childCount,-1)||new p(t)}static fromJSON(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=o[e.type];if(!n)throw new RangeError(`No selection type ${e.type} defined`);return n.fromJSON(t,e)}static jsonID(t,e){if(t in o)throw new RangeError("Duplicate use of selection JSON ID "+t);return o[t]=e,e.prototype.jsonID=t,e}getBookmark(){return u.between(this.$anchor,this.$head).getBookmark()}}s.prototype.visible=!0;class a{constructor(t,e){this.$from=t,this.$to=e}}let l=!1;function c(t){l||t.parent.inlineContent||(l=!0,console["warn"]("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class u extends s{constructor(t,e=t){c(t),c(e),super(t,e)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,e){let n=t.resolve(e.map(this.head));if(!n.parent.inlineContent)return s.near(n);let r=t.resolve(e.map(this.anchor));return new u(r.parent.inlineContent?r:n,n)}replace(t,e=r.p2.empty){if(super.replace(t,e),e==r.p2.empty){let e=this.$from.marksAcross(this.$to);e&&t.ensureMarks(e)}}eq(t){return t instanceof u&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new d(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,e){if("number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new u(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,n=e){let r=t.resolve(e);return new this(r,n==e?r:t.resolve(n))}static between(t,e,n){let r=t.pos-e.pos;if(n&&!r||(n=r>=0?1:-1),!e.parent.inlineContent){let t=s.findFrom(e,n,!0)||s.findFrom(e,-n,!0);if(!t)return s.near(e,n);e=t.$head}return t.parent.inlineContent||(0==r?t=e:(t=(s.findFrom(t,-n,!0)||s.findFrom(t,n,!0)).$anchor,t.pos<e.pos!=r<0&&(t=e))),new u(t,e)}}s.jsonID("text",u);class d{constructor(t,e){this.anchor=t,this.head=e}map(t){return new d(t.map(this.anchor),t.map(this.head))}resolve(t){return u.between(t.resolve(this.anchor),t.resolve(this.head))}}class h extends s{constructor(t){let e=t.nodeAfter,n=t.node(0).resolve(t.pos+e.nodeSize);super(t,n),this.node=e}map(t,e){let{deleted:n,pos:r}=e.mapResult(this.anchor),i=t.resolve(r);return n?s.near(i):new h(i)}content(){return new r.p2(r.HY.from(this.node),0,0)}eq(t){return t instanceof h&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new f(this.anchor)}static fromJSON(t,e){if("number"!=typeof e.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new h(t.resolve(e.anchor))}static create(t,e){return new h(t.resolve(e))}static isSelectable(t){return!t.isText&&!1!==t.type.spec.selectable}}h.prototype.visible=!1,s.jsonID("node",h);class f{constructor(t){this.anchor=t}map(t){let{deleted:e,pos:n}=t.mapResult(this.anchor);return e?new d(n,n):new f(n)}resolve(t){let e=t.resolve(this.anchor),n=e.nodeAfter;return n&&h.isSelectable(n)?new h(e):s.near(e)}}class p extends s{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,e=r.p2.empty){if(e==r.p2.empty){t.delete(0,t.doc.content.size);let e=s.atStart(t.doc);e.eq(t.selection)||t.setSelection(e)}else super.replace(t,e)}toJSON(){return{type:"all"}}static fromJSON(t){return new p(t)}map(t){return new p(t)}eq(t){return t instanceof p}getBookmark(){return m}}s.jsonID("all",p);const m={map(){return this},resolve(t){return new p(t)}};function g(t,e,n,r,i,o=!1){if(e.inlineContent)return u.create(t,n);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let r=e.child(s);if(r.isAtom){if(!o&&h.isSelectable(r))return h.create(t,n-(i<0?r.nodeSize:0))}else{let e=g(t,r,n+i,i<0?r.childCount:0,i,o);if(e)return e}n+=r.nodeSize*i}return null}function v(t,e,n){let r=t.steps.length-1;if(r<e)return;let o=t.steps[r];if(!(o instanceof i.Pu||o instanceof i.FC))return;let a,l=t.mapping.maps[r];l.forEach(((t,e,n,r)=>{null==a&&(a=r)})),t.setSelection(s.near(t.doc.resolve(a),n))}const y=1,b=2,_=4;class w extends i.wx{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|y)&~b,this.storedMarks=null,this}get selectionSet(){return(this.updated&y)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=b,this}ensureMarks(t){return r.vc.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&b)>0}addStep(t,e){super.addStep(t,e),this.updated=this.updated&~b,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,e=!0){let n=this.selection;return e&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||r.vc.none))),n.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,e,n){let r=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(r.text(t),!0):this.deleteSelection();{if(null==n&&(n=e),n=null==n?e:n,!t)return this.deleteRange(e,n);let i=this.storedMarks;if(!i){let t=this.doc.resolve(e);i=n==e?t.marks():t.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(e,n,r.text(t,i)),this.selection.empty||this.setSelection(s.near(this.selection.$to)),this}}setMeta(t,e){return this.meta["string"==typeof t?t:t.key]=e,this}getMeta(t){return this.meta["string"==typeof t?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=_,this}get scrolledIntoView(){return(this.updated&_)>0}}function x(t,e){return e&&t?t.bind(e):t}class S{constructor(t,e,n){this.name=t,this.init=x(e.init,n),this.apply=x(e.apply,n)}}const E=[new S("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new S("selection",{init(t,e){return t.selection||s.atStart(e.doc)},apply(t){return t.selection}}),new S("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new S("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class M{constructor(t,e){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=E.slice(),e&&e.forEach((t=>{if(this.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");this.plugins.push(t),this.pluginsByKey[t.key]=t,t.spec.state&&this.fields.push(new S(t.key,t.spec.state,t))}))}}class T{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,e=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=e){let e=this.config.plugins[n];if(e.spec.filterTransaction&&!e.spec.filterTransaction.call(e,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let e=[t],n=this.applyInner(t),r=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let s=this.config.plugins[o];if(s.spec.appendTransaction){let a=r?r[o].n:0,l=r?r[o].state:this,c=a<e.length&&s.spec.appendTransaction.call(s,a?e.slice(a):e,l,n);if(c&&n.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",t),!r){r=[];for(let t=0;t<this.config.plugins.length;t++)r.push(t<o?{state:n,n:e.length}:{state:this,n:0})}e.push(c),n=n.applyInner(c),i=!0}r&&(r[o]={state:n,n:e.length})}}if(!i)return{state:n,transactions:e}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let e=new T(this.config),n=this.config.fields;for(let r=0;r<n.length;r++){let i=n[r];e[i.name]=i.apply(t,this[i.name],this,e)}return e}get tr(){return new w(this)}static create(t){let e=new M(t.doc?t.doc.type.schema:t.schema,t.plugins),n=new T(e);for(let r=0;r<e.fields.length;r++)n[e.fields[r].name]=e.fields[r].init(t,n);return n}reconfigure(t){let e=new M(this.schema,t.plugins),n=e.fields,r=new T(e);for(let i=0;i<n.length;i++){let e=n[i].name;r[e]=this.hasOwnProperty(e)?this[e]:n[i].init(t,r)}return r}toJSON(t){let e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((t=>t.toJSON()))),t&&"object"==typeof t)for(let n in t){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=t[n],i=r.spec.state;i&&i.toJSON&&(e[n]=i.toJSON.call(r,this[r.key]))}return e}static fromJSON(t,e,n){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new M(t.schema,t.plugins),o=new T(i);return i.fields.forEach((i=>{if("doc"==i.name)o.doc=r.NB.fromJSON(t.schema,e.doc);else if("selection"==i.name)o.selection=s.fromJSON(o.doc,e.selection);else if("storedMarks"==i.name)e.storedMarks&&(o.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(n)for(let r in n){let s=n[r],a=s.spec.state;if(s.key==i.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(e,r))return void(o[i.name]=a.fromJSON.call(s,t,e[r],o))}o[i.name]=i.init(t,o)}})),o}}function C(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):"handleDOMEvents"==r&&(i=C(i,e,{})),n[r]=i}return n}class A{constructor(t){this.spec=t,this.props={},t.props&&C(t.props,this,this.props),this.key=t.key?t.key.key:O("plugin")}getState(t){return t[this.key]}}const k=Object.create(null);function O(t){return t in k?t+"$"+ ++k[t]:(k[t]=0,t+"$")}class R{constructor(t="key"){this.key=O(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}},4040:function(t,e,n){"use strict";n.d(e,{Ax:function(){return z},FC:function(){return M},GJ:function(){return G},Mn:function(){return H},Pu:function(){return E},dR:function(){return X},k9:function(){return R},nd:function(){return L},nj:function(){return Y},vs:function(){return m},wx:function(){return ht}});n(7658),n(1703);var r=n(8443);const i=65535,o=Math.pow(2,16);function s(t,e){return t+e*o}function a(t){return t&i}function l(t){return(t-(t&i))/o}const c=1,u=2,d=4,h=8;class f{constructor(t,e,n){this.pos=t,this.delInfo=e,this.recover=n}get deleted(){return(this.delInfo&h)>0}get deletedBefore(){return(this.delInfo&(c|d))>0}get deletedAfter(){return(this.delInfo&(u|d))>0}get deletedAcross(){return(this.delInfo&d)>0}}class p{constructor(t,e=!1){if(this.ranges=t,this.inverted=e,!t.length&&p.empty)return p.empty}recover(t){let e=0,n=a(t);if(!this.inverted)for(let r=0;r<n;r++)e+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+e+l(t)}mapResult(t,e=1){return this._map(t,e,!1)}map(t,e=1){return this._map(t,e,!0)}_map(t,e,n){let r=0,i=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>t)break;let p=this.ranges[a+i],m=this.ranges[a+o],g=l+p;if(t<=g){let i=p?t==l?-1:t==g?1:e:e,o=l+r+(i<0?0:m);if(n)return o;let v=t==(e<0?l:g)?null:s(a/3,t-l),y=t==l?u:t==g?c:d;return(e<0?t!=l:t!=g)&&(y|=h),new f(o,y,v)}r+=m-p}return n?t+r:new f(t+r,0,null)}touches(t,e){let n=0,r=a(e),i=this.inverted?2:1,o=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let e=this.ranges[s]-(this.inverted?n:0);if(e>t)break;let a=this.ranges[s+i],l=e+a;if(t<=l&&s==3*r)return!0;n+=this.ranges[s+o]-a}return!1}forEach(t){let e=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,i=0;r<this.ranges.length;r+=3){let o=this.ranges[r],s=o-(this.inverted?i:0),a=o+(this.inverted?0:i),l=this.ranges[r+e],c=this.ranges[r+n];t(s,s+l,a,a+c),i+=c-l}}invert(){return new p(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return 0==t?p.empty:new p(t<0?[0,-t,0]:[0,0,t])}}p.empty=new p([]);class m{constructor(t=[],e,n=0,r=t.length){this.maps=t,this.mirror=e,this.from=n,this.to=r}slice(t=0,e=this.maps.length){return new m(this.maps,this.mirror,t,e)}copy(){return new m(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)}appendMapping(t){for(let e=0,n=this.maps.length;e<t.maps.length;e++){let r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?n+r:void 0)}}getMirror(t){if(this.mirror)for(let e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]}setMirror(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)}appendMappingInverted(t){for(let e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){let r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?n-r-1:void 0)}}invert(){let t=new m;return t.appendMappingInverted(this),t}map(t,e=1){if(this.mirror)return this._map(t,e,!0);for(let n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t}mapResult(t,e=1){return this._map(t,e,!1)}_map(t,e,n){let r=0;for(let i=this.from;i<this.to;i++){let n=this.maps[i],o=n.mapResult(t,e);if(null!=o.recover){let e=this.getMirror(i);if(null!=e&&e>i&&e<this.to){i=e,t=this.maps[e].recover(o.recover);continue}}r|=o.delInfo,t=o.pos}return n?t:new f(t,r,null)}}const g=Object.create(null);class v{getMap(){return p.empty}merge(t){return null}static fromJSON(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=g[e.stepType];if(!n)throw new RangeError(`No step type ${e.stepType} defined`);return n.fromJSON(t,e)}static jsonID(t,e){if(t in g)throw new RangeError("Duplicate use of step JSON ID "+t);return g[t]=e,e.prototype.jsonID=t,e}}class y{constructor(t,e){this.doc=t,this.failed=e}static ok(t){return new y(t,null)}static fail(t){return new y(null,t)}static fromReplace(t,e,n,i){try{return y.ok(t.replace(e,n,i))}catch(o){if(o instanceof r.e4)return y.fail(o.message);throw o}}}function b(t,e,n){let i=[];for(let r=0;r<t.childCount;r++){let o=t.child(r);o.content.size&&(o=o.copy(b(o.content,e,o))),o.isInline&&(o=e(o,n,r)),i.push(o)}return r.HY.fromArray(i)}class _ extends v{constructor(t,e,n){super(),this.from=t,this.to=e,this.mark=n}apply(t){let e=t.slice(this.from,this.to),n=t.resolve(this.from),i=n.node(n.sharedDepth(this.to)),o=new r.p2(b(e.content,((t,e)=>t.isAtom&&e.type.allowsMarkType(this.mark.type)?t.mark(this.mark.addToSet(t.marks)):t),i),e.openStart,e.openEnd);return y.fromReplace(t,this.from,this.to,o)}invert(){return new w(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new _(e.pos,n.pos,this.mark)}merge(t){return t instanceof _&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new _(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new _(e.from,e.to,t.markFromJSON(e.mark))}}v.jsonID("addMark",_);class w extends v{constructor(t,e,n){super(),this.from=t,this.to=e,this.mark=n}apply(t){let e=t.slice(this.from,this.to),n=new r.p2(b(e.content,(t=>t.mark(this.mark.removeFromSet(t.marks))),t),e.openStart,e.openEnd);return y.fromReplace(t,this.from,this.to,n)}invert(){return new _(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new w(e.pos,n.pos,this.mark)}merge(t){return t instanceof w&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new w(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new w(e.from,e.to,t.markFromJSON(e.mark))}}v.jsonID("removeMark",w);class x extends v{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return y.fail("No node at mark step's position");let n=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return y.fromReplace(t,this.pos,this.pos+1,new r.p2(r.HY.from(n),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);if(e){let t=this.mark.addToSet(e.marks);if(t.length==e.marks.length){for(let n=0;n<e.marks.length;n++)if(!e.marks[n].isInSet(t))return new x(this.pos,e.marks[n]);return new x(this.pos,this.mark)}}return new S(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new x(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new x(e.pos,t.markFromJSON(e.mark))}}v.jsonID("addNodeMark",x);class S extends v{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return y.fail("No node at mark step's position");let n=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return y.fromReplace(t,this.pos,this.pos+1,new r.p2(r.HY.from(n),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);return e&&this.mark.isInSet(e.marks)?new x(this.pos,this.mark):this}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new S(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new S(e.pos,t.markFromJSON(e.mark))}}v.jsonID("removeNodeMark",S);class E extends v{constructor(t,e,n,r=!1){super(),this.from=t,this.to=e,this.slice=n,this.structure=r}apply(t){return this.structure&&T(t,this.from,this.to)?y.fail("Structure replace would overwrite content"):y.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new p([this.from,this.to-this.from,this.slice.size])}invert(t){return new E(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deletedAcross&&n.deletedAcross?null:new E(e.pos,Math.max(e.pos,n.pos),this.slice)}merge(t){if(!(t instanceof E)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;{let e=this.slice.size+t.slice.size==0?r.p2.empty:new r.p2(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new E(t.from,this.to,e,this.structure)}}{let e=this.slice.size+t.slice.size==0?r.p2.empty:new r.p2(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new E(this.from,this.to+(t.to-t.from),e,this.structure)}}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new E(e.from,e.to,r.p2.fromJSON(t,e.slice),!!e.structure)}}v.jsonID("replace",E);class M extends v{constructor(t,e,n,r,i,o,s=!1){super(),this.from=t,this.to=e,this.gapFrom=n,this.gapTo=r,this.slice=i,this.insert=o,this.structure=s}apply(t){if(this.structure&&(T(t,this.from,this.gapFrom)||T(t,this.gapTo,this.to)))return y.fail("Structure gap-replace would overwrite content");let e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return y.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,e.content);return n?y.fromReplace(t,this.from,this.to,n):y.fail("Content does not fit in gap")}getMap(){return new p([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let e=this.gapTo-this.gapFrom;return new M(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1),r=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return e.deletedAcross&&n.deletedAcross||r<e.pos||i>n.pos?null:new M(e.pos,n.pos,r,i,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to||"number"!=typeof e.gapFrom||"number"!=typeof e.gapTo||"number"!=typeof e.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new M(e.from,e.to,e.gapFrom,e.gapTo,r.p2.fromJSON(t,e.slice),e.insert,!!e.structure)}}function T(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;while(i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount)o--,i--;if(i>0){let t=r.node(o).maybeChild(r.indexAfter(o));while(i>0){if(!t||t.isLeaf)return!0;t=t.firstChild,i--}}return!1}function C(t,e,n,r){let i,o,s=[],a=[];t.doc.nodesBetween(e,n,((t,l,c)=>{if(!t.isInline)return;let u=t.marks;if(!r.isInSet(u)&&c.type.allowsMarkType(r.type)){let c=Math.max(l,e),d=Math.min(l+t.nodeSize,n),h=r.addToSet(u);for(let t=0;t<u.length;t++)u[t].isInSet(h)||(i&&i.to==c&&i.mark.eq(u[t])?i.to=d:s.push(i=new w(c,d,u[t])));o&&o.to==c?o.to=d:a.push(o=new _(c,d,r))}})),s.forEach((e=>t.step(e))),a.forEach((e=>t.step(e)))}function A(t,e,n,i){let o=[],s=0;t.doc.nodesBetween(e,n,((t,a)=>{if(!t.isInline)return;s++;let l=null;if(i instanceof r.ZU){let e,n=t.marks;while(e=i.isInSet(n))(l||(l=[])).push(e),n=e.removeFromSet(n)}else i?i.isInSet(t.marks)&&(l=[i]):l=t.marks;if(l&&l.length){let r=Math.min(a+t.nodeSize,n);for(let t=0;t<l.length;t++){let n,i=l[t];for(let t=0;t<o.length;t++){let e=o[t];e.step==s-1&&i.eq(o[t].style)&&(n=e)}n?(n.to=r,n.step=s):o.push({style:i,from:Math.max(a,e),to:r,step:s})}}})),o.forEach((e=>t.step(new w(e.from,e.to,e.style))))}function k(t,e,n,i=n.contentMatch){let o=t.doc.nodeAt(e),s=[],a=e+1;for(let l=0;l<o.childCount;l++){let e=o.child(l),c=a+e.nodeSize,u=i.matchType(e.type);if(u){i=u;for(let r=0;r<e.marks.length;r++)n.allowsMarkType(e.marks[r].type)||t.step(new w(a,c,e.marks[r]))}else s.push(new E(a,c,r.p2.empty));a=c}if(!i.validEnd){let e=i.fillBefore(r.HY.empty,!0);t.replace(a,a,new r.p2(e,0,0))}for(let r=s.length-1;r>=0;r--)t.step(s[r])}function O(t,e,n){return(0==e||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function R(t){let e=t.parent,n=e.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let e=t.$from.node(r),i=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&e.canReplace(i,o,n))return r;if(0==r||e.type.spec.isolating||!O(e,i,o))break}return null}function P(t,e,n){let{$from:i,$to:o,depth:s}=e,a=i.before(s+1),l=o.after(s+1),c=a,u=l,d=r.HY.empty,h=0;for(let m=s,g=!1;m>n;m--)g||i.index(m)>0?(g=!0,d=r.HY.from(i.node(m).copy(d)),h++):c--;let f=r.HY.empty,p=0;for(let m=s,g=!1;m>n;m--)g||o.after(m+1)<o.end(m)?(g=!0,f=r.HY.from(o.node(m).copy(f)),p++):u++;t.step(new M(c,u,a,l,new r.p2(d.append(f),h,p),d.size-h,!0))}function L(t,e,n=null,r=t){let i=I(t,e),o=i&&N(r,e);return o?i.map(D).concat({type:e,attrs:n}).concat(o.map(D)):null}function D(t){return{type:t,attrs:null}}function I(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return n.canReplaceWith(r,i,s)?o:null}function N(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let a=s.length?s[s.length-1]:e,l=a.contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(n.child(c).type);return l&&l.validEnd?s:null}function U(t,e,n){let i=r.HY.empty;for(let a=n.length-1;a>=0;a--){if(i.size){let t=n[a].type.contentMatch.matchFragment(i);if(!t||!t.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=r.HY.from(n[a].type.create(n[a].attrs,i))}let o=e.start,s=e.end;t.step(new M(o,s,o,s,new r.p2(i,0,0),n.length,!0))}function F(t,e,n,i,o){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,((e,n)=>{if(e.isTextblock&&!e.hasMarkup(i,o)&&B(t.doc,t.mapping.slice(s).map(n),i)){t.clearIncompatible(t.mapping.slice(s).map(n,1),i);let a=t.mapping.slice(s),l=a.map(n,1),c=a.map(n+e.nodeSize,1);return t.step(new M(l,c,l+1,c-1,new r.p2(r.HY.from(i.create(o,null,e.marks)),0,0),1,!0)),!1}}))}function B(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function V(t,e,n,i,o){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let a=n.create(i,null,o||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,a);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new M(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new r.p2(r.HY.from(a),0,0),1,!0))}function z(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>o;c--,u--){let t=i.node(c),e=i.index(c);if(t.type.spec.isolating)return!1;let n=t.content.cutByIndex(e,t.childCount),o=r&&r[u+1];o&&(n=n.replaceChild(0,o.type.create(o.attrs)));let s=r&&r[u]||t;if(!t.canReplace(e+1,t.childCount)||!s.type.validContent(n))return!1}let a=i.indexAfter(o),l=r&&r[0];return i.node(o).canReplaceWith(a,a,l?l.type:i.node(o+1).type)}function j(t,e,n=1,i){let o=t.doc.resolve(e),s=r.HY.empty,a=r.HY.empty;for(let l=o.depth,c=o.depth-n,u=n-1;l>c;l--,u--){s=r.HY.from(o.node(l).copy(s));let t=i&&i[u];a=r.HY.from(t?t.type.create(t.attrs,a):o.node(l).copy(a))}t.step(new E(e,e,new r.p2(s.append(a),n,n),!0))}function H(t,e){let n=t.resolve(e),r=n.index();return W(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function W(t,e){return!(!t||!e||t.isLeaf||!t.canAppend(e))}function G(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let t,o,s=r.index(i);if(i==r.depth?(t=r.nodeBefore,o=r.nodeAfter):n>0?(t=r.node(i+1),s++,o=r.node(i).maybeChild(s)):(t=r.node(i).maybeChild(s-1),o=r.node(i+1)),t&&!t.isTextblock&&W(t,o)&&r.node(i).canReplace(s,s+1))return e;if(0==i)break;e=n<0?r.before(i):r.after(i)}}function $(t,e,n){let i=new E(e-n,e+n,r.p2.empty,!0);t.step(i)}function q(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(let i=r.depth-1;i>=0;i--){let t=r.index(i);if(r.node(i).canReplaceWith(t,t,n))return r.before(i+1);if(t>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let t=r.indexAfter(i);if(r.node(i).canReplaceWith(t,t,n))return r.after(i+1);if(t<r.node(i).childCount)return null}return null}function Y(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(0==n.openStart&&n.size?2:1);o++)for(let t=r.depth;t>=0;t--){let e=t==r.depth?0:r.pos<=(r.start(t+1)+r.end(t+1))/2?-1:1,n=r.index(t)+(e>0?1:0),s=r.node(t),a=!1;if(1==o)a=s.canReplace(n,n,i);else{let t=s.contentMatchAt(n).findWrapping(i.firstChild.type);a=t&&s.canReplaceWith(n,n,t[0])}if(a)return 0==e?r.pos:e<0?r.before(t+1):r.after(t+1)}return null}function X(t,e,n=e,i=r.p2.empty){if(e==n&&!i.size)return null;let o=t.resolve(e),s=t.resolve(n);return Z(o,s,i)?new E(e,n,i):new K(o,s,i).fit()}function Z(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}v.jsonID("replaceAround",M);class K{constructor(t,e,n){this.$from=t,this.$to=e,this.unplaced=n,this.frontier=[],this.placed=r.HY.empty;for(let r=0;r<=t.depth;r++){let e=t.node(r);this.frontier.push({type:e.type,match:e.contentMatchAt(t.indexAfter(r))})}for(let i=t.depth;i>0;i--)this.placed=r.HY.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){while(this.unplaced.size){let t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(t<0?this.$to:n.doc.resolve(t));if(!i)return null;let o=this.placed,s=n.depth,a=i.depth;while(s&&a&&1==o.childCount)o=o.firstChild.content,s--,a--;let l=new r.p2(o,s,a);return t>-1?new M(n.pos,t,this.$to.pos,this.$to.end(),l,e):l.size||n.pos!=this.$to.pos?new E(n.pos,i.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let e=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<t;n++){let i=e.firstChild;if(e.childCount>1&&(r=0),i.type.spec.isolating&&r<=n){t=n;break}e=i.content}for(let e=1;e<=2;e++)for(let n=1==e?t:this.unplaced.openStart;n>=0;n--){let t,i=null;n?(i=tt(this.unplaced.content,n-1).firstChild,t=i.content):t=this.unplaced.content;let o=t.firstChild;for(let s=this.depth;s>=0;s--){let t,{type:a,match:l}=this.frontier[s],c=null;if(1==e&&(o?l.matchType(o.type)||(c=l.fillBefore(r.HY.from(o),!1)):i&&a.compatibleContent(i.type)))return{sliceDepth:n,frontierDepth:s,parent:i,inject:c};if(2==e&&o&&(t=l.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:s,parent:i,wrap:t};if(i&&l.matchType(i.type))break}}}openMore(){let{content:t,openStart:e,openEnd:n}=this.unplaced,i=tt(t,e);return!(!i.childCount||i.firstChild.isLeaf)&&(this.unplaced=new r.p2(t,e+1,Math.max(n,i.size+e>=t.size-n?e+1:0)),!0)}dropNode(){let{content:t,openStart:e,openEnd:n}=this.unplaced,i=tt(t,e);if(i.childCount<=1&&e>0){let o=t.size-e<=e+i.size;this.unplaced=new r.p2(J(t,e-1,1),e-1,o?e-1:n)}else this.unplaced=new r.p2(J(t,e,1),e,n)}placeNodes({sliceDepth:t,frontierDepth:e,parent:n,inject:i,wrap:o}){while(this.depth>e)this.closeFrontierNode();if(o)for(let r=0;r<o.length;r++)this.openFrontierNode(o[r]);let s=this.unplaced,a=n?n.content:s.content,l=s.openStart-t,c=0,u=[],{match:d,type:h}=this.frontier[e];if(i){for(let t=0;t<i.childCount;t++)u.push(i.child(t));d=d.matchFragment(i)}let f=a.size+t-(s.content.size-s.openEnd);while(c<a.childCount){let t=a.child(c),e=d.matchType(t.type);if(!e)break;c++,(c>1||0==l||t.content.size)&&(d=e,u.push(et(t.mark(h.allowedMarks(t.marks)),1==c?l:0,c==a.childCount?f:-1)))}let p=c==a.childCount;p||(f=-1),this.placed=Q(this.placed,e,r.HY.from(u)),this.frontier[e].match=d,p&&f<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let r=0,m=a;r<f;r++){let t=m.lastChild;this.frontier.push({type:t.type,match:t.contentMatchAt(t.childCount)}),m=t.content}this.unplaced=p?0==t?r.p2.empty:new r.p2(J(s.content,t-1,1),t-1,f<0?s.openEnd:t-1):new r.p2(J(s.content,t,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t,e=this.frontier[this.depth];if(!e.type.isTextblock||!nt(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:n}=this.$to,r=this.$to.after(n);while(n>1&&r==this.$to.end(--n))++r;return r}findCloseLevel(t){t:for(let e=Math.min(this.depth,t.depth);e>=0;e--){let{match:n,type:r}=this.frontier[e],i=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),o=nt(t,e,r,n,i);if(o){for(let n=e-1;n>=0;n--){let{match:e,type:r}=this.frontier[n],i=nt(t,n,r,e,!0);if(!i||i.childCount)continue t}return{depth:e,fit:o,move:i?t.doc.resolve(t.after(e+1)):t}}}}close(t){let e=this.findCloseLevel(t);if(!e)return null;while(this.depth>e.depth)this.closeFrontierNode();e.fit.childCount&&(this.placed=Q(this.placed,e.depth,e.fit)),t=e.move;for(let n=e.depth+1;n<=t.depth;n++){let e=t.node(n),r=e.type.contentMatch.fillBefore(e.content,!0,t.index(n));this.openFrontierNode(e.type,e.attrs,r)}return t}openFrontierNode(t,e=null,n){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=Q(this.placed,this.depth,r.HY.from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let t=this.frontier.pop(),e=t.match.fillBefore(r.HY.empty,!0);e.childCount&&(this.placed=Q(this.placed,this.frontier.length,e))}}function J(t,e,n){return 0==e?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(J(t.firstChild.content,e-1,n)))}function Q(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Q(t.lastChild.content,e-1,n)))}function tt(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function et(t,e,n){if(e<=0)return t;let i=t.content;return e>1&&(i=i.replaceChild(0,et(i.firstChild,e-1,1==i.childCount?n-1:0))),e>0&&(i=t.type.contentMatch.fillBefore(i).append(i),n<=0&&(i=i.append(t.type.contentMatch.matchFragment(i).fillBefore(r.HY.empty,!0)))),t.copy(i)}function nt(t,e,n,r,i){let o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,s);return a&&!rt(n,o.content,s)?a:null}function rt(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function it(t){return t.spec.defining||t.spec.definingForContent}function ot(t,e,n,i){if(!i.size)return t.deleteRange(e,n);let o=t.doc.resolve(e),s=t.doc.resolve(n);if(Z(o,s,i))return t.step(new E(e,n,i));let a=ct(o,t.doc.resolve(n));0==a[a.length-1]&&a.pop();let l=-(o.depth+1);a.unshift(l);for(let r=o.depth,f=o.pos-1;r>0;r--,f--){let t=o.node(r).type.spec;if(t.defining||t.definingAsContext||t.isolating)break;a.indexOf(r)>-1?l=r:o.before(r)==f&&a.splice(1,0,-r)}let c=a.indexOf(l),u=[],d=i.openStart;for(let r=i.content,f=0;;f++){let t=r.firstChild;if(u.push(t),f==i.openStart)break;r=t.content}for(let r=d-1;r>=0;r--){let t=u[r].type,e=it(t);if(e&&o.node(c).type!=t)d=r;else if(e||!t.isTextblock)break}for(let f=i.openStart;f>=0;f--){let e=(f+d+1)%(i.openStart+1),l=u[e];if(l)for(let u=0;u<a.length;u++){let d=a[(u+c)%a.length],h=!0;d<0&&(h=!1,d=-d);let f=o.node(d-1),p=o.index(d-1);if(f.canReplaceWith(p,p,l.type,l.marks))return t.replace(o.before(d),h?s.after(d):n,new r.p2(st(i.content,0,i.openStart,e),e,i.openEnd))}}let h=t.steps.length;for(let r=a.length-1;r>=0;r--){if(t.replace(e,n,i),t.steps.length>h)break;let l=a[r];l<0||(e=o.before(l),n=s.after(l))}}function st(t,e,n,i,o){if(e<n){let r=t.firstChild;t=t.replaceChild(0,r.copy(st(r.content,e+1,n,i,r)))}if(e>i){let e=o.contentMatchAt(0),n=e.fillBefore(t).append(t);t=n.append(e.matchFragment(n).fillBefore(r.HY.empty,!0))}return t}function at(t,e,n,i){if(!i.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let r=q(t.doc,e,i.type);null!=r&&(e=n=r)}t.replaceRange(e,n,new r.p2(r.HY.from(i),0,0))}function lt(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=ct(r,i);for(let s=0;s<o.length;s++){let e=o[s],n=s==o.length-1;if(n&&0==e||r.node(e).type.contentMatch.validEnd)return t.delete(r.start(e),i.end(e));if(e>0&&(n||r.node(e-1).canReplace(r.index(e-1),i.indexAfter(e-1))))return t.delete(r.before(e),i.after(e))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s)return t.delete(r.before(s),n);t.delete(e,n)}function ct(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let r=t.start(i);if(r<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(r==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==r-1)&&n.push(i)}return n}class ut extends v{constructor(t,e,n){super(),this.pos=t,this.attr=e,this.value=n}apply(t){let e=t.nodeAt(this.pos);if(!e)return y.fail("No node at attribute step's position");let n=Object.create(null);for(let r in e.attrs)n[r]=e.attrs[r];n[this.attr]=this.value;let i=e.type.create(n,null,e.marks);return y.fromReplace(t,this.pos,this.pos+1,new r.p2(r.HY.from(i),0,e.isLeaf?0:1))}getMap(){return p.empty}invert(t){return new ut(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new ut(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,e){if("number"!=typeof e.pos||"string"!=typeof e.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new ut(e.pos,e.attr,e.value)}}v.jsonID("attr",ut);let dt=class extends Error{};dt=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n},dt.prototype=Object.create(Error.prototype),dt.prototype.constructor=dt,dt.prototype.name="TransformError";class ht{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new m}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let e=this.maybeStep(t);if(e.failed)throw new dt(e.failed);return this}maybeStep(t){let e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e}get docChanged(){return this.steps.length>0}addStep(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e}replace(t,e=t,n=r.p2.empty){let i=X(this.doc,t,e,n);return i&&this.step(i),this}replaceWith(t,e,n){return this.replace(t,e,new r.p2(r.HY.from(n),0,0))}delete(t,e){return this.replace(t,e,r.p2.empty)}insert(t,e){return this.replaceWith(t,t,e)}replaceRange(t,e,n){return ot(this,t,e,n),this}replaceRangeWith(t,e,n){return at(this,t,e,n),this}deleteRange(t,e){return lt(this,t,e),this}lift(t,e){return P(this,t,e),this}join(t,e=1){return $(this,t,e),this}wrap(t,e){return U(this,t,e),this}setBlockType(t,e=t,n,r=null){return F(this,t,e,n,r),this}setNodeMarkup(t,e,n=null,r){return V(this,t,e,n,r),this}setNodeAttribute(t,e,n){return this.step(new ut(t,e,n)),this}addNodeMark(t,e){return this.step(new x(t,e)),this}removeNodeMark(t,e){if(!(e instanceof r.vc)){let n=this.doc.nodeAt(t);if(!n)throw new RangeError("No node at position "+t);if(e=e.isInSet(n.marks),!e)return this}return this.step(new S(t,e)),this}split(t,e=1,n){return j(this,t,e,n),this}addMark(t,e,n){return C(this,t,e,n),this}removeMark(t,e,n){return A(this,t,e,n),this}clearIncompatible(t,e,n){return k(this,t,e,n),this}}},1617:function(t,e,n){"use strict";n.d(e,{EH:function(){return Rn},p:function(){return An},tk:function(){return ar}});n(7658),n(1703);var r=n(1418),i=n(8443),o=n(4040);const s=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},a=function(t){let e=t.assignedSlot||t.parentNode;return e&&11==e.nodeType?e.host:e};let l=null;const c=function(t,e,n){let r=l||(l=document.createRange());return r.setEnd(t,null==n?t.nodeValue.length:n),r.setStart(t,e||0),r},u=function(t,e,n,r){return n&&(h(t,e,n,r,-1)||h(t,e,n,r,1))},d=/^(img|br|input|textarea|hr)$/i;function h(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:f(t))){let n=t.parentNode;if(!n||1!=n.nodeType||m(t)||d.test(t.nodeName)||"false"==t.contentEditable)return!1;e=s(t)+(i<0?0:1),t=n}else{if(1!=t.nodeType)return!1;if(t=t.childNodes[e+(i<0?-1:0)],"false"==t.contentEditable)return!1;e=i<0?f(t):0}}}function f(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function p(t,e,n){for(let r=0==e,i=e==f(t);r||i;){if(t==n)return!0;let e=s(t);if(t=t.parentNode,!t)return!1;r=r&&0==e,i=i&&e==f(t)}}function m(t){let e;for(let n=t;n;n=n.parentNode)if(e=n.pmViewDesc)break;return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const g=function(t){return t.focusNode&&u(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function v(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function y(t){let e=t.activeElement;while(e&&e.shadowRoot)e=e.shadowRoot.activeElement;return e}function b(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:r.offset}}catch(r){}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:r.startOffset}}}const _="undefined"!=typeof navigator?navigator:null,w="undefined"!=typeof document?document:null,x=_&&_.userAgent||"",S=/Edge\/(\d+)/.exec(x),E=/MSIE \d/.exec(x),M=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(x),T=!!(E||M||S),C=E?document.documentMode:M?+M[1]:S?+S[1]:0,A=!T&&/gecko\/(\d+)/i.test(x);A&&(/Firefox\/(\d+)/.exec(x)||[0,0])[1];const k=!T&&/Chrome\/(\d+)/.exec(x),O=!!k,R=k?+k[1]:0,P=!T&&!!_&&/Apple Computer/.test(_.vendor),L=P&&(/Mobile\/\w+/.test(x)||!!_&&_.maxTouchPoints>2),D=L||!!_&&/Mac/.test(_.platform),I=!!_&&/Win/.test(_.platform),N=/Android \d/.test(x),U=!!w&&"webkitFontSmoothing"in w.documentElement.style,F=U?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function B(t){return{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function V(t,e){return"number"==typeof t?t:t[e]}function z(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function j(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let s=n||t.dom;;s=a(s)){if(!s)break;if(1!=s.nodeType)continue;let t=s,n=t==o.body,a=n?B(o):z(t),l=0,c=0;if(e.top<a.top+V(r,"top")?c=-(a.top-e.top+V(i,"top")):e.bottom>a.bottom-V(r,"bottom")&&(c=e.bottom-a.bottom+V(i,"bottom")),e.left<a.left+V(r,"left")?l=-(a.left-e.left+V(i,"left")):e.right>a.right-V(r,"right")&&(l=e.right-a.right+V(i,"right")),l||c)if(n)o.defaultView.scrollBy(l,c);else{let n=t.scrollLeft,r=t.scrollTop;c&&(t.scrollTop+=c),l&&(t.scrollLeft+=l);let i=t.scrollLeft-n,o=t.scrollTop-r;e={left:e.left-i,top:e.top-o,right:e.right-i,bottom:e.bottom-o}}if(n)break}}function H(t){let e,n,r=t.dom.getBoundingClientRect(),i=Math.max(0,r.top);for(let o=(r.left+r.right)/2,s=i+1;s<Math.min(innerHeight,r.bottom);s+=5){let r=t.root.elementFromPoint(o,s);if(!r||r==t.dom||!t.dom.contains(r))continue;let a=r.getBoundingClientRect();if(a.top>=i-20){e=r,n=a.top;break}}return{refDOM:e,refTop:n,stack:W(t.dom)}}function W(t){let e=[],n=t.ownerDocument;for(let r=t;r;r=a(r))if(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t==n)break;return e}function G({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;$(n,0==r?0:r-e)}function $(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:o}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let q=null;function Y(t){if(t.setActive)return t.setActive();if(q)return t.focus(q);let e=W(t);t.focus(null==q?{get preventScroll(){return q={preventScroll:!0},!0}}:void 0),q||(q=!1,$(e,0))}function X(t,e){let n,r,i,o,s=2e8,a=0,l=e.top,u=e.top;for(let d=t.firstChild,h=0;d;d=d.nextSibling,h++){let t;if(1==d.nodeType)t=d.getClientRects();else{if(3!=d.nodeType)continue;t=c(d).getClientRects()}for(let c=0;c<t.length;c++){let f=t[c];if(f.top<=l&&f.bottom>=u){l=Math.max(f.bottom,l),u=Math.min(f.top,u);let t=f.left>e.left?f.left-e.left:f.right<e.left?e.left-f.right:0;if(t<s){n=d,s=t,r=t&&3==n.nodeType?{left:f.right<e.left?f.right:f.left,top:e.top}:e,1==d.nodeType&&t&&(a=h+(e.left>=(f.left+f.right)/2?1:0));continue}}else f.top>e.top&&!i&&f.left<=e.left&&f.right>=e.left&&(i=d,o={left:Math.max(f.left,Math.min(f.right,e.left)),top:f.top});!n&&(e.left>=f.right&&e.top>=f.top||e.left>=f.left&&e.top>=f.bottom)&&(a=h+1)}}return!n&&i&&(n=i,r=o,s=0),n&&3==n.nodeType?Z(n,r):!n||s&&1==n.nodeType?{node:t,offset:a}:X(n,r)}function Z(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let n=it(r,1);if(n.top!=n.bottom&&K(e,n))return{node:t,offset:i+(e.left>=(n.left+n.right)/2?1:0)}}return{node:t,offset:0}}function K(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function J(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function Q(t,e,n){let{node:r,offset:i}=X(e,n),o=-1;if(1==r.nodeType&&!r.firstChild){let t=r.getBoundingClientRect();o=t.left!=t.right&&n.left>(t.left+t.right)/2?1:-1}return t.docView.posFromDOM(r,i,o)}function tt(t,e,n,r){let i=-1;for(let o=e,s=!1;;){if(o==t.dom)break;let e=t.docView.nearestDesc(o,!0);if(!e)return null;if(1==e.dom.nodeType&&(e.node.isBlock&&e.parent&&!s||!e.contentDOM)){let t=e.dom.getBoundingClientRect();if(e.node.isBlock&&e.parent&&!s&&(s=!0,t.left>r.left||t.top>r.top?i=e.posBefore:(t.right<r.left||t.bottom<r.top)&&(i=e.posAfter)),!e.contentDOM&&i<0){let n=e.node.isBlock?r.top<(t.top+t.bottom)/2:r.left<(t.left+t.right)/2;return n?e.posBefore:e.posAfter}}o=e.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function et(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let n=t.childNodes[o];if(1==n.nodeType){let t=n.getClientRects();for(let r=0;r<t.length;r++){let i=t[r];if(K(e,i))return et(n,e,i)}}if((o=(o+1)%r)==i)break}return t}function nt(t,e){let n,r=t.dom.ownerDocument,i=0,o=b(r,e.left,e.top);o&&({node:n,offset:i}=o);let s,l=(t.root.elementFromPoint?t.root:r).elementFromPoint(e.left,e.top);if(!l||!t.dom.contains(1!=l.nodeType?l.parentNode:l)){let n=t.dom.getBoundingClientRect();if(!K(e,n))return null;if(l=et(t.dom,e,n),!l)return null}if(P)for(let u=l;n&&u;u=a(u))u.draggable&&(n=void 0);if(l=J(l,e),n){if(A&&1==n.nodeType&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){let t,r=n.childNodes[i];"IMG"==r.nodeName&&(t=r.getBoundingClientRect()).right<=e.left&&t.bottom>e.top&&i++}n==t.dom&&i==n.childNodes.length-1&&1==n.lastChild.nodeType&&e.top>n.lastChild.getBoundingClientRect().bottom?s=t.state.doc.content.size:0!=i&&1==n.nodeType&&"BR"==n.childNodes[i-1].nodeName||(s=tt(t,n,i,e))}null==s&&(s=Q(t,l,e));let c=t.docView.nearestDesc(l,!0);return{pos:s,inside:c?c.posAtStart-c.border:-1}}function rt(t){return t.top<t.bottom||t.left<t.right}function it(t,e){let n=t.getClientRects();if(n.length){let t=n[e<0?0:n.length-1];if(rt(t))return t}return Array.prototype.find.call(n,rt)||t.getBoundingClientRect()}const ot=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function st(t,e,n){let{node:r,offset:i,atom:o}=t.docView.domFromPos(e,n<0?-1:1),s=U||A;if(3==r.nodeType){if(!s||!ot.test(r.nodeValue)&&(n<0?i:i!=r.nodeValue.length)){let t=i,e=i,o=n<0?1:-1;return n<0&&!i?(e++,o=-1):n>=0&&i==r.nodeValue.length?(t--,o=1):n<0?t--:e++,at(it(c(r,t,e),o),o<0)}{let t=it(c(r,i,i),n);if(A&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let e=it(c(r,i-1,i-1),-1);if(e.top==t.top){let n=it(c(r,i,i+1),-1);if(n.top!=t.top)return at(n,n.left<e.left)}}return t}}let a=t.state.doc.resolve(e-(o||0));if(!a.parent.inlineContent){if(null==o&&i&&(n<0||i==f(r))){let t=r.childNodes[i-1];if(1==t.nodeType)return lt(t.getBoundingClientRect(),!1)}if(null==o&&i<f(r)){let t=r.childNodes[i];if(1==t.nodeType)return lt(t.getBoundingClientRect(),!0)}return lt(r.getBoundingClientRect(),n>=0)}if(null==o&&i&&(n<0||i==f(r))){let t=r.childNodes[i-1],e=3==t.nodeType?c(t,f(t)-(s?0:1)):1!=t.nodeType||"BR"==t.nodeName&&t.nextSibling?null:t;if(e)return at(it(e,1),!1)}if(null==o&&i<f(r)){let t=r.childNodes[i];while(t.pmViewDesc&&t.pmViewDesc.ignoreForCoords)t=t.nextSibling;let e=t?3==t.nodeType?c(t,0,s?0:1):1==t.nodeType?t:null:null;if(e)return at(it(e,-1),!0)}return at(it(3==r.nodeType?c(r):r,-n),n>=0)}function at(t,e){if(0==t.width)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function lt(t,e){if(0==t.height)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function ct(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function ut(t,e,n){let r=e.selection,i="up"==n?r.$from:r.$to;return ct(t,e,(()=>{let{node:e}=t.docView.domFromPos(i.pos,"up"==n?-1:1);for(;;){let n=t.docView.nearestDesc(e,!0);if(!n)break;if(n.node.isBlock){e=n.contentDOM||n.dom;break}e=n.dom.parentNode}let r=st(t,i.pos,1);for(let t=e.firstChild;t;t=t.nextSibling){let e;if(1==t.nodeType)e=t.getClientRects();else{if(3!=t.nodeType)continue;e=c(t,0,t.nodeValue.length).getClientRects()}for(let t=0;t<e.length;t++){let i=e[t];if(i.bottom>i.top+1&&("up"==n?r.top-i.top>2*(i.bottom-r.top):i.bottom-r.bottom>2*(r.bottom-i.top)))return!1}}return!0}))}const dt=/[\u0590-\u08ac]/;function ht(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,a=t.domSelection();return dt.test(r.parent.textContent)&&a.modify?ct(t,e,(()=>{let{focusNode:e,focusOffset:i,anchorNode:o,anchorOffset:s}=t.domSelectionRange(),l=a.caretBidiLevel;a.modify("move",n,"character");let c=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:u,focusOffset:d}=t.domSelectionRange(),h=u&&!c.contains(1==u.nodeType?u:u.parentNode)||e==u&&i==d;try{a.collapse(o,s),e&&(e!=o||i!=s)&&a.extend&&a.extend(e,i)}catch(f){}return null!=l&&(a.caretBidiLevel=l),h})):"left"==n||"backward"==n?o:s}let ft=null,pt=null,mt=!1;function gt(t,e,n){return ft==e&&pt==n?mt:(ft=e,pt=n,mt="up"==n||"down"==n?ut(t,e,n):ht(t,e,n))}const vt=0,yt=1,bt=2,_t=3;class wt{constructor(t,e,n,r){this.parent=t,this.children=e,this.dom=n,this.contentDOM=r,this.dirty=vt,n.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,e,n){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let e=0;e<this.children.length;e++)t+=this.children[e].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let e=0,n=this.posAtStart;;e++){let r=this.children[e];if(r==t)return n;n+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,e,n){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(n<0){let n,r;if(t==this.contentDOM)n=t.childNodes[e-1];else{while(t.parentNode!=this.contentDOM)t=t.parentNode;n=t.previousSibling}while(n&&(!(r=n.pmViewDesc)||r.parent!=this))n=n.previousSibling;return n?this.posBeforeChild(r)+r.size:this.posAtStart}{let n,r;if(t==this.contentDOM)n=t.childNodes[e];else{while(t.parentNode!=this.contentDOM)t=t.parentNode;n=t.nextSibling}while(n&&(!(r=n.pmViewDesc)||r.parent!=this))n=n.nextSibling;return n?this.posBeforeChild(r):this.posAtEnd}}let r;if(t==this.dom&&this.contentDOM)r=e>s(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(let e=t;;e=e.parentNode){if(e==this.dom){r=!1;break}if(e.previousSibling)break}if(null==r&&e==t.childNodes.length)for(let e=t;;e=e.parentNode){if(e==this.dom){r=!0;break}if(e.nextSibling)break}}return(null==r?n>0:r)?this.posAtEnd:this.posAtStart}nearestDesc(t,e=!1){for(let n=!0,r=t;r;r=r.parentNode){let i,o=this.getDesc(r);if(o&&(!e||o.node)){if(!n||!(i=o.nodeDOM)||(1==i.nodeType?i.contains(1==t.nodeType?t:t.parentNode):i==t))return o;n=!1}}}getDesc(t){let e=t.pmViewDesc;for(let n=e;n;n=n.parent)if(n==this)return e}posFromDOM(t,e,n){for(let r=t;r;r=r.parentNode){let i=this.getDesc(r);if(i)return i.localPosFromDOM(t,e,n)}return-1}descAt(t){for(let e=0,n=0;e<this.children.length;e++){let r=this.children[e],i=n+r.size;if(n==t&&i!=n){while(!r.border&&r.children.length)r=r.children[0];return r}if(t<i)return r.descAt(t-n-r.border);n=i}}domFromPos(t,e){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let n=0,r=0;for(let i=0;n<this.children.length;n++){let e=this.children[n],o=i+e.size;if(o>t||e instanceof At){r=t-i;break}i=o}if(r)return this.children[n].domFromPos(r-this.children[n].border,e);for(let i;n&&!(i=this.children[n-1]).size&&i instanceof xt&&i.side>=0;n--);if(e<=0){let t,r=!0;for(;;n--,r=!1)if(t=n?this.children[n-1]:null,!t||t.dom.parentNode==this.contentDOM)break;return t&&e&&r&&!t.border&&!t.domAtom?t.domFromPos(t.size,e):{node:this.contentDOM,offset:t?s(t.dom)+1:0}}{let t,r=!0;for(;;n++,r=!1)if(t=n<this.children.length?this.children[n]:null,!t||t.dom.parentNode==this.contentDOM)break;return t&&r&&!t.border&&!t.domAtom?t.domFromPos(0,e):{node:this.contentDOM,offset:t?s(t.dom):this.contentDOM.childNodes.length}}}parseRange(t,e,n=0){if(0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,i=-1;for(let o=n,a=0;;a++){let n=this.children[a],l=o+n.size;if(-1==r&&t<=l){let i=o+n.border;if(t>=i&&e<=l-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(t,e,i);t=o;for(let e=a;e>0;e--){let n=this.children[e-1];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(1)){r=s(n.dom)+1;break}t-=n.size}-1==r&&(r=0)}if(r>-1&&(l>e||a==this.children.length-1)){e=l;for(let t=a+1;t<this.children.length;t++){let n=this.children[t];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(-1)){i=s(n.dom);break}e+=n.size}-1==i&&(i=this.contentDOM.childNodes.length);break}o=l}return{node:this.contentDOM,from:t,to:e,fromOffset:r,toOffset:i}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)}domAfterPos(t){let{node:e,offset:n}=this.domFromPos(t,0);if(1!=e.nodeType||n==e.childNodes.length)throw new RangeError("No node after pos "+t);return e.childNodes[n]}setSelection(t,e,n,r=!1){let i=Math.min(t,e),o=Math.max(t,e);for(let u=0,f=0;u<this.children.length;u++){let s=this.children[u],a=f+s.size;if(i>f&&o<a)return s.setSelection(t-f-s.border,e-f-s.border,n,r);f=a}let s=this.domFromPos(t,t?-1:1),a=e==t?s:this.domFromPos(e,e?-1:1),l=n.getSelection(),c=!1;if((A||P)&&t==e){let{node:t,offset:e}=s;if(3==t.nodeType)c=!(!e||"\n"!=t.nodeValue[e-1]);else{let n=t.childNodes[e-1];c=n&&("BR"==n.nodeName||"false"==n.contentEditable)}}if(A&&l.focusNode&&l.focusNode!=a.node&&1==l.focusNode.nodeType){let t=l.focusNode.childNodes[l.focusOffset];t&&"false"==t.contentEditable&&(r=!0)}if(!(r||c&&P)&&u(s.node,s.offset,l.anchorNode,l.anchorOffset)&&u(a.node,a.offset,l.focusNode,l.focusOffset))return;let d=!1;if((l.extend||t==e)&&!c){l.collapse(s.node,s.offset);try{t!=e&&l.extend(a.node,a.offset),d=!0}catch(h){}}if(!d){if(t>e){let t=s;s=a,a=t}let n=document.createRange();n.setEnd(a.node,a.offset),n.setStart(s.node,s.offset),l.removeAllRanges(),l.addRange(n)}}ignoreMutation(t){return!this.contentDOM&&"selection"!=t.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,e){for(let n=0,r=0;r<this.children.length;r++){let i=this.children[r],o=n+i.size;if(n==o?t<=o&&e>=n:t<o&&e>n){let r=n+i.border,s=o-i.border;if(t>=r&&e<=s)return this.dirty=t==n||e==o?bt:yt,void(t!=r||e!=s||!i.contentLost&&i.dom.parentNode==this.contentDOM?i.markDirty(t-r,e-r):i.dirty=_t);i.dirty=i.dom!=i.contentDOM||i.dom.parentNode!=this.contentDOM||i.children.length?_t:bt}n=o}this.dirty=bt}markParentsDirty(){let t=1;for(let e=this.parent;e;e=e.parent,t++){let n=1==t?bt:yt;e.dirty<n&&(e.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class xt extends wt{constructor(t,e,n,r){let i,o=e.type.toDOM;if("function"==typeof o&&(o=o(n,(()=>i?i.parent?i.parent.posBeforeChild(i):void 0:r))),!e.type.spec.raw){if(1!=o.nodeType){let t=document.createElement("span");t.appendChild(o),o=t}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(t,[],o,null),this.widget=e,this.widget=e,i=this}matchesWidget(t){return this.dirty==vt&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let e=this.widget.spec.stopEvent;return!!e&&e(t)}ignoreMutation(t){return"selection"!=t.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class St extends wt{constructor(t,e,n,r){super(t,[],e,null),this.textDOM=n,this.text=r}get size(){return this.text.length}localPosFromDOM(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return"characterData"===t.type&&t.target.nodeValue==t.oldValue}}class Et extends wt{constructor(t,e,n,r){super(t,[],n,r),this.mark=e}static create(t,e,n,r){let o=r.nodeViews[e.type.name],s=o&&o(e,r,n);return s&&s.dom||(s=i.PW.renderSpec(document,e.type.spec.toDOM(e,n))),new Et(t,e,s.dom,s.contentDOM||s.dom)}parseRule(){return this.dirty&_t||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(t){return this.dirty!=_t&&this.mark.eq(t)}markDirty(t,e){if(super.markDirty(t,e),this.dirty!=vt){let t=this.parent;while(!t.node)t=t.parent;t.dirty<this.dirty&&(t.dirty=this.dirty),this.dirty=vt}}slice(t,e,n){let r=Et.create(this.parent,this.mark,!0,n),i=this.children,o=this.size;e<o&&(i=$t(i,e,o,n)),t>0&&(i=$t(i,0,t,n));for(let s=0;s<i.length;s++)i[s].parent=r;return r.children=i,r}}class Mt extends wt{constructor(t,e,n,r,i,o,s,a,l){super(t,[],i,o),this.node=e,this.outerDeco=n,this.innerDeco=r,this.nodeDOM=s}static create(t,e,n,r,o,s){let a,l=o.nodeViews[e.type.name],c=l&&l(e,o,(()=>a?a.parent?a.parent.posBeforeChild(a):void 0:s),n,r),u=c&&c.dom,d=c&&c.contentDOM;if(e.isText)if(u){if(3!=u.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else u=document.createTextNode(e.text);else u||({dom:u,contentDOM:d}=i.PW.renderSpec(document,e.type.spec.toDOM(e)));d||e.isText||"BR"==u.nodeName||(u.hasAttribute("contenteditable")||(u.contentEditable="false"),e.type.spec.draggable&&(u.draggable=!0));let h=u;return u=Nt(u,n,e),c?a=new kt(t,e,n,r,u,d||null,h,c,o,s+1):e.isText?new Ct(t,e,n,r,u,h,o):new Mt(t,e,n,r,u,d||null,h,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(t.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let e=this.children.length-1;e>=0;e--){let n=this.children[e];if(this.dom.contains(n.dom.parentNode)){t.contentElement=n.dom.parentNode;break}}t.contentElement||(t.getContent=()=>i.HY.empty)}else t.contentElement=this.contentDOM;else t.getContent=()=>this.node.content;return t}matchesNode(t,e,n){return this.dirty==vt&&t.eq(this.node)&&Ut(e,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,e){let n=this.node.inlineContent,r=e,o=t.composing?this.localCompositionInfo(t,e):null,s=o&&o.pos>-1?o:null,a=o&&o.pos<0,l=new Bt(this,s&&s.node,t);jt(this.node,this.innerDeco,((e,o,s)=>{e.spec.marks?l.syncToMarks(e.spec.marks,n,t):e.type.side>=0&&!s&&l.syncToMarks(o==this.node.childCount?i.vc.none:this.node.child(o).marks,n,t),l.placeWidget(e,t,r)}),((e,i,s,c)=>{let u;l.syncToMarks(e.marks,n,t),l.findNodeMatch(e,i,s,c)||a&&t.state.selection.from>r&&t.state.selection.to<r+e.nodeSize&&(u=l.findIndexWithChild(o.node))>-1&&l.updateNodeAt(e,i,s,u,t)||l.updateNextNode(e,i,s,t,c,r)||l.addNode(e,i,s,t,r),r+=e.nodeSize})),l.syncToMarks([],n,t),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==bt)&&(s&&this.protectLocalComposition(t,s),Ot(this.contentDOM,this.children,t),L&&Ht(this.dom))}localCompositionInfo(t,e){let{from:n,to:i}=t.state.selection;if(!(t.state.selection instanceof r.Bs)||n<e||i>e+this.node.content.size)return null;let o=t.domSelectionRange(),s=Wt(o.focusNode,o.focusOffset);if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let t=s.nodeValue,r=Gt(this.node.content,t,n-e,i-e);return r<0?null:{node:s,pos:r,text:t}}return{node:s,pos:-1,text:""}}protectLocalComposition(t,{node:e,pos:n,text:r}){if(this.getDesc(e))return;let i=e;for(;;i=i.parentNode){if(i.parentNode==this.contentDOM)break;while(i.previousSibling)i.parentNode.removeChild(i.previousSibling);while(i.nextSibling)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let o=new St(this,i,e,r);t.input.compositionNodes.push(o),this.children=$t(this.children,n,n+r.length,t,o)}update(t,e,n,r){return!(this.dirty==_t||!t.sameMarkup(this.node))&&(this.updateInner(t,e,n,r),!0)}updateInner(t,e,n,r){this.updateOuterDeco(e),this.node=t,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=vt}updateOuterDeco(t){if(Ut(t,this.outerDeco))return;let e=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=Dt(this.dom,this.nodeDOM,Lt(this.outerDeco,this.node,e),Lt(t,this.node,e)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function Tt(t,e,n,r,i){Nt(r,e,t);let o=new Mt(void 0,t,e,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class Ct extends Mt{constructor(t,e,n,r,i,o,s){super(t,e,n,r,i,null,o,s,0)}parseRule(){let t=this.nodeDOM.parentNode;while(t&&t!=this.dom&&!t.pmIsDeco)t=t.parentNode;return{skip:t||!0}}update(t,e,n,r){return!(this.dirty==_t||this.dirty!=vt&&!this.inParent()||!t.sameMarkup(this.node))&&(this.updateOuterDeco(e),this.dirty==vt&&t.text==this.node.text||t.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=t.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=t,this.dirty=vt,!0)}inParent(){let t=this.parent.contentDOM;for(let e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,e,n){return t==this.nodeDOM?this.posAtStart+Math.min(e,this.node.text.length):super.localPosFromDOM(t,e,n)}ignoreMutation(t){return"characterData"!=t.type&&"selection"!=t.type}slice(t,e,n){let r=this.node.cut(t,e),i=document.createTextNode(r.text);return new Ct(this.parent,r,this.outerDeco,this.innerDeco,i,i,n)}markDirty(t,e){super.markDirty(t,e),this.dom==this.nodeDOM||0!=t&&e!=this.nodeDOM.nodeValue.length||(this.dirty=_t)}get domAtom(){return!1}}class At extends wt{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==vt&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class kt extends Mt{constructor(t,e,n,r,i,o,s,a,l,c){super(t,e,n,r,i,o,s,l,c),this.spec=a}update(t,e,n,r){if(this.dirty==_t)return!1;if(this.spec.update){let i=this.spec.update(t,e,n);return i&&this.updateInner(t,e,n,r),i}return!(!this.contentDOM&&!t.isLeaf)&&super.update(t,e,n,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,e,n,r){this.spec.setSelection?this.spec.setSelection(t,e,n):super.setSelection(t,e,n,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function Ot(t,e,n){let r=t.firstChild,i=!1;for(let o=0;o<e.length;o++){let s=e[o],a=s.dom;if(a.parentNode==t){while(a!=r)r=Ft(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(s instanceof Et){let e=r?r.previousSibling:t.lastChild;Ot(s.contentDOM,s.children,n),r=e?e.nextSibling:t.firstChild}}while(r)r=Ft(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const Rt=function(t){t&&(this.nodeName=t)};Rt.prototype=Object.create(null);const Pt=[new Rt];function Lt(t,e,n){if(0==t.length)return Pt;let r=n?Pt[0]:new Rt,i=[r];for(let o=0;o<t.length;o++){let s=t[o].type.attrs;if(s){s.nodeName&&i.push(r=new Rt(s.nodeName));for(let t in s){let o=s[t];null!=o&&(n&&1==i.length&&i.push(r=new Rt(e.isInline?"span":"div")),"class"==t?r.class=(r.class?r.class+" ":"")+o:"style"==t?r.style=(r.style?r.style+";":"")+o:"nodeName"!=t&&(r[t]=o))}}}return i}function Dt(t,e,n,r){if(n==Pt&&r==Pt)return e;let i=e;for(let o=0;o<r.length;o++){let e=r[o],s=n[o];if(o){let n;s&&s.nodeName==e.nodeName&&i!=t&&(n=i.parentNode)&&n.nodeName.toLowerCase()==e.nodeName||(n=document.createElement(e.nodeName),n.pmIsDeco=!0,n.appendChild(i),s=Pt[0]),i=n}It(i,s||Pt[0],e)}return i}function It(t,e,n){for(let r in e)"class"==r||"style"==r||"nodeName"==r||r in n||t.removeAttribute(r);for(let r in n)"class"!=r&&"style"!=r&&"nodeName"!=r&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let e=0;e<r.length;e++)-1==i.indexOf(r[e])&&t.classList.remove(r[e]);for(let e=0;e<i.length;e++)-1==r.indexOf(i[e])&&t.classList.add(i[e]);0==t.classList.length&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let n,r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;while(n=r.exec(e.style))t.style.removeProperty(n[1])}n.style&&(t.style.cssText+=n.style)}}function Nt(t,e,n){return Dt(t,t,Pt,Lt(e,n,1!=t.nodeType))}function Ut(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Ft(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Bt{constructor(t,e,n){this.lock=e,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=Vt(t.node.content,t)}destroyBetween(t,e){if(t!=e){for(let n=t;n<e;n++)this.top.children[n].destroy();this.top.children.splice(t,e-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,e,n){let r=0,i=this.stack.length>>1,o=Math.min(i,t.length);while(r<o&&(r==i-1?this.top:this.stack[r+1<<1]).matchesMark(t[r])&&!1!==t[r].type.spec.spanning)r++;while(r<i)this.destroyRest(),this.top.dirty=vt,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;while(i<t.length){this.stack.push(this.top,this.index+1);let r=-1;for(let e=this.index;e<Math.min(this.index+3,this.top.children.length);e++){let n=this.top.children[e];if(n.matchesMark(t[i])&&!this.isLocked(n.dom)){r=e;break}}if(r>-1)r>this.index&&(this.changed=!0,this.destroyBetween(this.index,r)),this.top=this.top.children[this.index];else{let r=Et.create(this.top,t[i],e,n);this.top.children.splice(this.index,0,r),this.top=r,this.changed=!0}this.index=0,i++}}findNodeMatch(t,e,n,r){let i,o=-1;if(r>=this.preMatch.index&&(i=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&i.matchesNode(t,e,n))o=this.top.children.indexOf(i,this.index);else for(let s=this.index,a=Math.min(this.top.children.length,s+5);s<a;s++){let r=this.top.children[s];if(r.matchesNode(t,e,n)&&!this.preMatch.matched.has(r)){o=s;break}}return!(o<0)&&(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(t,e,n,r,i){let o=this.top.children[r];return o.dirty==_t&&o.dom==o.contentDOM&&(o.dirty=bt),!!o.update(t,e,n,i)&&(this.destroyBetween(this.index,r),this.index++,!0)}findIndexWithChild(t){for(;;){let e=t.parentNode;if(!e)return-1;if(e==this.top.contentDOM){let e=t.pmViewDesc;if(e)for(let t=this.index;t<this.top.children.length;t++)if(this.top.children[t]==e)return t;return-1}t=e}}updateNextNode(t,e,n,r,i,o){for(let s=this.index;s<this.top.children.length;s++){let a=this.top.children[s];if(a instanceof Mt){let l=this.preMatch.matched.get(a);if(null!=l&&l!=i)return!1;let c,u=a.dom,d=this.isLocked(u)&&!(t.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==t.text&&a.dirty!=_t&&Ut(e,a.outerDeco));if(!d&&a.update(t,e,n,r))return this.destroyBetween(this.index,s),a.dom!=u&&(this.changed=!0),this.index++,!0;if(!d&&(c=this.recreateWrapper(a,t,e,n,r,o)))return this.top.children[this.index]=c,c.dirty=bt,c.updateChildren(r,o+1),c.dirty=vt,this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,e,n,r,i,o){if(t.dirty||e.isAtom||!t.children.length||!t.node.content.eq(e.content))return null;let s=Mt.create(this.top,e,n,r,i,o);if(!s.contentDOM)return null;s.children=t.children,t.children=[],t.destroy();for(let a of s.children)a.parent=s;return s}addNode(t,e,n,r,i){let o=Mt.create(this.top,t,e,n,r,i);o.contentDOM&&o.updateChildren(r,i+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(t,e,n){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(t)||t!=r.widget&&r.widget.type.toDOM.parentNode){let r=new xt(this.top,t,e,n);this.top.children.splice(this.index++,0,r),this.changed=!0}else this.index++}addTextblockHacks(){let t=this.top.children[this.index-1],e=this.top;while(t instanceof Et)e=t,t=e.children[e.children.length-1];(!t||!(t instanceof Ct)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((P||O)&&t&&"false"==t.dom.contentEditable&&this.addHackNode("IMG",e),this.addHackNode("BR",this.top))}addHackNode(t,e){if(e==this.top&&this.index<e.children.length&&e.children[this.index].matchesHack(t))this.index++;else{let n=document.createElement(t);"IMG"==t&&(n.className="ProseMirror-separator",n.alt=""),"BR"==t&&(n.className="ProseMirror-trailingBreak");let r=new At(this.top,[],n,null);e!=this.top?e.children.push(r):e.children.splice(this.index++,0,r),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||1==t.nodeType&&t.contains(this.lock.parentNode))}}function Vt(t,e){let n=e,r=n.children.length,i=t.childCount,o=new Map,s=[];t:while(i>0){let a;for(;;)if(r){let t=n.children[r-1];if(!(t instanceof Et)){a=t,r--;break}n=t,r=t.children.length}else{if(n==e)break t;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,o.set(a,i),s.push(a)}}return{index:i,matched:o,matches:s.reverse()}}function zt(t,e){return t.type.side-e.type.side}function jt(t,e,n,r){let i=e.locals(t),o=0;if(0==i.length){for(let n=0;n<t.childCount;n++){let s=t.child(n);r(s,i,e.forChild(o,s),n),o+=s.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){if(s<i.length&&i[s].to==o){let t,e=i[s++];while(s<i.length&&i[s].to==o)(t||(t=[e])).push(i[s++]);if(t){t.sort(zt);for(let e=0;e<t.length;e++)n(t[e],c,!!l)}else n(e,c,!!l)}let u,d;if(l)d=-1,u=l,l=null;else{if(!(c<t.childCount))break;d=c,u=t.child(c++)}for(let t=0;t<a.length;t++)a[t].to<=o&&a.splice(t--,1);while(s<i.length&&i[s].from<=o&&i[s].to>o)a.push(i[s++]);let h=o+u.nodeSize;if(u.isText){let t=h;s<i.length&&i[s].from<t&&(t=i[s].from);for(let e=0;e<a.length;e++)a[e].to<t&&(t=a[e].to);t<h&&(l=u.cut(t-o),u=u.cut(0,t-o),h=t,d=-1)}let f=u.isInline&&!u.isLeaf?a.filter((t=>!t.inline)):a.slice();r(u,f,e.forChild(o,u),d),o=h}}function Ht(t){if("UL"==t.nodeName||"OL"==t.nodeName){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function Wt(t,e){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0){if(t.childNodes.length>e&&3==t.childNodes[e].nodeType)return t.childNodes[e];t=t.childNodes[e-1],e=f(t)}else{if(!(1==t.nodeType&&e<t.childNodes.length))return null;t=t.childNodes[e],e=0}}}function Gt(t,e,n,r){for(let i=0,o=0;i<t.childCount&&o<=r;){let s=t.child(i++),a=o;if(o+=s.nodeSize,!s.isText)continue;let l=s.text;while(i<t.childCount){let e=t.child(i++);if(o+=e.nodeSize,!e.isText)break;l+=e.text}if(o>=n){let t=a<r?l.lastIndexOf(e,r-a-1):-1;if(t>=0&&t+e.length+a>=n)return a+t;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function $t(t,e,n,r,i){let o=[];for(let s=0,a=0;s<t.length;s++){let l=t[s],c=a,u=a+=l.size;c>=n||u<=e?o.push(l):(c<e&&o.push(l.slice(0,e-c,r)),i&&(o.push(i),i=void 0),u>n&&o.push(l.slice(n-c,l.size,r)))}return o}function qt(t,e=null){let n=t.domSelectionRange(),i=t.state.doc;if(!n.focusNode)return null;let o=t.docView.nearestDesc(n.focusNode),s=o&&0==o.size,a=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(a<0)return null;let l,c,u=i.resolve(a);if(g(n)){l=u;while(o&&!o.node)o=o.parent;let t=o.node;if(o&&t.isAtom&&r.qv.isSelectable(t)&&o.parent&&(!t.isInline||!p(n.focusNode,n.focusOffset,o.dom))){let t=o.posBefore;c=new r.qv(a==t?u:i.resolve(t))}}else{let e=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(e<0)return null;l=i.resolve(e)}if(!c){let n="pointer"==e||t.state.selection.head<u.pos&&!s?1:-1;c=ie(t,l,u,n)}return c}function Yt(t){return t.editable?t.hasFocus():se(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Xt(t,e=!1){let n=t.state.selection;if(ne(t,n),Yt(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&O){let e=t.domSelectionRange(),n=t.domObserver.currentSelection;if(e.anchorNode&&n.anchorNode&&u(e.anchorNode,e.anchorOffset,n.anchorNode,n.anchorOffset))return t.input.mouseDown.delayedSelectionSync=!0,void t.domObserver.setCurSelection()}if(t.domObserver.disconnectSelection(),t.cursorWrapper)ee(t);else{let i,o,{anchor:s,head:a}=n;!Zt||n instanceof r.Bs||(n.$from.parent.inlineContent||(i=Kt(t,n.from)),n.empty||n.$from.parent.inlineContent||(o=Kt(t,n.to))),t.docView.setSelection(s,a,t.root,e),Zt&&(i&&Qt(i),o&&Qt(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&te(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const Zt=P||O&&R<63;function Kt(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(P&&i&&"false"==i.contentEditable)return Jt(i);if((!i||"false"==i.contentEditable)&&(!o||"false"==o.contentEditable)){if(i)return Jt(i);if(o)return Jt(o)}}function Jt(t){return t.contentEditable="true",P&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Qt(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function te(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{n.anchorNode==r&&n.anchorOffset==i||(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout((()=>{Yt(t)&&!t.state.selection.visible||t.dom.classList.remove("ProseMirror-hideselection")}),20))})}function ee(t){let e=t.domSelection(),n=document.createRange(),r=t.cursorWrapper.dom,i="IMG"==r.nodeName;i?n.setEnd(r.parentNode,s(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&T&&C<=11&&(r.disabled=!0,r.disabled=!1)}function ne(t,e){if(e instanceof r.qv){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(re(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else re(t)}function re(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function ie(t,e,n,i){return t.someProp("createSelectionBetween",(r=>r(t,e,n)))||r.Bs.between(e,n,i)}function oe(t){return!(t.editable&&!t.hasFocus())&&se(t)}function se(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(n){return!1}}function ae(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return u(e.node,e.offset,n.anchorNode,n.anchorOffset)}function le(t,e){let{$anchor:n,$head:i}=t.selection,o=e>0?n.max(i):n.min(i),s=o.parent.inlineContent?o.depth?t.doc.resolve(e>0?o.after():o.before()):null:o;return s&&r.Y1.findFrom(s,e)}function ce(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function ue(t,e,n){let i=t.state.selection;if(!(i instanceof r.Bs)){if(i instanceof r.qv&&i.node.isInline)return ce(t,new r.Bs(e>0?i.$to:i.$from));{let n=le(t.state,e);return!!n&&ce(t,n)}}if(!i.empty||n.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"forward":"backward")){let n=le(t.state,e);return!!(n&&n instanceof r.qv)&&ce(t,n)}if(!(D&&n.indexOf("m")>-1)){let n,o=i.$head,s=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!s||s.isText)return!1;let a=e<0?o.pos-s.nodeSize:o.pos;return!!(s.isAtom||(n=t.docView.descAt(a))&&!n.contentDOM)&&(r.qv.isSelectable(s)?ce(t,new r.qv(e<0?t.state.doc.resolve(o.pos-s.nodeSize):o)):!!U&&ce(t,new r.Bs(t.state.doc.resolve(e<0?a:a+s.nodeSize))))}}function de(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function he(t){let e=t.pmViewDesc;return e&&0==e.size&&(t.nextSibling||"BR"!=t.nodeName)}function fe(t,e){return e<0?pe(t):me(t)}function pe(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,a=!1;for(A&&1==n.nodeType&&r<de(n)&&he(n.childNodes[r])&&(a=!0);;)if(r>0){if(1!=n.nodeType)break;{let t=n.childNodes[r-1];if(he(t))i=n,o=--r;else{if(3!=t.nodeType)break;n=t,r=n.nodeValue.length}}}else{if(ge(n))break;{let e=n.previousSibling;while(e&&he(e))i=n.parentNode,o=s(e),e=e.previousSibling;if(e)n=e,r=de(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}a?ve(t,n,r):i&&ve(t,i,o)}function me(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,a=de(n);for(;;)if(r<a){if(1!=n.nodeType)break;let t=n.childNodes[r];if(!he(t))break;i=n,o=++r}else{if(ge(n))break;{let e=n.nextSibling;while(e&&he(e))i=e.parentNode,o=s(e)+1,e=e.nextSibling;if(e)n=e,r=0,a=de(n);else{if(n=n.parentNode,n==t.dom)break;r=a=0}}}i&&ve(t,i,o)}function ge(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function ve(t,e,n){let r=t.domSelection();if(g(r)){let t=document.createRange();t.setEnd(e,n),t.setStart(e,n),r.removeAllRanges(),r.addRange(t)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout((()=>{t.state==i&&Xt(t)}),50)}function ye(t,e){let n=t.state.doc.resolve(e);if(!O&&!I&&n.parent.inlineContent){let r=t.coordsAtPos(e);if(e>n.start()){let n=t.coordsAtPos(e-1),i=(n.top+n.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(n.left-r.left)>1)return n.left<r.left?"ltr":"rtl"}if(e<n.end()){let n=t.coordsAtPos(e+1),i=(n.top+n.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(n.left-r.left)>1)return n.left>r.left?"ltr":"rtl"}}let r=getComputedStyle(t.dom).direction;return"rtl"==r?"rtl":"ltr"}function be(t,e,n){let i=t.state.selection;if(i instanceof r.Bs&&!i.empty||n.indexOf("s")>-1)return!1;if(D&&n.indexOf("m")>-1)return!1;let{$from:o,$to:s}=i;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let n=le(t.state,e);if(n&&n instanceof r.qv)return ce(t,n)}if(!o.parent.inlineContent){let n=e<0?o:s,a=i instanceof r.C1?r.Y1.near(n,e):r.Y1.findFrom(n,e);return!!a&&ce(t,a)}return!1}function _e(t,e){if(!(t.state.selection instanceof r.Bs))return!0;let{$head:n,$anchor:i,empty:o}=t.state.selection;if(!n.sameParent(i))return!0;if(!o)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let r=t.state.tr;return e<0?r.delete(n.pos-s.nodeSize,n.pos):r.delete(n.pos,n.pos+s.nodeSize),t.dispatch(r),!0}return!1}function we(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function xe(t){if(!P||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&1==e.nodeType&&0==n&&e.firstChild&&"false"==e.firstChild.contentEditable){let n=e.firstChild;we(t,n,"true"),setTimeout((()=>we(t,n,"false")),20)}return!1}function Se(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function Ee(t,e){let n=e.keyCode,r=Se(e);if(8==n||D&&72==n&&"c"==r)return _e(t,-1)||fe(t,-1);if(46==n||D&&68==n&&"c"==r)return _e(t,1)||fe(t,1);if(13==n||27==n)return!0;if(37==n||D&&66==n&&"c"==r){let e=37==n?"ltr"==ye(t,t.state.selection.from)?-1:1:-1;return ue(t,e,r)||fe(t,e)}if(39==n||D&&70==n&&"c"==r){let e=39==n?"ltr"==ye(t,t.state.selection.from)?1:-1:1;return ue(t,e,r)||fe(t,e)}return 38==n||D&&80==n&&"c"==r?be(t,-1,r)||fe(t,-1):40==n||D&&78==n&&"c"==r?xe(t)||be(t,1,r)||me(t):r==(D?"m":"c")&&(66==n||73==n||89==n||90==n)}function Me(t,e){t.someProp("transformCopied",(n=>{e=n(e,t)}));let n=[],{content:r,openStart:o,openEnd:s}=e;while(o>1&&s>1&&1==r.childCount&&1==r.firstChild.childCount){o--,s--;let t=r.firstChild;n.push(t.type.name,t.attrs!=t.type.defaultAttrs?t.attrs:null),r=t.content}let a=t.someProp("clipboardSerializer")||i.PW.fromSchema(t.state.schema),l=Ne(),c=l.createElement("div");c.appendChild(a.serializeFragment(r,{document:l}));let u,d=c.firstChild,h=0;while(d&&1==d.nodeType&&(u=De[d.nodeName.toLowerCase()])){for(let t=u.length-1;t>=0;t--){let e=l.createElement(u[t]);while(c.firstChild)e.appendChild(c.firstChild);c.appendChild(e),h++}d=c.firstChild}d&&1==d.nodeType&&d.setAttribute("data-pm-slice",`${o} ${s}${h?` -${h}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",(n=>n(e,t)))||e.content.textBetween(0,e.content.size,"\n\n");return{dom:c,text:f}}function Te(t,e,n,r,o){let s,a,l=o.parent.type.spec.code;if(!n&&!e)return null;let c=e&&(r||l||!n);if(c){if(t.someProp("transformPastedText",(n=>{e=n(e,l||r,t)})),l)return e?new i.p2(i.HY.from(t.state.schema.text(e.replace(/\r\n?/g,"\n"))),0,0):i.p2.empty;let n=t.someProp("clipboardTextParser",(n=>n(e,o,r,t)));if(n)a=n;else{let n=o.marks(),{schema:r}=t.state,a=i.PW.fromSchema(r);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach((t=>{let e=s.appendChild(document.createElement("p"));t&&e.appendChild(a.serializeNode(r.text(t,n)))}))}}else t.someProp("transformPastedHTML",(e=>{n=e(n,t)})),s=Ue(n),U&&Fe(s);let u=s&&s.querySelector("[data-pm-slice]"),d=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let i=+d[3];i>0;i--){let t=s.firstChild;while(t&&1!=t.nodeType)t=t.nextSibling;if(!t)break;s=t}if(!a){let e=t.someProp("clipboardParser")||t.someProp("domParser")||i.aw.fromSchema(t.state.schema);a=e.parseSlice(s,{preserveWhitespace:!(!c&&!d),context:o,ruleFromNode(t){return"BR"!=t.nodeName||t.nextSibling||!t.parentNode||Ce.test(t.parentNode.nodeName)?null:{ignore:!0}}})}if(d)a=Be(Le(a,+d[1],+d[2]),d[4]);else if(a=i.p2.maxOpen(Ae(a.content,o),!0),a.openStart||a.openEnd){let t=0,e=0;for(let n=a.content.firstChild;t<a.openStart&&!n.type.spec.isolating;t++,n=n.firstChild);for(let n=a.content.lastChild;e<a.openEnd&&!n.type.spec.isolating;e++,n=n.lastChild);a=Le(a,t,e)}return t.someProp("transformPasted",(e=>{a=e(a,t)})),a}const Ce=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Ae(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let r,o=e.node(n),s=o.contentMatchAt(e.index(n)),a=[];if(t.forEach((t=>{if(!a)return;let e,n=s.findWrapping(t.type);if(!n)return a=null;if(e=a.length&&r.length&&Oe(n,r,t,a[a.length-1],0))a[a.length-1]=e;else{a.length&&(a[a.length-1]=Re(a[a.length-1],r.length));let e=ke(t,n);a.push(e),s=s.matchType(e.type),r=n}})),a)return i.HY.from(a)}return t}function ke(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,i.HY.from(t));return t}function Oe(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){let s=Oe(t,e,n,r.lastChild,o+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));let a=r.contentMatchAt(r.childCount);if(a.matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(i.HY.from(ke(n,t,o+1))))}}function Re(t,e){if(0==e)return t;let n=t.content.replaceChild(t.childCount-1,Re(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(i.HY.empty,!0);return t.copy(n.append(r))}function Pe(t,e,n,r,o,s){let a=e<0?t.firstChild:t.lastChild,l=a.content;return t.childCount>1&&(s=0),o<r-1&&(l=Pe(l,e,n,r,o+1,s)),o>=n&&(l=e<0?a.contentMatchAt(0).fillBefore(l,s<=o).append(l):l.append(a.contentMatchAt(a.childCount).fillBefore(i.HY.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,a.copy(l))}function Le(t,e,n){return e<t.openStart&&(t=new i.p2(Pe(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new i.p2(Pe(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const De={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Ie=null;function Ne(){return Ie||(Ie=document.implementation.createHTMLDocument("title"))}function Ue(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n,r=Ne().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(t);if((n=i&&De[i[1].toLowerCase()])&&(t=n.map((t=>"<"+t+">")).join("")+t+n.map((t=>"</"+t+">")).reverse().join("")),r.innerHTML=t,n)for(let o=0;o<n.length;o++)r=r.querySelector(n[o])||r;return r}function Fe(t){let e=t.querySelectorAll(O?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];1==r.childNodes.length&&" "==r.textContent&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function Be(t,e){if(!t.size)return t;let n,r=t.content.firstChild.type.schema;try{n=JSON.parse(e)}catch(l){return t}let{content:o,openStart:s,openEnd:a}=t;for(let c=n.length-2;c>=0;c-=2){let t=r.nodes[n[c]];if(!t||t.hasRequiredAttrs())break;o=i.HY.from(t.create(n[c+1],o)),s++,a++}return new i.p2(o,s,a)}const Ve={},ze={},je={touchstart:!0,touchmove:!0};class He{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function We(t){for(let e in Ve){let n=Ve[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=e=>{!Xe(t,e)||Ye(t,e)||!t.editable&&e.type in ze||n(t,e)},je[e]?{passive:!0}:void 0)}P&&t.dom.addEventListener("input",(()=>null)),qe(t)}function Ge(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function $e(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function qe(t){t.someProp("handleDOMEvents",(e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=e=>Ye(t,e))}))}function Ye(t,e){return t.someProp("handleDOMEvents",(n=>{let r=n[e.type];return!!r&&(r(t,e)||e.defaultPrevented)}))}function Xe(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function Ze(t,e){Ye(t,e)||!Ve[e.type]||!t.editable&&e.type in ze||Ve[e.type](t,e)}function Ke(t){return{left:t.clientX,top:t.clientY}}function Je(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Qe(t,e,n,r,i){if(-1==r)return!1;let o=t.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(t.someProp(e,(e=>s>o.depth?e(t,n,o.nodeAfter,o.before(s),i,!0):e(t,n,o.node(s),o.before(s),i,!1))))return!0;return!1}function tn(t,e,n){t.focused||t.focus();let r=t.state.tr.setSelection(e);"pointer"==n&&r.setMeta("pointer",!0),t.dispatch(r)}function en(t,e){if(-1==e)return!1;let n=t.state.doc.resolve(e),i=n.nodeAfter;return!!(i&&i.isAtom&&r.qv.isSelectable(i))&&(tn(t,new r.qv(n),"pointer"),!0)}function nn(t,e){if(-1==e)return!1;let n,i,o=t.state.selection;o instanceof r.qv&&(n=o.node);let s=t.state.doc.resolve(e);for(let a=s.depth+1;a>0;a--){let t=a>s.depth?s.nodeAfter:s.node(a);if(r.qv.isSelectable(t)){i=n&&o.$from.depth>0&&a>=o.$from.depth&&s.before(o.$from.depth+1)==o.$from.pos?s.before(o.$from.depth):s.before(a);break}}return null!=i&&(tn(t,r.qv.create(t.state.doc,i),"pointer"),!0)}function rn(t,e,n,r,i){return Qe(t,"handleClickOn",e,n,r)||t.someProp("handleClick",(n=>n(t,e,r)))||(i?nn(t,n):en(t,n))}function on(t,e,n,r){return Qe(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",(n=>n(t,e,r)))}function sn(t,e,n,r){return Qe(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",(n=>n(t,e,r)))||an(t,n,r)}function an(t,e,n){if(0!=n.button)return!1;let i=t.state.doc;if(-1==e)return!!i.inlineContent&&(tn(t,r.Bs.create(i,0,i.content.size),"pointer"),!0);let o=i.resolve(e);for(let s=o.depth+1;s>0;s--){let e=s>o.depth?o.nodeAfter:o.node(s),n=o.before(s);if(e.inlineContent)tn(t,r.Bs.create(i,n+1,n+1+e.content.size),"pointer");else{if(!r.qv.isSelectable(e))continue;tn(t,r.qv.create(i,n),"pointer")}return!0}}function ln(t){return gn(t)}ze.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=16==n.keyCode||n.shiftKey,!dn(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!N||!O||13!=n.keyCode))if(229!=n.keyCode&&t.domObserver.forceFlush(),!L||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)t.someProp("handleKeyDown",(e=>e(t,n)))||Ee(t,n)?n.preventDefault():Ge(t,"key");else{let e=Date.now();t.input.lastIOSEnter=e,t.input.lastIOSEnterFallbackTimeout=setTimeout((()=>{t.input.lastIOSEnter==e&&(t.someProp("handleKeyDown",(e=>e(t,v(13,"Enter")))),t.input.lastIOSEnter=0)}),200)}},ze.keyup=(t,e)=>{16==e.keyCode&&(t.input.shiftKey=!1)},ze.keypress=(t,e)=>{let n=e;if(dn(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||D&&n.metaKey)return;if(t.someProp("handleKeyPress",(e=>e(t,n))))return void n.preventDefault();let i=t.state.selection;if(!(i instanceof r.Bs)||!i.$from.sameParent(i.$to)){let e=String.fromCharCode(n.charCode);/[\r\n]/.test(e)||t.someProp("handleTextInput",(n=>n(t,i.$from.pos,i.$to.pos,e)))||t.dispatch(t.state.tr.insertText(e).scrollIntoView()),n.preventDefault()}};const cn=D?"metaKey":"ctrlKey";Ve.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=ln(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&Je(n,t.input.lastClick)&&!n[cn]&&("singleClick"==t.input.lastClick.type?o="doubleClick":"doubleClick"==t.input.lastClick.type&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o};let s=t.posAtCoords(Ke(n));s&&("singleClick"==o?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new un(t,s,n,!!r)):("doubleClick"==o?on:sn)(t,s.pos,s.inside,n)?n.preventDefault():Ge(t,"pointer"))};class un{constructor(t,e,n,i){let o,s;if(this.view=t,this.pos=e,this.event=n,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!n[cn],this.allowDefault=n.shiftKey,e.inside>-1)o=t.state.doc.nodeAt(e.inside),s=e.inside;else{let n=t.state.doc.resolve(e.pos);o=n.parent,s=n.depth?n.before():0}const a=i?null:n.target,l=a?t.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:c}=t.state;(0==n.button&&o.type.spec.draggable&&!1!==o.type.spec.selectable||c instanceof r.qv&&c.from<=s&&c.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!A||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ge(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((()=>Xt(this.view))),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(Ke(t))),this.updateAllowDefault(t),this.allowDefault||!e?Ge(this.view,"pointer"):rn(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():0==t.button&&(this.flushed||P&&this.mightDrag&&!this.mightDrag.node.isAtom||O&&!this.view.state.selection.visible&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2)?(tn(this.view,r.Y1.near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):Ge(this.view,"pointer")}move(t){this.updateAllowDefault(t),Ge(this.view,"pointer"),0==t.buttons&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}function dn(t,e){return!!t.composing||!!(P&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500)&&(t.input.compositionEndedAt=-2e8,!0)}Ve.touchstart=t=>{t.input.lastTouch=Date.now(),ln(t),Ge(t,"pointer")},Ve.touchmove=t=>{t.input.lastTouch=Date.now(),Ge(t,"pointer")},Ve.contextmenu=t=>ln(t);const hn=N?5e3:-1;function fn(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout((()=>gn(t)),e))}function pn(t){t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=mn());while(t.input.compositionNodes.length>0)t.input.compositionNodes.pop().markParentsDirty()}function mn(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function gn(t,e=!1){if(!(N&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),pn(t),e||t.docView&&t.docView.dirty){let e=qt(t);return e&&!e.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(e)):t.updateState(t.state),!0}return!1}}function vn(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout((()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()}),50)}ze.compositionstart=ze.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((t=>!1===t.type.spec.inclusive))))t.markCursor=t.state.storedMarks||n.marks(),gn(t,!0),t.markCursor=null;else if(gn(t),A&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let e=t.domSelectionRange();for(let n=e.focusNode,r=e.focusOffset;n&&1==n.nodeType&&0!=r;){let e=r<0?n.lastChild:n.childNodes[r-1];if(!e)break;if(3==e.nodeType){t.domSelection().collapse(e,e.nodeValue.length);break}n=e,r=-1}}t.input.composing=!0}fn(t,hn)},ze.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionID++,fn(t,20))};const yn=T&&C<15||L&&F<604;function bn(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}function _n(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?wn(t,r.value,null,t.input.shiftKey,e):wn(t,r.textContent,r.innerHTML,t.input.shiftKey,e)}),50)}function wn(t,e,n,r,o){let s=Te(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",(e=>e(t,o,s||i.p2.empty))))return!0;if(!s)return!1;let a=bn(s),l=a?t.state.tr.replaceSelectionWith(a,t.input.shiftKey):t.state.tr.replaceSelection(s);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Ve.copy=ze.cut=(t,e)=>{let n=e,r=t.state.selection,i="cut"==n.type;if(r.empty)return;let o=yn?null:n.clipboardData,s=r.content(),{dom:a,text:l}=Me(t,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):vn(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},ze.paste=(t,e)=>{let n=e;if(t.composing&&!N)return;let r=yn?null:n.clipboardData;r&&wn(t,r.getData("text/plain"),r.getData("text/html"),t.input.shiftKey,n)?n.preventDefault():_n(t,n)};class xn{constructor(t,e){this.slice=t,this.move=e}}const Sn=D?"altKey":"ctrlKey";Ve.dragstart=(t,e)=>{let n=e,i=t.input.mouseDown;if(i&&i.done(),!n.dataTransfer)return;let o=t.state.selection,s=o.empty?null:t.posAtCoords(Ke(n));if(s&&s.pos>=o.from&&s.pos<=(o instanceof r.qv?o.to-1:o.to));else if(i&&i.mightDrag)t.dispatch(t.state.tr.setSelection(r.qv.create(t.state.doc,i.mightDrag.pos)));else if(n.target&&1==n.target.nodeType){let e=t.docView.nearestDesc(n.target,!0);e&&e.node.type.spec.draggable&&e!=t.docView&&t.dispatch(t.state.tr.setSelection(r.qv.create(t.state.doc,e.posBefore)))}let a=t.state.selection.content(),{dom:l,text:c}=Me(t,a);n.dataTransfer.clearData(),n.dataTransfer.setData(yn?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",yn||n.dataTransfer.setData("text/plain",c),t.dragging=new xn(a,!n[Sn])},Ve.dragend=t=>{let e=t.dragging;window.setTimeout((()=>{t.dragging==e&&(t.dragging=null)}),50)},ze.dragover=ze.dragenter=(t,e)=>e.preventDefault(),ze.drop=(t,e)=>{let n=e,s=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let a=t.posAtCoords(Ke(n));if(!a)return;let l=t.state.doc.resolve(a.pos),c=s&&s.slice;c?t.someProp("transformPasted",(e=>{c=e(c,t)})):c=Te(t,n.dataTransfer.getData(yn?"Text":"text/plain"),yn?null:n.dataTransfer.getData("text/html"),!1,l);let u=!(!s||n[Sn]);if(t.someProp("handleDrop",(e=>e(t,n,c||i.p2.empty,u))))return void n.preventDefault();if(!c)return;n.preventDefault();let d=c?(0,o.nj)(t.state.doc,l.pos,c):l.pos;null==d&&(d=l.pos);let h=t.state.tr;u&&h.deleteSelection();let f=h.mapping.map(d),p=0==c.openStart&&0==c.openEnd&&1==c.content.childCount,m=h.doc;if(p?h.replaceRangeWith(f,f,c.content.firstChild):h.replaceRange(f,f,c),h.doc.eq(m))return;let g=h.doc.resolve(f);if(p&&r.qv.isSelectable(c.content.firstChild)&&g.nodeAfter&&g.nodeAfter.sameMarkup(c.content.firstChild))h.setSelection(new r.qv(g));else{let e=h.mapping.map(d);h.mapping.maps[h.mapping.maps.length-1].forEach(((t,n,r,i)=>e=i)),h.setSelection(ie(t,g,h.doc.resolve(e)))}t.focus(),t.dispatch(h.setMeta("uiEvent","drop"))},Ve.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout((()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Xt(t)}),20))},Ve.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)},Ve.beforeinput=(t,e)=>{let n=e;if(O&&N&&"deleteContentBackward"==n.inputType){t.domObserver.flushSoon();let{domChangeCount:e}=t.input;setTimeout((()=>{if(t.input.domChangeCount!=e)return;if(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",(e=>e(t,v(8,"Backspace")))))return;let{$cursor:n}=t.state.selection;n&&n.pos>0&&t.dispatch(t.state.tr.delete(n.pos-1,n.pos).scrollIntoView())}),50)}};for(let mr in ze)Ve[mr]=ze[mr];function En(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Mn{constructor(t,e){this.toDOM=t,this.spec=e||On,this.side=this.spec.side||0}map(t,e,n,r){let{pos:i,deleted:o}=t.mapResult(e.from+r,this.side<0?-1:1);return o?null:new An(i-n,i-n,this)}valid(){return!0}eq(t){return this==t||t instanceof Mn&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&En(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class Tn{constructor(t,e){this.attrs=t,this.spec=e||On}map(t,e,n,r){let i=t.map(e.from+r,this.spec.inclusiveStart?-1:1)-n,o=t.map(e.to+r,this.spec.inclusiveEnd?1:-1)-n;return i>=o?null:new An(i,o,this)}valid(t,e){return e.from<e.to}eq(t){return this==t||t instanceof Tn&&En(this.attrs,t.attrs)&&En(this.spec,t.spec)}static is(t){return t.type instanceof Tn}destroy(){}}class Cn{constructor(t,e){this.attrs=t,this.spec=e||On}map(t,e,n,r){let i=t.mapResult(e.from+r,1);if(i.deleted)return null;let o=t.mapResult(e.to+r,-1);return o.deleted||o.pos<=i.pos?null:new An(i.pos-n,o.pos-n,this)}valid(t,e){let n,{index:r,offset:i}=t.content.findIndex(e.from);return i==e.from&&!(n=t.child(r)).isText&&i+n.nodeSize==e.to}eq(t){return this==t||t instanceof Cn&&En(this.attrs,t.attrs)&&En(this.spec,t.spec)}destroy(){}}class An{constructor(t,e,n){this.from=t,this.to=e,this.type=n}copy(t,e){return new An(t,e,this.type)}eq(t,e=0){return this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to}map(t,e,n){return this.type.map(t,this,e,n)}static widget(t,e,n){return new An(t,t,new Mn(e,n))}static inline(t,e,n,r){return new An(t,e,new Tn(n,r))}static node(t,e,n,r){return new An(t,e,new Cn(n,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof Tn}}const kn=[],On={};class Rn{constructor(t,e){this.local=t.length?t:kn,this.children=e.length?e:kn}static create(t,e){return e.length?Bn(e,t,0,On):Pn}find(t,e,n){let r=[];return this.findInner(null==t?0:t,null==e?1e9:e,r,0,n),r}findInner(t,e,n,r,i){for(let o=0;o<this.local.length;o++){let s=this.local[o];s.from<=e&&s.to>=t&&(!i||i(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<e&&this.children[o+1]>t){let s=this.children[o]+1;this.children[o+2].findInner(t-s,e-s,n,r+s,i)}}map(t,e,n){return this==Pn||0==t.maps.length?this:this.mapInner(t,e,0,0,n||On)}mapInner(t,e,n,r,i){let o;for(let s=0;s<this.local.length;s++){let a=this.local[s].map(t,n,r);a&&a.type.valid(e,a)?(o||(o=[])).push(a):i.onRemove&&i.onRemove(this.local[s].spec)}return this.children.length?Dn(this.children,o||[],t,e,n,r,i):o?new Rn(o.sort(Vn),kn):Pn}add(t,e){return e.length?this==Pn?Rn.create(t,e):this.addInner(t,e,0):this}addInner(t,e,n){let r,i=0;t.forEach(((t,o)=>{let s,a=o+n;if(s=Un(e,t,a)){r||(r=this.children.slice());while(i<r.length&&r[i]<o)i+=3;r[i]==o?r[i+2]=r[i+2].addInner(t,s,a+1):r.splice(i,0,o,o+t.nodeSize,Bn(s,t,a+1,On)),i+=3}}));let o=In(i?Fn(e):e,-n);for(let s=0;s<o.length;s++)o[s].type.valid(t,o[s])||o.splice(s--,1);return new Rn(o.length?this.local.concat(o).sort(Vn):this.local,r||this.children)}remove(t){return 0==t.length||this==Pn?this:this.removeInner(t,0)}removeInner(t,e){let n=this.children,r=this.local;for(let i=0;i<n.length;i+=3){let r,o=n[i]+e,s=n[i+1]+e;for(let e,n=0;n<t.length;n++)(e=t[n])&&e.from>o&&e.to<s&&(t[n]=null,(r||(r=[])).push(e));if(!r)continue;n==this.children&&(n=this.children.slice());let a=n[i+2].removeInner(r,o+1);a!=Pn?n[i+2]=a:(n.splice(i,3),i-=3)}if(r.length)for(let i,o=0;o<t.length;o++)if(i=t[o])for(let t=0;t<r.length;t++)r[t].eq(i,e)&&(r==this.local&&(r=this.local.slice()),r.splice(t--,1));return n==this.children&&r==this.local?this:r.length||n.length?new Rn(r,n):Pn}forChild(t,e){if(this==Pn)return this;if(e.isLeaf)return Rn.empty;let n,r;for(let s=0;s<this.children.length;s+=3)if(this.children[s]>=t){this.children[s]==t&&(n=this.children[s+2]);break}let i=t+1,o=i+e.content.size;for(let s=0;s<this.local.length;s++){let t=this.local[s];if(t.from<o&&t.to>i&&t.type instanceof Tn){let e=Math.max(i,t.from)-i,n=Math.min(o,t.to)-i;e<n&&(r||(r=[])).push(t.copy(e,n))}}if(r){let t=new Rn(r.sort(Vn),kn);return n?new Ln([t,n]):t}return n||Pn}eq(t){if(this==t)return!0;if(!(t instanceof Rn)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(let e=0;e<this.children.length;e+=3)if(this.children[e]!=t.children[e]||this.children[e+1]!=t.children[e+1]||!this.children[e+2].eq(t.children[e+2]))return!1;return!0}locals(t){return zn(this.localsInner(t))}localsInner(t){if(this==Pn)return kn;if(t.inlineContent||!this.local.some(Tn.is))return this.local;let e=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof Tn||e.push(this.local[n]);return e}}Rn.empty=new Rn([],[]),Rn.removeOverlap=zn;const Pn=Rn.empty;class Ln{constructor(t){this.members=t}map(t,e){const n=this.members.map((n=>n.map(t,e,On)));return Ln.from(n)}forChild(t,e){if(e.isLeaf)return Rn.empty;let n=[];for(let r=0;r<this.members.length;r++){let i=this.members[r].forChild(t,e);i!=Pn&&(i instanceof Ln?n=n.concat(i.members):n.push(i))}return Ln.from(n)}eq(t){if(!(t instanceof Ln)||t.members.length!=this.members.length)return!1;for(let e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0}locals(t){let e,n=!0;for(let r=0;r<this.members.length;r++){let i=this.members[r].localsInner(t);if(i.length)if(e){n&&(e=e.slice(),n=!1);for(let t=0;t<i.length;t++)e.push(i[t])}else e=i}return e?zn(n?e:e.sort(Vn)):kn}static from(t){switch(t.length){case 0:return Pn;case 1:return t[0];default:return new Ln(t.every((t=>t instanceof Rn))?t:t.reduce(((t,e)=>t.concat(e instanceof Rn?e:e.members)),[]))}}}function Dn(t,e,n,r,i,o,s){let a=t.slice();for(let c=0,u=o;c<n.maps.length;c++){let t=0;n.maps[c].forEach(((e,n,r,o)=>{let s=o-r-(n-e);for(let l=0;l<a.length;l+=3){let o=a[l+1];if(o<0||e>o+u-t)continue;let c=a[l]+u-t;n>=c?a[l+1]=e<=c?-2:-1:r>=i&&s&&(a[l]+=s,a[l+1]+=s)}t+=s})),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(-2==a[c+1]){l=!0,a[c+1]=-1;continue}let e=n.map(t[c]+o),u=e-i;if(u<0||u>=r.content.size){l=!0;continue}let d=n.map(t[c+1]+o,-1),h=d-i,{index:f,offset:p}=r.content.findIndex(u),m=r.maybeChild(f);if(m&&p==u&&p+m.nodeSize==h){let r=a[c+2].mapInner(n,m,e+1,t[c]+o+1,s);r!=Pn?(a[c]=u,a[c+1]=h,a[c+2]=r):(a[c+1]=-2,l=!0)}else l=!0}if(l){let l=Nn(a,t,e,n,i,o,s),c=Bn(l,r,0,s);e=c.local;for(let t=0;t<a.length;t+=3)a[t+1]<0&&(a.splice(t,3),t-=3);for(let t=0,e=0;t<c.children.length;t+=3){let n=c.children[t];while(e<a.length&&a[e]<n)e+=3;a.splice(e,0,c.children[t],c.children[t+1],c.children[t+2])}}return new Rn(e.sort(Vn),a)}function In(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new An(i.from+e,i.to+e,i.type))}return n}function Nn(t,e,n,r,i,o,s){function a(t,e){for(let o=0;o<t.local.length;o++){let a=t.local[o].map(r,i,e);a?n.push(a):s.onRemove&&s.onRemove(t.local[o].spec)}for(let n=0;n<t.children.length;n+=3)a(t.children[n+2],t.children[n]+e+1)}for(let l=0;l<t.length;l+=3)-1==t[l+1]&&a(t[l+2],e[l]+o+1);return n}function Un(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let o,s=0;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function Fn(t){let e=[];for(let n=0;n<t.length;n++)null!=t[n]&&e.push(t[n]);return e}function Bn(t,e,n,r){let i=[],o=!1;e.forEach(((e,s)=>{let a=Un(t,e,s+n);if(a){o=!0;let t=Bn(a,e,n+s+1,r);t!=Pn&&i.push(s,s+e.nodeSize,t)}}));let s=In(o?Fn(t):t,-n).sort(Vn);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new Rn(s,i):Pn}function Vn(t,e){return t.from-e.from||t.to-e.to}function zn(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let o=e[i];if(o.from!=r.from){o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),jn(e,i,r.copy(o.from,r.to)));break}o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),jn(e,i+1,o.copy(r.to,o.to)))}}return e}function jn(t,e,n){while(e<t.length&&Vn(n,t[e])>0)e++;t.splice(e,0,n)}function Hn(t){let e=[];return t.someProp("decorations",(n=>{let r=n(t.state);r&&r!=Pn&&e.push(r)})),t.cursorWrapper&&e.push(Rn.create(t.state.doc,[t.cursorWrapper.deco])),Ln.from(e)}const Wn={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Gn=T&&C<=11;class $n{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class qn{constructor(t,e){this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new $n,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver((t=>{for(let e=0;e<t.length;e++)this.queue.push(t[e]);T&&C<=11&&t.some((t=>"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length))?this.flushSoon():this.flush()})),Gn&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((()=>{this.flushingSoon=-1,this.flush()}),20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Wn)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let e=0;e<t.length;e++)this.queue.push(t[e]);window.setTimeout((()=>this.flush()),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout((()=>this.suppressingSelectionUpdates=!1),50)}onSelectionChange(){if(oe(this.view)){if(this.suppressingSelectionUpdates)return Xt(this.view);if(T&&C<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&u(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let e,n=new Set;for(let i=t.focusNode;i;i=a(i))n.add(i);for(let i=t.anchorNode;i;i=a(i))if(n.has(i)){e=i;break}let r=e&&this.view.docView.nearestDesc(e);return r&&r.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e})?(this.setCurSelection(),!0):void 0}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);let n=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&oe(t)&&!this.ignoreSelectionChange(n),o=-1,s=-1,a=!1,l=[];if(t.editable)for(let r=0;r<e.length;r++){let t=this.registerMutation(e[r],l);t&&(o=o<0?t.from:Math.min(t.from,o),s=s<0?t.to:Math.max(t.to,s),t.typeOver&&(a=!0))}if(A&&l.length>1){let t=l.filter((t=>"BR"==t.nodeName));if(2==t.length){let e=t[0],n=t[1];e.parentNode&&e.parentNode.parentNode==n.parentNode?n.remove():e.remove()}}let c=null;o<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&g(n)&&(c=qt(t))&&c.eq(r.Y1.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Xt(t),this.currentSelection.set(n),t.scrollToSelection()):(o>-1||i)&&(o>-1&&(t.docView.markDirty(o,s),Zn(t)),this.handleDOMChange(o,s,a,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(n)||Xt(t),this.currentSelection.set(n))}registerMutation(t,e){if(e.indexOf(t.target)>-1)return null;let n=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(n==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(t))return null;if("childList"==t.type){for(let n=0;n<t.addedNodes.length;n++)e.push(t.addedNodes[n]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(t.target))return{from:n.posBefore,to:n.posAfter};let r=t.previousSibling,i=t.nextSibling;if(T&&C<=11&&t.addedNodes.length)for(let e=0;e<t.addedNodes.length;e++){let{previousSibling:n,nextSibling:o}=t.addedNodes[e];(!n||Array.prototype.indexOf.call(t.addedNodes,n)<0)&&(r=n),(!o||Array.prototype.indexOf.call(t.addedNodes,o)<0)&&(i=o)}let o=r&&r.parentNode==t.target?s(r)+1:0,a=n.localPosFromDOM(t.target,o,-1),l=i&&i.parentNode==t.target?s(i):t.target.childNodes.length,c=n.localPosFromDOM(t.target,l,1);return{from:a,to:c}}return"attributes"==t.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}}}let Yn=new WeakMap,Xn=!1;function Zn(t){if(!Yn.has(t)&&(Yn.set(t,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace))){if(t.requiresGeckoHackNode=A,Xn)return;console["warn"]("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Xn=!0}}function Kn(t){let e;function n(t){t.preventDefault(),t.stopImmediatePropagation(),e=t.getTargetRanges()[0]}t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0);let r=e.startContainer,i=e.startOffset,o=e.endContainer,s=e.endOffset,a=t.domAtPos(t.state.selection.anchor);return u(a.node,a.offset,o,s)&&([r,i,o,s]=[o,s,r,i]),{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:s}}function Jn(t,e,n){let r,{node:o,fromOffset:s,toOffset:a,from:l,to:c}=t.docView.parseRange(e,n),u=t.domSelectionRange(),d=u.anchorNode;if(d&&t.dom.contains(1==d.nodeType?d:d.parentNode)&&(r=[{node:d,offset:u.anchorOffset}],g(u)||r.push({node:u.focusNode,offset:u.focusOffset})),O&&8===t.input.lastKeyCode)for(let i=a;i>s;i--){let t=o.childNodes[i-1],e=t.pmViewDesc;if("BR"==t.nodeName&&!e){a=i;break}if(!e||e.size)break}let h=t.state.doc,f=t.someProp("domParser")||i.aw.fromSchema(t.state.schema),p=h.resolve(l),m=null,v=f.parse(o,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:s,to:a,preserveWhitespace:"pre"!=p.parent.type.whitespace||"full",findPositions:r,ruleFromNode:Qn,context:p});if(r&&null!=r[0].pos){let t=r[0].pos,e=r[1]&&r[1].pos;null==e&&(e=t),m={anchor:t+l,head:e+l}}return{doc:v,sel:m,from:l,to:c}}function Qn(t){let e=t.pmViewDesc;if(e)return e.parseRule();if("BR"==t.nodeName&&t.parentNode){if(P&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}if(t.parentNode.lastChild==t||P&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if("IMG"==t.nodeName&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const tr=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function er(t,e,n,i,o){if(e<0){let e=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,n=qt(t,e);if(n&&!t.state.selection.eq(n)){if(O&&N&&13===t.input.lastKeyCode&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",(e=>e(t,v(13,"Enter")))))return;let r=t.state.tr.setSelection(n);"pointer"==e?r.setMeta("pointer",!0):"key"==e&&r.scrollIntoView(),t.composing&&r.setMeta("composition",t.input.compositionID),t.dispatch(r)}return}let s=t.state.doc.resolve(e),a=s.sharedDepth(n);e=s.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l,c,u=t.state.selection,d=Jn(t,e,n),h=t.state.doc,f=h.slice(d.from,d.to);8===t.input.lastKeyCode&&Date.now()-100<t.input.lastKeyCodeTime?(l=t.state.selection.to,c="end"):(l=t.state.selection.from,c="start"),t.input.lastKeyCode=null;let p=sr(f.content,d.doc.content,d.from,l,c);if((L&&t.input.lastIOSEnter>Date.now()-225||N)&&o.some((t=>1==t.nodeType&&!tr.test(t.nodeName)))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",(e=>e(t,v(13,"Enter")))))return void(t.input.lastIOSEnter=0);if(!p){if(!(i&&u instanceof r.Bs&&!u.empty&&u.$head.sameParent(u.$anchor))||t.composing||d.sel&&d.sel.anchor!=d.sel.head){if(d.sel){let e=nr(t,t.state.doc,d.sel);if(e&&!e.eq(t.state.selection)){let n=t.state.tr.setSelection(e);t.composing&&n.setMeta("composition",t.input.compositionID),t.dispatch(n)}}return}p={start:u.from,endA:u.to,endB:u.to}}if(O&&t.cursorWrapper&&d.sel&&d.sel.anchor==t.cursorWrapper.deco.from&&d.sel.head==d.sel.anchor){let t=p.endB-p.start;d.sel={anchor:d.sel.anchor+t,head:d.sel.anchor+t}}t.input.domChangeCount++,t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof r.Bs&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=d.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=d.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),T&&C<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>d.from&&"  "==d.doc.textBetween(p.start-d.from-1,p.start-d.from+1)&&(p.start--,p.endA--,p.endB--);let m,g=d.doc.resolveNoCache(p.start-d.from),y=d.doc.resolveNoCache(p.endB-d.from),b=h.resolve(p.start),_=g.sameParent(y)&&g.parent.inlineContent&&b.end()>=p.endA;if((L&&t.input.lastIOSEnter>Date.now()-225&&(!_||o.some((t=>"DIV"==t.nodeName||"P"==t.nodeName)))||!_&&g.pos<d.doc.content.size&&(m=r.Y1.findFrom(d.doc.resolve(g.pos+1),1,!0))&&m.head==y.pos)&&t.someProp("handleKeyDown",(e=>e(t,v(13,"Enter")))))return void(t.input.lastIOSEnter=0);if(t.state.selection.anchor>p.start&&ir(h,p.start,p.endA,g,y)&&t.someProp("handleKeyDown",(e=>e(t,v(8,"Backspace")))))return void(N&&O&&t.domObserver.suppressSelectionUpdates());O&&N&&p.endB==p.start&&(t.input.lastAndroidDelete=Date.now()),N&&!_&&g.start()!=y.start()&&0==y.parentOffset&&g.depth==y.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==p.endA&&(p.endB-=2,y=d.doc.resolveNoCache(p.endB-d.from),setTimeout((()=>{t.someProp("handleKeyDown",(function(e){return e(t,v(13,"Enter"))}))}),20));let w,x,S,E=p.start,M=p.endA;if(_)if(g.pos==y.pos)T&&C<=11&&0==g.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout((()=>Xt(t)),20)),w=t.state.tr.delete(E,M),x=h.resolve(p.start).marksAcross(h.resolve(p.endA));else if(p.endA==p.endB&&(S=rr(g.parent.content.cut(g.parentOffset,y.parentOffset),b.parent.content.cut(b.parentOffset,p.endA-b.start()))))w=t.state.tr,"add"==S.type?w.addMark(E,M,S.mark):w.removeMark(E,M,S.mark);else if(g.parent.child(g.index()).isText&&g.index()==y.index()-(y.textOffset?0:1)){let e=g.parent.textBetween(g.parentOffset,y.parentOffset);if(t.someProp("handleTextInput",(n=>n(t,E,M,e))))return;w=t.state.tr.insertText(e,E,M)}if(w||(w=t.state.tr.replace(E,M,d.doc.slice(p.start-d.from,p.endB-d.from))),d.sel){let e=nr(t,w.doc,d.sel);e&&!(O&&N&&t.composing&&e.empty&&(p.start!=p.endB||t.input.lastAndroidDelete<Date.now()-100)&&(e.head==E||e.head==w.mapping.map(M)-1)||T&&e.empty&&e.head==E)&&w.setSelection(e)}x&&w.ensureMarks(x),t.composing&&w.setMeta("composition",t.input.compositionID),t.dispatch(w.scrollIntoView())}function nr(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:ie(t,e.resolve(n.anchor),e.resolve(n.head))}function rr(t,e){let n,r,o,s=t.firstChild.marks,a=e.firstChild.marks,l=s,c=a;for(let i=0;i<a.length;i++)l=a[i].removeFromSet(l);for(let i=0;i<s.length;i++)c=s[i].removeFromSet(c);if(1==l.length&&0==c.length)r=l[0],n="add",o=t=>t.mark(r.addToSet(t.marks));else{if(0!=l.length||1!=c.length)return null;r=c[0],n="remove",o=t=>t.mark(r.removeFromSet(t.marks))}let u=[];for(let i=0;i<e.childCount;i++)u.push(o(e.child(i)));if(i.HY.from(u).eq(t))return{mark:r,type:n}}function ir(t,e,n,r,i){if(!r.parent.isTextblock||n-e<=i.pos-r.pos||or(r,!0,!1)<i.pos)return!1;let o=t.resolve(e);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=t.resolve(or(o,!0,!0));return!(!s.parent.isTextblock||s.pos>n||or(s,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function or(t,e,n){let r=t.depth,i=e?t.end():t.pos;while(r>0&&(e||t.indexAfter(r)==t.node(r).childCount))r--,i++,e=!1;if(n){let e=t.node(r).maybeChild(t.indexAfter(r));while(e&&!e.isLeaf)e=e.firstChild,i++}return i}function sr(t,e,n,r,i){let o=t.findDiffStart(e,n);if(null==o)return null;let{a:s,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if("end"==i){let t=Math.max(0,o-Math.min(s,a));r-=s+t-o}if(s<o&&t.size<e.size){let t=r<=o&&r>=s?o-r:0;o-=t,a=o+(a-s),s=o}else if(a<o){let t=r<=o&&r>=a?o-r:0;o-=t,s=o+(s-a),a=o}return{start:o,endA:s,endB:a}}class ar{constructor(t,e){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new He,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=e,this.state=e.state,this.directPlugins=e.plugins||[],this.directPlugins.forEach(pr),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):"function"==typeof t?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=ur(this),cr(this),this.nodeViews=hr(this),this.docView=Tt(this.state.doc,lr(this),Hn(this),this.dom,this),this.domObserver=new qn(this,((t,e,n,r)=>er(this,t,e,n,r))),this.domObserver.start(),We(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let e in t)this._props[e]=t[e];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&qe(this);let e=this._props;this._props=t,t.plugins&&(t.plugins.forEach(pr),this.directPlugins=t.plugins),this.updateStateInner(t.state,e)}setProps(t){let e={};for(let n in this._props)e[n]=this._props[n];e.state=this.state;for(let n in t)e[n]=t[n];this.update(e)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,e){let n=this.state,r=!1,i=!1;t.storedMarks&&this.composing&&(pn(this),i=!0),this.state=t;let o=n.plugins!=t.plugins||this._props.plugins!=e.plugins;if(o||this._props.plugins!=e.plugins||this._props.nodeViews!=e.nodeViews){let t=hr(this);fr(t,this.nodeViews)&&(this.nodeViews=t,r=!0)}(o||e.handleDOMEvents!=this._props.handleDOMEvents)&&qe(this),this.editable=ur(this),cr(this);let s=Hn(this),a=lr(this),l=n.plugins==t.plugins||n.doc.eq(t.doc)?t.scrollToSelection>n.scrollToSelection?"to selection":"preserve":"reset",c=r||!this.docView.matchesNode(t.doc,a,s);!c&&t.selection.eq(n.selection)||(i=!0);let u="preserve"==l&&i&&null==this.dom.style.overflowAnchor&&H(this);if(i){this.domObserver.stop();let e=c&&(T||O)&&!this.composing&&!n.selection.empty&&!t.selection.empty&&dr(n.selection,t.selection);if(c){let n=O?this.trackWrites=this.domSelectionRange().focusNode:null;!r&&this.docView.update(t.doc,a,s,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=Tt(t.doc,a,s,this.dom,this)),n&&!this.trackWrites&&(e=!0)}e||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&ae(this))?Xt(this,e):(ne(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(n),"reset"==l?this.dom.scrollTop=0:"to selection"==l?this.scrollToSelection():u&&G(u)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(this.someProp("handleScrollToSelection",(t=>t(this))));else if(this.state.selection instanceof r.qv){let e=this.docView.domAfterPos(this.state.selection.from);1==e.nodeType&&j(this,e.getBoundingClientRect(),t)}else j(this,this.coordsAtPos(this.state.selection.head,1),t)}destroyPluginViews(){let t;while(t=this.pluginViews.pop())t.destroy&&t.destroy()}updatePluginViews(t){if(t&&t.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let e=0;e<this.pluginViews.length;e++){let n=this.pluginViews[e];n.update&&n.update(this,t)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let e=this.directPlugins[t];e.spec.view&&this.pluginViews.push(e.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let e=this.state.plugins[t];e.spec.view&&this.pluginViews.push(e.spec.view(this))}}}someProp(t,e){let n,r=this._props&&this._props[t];if(null!=r&&(n=e?e(r):r))return n;for(let o=0;o<this.directPlugins.length;o++){let r=this.directPlugins[o].props[t];if(null!=r&&(n=e?e(r):r))return n}let i=this.state.plugins;if(i)for(let o=0;o<i.length;o++){let r=i[o].props[t];if(null!=r&&(n=e?e(r):r))return n}}hasFocus(){if(T){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;while(t&&this.dom!=t&&this.dom.contains(t)){if("false"==t.contentEditable)return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Y(this.dom),Xt(this),this.domObserver.start()}get root(){let t=this._root;if(null==t)for(let e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=()=>e.ownerDocument.getSelection()),this._root=e;return t||document}posAtCoords(t){return nt(this,t)}coordsAtPos(t,e=1){return st(this,t,e)}domAtPos(t,e=0){return this.docView.domFromPos(t,e)}nodeDOM(t){let e=this.docView.descAt(t);return e?e.nodeDOM:null}posAtDOM(t,e,n=-1){let r=this.docView.posFromDOM(t,e,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(t,e){return gt(this,e||this.state,t)}pasteHTML(t,e){return wn(this,"",t,!1,e||new ClipboardEvent("paste"))}pasteText(t,e){return wn(this,t,null,!0,e||new ClipboardEvent("paste"))}destroy(){this.docView&&($e(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Hn(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return null==this.docView}dispatchEvent(t){return Ze(this,t)}dispatch(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))}domSelectionRange(){return P&&11===this.root.nodeType&&y(this.dom.ownerDocument)==this.dom?Kn(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function lr(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",(n=>{if("function"==typeof n&&(n=n(t.state)),n)for(let t in n)"class"==t?e.class+=" "+n[t]:"style"==t?e.style=(e.style?e.style+";":"")+n[t]:e[t]||"contenteditable"==t||"nodeName"==t||(e[t]=String(n[t]))})),e.translate||(e.translate="no"),[An.node(0,t.state.doc.content.size,e)]}function cr(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:An.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function ur(t){return!t.someProp("editable",(e=>!1===e(t.state)))}function dr(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function hr(t){let e=Object.create(null);function n(t){for(let n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function fr(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function pr(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}},8379:function(t,e,n){"use strict";n.d(e,{Z:function(){return C}});n(7658),n(1703);var r=n(899);function i(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,M(r.key),r)}}function a(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t,e){if(e&&("object"===typeof e||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}function p(t){var e=d();return function(){var n,r=c(t);if(e){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}function m(t,e){return y(t)||i(t,e)||_(t,e)||S()}function g(t){return v(t)||b(t)||_(t)||x()}function v(t){if(Array.isArray(t))return w(t)}function y(t){if(Array.isArray(t))return t}function b(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _(t,e){if(t){if("string"===typeof t)return w(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(t,e):void 0}}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function x(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function S(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(t,e){if("object"!==typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function M(t){var e=E(t,"string");return"symbol"===typeof e?e:String(e)}var T="undefined"!==typeof window&&window.THREE?window.THREE:{LinearFilter:r.wem,Sprite:r.jyi,SpriteMaterial:r.xeV,SRGBColorSpace:r.KI_,Texture:r.xEZ},C=function(t){l(n,t);var e=p(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rgba(255, 255, 255, 1)";return o(this,n),t=e.call(this,new T.SpriteMaterial),t._text="".concat(r),t._textHeight=i,t._color=s,t._backgroundColor=!1,t._padding=0,t._borderWidth=0,t._borderRadius=0,t._borderColor="white",t._strokeWidth=0,t._strokeColor="white",t._fontFace="system-ui",t._fontSize=90,t._fontWeight="normal",t._canvas=document.createElement("canvas"),t._genCanvas(),t}return a(n,[{key:"text",get:function(){return this._text},set:function(t){this._text=t,this._genCanvas()}},{key:"textHeight",get:function(){return this._textHeight},set:function(t){this._textHeight=t,this._genCanvas()}},{key:"color",get:function(){return this._color},set:function(t){this._color=t,this._genCanvas()}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._genCanvas()}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding=t,this._genCanvas()}},{key:"borderWidth",get:function(){return this._borderWidth},set:function(t){this._borderWidth=t,this._genCanvas()}},{key:"borderRadius",get:function(){return this._borderRadius},set:function(t){this._borderRadius=t,this._genCanvas()}},{key:"borderColor",get:function(){return this._borderColor},set:function(t){this._borderColor=t,this._genCanvas()}},{key:"fontFace",get:function(){return this._fontFace},set:function(t){this._fontFace=t,this._genCanvas()}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize=t,this._genCanvas()}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(t){this._fontWeight=t,this._genCanvas()}},{key:"strokeWidth",get:function(){return this._strokeWidth},set:function(t){this._strokeWidth=t,this._genCanvas()}},{key:"strokeColor",get:function(){return this._strokeColor},set:function(t){this._strokeColor=t,this._genCanvas()}},{key:"_genCanvas",value:function(){var t=this,e=this._canvas,n=e.getContext("2d"),r=Array.isArray(this.borderWidth)?this.borderWidth:[this.borderWidth,this.borderWidth],i=r.map((function(e){return e*t.fontSize*.1})),o=Array.isArray(this.borderRadius)?this.borderRadius:[this.borderRadius,this.borderRadius,this.borderRadius,this.borderRadius],s=o.map((function(e){return e*t.fontSize*.1})),a=Array.isArray(this.padding)?this.padding:[this.padding,this.padding],l=a.map((function(e){return e*t.fontSize*.1})),c=this.text.split("\n"),u="".concat(this.fontWeight," ").concat(this.fontSize,"px ").concat(this.fontFace);n.font=u;var d=Math.max.apply(Math,g(c.map((function(t){return n.measureText(t).width})))),h=this.fontSize*c.length;if(e.width=d+2*i[0]+2*l[0],e.height=h+2*i[1]+2*l[1],this.borderWidth){if(n.strokeStyle=this.borderColor,i[0]){var f=i[0]/2;n.lineWidth=i[0],n.beginPath(),n.moveTo(f,s[0]),n.lineTo(f,e.height-s[3]),n.moveTo(e.width-f,s[1]),n.lineTo(e.width-f,e.height-s[2]),n.stroke()}if(i[1]){var p=i[1]/2;n.lineWidth=i[1],n.beginPath(),n.moveTo(Math.max(i[0],s[0]),p),n.lineTo(e.width-Math.max(i[0],s[1]),p),n.moveTo(Math.max(i[0],s[3]),e.height-p),n.lineTo(e.width-Math.max(i[0],s[2]),e.height-p),n.stroke()}if(this.borderRadius){var v=Math.max.apply(Math,g(i)),y=v/2;n.lineWidth=v,n.beginPath(),[!!s[0]&&[s[0],y,y,s[0]],!!s[1]&&[e.width-s[1],e.width-y,y,s[1]],!!s[2]&&[e.width-s[2],e.width-y,e.height-y,e.height-s[2]],!!s[3]&&[s[3],y,e.height-y,e.height-s[3]]].filter((function(t){return t})).forEach((function(t){var e=m(t,4),r=e[0],i=e[1],o=e[2],s=e[3];n.moveTo(r,o),n.quadraticCurveTo(i,o,i,s)})),n.stroke()}}this.backgroundColor&&(n.fillStyle=this.backgroundColor,this.borderRadius?(n.beginPath(),n.moveTo(i[0],s[0]),[[i[0],s[0],e.width-s[1],i[1],i[1],i[1]],[e.width-i[0],e.width-i[0],e.width-i[0],i[1],s[1],e.height-s[2]],[e.width-i[0],e.width-s[2],s[3],e.height-i[1],e.height-i[1],e.height-i[1]],[i[0],i[0],i[0],e.height-i[1],e.height-s[3],s[0]]].forEach((function(t){var e=m(t,6),r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5];n.quadraticCurveTo(r,s,i,a),n.lineTo(o,l)})),n.closePath(),n.fill()):n.fillRect(i[0],i[1],e.width-2*i[0],e.height-2*i[1])),n.translate.apply(n,g(i)),n.translate.apply(n,g(l)),n.font=u,n.fillStyle=this.color,n.textBaseline="bottom";var b=this.strokeWidth>0;b&&(n.lineWidth=this.strokeWidth*this.fontSize/10,n.strokeStyle=this.strokeColor),c.forEach((function(e,r){var i=(d-n.measureText(e).width)/2,o=(r+1)*t.fontSize;b&&n.strokeText(e,i,o),n.fillText(e,i,o)})),this.material.map&&this.material.map.dispose();var _=this.material.map=new T.Texture(e);_.minFilter=T.LinearFilter,_.colorSpace=T.SRGBColorSpace,_.needsUpdate=!0;var w=this.textHeight*c.length+2*r[1]+2*a[1];this.scale.set(w*e.width/e.height,w,0)}},{key:"clone",value:function(){return new this.constructor(this.text,this.textHeight,this.color).copy(this)}},{key:"copy",value:function(t){return T.Sprite.prototype.copy.call(this,t),this.color=t.color,this.backgroundColor=t.backgroundColor,this.padding=t.padding,this.borderWidth=t.borderWidth,this.borderColor=t.borderColor,this.fontFace=t.fontFace,this.fontSize=t.fontSize,this.fontWeight=t.fontWeight,this.strokeWidth=t.strokeWidth,this.strokeColor=t.strokeColor,this}}]),n}(T.Sprite)},899:function(t,e,n){"use strict";n.d(e,{$V:function(){return Gh},CP7:function(){return $u},FM8:function(){return bn},Ilk:function(){return fi},JOQ:function(){return go},KI_:function(){return Te},Kj0:function(){return qi},M8C:function(){return yn},Mig:function(){return Ch},Ox3:function(){return Th},Pa4:function(){return qn},QmN:function(){return o},RsA:function(){return i},SUY:function(){return Ah},TlE:function(){return yi},Tme:function(){return Yr},WXh:function(){return Kd},YBo:function(){return Jd},ZAu:function(){return Fu},ZzF:function(){return Zn},_Li:function(){return f},_fP:function(){return $n},a$l:function(){return wi},b_z:function(){return Xd},cLu:function(){return xt},cPb:function(){return so},dd2:function(){return Hn},dpR:function(){return bh},fHI:function(){return Yd},iKG:function(){return ll},iMs:function(){return jh},jyi:function(){return hd},jyz:function(){return io},mXe:function(){return Gd},nls:function(){return pd},pBf:function(){return We},rDY:function(){return eo},u9r:function(){return ki},vBJ:function(){return mi},wem:function(){return ht},x12:function(){return _d},xEZ:function(){return zn},xeV:function(){return Ju},xo$:function(){return Zd},xsS:function(){return Yu},yGw:function(){return Sr},yj7:function(){return zd}});n(7658),n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315),n(1703),n(2262),n(4506);
/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
const r="153",i={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},o={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},s=0,a=1,l=2,c=1,u=2,d=3,h=0,f=1,p=2,m=0,g=1,v=2,y=3,b=4,_=5,w=100,x=101,S=102,E=103,M=104,T=200,C=201,A=202,k=203,O=204,R=205,P=206,L=207,D=208,I=209,N=210,U=0,F=1,B=2,V=3,z=4,j=5,H=6,W=7,G=0,$=1,q=2,Y=0,X=1,Z=2,K=3,J=4,Q=5,tt=300,et=301,nt=302,rt=303,it=304,ot=306,st=1e3,at=1001,lt=1002,ct=1003,ut=1004,dt=1005,ht=1006,ft=1007,pt=1008,mt=1009,gt=1010,vt=1011,yt=1012,bt=1013,_t=1014,wt=1015,xt=1016,St=1017,Et=1018,Mt=1020,Tt=1021,Ct=1023,At=1024,kt=1025,Ot=1026,Rt=1027,Pt=1028,Lt=1029,Dt=1030,It=1031,Nt=1033,Ut=33776,Ft=33777,Bt=33778,Vt=33779,zt=35840,jt=35841,Ht=35842,Wt=35843,Gt=36196,$t=37492,qt=37496,Yt=37808,Xt=37809,Zt=37810,Kt=37811,Jt=37812,Qt=37813,te=37814,ee=37815,ne=37816,re=37817,ie=37818,oe=37819,se=37820,ae=37821,le=36492,ce=36283,ue=36284,de=36285,he=36286,fe=2300,pe=2301,me=2302,ge=2400,ve=2401,ye=2402,be=3e3,_e=3001,we=3200,xe=3201,Se=0,Ee=1,Me="",Te="srgb",Ce="srgb-linear",Ae="display-p3",ke=7680,Oe=519,Re=512,Pe=513,Le=514,De=515,Ie=516,Ne=517,Ue=518,Fe=519,Be=35044,Ve="300 es",ze=1035,je=2e3,He=2001;class We{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const n=this._listeners,r=n[t];if(void 0!==r){const t=r.indexOf(e);-1!==t&&r.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners,n=e[t.type];if(void 0!==n){t.target=this;const e=n.slice(0);for(let n=0,r=e.length;n<r;n++)e[n].call(this,t);t.target=null}}}const Ge=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let $e=1234567;const qe=Math.PI/180,Ye=180/Math.PI;function Xe(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=Ge[255&t]+Ge[t>>8&255]+Ge[t>>16&255]+Ge[t>>24&255]+"-"+Ge[255&e]+Ge[e>>8&255]+"-"+Ge[e>>16&15|64]+Ge[e>>24&255]+"-"+Ge[63&n|128]+Ge[n>>8&255]+"-"+Ge[n>>16&255]+Ge[n>>24&255]+Ge[255&r]+Ge[r>>8&255]+Ge[r>>16&255]+Ge[r>>24&255];return i.toLowerCase()}function Ze(t,e,n){return Math.max(e,Math.min(n,t))}function Ke(t,e){return(t%e+e)%e}function Je(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function Qe(t,e,n){return t!==e?(n-t)/(e-t):0}function tn(t,e,n){return(1-n)*t+n*e}function en(t,e,n,r){return tn(t,e,1-Math.exp(-n*r))}function nn(t,e=1){return e-Math.abs(Ke(t,2*e)-e)}function rn(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function on(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(6*t-15)+10))}function sn(t,e){return t+Math.floor(Math.random()*(e-t+1))}function an(t,e){return t+Math.random()*(e-t)}function ln(t){return t*(.5-Math.random())}function cn(t){void 0!==t&&($e=t);let e=$e+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296}function un(t){return t*qe}function dn(t){return t*Ye}function hn(t){return 0===(t&t-1)&&0!==t}function fn(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function pn(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function mn(t,e,n,r,i){const o=Math.cos,s=Math.sin,a=o(n/2),l=s(n/2),c=o((e+r)/2),u=s((e+r)/2),d=o((e-r)/2),h=s((e-r)/2),f=o((r-e)/2),p=s((r-e)/2);switch(i){case"XYX":t.set(a*u,l*d,l*h,a*c);break;case"YZY":t.set(l*h,a*u,l*d,a*c);break;case"ZXZ":t.set(l*d,l*h,a*u,a*c);break;case"XZX":t.set(a*u,l*p,l*f,a*c);break;case"YXY":t.set(l*f,a*u,l*p,a*c);break;case"ZYZ":t.set(l*p,l*f,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function gn(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function vn(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(4294967295*t);case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int32Array:return Math.round(2147483647*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}const yn={DEG2RAD:qe,RAD2DEG:Ye,generateUUID:Xe,clamp:Ze,euclideanModulo:Ke,mapLinear:Je,inverseLerp:Qe,lerp:tn,damp:en,pingpong:nn,smoothstep:rn,smootherstep:on,randInt:sn,randFloat:an,randFloatSpread:ln,seededRandom:cn,degToRad:un,radToDeg:dn,isPowerOfTwo:hn,ceilPowerOfTwo:fn,floorPowerOfTwo:pn,setQuaternionFromProperEuler:mn,normalize:vn,denormalize:gn};class bn{constructor(t=0,e=0){bn.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){const t=Math.atan2(-this.y,-this.x)+Math.PI;return t}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Ze(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*r+t.x,this.y=i*r+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class _n{constructor(t,e,n,r,i,o,s,a,l){_n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,e,n,r,i,o,s,a,l)}set(t,e,n,r,i,o,s,a,l){const c=this.elements;return c[0]=t,c[1]=r,c[2]=s,c[3]=e,c[4]=i,c[5]=a,c[6]=n,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,o=n[0],s=n[3],a=n[6],l=n[1],c=n[4],u=n[7],d=n[2],h=n[5],f=n[8],p=r[0],m=r[3],g=r[6],v=r[1],y=r[4],b=r[7],_=r[2],w=r[5],x=r[8];return i[0]=o*p+s*v+a*_,i[3]=o*m+s*y+a*w,i[6]=o*g+s*b+a*x,i[1]=l*p+c*v+u*_,i[4]=l*m+c*y+u*w,i[7]=l*g+c*b+u*x,i[2]=d*p+h*v+f*_,i[5]=d*m+h*y+f*w,i[8]=d*g+h*b+f*x,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],l=t[7],c=t[8];return e*o*c-e*s*l-n*i*c+n*s*a+r*i*l-r*o*a}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],l=t[7],c=t[8],u=c*o-s*l,d=s*a-c*i,h=l*i-o*a,f=e*u+n*d+r*h;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const p=1/f;return t[0]=u*p,t[1]=(r*l-c*n)*p,t[2]=(s*n-r*o)*p,t[3]=d*p,t[4]=(c*e-r*a)*p,t[5]=(r*i-s*e)*p,t[6]=h*p,t[7]=(n*a-l*e)*p,t[8]=(o*e-n*i)*p,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,i,o,s){const a=Math.cos(i),l=Math.sin(i);return this.set(n*a,n*l,-n*(a*o+l*s)+o+t,-r*l,r*a,-r*(-l*o+a*s)+s+e,0,0,1),this}scale(t,e){return this.premultiply(wn.makeScale(t,e)),this}rotate(t){return this.premultiply(wn.makeRotation(-t)),this}translate(t,e){return this.premultiply(wn.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const wn=new _n;function xn(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function Sn(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}const En={};function Mn(t){t in En||(En[t]=!0,console.warn(t))}function Tn(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function Cn(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}const An=(new _n).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),kn=(new _n).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function On(t){return t.convertSRGBToLinear().applyMatrix3(kn)}function Rn(t){return t.applyMatrix3(An).convertLinearToSRGB()}const Pn={[Ce]:t=>t,[Te]:t=>t.convertSRGBToLinear(),[Ae]:On},Ln={[Ce]:t=>t,[Te]:t=>t.convertLinearToSRGB(),[Ae]:Rn},Dn={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(t){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!t},get workingColorSpace(){return Ce},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(!1===this.enabled||e===n||!e||!n)return t;const r=Pn[e],i=Ln[n];if(void 0===r||void 0===i)throw new Error(`Unsupported color space conversion, "${e}" to "${n}".`);return i(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}};let In;class Nn{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"===typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===In&&(In=Sn("canvas")),In.width=t.width,In.height=t.height;const n=In.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=In}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap){const e=Sn("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const r=n.getImageData(0,0,t.width,t.height),i=r.data;for(let t=0;t<i.length;t++)i[t]=255*Tn(i[t]/255);return n.putImageData(r,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*Tn(e[t]/255)):e[t]=Tn(e[t]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let Un=0;class Fn{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Un++}),this.uuid=Xe(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let t;if(Array.isArray(r)){t=[];for(let e=0,n=r.length;e<n;e++)r[e].isDataTexture?t.push(Bn(r[e].image)):t.push(Bn(r[e]))}else t=Bn(r);n.url=t}return e||(t.images[this.uuid]=n),n}}function Bn(t){return"undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap?Nn.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Vn=0;class zn extends We{constructor(t=zn.DEFAULT_IMAGE,e=zn.DEFAULT_MAPPING,n=at,r=at,i=ht,o=pt,s=Ct,a=mt,l=zn.DEFAULT_ANISOTROPY,c=Me){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Vn++}),this.uuid=Xe(),this.name="",this.source=new Fn(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=a,this.offset=new bn(0,0),this.repeat=new bn(1,1),this.center=new bn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new _n,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"===typeof c?this.colorSpace=c:(Mn("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=c===_e?Te:Me),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==tt)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case st:t.x=t.x-Math.floor(t.x);break;case at:t.x=t.x<0?0:1;break;case lt:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case st:t.y=t.y-Math.floor(t.y);break;case at:t.y=t.y<0?0:1;break;case lt:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Mn("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Te?_e:be}set encoding(t){Mn("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=t===_e?Te:Me}}zn.DEFAULT_IMAGE=null,zn.DEFAULT_MAPPING=tt,zn.DEFAULT_ANISOTROPY=1;class jn{constructor(t=0,e=0,n=0,r=1){jn.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,i;const o=.01,s=.1,a=t.elements,l=a[0],c=a[4],u=a[8],d=a[1],h=a[5],f=a[9],p=a[2],m=a[6],g=a[10];if(Math.abs(c-d)<o&&Math.abs(u-p)<o&&Math.abs(f-m)<o){if(Math.abs(c+d)<s&&Math.abs(u+p)<s&&Math.abs(f+m)<s&&Math.abs(l+h+g-3)<s)return this.set(1,0,0,0),this;e=Math.PI;const t=(l+1)/2,a=(h+1)/2,v=(g+1)/2,y=(c+d)/4,b=(u+p)/4,_=(f+m)/4;return t>a&&t>v?t<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(t),r=y/n,i=b/n):a>v?a<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(a),n=y/r,i=_/r):v<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=b/i,r=_/i),this.set(n,r,i,e),this}let v=Math.sqrt((m-f)*(m-f)+(u-p)*(u-p)+(d-c)*(d-c));return Math.abs(v)<.001&&(v=1),this.x=(m-f)/v,this.y=(u-p)/v,this.z=(d-c)/v,this.w=Math.acos((l+h+g-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Hn extends We{constructor(t=1,e=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new jn(0,0,t,e),this.scissorTest=!1,this.viewport=new jn(0,0,t,e);const r={width:t,height:e,depth:1};void 0!==n.encoding&&(Mn("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===_e?Te:Me),this.texture=new zn(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:ht,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(t,e,n=1){this.width===t&&this.height===e&&this.depth===n||(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new Fn(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Wn extends zn{constructor(t=null,e=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=ct,this.minFilter=ct,this.wrapR=at,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Gn extends zn{constructor(t=null,e=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=ct,this.minFilter=ct,this.wrapR=at,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class $n{constructor(t=0,e=0,n=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=r}static slerpFlat(t,e,n,r,i,o,s){let a=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3];const d=i[o+0],h=i[o+1],f=i[o+2],p=i[o+3];if(0===s)return t[e+0]=a,t[e+1]=l,t[e+2]=c,void(t[e+3]=u);if(1===s)return t[e+0]=d,t[e+1]=h,t[e+2]=f,void(t[e+3]=p);if(u!==p||a!==d||l!==h||c!==f){let t=1-s;const e=a*d+l*h+c*f+u*p,n=e>=0?1:-1,r=1-e*e;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,e*n);t=Math.sin(t*o)/i,s=Math.sin(s*o)/i}const i=s*n;if(a=a*t+d*i,l=l*t+h*i,c=c*t+f*i,u=u*t+p*i,t===1-s){const t=1/Math.sqrt(a*a+l*l+c*c+u*u);a*=t,l*=t,c*=t,u*=t}}t[e]=a,t[e+1]=l,t[e+2]=c,t[e+3]=u}static multiplyQuaternionsFlat(t,e,n,r,i,o){const s=n[r],a=n[r+1],l=n[r+2],c=n[r+3],u=i[o],d=i[o+1],h=i[o+2],f=i[o+3];return t[e]=s*f+c*u+a*h-l*d,t[e+1]=a*f+c*d+l*u-s*h,t[e+2]=l*f+c*h+s*d-a*u,t[e+3]=c*f-s*u-a*d-l*h,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){const n=t._x,r=t._y,i=t._z,o=t._order,s=Math.cos,a=Math.sin,l=s(n/2),c=s(r/2),u=s(i/2),d=a(n/2),h=a(r/2),f=a(i/2);switch(o){case"XYZ":this._x=d*c*u+l*h*f,this._y=l*h*u-d*c*f,this._z=l*c*f+d*h*u,this._w=l*c*u-d*h*f;break;case"YXZ":this._x=d*c*u+l*h*f,this._y=l*h*u-d*c*f,this._z=l*c*f-d*h*u,this._w=l*c*u+d*h*f;break;case"ZXY":this._x=d*c*u-l*h*f,this._y=l*h*u+d*c*f,this._z=l*c*f+d*h*u,this._w=l*c*u-d*h*f;break;case"ZYX":this._x=d*c*u-l*h*f,this._y=l*h*u+d*c*f,this._z=l*c*f-d*h*u,this._w=l*c*u+d*h*f;break;case"YZX":this._x=d*c*u+l*h*f,this._y=l*h*u+d*c*f,this._z=l*c*f-d*h*u,this._w=l*c*u-d*h*f;break;case"XZY":this._x=d*c*u-l*h*f,this._y=l*h*u-d*c*f,this._z=l*c*f+d*h*u,this._w=l*c*u+d*h*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],i=e[8],o=e[1],s=e[5],a=e[9],l=e[2],c=e[6],u=e[10],d=n+s+u;if(d>0){const t=.5/Math.sqrt(d+1);this._w=.25/t,this._x=(c-a)*t,this._y=(i-l)*t,this._z=(o-r)*t}else if(n>s&&n>u){const t=2*Math.sqrt(1+n-s-u);this._w=(c-a)/t,this._x=.25*t,this._y=(r+o)/t,this._z=(i+l)/t}else if(s>u){const t=2*Math.sqrt(1+s-n-u);this._w=(i-l)/t,this._x=(r+o)/t,this._y=.25*t,this._z=(a+c)/t}else{const t=2*Math.sqrt(1+u-n-s);this._w=(o-r)/t,this._x=(i+l)/t,this._y=(a+c)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Ze(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,r=t._y,i=t._z,o=t._w,s=e._x,a=e._y,l=e._z,c=e._w;return this._x=n*c+o*s+r*l-i*a,this._y=r*c+o*a+i*s-n*l,this._z=i*c+o*l+n*a-r*s,this._w=o*c-n*s-r*a-i*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,i=this._z,o=this._w;let s=o*t._w+n*t._x+r*t._y+i*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const a=1-s*s;if(a<=Number.EPSILON){const t=1-e;return this._w=t*o+e*this._w,this._x=t*n+e*this._x,this._y=t*r+e*this._y,this._z=t*i+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(a),c=Math.atan2(l,s),u=Math.sin((1-e)*c)/l,d=Math.sin(e*c)/l;return this._w=o*u+this._w*d,this._x=n*u+this._x*d,this._y=r*u+this._y*d,this._z=i*u+this._z*d,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(e*Math.cos(r),n*Math.sin(i),n*Math.cos(i),e*Math.sin(r))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class qn{constructor(t=0,e=0,n=0){qn.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(Xn.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Xn.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,s=t.z,a=t.w,l=a*e+o*r-s*n,c=a*n+s*e-i*r,u=a*r+i*n-o*e,d=-i*e-o*n-s*r;return this.x=l*a+d*-i+c*-s-u*-o,this.y=c*a+d*-o+u*-i-l*-s,this.z=u*a+d*-s+l*-o-c*-i,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,r=t.y,i=t.z,o=e.x,s=e.y,a=e.z;return this.x=r*a-i*s,this.y=i*o-n*a,this.z=n*s-r*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return Yn.copy(this).projectOnVector(t),this.sub(Yn)}reflect(t){return this.sub(Yn.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Ze(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Yn=new qn,Xn=new $n;class Zn{constructor(t=new qn(1/0,1/0,1/0),e=new qn(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(Jn.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(Jn.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=Jn.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){if(t.updateWorldMatrix(!1,!1),void 0!==t.boundingBox)null===t.boundingBox&&t.computeBoundingBox(),Qn.copy(t.boundingBox),Qn.applyMatrix4(t.matrixWorld),this.union(Qn);else{const n=t.geometry;if(void 0!==n)if(e&&void 0!==n.attributes&&void 0!==n.attributes.position){const e=n.attributes.position;for(let n=0,r=e.count;n<r;n++)Jn.fromBufferAttribute(e,n).applyMatrix4(t.matrixWorld),this.expandByPoint(Jn)}else null===n.boundingBox&&n.computeBoundingBox(),Qn.copy(n.boundingBox),Qn.applyMatrix4(t.matrixWorld),this.union(Qn)}const n=t.children;for(let r=0,i=n.length;r<i;r++)this.expandByObject(n[r],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,Jn),Jn.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(sr),ar.subVectors(this.max,sr),tr.subVectors(t.a,sr),er.subVectors(t.b,sr),nr.subVectors(t.c,sr),rr.subVectors(er,tr),ir.subVectors(nr,er),or.subVectors(tr,nr);let e=[0,-rr.z,rr.y,0,-ir.z,ir.y,0,-or.z,or.y,rr.z,0,-rr.x,ir.z,0,-ir.x,or.z,0,-or.x,-rr.y,rr.x,0,-ir.y,ir.x,0,-or.y,or.x,0];return!!ur(e,tr,er,nr,ar)&&(e=[1,0,0,0,1,0,0,0,1],!!ur(e,tr,er,nr,ar)&&(lr.crossVectors(rr,ir),e=[lr.x,lr.y,lr.z],ur(e,tr,er,nr,ar)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Jn).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(Jn).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(Kn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Kn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Kn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Kn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Kn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Kn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Kn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Kn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Kn)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Kn=[new qn,new qn,new qn,new qn,new qn,new qn,new qn,new qn],Jn=new qn,Qn=new Zn,tr=new qn,er=new qn,nr=new qn,rr=new qn,ir=new qn,or=new qn,sr=new qn,ar=new qn,lr=new qn,cr=new qn;function ur(t,e,n,r,i){for(let o=0,s=t.length-3;o<=s;o+=3){cr.fromArray(t,o);const s=i.x*Math.abs(cr.x)+i.y*Math.abs(cr.y)+i.z*Math.abs(cr.z),a=e.dot(cr),l=n.dot(cr),c=r.dot(cr);if(Math.max(-Math.max(a,l,c),Math.min(a,l,c))>s)return!1}return!0}const dr=new Zn,hr=new qn,fr=new qn;class pr{constructor(t=new qn,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):dr.setFromPoints(t).getCenter(n);let r=0;for(let i=0,o=t.length;i<o;i++)r=Math.max(r,n.distanceToSquared(t[i]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;hr.subVectors(t,this.center);const e=hr.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),n=.5*(t-this.radius);this.center.addScaledVector(hr,n/t),this.radius+=n}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(fr.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(hr.copy(t.center).add(fr)),this.expandByPoint(hr.copy(t.center).sub(fr))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const mr=new qn,gr=new qn,vr=new qn,yr=new qn,br=new qn,_r=new qn,wr=new qn;class xr{constructor(t=new qn,e=new qn(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,mr)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=mr.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(mr.copy(this.origin).addScaledVector(this.direction,e),mr.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){gr.copy(t).add(e).multiplyScalar(.5),vr.copy(e).sub(t).normalize(),yr.copy(this.origin).sub(gr);const i=.5*t.distanceTo(e),o=-this.direction.dot(vr),s=yr.dot(this.direction),a=-yr.dot(vr),l=yr.lengthSq(),c=Math.abs(1-o*o);let u,d,h,f;if(c>0)if(u=o*a-s,d=o*s-a,f=i*c,u>=0)if(d>=-f)if(d<=f){const t=1/c;u*=t,d*=t,h=u*(u+o*d+2*s)+d*(o*u+d+2*a)+l}else d=i,u=Math.max(0,-(o*d+s)),h=-u*u+d*(d+2*a)+l;else d=-i,u=Math.max(0,-(o*d+s)),h=-u*u+d*(d+2*a)+l;else d<=-f?(u=Math.max(0,-(-o*i+s)),d=u>0?-i:Math.min(Math.max(-i,-a),i),h=-u*u+d*(d+2*a)+l):d<=f?(u=0,d=Math.min(Math.max(-i,-a),i),h=d*(d+2*a)+l):(u=Math.max(0,-(o*i+s)),d=u>0?i:Math.min(Math.max(-i,-a),i),h=-u*u+d*(d+2*a)+l);else d=o>0?-i:i,u=Math.max(0,-(o*d+s)),h=-u*u+d*(d+2*a)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(gr).addScaledVector(vr,d),h}intersectSphere(t,e){mr.subVectors(t.center,this.origin);const n=mr.dot(this.direction),r=mr.dot(mr)-n*n,i=t.radius*t.radius;if(r>i)return null;const o=Math.sqrt(i-r),s=n-o,a=n+o;return a<0?null:s<0?this.at(a,e):this.at(s,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);if(0===e)return!0;const n=t.normal.dot(this.direction);return n*e<0}intersectBox(t,e){let n,r,i,o,s,a;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,d=this.origin;return l>=0?(n=(t.min.x-d.x)*l,r=(t.max.x-d.x)*l):(n=(t.max.x-d.x)*l,r=(t.min.x-d.x)*l),c>=0?(i=(t.min.y-d.y)*c,o=(t.max.y-d.y)*c):(i=(t.max.y-d.y)*c,o=(t.min.y-d.y)*c),n>o||i>r?null:((i>n||isNaN(n))&&(n=i),(o<r||isNaN(r))&&(r=o),u>=0?(s=(t.min.z-d.z)*u,a=(t.max.z-d.z)*u):(s=(t.max.z-d.z)*u,a=(t.min.z-d.z)*u),n>a||s>r?null:((s>n||n!==n)&&(n=s),(a<r||r!==r)&&(r=a),r<0?null:this.at(n>=0?n:r,e)))}intersectsBox(t){return null!==this.intersectBox(t,mr)}intersectTriangle(t,e,n,r,i){br.subVectors(e,t),_r.subVectors(n,t),wr.crossVectors(br,_r);let o,s=this.direction.dot(wr);if(s>0){if(r)return null;o=1}else{if(!(s<0))return null;o=-1,s=-s}yr.subVectors(this.origin,t);const a=o*this.direction.dot(_r.crossVectors(yr,_r));if(a<0)return null;const l=o*this.direction.dot(br.cross(yr));if(l<0)return null;if(a+l>s)return null;const c=-o*yr.dot(wr);return c<0?null:this.at(c/s,i)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Sr{constructor(t,e,n,r,i,o,s,a,l,c,u,d,h,f,p,m){Sr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,e,n,r,i,o,s,a,l,c,u,d,h,f,p,m)}set(t,e,n,r,i,o,s,a,l,c,u,d,h,f,p,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=s,g[13]=a,g[2]=l,g[6]=c,g[10]=u,g[14]=d,g[3]=h,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Sr).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/Er.setFromMatrixColumn(t,0).length(),i=1/Er.setFromMatrixColumn(t,1).length(),o=1/Er.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,r=t.y,i=t.z,o=Math.cos(n),s=Math.sin(n),a=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===t.order){const t=o*c,n=o*u,r=s*c,i=s*u;e[0]=a*c,e[4]=-a*u,e[8]=l,e[1]=n+r*l,e[5]=t-i*l,e[9]=-s*a,e[2]=i-t*l,e[6]=r+n*l,e[10]=o*a}else if("YXZ"===t.order){const t=a*c,n=a*u,r=l*c,i=l*u;e[0]=t+i*s,e[4]=r*s-n,e[8]=o*l,e[1]=o*u,e[5]=o*c,e[9]=-s,e[2]=n*s-r,e[6]=i+t*s,e[10]=o*a}else if("ZXY"===t.order){const t=a*c,n=a*u,r=l*c,i=l*u;e[0]=t-i*s,e[4]=-o*u,e[8]=r+n*s,e[1]=n+r*s,e[5]=o*c,e[9]=i-t*s,e[2]=-o*l,e[6]=s,e[10]=o*a}else if("ZYX"===t.order){const t=o*c,n=o*u,r=s*c,i=s*u;e[0]=a*c,e[4]=r*l-n,e[8]=t*l+i,e[1]=a*u,e[5]=i*l+t,e[9]=n*l-r,e[2]=-l,e[6]=s*a,e[10]=o*a}else if("YZX"===t.order){const t=o*a,n=o*l,r=s*a,i=s*l;e[0]=a*c,e[4]=i-t*u,e[8]=r*u+n,e[1]=u,e[5]=o*c,e[9]=-s*c,e[2]=-l*c,e[6]=n*u+r,e[10]=t-i*u}else if("XZY"===t.order){const t=o*a,n=o*l,r=s*a,i=s*l;e[0]=a*c,e[4]=-u,e[8]=l*c,e[1]=t*u+i,e[5]=o*c,e[9]=n*u-r,e[2]=r*u-n,e[6]=s*c,e[10]=i*u+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Tr,t,Cr)}lookAt(t,e,n){const r=this.elements;return Or.subVectors(t,e),0===Or.lengthSq()&&(Or.z=1),Or.normalize(),Ar.crossVectors(n,Or),0===Ar.lengthSq()&&(1===Math.abs(n.z)?Or.x+=1e-4:Or.z+=1e-4,Or.normalize(),Ar.crossVectors(n,Or)),Ar.normalize(),kr.crossVectors(Or,Ar),r[0]=Ar.x,r[4]=kr.x,r[8]=Or.x,r[1]=Ar.y,r[5]=kr.y,r[9]=Or.y,r[2]=Ar.z,r[6]=kr.z,r[10]=Or.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,o=n[0],s=n[4],a=n[8],l=n[12],c=n[1],u=n[5],d=n[9],h=n[13],f=n[2],p=n[6],m=n[10],g=n[14],v=n[3],y=n[7],b=n[11],_=n[15],w=r[0],x=r[4],S=r[8],E=r[12],M=r[1],T=r[5],C=r[9],A=r[13],k=r[2],O=r[6],R=r[10],P=r[14],L=r[3],D=r[7],I=r[11],N=r[15];return i[0]=o*w+s*M+a*k+l*L,i[4]=o*x+s*T+a*O+l*D,i[8]=o*S+s*C+a*R+l*I,i[12]=o*E+s*A+a*P+l*N,i[1]=c*w+u*M+d*k+h*L,i[5]=c*x+u*T+d*O+h*D,i[9]=c*S+u*C+d*R+h*I,i[13]=c*E+u*A+d*P+h*N,i[2]=f*w+p*M+m*k+g*L,i[6]=f*x+p*T+m*O+g*D,i[10]=f*S+p*C+m*R+g*I,i[14]=f*E+p*A+m*P+g*N,i[3]=v*w+y*M+b*k+_*L,i[7]=v*x+y*T+b*O+_*D,i[11]=v*S+y*C+b*R+_*I,i[15]=v*E+y*A+b*P+_*N,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],s=t[5],a=t[9],l=t[13],c=t[2],u=t[6],d=t[10],h=t[14],f=t[3],p=t[7],m=t[11],g=t[15];return f*(+i*a*u-r*l*u-i*s*d+n*l*d+r*s*h-n*a*h)+p*(+e*a*h-e*l*d+i*o*d-r*o*h+r*l*c-i*a*c)+m*(+e*l*u-e*s*h-i*o*u+n*o*h+i*s*c-n*l*c)+g*(-r*s*c-e*a*u+e*s*d+r*o*u-n*o*d+n*a*c)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],l=t[7],c=t[8],u=t[9],d=t[10],h=t[11],f=t[12],p=t[13],m=t[14],g=t[15],v=u*m*l-p*d*l+p*a*h-s*m*h-u*a*g+s*d*g,y=f*d*l-c*m*l-f*a*h+o*m*h+c*a*g-o*d*g,b=c*p*l-f*u*l+f*s*h-o*p*h-c*s*g+o*u*g,_=f*u*a-c*p*a-f*s*d+o*p*d+c*s*m-o*u*m,w=e*v+n*y+r*b+i*_;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const x=1/w;return t[0]=v*x,t[1]=(p*d*i-u*m*i-p*r*h+n*m*h+u*r*g-n*d*g)*x,t[2]=(s*m*i-p*a*i+p*r*l-n*m*l-s*r*g+n*a*g)*x,t[3]=(u*a*i-s*d*i-u*r*l+n*d*l+s*r*h-n*a*h)*x,t[4]=y*x,t[5]=(c*m*i-f*d*i+f*r*h-e*m*h-c*r*g+e*d*g)*x,t[6]=(f*a*i-o*m*i-f*r*l+e*m*l+o*r*g-e*a*g)*x,t[7]=(o*d*i-c*a*i+c*r*l-e*d*l-o*r*h+e*a*h)*x,t[8]=b*x,t[9]=(f*u*i-c*p*i-f*n*h+e*p*h+c*n*g-e*u*g)*x,t[10]=(o*p*i-f*s*i+f*n*l-e*p*l-o*n*g+e*s*g)*x,t[11]=(c*s*i-o*u*i-c*n*l+e*u*l+o*n*h-e*s*h)*x,t[12]=_*x,t[13]=(c*p*r-f*u*r+f*n*d-e*p*d-c*n*m+e*u*m)*x,t[14]=(f*s*r-o*p*r-f*n*a+e*p*a+o*n*m-e*s*m)*x,t[15]=(o*u*r-c*s*r+c*n*a-e*u*a-o*n*d+e*s*d)*x,this}scale(t){const e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,s=t.y,a=t.z,l=i*o,c=i*s;return this.set(l*o+n,l*s-r*a,l*a+r*s,0,l*s+r*a,c*s+n,c*a-r*o,0,l*a-r*s,c*a+r*o,i*a*a+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,r,i,o){return this.set(1,n,i,0,t,1,o,0,e,r,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,i=e._x,o=e._y,s=e._z,a=e._w,l=i+i,c=o+o,u=s+s,d=i*l,h=i*c,f=i*u,p=o*c,m=o*u,g=s*u,v=a*l,y=a*c,b=a*u,_=n.x,w=n.y,x=n.z;return r[0]=(1-(p+g))*_,r[1]=(h+b)*_,r[2]=(f-y)*_,r[3]=0,r[4]=(h-b)*w,r[5]=(1-(d+g))*w,r[6]=(m+v)*w,r[7]=0,r[8]=(f+y)*x,r[9]=(m-v)*x,r[10]=(1-(d+p))*x,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let i=Er.set(r[0],r[1],r[2]).length();const o=Er.set(r[4],r[5],r[6]).length(),s=Er.set(r[8],r[9],r[10]).length(),a=this.determinant();a<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],Mr.copy(this);const l=1/i,c=1/o,u=1/s;return Mr.elements[0]*=l,Mr.elements[1]*=l,Mr.elements[2]*=l,Mr.elements[4]*=c,Mr.elements[5]*=c,Mr.elements[6]*=c,Mr.elements[8]*=u,Mr.elements[9]*=u,Mr.elements[10]*=u,e.setFromRotationMatrix(Mr),n.x=i,n.y=o,n.z=s,this}makePerspective(t,e,n,r,i,o,s=je){const a=this.elements,l=2*i/(e-t),c=2*i/(n-r),u=(e+t)/(e-t),d=(n+r)/(n-r);let h,f;if(s===je)h=-(o+i)/(o-i),f=-2*o*i/(o-i);else{if(s!==He)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);h=-o/(o-i),f=-o*i/(o-i)}return a[0]=l,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,n,r,i,o,s=je){const a=this.elements,l=1/(e-t),c=1/(n-r),u=1/(o-i),d=(e+t)*l,h=(n+r)*c;let f,p;if(s===je)f=(o+i)*u,p=-2*u;else{if(s!==He)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);f=i*u,p=-1*u}return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=p,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const Er=new qn,Mr=new Sr,Tr=new qn(0,0,0),Cr=new qn(1,1,1),Ar=new qn,kr=new qn,Or=new qn,Rr=new Sr,Pr=new $n;class Lr{constructor(t=0,e=0,n=0,r=Lr.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,r=this._order){return this._x=t,this._y=e,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const r=t.elements,i=r[0],o=r[4],s=r[8],a=r[1],l=r[5],c=r[9],u=r[2],d=r[6],h=r[10];switch(e){case"XYZ":this._y=Math.asin(Ze(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Ze(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,h),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin(Ze(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,h),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(a,i));break;case"ZYX":this._y=Math.asin(-Ze(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(a,i)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(Ze(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(s,h));break;case"XZY":this._z=Math.asin(-Ze(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(s,i)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return Rr.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Rr,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return Pr.setFromEuler(this),this.setFromQuaternion(Pr,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Lr.DEFAULT_ORDER="XYZ";class Dr{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!==(this.mask&t.mask)}isEnabled(t){return 0!==(this.mask&(1<<t|0))}}let Ir=0;const Nr=new qn,Ur=new $n,Fr=new Sr,Br=new qn,Vr=new qn,zr=new qn,jr=new $n,Hr=new qn(1,0,0),Wr=new qn(0,1,0),Gr=new qn(0,0,1),$r={type:"added"},qr={type:"removed"};class Yr extends We{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Ir++}),this.uuid=Xe(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Yr.DEFAULT_UP.clone();const t=new qn,e=new Lr,n=new $n,r=new qn(1,1,1);function i(){n.setFromEuler(e,!1)}function o(){e.setFromQuaternion(n,void 0,!1)}e._onChange(i),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Sr},normalMatrix:{value:new _n}}),this.matrix=new Sr,this.matrixWorld=new Sr,this.matrixAutoUpdate=Yr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Yr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Dr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Ur.setFromAxisAngle(t,e),this.quaternion.multiply(Ur),this}rotateOnWorldAxis(t,e){return Ur.setFromAxisAngle(t,e),this.quaternion.premultiply(Ur),this}rotateX(t){return this.rotateOnAxis(Hr,t)}rotateY(t){return this.rotateOnAxis(Wr,t)}rotateZ(t){return this.rotateOnAxis(Gr,t)}translateOnAxis(t,e){return Nr.copy(t).applyQuaternion(this.quaternion),this.position.add(Nr.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Hr,t)}translateY(t){return this.translateOnAxis(Wr,t)}translateZ(t){return this.translateOnAxis(Gr,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Fr.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?Br.copy(t):Br.set(t,e,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Vr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Fr.lookAt(Vr,Br,this.up):Fr.lookAt(Br,Vr,this.up),this.quaternion.setFromRotationMatrix(Fr),r&&(Fr.extractRotation(r.matrixWorld),Ur.setFromRotationMatrix(Fr),this.quaternion.premultiply(Ur.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent($r)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(qr)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(qr)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Fr.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Fr.multiply(t.parent.matrixWorld)),t.applyMatrix4(Fr),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n],i=r.getObjectByProperty(t,e);if(void 0!==i)return i}}getObjectsByProperty(t,e){let n=[];this[t]===e&&n.push(this);for(let r=0,i=this.children.length;r<i;r++){const i=this.children[r].getObjectsByProperty(t,e);i.length>0&&(n=n.concat(i))}return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Vr,t,zr),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Vr,jr,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,r=e.length;n<r;n++){const r=e[n];!0!==r.matrixWorldAutoUpdate&&!0!==t||r.updateMatrixWorld(t)}}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++){const n=t[e];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(t){const e=void 0===t||"string"===typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,r=n.length;e<r;e++){const r=n[e];i(t.shapes,r)}else i(t.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,r=this.material.length;n<r;n++)e.push(i(t.materials,this.material[n]));r.material=e}else r.material=i(t.materials,this.material);if(this.children.length>0){r.children=[];for(let e=0;e<this.children.length;e++)r.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];r.animations.push(i(t.animations,n))}}if(e){const e=o(t.geometries),r=o(t.materials),i=o(t.textures),s=o(t.images),a=o(t.shapes),l=o(t.skeletons),c=o(t.animations),u=o(t.nodes);e.length>0&&(n.geometries=e),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),s.length>0&&(n.images=s),a.length>0&&(n.shapes=a),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=r,n;function o(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let n=0;n<t.children.length;n++){const e=t.children[n];this.add(e.clone())}return this}}Yr.DEFAULT_UP=new qn(0,1,0),Yr.DEFAULT_MATRIX_AUTO_UPDATE=!0,Yr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Xr=new qn,Zr=new qn,Kr=new qn,Jr=new qn,Qr=new qn,ti=new qn,ei=new qn,ni=new qn,ri=new qn,ii=new qn;let oi=!1;class si{constructor(t=new qn,e=new qn,n=new qn){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,r){r.subVectors(n,e),Xr.subVectors(t,e),r.cross(Xr);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(t,e,n,r,i){Xr.subVectors(r,e),Zr.subVectors(n,e),Kr.subVectors(t,e);const o=Xr.dot(Xr),s=Xr.dot(Zr),a=Xr.dot(Kr),l=Zr.dot(Zr),c=Zr.dot(Kr),u=o*l-s*s;if(0===u)return i.set(-2,-1,-1);const d=1/u,h=(l*a-s*c)*d,f=(o*c-s*a)*d;return i.set(1-h-f,f,h)}static containsPoint(t,e,n,r){return this.getBarycoord(t,e,n,r,Jr),Jr.x>=0&&Jr.y>=0&&Jr.x+Jr.y<=1}static getUV(t,e,n,r,i,o,s,a){return!1===oi&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),oi=!0),this.getInterpolation(t,e,n,r,i,o,s,a)}static getInterpolation(t,e,n,r,i,o,s,a){return this.getBarycoord(t,e,n,r,Jr),a.setScalar(0),a.addScaledVector(i,Jr.x),a.addScaledVector(o,Jr.y),a.addScaledVector(s,Jr.z),a}static isFrontFacing(t,e,n,r){return Xr.subVectors(n,e),Zr.subVectors(t,e),Xr.cross(Zr).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,n,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Xr.subVectors(this.c,this.b),Zr.subVectors(this.a,this.b),.5*Xr.cross(Zr).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return si.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return si.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,r,i){return!1===oi&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),oi=!0),si.getInterpolation(t,this.a,this.b,this.c,e,n,r,i)}getInterpolation(t,e,n,r,i){return si.getInterpolation(t,this.a,this.b,this.c,e,n,r,i)}containsPoint(t){return si.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return si.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,r=this.b,i=this.c;let o,s;Qr.subVectors(r,n),ti.subVectors(i,n),ni.subVectors(t,n);const a=Qr.dot(ni),l=ti.dot(ni);if(a<=0&&l<=0)return e.copy(n);ri.subVectors(t,r);const c=Qr.dot(ri),u=ti.dot(ri);if(c>=0&&u<=c)return e.copy(r);const d=a*u-c*l;if(d<=0&&a>=0&&c<=0)return o=a/(a-c),e.copy(n).addScaledVector(Qr,o);ii.subVectors(t,i);const h=Qr.dot(ii),f=ti.dot(ii);if(f>=0&&h<=f)return e.copy(i);const p=h*l-a*f;if(p<=0&&l>=0&&f<=0)return s=l/(l-f),e.copy(n).addScaledVector(ti,s);const m=c*f-h*u;if(m<=0&&u-c>=0&&h-f>=0)return ei.subVectors(i,r),s=(u-c)/(u-c+(h-f)),e.copy(r).addScaledVector(ei,s);const g=1/(m+p+d);return o=p*g,s=d*g,e.copy(n).addScaledVector(Qr,o).addScaledVector(ti,s)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let ai=0;class li extends We{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:ai++}),this.uuid=Xe(),this.name="",this.type="Material",this.blending=g,this.side=h,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=O,this.blendDst=R,this.blendEquation=w,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=V,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Oe,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ke,this.stencilZFail=ke,this.stencilZPass=ke,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!==t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`)}}toJSON(t){const e=void 0===t||"string"===typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==g&&(n.blending=this.blending),this.side!==h&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(n.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),e){const e=r(t.textures),i=r(t.images);e.length>0&&(n.textures=e),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let r=0;r!==t;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}const ci={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ui={h:0,s:0,l:0},di={h:0,s:0,l:0};function hi(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}class fi{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(void 0===e&&void 0===n){const e=t;e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Te){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,Dn.toWorkingColorSpace(this,e),this}setRGB(t,e,n,r=Dn.workingColorSpace){return this.r=t,this.g=e,this.b=n,Dn.toWorkingColorSpace(this,r),this}setHSL(t,e,n,r=Dn.workingColorSpace){if(t=Ke(t,1),e=Ze(e,0,1),n=Ze(n,0,1),0===e)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+e):n+e-n*e,i=2*n-r;this.r=hi(i,r,t+1/3),this.g=hi(i,r,t),this.b=hi(i,r,t-1/3)}return Dn.toWorkingColorSpace(this,r),this}setStyle(t,e=Te){function n(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(t)){let i;const o=r[1],s=r[2];switch(o){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,e);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,e);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const n=r[1],i=n.length;if(3===i)return this.setRGB(parseInt(n.charAt(0),16)/15,parseInt(n.charAt(1),16)/15,parseInt(n.charAt(2),16)/15,e);if(6===i)return this.setHex(parseInt(n,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Te){const n=ci[t.toLowerCase()];return void 0!==n?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Tn(t.r),this.g=Tn(t.g),this.b=Tn(t.b),this}copyLinearToSRGB(t){return this.r=Cn(t.r),this.g=Cn(t.g),this.b=Cn(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Te){return Dn.fromWorkingColorSpace(pi.copy(this),t),65536*Math.round(Ze(255*pi.r,0,255))+256*Math.round(Ze(255*pi.g,0,255))+Math.round(Ze(255*pi.b,0,255))}getHexString(t=Te){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Dn.workingColorSpace){Dn.fromWorkingColorSpace(pi.copy(this),e);const n=pi.r,r=pi.g,i=pi.b,o=Math.max(n,r,i),s=Math.min(n,r,i);let a,l;const c=(s+o)/2;if(s===o)a=0,l=0;else{const t=o-s;switch(l=c<=.5?t/(o+s):t/(2-o-s),o){case n:a=(r-i)/t+(r<i?6:0);break;case r:a=(i-n)/t+2;break;case i:a=(n-r)/t+4;break}a/=6}return t.h=a,t.s=l,t.l=c,t}getRGB(t,e=Dn.workingColorSpace){return Dn.fromWorkingColorSpace(pi.copy(this),e),t.r=pi.r,t.g=pi.g,t.b=pi.b,t}getStyle(t=Te){Dn.fromWorkingColorSpace(pi.copy(this),t);const e=pi.r,n=pi.g,r=pi.b;return t!==Te?`color(${t} ${e.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*e)},${Math.round(255*n)},${Math.round(255*r)})`}offsetHSL(t,e,n){return this.getHSL(ui),ui.h+=t,ui.s+=e,ui.l+=n,this.setHSL(ui.h,ui.s,ui.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(ui),t.getHSL(di);const n=tn(ui.h,di.h,e),r=tn(ui.s,di.s,e),i=tn(ui.l,di.l,e);return this.setHSL(n,r,i),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,n=this.g,r=this.b,i=t.elements;return this.r=i[0]*e+i[3]*n+i[6]*r,this.g=i[1]*e+i[4]*n+i[7]*r,this.b=i[2]*e+i[5]*n+i[8]*r,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const pi=new fi;fi.NAMES=ci;class mi extends li{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new fi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=G,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const gi=new qn,vi=new bn;class yi{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=n,this.usage=Be,this.updateRange={offset:0,count:-1},this.gpuType=wt,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)vi.fromBufferAttribute(this,e),vi.applyMatrix3(t),this.setXY(e,vi.x,vi.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)gi.fromBufferAttribute(this,e),gi.applyMatrix3(t),this.setXYZ(e,gi.x,gi.y,gi.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)gi.fromBufferAttribute(this,e),gi.applyMatrix4(t),this.setXYZ(e,gi.x,gi.y,gi.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)gi.fromBufferAttribute(this,e),gi.applyNormalMatrix(t),this.setXYZ(e,gi.x,gi.y,gi.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)gi.fromBufferAttribute(this,e),gi.transformDirection(t),this.setXYZ(e,gi.x,gi.y,gi.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=gn(e,this.array)),e}setX(t,e){return this.normalized&&(e=vn(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=gn(e,this.array)),e}setY(t,e){return this.normalized&&(e=vn(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=gn(e,this.array)),e}setZ(t,e){return this.normalized&&(e=vn(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=gn(e,this.array)),e}setW(t,e){return this.normalized&&(e=vn(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=vn(e,this.array),n=vn(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return t*=this.itemSize,this.normalized&&(e=vn(e,this.array),n=vn(n,this.array),r=vn(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,i){return t*=this.itemSize,this.normalized&&(e=vn(e,this.array),n=vn(n,this.array),r=vn(r,this.array),i=vn(i,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==Be&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class bi extends yi{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class _i extends yi{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class wi extends yi{constructor(t,e,n){super(new Float32Array(t),e,n)}}let xi=0;const Si=new Sr,Ei=new Yr,Mi=new qn,Ti=new Zn,Ci=new Zn,Ai=new qn;class ki extends We{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:xi++}),this.uuid=Xe(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(xn(t)?_i:bi)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new _n).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return Si.makeRotationFromQuaternion(t),this.applyMatrix4(Si),this}rotateX(t){return Si.makeRotationX(t),this.applyMatrix4(Si),this}rotateY(t){return Si.makeRotationY(t),this.applyMatrix4(Si),this}rotateZ(t){return Si.makeRotationZ(t),this.applyMatrix4(Si),this}translate(t,e,n){return Si.makeTranslation(t,e,n),this.applyMatrix4(Si),this}scale(t,e,n){return Si.makeScale(t,e,n),this.applyMatrix4(Si),this}lookAt(t){return Ei.lookAt(t),Ei.updateMatrix(),this.applyMatrix4(Ei.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Mi).negate(),this.translate(Mi.x,Mi.y,Mi.z),this}setFromPoints(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new wi(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Zn);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new qn(-1/0,-1/0,-1/0),new qn(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,r=e.length;n<r;n++){const t=e[n];Ti.setFromBufferAttribute(t),this.morphTargetsRelative?(Ai.addVectors(this.boundingBox.min,Ti.min),this.boundingBox.expandByPoint(Ai),Ai.addVectors(this.boundingBox.max,Ti.max),this.boundingBox.expandByPoint(Ai)):(this.boundingBox.expandByPoint(Ti.min),this.boundingBox.expandByPoint(Ti.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new pr);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new qn,1/0);if(t){const n=this.boundingSphere.center;if(Ti.setFromBufferAttribute(t),e)for(let t=0,i=e.length;t<i;t++){const n=e[t];Ci.setFromBufferAttribute(n),this.morphTargetsRelative?(Ai.addVectors(Ti.min,Ci.min),Ti.expandByPoint(Ai),Ai.addVectors(Ti.max,Ci.max),Ti.expandByPoint(Ai)):(Ti.expandByPoint(Ci.min),Ti.expandByPoint(Ci.max))}Ti.getCenter(n);let r=0;for(let e=0,i=t.count;e<i;e++)Ai.fromBufferAttribute(t,e),r=Math.max(r,n.distanceToSquared(Ai));if(e)for(let i=0,o=e.length;i<o;i++){const o=e[i],s=this.morphTargetsRelative;for(let e=0,i=o.count;e<i;e++)Ai.fromBufferAttribute(o,e),s&&(Mi.fromBufferAttribute(t,e),Ai.add(Mi)),r=Math.max(r,n.distanceToSquared(Ai))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,r=e.position.array,i=e.normal.array,o=e.uv.array,s=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new yi(new Float32Array(4*s),4));const a=this.getAttribute("tangent").array,l=[],c=[];for(let M=0;M<s;M++)l[M]=new qn,c[M]=new qn;const u=new qn,d=new qn,h=new qn,f=new bn,p=new bn,m=new bn,g=new qn,v=new qn;function y(t,e,n){u.fromArray(r,3*t),d.fromArray(r,3*e),h.fromArray(r,3*n),f.fromArray(o,2*t),p.fromArray(o,2*e),m.fromArray(o,2*n),d.sub(u),h.sub(u),p.sub(f),m.sub(f);const i=1/(p.x*m.y-m.x*p.y);isFinite(i)&&(g.copy(d).multiplyScalar(m.y).addScaledVector(h,-p.y).multiplyScalar(i),v.copy(h).multiplyScalar(p.x).addScaledVector(d,-m.x).multiplyScalar(i),l[t].add(g),l[e].add(g),l[n].add(g),c[t].add(v),c[e].add(v),c[n].add(v))}let b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(let M=0,T=b.length;M<T;++M){const t=b[M],e=t.start,r=t.count;for(let i=e,o=e+r;i<o;i+=3)y(n[i+0],n[i+1],n[i+2])}const _=new qn,w=new qn,x=new qn,S=new qn;function E(t){x.fromArray(i,3*t),S.copy(x);const e=l[t];_.copy(e),_.sub(x.multiplyScalar(x.dot(e))).normalize(),w.crossVectors(S,e);const n=w.dot(c[t]),r=n<0?-1:1;a[4*t]=_.x,a[4*t+1]=_.y,a[4*t+2]=_.z,a[4*t+3]=r}for(let M=0,T=b.length;M<T;++M){const t=b[M],e=t.start,r=t.count;for(let i=e,o=e+r;i<o;i+=3)E(n[i+0]),E(n[i+1]),E(n[i+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new yi(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const r=new qn,i=new qn,o=new qn,s=new qn,a=new qn,l=new qn,c=new qn,u=new qn;if(t)for(let d=0,h=t.count;d<h;d+=3){const h=t.getX(d+0),f=t.getX(d+1),p=t.getX(d+2);r.fromBufferAttribute(e,h),i.fromBufferAttribute(e,f),o.fromBufferAttribute(e,p),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),s.fromBufferAttribute(n,h),a.fromBufferAttribute(n,f),l.fromBufferAttribute(n,p),s.add(c),a.add(c),l.add(c),n.setXYZ(h,s.x,s.y,s.z),n.setXYZ(f,a.x,a.y,a.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let t=0,d=e.count;t<d;t+=3)r.fromBufferAttribute(e,t+0),i.fromBufferAttribute(e,t+1),o.fromBufferAttribute(e,t+2),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),n.setXYZ(t+0,c.x,c.y,c.z),n.setXYZ(t+1,c.x,c.y,c.z),n.setXYZ(t+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Ai.fromBufferAttribute(t,e),Ai.normalize(),t.setXYZ(e,Ai.x,Ai.y,Ai.z)}toNonIndexed(){function t(t,e){const n=t.array,r=t.itemSize,i=t.normalized,o=new n.constructor(e.length*r);let s=0,a=0;for(let l=0,c=e.length;l<c;l++){s=t.isInterleavedBufferAttribute?e[l]*t.data.stride+t.offset:e[l]*r;for(let t=0;t<r;t++)o[a++]=n[s++]}return new yi(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new ki,n=this.index.array,r=this.attributes;for(const s in r){const i=r[s],o=t(i,n);e.setAttribute(s,o)}const i=this.morphAttributes;for(const s in i){const r=[],o=i[s];for(let e=0,i=o.length;e<i;e++){const i=o[e],s=t(i,n);r.push(s)}e.morphAttributes[s]=r}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let s=0,a=o.length;s<a;s++){const t=o[s];e.addGroup(t.start,t.count,t.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const a in n){const e=n[a];t.data.attributes[a]=e.toJSON(t.data)}const r={};let i=!1;for(const a in this.morphAttributes){const e=this.morphAttributes[a],n=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];n.push(i.toJSON(t.data))}n.length>0&&(r[a]=n,i=!0)}i&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const s=this.boundingSphere;return null!==s&&(t.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const r=t.attributes;for(const l in r){const t=r[l];this.setAttribute(l,t.clone(e))}const i=t.morphAttributes;for(const l in i){const t=[],n=i[l];for(let r=0,i=n.length;r<i;r++)t.push(n[r].clone(e));this.morphAttributes[l]=t}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let l=0,c=o.length;l<c;l++){const t=o[l];this.addGroup(t.start,t.count,t.materialIndex)}const s=t.boundingBox;null!==s&&(this.boundingBox=s.clone());const a=t.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Oi=new Sr,Ri=new xr,Pi=new pr,Li=new qn,Di=new qn,Ii=new qn,Ni=new qn,Ui=new qn,Fi=new qn,Bi=new bn,Vi=new bn,zi=new bn,ji=new qn,Hi=new qn,Wi=new qn,Gi=new qn,$i=new qn;class qi extends Yr{constructor(t=new ki,e=new mi){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry,e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}getVertexPosition(t,e){const n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,o=n.morphTargetsRelative;e.fromBufferAttribute(r,t);const s=this.morphTargetInfluences;if(i&&s){Fi.set(0,0,0);for(let n=0,r=i.length;n<r;n++){const r=s[n],a=i[n];0!==r&&(Ui.fromBufferAttribute(a,t),o?Fi.addScaledVector(Ui,r):Fi.addScaledVector(Ui.sub(e),r))}e.add(Fi)}return e}raycast(t,e){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),Pi.copy(n.boundingSphere),Pi.applyMatrix4(i),Ri.copy(t.ray).recast(t.near),!1===Pi.containsPoint(Ri.origin)){if(null===Ri.intersectSphere(Pi,Li))return;if(Ri.origin.distanceToSquared(Li)>(t.far-t.near)**2)return}Oi.copy(i).invert(),Ri.copy(t.ray).applyMatrix4(Oi),null!==n.boundingBox&&!1===Ri.intersectsBox(n.boundingBox)||this._computeIntersections(t,e,Ri)}}_computeIntersections(t,e,n){let r;const i=this.geometry,o=this.material,s=i.index,a=i.attributes.position,l=i.attributes.uv,c=i.attributes.uv1,u=i.attributes.normal,d=i.groups,h=i.drawRange;if(null!==s)if(Array.isArray(o))for(let f=0,p=d.length;f<p;f++){const i=d[f],a=o[i.materialIndex],p=Math.max(i.start,h.start),m=Math.min(s.count,Math.min(i.start+i.count,h.start+h.count));for(let o=p,d=m;o<d;o+=3){const d=s.getX(o),h=s.getX(o+1),f=s.getX(o+2);r=Xi(this,a,t,n,l,c,u,d,h,f),r&&(r.faceIndex=Math.floor(o/3),r.face.materialIndex=i.materialIndex,e.push(r))}}else{const i=Math.max(0,h.start),a=Math.min(s.count,h.start+h.count);for(let d=i,h=a;d<h;d+=3){const i=s.getX(d),a=s.getX(d+1),h=s.getX(d+2);r=Xi(this,o,t,n,l,c,u,i,a,h),r&&(r.faceIndex=Math.floor(d/3),e.push(r))}}else if(void 0!==a)if(Array.isArray(o))for(let f=0,p=d.length;f<p;f++){const i=d[f],s=o[i.materialIndex],p=Math.max(i.start,h.start),m=Math.min(a.count,Math.min(i.start+i.count,h.start+h.count));for(let o=p,a=m;o<a;o+=3){const a=o,d=o+1,h=o+2;r=Xi(this,s,t,n,l,c,u,a,d,h),r&&(r.faceIndex=Math.floor(o/3),r.face.materialIndex=i.materialIndex,e.push(r))}}else{const i=Math.max(0,h.start),s=Math.min(a.count,h.start+h.count);for(let a=i,d=s;a<d;a+=3){const i=a,s=a+1,d=a+2;r=Xi(this,o,t,n,l,c,u,i,s,d),r&&(r.faceIndex=Math.floor(a/3),e.push(r))}}}}function Yi(t,e,n,r,i,o,s,a){let l;if(l=e.side===f?r.intersectTriangle(s,o,i,!0,a):r.intersectTriangle(i,o,s,e.side===h,a),null===l)return null;$i.copy(a),$i.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo($i);return c<n.near||c>n.far?null:{distance:c,point:$i.clone(),object:t}}function Xi(t,e,n,r,i,o,s,a,l,c){t.getVertexPosition(a,Di),t.getVertexPosition(l,Ii),t.getVertexPosition(c,Ni);const u=Yi(t,e,n,r,Di,Ii,Ni,Gi);if(u){i&&(Bi.fromBufferAttribute(i,a),Vi.fromBufferAttribute(i,l),zi.fromBufferAttribute(i,c),u.uv=si.getInterpolation(Gi,Di,Ii,Ni,Bi,Vi,zi,new bn)),o&&(Bi.fromBufferAttribute(o,a),Vi.fromBufferAttribute(o,l),zi.fromBufferAttribute(o,c),u.uv1=si.getInterpolation(Gi,Di,Ii,Ni,Bi,Vi,zi,new bn),u.uv2=u.uv1),s&&(ji.fromBufferAttribute(s,a),Hi.fromBufferAttribute(s,l),Wi.fromBufferAttribute(s,c),u.normal=si.getInterpolation(Gi,Di,Ii,Ni,ji,Hi,Wi,new qn),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const t={a:a,b:l,c:c,normal:new qn,materialIndex:0};si.getNormal(Di,Ii,Ni,t.normal),u.face=t}return u}class Zi extends ki{constructor(t=1,e=1,n=1,r=1,i=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};const s=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);const a=[],l=[],c=[],u=[];let d=0,h=0;function f(t,e,n,r,i,o,f,p,m,g,v){const y=o/m,b=f/g,_=o/2,w=f/2,x=p/2,S=m+1,E=g+1;let M=0,T=0;const C=new qn;for(let s=0;s<E;s++){const o=s*b-w;for(let a=0;a<S;a++){const d=a*y-_;C[t]=d*r,C[e]=o*i,C[n]=x,l.push(C.x,C.y,C.z),C[t]=0,C[e]=0,C[n]=p>0?1:-1,c.push(C.x,C.y,C.z),u.push(a/m),u.push(1-s/g),M+=1}}for(let s=0;s<g;s++)for(let t=0;t<m;t++){const e=d+t+S*s,n=d+t+S*(s+1),r=d+(t+1)+S*(s+1),i=d+(t+1)+S*s;a.push(e,n,i),a.push(n,r,i),T+=6}s.addGroup(h,T,v),h+=T,d+=M}f("z","y","x",-1,-1,n,e,t,o,i,0),f("z","y","x",1,-1,n,e,-t,o,i,1),f("x","z","y",1,1,t,n,e,r,o,2),f("x","z","y",1,-1,t,n,-e,r,o,3),f("x","y","z",1,-1,t,e,n,r,i,4),f("x","y","z",-1,-1,t,e,-n,r,i,5),this.setIndex(a),this.setAttribute("position",new wi(l,3)),this.setAttribute("normal",new wi(c,3)),this.setAttribute("uv",new wi(u,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Zi(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Ki(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function Ji(t){const e={};for(let n=0;n<t.length;n++){const r=Ki(t[n]);for(const t in r)e[t]=r[t]}return e}function Qi(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function to(t){return null===t.getRenderTarget()?t.outputColorSpace:Ce}const eo={clone:Ki,merge:Ji};var no="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",ro="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";class io extends li{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=no,this.fragmentShader=ro,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Ki(t.uniforms),this.uniformsGroups=Qi(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r],i=n.value;i&&i.isTexture?e.uniforms[r]={type:"t",value:i.toJSON(t).uuid}:i&&i.isColor?e.uniforms[r]={type:"c",value:i.getHex()}:i&&i.isVector2?e.uniforms[r]={type:"v2",value:i.toArray()}:i&&i.isVector3?e.uniforms[r]={type:"v3",value:i.toArray()}:i&&i.isVector4?e.uniforms[r]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?e.uniforms[r]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?e.uniforms[r]={type:"m4",value:i.toArray()}:e.uniforms[r]={value:i}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class oo extends Yr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Sr,this.projectionMatrix=new Sr,this.projectionMatrixInverse=new Sr,this.coordinateSystem=je}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class so extends oo{constructor(t=50,e=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*Ye*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*qe*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*Ye*Math.atan(Math.tan(.5*qe*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,r,i,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*qe*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const t=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/t,e-=o.offsetY*n/s,r*=o.width/t,n*=o.height/s}const s=this.filmOffset;0!==s&&(i+=t*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const ao=-90,lo=1;class co extends Yr{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null;const r=new so(ao,lo,t,e);r.layers=this.layers,this.add(r);const i=new so(ao,lo,t,e);i.layers=this.layers,this.add(i);const o=new so(ao,lo,t,e);o.layers=this.layers,this.add(o);const s=new so(ao,lo,t,e);s.layers=this.layers,this.add(s);const a=new so(ao,lo,t,e);a.layers=this.layers,this.add(a);const l=new so(ao,lo,t,e);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[n,r,i,o,s,a]=e;for(const l of e)this.remove(l);if(t===je)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),i.up.set(0,0,-1),i.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),a.up.set(0,1,0),a.lookAt(0,0,-1);else{if(t!==He)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),i.up.set(0,0,1),i.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),a.up.set(0,-1,0),a.lookAt(0,0,-1)}for(const l of e)this.add(l),l.updateMatrixWorld()}update(t,e){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[r,i,o,s,a,l]=this.children,c=t.getRenderTarget(),u=t.toneMapping,d=t.xr.enabled;t.toneMapping=Y,t.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,r),t.setRenderTarget(n,1),t.render(e,i),t.setRenderTarget(n,2),t.render(e,o),t.setRenderTarget(n,3),t.render(e,s),t.setRenderTarget(n,4),t.render(e,a),n.texture.generateMipmaps=h,t.setRenderTarget(n,5),t.render(e,l),t.setRenderTarget(c),t.toneMapping=u,t.xr.enabled=d,n.texture.needsPMREMUpdate=!0}}class uo extends zn{constructor(t,e,n,r,i,o,s,a,l,c){t=void 0!==t?t:[],e=void 0!==e?e:et,super(t,e,n,r,i,o,s,a,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class ho extends Hn{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},r=[n,n,n,n,n,n];void 0!==e.encoding&&(Mn("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),e.colorSpace=e.encoding===_e?Te:Me),this.texture=new uo(r,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:ht}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new Zi(5,5,5),i=new io({name:"CubemapFromEquirect",uniforms:Ki(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:f,blending:m});i.uniforms.tEquirect.value=e;const o=new qi(r,i),s=e.minFilter;e.minFilter===pt&&(e.minFilter=ht);const a=new co(1,10,this);return a.update(t,o),e.minFilter=s,o.geometry.dispose(),o.material.dispose(),this}clear(t,e,n,r){const i=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,n,r);t.setRenderTarget(i)}}const fo=new qn,po=new qn,mo=new _n;class go{constructor(t=new qn(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const r=fo.subVectors(n,e).cross(po.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const n=t.delta(fo),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const i=-(t.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:e.copy(t.start).addScaledVector(n,i)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||mo.getNormalMatrix(t),r=this.coplanarPoint(fo).applyMatrix4(t),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const vo=new pr,yo=new qn;class bo{constructor(t=new go,e=new go,n=new go,r=new go,i=new go,o=new go){this.planes=[t,e,n,r,i,o]}set(t,e,n,r,i,o){const s=this.planes;return s[0].copy(t),s[1].copy(e),s[2].copy(n),s[3].copy(r),s[4].copy(i),s[5].copy(o),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t,e=je){const n=this.planes,r=t.elements,i=r[0],o=r[1],s=r[2],a=r[3],l=r[4],c=r[5],u=r[6],d=r[7],h=r[8],f=r[9],p=r[10],m=r[11],g=r[12],v=r[13],y=r[14],b=r[15];if(n[0].setComponents(a-i,d-l,m-h,b-g).normalize(),n[1].setComponents(a+i,d+l,m+h,b+g).normalize(),n[2].setComponents(a+o,d+c,m+f,b+v).normalize(),n[3].setComponents(a-o,d-c,m-f,b-v).normalize(),n[4].setComponents(a-s,d-u,m-p,b-y).normalize(),e===je)n[5].setComponents(a+s,d+u,m+p,b+y).normalize();else{if(e!==He)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);n[5].setComponents(s,u,p,y).normalize()}return this}intersectsObject(t){if(void 0!==t.boundingSphere)null===t.boundingSphere&&t.computeBoundingSphere(),vo.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;null===e.boundingSphere&&e.computeBoundingSphere(),vo.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(vo)}intersectsSprite(t){return vo.center.set(0,0,0),vo.radius=.7071067811865476,vo.applyMatrix4(t.matrixWorld),this.intersectsSphere(vo)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let i=0;i<6;i++){const t=e[i].distanceToPoint(n);if(t<r)return!1}return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const r=e[n];if(yo.x=r.normal.x>0?t.max.x:t.min.x,yo.y=r.normal.y>0?t.max.y:t.min.y,yo.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(yo)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function _o(){let t=null,e=!1,n=null,r=null;function i(e,o){n(e,o),r=t.requestAnimationFrame(i)}return{start:function(){!0!==e&&null!==n&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function wo(t,e){const n=e.isWebGL2,r=new WeakMap;function i(e,r){const i=e.array,o=e.usage,s=t.createBuffer();let a;if(t.bindBuffer(r,s),t.bufferData(r,i,o),e.onUploadCallback(),i instanceof Float32Array)a=t.FLOAT;else if(i instanceof Uint16Array)if(e.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");a=t.HALF_FLOAT}else a=t.UNSIGNED_SHORT;else if(i instanceof Int16Array)a=t.SHORT;else if(i instanceof Uint32Array)a=t.UNSIGNED_INT;else if(i instanceof Int32Array)a=t.INT;else if(i instanceof Int8Array)a=t.BYTE;else if(i instanceof Uint8Array)a=t.UNSIGNED_BYTE;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);a=t.UNSIGNED_BYTE}return{buffer:s,type:a,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}function o(e,r,i){const o=r.array,s=r.updateRange;t.bindBuffer(i,e),-1===s.count?t.bufferSubData(i,0,o):(n?t.bufferSubData(i,s.offset*o.BYTES_PER_ELEMENT,o,s.offset,s.count):t.bufferSubData(i,s.offset*o.BYTES_PER_ELEMENT,o.subarray(s.offset,s.offset+s.count)),s.count=-1),r.onUploadCallback()}function s(t){return t.isInterleavedBufferAttribute&&(t=t.data),r.get(t)}function a(e){e.isInterleavedBufferAttribute&&(e=e.data);const n=r.get(e);n&&(t.deleteBuffer(n.buffer),r.delete(e))}function l(t,e){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);void 0===n?r.set(t,i(t,e)):n.version<t.version&&(o(n.buffer,t,e),n.version=t.version)}return{get:s,remove:a,update:l}}class xo extends ki{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const i=t/2,o=e/2,s=Math.floor(n),a=Math.floor(r),l=s+1,c=a+1,u=t/s,d=e/a,h=[],f=[],p=[],m=[];for(let g=0;g<c;g++){const t=g*d-o;for(let e=0;e<l;e++){const n=e*u-i;f.push(n,-t,0),p.push(0,0,1),m.push(e/s),m.push(1-g/a)}}for(let g=0;g<a;g++)for(let t=0;t<s;t++){const e=t+l*g,n=t+l*(g+1),r=t+1+l*(g+1),i=t+1+l*g;h.push(e,n,i),h.push(n,r,i)}this.setIndex(h),this.setAttribute("position",new wi(f,3)),this.setAttribute("normal",new wi(p,3)),this.setAttribute("uv",new wi(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new xo(t.width,t.height,t.widthSegments,t.heightSegments)}}var So="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",Eo="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",Mo="#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",To="#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",Co="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",Ao="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",ko="vec3 transformed = vec3( position );",Oo="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",Ro="float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",Po="#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",Lo="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",Do="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",Io="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",No="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",Uo="#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",Fo="#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",Bo="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",Vo="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",zo="#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",jo="#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",Ho="#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",Wo="vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",Go="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",$o="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",qo="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",Yo="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",Xo="gl_FragColor = linearToOutputTexel( gl_FragColor );",Zo="vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",Ko="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",Jo="#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",Qo="#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",ts="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",es="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",ns="#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",rs="#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",is="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",os="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",ss="#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",as="#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",ls="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",cs="LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",us="varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",ds="uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",hs="#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",fs="ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",ps="varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",ms="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",gs="varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",vs="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tanisotropyV /= material.anisotropy;\n\tmaterial.anisotropy = saturate( material.anisotropy );\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;\n#endif",ys="struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",bs="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",_s="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",ws="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",xs="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",Ss="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",Es="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",Ms="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",Ts="#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, vMapUv );\n#endif",Cs="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",As="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",ks="#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",Os="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",Rs="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",Ps="#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",Ls="#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",Ds="#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",Is="#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",Ns="float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 geometryNormal = normal;",Us="#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",Fs="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",Bs="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",Vs="#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",zs="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",js="#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",Hs="#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",Ws="#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",Gs="#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",$s="#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",qs="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",Ys="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",Xs="vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",Zs="#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",Ks="#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",Js="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",Qs="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",ta="#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",ea="#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",na="#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",ra="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",ia="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",oa="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",sa="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",aa="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",la="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",ca="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",ua="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",da="#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",ha="#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",fa="#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",pa="#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",ma="#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",ga="#ifdef USE_UV\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",va="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif";const ya="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",ba="uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",_a="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",wa="#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",xa="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",Sa="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",Ea="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",Ma="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",Ta="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",Ca="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",Aa="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",ka="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",Oa="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",Ra="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",Pa="#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",La="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Da="#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Ia="#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Na="#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",Ua="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Fa="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",Ba="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",Va="#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",za="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",ja="#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",Ha="#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Wa="#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Ga="#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",$a="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",qa="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",Ya="#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Xa="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",Za="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",Ka="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",Ja={alphamap_fragment:So,alphamap_pars_fragment:Eo,alphatest_fragment:Mo,alphatest_pars_fragment:To,aomap_fragment:Co,aomap_pars_fragment:Ao,begin_vertex:ko,beginnormal_vertex:Oo,bsdfs:Ro,iridescence_fragment:Po,bumpmap_pars_fragment:Lo,clipping_planes_fragment:Do,clipping_planes_pars_fragment:Io,clipping_planes_pars_vertex:No,clipping_planes_vertex:Uo,color_fragment:Fo,color_pars_fragment:Bo,color_pars_vertex:Vo,color_vertex:zo,common:jo,cube_uv_reflection_fragment:Ho,defaultnormal_vertex:Wo,displacementmap_pars_vertex:Go,displacementmap_vertex:$o,emissivemap_fragment:qo,emissivemap_pars_fragment:Yo,encodings_fragment:Xo,encodings_pars_fragment:Zo,envmap_fragment:Ko,envmap_common_pars_fragment:Jo,envmap_pars_fragment:Qo,envmap_pars_vertex:ts,envmap_physical_pars_fragment:hs,envmap_vertex:es,fog_vertex:ns,fog_pars_vertex:rs,fog_fragment:is,fog_pars_fragment:os,gradientmap_pars_fragment:ss,lightmap_fragment:as,lightmap_pars_fragment:ls,lights_lambert_fragment:cs,lights_lambert_pars_fragment:us,lights_pars_begin:ds,lights_toon_fragment:fs,lights_toon_pars_fragment:ps,lights_phong_fragment:ms,lights_phong_pars_fragment:gs,lights_physical_fragment:vs,lights_physical_pars_fragment:ys,lights_fragment_begin:bs,lights_fragment_maps:_s,lights_fragment_end:ws,logdepthbuf_fragment:xs,logdepthbuf_pars_fragment:Ss,logdepthbuf_pars_vertex:Es,logdepthbuf_vertex:Ms,map_fragment:Ts,map_pars_fragment:Cs,map_particle_fragment:As,map_particle_pars_fragment:ks,metalnessmap_fragment:Os,metalnessmap_pars_fragment:Rs,morphcolor_vertex:Ps,morphnormal_vertex:Ls,morphtarget_pars_vertex:Ds,morphtarget_vertex:Is,normal_fragment_begin:Ns,normal_fragment_maps:Us,normal_pars_fragment:Fs,normal_pars_vertex:Bs,normal_vertex:Vs,normalmap_pars_fragment:zs,clearcoat_normal_fragment_begin:js,clearcoat_normal_fragment_maps:Hs,clearcoat_pars_fragment:Ws,iridescence_pars_fragment:Gs,output_fragment:$s,packing:qs,premultiplied_alpha_fragment:Ys,project_vertex:Xs,dithering_fragment:Zs,dithering_pars_fragment:Ks,roughnessmap_fragment:Js,roughnessmap_pars_fragment:Qs,shadowmap_pars_fragment:ta,shadowmap_pars_vertex:ea,shadowmap_vertex:na,shadowmask_pars_fragment:ra,skinbase_vertex:ia,skinning_pars_vertex:oa,skinning_vertex:sa,skinnormal_vertex:aa,specularmap_fragment:la,specularmap_pars_fragment:ca,tonemapping_fragment:ua,tonemapping_pars_fragment:da,transmission_fragment:ha,transmission_pars_fragment:fa,uv_pars_fragment:pa,uv_pars_vertex:ma,uv_vertex:ga,worldpos_vertex:va,background_vert:ya,background_frag:ba,backgroundCube_vert:_a,backgroundCube_frag:wa,cube_vert:xa,cube_frag:Sa,depth_vert:Ea,depth_frag:Ma,distanceRGBA_vert:Ta,distanceRGBA_frag:Ca,equirect_vert:Aa,equirect_frag:ka,linedashed_vert:Oa,linedashed_frag:Ra,meshbasic_vert:Pa,meshbasic_frag:La,meshlambert_vert:Da,meshlambert_frag:Ia,meshmatcap_vert:Na,meshmatcap_frag:Ua,meshnormal_vert:Fa,meshnormal_frag:Ba,meshphong_vert:Va,meshphong_frag:za,meshphysical_vert:ja,meshphysical_frag:Ha,meshtoon_vert:Wa,meshtoon_frag:Ga,points_vert:$a,points_frag:qa,shadow_vert:Ya,shadow_frag:Xa,sprite_vert:Za,sprite_frag:Ka},Qa={common:{diffuse:{value:new fi(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new _n},alphaMap:{value:null},alphaMapTransform:{value:new _n},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new _n}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new _n}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new _n}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new _n},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new _n},normalScale:{value:new bn(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new _n},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new _n}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new _n}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new _n}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new fi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new fi(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new _n},alphaTest:{value:0},uvTransform:{value:new _n}},sprite:{diffuse:{value:new fi(16777215)},opacity:{value:1},center:{value:new bn(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new _n},alphaMap:{value:null},alphaMapTransform:{value:new _n},alphaTest:{value:0}}},tl={basic:{uniforms:Ji([Qa.common,Qa.specularmap,Qa.envmap,Qa.aomap,Qa.lightmap,Qa.fog]),vertexShader:Ja.meshbasic_vert,fragmentShader:Ja.meshbasic_frag},lambert:{uniforms:Ji([Qa.common,Qa.specularmap,Qa.envmap,Qa.aomap,Qa.lightmap,Qa.emissivemap,Qa.bumpmap,Qa.normalmap,Qa.displacementmap,Qa.fog,Qa.lights,{emissive:{value:new fi(0)}}]),vertexShader:Ja.meshlambert_vert,fragmentShader:Ja.meshlambert_frag},phong:{uniforms:Ji([Qa.common,Qa.specularmap,Qa.envmap,Qa.aomap,Qa.lightmap,Qa.emissivemap,Qa.bumpmap,Qa.normalmap,Qa.displacementmap,Qa.fog,Qa.lights,{emissive:{value:new fi(0)},specular:{value:new fi(1118481)},shininess:{value:30}}]),vertexShader:Ja.meshphong_vert,fragmentShader:Ja.meshphong_frag},standard:{uniforms:Ji([Qa.common,Qa.envmap,Qa.aomap,Qa.lightmap,Qa.emissivemap,Qa.bumpmap,Qa.normalmap,Qa.displacementmap,Qa.roughnessmap,Qa.metalnessmap,Qa.fog,Qa.lights,{emissive:{value:new fi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ja.meshphysical_vert,fragmentShader:Ja.meshphysical_frag},toon:{uniforms:Ji([Qa.common,Qa.aomap,Qa.lightmap,Qa.emissivemap,Qa.bumpmap,Qa.normalmap,Qa.displacementmap,Qa.gradientmap,Qa.fog,Qa.lights,{emissive:{value:new fi(0)}}]),vertexShader:Ja.meshtoon_vert,fragmentShader:Ja.meshtoon_frag},matcap:{uniforms:Ji([Qa.common,Qa.bumpmap,Qa.normalmap,Qa.displacementmap,Qa.fog,{matcap:{value:null}}]),vertexShader:Ja.meshmatcap_vert,fragmentShader:Ja.meshmatcap_frag},points:{uniforms:Ji([Qa.points,Qa.fog]),vertexShader:Ja.points_vert,fragmentShader:Ja.points_frag},dashed:{uniforms:Ji([Qa.common,Qa.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ja.linedashed_vert,fragmentShader:Ja.linedashed_frag},depth:{uniforms:Ji([Qa.common,Qa.displacementmap]),vertexShader:Ja.depth_vert,fragmentShader:Ja.depth_frag},normal:{uniforms:Ji([Qa.common,Qa.bumpmap,Qa.normalmap,Qa.displacementmap,{opacity:{value:1}}]),vertexShader:Ja.meshnormal_vert,fragmentShader:Ja.meshnormal_frag},sprite:{uniforms:Ji([Qa.sprite,Qa.fog]),vertexShader:Ja.sprite_vert,fragmentShader:Ja.sprite_frag},background:{uniforms:{uvTransform:{value:new _n},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ja.background_vert,fragmentShader:Ja.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Ja.backgroundCube_vert,fragmentShader:Ja.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ja.cube_vert,fragmentShader:Ja.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ja.equirect_vert,fragmentShader:Ja.equirect_frag},distanceRGBA:{uniforms:Ji([Qa.common,Qa.displacementmap,{referencePosition:{value:new qn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ja.distanceRGBA_vert,fragmentShader:Ja.distanceRGBA_frag},shadow:{uniforms:Ji([Qa.lights,Qa.fog,{color:{value:new fi(0)},opacity:{value:1}}]),vertexShader:Ja.shadow_vert,fragmentShader:Ja.shadow_frag}};tl.physical={uniforms:Ji([tl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new _n},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new _n},clearcoatNormalScale:{value:new bn(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new _n},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new _n},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new _n},sheen:{value:0},sheenColor:{value:new fi(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new _n},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new _n},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new _n},transmissionSamplerSize:{value:new bn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new _n},attenuationDistance:{value:0},attenuationColor:{value:new fi(0)},specularColor:{value:new fi(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new _n},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new _n},anisotropyVector:{value:new bn},anisotropyMap:{value:null},anisotropyMapTransform:{value:new _n}}]),vertexShader:Ja.meshphysical_vert,fragmentShader:Ja.meshphysical_frag};const el={r:0,b:0,g:0};function nl(t,e,n,r,i,o,s){const a=new fi(0);let l,c,u=!0===o?0:1,d=null,p=0,m=null;function g(o,g){let y=!1,b=!0===g.isScene?g.background:null;if(b&&b.isTexture){const t=g.backgroundBlurriness>0;b=(t?n:e).get(b)}null===b?v(a,u):b&&b.isColor&&(v(b,1),y=!0);const _=t.xr,w=_.getEnvironmentBlendMode();switch(w){case"opaque":y=!0;break;case"additive":r.buffers.color.setClear(0,0,0,1,s),y=!0;break;case"alpha-blend":r.buffers.color.setClear(0,0,0,0,s),y=!0;break}(t.autoClear||y)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),b&&(b.isCubeTexture||b.mapping===ot)?(void 0===c&&(c=new qi(new Zi(1,1,1),new io({name:"BackgroundCubeMaterial",uniforms:Ki(tl.backgroundCube.uniforms),vertexShader:tl.backgroundCube.vertexShader,fragmentShader:tl.backgroundCube.fragmentShader,side:f,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=b,c.material.uniforms.flipEnvMap.value=b.isCubeTexture&&!1===b.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,c.material.toneMapped=b.colorSpace!==Te,d===b&&p===b.version&&m===t.toneMapping||(c.material.needsUpdate=!0,d=b,p=b.version,m=t.toneMapping),c.layers.enableAll(),o.unshift(c,c.geometry,c.material,0,0,null)):b&&b.isTexture&&(void 0===l&&(l=new qi(new xo(2,2),new io({name:"BackgroundMaterial",uniforms:Ki(tl.background.uniforms),vertexShader:tl.background.vertexShader,fragmentShader:tl.background.fragmentShader,side:h,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=b,l.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,l.material.toneMapped=b.colorSpace!==Te,!0===b.matrixAutoUpdate&&b.updateMatrix(),l.material.uniforms.uvTransform.value.copy(b.matrix),d===b&&p===b.version&&m===t.toneMapping||(l.material.needsUpdate=!0,d=b,p=b.version,m=t.toneMapping),l.layers.enableAll(),o.unshift(l,l.geometry,l.material,0,0,null))}function v(e,n){e.getRGB(el,to(t)),r.buffers.color.setClear(el.r,el.g,el.b,n,s)}return{getClearColor:function(){return a},setClearColor:function(t,e=1){a.set(t),u=e,v(a,u)},getClearAlpha:function(){return u},setClearAlpha:function(t){u=t,v(a,u)},render:g}}function rl(t,e,n,r){const i=t.getParameter(t.MAX_VERTEX_ATTRIBS),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),s=r.isWebGL2||null!==o,a={},l=g(null);let c=l,u=!1;function d(e,r,i,o,a){let l=!1;if(s){const t=m(o,i,r);c!==t&&(c=t,f(c.object)),l=v(e,o,i,a),l&&y(e,o,i,a)}else{const t=!0===r.wireframe;c.geometry===o.id&&c.program===i.id&&c.wireframe===t||(c.geometry=o.id,c.program=i.id,c.wireframe=t,l=!0)}null!==a&&n.update(a,t.ELEMENT_ARRAY_BUFFER),(l||u)&&(u=!1,E(e,r,i,o),null!==a&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(a).buffer))}function h(){return r.isWebGL2?t.createVertexArray():o.createVertexArrayOES()}function f(e){return r.isWebGL2?t.bindVertexArray(e):o.bindVertexArrayOES(e)}function p(e){return r.isWebGL2?t.deleteVertexArray(e):o.deleteVertexArrayOES(e)}function m(t,e,n){const r=!0===n.wireframe;let i=a[t.id];void 0===i&&(i={},a[t.id]=i);let o=i[e.id];void 0===o&&(o={},i[e.id]=o);let s=o[r];return void 0===s&&(s=g(h()),o[r]=s),s}function g(t){const e=[],n=[],r=[];for(let o=0;o<i;o++)e[o]=0,n[o]=0,r[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:r,object:t,attributes:{},index:null}}function v(t,e,n,r){const i=c.attributes,o=e.attributes;let s=0;const a=n.getAttributes();for(const l in a){const e=a[l];if(e.location>=0){const e=i[l];let n=o[l];if(void 0===n&&("instanceMatrix"===l&&t.instanceMatrix&&(n=t.instanceMatrix),"instanceColor"===l&&t.instanceColor&&(n=t.instanceColor)),void 0===e)return!0;if(e.attribute!==n)return!0;if(n&&e.data!==n.data)return!0;s++}}return c.attributesNum!==s||c.index!==r}function y(t,e,n,r){const i={},o=e.attributes;let s=0;const a=n.getAttributes();for(const l in a){const e=a[l];if(e.location>=0){let e=o[l];void 0===e&&("instanceMatrix"===l&&t.instanceMatrix&&(e=t.instanceMatrix),"instanceColor"===l&&t.instanceColor&&(e=t.instanceColor));const n={};n.attribute=e,e&&e.data&&(n.data=e.data),i[l]=n,s++}}c.attributes=i,c.attributesNum=s,c.index=r}function b(){const t=c.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function _(t){w(t,0)}function w(n,i){const o=c.newAttributes,s=c.enabledAttributes,a=c.attributeDivisors;if(o[n]=1,0===s[n]&&(t.enableVertexAttribArray(n),s[n]=1),a[n]!==i){const o=r.isWebGL2?t:e.get("ANGLE_instanced_arrays");o[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),a[n]=i}}function x(){const e=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==e[r]&&(t.disableVertexAttribArray(r),n[r]=0)}function S(e,n,r,i,o,s,a){!0===a?t.vertexAttribIPointer(e,n,r,o,s):t.vertexAttribPointer(e,n,r,i,o,s)}function E(i,o,s,a){if(!1===r.isWebGL2&&(i.isInstancedMesh||a.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;b();const l=a.attributes,c=s.getAttributes(),u=o.defaultAttributeValues;for(const e in c){const o=c[e];if(o.location>=0){let s=l[e];if(void 0===s&&("instanceMatrix"===e&&i.instanceMatrix&&(s=i.instanceMatrix),"instanceColor"===e&&i.instanceColor&&(s=i.instanceColor)),void 0!==s){const e=s.normalized,l=s.itemSize,c=n.get(s);if(void 0===c)continue;const u=c.buffer,d=c.type,h=c.bytesPerElement,f=!0===r.isWebGL2&&(d===t.INT||d===t.UNSIGNED_INT||s.gpuType===bt);if(s.isInterleavedBufferAttribute){const n=s.data,r=n.stride,c=s.offset;if(n.isInstancedInterleavedBuffer){for(let t=0;t<o.locationSize;t++)w(o.location+t,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let t=0;t<o.locationSize;t++)_(o.location+t);t.bindBuffer(t.ARRAY_BUFFER,u);for(let t=0;t<o.locationSize;t++)S(o.location+t,l/o.locationSize,d,e,r*h,(c+l/o.locationSize*t)*h,f)}else{if(s.isInstancedBufferAttribute){for(let t=0;t<o.locationSize;t++)w(o.location+t,s.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let t=0;t<o.locationSize;t++)_(o.location+t);t.bindBuffer(t.ARRAY_BUFFER,u);for(let t=0;t<o.locationSize;t++)S(o.location+t,l/o.locationSize,d,e,l*h,l/o.locationSize*t*h,f)}}else if(void 0!==u){const n=u[e];if(void 0!==n)switch(n.length){case 2:t.vertexAttrib2fv(o.location,n);break;case 3:t.vertexAttrib3fv(o.location,n);break;case 4:t.vertexAttrib4fv(o.location,n);break;default:t.vertexAttrib1fv(o.location,n)}}}}x()}function M(){A();for(const t in a){const e=a[t];for(const t in e){const n=e[t];for(const t in n)p(n[t].object),delete n[t];delete e[t]}delete a[t]}}function T(t){if(void 0===a[t.id])return;const e=a[t.id];for(const n in e){const t=e[n];for(const e in t)p(t[e].object),delete t[e];delete e[n]}delete a[t.id]}function C(t){for(const e in a){const n=a[e];if(void 0===n[t.id])continue;const r=n[t.id];for(const t in r)p(r[t].object),delete r[t];delete n[t.id]}}function A(){k(),u=!0,c!==l&&(c=l,f(c.object))}function k(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:A,resetDefaultState:k,dispose:M,releaseStatesOfGeometry:T,releaseStatesOfProgram:C,initAttributes:b,enableAttribute:_,disableUnusedAttributes:x}}function il(t,e,n,r){const i=r.isWebGL2;let o;function s(t){o=t}function a(e,r){t.drawArrays(o,e,r),n.update(r,o,1)}function l(r,s,a){if(0===a)return;let l,c;if(i)l=t,c="drawArraysInstanced";else if(l=e.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](o,r,s,a),n.update(s,o,a)}this.setMode=s,this.render=a,this.renderInstances=l}function ol(t,e,n){let r;function i(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const n=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const s="undefined"!==typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===t.constructor.name;let a=void 0!==n.precision?n.precision:"highp";const l=o(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=s||e.has("WEBGL_draw_buffers"),u=!0===n.logarithmicDepthBuffer,d=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f=t.getParameter(t.MAX_TEXTURE_SIZE),p=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),m=t.getParameter(t.MAX_VERTEX_ATTRIBS),g=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),v=t.getParameter(t.MAX_VARYING_VECTORS),y=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),b=h>0,_=s||e.has("OES_texture_float"),w=b&&_,x=s?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:s,drawBuffers:c,getMaxAnisotropy:i,getMaxPrecision:o,precision:a,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:y,vertexTextures:b,floatFragmentTextures:_,floatVertexTextures:w,maxSamples:x}}function sl(t){const e=this;let n=null,r=0,i=!1,o=!1;const s=new go,a=new _n,l={value:null,needsUpdate:!1};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(t,n,r,i){const o=null!==t?t.length:0;let c=null;if(0!==o){if(c=l.value,!0!==i||null===c){const e=r+4*o,i=n.matrixWorldInverse;a.getNormalMatrix(i),(null===c||c.length<e)&&(c=new Float32Array(e));for(let n=0,l=r;n!==o;++n,l+=4)s.copy(t[n]).applyMatrix4(i,a),s.normal.toArray(c,l),c[l+3]=s.constant}l.value=c,l.needsUpdate=!0}return e.numPlanes=o,e.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e){const n=0!==t.length||e||0!==r||i;return i=e,r=t.length,n},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(t,e){n=u(t,e,0)},this.setState=function(e,s,a){const d=e.clippingPlanes,h=e.clipIntersection,f=e.clipShadows,p=t.get(e);if(!i||null===d||0===d.length||o&&!f)o?u(null):c();else{const t=o?0:r,e=4*t;let i=p.clippingState||null;l.value=i,i=u(d,s,e,a);for(let r=0;r!==e;++r)i[r]=n[r];p.clippingState=i,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=t}}}function al(t){let e=new WeakMap;function n(t,e){return e===rt?t.mapping=et:e===it&&(t.mapping=nt),t}function r(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){const o=r.mapping;if(o===rt||o===it){if(e.has(r)){const t=e.get(r).texture;return n(t,r.mapping)}{const o=r.image;if(o&&o.height>0){const s=new ho(o.height/2);return s.fromEquirectangularTexture(t,r),e.set(r,s),r.addEventListener("dispose",i),n(s.texture,r.mapping)}return null}}}return r}function i(t){const n=t.target;n.removeEventListener("dispose",i);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}function o(){e=new WeakMap}return{get:r,dispose:o}}class ll extends oo{constructor(t=-1,e=1,n=1,r=-1,i=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-t,o=n+t,s=r+e,a=r-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=t*this.view.offsetX,o=i+t*this.view.width,s-=e*this.view.offsetY,a=s-e*this.view.height}this.projectionMatrix.makeOrthographic(i,o,s,a,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}const cl=4,ul=[.125,.215,.35,.446,.526,.582],dl=20,hl=new ll,fl=new fi;let pl=null;const ml=(1+Math.sqrt(5))/2,gl=1/ml,vl=[new qn(1,1,1),new qn(-1,1,1),new qn(1,1,-1),new qn(-1,1,-1),new qn(0,ml,gl),new qn(0,ml,-gl),new qn(gl,0,ml),new qn(-gl,0,ml),new qn(ml,gl,0),new qn(-ml,gl,0)];class yl{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){pl=this._renderer.getRenderTarget(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(t,n,r,i),e>0&&this._blur(i,0,0,e),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=El(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Sl(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(pl),t.scissorTest=!1,wl(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===et||t.mapping===nt?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),pl=this._renderer.getRenderTarget();const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:ht,minFilter:ht,generateMipmaps:!1,type:xt,format:Ct,colorSpace:Ce,depthBuffer:!1},r=_l(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=_l(t,e,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=bl(r)),this._blurMaterial=xl(r,t,e)}return r}_compileMaterial(t){const e=new qi(this._lodPlanes[0],t);this._renderer.compile(e,hl)}_sceneToCubeUV(t,e,n,r){const i=90,o=1,s=new so(i,o,e,n),a=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],c=this._renderer,u=c.autoClear,d=c.toneMapping;c.getClearColor(fl),c.toneMapping=Y,c.autoClear=!1;const h=new mi({name:"PMREM.Background",side:f,depthWrite:!1,depthTest:!1}),p=new qi(new Zi,h);let m=!1;const g=t.background;g?g.isColor&&(h.color.copy(g),t.background=null,m=!0):(h.color.copy(fl),m=!0);for(let f=0;f<6;f++){const e=f%3;0===e?(s.up.set(0,a[f],0),s.lookAt(l[f],0,0)):1===e?(s.up.set(0,0,a[f]),s.lookAt(0,l[f],0)):(s.up.set(0,a[f],0),s.lookAt(0,0,l[f]));const n=this._cubeSize;wl(r,e*n,f>2?n:0,n,n),c.setRenderTarget(r),m&&c.render(p,s),c.render(t,s)}p.geometry.dispose(),p.material.dispose(),c.toneMapping=d,c.autoClear=u,t.background=g}_textureToCubeUV(t,e){const n=this._renderer,r=t.mapping===et||t.mapping===nt;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=El()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Sl());const i=r?this._cubemapMaterial:this._equirectMaterial,o=new qi(this._lodPlanes[0],i),s=i.uniforms;s["envMap"].value=t;const a=this._cubeSize;wl(e,0,0,3*a,2*a),n.setRenderTarget(e),n.render(o,hl)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const e=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),n=vl[(r-1)%vl.length];this._blur(t,r-1,r,e,n)}e.autoClear=n}_blur(t,e,n,r,i){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,r,"latitudinal",i),this._halfBlur(o,t,n,n,r,"longitudinal",i)}_halfBlur(t,e,n,r,i,o,s){const a=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,u=new qi(this._lodPlanes[r],l),d=l.uniforms,h=this._sizeLods[n]-1,f=isFinite(i)?Math.PI/(2*h):2*Math.PI/(2*dl-1),p=i/f,m=isFinite(i)?1+Math.floor(c*p):dl;m>dl&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${dl}`);const g=[];let v=0;for(let x=0;x<dl;++x){const t=x/p,e=Math.exp(-t*t/2);g.push(e),0===x?v+=e:x<m&&(v+=2*e)}for(let x=0;x<g.length;x++)g[x]=g[x]/v;d["envMap"].value=t.texture,d["samples"].value=m,d["weights"].value=g,d["latitudinal"].value="latitudinal"===o,s&&(d["poleAxis"].value=s);const{_lodMax:y}=this;d["dTheta"].value=f,d["mipInt"].value=y-n;const b=this._sizeLods[r],_=3*b*(r>y-cl?r-y+cl:0),w=4*(this._cubeSize-b);wl(e,_,w,3*b,2*b),a.setRenderTarget(e),a.render(u,hl)}}function bl(t){const e=[],n=[],r=[];let i=t;const o=t-cl+1+ul.length;for(let s=0;s<o;s++){const o=Math.pow(2,i);n.push(o);let a=1/o;s>t-cl?a=ul[s-t+cl-1]:0===s&&(a=0),r.push(a);const l=1/(o-2),c=-l,u=1+l,d=[c,c,u,c,u,u,c,c,u,u,c,u],h=6,f=6,p=3,m=2,g=1,v=new Float32Array(p*f*h),y=new Float32Array(m*f*h),b=new Float32Array(g*f*h);for(let t=0;t<h;t++){const e=t%3*2/3-1,n=t>2?0:-1,r=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];v.set(r,p*f*t),y.set(d,m*f*t);const i=[t,t,t,t,t,t];b.set(i,g*f*t)}const _=new ki;_.setAttribute("position",new yi(v,p)),_.setAttribute("uv",new yi(y,m)),_.setAttribute("faceIndex",new yi(b,g)),e.push(_),i>cl&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function _l(t,e,n){const r=new Hn(t,e,n);return r.texture.mapping=ot,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function wl(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function xl(t,e,n){const r=new Float32Array(dl),i=new qn(0,1,0),o=new io({name:"SphericalGaussianBlur",defines:{n:dl,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Ml(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:m,depthTest:!1,depthWrite:!1});return o}function Sl(){return new io({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Ml(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:m,depthTest:!1,depthWrite:!1})}function El(){return new io({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Ml(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:m,depthTest:!1,depthWrite:!1})}function Ml(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Tl(t){let e=new WeakMap,n=null;function r(r){if(r&&r.isTexture){const s=r.mapping,a=s===rt||s===it,l=s===et||s===nt;if(a||l){if(r.isRenderTargetTexture&&!0===r.needsPMREMUpdate){r.needsPMREMUpdate=!1;let i=e.get(r);return null===n&&(n=new yl(t)),i=a?n.fromEquirectangular(r,i):n.fromCubemap(r,i),e.set(r,i),i.texture}if(e.has(r))return e.get(r).texture;{const s=r.image;if(a&&s&&s.height>0||l&&s&&i(s)){null===n&&(n=new yl(t));const i=a?n.fromEquirectangular(r):n.fromCubemap(r);return e.set(r,i),r.addEventListener("dispose",o),i.texture}return null}}}return r}function i(t){let e=0;const n=6;for(let r=0;r<n;r++)void 0!==t[r]&&e++;return e===n}function o(t){const n=t.target;n.removeEventListener("dispose",o);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}function s(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}return{get:r,dispose:s}}function Cl(t){const e={};function n(n){if(void 0!==e[n])return e[n];let r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return e[n]=r,r}return{has:function(t){return null!==n(t)},init:function(t){t.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(t){const e=n(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function Al(t,e,n,r){const i={},o=new WeakMap;function s(t){const a=t.target;null!==a.index&&e.remove(a.index);for(const n in a.attributes)e.remove(a.attributes[n]);for(const n in a.morphAttributes){const t=a.morphAttributes[n];for(let n=0,r=t.length;n<r;n++)e.remove(t[n])}a.removeEventListener("dispose",s),delete i[a.id];const l=o.get(a);l&&(e.remove(l),o.delete(a)),r.releaseStatesOfGeometry(a),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,n.memory.geometries--}function a(t,e){return!0===i[e.id]||(e.addEventListener("dispose",s),i[e.id]=!0,n.memory.geometries++),e}function l(n){const r=n.attributes;for(const o in r)e.update(r[o],t.ARRAY_BUFFER);const i=n.morphAttributes;for(const o in i){const n=i[o];for(let r=0,i=n.length;r<i;r++)e.update(n[r],t.ARRAY_BUFFER)}}function c(t){const n=[],r=t.index,i=t.attributes.position;let s=0;if(null!==r){const t=r.array;s=r.version;for(let e=0,r=t.length;e<r;e+=3){const r=t[e+0],i=t[e+1],o=t[e+2];n.push(r,i,i,o,o,r)}}else{const t=i.array;s=i.version;for(let e=0,r=t.length/3-1;e<r;e+=3){const t=e+0,r=e+1,i=e+2;n.push(t,r,r,i,i,t)}}const a=new(xn(n)?_i:bi)(n,1);a.version=s;const l=o.get(t);l&&e.remove(l),o.set(t,a)}function u(t){const e=o.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&c(t)}else c(t);return o.get(t)}return{get:a,update:l,getWireframeAttribute:u}}function kl(t,e,n,r){const i=r.isWebGL2;let o,s,a;function l(t){o=t}function c(t){s=t.type,a=t.bytesPerElement}function u(e,r){t.drawElements(o,r,s,e*a),n.update(r,o,1)}function d(r,l,c){if(0===c)return;let u,d;if(i)u=t,d="drawElementsInstanced";else if(u=e.get("ANGLE_instanced_arrays"),d="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[d](o,l,s,r*a,c),n.update(l,o,c)}this.setMode=l,this.setIndex=c,this.render=u,this.renderInstances=d}function Ol(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(e,r,i){switch(n.calls++,r){case t.TRIANGLES:n.triangles+=i*(e/3);break;case t.LINES:n.lines+=i*(e/2);break;case t.LINE_STRIP:n.lines+=i*(e-1);break;case t.LINE_LOOP:n.lines+=i*e;break;case t.POINTS:n.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function Rl(t,e){return t[0]-e[0]}function Pl(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Ll(t,e,n){const r={},i=new Float32Array(8),o=new WeakMap,s=new jn,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(l,c,u){const d=l.morphTargetInfluences;if(!0===e.isWebGL2){const h=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,f=void 0!==h?h.length:0;let p=o.get(c);if(void 0===p||p.count!==f){void 0!==p&&p.texture.dispose();const v=void 0!==c.morphAttributes.position,y=void 0!==c.morphAttributes.normal,b=void 0!==c.morphAttributes.color,_=c.morphAttributes.position||[],w=c.morphAttributes.normal||[],x=c.morphAttributes.color||[];let S=0;!0===v&&(S=1),!0===y&&(S=2),!0===b&&(S=3);let E=c.attributes.position.count*S,M=1;E>e.maxTextureSize&&(M=Math.ceil(E/e.maxTextureSize),E=e.maxTextureSize);const T=new Float32Array(E*M*4*f),C=new Wn(T,E,M,f);C.type=wt,C.needsUpdate=!0;const A=4*S;for(let O=0;O<f;O++){const R=_[O],P=w[O],L=x[O],D=E*M*4*O;for(let I=0;I<R.count;I++){const N=I*A;!0===v&&(s.fromBufferAttribute(R,I),T[D+N+0]=s.x,T[D+N+1]=s.y,T[D+N+2]=s.z,T[D+N+3]=0),!0===y&&(s.fromBufferAttribute(P,I),T[D+N+4]=s.x,T[D+N+5]=s.y,T[D+N+6]=s.z,T[D+N+7]=0),!0===b&&(s.fromBufferAttribute(L,I),T[D+N+8]=s.x,T[D+N+9]=s.y,T[D+N+10]=s.z,T[D+N+11]=4===L.itemSize?s.w:1)}}function k(){C.dispose(),o.delete(c),c.removeEventListener("dispose",k)}p={count:f,texture:C,size:new bn(E,M)},o.set(c,p),c.addEventListener("dispose",k)}let m=0;for(let U=0;U<d.length;U++)m+=d[U];const g=c.morphTargetsRelative?1:1-m;u.getUniforms().setValue(t,"morphTargetBaseInfluence",g),u.getUniforms().setValue(t,"morphTargetInfluences",d),u.getUniforms().setValue(t,"morphTargetsTexture",p.texture,n),u.getUniforms().setValue(t,"morphTargetsTextureSize",p.size)}else{const F=void 0===d?0:d.length;let B=r[c.id];if(void 0===B||B.length!==F){B=[];for(let W=0;W<F;W++)B[W]=[W,0];r[c.id]=B}for(let G=0;G<F;G++){const $=B[G];$[0]=G,$[1]=d[G]}B.sort(Pl);for(let q=0;q<8;q++)q<F&&B[q][1]?(a[q][0]=B[q][0],a[q][1]=B[q][1]):(a[q][0]=Number.MAX_SAFE_INTEGER,a[q][1]=0);a.sort(Rl);const V=c.morphAttributes.position,z=c.morphAttributes.normal;let j=0;for(let Y=0;Y<8;Y++){const X=a[Y],Z=X[0],K=X[1];Z!==Number.MAX_SAFE_INTEGER&&K?(V&&c.getAttribute("morphTarget"+Y)!==V[Z]&&c.setAttribute("morphTarget"+Y,V[Z]),z&&c.getAttribute("morphNormal"+Y)!==z[Z]&&c.setAttribute("morphNormal"+Y,z[Z]),i[Y]=K,j+=K):(V&&!0===c.hasAttribute("morphTarget"+Y)&&c.deleteAttribute("morphTarget"+Y),z&&!0===c.hasAttribute("morphNormal"+Y)&&c.deleteAttribute("morphNormal"+Y),i[Y]=0)}const H=c.morphTargetsRelative?1:1-j;u.getUniforms().setValue(t,"morphTargetBaseInfluence",H),u.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:l}}function Dl(t,e,n,r){let i=new WeakMap;function o(o){const s=r.render.frame,l=o.geometry,c=e.get(o,l);return i.get(c)!==s&&(e.update(c),i.set(c,s)),o.isInstancedMesh&&(!1===o.hasEventListener("dispose",a)&&o.addEventListener("dispose",a),n.update(o.instanceMatrix,t.ARRAY_BUFFER),null!==o.instanceColor&&n.update(o.instanceColor,t.ARRAY_BUFFER)),c}function s(){i=new WeakMap}function a(t){const e=t.target;e.removeEventListener("dispose",a),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:o,dispose:s}}const Il=new zn,Nl=new Wn,Ul=new Gn,Fl=new uo,Bl=[],Vl=[],zl=new Float32Array(16),jl=new Float32Array(9),Hl=new Float32Array(4);function Wl(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let o=Bl[i];if(void 0===o&&(o=new Float32Array(i),Bl[i]=o),0!==e){r.toArray(o,0);for(let r=1,i=0;r!==e;++r)i+=n,t[r].toArray(o,i)}return o}function Gl(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function $l(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function ql(t,e){let n=Vl[e];void 0===n&&(n=new Int32Array(e),Vl[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function Yl(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Xl(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Gl(n,e))return;t.uniform2fv(this.addr,e),$l(n,e)}}function Zl(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Gl(n,e))return;t.uniform3fv(this.addr,e),$l(n,e)}}function Kl(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Gl(n,e))return;t.uniform4fv(this.addr,e),$l(n,e)}}function Jl(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Gl(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),$l(n,e)}else{if(Gl(n,r))return;Hl.set(r),t.uniformMatrix2fv(this.addr,!1,Hl),$l(n,r)}}function Ql(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Gl(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),$l(n,e)}else{if(Gl(n,r))return;jl.set(r),t.uniformMatrix3fv(this.addr,!1,jl),$l(n,r)}}function tc(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Gl(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),$l(n,e)}else{if(Gl(n,r))return;zl.set(r),t.uniformMatrix4fv(this.addr,!1,zl),$l(n,r)}}function ec(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function nc(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Gl(n,e))return;t.uniform2iv(this.addr,e),$l(n,e)}}function rc(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Gl(n,e))return;t.uniform3iv(this.addr,e),$l(n,e)}}function ic(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Gl(n,e))return;t.uniform4iv(this.addr,e),$l(n,e)}}function oc(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function sc(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Gl(n,e))return;t.uniform2uiv(this.addr,e),$l(n,e)}}function ac(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Gl(n,e))return;t.uniform3uiv(this.addr,e),$l(n,e)}}function lc(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Gl(n,e))return;t.uniform4uiv(this.addr,e),$l(n,e)}}function cc(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(e||Il,i)}function uc(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||Ul,i)}function dc(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||Fl,i)}function hc(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||Nl,i)}function fc(t){switch(t){case 5126:return Yl;case 35664:return Xl;case 35665:return Zl;case 35666:return Kl;case 35674:return Jl;case 35675:return Ql;case 35676:return tc;case 5124:case 35670:return ec;case 35667:case 35671:return nc;case 35668:case 35672:return rc;case 35669:case 35673:return ic;case 5125:return oc;case 36294:return sc;case 36295:return ac;case 36296:return lc;case 35678:case 36198:case 36298:case 36306:case 35682:return cc;case 35679:case 36299:case 36307:return uc;case 35680:case 36300:case 36308:case 36293:return dc;case 36289:case 36303:case 36311:case 36292:return hc}}function pc(t,e){t.uniform1fv(this.addr,e)}function mc(t,e){const n=Wl(e,this.size,2);t.uniform2fv(this.addr,n)}function gc(t,e){const n=Wl(e,this.size,3);t.uniform3fv(this.addr,n)}function vc(t,e){const n=Wl(e,this.size,4);t.uniform4fv(this.addr,n)}function yc(t,e){const n=Wl(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function bc(t,e){const n=Wl(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function _c(t,e){const n=Wl(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function wc(t,e){t.uniform1iv(this.addr,e)}function xc(t,e){t.uniform2iv(this.addr,e)}function Sc(t,e){t.uniform3iv(this.addr,e)}function Ec(t,e){t.uniform4iv(this.addr,e)}function Mc(t,e){t.uniform1uiv(this.addr,e)}function Tc(t,e){t.uniform2uiv(this.addr,e)}function Cc(t,e){t.uniform3uiv(this.addr,e)}function Ac(t,e){t.uniform4uiv(this.addr,e)}function kc(t,e,n){const r=this.cache,i=e.length,o=ql(n,i);Gl(r,o)||(t.uniform1iv(this.addr,o),$l(r,o));for(let s=0;s!==i;++s)n.setTexture2D(e[s]||Il,o[s])}function Oc(t,e,n){const r=this.cache,i=e.length,o=ql(n,i);Gl(r,o)||(t.uniform1iv(this.addr,o),$l(r,o));for(let s=0;s!==i;++s)n.setTexture3D(e[s]||Ul,o[s])}function Rc(t,e,n){const r=this.cache,i=e.length,o=ql(n,i);Gl(r,o)||(t.uniform1iv(this.addr,o),$l(r,o));for(let s=0;s!==i;++s)n.setTextureCube(e[s]||Fl,o[s])}function Pc(t,e,n){const r=this.cache,i=e.length,o=ql(n,i);Gl(r,o)||(t.uniform1iv(this.addr,o),$l(r,o));for(let s=0;s!==i;++s)n.setTexture2DArray(e[s]||Nl,o[s])}function Lc(t){switch(t){case 5126:return pc;case 35664:return mc;case 35665:return gc;case 35666:return vc;case 35674:return yc;case 35675:return bc;case 35676:return _c;case 5124:case 35670:return wc;case 35667:case 35671:return xc;case 35668:case 35672:return Sc;case 35669:case 35673:return Ec;case 5125:return Mc;case 36294:return Tc;case 36295:return Cc;case 36296:return Ac;case 35678:case 36198:case 36298:case 36306:case 35682:return kc;case 35679:case 36299:case 36307:return Oc;case 35680:case 36300:case 36308:case 36293:return Rc;case 36289:case 36303:case 36311:case 36292:return Pc}}class Dc{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=fc(e.type)}}class Ic{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=Lc(e.type)}}class Nc{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const o=r[i];o.setValue(t,e[o.id],n)}}}const Uc=/(\w+)(\])?(\[|\.)?/g;function Fc(t,e){t.seq.push(e),t.map[e.id]=e}function Bc(t,e,n){const r=t.name,i=r.length;Uc.lastIndex=0;while(1){const o=Uc.exec(r),s=Uc.lastIndex;let a=o[1];const l="]"===o[2],c=o[3];if(l&&(a|=0),void 0===c||"["===c&&s+2===i){Fc(n,void 0===c?new Dc(a,t,e):new Ic(a,t,e));break}{const t=n.map;let e=t[a];void 0===e&&(e=new Nc(a),Fc(n,e)),n=e}}}class Vc{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const n=t.getActiveUniform(e,r),i=t.getUniformLocation(e,n.name);Bc(n,i,this)}}setValue(t,e,n,r){const i=this.map[e];void 0!==i&&i.setValue(t,n,r)}setOptional(t,e,n){const r=e[n];void 0!==r&&this.setValue(t,n,r)}static upload(t,e,n,r){for(let i=0,o=e.length;i!==o;++i){const o=e[i],s=n[o.id];!1!==s.needsUpdate&&o.setValue(t,s.value,r)}}static seqWithValue(t,e){const n=[];for(let r=0,i=t.length;r!==i;++r){const i=t[r];i.id in e&&n.push(i)}return n}}function zc(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}let jc=0;function Hc(t,e){const n=t.split("\n"),r=[],i=Math.max(e-6,0),o=Math.min(e+6,n.length);for(let s=i;s<o;s++){const t=s+1;r.push(`${t===e?">":" "} ${t}: ${n[s]}`)}return r.join("\n")}function Wc(t){switch(t){case Ce:return["Linear","( value )"];case Te:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),["Linear","( value )"]}}function Gc(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&""===i)return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const r=parseInt(o[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+Hc(t.getShaderSource(e),r)}return i}function $c(t,e){const n=Wc(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function qc(t,e){let n;switch(e){case X:n="Linear";break;case Z:n="Reinhard";break;case K:n="OptimizedCineon";break;case J:n="ACESFilmic";break;case Q:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Yc(t){const e=[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return e.filter(Kc).join("\n")}function Xc(t){const e=[];for(const n in t){const r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}function Zc(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const r=t.getActiveAttrib(e,i),o=r.name;let s=1;r.type===t.FLOAT_MAT2&&(s=2),r.type===t.FLOAT_MAT3&&(s=3),r.type===t.FLOAT_MAT4&&(s=4),n[o]={type:r.type,location:t.getAttribLocation(e,o),locationSize:s}}return n}function Kc(t){return""!==t}function Jc(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Qc(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const tu=/^[ \t]*#include +<([\w\d./]+)>/gm;function eu(t){return t.replace(tu,nu)}function nu(t,e){const n=Ja[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return eu(n)}const ru=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function iu(t){return t.replace(ru,ou)}function ou(t,e,n,r){let i="";for(let o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function su(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function au(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===c?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===u?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===d&&(e="SHADOWMAP_TYPE_VSM"),e}function lu(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case et:case nt:e="ENVMAP_TYPE_CUBE";break;case ot:e="ENVMAP_TYPE_CUBE_UV";break}return e}function cu(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case nt:e="ENVMAP_MODE_REFRACTION";break}return e}function uu(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case G:e="ENVMAP_BLENDING_MULTIPLY";break;case $:e="ENVMAP_BLENDING_MIX";break;case q:e="ENVMAP_BLENDING_ADD";break}return e}function du(t){const e=t.envMapCubeUVHeight;if(null===e)return null;const n=Math.log2(e)-2,r=1/e,i=1/(3*Math.max(Math.pow(2,n),112));return{texelWidth:i,texelHeight:r,maxMip:n}}function hu(t,e,n,r){const i=t.getContext(),o=n.defines;let s=n.vertexShader,a=n.fragmentShader;const l=au(n),c=lu(n),u=cu(n),d=uu(n),h=du(n),f=n.isWebGL2?"":Yc(n),p=Xc(o),m=i.createProgram();let g,v,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter(Kc).join("\n"),g.length>0&&(g+="\n"),v=[f,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter(Kc).join("\n"),v.length>0&&(v+="\n")):(g=[su(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Kc).join("\n"),v=[f,su(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Y?"#define TONE_MAPPING":"",n.toneMapping!==Y?Ja["tonemapping_pars_fragment"]:"",n.toneMapping!==Y?qc("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Ja["encodings_pars_fragment"],$c("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Kc).join("\n")),s=eu(s),s=Jc(s,n),s=Qc(s,n),a=eu(a),a=Jc(a,n),a=Qc(a,n),s=iu(s),a=iu(a),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in",n.glslVersion===Ve?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Ve?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const b=y+g+s,_=y+v+a,w=zc(i,i.VERTEX_SHADER,b),x=zc(i,i.FRAGMENT_SHADER,_);if(i.attachShader(m,w),i.attachShader(m,x),void 0!==n.index0AttributeName?i.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),t.debug.checkShaderErrors){const e=i.getProgramInfoLog(m).trim(),n=i.getShaderInfoLog(w).trim(),r=i.getShaderInfoLog(x).trim();let o=!0,s=!0;if(!1===i.getProgramParameter(m,i.LINK_STATUS))if(o=!1,"function"===typeof t.debug.onShaderError)t.debug.onShaderError(i,m,w,x);else{const t=Gc(i,w,"vertex"),n=Gc(i,x,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,i.VALIDATE_STATUS)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+n)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==n&&""!==r||(s=!1);s&&(this.diagnostics={runnable:o,programLog:e,vertexShader:{log:n,prefix:g},fragmentShader:{log:r,prefix:v}})}let S,E;return i.deleteShader(w),i.deleteShader(x),this.getUniforms=function(){return void 0===S&&(S=new Vc(i,m)),S},this.getAttributes=function(){return void 0===E&&(E=Zc(i,m)),E},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=jc++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=w,this.fragmentShader=x,this}let fu=0;class pu{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,r=this._getShaderStage(e),i=this._getShaderStage(n),o=this._getShaderCacheForMaterial(t);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(i)&&(o.add(i),i.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return void 0===n&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return void 0===n&&(n=new mu(t),e.set(t,n)),n}}class mu{constructor(t){this.id=fu++,this.code=t,this.usedTimes=0}}function gu(t,e,n,r,i,o,s){const a=new Dr,l=new pu,c=[],u=i.isWebGL2,d=i.logarithmicDepthBuffer,h=i.vertexTextures;let m=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(t){return 0===t?"uv":`uv${t}`}function b(o,a,c,b,_){const w=b.fog,x=_.geometry,S=o.isMeshStandardMaterial?b.environment:null,E=(o.isMeshStandardMaterial?n:e).get(o.envMap||S),M=E&&E.mapping===ot?E.image.height:null,T=v[o.type];null!==o.precision&&(m=i.getMaxPrecision(o.precision),m!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",m,"instead."));const C=x.morphAttributes.position||x.morphAttributes.normal||x.morphAttributes.color,A=void 0!==C?C.length:0;let k,O,R,P,L=0;if(void 0!==x.morphAttributes.position&&(L=1),void 0!==x.morphAttributes.normal&&(L=2),void 0!==x.morphAttributes.color&&(L=3),T){const t=tl[T];k=t.vertexShader,O=t.fragmentShader}else k=o.vertexShader,O=o.fragmentShader,l.update(o),R=l.getVertexShaderID(o),P=l.getFragmentShaderID(o);const D=t.getRenderTarget(),I=!0===_.isInstancedMesh,N=!!o.map,U=!!o.matcap,F=!!E,B=!!o.aoMap,V=!!o.lightMap,z=!!o.bumpMap,j=!!o.normalMap,H=!!o.displacementMap,W=!!o.emissiveMap,G=!!o.metalnessMap,$=!!o.roughnessMap,q=o.anisotropy>0,X=o.clearcoat>0,Z=o.iridescence>0,K=o.sheen>0,J=o.transmission>0,Q=q&&!!o.anisotropyMap,tt=X&&!!o.clearcoatMap,et=X&&!!o.clearcoatNormalMap,nt=X&&!!o.clearcoatRoughnessMap,rt=Z&&!!o.iridescenceMap,it=Z&&!!o.iridescenceThicknessMap,st=K&&!!o.sheenColorMap,at=K&&!!o.sheenRoughnessMap,lt=!!o.specularMap,ct=!!o.specularColorMap,ut=!!o.specularIntensityMap,dt=J&&!!o.transmissionMap,ht=J&&!!o.thicknessMap,ft=!!o.gradientMap,pt=!!o.alphaMap,mt=o.alphaTest>0,gt=!!o.extensions,vt=!!x.attributes.uv1,yt=!!x.attributes.uv2,bt=!!x.attributes.uv3,_t={isWebGL2:u,shaderID:T,shaderType:o.type,shaderName:o.name,vertexShader:k,fragmentShader:O,defines:o.defines,customVertexShaderID:R,customFragmentShaderID:P,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:m,instancing:I,instancingColor:I&&null!==_.instanceColor,supportsVertexTextures:h,outputColorSpace:null===D?t.outputColorSpace:!0===D.isXRRenderTarget?D.texture.colorSpace:Ce,map:N,matcap:U,envMap:F,envMapMode:F&&E.mapping,envMapCubeUVHeight:M,aoMap:B,lightMap:V,bumpMap:z,normalMap:j,displacementMap:h&&H,emissiveMap:W,normalMapObjectSpace:j&&o.normalMapType===Ee,normalMapTangentSpace:j&&o.normalMapType===Se,metalnessMap:G,roughnessMap:$,anisotropy:q,anisotropyMap:Q,clearcoat:X,clearcoatMap:tt,clearcoatNormalMap:et,clearcoatRoughnessMap:nt,iridescence:Z,iridescenceMap:rt,iridescenceThicknessMap:it,sheen:K,sheenColorMap:st,sheenRoughnessMap:at,specularMap:lt,specularColorMap:ct,specularIntensityMap:ut,transmission:J,transmissionMap:dt,thicknessMap:ht,gradientMap:ft,opaque:!1===o.transparent&&o.blending===g,alphaMap:pt,alphaTest:mt,combine:o.combine,mapUv:N&&y(o.map.channel),aoMapUv:B&&y(o.aoMap.channel),lightMapUv:V&&y(o.lightMap.channel),bumpMapUv:z&&y(o.bumpMap.channel),normalMapUv:j&&y(o.normalMap.channel),displacementMapUv:H&&y(o.displacementMap.channel),emissiveMapUv:W&&y(o.emissiveMap.channel),metalnessMapUv:G&&y(o.metalnessMap.channel),roughnessMapUv:$&&y(o.roughnessMap.channel),anisotropyMapUv:Q&&y(o.anisotropyMap.channel),clearcoatMapUv:tt&&y(o.clearcoatMap.channel),clearcoatNormalMapUv:et&&y(o.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:nt&&y(o.clearcoatRoughnessMap.channel),iridescenceMapUv:rt&&y(o.iridescenceMap.channel),iridescenceThicknessMapUv:it&&y(o.iridescenceThicknessMap.channel),sheenColorMapUv:st&&y(o.sheenColorMap.channel),sheenRoughnessMapUv:at&&y(o.sheenRoughnessMap.channel),specularMapUv:lt&&y(o.specularMap.channel),specularColorMapUv:ct&&y(o.specularColorMap.channel),specularIntensityMapUv:ut&&y(o.specularIntensityMap.channel),transmissionMapUv:dt&&y(o.transmissionMap.channel),thicknessMapUv:ht&&y(o.thicknessMap.channel),alphaMapUv:pt&&y(o.alphaMap.channel),vertexTangents:!!x.attributes.tangent&&(j||q),vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!x.attributes.color&&4===x.attributes.color.itemSize,vertexUv1s:vt,vertexUv2s:yt,vertexUv3s:bt,pointsUvs:!0===_.isPoints&&!!x.attributes.uv&&(N||pt),fog:!!w,useFog:!0===o.fog,fogExp2:w&&w.isFogExp2,flatShading:!0===o.flatShading,sizeAttenuation:!0===o.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===_.isSkinnedMesh,morphTargets:void 0!==x.morphAttributes.position,morphNormals:void 0!==x.morphAttributes.normal,morphColors:void 0!==x.morphAttributes.color,morphTargetsCount:A,morphTextureStride:L,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numSpotLightMaps:a.spotLightMap.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numSpotLightShadowsWithMaps:a.numSpotLightShadowsWithMaps,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:o.dithering,shadowMapEnabled:t.shadowMap.enabled&&c.length>0,shadowMapType:t.shadowMap.type,toneMapping:o.toneMapped?t.toneMapping:Y,useLegacyLights:t.useLegacyLights,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===p,flipSided:o.side===f,useDepthPacking:o.depthPacking>=0,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionDerivatives:gt&&!0===o.extensions.derivatives,extensionFragDepth:gt&&!0===o.extensions.fragDepth,extensionDrawBuffers:gt&&!0===o.extensions.drawBuffers,extensionShaderTextureLOD:gt&&!0===o.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:o.customProgramCacheKey()};return _t}function _(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.customVertexShaderID),n.push(e.customFragmentShaderID)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(w(n,e),x(n,e),n.push(t.outputColorSpace)),n.push(e.customProgramCacheKey),n.join()}function w(t,e){t.push(e.precision),t.push(e.outputColorSpace),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.mapUv),t.push(e.alphaMapUv),t.push(e.lightMapUv),t.push(e.aoMapUv),t.push(e.bumpMapUv),t.push(e.normalMapUv),t.push(e.displacementMapUv),t.push(e.emissiveMapUv),t.push(e.metalnessMapUv),t.push(e.roughnessMapUv),t.push(e.anisotropyMapUv),t.push(e.clearcoatMapUv),t.push(e.clearcoatNormalMapUv),t.push(e.clearcoatRoughnessMapUv),t.push(e.iridescenceMapUv),t.push(e.iridescenceThicknessMapUv),t.push(e.sheenColorMapUv),t.push(e.sheenRoughnessMapUv),t.push(e.specularMapUv),t.push(e.specularColorMapUv),t.push(e.specularIntensityMapUv),t.push(e.transmissionMapUv),t.push(e.thicknessMapUv),t.push(e.combine),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numSpotLightMaps),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.numSpotLightShadowsWithMaps),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.depthPacking)}function x(t,e){a.disableAll(),e.isWebGL2&&a.enable(0),e.supportsVertexTextures&&a.enable(1),e.instancing&&a.enable(2),e.instancingColor&&a.enable(3),e.matcap&&a.enable(4),e.envMap&&a.enable(5),e.normalMapObjectSpace&&a.enable(6),e.normalMapTangentSpace&&a.enable(7),e.clearcoat&&a.enable(8),e.iridescence&&a.enable(9),e.alphaTest&&a.enable(10),e.vertexColors&&a.enable(11),e.vertexAlphas&&a.enable(12),e.vertexUv1s&&a.enable(13),e.vertexUv2s&&a.enable(14),e.vertexUv3s&&a.enable(15),e.vertexTangents&&a.enable(16),e.anisotropy&&a.enable(17),t.push(a.mask),a.disableAll(),e.fog&&a.enable(0),e.useFog&&a.enable(1),e.flatShading&&a.enable(2),e.logarithmicDepthBuffer&&a.enable(3),e.skinning&&a.enable(4),e.morphTargets&&a.enable(5),e.morphNormals&&a.enable(6),e.morphColors&&a.enable(7),e.premultipliedAlpha&&a.enable(8),e.shadowMapEnabled&&a.enable(9),e.useLegacyLights&&a.enable(10),e.doubleSided&&a.enable(11),e.flipSided&&a.enable(12),e.useDepthPacking&&a.enable(13),e.dithering&&a.enable(14),e.transmission&&a.enable(15),e.sheen&&a.enable(16),e.opaque&&a.enable(17),e.pointsUvs&&a.enable(18),t.push(a.mask)}function S(t){const e=v[t.type];let n;if(e){const t=tl[e];n=eo.clone(t.uniforms)}else n=t.uniforms;return n}function E(e,n){let r;for(let t=0,i=c.length;t<i;t++){const e=c[t];if(e.cacheKey===n){r=e,++r.usedTimes;break}}return void 0===r&&(r=new hu(t,n,e,o),c.push(r)),r}function M(t){if(0===--t.usedTimes){const e=c.indexOf(t);c[e]=c[c.length-1],c.pop(),t.destroy()}}function T(t){l.remove(t)}function C(){l.dispose()}return{getParameters:b,getProgramCacheKey:_,getUniforms:S,acquireProgram:E,releaseProgram:M,releaseShaderCache:T,programs:c,dispose:C}}function vu(){let t=new WeakMap;function e(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n}function n(e){t.delete(e)}function r(e,n,r){t.get(e)[n]=r}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function yu(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function bu(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function _u(){const t=[];let e=0;const n=[],r=[],i=[];function o(){e=0,n.length=0,r.length=0,i.length=0}function s(n,r,i,o,s,a){let l=t[e];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:o,renderOrder:n.renderOrder,z:s,group:a},t[e]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=o,l.renderOrder=n.renderOrder,l.z=s,l.group=a),e++,l}function a(t,e,o,a,l,c){const u=s(t,e,o,a,l,c);o.transmission>0?r.push(u):!0===o.transparent?i.push(u):n.push(u)}function l(t,e,o,a,l,c){const u=s(t,e,o,a,l,c);o.transmission>0?r.unshift(u):!0===o.transparent?i.unshift(u):n.unshift(u)}function c(t,e){n.length>1&&n.sort(t||yu),r.length>1&&r.sort(e||bu),i.length>1&&i.sort(e||bu)}function u(){for(let n=e,r=t.length;n<r;n++){const e=t[n];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}}return{opaque:n,transmissive:r,transparent:i,init:o,push:a,unshift:l,finish:u,sort:c}}function wu(){let t=new WeakMap;function e(e,n){const r=t.get(e);let i;return void 0===r?(i=new _u,t.set(e,[i])):n>=r.length?(i=new _u,r.push(i)):i=r[n],i}function n(){t=new WeakMap}return{get:e,dispose:n}}function xu(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new qn,color:new fi};break;case"SpotLight":n={position:new qn,direction:new qn,color:new fi,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new qn,color:new fi,distance:0,decay:0};break;case"HemisphereLight":n={direction:new qn,skyColor:new fi,groundColor:new fi};break;case"RectAreaLight":n={color:new fi,position:new qn,halfWidth:new qn,halfHeight:new qn};break}return t[e.id]=n,n}}}function Su(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new bn};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new bn};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new bn,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let Eu=0;function Mu(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Tu(t,e){const n=new xu,r=Su(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)i.probe.push(new qn);const o=new qn,s=new Sr,a=new Sr;function l(o,s){let a=0,l=0,c=0;for(let t=0;t<9;t++)i.probe[t].set(0,0,0);let u=0,d=0,h=0,f=0,p=0,m=0,g=0,v=0,y=0,b=0;o.sort(Mu);const _=!0===s?Math.PI:1;for(let t=0,e=o.length;t<e;t++){const e=o[t],s=e.color,w=e.intensity,x=e.distance,S=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)a+=s.r*w*_,l+=s.g*w*_,c+=s.b*w*_;else if(e.isLightProbe)for(let t=0;t<9;t++)i.probe[t].addScaledVector(e.sh.coefficients[t],w);else if(e.isDirectionalLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*_),e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,i.directionalShadow[u]=n,i.directionalShadowMap[u]=S,i.directionalShadowMatrix[u]=e.shadow.matrix,m++}i.directional[u]=t,u++}else if(e.isSpotLight){const t=n.get(e);t.position.setFromMatrixPosition(e.matrixWorld),t.color.copy(s).multiplyScalar(w*_),t.distance=x,t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,i.spot[h]=t;const o=e.shadow;if(e.map&&(i.spotLightMap[y]=e.map,y++,o.updateMatrices(e),e.castShadow&&b++),i.spotLightMatrix[h]=o.matrix,e.castShadow){const t=r.get(e);t.shadowBias=o.bias,t.shadowNormalBias=o.normalBias,t.shadowRadius=o.radius,t.shadowMapSize=o.mapSize,i.spotShadow[h]=t,i.spotShadowMap[h]=S,v++}h++}else if(e.isRectAreaLight){const t=n.get(e);t.color.copy(s).multiplyScalar(w),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),i.rectArea[f]=t,f++}else if(e.isPointLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*_),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,n.shadowCameraNear=t.camera.near,n.shadowCameraFar=t.camera.far,i.pointShadow[d]=n,i.pointShadowMap[d]=S,i.pointShadowMatrix[d]=e.shadow.matrix,g++}i.point[d]=t,d++}else if(e.isHemisphereLight){const t=n.get(e);t.skyColor.copy(e.color).multiplyScalar(w*_),t.groundColor.copy(e.groundColor).multiplyScalar(w*_),i.hemi[p]=t,p++}}f>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(i.rectAreaLTC1=Qa.LTC_FLOAT_1,i.rectAreaLTC2=Qa.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Qa.LTC_HALF_1,i.rectAreaLTC2=Qa.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=a,i.ambient[1]=l,i.ambient[2]=c;const w=i.hash;w.directionalLength===u&&w.pointLength===d&&w.spotLength===h&&w.rectAreaLength===f&&w.hemiLength===p&&w.numDirectionalShadows===m&&w.numPointShadows===g&&w.numSpotShadows===v&&w.numSpotMaps===y||(i.directional.length=u,i.spot.length=h,i.rectArea.length=f,i.point.length=d,i.hemi.length=p,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=v,i.spotShadowMap.length=v,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotLightMatrix.length=v+y-b,i.spotLightMap.length=y,i.numSpotLightShadowsWithMaps=b,w.directionalLength=u,w.pointLength=d,w.spotLength=h,w.rectAreaLength=f,w.hemiLength=p,w.numDirectionalShadows=m,w.numPointShadows=g,w.numSpotShadows=v,w.numSpotMaps=y,i.version=Eu++)}function c(t,e){let n=0,r=0,l=0,c=0,u=0;const d=e.matrixWorldInverse;for(let h=0,f=t.length;h<f;h++){const e=t[h];if(e.isDirectionalLight){const t=i.directional[n];t.direction.setFromMatrixPosition(e.matrixWorld),o.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(d),n++}else if(e.isSpotLight){const t=i.spot[l];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(d),t.direction.setFromMatrixPosition(e.matrixWorld),o.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(d),l++}else if(e.isRectAreaLight){const t=i.rectArea[c];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(d),a.identity(),s.copy(e.matrixWorld),s.premultiply(d),a.extractRotation(s),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),t.halfWidth.applyMatrix4(a),t.halfHeight.applyMatrix4(a),c++}else if(e.isPointLight){const t=i.point[r];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(d),r++}else if(e.isHemisphereLight){const t=i.hemi[u];t.direction.setFromMatrixPosition(e.matrixWorld),t.direction.transformDirection(d),u++}}}return{setup:l,setupView:c,state:i}}function Cu(t,e){const n=new Tu(t,e),r=[],i=[];function o(){r.length=0,i.length=0}function s(t){r.push(t)}function a(t){i.push(t)}function l(t){n.setup(r,t)}function c(t){n.setupView(r,t)}const u={lightsArray:r,shadowsArray:i,lights:n};return{init:o,state:u,setupLights:l,setupLightsView:c,pushLight:s,pushShadow:a}}function Au(t,e){let n=new WeakMap;function r(r,i=0){const o=n.get(r);let s;return void 0===o?(s=new Cu(t,e),n.set(r,[s])):i>=o.length?(s=new Cu(t,e),o.push(s)):s=o[i],s}function i(){n=new WeakMap}return{get:r,dispose:i}}class ku extends li{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=we,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class Ou extends li{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}const Ru="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",Pu="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function Lu(t,e,n){let r=new bo;const i=new bn,o=new bn,s=new jn,a=new ku({depthPacking:xe}),l=new Ou,u={},g=n.maxTextureSize,v={[h]:f,[f]:h,[p]:p},y=new io({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new bn},radius:{value:4}},vertexShader:Ru,fragmentShader:Pu}),b=y.clone();b.defines.HORIZONTAL_PASS=1;const _=new ki;_.setAttribute("position",new yi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const w=new qi(_,y),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=c;let S=this.type;function E(n,r){const o=e.update(w);y.defines.VSM_SAMPLES!==n.blurSamples&&(y.defines.VSM_SAMPLES=n.blurSamples,b.defines.VSM_SAMPLES=n.blurSamples,y.needsUpdate=!0,b.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Hn(i.x,i.y)),y.uniforms.shadow_pass.value=n.map.texture,y.uniforms.resolution.value=n.mapSize,y.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(r,null,o,y,w,null),b.uniforms.shadow_pass.value=n.mapPass.texture,b.uniforms.resolution.value=n.mapSize,b.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(r,null,o,b,w,null)}function M(e,n,r,i){let o=null;const s=!0===r.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(void 0!==s)o=s;else if(o=!0===r.isPointLight?l:a,t.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const t=o.uuid,e=n.uuid;let r=u[t];void 0===r&&(r={},u[t]=r);let i=r[e];void 0===i&&(i=o.clone(),r[e]=i),o=i}if(o.visible=n.visible,o.wireframe=n.wireframe,o.side=i===d?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:v[n.side],o.alphaMap=n.alphaMap,o.alphaTest=n.alphaTest,o.map=n.map,o.clipShadows=n.clipShadows,o.clippingPlanes=n.clippingPlanes,o.clipIntersection=n.clipIntersection,o.displacementMap=n.displacementMap,o.displacementScale=n.displacementScale,o.displacementBias=n.displacementBias,o.wireframeLinewidth=n.wireframeLinewidth,o.linewidth=n.linewidth,!0===r.isPointLight&&!0===o.isMeshDistanceMaterial){const e=t.properties.get(o);e.light=r}return o}function T(n,i,o,s,a){if(!1===n.visible)return;const l=n.layers.test(i.layers);if(l&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&a===d)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const r=e.update(n),i=n.material;if(Array.isArray(i)){const e=r.groups;for(let l=0,c=e.length;l<c;l++){const c=e[l],u=i[c.materialIndex];if(u&&u.visible){const e=M(n,u,s,a);t.renderBufferDirect(o,null,r,e,n,c)}}}else if(i.visible){const e=M(n,i,s,a);t.renderBufferDirect(o,null,r,e,n,null)}}const c=n.children;for(let t=0,e=c.length;t<e;t++)T(c[t],i,o,s,a)}this.render=function(e,n,a){if(!1===x.enabled)return;if(!1===x.autoUpdate&&!1===x.needsUpdate)return;if(0===e.length)return;const l=t.getRenderTarget(),c=t.getActiveCubeFace(),u=t.getActiveMipmapLevel(),h=t.state;h.setBlending(m),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);const f=S!==d&&this.type===d,p=S===d&&this.type!==d;for(let m=0,v=e.length;m<v;m++){const l=e[m],c=l.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;i.copy(c.mapSize);const u=c.getFrameExtents();if(i.multiply(u),o.copy(c.mapSize),(i.x>g||i.y>g)&&(i.x>g&&(o.x=Math.floor(g/u.x),i.x=o.x*u.x,c.mapSize.x=o.x),i.y>g&&(o.y=Math.floor(g/u.y),i.y=o.y*u.y,c.mapSize.y=o.y)),null===c.map||!0===f||!0===p){const t=this.type!==d?{minFilter:ct,magFilter:ct}:{};null!==c.map&&c.map.dispose(),c.map=new Hn(i.x,i.y,t),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}t.setRenderTarget(c.map),t.clear();const v=c.getViewportCount();for(let t=0;t<v;t++){const e=c.getViewport(t);s.set(o.x*e.x,o.y*e.y,o.x*e.z,o.y*e.w),h.viewport(s),c.updateMatrices(l,t),r=c.getFrustum(),T(n,a,c.camera,l,this.type)}!0!==c.isPointLightShadow&&this.type===d&&E(c,a),c.needsUpdate=!1}S=this.type,x.needsUpdate=!1,t.setRenderTarget(l,c,u)}}function Du(t,e,n){const r=n.isWebGL2;function i(){let e=!1;const n=new jn;let r=null;const i=new jn(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,o,s,a){!0===a&&(e*=s,r*=s,o*=s),n.set(e,r,o,s),!1===i.equals(n)&&(t.clearColor(e,r,o,s),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}}function o(){let e=!1,n=null,r=null,i=null;return{setTest:function(e){e?Et(t.DEPTH_TEST):Mt(t.DEPTH_TEST)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){switch(e){case U:t.depthFunc(t.NEVER);break;case F:t.depthFunc(t.ALWAYS);break;case B:t.depthFunc(t.LESS);break;case V:t.depthFunc(t.LEQUAL);break;case z:t.depthFunc(t.EQUAL);break;case j:t.depthFunc(t.GEQUAL);break;case H:t.depthFunc(t.GREATER);break;case W:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}}function c(){let e=!1,n=null,r=null,i=null,o=null,s=null,a=null,l=null,c=null;return{setTest:function(n){e||(n?Et(t.STENCIL_TEST):Mt(t.STENCIL_TEST))},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,s){r===e&&i===n&&o===s||(t.stencilFunc(e,n,s),r=e,i=n,o=s)},setOp:function(e,n,r){s===e&&a===n&&l===r||(t.stencilOp(e,n,r),s=e,a=n,l=r)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,n=null,r=null,i=null,o=null,s=null,a=null,l=null,c=null}}}const u=new i,d=new o,h=new c,G=new WeakMap,$=new WeakMap;let q={},Y={},X=new WeakMap,Z=[],K=null,J=!1,Q=null,tt=null,et=null,nt=null,rt=null,it=null,ot=null,st=!1,at=null,lt=null,ct=null,ut=null,dt=null;const ht=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ft=!1,pt=0;const mt=t.getParameter(t.VERSION);-1!==mt.indexOf("WebGL")?(pt=parseFloat(/^WebGL (\d)/.exec(mt)[1]),ft=pt>=1):-1!==mt.indexOf("OpenGL ES")&&(pt=parseFloat(/^OpenGL ES (\d)/.exec(mt)[1]),ft=pt>=2);let gt=null,vt={};const yt=t.getParameter(t.SCISSOR_BOX),bt=t.getParameter(t.VIEWPORT),_t=(new jn).fromArray(yt),wt=(new jn).fromArray(bt);function xt(e,n,i,o){const s=new Uint8Array(4),a=t.createTexture();t.bindTexture(e,a),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let l=0;l<i;l++)!r||e!==t.TEXTURE_3D&&e!==t.TEXTURE_2D_ARRAY?t.texImage2D(n+l,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,s):t.texImage3D(n,0,t.RGBA,1,1,o,0,t.RGBA,t.UNSIGNED_BYTE,s);return a}const St={};function Et(e){!0!==q[e]&&(t.enable(e),q[e]=!0)}function Mt(e){!1!==q[e]&&(t.disable(e),q[e]=!1)}function Tt(e,n){return Y[e]!==n&&(t.bindFramebuffer(e,n),Y[e]=n,r&&(e===t.DRAW_FRAMEBUFFER&&(Y[t.FRAMEBUFFER]=n),e===t.FRAMEBUFFER&&(Y[t.DRAW_FRAMEBUFFER]=n)),!0)}function Ct(r,i){let o=Z,s=!1;if(r)if(o=X.get(i),void 0===o&&(o=[],X.set(i,o)),r.isWebGLMultipleRenderTargets){const e=r.texture;if(o.length!==e.length||o[0]!==t.COLOR_ATTACHMENT0){for(let n=0,r=e.length;n<r;n++)o[n]=t.COLOR_ATTACHMENT0+n;o.length=e.length,s=!0}}else o[0]!==t.COLOR_ATTACHMENT0&&(o[0]=t.COLOR_ATTACHMENT0,s=!0);else o[0]!==t.BACK&&(o[0]=t.BACK,s=!0);s&&(n.isWebGL2?t.drawBuffers(o):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(o))}function At(e){return K!==e&&(t.useProgram(e),K=e,!0)}St[t.TEXTURE_2D]=xt(t.TEXTURE_2D,t.TEXTURE_2D,1),St[t.TEXTURE_CUBE_MAP]=xt(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(St[t.TEXTURE_2D_ARRAY]=xt(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),St[t.TEXTURE_3D]=xt(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),u.setClear(0,0,0,1),d.setClear(1),h.setClear(0),Et(t.DEPTH_TEST),d.setFunc(V),Lt(!1),Dt(a),Et(t.CULL_FACE),Rt(m);const kt={[w]:t.FUNC_ADD,[x]:t.FUNC_SUBTRACT,[S]:t.FUNC_REVERSE_SUBTRACT};if(r)kt[E]=t.MIN,kt[M]=t.MAX;else{const t=e.get("EXT_blend_minmax");null!==t&&(kt[E]=t.MIN_EXT,kt[M]=t.MAX_EXT)}const Ot={[T]:t.ZERO,[C]:t.ONE,[A]:t.SRC_COLOR,[O]:t.SRC_ALPHA,[N]:t.SRC_ALPHA_SATURATE,[D]:t.DST_COLOR,[P]:t.DST_ALPHA,[k]:t.ONE_MINUS_SRC_COLOR,[R]:t.ONE_MINUS_SRC_ALPHA,[I]:t.ONE_MINUS_DST_COLOR,[L]:t.ONE_MINUS_DST_ALPHA};function Rt(e,n,r,i,o,s,a,l){if(e!==m){if(!1===J&&(Et(t.BLEND),J=!0),e===_)o=o||n,s=s||r,a=a||i,n===tt&&o===rt||(t.blendEquationSeparate(kt[n],kt[o]),tt=n,rt=o),r===et&&i===nt&&s===it&&a===ot||(t.blendFuncSeparate(Ot[r],Ot[i],Ot[s],Ot[a]),et=r,nt=i,it=s,ot=a),Q=e,st=!1;else if(e!==Q||l!==st){if(tt===w&&rt===w||(t.blendEquation(t.FUNC_ADD),tt=w,rt=w),l)switch(e){case g:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case v:t.blendFunc(t.ONE,t.ONE);break;case y:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case b:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}else switch(e){case g:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case v:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case y:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case b:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}et=null,nt=null,it=null,ot=null,Q=e,st=l}}else!0===J&&(Mt(t.BLEND),J=!1)}function Pt(e,n){e.side===p?Mt(t.CULL_FACE):Et(t.CULL_FACE);let r=e.side===f;n&&(r=!r),Lt(r),e.blending===g&&!1===e.transparent?Rt(m):Rt(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),d.setFunc(e.depthFunc),d.setTest(e.depthTest),d.setMask(e.depthWrite),u.setMask(e.colorWrite);const i=e.stencilWrite;h.setTest(i),i&&(h.setMask(e.stencilWriteMask),h.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),h.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Nt(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?Et(t.SAMPLE_ALPHA_TO_COVERAGE):Mt(t.SAMPLE_ALPHA_TO_COVERAGE)}function Lt(e){at!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),at=e)}function Dt(e){e!==s?(Et(t.CULL_FACE),e!==lt&&(e===a?t.cullFace(t.BACK):e===l?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):Mt(t.CULL_FACE),lt=e}function It(e){e!==ct&&(ft&&t.lineWidth(e),ct=e)}function Nt(e,n,r){e?(Et(t.POLYGON_OFFSET_FILL),ut===n&&dt===r||(t.polygonOffset(n,r),ut=n,dt=r)):Mt(t.POLYGON_OFFSET_FILL)}function Ut(e){e?Et(t.SCISSOR_TEST):Mt(t.SCISSOR_TEST)}function Ft(e){void 0===e&&(e=t.TEXTURE0+ht-1),gt!==e&&(t.activeTexture(e),gt=e)}function Bt(e,n,r){void 0===r&&(r=null===gt?t.TEXTURE0+ht-1:gt);let i=vt[r];void 0===i&&(i={type:void 0,texture:void 0},vt[r]=i),i.type===e&&i.texture===n||(gt!==r&&(t.activeTexture(r),gt=r),t.bindTexture(e,n||St[e]),i.type=e,i.texture=n)}function Vt(){const e=vt[gt];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)}function zt(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function jt(){try{t.compressedTexImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Ht(){try{t.texSubImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Wt(){try{t.texSubImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Gt(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function $t(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function qt(){try{t.texStorage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Yt(){try{t.texStorage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Xt(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Zt(){try{t.texImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Kt(e){!1===_t.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),_t.copy(e))}function Jt(e){!1===wt.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),wt.copy(e))}function Qt(e,n){let r=$.get(n);void 0===r&&(r=new WeakMap,$.set(n,r));let i=r.get(e);void 0===i&&(i=t.getUniformBlockIndex(n,e.name),r.set(e,i))}function te(e,n){const r=$.get(n),i=r.get(e);G.get(n)!==i&&(t.uniformBlockBinding(n,i,e.__bindingPointIndex),G.set(n,i))}function ee(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),!0===r&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),q={},gt=null,vt={},Y={},X=new WeakMap,Z=[],K=null,J=!1,Q=null,tt=null,et=null,nt=null,rt=null,it=null,ot=null,st=!1,at=null,lt=null,ct=null,ut=null,dt=null,_t.set(0,0,t.canvas.width,t.canvas.height),wt.set(0,0,t.canvas.width,t.canvas.height),u.reset(),d.reset(),h.reset()}return{buffers:{color:u,depth:d,stencil:h},enable:Et,disable:Mt,bindFramebuffer:Tt,drawBuffers:Ct,useProgram:At,setBlending:Rt,setMaterial:Pt,setFlipSided:Lt,setCullFace:Dt,setLineWidth:It,setPolygonOffset:Nt,setScissorTest:Ut,activeTexture:Ft,bindTexture:Bt,unbindTexture:Vt,compressedTexImage2D:zt,compressedTexImage3D:jt,texImage2D:Xt,texImage3D:Zt,updateUBOMapping:Qt,uniformBlockBinding:te,texStorage2D:qt,texStorage3D:Yt,texSubImage2D:Ht,texSubImage3D:Wt,compressedTexSubImage2D:Gt,compressedTexSubImage3D:$t,scissor:Kt,viewport:Jt,reset:ee}}function Iu(t,e,n,r,i,o,s){const a=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,d=i.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let m;const g=new WeakMap;let v=!1;try{v="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(ot){}function y(t,e){return v?new OffscreenCanvas(t,e):Sn("canvas")}function b(t,e,n,r){let i=1;if((t.width>r||t.height>r)&&(i=r/Math.max(t.width,t.height)),i<1||!0===e){if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap){const r=e?pn:Math.floor,o=r(i*t.width),s=r(i*t.height);void 0===m&&(m=y(o,s));const a=n?y(o,s):m;a.width=o,a.height=s;const l=a.getContext("2d");return l.drawImage(t,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+o+"x"+s+")."),a}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function _(t){return hn(t.width)&&hn(t.height)}function w(t){return!a&&(t.wrapS!==at||t.wrapT!==at||t.minFilter!==ct&&t.minFilter!==ht)}function x(t,e){return t.generateMipmaps&&e&&t.minFilter!==ct&&t.minFilter!==ht}function S(e){t.generateMipmap(e)}function E(n,r,i,o,s=!1){if(!1===a)return r;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=r;return r===t.RED&&(i===t.FLOAT&&(l=t.R32F),i===t.HALF_FLOAT&&(l=t.R16F),i===t.UNSIGNED_BYTE&&(l=t.R8)),r===t.RG&&(i===t.FLOAT&&(l=t.RG32F),i===t.HALF_FLOAT&&(l=t.RG16F),i===t.UNSIGNED_BYTE&&(l=t.RG8)),r===t.RGBA&&(i===t.FLOAT&&(l=t.RGBA32F),i===t.HALF_FLOAT&&(l=t.RGBA16F),i===t.UNSIGNED_BYTE&&(l=o===Te&&!1===s?t.SRGB8_ALPHA8:t.RGBA8),i===t.UNSIGNED_SHORT_4_4_4_4&&(l=t.RGBA4),i===t.UNSIGNED_SHORT_5_5_5_1&&(l=t.RGB5_A1)),l!==t.R16F&&l!==t.R32F&&l!==t.RG16F&&l!==t.RG32F&&l!==t.RGBA16F&&l!==t.RGBA32F||e.get("EXT_color_buffer_float"),l}function M(t,e,n){return!0===x(t,n)||t.isFramebufferTexture&&t.minFilter!==ct&&t.minFilter!==ht?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function T(e){return e===ct||e===ut||e===dt?t.NEAREST:t.LINEAR}function C(t){const e=t.target;e.removeEventListener("dispose",C),k(e),e.isVideoTexture&&p.delete(e)}function A(t){const e=t.target;e.removeEventListener("dispose",A),R(e)}function k(t){const e=r.get(t);if(void 0===e.__webglInit)return;const n=t.source,i=g.get(n);if(i){const r=i[e.__cacheKey];r.usedTimes--,0===r.usedTimes&&O(t),0===Object.keys(i).length&&g.delete(n)}r.remove(t)}function O(e){const n=r.get(e);t.deleteTexture(n.__webglTexture);const i=e.source,o=g.get(i);delete o[n.__cacheKey],s.memory.textures--}function R(e){const n=e.texture,i=r.get(e),o=r.get(n);if(void 0!==o.__webglTexture&&(t.deleteTexture(o.__webglTexture),s.memory.textures--),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(let r=0;r<6;r++)t.deleteFramebuffer(i.__webglFramebuffer[r]),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[r]);else{if(t.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&t.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let e=0;e<i.__webglColorRenderbuffer.length;e++)i.__webglColorRenderbuffer[e]&&t.deleteRenderbuffer(i.__webglColorRenderbuffer[e]);i.__webglDepthRenderbuffer&&t.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(e.isWebGLMultipleRenderTargets)for(let a=0,l=n.length;a<l;a++){const e=r.get(n[a]);e.__webglTexture&&(t.deleteTexture(e.__webglTexture),s.memory.textures--),r.remove(n[a])}r.remove(n),r.remove(e)}let P=0;function L(){P=0}function D(){const t=P;return t>=l&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+l),P+=1,t}function I(t){const e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.wrapR||0),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.colorSpace),e.join()}function N(e,i){const o=r.get(e);if(e.isVideoTexture&&rt(e),!1===e.isRenderTargetTexture&&e.version>0&&o.__version!==e.version){const t=e.image;if(null===t)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==t.complete)return void G(o,e,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(t.TEXTURE_2D,o.__webglTexture,t.TEXTURE0+i)}function U(e,i){const o=r.get(e);e.version>0&&o.__version!==e.version?G(o,e,i):n.bindTexture(t.TEXTURE_2D_ARRAY,o.__webglTexture,t.TEXTURE0+i)}function F(e,i){const o=r.get(e);e.version>0&&o.__version!==e.version?G(o,e,i):n.bindTexture(t.TEXTURE_3D,o.__webglTexture,t.TEXTURE0+i)}function B(e,i){const o=r.get(e);e.version>0&&o.__version!==e.version?$(o,e,i):n.bindTexture(t.TEXTURE_CUBE_MAP,o.__webglTexture,t.TEXTURE0+i)}const V={[st]:t.REPEAT,[at]:t.CLAMP_TO_EDGE,[lt]:t.MIRRORED_REPEAT},z={[ct]:t.NEAREST,[ut]:t.NEAREST_MIPMAP_NEAREST,[dt]:t.NEAREST_MIPMAP_LINEAR,[ht]:t.LINEAR,[ft]:t.LINEAR_MIPMAP_NEAREST,[pt]:t.LINEAR_MIPMAP_LINEAR},j={[Re]:t.NEVER,[Fe]:t.ALWAYS,[Pe]:t.LESS,[De]:t.LEQUAL,[Le]:t.EQUAL,[Ue]:t.GEQUAL,[Ie]:t.GREATER,[Ne]:t.NOTEQUAL};function H(n,o,s){if(s?(t.texParameteri(n,t.TEXTURE_WRAP_S,V[o.wrapS]),t.texParameteri(n,t.TEXTURE_WRAP_T,V[o.wrapT]),n!==t.TEXTURE_3D&&n!==t.TEXTURE_2D_ARRAY||t.texParameteri(n,t.TEXTURE_WRAP_R,V[o.wrapR]),t.texParameteri(n,t.TEXTURE_MAG_FILTER,z[o.magFilter]),t.texParameteri(n,t.TEXTURE_MIN_FILTER,z[o.minFilter])):(t.texParameteri(n,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(n,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),n!==t.TEXTURE_3D&&n!==t.TEXTURE_2D_ARRAY||t.texParameteri(n,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),o.wrapS===at&&o.wrapT===at||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,t.TEXTURE_MAG_FILTER,T(o.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,T(o.minFilter)),o.minFilter!==ct&&o.minFilter!==ht&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),o.compareFunction&&(t.texParameteri(n,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(n,t.TEXTURE_COMPARE_FUNC,j[o.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){const s=e.get("EXT_texture_filter_anisotropic");if(o.magFilter===ct)return;if(o.minFilter!==dt&&o.minFilter!==pt)return;if(o.type===wt&&!1===e.has("OES_texture_float_linear"))return;if(!1===a&&o.type===xt&&!1===e.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(t.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function W(e,n){let r=!1;void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",C));const i=n.source;let o=g.get(i);void 0===o&&(o={},g.set(i,o));const a=I(n);if(a!==e.__cacheKey){void 0===o[a]&&(o[a]={texture:t.createTexture(),usedTimes:0},s.memory.textures++,r=!0),o[a].usedTimes++;const i=o[e.__cacheKey];void 0!==i&&(o[e.__cacheKey].usedTimes--,0===i.usedTimes&&O(n)),e.__cacheKey=a,e.__webglTexture=o[a].texture}return r}function G(e,i,s){let l=t.TEXTURE_2D;(i.isDataArrayTexture||i.isCompressedArrayTexture)&&(l=t.TEXTURE_2D_ARRAY),i.isData3DTexture&&(l=t.TEXTURE_3D);const c=W(e,i),d=i.source;n.bindTexture(l,e.__webglTexture,t.TEXTURE0+s);const h=r.get(d);if(d.version!==h.__version||!0===c){n.activeTexture(t.TEXTURE0+s),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,i.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const e=w(i)&&!1===_(i.image);let r=b(i.image,e,!1,u);r=it(i,r);const f=_(r)||a,p=o.convert(i.format,i.colorSpace);let m,g=o.convert(i.type),v=E(i.internalFormat,p,g,i.colorSpace);H(l,i,f);const y=i.mipmaps,T=a&&!0!==i.isVideoTexture,C=void 0===h.__version||!0===c,A=M(i,r,f);if(i.isDepthTexture)v=t.DEPTH_COMPONENT,a?v=i.type===wt?t.DEPTH_COMPONENT32F:i.type===_t?t.DEPTH_COMPONENT24:i.type===Mt?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT16:i.type===wt&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===Ot&&v===t.DEPTH_COMPONENT&&i.type!==yt&&i.type!==_t&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=_t,g=o.convert(i.type)),i.format===Rt&&v===t.DEPTH_COMPONENT&&(v=t.DEPTH_STENCIL,i.type!==Mt&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=Mt,g=o.convert(i.type))),C&&(T?n.texStorage2D(t.TEXTURE_2D,1,v,r.width,r.height):n.texImage2D(t.TEXTURE_2D,0,v,r.width,r.height,0,p,g,null));else if(i.isDataTexture)if(y.length>0&&f){T&&C&&n.texStorage2D(t.TEXTURE_2D,A,v,y[0].width,y[0].height);for(let e=0,r=y.length;e<r;e++)m=y[e],T?n.texSubImage2D(t.TEXTURE_2D,e,0,0,m.width,m.height,p,g,m.data):n.texImage2D(t.TEXTURE_2D,e,v,m.width,m.height,0,p,g,m.data);i.generateMipmaps=!1}else T?(C&&n.texStorage2D(t.TEXTURE_2D,A,v,r.width,r.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,r.width,r.height,p,g,r.data)):n.texImage2D(t.TEXTURE_2D,0,v,r.width,r.height,0,p,g,r.data);else if(i.isCompressedTexture)if(i.isCompressedArrayTexture){T&&C&&n.texStorage3D(t.TEXTURE_2D_ARRAY,A,v,y[0].width,y[0].height,r.depth);for(let e=0,o=y.length;e<o;e++)m=y[e],i.format!==Ct?null!==p?T?n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,0,m.width,m.height,r.depth,p,m.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,e,v,m.width,m.height,r.depth,0,m.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):T?n.texSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,0,m.width,m.height,r.depth,p,g,m.data):n.texImage3D(t.TEXTURE_2D_ARRAY,e,v,m.width,m.height,r.depth,0,p,g,m.data)}else{T&&C&&n.texStorage2D(t.TEXTURE_2D,A,v,y[0].width,y[0].height);for(let e=0,r=y.length;e<r;e++)m=y[e],i.format!==Ct?null!==p?T?n.compressedTexSubImage2D(t.TEXTURE_2D,e,0,0,m.width,m.height,p,m.data):n.compressedTexImage2D(t.TEXTURE_2D,e,v,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):T?n.texSubImage2D(t.TEXTURE_2D,e,0,0,m.width,m.height,p,g,m.data):n.texImage2D(t.TEXTURE_2D,e,v,m.width,m.height,0,p,g,m.data)}else if(i.isDataArrayTexture)T?(C&&n.texStorage3D(t.TEXTURE_2D_ARRAY,A,v,r.width,r.height,r.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,r.width,r.height,r.depth,p,g,r.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,v,r.width,r.height,r.depth,0,p,g,r.data);else if(i.isData3DTexture)T?(C&&n.texStorage3D(t.TEXTURE_3D,A,v,r.width,r.height,r.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,r.width,r.height,r.depth,p,g,r.data)):n.texImage3D(t.TEXTURE_3D,0,v,r.width,r.height,r.depth,0,p,g,r.data);else if(i.isFramebufferTexture){if(C)if(T)n.texStorage2D(t.TEXTURE_2D,A,v,r.width,r.height);else{let e=r.width,i=r.height;for(let r=0;r<A;r++)n.texImage2D(t.TEXTURE_2D,r,v,e,i,0,p,g,null),e>>=1,i>>=1}}else if(y.length>0&&f){T&&C&&n.texStorage2D(t.TEXTURE_2D,A,v,y[0].width,y[0].height);for(let e=0,r=y.length;e<r;e++)m=y[e],T?n.texSubImage2D(t.TEXTURE_2D,e,0,0,p,g,m):n.texImage2D(t.TEXTURE_2D,e,v,p,g,m);i.generateMipmaps=!1}else T?(C&&n.texStorage2D(t.TEXTURE_2D,A,v,r.width,r.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,p,g,r)):n.texImage2D(t.TEXTURE_2D,0,v,p,g,r);x(i,f)&&S(l),h.__version=d.version,i.onUpdate&&i.onUpdate(i)}e.__version=i.version}function $(e,i,s){if(6!==i.image.length)return;const l=W(e,i),u=i.source;n.bindTexture(t.TEXTURE_CUBE_MAP,e.__webglTexture,t.TEXTURE0+s);const d=r.get(u);if(u.version!==d.__version||!0===l){n.activeTexture(t.TEXTURE0+s),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,i.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const e=i.isCompressedTexture||i.image[0].isCompressedTexture,r=i.image[0]&&i.image[0].isDataTexture,h=[];for(let t=0;t<6;t++)h[t]=e||r?r?i.image[t].image:i.image[t]:b(i.image[t],!1,!0,c),h[t]=it(i,h[t]);const f=h[0],p=_(f)||a,m=o.convert(i.format,i.colorSpace),g=o.convert(i.type),v=E(i.internalFormat,m,g,i.colorSpace),y=a&&!0!==i.isVideoTexture,w=void 0===d.__version||!0===l;let T,C=M(i,f,p);if(H(t.TEXTURE_CUBE_MAP,i,p),e){y&&w&&n.texStorage2D(t.TEXTURE_CUBE_MAP,C,v,f.width,f.height);for(let e=0;e<6;e++){T=h[e].mipmaps;for(let r=0;r<T.length;r++){const o=T[r];i.format!==Ct?null!==m?y?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r,0,0,o.width,o.height,m,o.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r,v,o.width,o.height,0,o.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):y?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r,0,0,o.width,o.height,m,g,o.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r,v,o.width,o.height,0,m,g,o.data)}}}else{T=i.mipmaps,y&&w&&(T.length>0&&C++,n.texStorage2D(t.TEXTURE_CUBE_MAP,C,v,h[0].width,h[0].height));for(let e=0;e<6;e++)if(r){y?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,0,0,h[e].width,h[e].height,m,g,h[e].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,v,h[e].width,h[e].height,0,m,g,h[e].data);for(let r=0;r<T.length;r++){const i=T[r],o=i.image[e].image;y?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,0,0,o.width,o.height,m,g,o.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,v,o.width,o.height,0,m,g,o.data)}}else{y?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,0,0,m,g,h[e]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,v,m,g,h[e]);for(let r=0;r<T.length;r++){const i=T[r];y?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,0,0,m,g,i.image[e]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,v,m,g,i.image[e])}}}x(i,p)&&S(t.TEXTURE_CUBE_MAP),d.__version=u.version,i.onUpdate&&i.onUpdate(i)}e.__version=i.version}function q(e,i,s,a,l){const c=o.convert(s.format,s.colorSpace),u=o.convert(s.type),d=E(s.internalFormat,c,u,s.colorSpace),f=r.get(i);f.__hasExternalTextures||(l===t.TEXTURE_3D||l===t.TEXTURE_2D_ARRAY?n.texImage3D(l,0,d,i.width,i.height,i.depth,0,c,u,null):n.texImage2D(l,0,d,i.width,i.height,0,c,u,null)),n.bindFramebuffer(t.FRAMEBUFFER,e),nt(i)?h.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,a,l,r.get(s).__webglTexture,0,et(i)):(l===t.TEXTURE_2D||l>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&l<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,a,l,r.get(s).__webglTexture,0),n.bindFramebuffer(t.FRAMEBUFFER,null)}function Y(e,n,r){if(t.bindRenderbuffer(t.RENDERBUFFER,e),n.depthBuffer&&!n.stencilBuffer){let i=t.DEPTH_COMPONENT16;if(r||nt(n)){const e=n.depthTexture;e&&e.isDepthTexture&&(e.type===wt?i=t.DEPTH_COMPONENT32F:e.type===_t&&(i=t.DEPTH_COMPONENT24));const r=et(n);nt(n)?h.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,r,i,n.width,n.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,r,i,n.width,n.height)}else t.renderbufferStorage(t.RENDERBUFFER,i,n.width,n.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)}else if(n.depthBuffer&&n.stencilBuffer){const i=et(n);r&&!1===nt(n)?t.renderbufferStorageMultisample(t.RENDERBUFFER,i,t.DEPTH24_STENCIL8,n.width,n.height):nt(n)?h.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,i,t.DEPTH24_STENCIL8,n.width,n.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)}else{const e=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let i=0;i<e.length;i++){const s=e[i],a=o.convert(s.format,s.colorSpace),l=o.convert(s.type),c=E(s.internalFormat,a,l,s.colorSpace),u=et(n);r&&!1===nt(n)?t.renderbufferStorageMultisample(t.RENDERBUFFER,u,c,n.width,n.height):nt(n)?h.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,u,c,n.width,n.height):t.renderbufferStorage(t.RENDERBUFFER,c,n.width,n.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function X(e,i){const o=i&&i.isWebGLCubeRenderTarget;if(o)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,e),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),N(i.depthTexture,0);const s=r.get(i.depthTexture).__webglTexture,a=et(i);if(i.depthTexture.format===Ot)nt(i)?h.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,s,0,a):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,s,0);else{if(i.depthTexture.format!==Rt)throw new Error("Unknown depthTexture format");nt(i)?h.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,s,0,a):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,s,0)}}function Z(e){const i=r.get(e),o=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!i.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");X(i.__webglFramebuffer,e)}else if(o){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=t.createRenderbuffer(),Y(i.__webglDepthbuffer[r],e,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=t.createRenderbuffer(),Y(i.__webglDepthbuffer,e,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function K(e,n,i){const o=r.get(e);void 0!==n&&q(o.__webglFramebuffer,e,e.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),void 0!==i&&Z(e)}function J(e){const l=e.texture,c=r.get(e),u=r.get(l);e.addEventListener("dispose",A),!0!==e.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=t.createTexture()),u.__version=l.version,s.memory.textures++);const d=!0===e.isWebGLCubeRenderTarget,h=!0===e.isWebGLMultipleRenderTargets,f=_(e)||a;if(d){c.__webglFramebuffer=[];for(let e=0;e<6;e++)c.__webglFramebuffer[e]=t.createFramebuffer()}else{if(c.__webglFramebuffer=t.createFramebuffer(),h)if(i.drawBuffers){const n=e.texture;for(let e=0,i=n.length;e<i;e++){const i=r.get(n[e]);void 0===i.__webglTexture&&(i.__webglTexture=t.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&e.samples>0&&!1===nt(e)){const r=h?l:[l];c.__webglMultisampledFramebuffer=t.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,c.__webglMultisampledFramebuffer);for(let n=0;n<r.length;n++){const i=r[n];c.__webglColorRenderbuffer[n]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,c.__webglColorRenderbuffer[n]);const s=o.convert(i.format,i.colorSpace),a=o.convert(i.type),l=E(i.internalFormat,s,a,i.colorSpace,!0===e.isXRRenderTarget),u=et(e);t.renderbufferStorageMultisample(t.RENDERBUFFER,u,l,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+n,t.RENDERBUFFER,c.__webglColorRenderbuffer[n])}t.bindRenderbuffer(t.RENDERBUFFER,null),e.depthBuffer&&(c.__webglDepthRenderbuffer=t.createRenderbuffer(),Y(c.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(d){n.bindTexture(t.TEXTURE_CUBE_MAP,u.__webglTexture),H(t.TEXTURE_CUBE_MAP,l,f);for(let n=0;n<6;n++)q(c.__webglFramebuffer[n],e,l,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+n);x(l,f)&&S(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(h){const i=e.texture;for(let o=0,s=i.length;o<s;o++){const s=i[o],a=r.get(s);n.bindTexture(t.TEXTURE_2D,a.__webglTexture),H(t.TEXTURE_2D,s,f),q(c.__webglFramebuffer,e,s,t.COLOR_ATTACHMENT0+o,t.TEXTURE_2D),x(s,f)&&S(t.TEXTURE_2D)}n.unbindTexture()}else{let r=t.TEXTURE_2D;(e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&(a?r=e.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(r,u.__webglTexture),H(r,l,f),q(c.__webglFramebuffer,e,l,t.COLOR_ATTACHMENT0,r),x(l,f)&&S(r),n.unbindTexture()}e.depthBuffer&&Z(e)}function Q(e){const i=_(e)||a,o=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let s=0,a=o.length;s<a;s++){const a=o[s];if(x(a,i)){const i=e.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,o=r.get(a).__webglTexture;n.bindTexture(i,o),S(i),n.unbindTexture()}}}function tt(e){if(a&&e.samples>0&&!1===nt(e)){const i=e.isWebGLMultipleRenderTargets?e.texture:[e.texture],o=e.width,s=e.height;let a=t.COLOR_BUFFER_BIT;const l=[],c=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,u=r.get(e),d=!0===e.isWebGLMultipleRenderTargets;if(d)for(let e=0;e<i.length;e++)n.bindFramebuffer(t.FRAMEBUFFER,u.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,u.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let n=0;n<i.length;n++){l.push(t.COLOR_ATTACHMENT0+n),e.depthBuffer&&l.push(c);const h=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;if(!1===h&&(e.depthBuffer&&(a|=t.DEPTH_BUFFER_BIT),e.stencilBuffer&&(a|=t.STENCIL_BUFFER_BIT)),d&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,u.__webglColorRenderbuffer[n]),!0===h&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[c]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[c])),d){const e=r.get(i[n]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)}t.blitFramebuffer(0,0,o,s,0,0,o,s,a,t.NEAREST),f&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,l)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),d)for(let e=0;e<i.length;e++){n.bindFramebuffer(t.FRAMEBUFFER,u.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.RENDERBUFFER,u.__webglColorRenderbuffer[e]);const o=r.get(i[e]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,u.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,o,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}}function et(t){return Math.min(d,t.samples)}function nt(t){const n=r.get(t);return a&&t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function rt(t){const e=s.render.frame;p.get(t)!==e&&(p.set(t,e),t.update())}function it(t,n){const r=t.colorSpace,i=t.format,o=t.type;return!0===t.isCompressedTexture||t.format===ze||r!==Ce&&r!==Me&&(r===Te?!1===a?!0===e.has("EXT_sRGB")&&i===Ct?(t.format=ze,t.minFilter=ht,t.generateMipmaps=!1):n=Nn.sRGBToLinear(n):i===Ct&&o===mt||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",r)),n}this.allocateTextureUnit=D,this.resetTextureUnits=L,this.setTexture2D=N,this.setTexture2DArray=U,this.setTexture3D=F,this.setTextureCube=B,this.rebindTextures=K,this.setupRenderTarget=J,this.updateRenderTargetMipmap=Q,this.updateMultisampleRenderTarget=tt,this.setupDepthRenderbuffer=Z,this.setupFrameBufferTexture=q,this.useMultisampledRTT=nt}function Nu(t,e,n){const r=n.isWebGL2;function i(n,i=Me){let o;if(n===mt)return t.UNSIGNED_BYTE;if(n===St)return t.UNSIGNED_SHORT_4_4_4_4;if(n===Et)return t.UNSIGNED_SHORT_5_5_5_1;if(n===gt)return t.BYTE;if(n===vt)return t.SHORT;if(n===yt)return t.UNSIGNED_SHORT;if(n===bt)return t.INT;if(n===_t)return t.UNSIGNED_INT;if(n===wt)return t.FLOAT;if(n===xt)return r?t.HALF_FLOAT:(o=e.get("OES_texture_half_float"),null!==o?o.HALF_FLOAT_OES:null);if(n===Tt)return t.ALPHA;if(n===Ct)return t.RGBA;if(n===At)return t.LUMINANCE;if(n===kt)return t.LUMINANCE_ALPHA;if(n===Ot)return t.DEPTH_COMPONENT;if(n===Rt)return t.DEPTH_STENCIL;if(n===ze)return o=e.get("EXT_sRGB"),null!==o?o.SRGB_ALPHA_EXT:null;if(n===Pt)return t.RED;if(n===Lt)return t.RED_INTEGER;if(n===Dt)return t.RG;if(n===It)return t.RG_INTEGER;if(n===Nt)return t.RGBA_INTEGER;if(n===Ut||n===Ft||n===Bt||n===Vt)if(i===Te){if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===o)return null;if(n===Ut)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Ft)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Bt)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Vt)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(o=e.get("WEBGL_compressed_texture_s3tc"),null===o)return null;if(n===Ut)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Ft)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Bt)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Vt)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===zt||n===jt||n===Ht||n===Wt){if(o=e.get("WEBGL_compressed_texture_pvrtc"),null===o)return null;if(n===zt)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===jt)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Ht)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Wt)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Gt)return o=e.get("WEBGL_compressed_texture_etc1"),null!==o?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===$t||n===qt){if(o=e.get("WEBGL_compressed_texture_etc"),null===o)return null;if(n===$t)return i===Te?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(n===qt)return i===Te?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}if(n===Yt||n===Xt||n===Zt||n===Kt||n===Jt||n===Qt||n===te||n===ee||n===ne||n===re||n===ie||n===oe||n===se||n===ae){if(o=e.get("WEBGL_compressed_texture_astc"),null===o)return null;if(n===Yt)return i===Te?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Xt)return i===Te?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Zt)return i===Te?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Kt)return i===Te?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Jt)return i===Te?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Qt)return i===Te?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===te)return i===Te?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===ee)return i===Te?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===ne)return i===Te?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===re)return i===Te?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===ie)return i===Te?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===oe)return i===Te?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===se)return i===Te?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===ae)return i===Te?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===le){if(o=e.get("EXT_texture_compression_bptc"),null===o)return null;if(n===le)return i===Te?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(n===ce||n===ue||n===de||n===he){if(o=e.get("EXT_texture_compression_rgtc"),null===o)return null;if(n===le)return o.COMPRESSED_RED_RGTC1_EXT;if(n===ue)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===de)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===he)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===Mt?r?t.UNSIGNED_INT_24_8:(o=e.get("WEBGL_depth_texture"),null!==o?o.UNSIGNED_INT_24_8_WEBGL:null):void 0!==t[n]?t[n]:null}return{convert:i}}class Uu extends so{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class Fu extends Yr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Bu={type:"move"};class Vu{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Fu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Fu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new qn,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new qn),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Fu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new qn,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new qn),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let r=null,i=null,o=null;const s=this._targetRay,a=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(l&&t.hand){o=!0;for(const o of t.hand.values()){const t=e.getJointPose(o,n),r=this._getHandJoint(l,o);null!==t&&(r.matrix.fromArray(t.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.matrixWorldNeedsUpdate=!0,r.jointRadius=t.radius),r.visible=null!==t}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],s=r.position.distanceTo(i.position),a=.02,c=.005;l.inputState.pinching&&s>a+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&s<=a-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==a&&t.gripSpace&&(i=e.getPose(t.gripSpace,n),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1));null!==s&&(r=e.getPose(t.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(Bu)))}return null!==s&&(s.visible=null!==r),null!==a&&(a.visible=null!==i),null!==l&&(l.visible=null!==o),this}_getHandJoint(t,e){if(void 0===t.joints[e.jointName]){const n=new Fu;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class zu extends zn{constructor(t,e,n,r,i,o,s,a,l,c){if(c=void 0!==c?c:Ot,c!==Ot&&c!==Rt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Ot&&(n=_t),void 0===n&&c===Rt&&(n=Mt),super(null,r,i,o,s,a,c,n,l),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==s?s:ct,this.minFilter=void 0!==a?a:ct,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return null!==this.compareFunction&&(e.compareFunction=this.compareFunction),e}}class ju extends We{constructor(t,e){super();const n=this;let r=null,i=1,o=null,s="local-floor",a=1,l=null,c=null,u=null,d=null,h=null,f=null;const p=e.getContextAttributes();let m=null,g=null;const v=[],y=[];let b=null;const _=new so;_.layers.enable(1),_.viewport=new jn;const w=new so;w.layers.enable(2),w.viewport=new jn;const x=[_,w],S=new Uu;S.layers.enable(1),S.layers.enable(2);let E=null,M=null;function T(t){const e=y.indexOf(t.inputSource);if(-1===e)return;const n=v[e];void 0!==n&&(n.update(t.inputSource,t.frame,l||o),n.dispatchEvent({type:t.type,data:t.inputSource}))}function C(){r.removeEventListener("select",T),r.removeEventListener("selectstart",T),r.removeEventListener("selectend",T),r.removeEventListener("squeeze",T),r.removeEventListener("squeezestart",T),r.removeEventListener("squeezeend",T),r.removeEventListener("end",C),r.removeEventListener("inputsourceschange",A);for(let t=0;t<v.length;t++){const e=y[t];null!==e&&(y[t]=null,v[t].disconnect(e))}E=null,M=null,t.setRenderTarget(m),h=null,d=null,u=null,r=null,g=null,N.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function A(t){for(let e=0;e<t.removed.length;e++){const n=t.removed[e],r=y.indexOf(n);r>=0&&(y[r]=null,v[r].disconnect(n))}for(let e=0;e<t.added.length;e++){const n=t.added[e];let r=y.indexOf(n);if(-1===r){for(let t=0;t<v.length;t++){if(t>=y.length){y.push(n),r=t;break}if(null===y[t]){y[t]=n,r=t;break}}if(-1===r)break}const i=v[r];i&&i.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getCamera=function(){},this.setUserCamera=function(t){b=t},this.getController=function(t){let e=v[t];return void 0===e&&(e=new Vu,v[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=v[t];return void 0===e&&(e=new Vu,v[t]=e),e.getGripSpace()},this.getHand=function(t){let e=v[t];return void 0===e&&(e=new Vu,v[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){i=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){s=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(t){l=t},this.getBaseLayer=function(){return null!==d?d:h},this.getBinding=function(){return u},this.getFrame=function(){return f},this.getSession=function(){return r},this.setSession=async function(c){if(r=c,null!==r){if(m=t.getRenderTarget(),r.addEventListener("select",T),r.addEventListener("selectstart",T),r.addEventListener("selectend",T),r.addEventListener("squeeze",T),r.addEventListener("squeezestart",T),r.addEventListener("squeezeend",T),r.addEventListener("end",C),r.addEventListener("inputsourceschange",A),!0!==p.xrCompatible&&await e.makeXRCompatible(),void 0===r.renderState.layers||!1===t.capabilities.isWebGL2){const n={antialias:void 0!==r.renderState.layers||p.antialias,alpha:!0,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:i};h=new XRWebGLLayer(r,e,n),r.updateRenderState({baseLayer:h}),g=new Hn(h.framebufferWidth,h.framebufferHeight,{format:Ct,type:mt,colorSpace:t.outputColorSpace,stencilBuffer:p.stencil})}else{let n=null,o=null,s=null;p.depth&&(s=p.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,n=p.stencil?Rt:Ot,o=p.stencil?Mt:_t);const a={colorFormat:e.RGBA8,depthFormat:s,scaleFactor:i};u=new XRWebGLBinding(r,e),d=u.createProjectionLayer(a),r.updateRenderState({layers:[d]}),g=new Hn(d.textureWidth,d.textureHeight,{format:Ct,type:mt,depthTexture:new zu(d.textureWidth,d.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:p.stencil,colorSpace:t.outputColorSpace,samples:p.antialias?4:0});const l=t.properties.get(g);l.__ignoreDepthValues=d.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(a),l=null,o=await r.requestReferenceSpace(s),N.setContext(r),N.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode};const k=new qn,O=new qn;function R(t,e,n){k.setFromMatrixPosition(e.matrixWorld),O.setFromMatrixPosition(n.matrixWorld);const r=k.distanceTo(O),i=e.projectionMatrix.elements,o=n.projectionMatrix.elements,s=i[14]/(i[10]-1),a=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],u=(i[8]-1)/i[0],d=(o[8]+1)/o[0],h=s*u,f=s*d,p=r/(-u+d),m=p*-u;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(p),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const g=s+p,v=a+p,y=h-m,b=f+(r-m),_=l*a/v*g,w=c*a/v*g;t.projectionMatrix.makePerspective(y,b,_,w,g,v),t.projectionMatrixInverse.copy(t.projectionMatrix).invert()}function P(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}function L(t,e){const n=b;null===e?n.matrix.copy(t.matrixWorld):(n.matrix.copy(e.matrixWorld),n.matrix.invert(),n.matrix.multiply(t.matrixWorld)),n.matrix.decompose(n.position,n.quaternion,n.scale),n.updateMatrixWorld(!0);const r=n.children;for(let i=0,o=r.length;i<o;i++)r[i].updateMatrixWorld(!0);n.projectionMatrix.copy(t.projectionMatrix),n.projectionMatrixInverse.copy(t.projectionMatrixInverse),n.isPerspectiveCamera&&(n.fov=2*Ye*Math.atan(1/n.projectionMatrix.elements[5]),n.zoom=1)}this.updateCameraXR=function(t){if(null===r)return t;b&&(t=b),S.near=w.near=_.near=t.near,S.far=w.far=_.far=t.far,E===S.near&&M===S.far||(r.updateRenderState({depthNear:S.near,depthFar:S.far}),E=S.near,M=S.far);const e=t.parent,n=S.cameras;P(S,e);for(let r=0;r<n.length;r++)P(n[r],e);return 2===n.length?R(S,_,w):S.projectionMatrix.copy(_.projectionMatrix),b&&L(S,e),S},this.getFoveation=function(){if(null!==d||null!==h)return a},this.setFoveation=function(t){a=t,null!==d&&(d.fixedFoveation=t),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=t)};let D=null;function I(e,r){if(c=r.getViewerPose(l||o),f=r,null!==c){const e=c.views;null!==h&&(t.setRenderTargetFramebuffer(g,h.framebuffer),t.setRenderTarget(g));let n=!1;e.length!==S.cameras.length&&(S.cameras.length=0,n=!0);for(let r=0;r<e.length;r++){const i=e[r];let o=null;if(null!==h)o=h.getViewport(i);else{const e=u.getViewSubImage(d,i);o=e.viewport,0===r&&(t.setRenderTargetTextures(g,e.colorTexture,d.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(g))}let s=x[r];void 0===s&&(s=new so,s.layers.enable(r),s.viewport=new jn,x[r]=s),s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.quaternion,s.scale),s.projectionMatrix.fromArray(i.projectionMatrix),s.projectionMatrixInverse.copy(s.projectionMatrix).invert(),s.viewport.set(o.x,o.y,o.width,o.height),0===r&&(S.matrix.copy(s.matrix),S.matrix.decompose(S.position,S.quaternion,S.scale)),!0===n&&S.cameras.push(s)}}for(let t=0;t<v.length;t++){const e=y[t],n=v[t];null!==e&&void 0!==n&&n.update(e,r,l||o)}D&&D(e,r),r.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:r}),f=null}const N=new _o;N.setAnimationLoop(I),this.setAnimationLoop=function(t){D=t},this.dispose=function(){}}}function Hu(t,e){function n(t,e){!0===t.matrixAutoUpdate&&t.updateMatrix(),e.value.copy(t.matrix)}function r(e,n){n.color.getRGB(e.fogColor.value,to(t)),n.isFog?(e.fogNear.value=n.near,e.fogFar.value=n.far):n.isFogExp2&&(e.fogDensity.value=n.density)}function i(t,e,n,r,i){e.isMeshBasicMaterial||e.isMeshLambertMaterial?o(t,e):e.isMeshToonMaterial?(o(t,e),d(t,e)):e.isMeshPhongMaterial?(o(t,e),u(t,e)):e.isMeshStandardMaterial?(o(t,e),h(t,e),e.isMeshPhysicalMaterial&&p(t,e,i)):e.isMeshMatcapMaterial?(o(t,e),m(t,e)):e.isMeshDepthMaterial?o(t,e):e.isMeshDistanceMaterial?(o(t,e),g(t,e)):e.isMeshNormalMaterial?o(t,e):e.isLineBasicMaterial?(s(t,e),e.isLineDashedMaterial&&a(t,e)):e.isPointsMaterial?l(t,e,n,r):e.isSpriteMaterial?c(t,e):e.isShadowMaterial?(t.color.value.copy(e.color),t.opacity.value=e.opacity):e.isShaderMaterial&&(e.uniformsNeedUpdate=!1)}function o(r,i){r.opacity.value=i.opacity,i.color&&r.diffuse.value.copy(i.color),i.emissive&&r.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(r.map.value=i.map,n(i.map,r.mapTransform)),i.alphaMap&&(r.alphaMap.value=i.alphaMap,n(i.alphaMap,r.alphaMapTransform)),i.bumpMap&&(r.bumpMap.value=i.bumpMap,n(i.bumpMap,r.bumpMapTransform),r.bumpScale.value=i.bumpScale,i.side===f&&(r.bumpScale.value*=-1)),i.normalMap&&(r.normalMap.value=i.normalMap,n(i.normalMap,r.normalMapTransform),r.normalScale.value.copy(i.normalScale),i.side===f&&r.normalScale.value.negate()),i.displacementMap&&(r.displacementMap.value=i.displacementMap,n(i.displacementMap,r.displacementMapTransform),r.displacementScale.value=i.displacementScale,r.displacementBias.value=i.displacementBias),i.emissiveMap&&(r.emissiveMap.value=i.emissiveMap,n(i.emissiveMap,r.emissiveMapTransform)),i.specularMap&&(r.specularMap.value=i.specularMap,n(i.specularMap,r.specularMapTransform)),i.alphaTest>0&&(r.alphaTest.value=i.alphaTest);const o=e.get(i).envMap;if(o&&(r.envMap.value=o,r.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,r.reflectivity.value=i.reflectivity,r.ior.value=i.ior,r.refractionRatio.value=i.refractionRatio),i.lightMap){r.lightMap.value=i.lightMap;const e=!0===t.useLegacyLights?Math.PI:1;r.lightMapIntensity.value=i.lightMapIntensity*e,n(i.lightMap,r.lightMapTransform)}i.aoMap&&(r.aoMap.value=i.aoMap,r.aoMapIntensity.value=i.aoMapIntensity,n(i.aoMap,r.aoMapTransform))}function s(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,e.map&&(t.map.value=e.map,n(e.map,t.mapTransform))}function a(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function l(t,e,r,i){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*r,t.scale.value=.5*i,e.map&&(t.map.value=e.map,n(e.map,t.uvTransform)),e.alphaMap&&(t.alphaMap.value=e.alphaMap,n(e.alphaMap,t.alphaMapTransform)),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}function c(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map,n(e.map,t.mapTransform)),e.alphaMap&&(t.alphaMap.value=e.alphaMap,n(e.alphaMap,t.alphaMapTransform)),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}function u(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4)}function d(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap)}function h(t,r){t.metalness.value=r.metalness,r.metalnessMap&&(t.metalnessMap.value=r.metalnessMap,n(r.metalnessMap,t.metalnessMapTransform)),t.roughness.value=r.roughness,r.roughnessMap&&(t.roughnessMap.value=r.roughnessMap,n(r.roughnessMap,t.roughnessMapTransform));const i=e.get(r).envMap;i&&(t.envMapIntensity.value=r.envMapIntensity)}function p(t,e,r){t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap,n(e.sheenColorMap,t.sheenColorMapTransform)),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap,n(e.sheenRoughnessMap,t.sheenRoughnessMapTransform))),e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap,n(e.clearcoatMap,t.clearcoatMapTransform)),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap,n(e.clearcoatRoughnessMap,t.clearcoatRoughnessMapTransform)),e.clearcoatNormalMap&&(t.clearcoatNormalMap.value=e.clearcoatNormalMap,n(e.clearcoatNormalMap,t.clearcoatNormalMapTransform),t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),e.side===f&&t.clearcoatNormalScale.value.negate())),e.iridescence>0&&(t.iridescence.value=e.iridescence,t.iridescenceIOR.value=e.iridescenceIOR,t.iridescenceThicknessMinimum.value=e.iridescenceThicknessRange[0],t.iridescenceThicknessMaximum.value=e.iridescenceThicknessRange[1],e.iridescenceMap&&(t.iridescenceMap.value=e.iridescenceMap,n(e.iridescenceMap,t.iridescenceMapTransform)),e.iridescenceThicknessMap&&(t.iridescenceThicknessMap.value=e.iridescenceThicknessMap,n(e.iridescenceThicknessMap,t.iridescenceThicknessMapTransform))),e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=r.texture,t.transmissionSamplerSize.value.set(r.width,r.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap,n(e.transmissionMap,t.transmissionMapTransform)),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap,n(e.thicknessMap,t.thicknessMapTransform)),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor)),e.anisotropy>0&&(t.anisotropyVector.value.set(e.anisotropy*Math.cos(e.anisotropyRotation),e.anisotropy*Math.sin(e.anisotropyRotation)),e.anisotropyMap&&(t.anisotropyMap.value=e.anisotropyMap,n(e.anisotropyMap,t.anisotropyMapTransform))),t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap,n(e.specularColorMap,t.specularColorMapTransform)),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap,n(e.specularIntensityMap,t.specularIntensityMapTransform))}function m(t,e){e.matcap&&(t.matcap.value=e.matcap)}function g(t,n){const r=e.get(n).light;t.referencePosition.value.setFromMatrixPosition(r.matrixWorld),t.nearDistance.value=r.shadow.camera.near,t.farDistance.value=r.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function Wu(t,e,n,r){let i={},o={},s=[];const a=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(t,e){const n=e.program;r.uniformBlockBinding(t,n)}function c(t,n){let s=i[t.id];void 0===s&&(p(t),s=u(t),i[t.id]=s,t.addEventListener("dispose",g));const a=n.program;r.updateUBOMapping(t,a);const l=e.render.frame;o[t.id]!==l&&(h(t),o[t.id]=l)}function u(e){const n=d();e.__bindingPointIndex=n;const r=t.createBuffer(),i=e.__size,o=e.usage;return t.bindBuffer(t.UNIFORM_BUFFER,r),t.bufferData(t.UNIFORM_BUFFER,i,o),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,n,r),r}function d(){for(let t=0;t<a;t++)if(-1===s.indexOf(t))return s.push(t),t;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(e){const n=i[e.id],r=e.uniforms,o=e.__cache;t.bindBuffer(t.UNIFORM_BUFFER,n);for(let i=0,s=r.length;i<s;i++){const e=r[i];if(!0===f(e,i,o)){const n=e.__offset,r=Array.isArray(e.value)?e.value:[e.value];let i=0;for(let o=0;o<r.length;o++){const s=r[o],a=m(s);"number"===typeof s?(e.__data[0]=s,t.bufferSubData(t.UNIFORM_BUFFER,n+i,e.__data)):s.isMatrix3?(e.__data[0]=s.elements[0],e.__data[1]=s.elements[1],e.__data[2]=s.elements[2],e.__data[3]=s.elements[0],e.__data[4]=s.elements[3],e.__data[5]=s.elements[4],e.__data[6]=s.elements[5],e.__data[7]=s.elements[0],e.__data[8]=s.elements[6],e.__data[9]=s.elements[7],e.__data[10]=s.elements[8],e.__data[11]=s.elements[0]):(s.toArray(e.__data,i),i+=a.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,n,e.__data)}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function f(t,e,n){const r=t.value;if(void 0===n[e]){if("number"===typeof r)n[e]=r;else{const t=Array.isArray(r)?r:[r],i=[];for(let e=0;e<t.length;e++)i.push(t[e].clone());n[e]=i}return!0}if("number"===typeof r){if(n[e]!==r)return n[e]=r,!0}else{const t=Array.isArray(n[e])?n[e]:[n[e]],i=Array.isArray(r)?r:[r];for(let e=0;e<t.length;e++){const n=t[e];if(!1===n.equals(i[e]))return n.copy(i[e]),!0}}return!1}function p(t){const e=t.uniforms;let n=0;const r=16;let i=0;for(let o=0,s=e.length;o<s;o++){const t=e[o],s={boundary:0,storage:0},a=Array.isArray(t.value)?t.value:[t.value];for(let e=0,n=a.length;e<n;e++){const t=a[e],n=m(t);s.boundary+=n.boundary,s.storage+=n.storage}if(t.__data=new Float32Array(s.storage/Float32Array.BYTES_PER_ELEMENT),t.__offset=n,o>0){i=n%r;const e=r-i;0!==i&&e-s.boundary<0&&(n+=r-i,t.__offset=n)}n+=s.storage}return i=n%r,i>0&&(n+=r-i),t.__size=n,t.__cache={},this}function m(t){const e={boundary:0,storage:0};return"number"===typeof t?(e.boundary=4,e.storage=4):t.isVector2?(e.boundary=8,e.storage=8):t.isVector3||t.isColor?(e.boundary=16,e.storage=12):t.isVector4?(e.boundary=16,e.storage=16):t.isMatrix3?(e.boundary=48,e.storage=48):t.isMatrix4?(e.boundary=64,e.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),e}function g(e){const n=e.target;n.removeEventListener("dispose",g);const r=s.indexOf(n.__bindingPointIndex);s.splice(r,1),t.deleteBuffer(i[n.id]),delete i[n.id],delete o[n.id]}function v(){for(const e in i)t.deleteBuffer(i[e]);s=[],i={},o={}}return{bind:l,update:c,dispose:v}}function Gu(){const t=Sn("canvas");return t.style.display="block",t}class $u{constructor(t={}){const{canvas:e=Gu(),context:n=null,depth:i=!0,stencil:o=!0,alpha:s=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1}=t;let m;this.isWebGLRenderer=!0,m=null!==n?n.getContextAttributes().alpha:s;const g=new Uint32Array(4),v=new Int32Array(4);let y=null,b=null;const _=[],w=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=Te,this.useLegacyLights=!0,this.toneMapping=Y,this.toneMappingExposure=1;const x=this;let S=!1,E=0,M=0,T=null,C=-1,A=null;const k=new jn,O=new jn;let R=null;const P=new fi(0);let L=0,D=e.width,I=e.height,N=1,U=null,F=null;const B=new jn(0,0,D,I),V=new jn(0,0,D,I);let z=!1;const j=new bo;let H=!1,W=!1,G=null;const $=new Sr,q=new bn,X=new qn,Z={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function K(){return null===T?N:1}let J,Q,tt,et,nt,rt,it,ot,st,at,lt,ct,ut,dt,ht,ft,gt,vt,bt,Tt,At,kt,Ot,Rt,Pt=n;function Dt(t,n){for(let r=0;r<t.length;r++){const i=t[r],o=e.getContext(i,n);if(null!==o)return o}return null}try{const t={alpha:!0,depth:i,stencil:o,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${r}`),e.addEventListener("webglcontextlost",Bt,!1),e.addEventListener("webglcontextrestored",Vt,!1),e.addEventListener("webglcontextcreationerror",zt,!1),null===Pt){const e=["webgl2","webgl","experimental-webgl"];if(!0===x.isWebGL1Renderer&&e.shift(),Pt=Dt(e,t),null===Pt)throw Dt(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Pt instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===Pt.getShaderPrecisionFormat&&(Pt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(se){throw console.error("THREE.WebGLRenderer: "+se.message),se}function Ut(){J=new Cl(Pt),Q=new ol(Pt,J,t),J.init(Q),kt=new Nu(Pt,J,Q),tt=new Du(Pt,J,Q),et=new Ol(Pt),nt=new vu,rt=new Iu(Pt,J,tt,nt,Q,kt,et),it=new al(x),ot=new Tl(x),st=new wo(Pt,Q),Ot=new rl(Pt,J,st,Q),at=new Al(Pt,st,et,Ot),lt=new Dl(Pt,at,st,et),bt=new Ll(Pt,Q,rt),ft=new sl(nt),ct=new gu(x,it,ot,J,Q,Ot,ft),ut=new Hu(x,nt),dt=new wu,ht=new Au(J,Q),vt=new nl(x,it,ot,tt,lt,m,l),gt=new Lu(x,lt,Q),Rt=new Wu(Pt,et,Q,tt),Tt=new il(Pt,J,et,Q),At=new kl(Pt,J,et,Q),et.programs=ct.programs,x.capabilities=Q,x.extensions=J,x.properties=nt,x.renderLists=dt,x.shadowMap=gt,x.state=tt,x.info=et}Ut();const Ft=new ju(x,Pt);function Bt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),S=!0}function Vt(){console.log("THREE.WebGLRenderer: Context Restored."),S=!1;const t=et.autoReset,e=gt.enabled,n=gt.autoUpdate,r=gt.needsUpdate,i=gt.type;Ut(),et.autoReset=t,gt.enabled=e,gt.autoUpdate=n,gt.needsUpdate=r,gt.type=i}function zt(t){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",t.statusMessage)}function jt(t){const e=t.target;e.removeEventListener("dispose",jt),Ht(e)}function Ht(t){Wt(t),nt.remove(t)}function Wt(t){const e=nt.get(t).programs;void 0!==e&&(e.forEach((function(t){ct.releaseProgram(t)})),t.isShaderMaterial&&ct.releaseShaderCache(t))}this.xr=Ft,this.getContext=function(){return Pt},this.getContextAttributes=function(){return Pt.getContextAttributes()},this.forceContextLoss=function(){const t=J.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=J.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return N},this.setPixelRatio=function(t){void 0!==t&&(N=t,this.setSize(D,I,!1))},this.getSize=function(t){return t.set(D,I)},this.setSize=function(t,n,r=!0){Ft.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(D=t,I=n,e.width=Math.floor(t*N),e.height=Math.floor(n*N),!0===r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return t.set(D*N,I*N).floor()},this.setDrawingBufferSize=function(t,n,r){D=t,I=n,N=r,e.width=Math.floor(t*r),e.height=Math.floor(n*r),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return t.copy(k)},this.getViewport=function(t){return t.copy(B)},this.setViewport=function(t,e,n,r){t.isVector4?B.set(t.x,t.y,t.z,t.w):B.set(t,e,n,r),tt.viewport(k.copy(B).multiplyScalar(N).floor())},this.getScissor=function(t){return t.copy(V)},this.setScissor=function(t,e,n,r){t.isVector4?V.set(t.x,t.y,t.z,t.w):V.set(t,e,n,r),tt.scissor(O.copy(V).multiplyScalar(N).floor())},this.getScissorTest=function(){return z},this.setScissorTest=function(t){tt.setScissorTest(z=t)},this.setOpaqueSort=function(t){U=t},this.setTransparentSort=function(t){F=t},this.getClearColor=function(t){return t.copy(vt.getClearColor())},this.setClearColor=function(){vt.setClearColor.apply(vt,arguments)},this.getClearAlpha=function(){return vt.getClearAlpha()},this.setClearAlpha=function(){vt.setClearAlpha.apply(vt,arguments)},this.clear=function(t=!0,e=!0,n=!0){let r=0;if(t){let t=!1;if(null!==T){const e=T.texture.format;t=e===Nt||e===It||e===Lt}if(t){const t=T.texture.type,e=t===mt||t===_t||t===yt||t===Mt||t===St||t===Et,n=vt.getClearColor(),r=vt.getClearAlpha(),i=n.r,o=n.g,s=n.b,a=nt.get(T).__webglFramebuffer;e?(g[0]=i,g[1]=o,g[2]=s,g[3]=r,Pt.clearBufferuiv(Pt.COLOR,a,g)):(v[0]=i,v[1]=o,v[2]=s,v[3]=r,Pt.clearBufferiv(Pt.COLOR,a,v))}else r|=Pt.COLOR_BUFFER_BIT}e&&(r|=Pt.DEPTH_BUFFER_BIT),n&&(r|=Pt.STENCIL_BUFFER_BIT),Pt.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Bt,!1),e.removeEventListener("webglcontextrestored",Vt,!1),e.removeEventListener("webglcontextcreationerror",zt,!1),dt.dispose(),ht.dispose(),nt.dispose(),it.dispose(),ot.dispose(),lt.dispose(),Ot.dispose(),Rt.dispose(),ct.dispose(),Ft.dispose(),Ft.removeEventListener("sessionstart",qt),Ft.removeEventListener("sessionend",Yt),G&&(G.dispose(),G=null),Xt.stop()},this.renderBufferDirect=function(t,e,n,r,i,o){null===e&&(e=Z);const s=i.isMesh&&i.matrixWorld.determinant()<0,a=re(t,e,n,r,i);tt.setMaterial(r,s);let l=n.index,c=1;!0===r.wireframe&&(l=at.getWireframeAttribute(n),c=2);const u=n.drawRange,d=n.attributes.position;let h=u.start*c,f=(u.start+u.count)*c;null!==o&&(h=Math.max(h,o.start*c),f=Math.min(f,(o.start+o.count)*c)),null!==l?(h=Math.max(h,0),f=Math.min(f,l.count)):void 0!==d&&null!==d&&(h=Math.max(h,0),f=Math.min(f,d.count));const p=f-h;if(p<0||p===1/0)return;let m;Ot.setup(i,r,a,n,l);let g=Tt;if(null!==l&&(m=st.get(l),g=At,g.setIndex(m)),i.isMesh)!0===r.wireframe?(tt.setLineWidth(r.wireframeLinewidth*K()),g.setMode(Pt.LINES)):g.setMode(Pt.TRIANGLES);else if(i.isLine){let t=r.linewidth;void 0===t&&(t=1),tt.setLineWidth(t*K()),i.isLineSegments?g.setMode(Pt.LINES):i.isLineLoop?g.setMode(Pt.LINE_LOOP):g.setMode(Pt.LINE_STRIP)}else i.isPoints?g.setMode(Pt.POINTS):i.isSprite&&g.setMode(Pt.TRIANGLES);if(i.isInstancedMesh)g.renderInstances(h,p,i.count);else if(n.isInstancedBufferGeometry){const t=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,e=Math.min(n.instanceCount,t);g.renderInstances(h,p,e)}else g.render(h,p)},this.compile=function(t,e){function n(t,e,n){!0===t.transparent&&t.side===p&&!1===t.forceSinglePass?(t.side=f,t.needsUpdate=!0,ee(t,e,n),t.side=h,t.needsUpdate=!0,ee(t,e,n),t.side=p):ee(t,e,n)}b=ht.get(t),b.init(),w.push(b),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(b.pushLight(t),t.castShadow&&b.pushShadow(t))})),b.setupLights(x.useLegacyLights),t.traverse((function(e){const r=e.material;if(r)if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];n(o,t,e)}else n(r,t,e)})),w.pop(),b=null};let Gt=null;function $t(t){Gt&&Gt(t)}function qt(){Xt.stop()}function Yt(){Xt.start()}const Xt=new _o;function Zt(t,e,n,r){if(!1===t.visible)return;const i=t.layers.test(e.layers);if(i)if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)b.pushLight(t),t.castShadow&&b.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||j.intersectsSprite(t)){r&&X.setFromMatrixPosition(t.matrixWorld).applyMatrix4($);const e=lt.update(t),i=t.material;i.visible&&y.push(t,e,i,n,X.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(!t.frustumCulled||j.intersectsObject(t))){t.isSkinnedMesh&&t.skeleton.frame!==et.render.frame&&(t.skeleton.update(),t.skeleton.frame=et.render.frame);const e=lt.update(t),i=t.material;if(r&&(void 0!==t.boundingSphere?(null===t.boundingSphere&&t.computeBoundingSphere(),X.copy(t.boundingSphere.center)):(null===e.boundingSphere&&e.computeBoundingSphere(),X.copy(e.boundingSphere.center)),X.applyMatrix4(t.matrixWorld).applyMatrix4($)),Array.isArray(i)){const r=e.groups;for(let o=0,s=r.length;o<s;o++){const s=r[o],a=i[s.materialIndex];a&&a.visible&&y.push(t,e,a,n,X.z,s)}}else i.visible&&y.push(t,e,i,n,X.z,null)}const o=t.children;for(let s=0,a=o.length;s<a;s++)Zt(o[s],e,n,r)}function Kt(t,e,n,r){const i=t.opaque,o=t.transmissive,s=t.transparent;b.setupLightsView(n),!0===H&&ft.setGlobalState(x.clippingPlanes,n),o.length>0&&Jt(i,o,e,n),r&&tt.viewport(k.copy(r)),i.length>0&&Qt(i,e,n),o.length>0&&Qt(o,e,n),s.length>0&&Qt(s,e,n),tt.buffers.depth.setTest(!0),tt.buffers.depth.setMask(!0),tt.buffers.color.setMask(!0),tt.setPolygonOffset(!1)}function Jt(t,e,n,r){const i=Q.isWebGL2;null===G&&(G=new Hn(1,1,{generateMipmaps:!0,type:J.has("EXT_color_buffer_half_float")?xt:mt,minFilter:pt,samples:i&&!0===a?4:0})),x.getDrawingBufferSize(q),i?G.setSize(q.x,q.y):G.setSize(pn(q.x),pn(q.y));const o=x.getRenderTarget();x.setRenderTarget(G),x.getClearColor(P),L=x.getClearAlpha(),L<1&&x.setClearColor(16777215,.5),x.clear();const s=x.toneMapping;x.toneMapping=Y,Qt(t,n,r),rt.updateMultisampleRenderTarget(G),rt.updateRenderTargetMipmap(G);let l=!1;for(let a=0,c=e.length;a<c;a++){const t=e[a],i=t.object,o=t.geometry,s=t.material,c=t.group;if(s.side===p&&i.layers.test(r.layers)){const t=s.side;s.side=f,s.needsUpdate=!0,te(i,n,r,o,s,c),s.side=t,s.needsUpdate=!0,l=!0}}!0===l&&(rt.updateMultisampleRenderTarget(G),rt.updateRenderTargetMipmap(G)),x.setRenderTarget(o),x.setClearColor(P,L),x.toneMapping=s}function Qt(t,e,n){const r=!0===e.isScene?e.overrideMaterial:null;for(let i=0,o=t.length;i<o;i++){const o=t[i],s=o.object,a=o.geometry,l=null===r?o.material:r,c=o.group;s.layers.test(n.layers)&&te(s,e,n,a,l,c)}}function te(t,e,n,r,i,o){t.onBeforeRender(x,e,n,r,i,o),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),i.onBeforeRender(x,e,n,r,t,o),!0===i.transparent&&i.side===p&&!1===i.forceSinglePass?(i.side=f,i.needsUpdate=!0,x.renderBufferDirect(n,e,r,i,t,o),i.side=h,i.needsUpdate=!0,x.renderBufferDirect(n,e,r,i,t,o),i.side=p):x.renderBufferDirect(n,e,r,i,t,o),t.onAfterRender(x,e,n,r,i,o)}function ee(t,e,n){!0!==e.isScene&&(e=Z);const r=nt.get(t),i=b.state.lights,o=b.state.shadowsArray,s=i.state.version,a=ct.getParameters(t,i.state,o,e,n),l=ct.getProgramCacheKey(a);let c=r.programs;r.environment=t.isMeshStandardMaterial?e.environment:null,r.fog=e.fog,r.envMap=(t.isMeshStandardMaterial?ot:it).get(t.envMap||r.environment),void 0===c&&(t.addEventListener("dispose",jt),c=new Map,r.programs=c);let u=c.get(l);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===s)return ne(t,a),u}else a.uniforms=ct.getUniforms(t),t.onBuild(n,a,x),t.onBeforeCompile(a,x),u=ct.acquireProgram(a,l),c.set(l,u),r.uniforms=a.uniforms;const d=r.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(d.clippingPlanes=ft.uniform),ne(t,a),r.needsLights=oe(t),r.lightsStateVersion=s,r.needsLights&&(d.ambientLightColor.value=i.state.ambient,d.lightProbe.value=i.state.probe,d.directionalLights.value=i.state.directional,d.directionalLightShadows.value=i.state.directionalShadow,d.spotLights.value=i.state.spot,d.spotLightShadows.value=i.state.spotShadow,d.rectAreaLights.value=i.state.rectArea,d.ltc_1.value=i.state.rectAreaLTC1,d.ltc_2.value=i.state.rectAreaLTC2,d.pointLights.value=i.state.point,d.pointLightShadows.value=i.state.pointShadow,d.hemisphereLights.value=i.state.hemi,d.directionalShadowMap.value=i.state.directionalShadowMap,d.directionalShadowMatrix.value=i.state.directionalShadowMatrix,d.spotShadowMap.value=i.state.spotShadowMap,d.spotLightMatrix.value=i.state.spotLightMatrix,d.spotLightMap.value=i.state.spotLightMap,d.pointShadowMap.value=i.state.pointShadowMap,d.pointShadowMatrix.value=i.state.pointShadowMatrix);const h=u.getUniforms(),f=Vc.seqWithValue(h.seq,d);return r.currentProgram=u,r.uniformsList=f,u}function ne(t,e){const n=nt.get(t);n.outputColorSpace=e.outputColorSpace,n.instancing=e.instancing,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphColors=e.morphColors,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents,n.toneMapping=e.toneMapping}function re(t,e,n,r,i){!0!==e.isScene&&(e=Z),rt.resetTextureUnits();const o=e.fog,s=r.isMeshStandardMaterial?e.environment:null,a=null===T?x.outputColorSpace:!0===T.isXRRenderTarget?T.texture.colorSpace:Ce,l=(r.isMeshStandardMaterial?ot:it).get(r.envMap||s),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!n.attributes.tangent&&(!!r.normalMap||r.anisotropy>0),d=!!n.morphAttributes.position,h=!!n.morphAttributes.normal,f=!!n.morphAttributes.color,p=r.toneMapped?x.toneMapping:Y,m=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,g=void 0!==m?m.length:0,v=nt.get(r),y=b.state.lights;if(!0===H&&(!0===W||t!==A)){const e=t===A&&r.id===C;ft.setState(r,t,e)}let _=!1;r.version===v.__version?v.needsLights&&v.lightsStateVersion!==y.state.version||v.outputColorSpace!==a||i.isInstancedMesh&&!1===v.instancing?_=!0:i.isInstancedMesh||!0!==v.instancing?i.isSkinnedMesh&&!1===v.skinning?_=!0:i.isSkinnedMesh||!0!==v.skinning?v.envMap!==l||!0===r.fog&&v.fog!==o?_=!0:void 0===v.numClippingPlanes||v.numClippingPlanes===ft.numPlanes&&v.numIntersection===ft.numIntersection?(v.vertexAlphas!==c||v.vertexTangents!==u||v.morphTargets!==d||v.morphNormals!==h||v.morphColors!==f||v.toneMapping!==p||!0===Q.isWebGL2&&v.morphTargetsCount!==g)&&(_=!0):_=!0:_=!0:_=!0:(_=!0,v.__version=r.version);let w=v.currentProgram;!0===_&&(w=ee(r,e,i));let S=!1,E=!1,M=!1;const k=w.getUniforms(),O=v.uniforms;if(tt.useProgram(w.program)&&(S=!0,E=!0,M=!0),r.id!==C&&(C=r.id,E=!0),S||A!==t){if(k.setValue(Pt,"projectionMatrix",t.projectionMatrix),Q.logarithmicDepthBuffer&&k.setValue(Pt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),A!==t&&(A=t,E=!0,M=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){const e=k.map.cameraPosition;void 0!==e&&e.setValue(Pt,X.setFromMatrixPosition(t.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&k.setValue(Pt,"isOrthographic",!0===t.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&k.setValue(Pt,"viewMatrix",t.matrixWorldInverse)}if(i.isSkinnedMesh){k.setOptional(Pt,i,"bindMatrix"),k.setOptional(Pt,i,"bindMatrixInverse");const t=i.skeleton;t&&(Q.floatVertexTextures?(null===t.boneTexture&&t.computeBoneTexture(),k.setValue(Pt,"boneTexture",t.boneTexture,rt),k.setValue(Pt,"boneTextureSize",t.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const R=n.morphAttributes;if((void 0!==R.position||void 0!==R.normal||void 0!==R.color&&!0===Q.isWebGL2)&&bt.update(i,n,w),(E||v.receiveShadow!==i.receiveShadow)&&(v.receiveShadow=i.receiveShadow,k.setValue(Pt,"receiveShadow",i.receiveShadow)),r.isMeshGouraudMaterial&&null!==r.envMap&&(O.envMap.value=l,O.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),E&&(k.setValue(Pt,"toneMappingExposure",x.toneMappingExposure),v.needsLights&&ie(O,M),o&&!0===r.fog&&ut.refreshFogUniforms(O,o),ut.refreshMaterialUniforms(O,r,N,I,G),Vc.upload(Pt,v.uniformsList,O,rt)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(Vc.upload(Pt,v.uniformsList,O,rt),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&k.setValue(Pt,"center",i.center),k.setValue(Pt,"modelViewMatrix",i.modelViewMatrix),k.setValue(Pt,"normalMatrix",i.normalMatrix),k.setValue(Pt,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const t=r.uniformsGroups;for(let e=0,n=t.length;e<n;e++)if(Q.isWebGL2){const n=t[e];Rt.update(n,w),Rt.bind(n,w)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return w}function ie(t,e){t.ambientLightColor.needsUpdate=e,t.lightProbe.needsUpdate=e,t.directionalLights.needsUpdate=e,t.directionalLightShadows.needsUpdate=e,t.pointLights.needsUpdate=e,t.pointLightShadows.needsUpdate=e,t.spotLights.needsUpdate=e,t.spotLightShadows.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function oe(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}Xt.setAnimationLoop($t),"undefined"!==typeof self&&Xt.setContext(self),this.setAnimationLoop=function(t){Gt=t,Ft.setAnimationLoop(t),null===t?Xt.stop():Xt.start()},Ft.addEventListener("sessionstart",qt),Ft.addEventListener("sessionend",Yt),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===S)return;!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===e.parent&&!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),!0===Ft.enabled&&!0===Ft.isPresenting&&(e=Ft.updateCameraXR(e)),!0===t.isScene&&t.onBeforeRender(x,t,e,T),b=ht.get(t,w.length),b.init(),w.push(b),$.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),j.setFromProjectionMatrix($),W=this.localClippingEnabled,H=ft.init(this.clippingPlanes,W),y=dt.get(t,_.length),y.init(),_.push(y),Zt(t,e,0,x.sortObjects),y.finish(),!0===x.sortObjects&&y.sort(U,F),!0===H&&ft.beginShadows();const n=b.state.shadowsArray;if(gt.render(n,t,e),!0===H&&ft.endShadows(),!0===this.info.autoReset&&this.info.reset(),this.info.render.frame++,vt.render(y,t),b.setupLights(x.useLegacyLights),e.isArrayCamera){const n=e.cameras;for(let e=0,r=n.length;e<r;e++){const r=n[e];Kt(y,t,r,r.viewport)}}else Kt(y,t,e);null!==T&&(rt.updateMultisampleRenderTarget(T),rt.updateRenderTargetMipmap(T)),!0===t.isScene&&t.onAfterRender(x,t,e),Ot.resetDefaultState(),C=-1,A=null,w.pop(),b=w.length>0?w[w.length-1]:null,_.pop(),y=_.length>0?_[_.length-1]:null},this.getActiveCubeFace=function(){return E},this.getActiveMipmapLevel=function(){return M},this.getRenderTarget=function(){return T},this.setRenderTargetTextures=function(t,e,n){nt.get(t.texture).__webglTexture=e,nt.get(t.depthTexture).__webglTexture=n;const r=nt.get(t);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===J.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(t,e){const n=nt.get(t);n.__webglFramebuffer=e,n.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t,e=0,n=0){T=t,E=e,M=n;let r=!0,i=null,o=!1,s=!1;if(t){const n=nt.get(t);void 0!==n.__useDefaultFramebuffer?(tt.bindFramebuffer(Pt.FRAMEBUFFER,null),r=!1):void 0===n.__webglFramebuffer?rt.setupRenderTarget(t):n.__hasExternalTextures&&rt.rebindTextures(t,nt.get(t.texture).__webglTexture,nt.get(t.depthTexture).__webglTexture);const a=t.texture;(a.isData3DTexture||a.isDataArrayTexture||a.isCompressedArrayTexture)&&(s=!0);const l=nt.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(i=l[e],o=!0):i=Q.isWebGL2&&t.samples>0&&!1===rt.useMultisampledRTT(t)?nt.get(t).__webglMultisampledFramebuffer:l,k.copy(t.viewport),O.copy(t.scissor),R=t.scissorTest}else k.copy(B).multiplyScalar(N).floor(),O.copy(V).multiplyScalar(N).floor(),R=z;const a=tt.bindFramebuffer(Pt.FRAMEBUFFER,i);if(a&&Q.drawBuffers&&r&&tt.drawBuffers(t,i),tt.viewport(k),tt.scissor(O),tt.setScissorTest(R),o){const r=nt.get(t.texture);Pt.framebufferTexture2D(Pt.FRAMEBUFFER,Pt.COLOR_ATTACHMENT0,Pt.TEXTURE_CUBE_MAP_POSITIVE_X+e,r.__webglTexture,n)}else if(s){const r=nt.get(t.texture),i=e||0;Pt.framebufferTextureLayer(Pt.FRAMEBUFFER,Pt.COLOR_ATTACHMENT0,r.__webglTexture,n||0,i)}C=-1},this.readRenderTargetPixels=function(t,e,n,r,i,o,s){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let a=nt.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==s&&(a=a[s]),a){tt.bindFramebuffer(Pt.FRAMEBUFFER,a);try{const s=t.texture,a=s.format,l=s.type;if(a!==Ct&&kt.convert(a)!==Pt.getParameter(Pt.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===xt&&(J.has("EXT_color_buffer_half_float")||Q.isWebGL2&&J.has("EXT_color_buffer_float"));if(l!==mt&&kt.convert(l)!==Pt.getParameter(Pt.IMPLEMENTATION_COLOR_READ_TYPE)&&(l!==wt||!(Q.isWebGL2||J.has("OES_texture_float")||J.has("WEBGL_color_buffer_float")))&&!c)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&Pt.readPixels(e,n,r,i,kt.convert(a),kt.convert(l),o)}finally{const t=null!==T?nt.get(T).__webglFramebuffer:null;tt.bindFramebuffer(Pt.FRAMEBUFFER,t)}}},this.copyFramebufferToTexture=function(t,e,n=0){const r=Math.pow(2,-n),i=Math.floor(e.image.width*r),o=Math.floor(e.image.height*r);rt.setTexture2D(e,0),Pt.copyTexSubImage2D(Pt.TEXTURE_2D,n,0,0,t.x,t.y,i,o),tt.unbindTexture()},this.copyTextureToTexture=function(t,e,n,r=0){const i=e.image.width,o=e.image.height,s=kt.convert(n.format),a=kt.convert(n.type);rt.setTexture2D(n,0),Pt.pixelStorei(Pt.UNPACK_FLIP_Y_WEBGL,n.flipY),Pt.pixelStorei(Pt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),Pt.pixelStorei(Pt.UNPACK_ALIGNMENT,n.unpackAlignment),e.isDataTexture?Pt.texSubImage2D(Pt.TEXTURE_2D,r,t.x,t.y,i,o,s,a,e.image.data):e.isCompressedTexture?Pt.compressedTexSubImage2D(Pt.TEXTURE_2D,r,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,s,e.mipmaps[0].data):Pt.texSubImage2D(Pt.TEXTURE_2D,r,t.x,t.y,s,a,e.image),0===r&&n.generateMipmaps&&Pt.generateMipmap(Pt.TEXTURE_2D),tt.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,r,i=0){if(x.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const o=t.max.x-t.min.x+1,s=t.max.y-t.min.y+1,a=t.max.z-t.min.z+1,l=kt.convert(r.format),c=kt.convert(r.type);let u;if(r.isData3DTexture)rt.setTexture3D(r,0),u=Pt.TEXTURE_3D;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");rt.setTexture2DArray(r,0),u=Pt.TEXTURE_2D_ARRAY}Pt.pixelStorei(Pt.UNPACK_FLIP_Y_WEBGL,r.flipY),Pt.pixelStorei(Pt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),Pt.pixelStorei(Pt.UNPACK_ALIGNMENT,r.unpackAlignment);const d=Pt.getParameter(Pt.UNPACK_ROW_LENGTH),h=Pt.getParameter(Pt.UNPACK_IMAGE_HEIGHT),f=Pt.getParameter(Pt.UNPACK_SKIP_PIXELS),p=Pt.getParameter(Pt.UNPACK_SKIP_ROWS),m=Pt.getParameter(Pt.UNPACK_SKIP_IMAGES),g=n.isCompressedTexture?n.mipmaps[0]:n.image;Pt.pixelStorei(Pt.UNPACK_ROW_LENGTH,g.width),Pt.pixelStorei(Pt.UNPACK_IMAGE_HEIGHT,g.height),Pt.pixelStorei(Pt.UNPACK_SKIP_PIXELS,t.min.x),Pt.pixelStorei(Pt.UNPACK_SKIP_ROWS,t.min.y),Pt.pixelStorei(Pt.UNPACK_SKIP_IMAGES,t.min.z),n.isDataTexture||n.isData3DTexture?Pt.texSubImage3D(u,i,e.x,e.y,e.z,o,s,a,l,c,g.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Pt.compressedTexSubImage3D(u,i,e.x,e.y,e.z,o,s,a,l,g.data)):Pt.texSubImage3D(u,i,e.x,e.y,e.z,o,s,a,l,c,g),Pt.pixelStorei(Pt.UNPACK_ROW_LENGTH,d),Pt.pixelStorei(Pt.UNPACK_IMAGE_HEIGHT,h),Pt.pixelStorei(Pt.UNPACK_SKIP_PIXELS,f),Pt.pixelStorei(Pt.UNPACK_SKIP_ROWS,p),Pt.pixelStorei(Pt.UNPACK_SKIP_IMAGES,m),0===i&&r.generateMipmaps&&Pt.generateMipmap(u),tt.unbindTexture()},this.initTexture=function(t){t.isCubeTexture?rt.setTextureCube(t,0):t.isData3DTexture?rt.setTexture3D(t,0):t.isDataArrayTexture||t.isCompressedArrayTexture?rt.setTexture2DArray(t,0):rt.setTexture2D(t,0),tt.unbindTexture()},this.resetState=function(){E=0,M=0,T=null,tt.reset(),Ot.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return je}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(t){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!t}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Te?_e:be}set outputEncoding(t){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=t===_e?Te:Ce}}class qu extends $u{}qu.prototype.isWebGL1Renderer=!0;class Yu extends Yr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(e.object.backgroundIntensity=this.backgroundIntensity),e}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(t){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=t}}class Xu{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=Be,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Xe()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Xe()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Xe()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Zu=new qn;class Ku{constructor(t,e,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)Zu.fromBufferAttribute(this,e),Zu.applyMatrix4(t),this.setXYZ(e,Zu.x,Zu.y,Zu.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Zu.fromBufferAttribute(this,e),Zu.applyNormalMatrix(t),this.setXYZ(e,Zu.x,Zu.y,Zu.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Zu.fromBufferAttribute(this,e),Zu.transformDirection(t),this.setXYZ(e,Zu.x,Zu.y,Zu.z);return this}setX(t,e){return this.normalized&&(e=vn(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=vn(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=vn(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=vn(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=gn(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=gn(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=gn(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=gn(e,this.array)),e}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=vn(e,this.array),n=vn(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=vn(e,this.array),n=vn(n,this.array),r=vn(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this}setXYZW(t,e,n,r,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=vn(e,this.array),n=vn(n,this.array),r=vn(r,this.array),i=vn(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return new yi(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Ku(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Ju extends li{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new fi(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let Qu;const td=new qn,ed=new qn,nd=new qn,rd=new bn,id=new bn,od=new Sr,sd=new qn,ad=new qn,ld=new qn,cd=new bn,ud=new bn,dd=new bn;class hd extends Yr{constructor(t){if(super(),this.isSprite=!0,this.type="Sprite",void 0===Qu){Qu=new ki;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),e=new Xu(t,5);Qu.setIndex([0,1,2,0,2,3]),Qu.setAttribute("position",new Ku(e,3,0,!1)),Qu.setAttribute("uv",new Ku(e,2,3,!1))}this.geometry=Qu,this.material=void 0!==t?t:new Ju,this.center=new bn(.5,.5)}raycast(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),ed.setFromMatrixScale(this.matrixWorld),od.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),nd.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&ed.multiplyScalar(-nd.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const o=this.center;fd(sd.set(-.5,-.5,0),nd,o,ed,r,i),fd(ad.set(.5,-.5,0),nd,o,ed,r,i),fd(ld.set(.5,.5,0),nd,o,ed,r,i),cd.set(0,0),ud.set(1,0),dd.set(1,1);let s=t.ray.intersectTriangle(sd,ad,ld,!1,td);if(null===s&&(fd(ad.set(-.5,.5,0),nd,o,ed,r,i),ud.set(0,1),s=t.ray.intersectTriangle(sd,ld,ad,!1,td),null===s))return;const a=t.ray.origin.distanceTo(td);a<t.near||a>t.far||e.push({distance:a,point:td.clone(),uv:si.getInterpolation(td,sd,ad,ld,cd,ud,dd,new bn),face:null,object:this})}copy(t,e){return super.copy(t,e),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}function fd(t,e,n,r,i,o){rd.subVectors(t,n).addScalar(.5).multiply(r),void 0!==i?(id.x=o*rd.x-i*rd.y,id.y=i*rd.x+o*rd.y):id.copy(rd),t.copy(e),t.x+=id.x,t.y+=id.y,t.applyMatrix4(od)}class pd extends li{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new fi(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const md=new qn,gd=new qn,vd=new Sr,yd=new xr,bd=new pr;class _d extends Yr{constructor(t=new ki,e=new pd){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[0];for(let t=1,r=e.count;t<r;t++)md.fromBufferAttribute(e,t-1),gd.fromBufferAttribute(e,t),n[t]=n[t-1],n[t]+=md.distanceTo(gd);t.setAttribute("lineDistance",new wi(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,i=t.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),bd.copy(n.boundingSphere),bd.applyMatrix4(r),bd.radius+=i,!1===t.ray.intersectsSphere(bd))return;vd.copy(r).invert(),yd.copy(t.ray).applyMatrix4(vd);const s=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=s*s,l=new qn,c=new qn,u=new qn,d=new qn,h=this.isLineSegments?2:1,f=n.index,p=n.attributes,m=p.position;if(null!==f){const n=Math.max(0,o.start),r=Math.min(f.count,o.start+o.count);for(let i=n,o=r-1;i<o;i+=h){const n=f.getX(i),r=f.getX(i+1);l.fromBufferAttribute(m,n),c.fromBufferAttribute(m,r);const o=yd.distanceSqToSegment(l,c,d,u);if(o>a)continue;d.applyMatrix4(this.matrixWorld);const s=t.ray.origin.distanceTo(d);s<t.near||s>t.far||e.push({distance:s,point:u.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}else{const n=Math.max(0,o.start),r=Math.min(m.count,o.start+o.count);for(let i=n,o=r-1;i<o;i+=h){l.fromBufferAttribute(m,i),c.fromBufferAttribute(m,i+1);const n=yd.distanceSqToSegment(l,c,d,u);if(n>a)continue;d.applyMatrix4(this.matrixWorld);const r=t.ray.origin.distanceTo(d);r<t.near||r>t.far||e.push({distance:r,point:u.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry,e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}}class wd{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,r=this.getPoint(0),i=0;e.push(0);for(let o=1;o<=t;o++)n=this.getPoint(o/t),i+=n.distanceTo(r),e.push(i),r=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let r=0;const i=n.length;let o;o=e||t*n[i-1];let s,a=0,l=i-1;while(a<=l)if(r=Math.floor(a+(l-a)/2),s=n[r]-o,s<0)a=r+1;else{if(!(s>0)){l=r;break}l=r-1}if(r=l,n[r]===o)return r/(i-1);const c=n[r],u=n[r+1],d=u-c,h=(o-c)/d,f=(r+h)/(i-1);return f}getTangent(t,e){const n=1e-4;let r=t-n,i=t+n;r<0&&(r=0),i>1&&(i=1);const o=this.getPoint(r),s=this.getPoint(i),a=e||(o.isVector2?new bn:new qn);return a.copy(s).sub(o).normalize(),a}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new qn,r=[],i=[],o=[],s=new qn,a=new Sr;for(let h=0;h<=t;h++){const e=h/t;r[h]=this.getTangentAt(e,new qn)}i[0]=new qn,o[0]=new qn;let l=Number.MAX_VALUE;const c=Math.abs(r[0].x),u=Math.abs(r[0].y),d=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),d<=l&&n.set(0,0,1),s.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],s),o[0].crossVectors(r[0],i[0]);for(let h=1;h<=t;h++){if(i[h]=i[h-1].clone(),o[h]=o[h-1].clone(),s.crossVectors(r[h-1],r[h]),s.length()>Number.EPSILON){s.normalize();const t=Math.acos(Ze(r[h-1].dot(r[h]),-1,1));i[h].applyMatrix4(a.makeRotationAxis(s,t))}o[h].crossVectors(r[h],i[h])}if(!0===e){let e=Math.acos(Ze(i[0].dot(i[t]),-1,1));e/=t,r[0].dot(s.crossVectors(i[0],i[t]))>0&&(e=-e);for(let n=1;n<=t;n++)i[n].applyMatrix4(a.makeRotationAxis(r[n],e*n)),o[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class xd extends wd{constructor(t=0,e=0,n=1,r=1,i=0,o=2*Math.PI,s=!1,a=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=s,this.aRotation=a}getPoint(t,e){const n=e||new bn,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const o=Math.abs(i)<Number.EPSILON;while(i<0)i+=r;while(i>r)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);const s=this.aStartAngle+t*i;let a=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),n=a-this.aX,r=l-this.aY;a=n*t-r*e+this.aX,l=n*e+r*t+this.aY}return n.set(a,l)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class Sd extends xd{constructor(t,e,n,r,i,o){super(t,e,n,n,r,i,o),this.isArcCurve=!0,this.type="ArcCurve"}}function Ed(){let t=0,e=0,n=0,r=0;function i(i,o,s,a){t=i,e=s,n=-3*i+3*o-2*s-a,r=2*i-2*o+s+a}return{initCatmullRom:function(t,e,n,r,o){i(e,n,o*(n-t),o*(r-e))},initNonuniformCatmullRom:function(t,e,n,r,o,s,a){let l=(e-t)/o-(n-t)/(o+s)+(n-e)/s,c=(n-e)/s-(r-e)/(s+a)+(r-n)/a;l*=s,c*=s,i(e,n,l,c)},calc:function(i){const o=i*i,s=o*i;return t+e*i+n*o+r*s}}}const Md=new qn,Td=new Ed,Cd=new Ed,Ad=new Ed;class kd extends wd{constructor(t=[],e=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=r}getPoint(t,e=new qn){const n=e,r=this.points,i=r.length,o=(i-(this.closed?0:1))*t;let s,a,l=Math.floor(o),c=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/i)+1)*i:0===c&&l===i-1&&(l=i-2,c=1),this.closed||l>0?s=r[(l-1)%i]:(Md.subVectors(r[0],r[1]).add(r[0]),s=Md);const u=r[l%i],d=r[(l+1)%i];if(this.closed||l+2<i?a=r[(l+2)%i]:(Md.subVectors(r[i-1],r[i-2]).add(r[i-1]),a=Md),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(s.distanceToSquared(u),t),n=Math.pow(u.distanceToSquared(d),t),r=Math.pow(d.distanceToSquared(a),t);n<1e-4&&(n=1),e<1e-4&&(e=n),r<1e-4&&(r=n),Td.initNonuniformCatmullRom(s.x,u.x,d.x,a.x,e,n,r),Cd.initNonuniformCatmullRom(s.y,u.y,d.y,a.y,e,n,r),Ad.initNonuniformCatmullRom(s.z,u.z,d.z,a.z,e,n,r)}else"catmullrom"===this.curveType&&(Td.initCatmullRom(s.x,u.x,d.x,a.x,this.tension),Cd.initCatmullRom(s.y,u.y,d.y,a.y,this.tension),Ad.initCatmullRom(s.z,u.z,d.z,a.z,this.tension));return n.set(Td.calc(c),Cd.calc(c),Ad.calc(c)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new qn).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function Od(t,e,n,r,i){const o=.5*(r-e),s=.5*(i-n),a=t*t,l=t*a;return(2*n-2*r+o+s)*l+(-3*n+3*r-2*o-s)*a+o*t+n}function Rd(t,e){const n=1-t;return n*n*e}function Pd(t,e){return 2*(1-t)*t*e}function Ld(t,e){return t*t*e}function Dd(t,e,n,r){return Rd(t,e)+Pd(t,n)+Ld(t,r)}function Id(t,e){const n=1-t;return n*n*n*e}function Nd(t,e){const n=1-t;return 3*n*n*t*e}function Ud(t,e){return 3*(1-t)*t*t*e}function Fd(t,e){return t*t*t*e}function Bd(t,e,n,r,i){return Id(t,e)+Nd(t,n)+Ud(t,r)+Fd(t,i)}class Vd extends wd{constructor(t=new bn,e=new bn,n=new bn,r=new bn){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new bn){const n=e,r=this.v0,i=this.v1,o=this.v2,s=this.v3;return n.set(Bd(t,r.x,i.x,o.x,s.x),Bd(t,r.y,i.y,o.y,s.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class zd extends wd{constructor(t=new qn,e=new qn,n=new qn,r=new qn){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new qn){const n=e,r=this.v0,i=this.v1,o=this.v2,s=this.v3;return n.set(Bd(t,r.x,i.x,o.x,s.x),Bd(t,r.y,i.y,o.y,s.y),Bd(t,r.z,i.z,o.z,s.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class jd extends wd{constructor(t=new bn,e=new bn){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new bn){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new bn){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Hd extends wd{constructor(t=new qn,e=new qn){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new qn){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new qn){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Wd extends wd{constructor(t=new bn,e=new bn,n=new bn){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new bn){const n=e,r=this.v0,i=this.v1,o=this.v2;return n.set(Dd(t,r.x,i.x,o.x),Dd(t,r.y,i.y,o.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Gd extends wd{constructor(t=new qn,e=new qn,n=new qn){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new qn){const n=e,r=this.v0,i=this.v1,o=this.v2;return n.set(Dd(t,r.x,i.x,o.x),Dd(t,r.y,i.y,o.y),Dd(t,r.z,i.z,o.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class $d extends wd{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new bn){const n=e,r=this.points,i=(r.length-1)*t,o=Math.floor(i),s=i-o,a=r[0===o?o:o-1],l=r[o],c=r[o>r.length-2?r.length-1:o+1],u=r[o>r.length-3?r.length-1:o+2];return n.set(Od(s,a.x,l.x,c.x,u.x),Od(s,a.y,l.y,c.y,u.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new bn).fromArray(n))}return this}}var qd=Object.freeze({__proto__:null,ArcCurve:Sd,CatmullRomCurve3:kd,CubicBezierCurve:Vd,CubicBezierCurve3:zd,EllipseCurve:xd,LineCurve:jd,LineCurve3:Hd,QuadraticBezierCurve:Wd,QuadraticBezierCurve3:Gd,SplineCurve:$d});class Yd extends ki{constructor(t=1,e=1,n=1,r=32,i=1,o=!1,s=0,a=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:s,thetaLength:a};const l=this;r=Math.floor(r),i=Math.floor(i);const c=[],u=[],d=[],h=[];let f=0;const p=[],m=n/2;let g=0;function v(){const o=new qn,v=new qn;let y=0;const b=(e-t)/n;for(let l=0;l<=i;l++){const c=[],g=l/i,y=g*(e-t)+t;for(let t=0;t<=r;t++){const e=t/r,i=e*a+s,l=Math.sin(i),p=Math.cos(i);v.x=y*l,v.y=-g*n+m,v.z=y*p,u.push(v.x,v.y,v.z),o.set(l,b,p).normalize(),d.push(o.x,o.y,o.z),h.push(e,1-g),c.push(f++)}p.push(c)}for(let t=0;t<r;t++)for(let e=0;e<i;e++){const n=p[e][t],r=p[e+1][t],i=p[e+1][t+1],o=p[e][t+1];c.push(n,r,o),c.push(r,i,o),y+=6}l.addGroup(g,y,0),g+=y}function y(n){const i=f,o=new bn,p=new qn;let v=0;const y=!0===n?t:e,b=!0===n?1:-1;for(let t=1;t<=r;t++)u.push(0,m*b,0),d.push(0,b,0),h.push(.5,.5),f++;const _=f;for(let t=0;t<=r;t++){const e=t/r,n=e*a+s,i=Math.cos(n),l=Math.sin(n);p.x=y*l,p.y=m*b,p.z=y*i,u.push(p.x,p.y,p.z),d.push(0,b,0),o.x=.5*i+.5,o.y=.5*l*b+.5,h.push(o.x,o.y),f++}for(let t=0;t<r;t++){const e=i+t,r=_+t;!0===n?c.push(r,r+1,e):c.push(r+1,r,e),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}v(),!1===o&&(t>0&&y(!0),e>0&&y(!1)),this.setIndex(c),this.setAttribute("position",new wi(u,3)),this.setAttribute("normal",new wi(d,3)),this.setAttribute("uv",new wi(h,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Yd(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Xd extends Yd{constructor(t=1,e=1,n=32,r=1,i=!1,o=0,s=2*Math.PI){super(0,t,e,n,r,i,o,s),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:s}}static fromJSON(t){return new Xd(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Zd extends ki{constructor(t=1,e=32,n=16,r=0,i=2*Math.PI,o=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:s},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const a=Math.min(o+s,Math.PI);let l=0;const c=[],u=new qn,d=new qn,h=[],f=[],p=[],m=[];for(let g=0;g<=n;g++){const h=[],v=g/n;let y=0;0===g&&0===o?y=.5/e:g===n&&a===Math.PI&&(y=-.5/e);for(let n=0;n<=e;n++){const a=n/e;u.x=-t*Math.cos(r+a*i)*Math.sin(o+v*s),u.y=t*Math.cos(o+v*s),u.z=t*Math.sin(r+a*i)*Math.sin(o+v*s),f.push(u.x,u.y,u.z),d.copy(u).normalize(),p.push(d.x,d.y,d.z),m.push(a+y,1-v),h.push(l++)}c.push(h)}for(let g=0;g<n;g++)for(let t=0;t<e;t++){const e=c[g][t+1],r=c[g][t],i=c[g+1][t],s=c[g+1][t+1];(0!==g||o>0)&&h.push(e,r,s),(g!==n-1||a<Math.PI)&&h.push(r,i,s)}this.setIndex(h),this.setAttribute("position",new wi(f,3)),this.setAttribute("normal",new wi(p,3)),this.setAttribute("uv",new wi(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Zd(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class Kd extends ki{constructor(t=new Gd(new qn(-1,-1,0),new qn(-1,1,0),new qn(1,1,0)),e=64,n=1,r=8,i=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:i};const o=t.computeFrenetFrames(e,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const s=new qn,a=new qn,l=new bn;let c=new qn;const u=[],d=[],h=[],f=[];function p(){for(let t=0;t<e;t++)m(t);m(!1===i?e:0),v(),g()}function m(i){c=t.getPointAt(i/e,c);const l=o.normals[i],h=o.binormals[i];for(let t=0;t<=r;t++){const e=t/r*Math.PI*2,i=Math.sin(e),o=-Math.cos(e);a.x=o*l.x+i*h.x,a.y=o*l.y+i*h.y,a.z=o*l.z+i*h.z,a.normalize(),d.push(a.x,a.y,a.z),s.x=c.x+n*a.x,s.y=c.y+n*a.y,s.z=c.z+n*a.z,u.push(s.x,s.y,s.z)}}function g(){for(let t=1;t<=e;t++)for(let e=1;e<=r;e++){const n=(r+1)*(t-1)+(e-1),i=(r+1)*t+(e-1),o=(r+1)*t+e,s=(r+1)*(t-1)+e;f.push(n,i,s),f.push(i,o,s)}}function v(){for(let t=0;t<=e;t++)for(let n=0;n<=r;n++)l.x=t/e,l.y=n/r,h.push(l.x,l.y)}p(),this.setIndex(f),this.setAttribute("position",new wi(u,3)),this.setAttribute("normal",new wi(d,3)),this.setAttribute("uv",new wi(h,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new Kd((new qd[t.path.type]).fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class Jd extends li{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new fi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new fi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Se,this.normalScale=new bn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=G,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}function Qd(t,e,n){return eh(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)}function th(t,e,n){return!t||!n&&t.constructor===e?t:"number"===typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)}function eh(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}class nh{constructor(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{let o;n:{r:if(!(t<r)){for(let o=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(i=r,r=e[++n],t<r)break e}o=e.length;break n}if(t>=i)break t;{const s=e[1];t<s&&(n=2,i=s);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===o)break;if(r=i,i=e[--n-1],t>=i)break e}o=n,n=0}}while(n<o){const r=n+o>>>1;t<e[r]?o=r:n=r+1}if(r=e[n],i=e[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r;for(let o=0;o!==r;++o)e[o]=n[i+o];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class rh extends nh{constructor(t,e,n,r){super(t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ge,endingEnd:ge}}intervalChanged_(t,e,n){const r=this.parameterPositions;let i=t-2,o=t+1,s=r[i],a=r[o];if(void 0===s)switch(this.getSettings_().endingStart){case ve:i=t,s=2*e-n;break;case ye:i=r.length-2,s=e+r[i]-r[i+1];break;default:i=t,s=n}if(void 0===a)switch(this.getSettings_().endingEnd){case ve:o=t,a=2*n-e;break;case ye:o=1,a=n+r[1]-r[0];break;default:o=t-1,a=e}const l=.5*(n-e),c=this.valueSize;this._weightPrev=l/(e-s),this._weightNext=l/(a-n),this._offsetPrev=i*c,this._offsetNext=o*c}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=t*s,l=a-s,c=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,h=this._weightNext,f=(n-e)/(r-e),p=f*f,m=p*f,g=-d*m+2*d*p-d*f,v=(1+d)*m+(-1.5-2*d)*p+(-.5+d)*f+1,y=(-1-h)*m+(1.5+h)*p+.5*f,b=h*m-h*p;for(let _=0;_!==s;++_)i[_]=g*o[c+_]+v*o[l+_]+y*o[a+_]+b*o[u+_];return i}}class ih extends nh{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=t*s,l=a-s,c=(n-e)/(r-e),u=1-c;for(let d=0;d!==s;++d)i[d]=o[l+d]*u+o[a+d]*c;return i}}class oh extends nh{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class sh{constructor(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=th(e,this.TimeBufferType),this.values=th(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:th(t.times,Array),values:th(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new oh(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new ih(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new rh(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case fe:e=this.InterpolantFactoryMethodDiscrete;break;case pe:e=this.InterpolantFactoryMethodLinear;break;case me:e=this.InterpolantFactoryMethodSmooth;break}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return fe;case this.InterpolantFactoryMethodLinear:return pe;case this.InterpolantFactoryMethodSmooth:return me}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this}trim(t,e){const n=this.times,r=n.length;let i=0,o=r-1;while(i!==r&&n[i]<t)++i;while(-1!==o&&n[o]>e)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const t=this.getValueSize();this.times=Qd(n,i,o),this.values=Qd(this.values,i*t,o*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let s=0;s!==i;s++){const e=n[s];if("number"===typeof e&&isNaN(e)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,e),t=!1;break}if(null!==o&&o>e){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,e,o),t=!1;break}o=e}if(void 0!==r&&eh(r))for(let s=0,a=r.length;s!==a;++s){const e=r[s];if(isNaN(e)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,e),t=!1;break}}return t}optimize(){const t=Qd(this.times),e=Qd(this.values),n=this.getValueSize(),r=this.getInterpolation()===me,i=t.length-1;let o=1;for(let s=1;s<i;++s){let i=!1;const a=t[s],l=t[s+1];if(a!==l&&(1!==s||a!==t[0]))if(r)i=!0;else{const t=s*n,r=t-n,o=t+n;for(let s=0;s!==n;++s){const n=e[t+s];if(n!==e[r+s]||n!==e[o+s]){i=!0;break}}}if(i){if(s!==o){t[o]=t[s];const r=s*n,i=o*n;for(let t=0;t!==n;++t)e[i+t]=e[r+t]}++o}}if(i>0){t[o]=t[i];for(let t=i*n,r=o*n,s=0;s!==n;++s)e[r+s]=e[t+s];++o}return o!==t.length?(this.times=Qd(t,0,o),this.values=Qd(e,0,o*n)):(this.times=t,this.values=e),this}clone(){const t=Qd(this.times,0),e=Qd(this.values,0),n=this.constructor,r=new n(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}}sh.prototype.TimeBufferType=Float32Array,sh.prototype.ValueBufferType=Float32Array,sh.prototype.DefaultInterpolation=pe;class ah extends sh{}ah.prototype.ValueTypeName="bool",ah.prototype.ValueBufferType=Array,ah.prototype.DefaultInterpolation=fe,ah.prototype.InterpolantFactoryMethodLinear=void 0,ah.prototype.InterpolantFactoryMethodSmooth=void 0;class lh extends sh{}lh.prototype.ValueTypeName="color";class ch extends sh{}ch.prototype.ValueTypeName="number";class uh extends nh{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=(n-e)/(r-e);let l=t*s;for(let c=l+s;l!==c;l+=4)$n.slerpFlat(i,0,o,l-s,o,l,a);return i}}class dh extends sh{InterpolantFactoryMethodLinear(t){return new uh(this.times,this.values,this.getValueSize(),t)}}dh.prototype.ValueTypeName="quaternion",dh.prototype.DefaultInterpolation=pe,dh.prototype.InterpolantFactoryMethodSmooth=void 0;class hh extends sh{}hh.prototype.ValueTypeName="string",hh.prototype.ValueBufferType=Array,hh.prototype.DefaultInterpolation=fe,hh.prototype.InterpolantFactoryMethodLinear=void 0,hh.prototype.InterpolantFactoryMethodSmooth=void 0;class fh extends sh{}fh.prototype.ValueTypeName="vector";const ph={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class mh{constructor(t,e,n){const r=this;let i,o=!1,s=0,a=0;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,!1===o&&void 0!==r.onStart&&r.onStart(t,s,a),o=!0},this.itemEnd=function(t){s++,void 0!==r.onProgress&&r.onProgress(t,s,a),s===a&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return i?i(t):t},this.setURLModifier=function(t){return i=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){const e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(let e=0,n=l.length;e<n;e+=2){const n=l[e],r=l[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return r}return null}}}const gh=new mh;class vh{constructor(t){this.manager=void 0!==t?t:gh,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise((function(r,i){n.load(t,r,e,i)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}class yh extends vh{constructor(t){super(t)}load(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,o=ph.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;const s=Sn("img");function a(){c(),ph.add(t,this),e&&e(this),i.manager.itemEnd(t)}function l(e){c(),r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}function c(){s.removeEventListener("load",a,!1),s.removeEventListener("error",l,!1)}return s.addEventListener("load",a,!1),s.addEventListener("error",l,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),i.manager.itemStart(t),s.src=t,s}}class bh extends vh{constructor(t){super(t)}load(t,e,n,r){const i=new zn,o=new yh(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,(function(t){i.image=t,i.needsUpdate=!0,void 0!==e&&e(i)}),n,r),i}}class _h extends Yr{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new fi(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}const wh=new Sr,xh=new qn,Sh=new qn;class Eh{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new bn(512,512),this.map=null,this.mapPass=null,this.matrix=new Sr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new bo,this._frameExtents=new bn(1,1),this._viewportCount=1,this._viewports=[new jn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;xh.setFromMatrixPosition(t.matrixWorld),e.position.copy(xh),Sh.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(Sh),e.updateMatrixWorld(),wh.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(wh),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(wh)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class Mh extends Eh{constructor(){super(new ll(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Th extends _h{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Yr.DEFAULT_UP),this.updateMatrix(),this.target=new Yr,this.shadow=new Mh}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class Ch extends _h{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class Ah{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=kh(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=kh();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function kh(){return("undefined"===typeof performance?Date:performance).now()}const Oh="\\[\\]\\.:\\/",Rh=new RegExp("["+Oh+"]","g"),Ph="[^"+Oh+"]",Lh="[^"+Oh.replace("\\.","")+"]",Dh=/((?:WC+[\/:])*)/.source.replace("WC",Ph),Ih=/(WCOD+)?/.source.replace("WCOD",Lh),Nh=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Ph),Uh=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Ph),Fh=new RegExp("^"+Dh+Ih+Nh+Uh+"$"),Bh=["material","materials","bones","map"];class Vh{constructor(t,e,n){const r=n||zh.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}class zh{constructor(t,e,n){this.path=e,this.parsedPath=n||zh.parseTrackName(e),this.node=zh.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new zh.Composite(t,e,n):new zh(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Rh,"")}static parseTrackName(t){const e=Fh.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const t=n.nodeName.substring(r+1);-1!==Bh.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let r=0;r<t.length;r++){const i=t[r];if(i.name===e||i.uuid===e)return i;const o=n(i.children);if(o)return o}return null},r=n(t.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)t[e++]=n[r]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,r=e.propertyName;let i=e.propertyIndex;if(t||(t=zh.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===r){r=e;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==r){if(void 0===t[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[r]}}const o=t[r];if(void 0===o){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",t)}let s=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[i]&&(i=t.morphTargetDictionary[i])}a=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(a=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}zh.Composite=Vh,zh.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},zh.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},zh.prototype.GetterByBindingType=[zh.prototype._getValue_direct,zh.prototype._getValue_array,zh.prototype._getValue_arrayElement,zh.prototype._getValue_toArray],zh.prototype.SetterByBindingTypeAndVersioning=[[zh.prototype._setValue_direct,zh.prototype._setValue_direct_setNeedsUpdate,zh.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[zh.prototype._setValue_array,zh.prototype._setValue_array_setNeedsUpdate,zh.prototype._setValue_array_setMatrixWorldNeedsUpdate],[zh.prototype._setValue_arrayElement,zh.prototype._setValue_arrayElement_setNeedsUpdate,zh.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[zh.prototype._setValue_fromArray,zh.prototype._setValue_fromArray_setNeedsUpdate,zh.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];new Float32Array(1);class jh{constructor(t,e,n=0,r=1/0){this.ray=new xr(t,e),this.near=n,this.far=r,this.camera=null,this.layers=new Dr,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}intersectObject(t,e=!0,n=[]){return Wh(t,this,n,e),n.sort(Hh),n}intersectObjects(t,e=!0,n=[]){for(let r=0,i=t.length;r<i;r++)Wh(t[r],this,n,e);return n.sort(Hh),n}}function Hh(t,e){return t.distance-e.distance}function Wh(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===r){const r=t.children;for(let t=0,i=r.length;t<i;t++)Wh(r[t],e,n,!0)}}class Gh{constructor(t=1,e=0,n=0){return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){const t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(Ze(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:r}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=r)},1517:function(t,e,n){"use strict";n.d(e,{M:function(){return u},j:function(){return i}});n(7658);var r=n(899);class i extends r.Tme{constructor(t=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=t,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new r.FM8(.5,.5),this.addEventListener("removed",(function(){this.traverse((function(t){t.element instanceof Element&&null!==t.element.parentNode&&t.element.parentNode.removeChild(t.element)}))}))}copy(t,e){return super.copy(t,e),this.element=t.element.cloneNode(!0),this.center=t.center,this}}const o=new r.Pa4,s=new r.yGw,a=new r.yGw,l=new r.Pa4,c=new r.Pa4;class u{constructor(t={}){const e=this;let n,r,i,u;const d={objects:new WeakMap},h=void 0!==t.element?t.element:document.createElement("div");function f(t,n,r){if(t.isCSS2DObject){o.setFromMatrixPosition(t.matrixWorld),o.applyMatrix4(a);const s=!0===t.visible&&o.z>=-1&&o.z<=1&&!0===t.layers.test(r.layers);if(t.element.style.display=!0===s?"":"none",!0===s){t.onBeforeRender(e,n,r);const s=t.element;s.style.transform="translate("+-100*t.center.x+"%,"+-100*t.center.y+"%)translate("+(o.x*i+i)+"px,"+(-o.y*u+u)+"px)",s.parentNode!==h&&h.appendChild(s),t.onAfterRender(e,n,r)}const l={distanceToCameraSquared:p(r,t)};d.objects.set(t,l)}for(let e=0,i=t.children.length;e<i;e++)f(t.children[e],n,r)}function p(t,e){return l.setFromMatrixPosition(t.matrixWorld),c.setFromMatrixPosition(e.matrixWorld),l.distanceToSquared(c)}function m(t){const e=[];return t.traverse((function(t){t.isCSS2DObject&&e.push(t)})),e}function g(t){const e=m(t).sort((function(t,e){if(t.renderOrder!==e.renderOrder)return e.renderOrder-t.renderOrder;const n=d.objects.get(t).distanceToCameraSquared,r=d.objects.get(e).distanceToCameraSquared;return n-r})),n=e.length;for(let r=0,i=e.length;r<i;r++)e[r].element.style.zIndex=n-r}h.style.overflow="hidden",this.domElement=h,this.getSize=function(){return{width:n,height:r}},this.render=function(t,e){!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===e.parent&&!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),s.copy(e.matrixWorldInverse),a.multiplyMatrices(e.projectionMatrix,s),f(t,t,e),g(t)},this.setSize=function(t,e){n=t,r=e,i=n/2,u=r/2,h.style.width=t+"px",h.style.height=e+"px"}}}},4731:function(t,e,n){"use strict";n.d(e,{PO:function(){return B},p7:function(){return ee}});n(7658),n(1703);var r=n(8473),i=n(4188);
/*!
  * vue-router v4.2.2
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */
const o="undefined"!==typeof window;function s(t){return t.__esModule||"Module"===t[Symbol.toStringTag]}const a=Object.assign;function l(t,e){const n={};for(const r in e){const i=e[r];n[r]=u(i)?i.map(t):t(i)}return n}const c=()=>{},u=Array.isArray;const d=/\/$/,h=t=>t.replace(d,"");function f(t,e,n="/"){let r,i={},o="",s="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),o=e.slice(l+1,a>-1?a:e.length),i=t(o)),a>-1&&(r=r||e.slice(0,a),s=e.slice(a,e.length)),r=w(null!=r?r:e,n),{fullPath:r+(o&&"?")+o+s,path:r,query:i,hash:s}}function p(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function m(t,e){return e&&t.toLowerCase().startsWith(e.toLowerCase())?t.slice(e.length)||"/":t}function g(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&v(e.matched[r],n.matched[i])&&y(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function v(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function y(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!b(t[n],e[n]))return!1;return!0}function b(t,e){return u(t)?_(t,e):u(e)?_(e,t):t===e}function _(t,e){return u(e)?t.length===e.length&&t.every(((t,n)=>t===e[n])):1===t.length&&t[0]===e}function w(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];".."!==i&&"."!==i||r.push("");let o,s,a=n.length-1;for(o=0;o<r.length;o++)if(s=r[o],"."!==s){if(".."!==s)break;a>1&&a--}return n.slice(0,a).join("/")+"/"+r.slice(o-(o===r.length?1:0)).join("/")}var x,S;(function(t){t["pop"]="pop",t["push"]="push"})(x||(x={})),function(t){t["back"]="back",t["forward"]="forward",t["unknown"]=""}(S||(S={}));function E(t){if(!t)if(o){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return"/"!==t[0]&&"#"!==t[0]&&(t="/"+t),h(t)}const M=/^[^#]+#/;function T(t,e){return t.replace(M,"#")+e}function C(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const A=()=>({left:window.pageXOffset,top:window.pageYOffset});function k(t){let e;if("el"in t){const n=t.el,r="string"===typeof n&&n.startsWith("#");0;const i="string"===typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=C(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(null!=e.left?e.left:window.pageXOffset,null!=e.top?e.top:window.pageYOffset)}function O(t,e){const n=history.state?history.state.position-e:-1;return n+t}const R=new Map;function P(t,e){R.set(t,e)}function L(t){const e=R.get(t);return R.delete(t),e}let D=()=>location.protocol+"//"+location.host;function I(t,e){const{pathname:n,search:r,hash:i}=e,o=t.indexOf("#");if(o>-1){let e=i.includes(t.slice(o))?t.slice(o).length:1,n=i.slice(e);return"/"!==n[0]&&(n="/"+n),m(n,"")}const s=m(n,t);return s+r+i}function N(t,e,n,r){let i=[],o=[],s=null;const l=({state:o})=>{const a=I(t,location),l=n.value,c=e.value;let u=0;if(o){if(n.value=a,e.value=o,s&&s===l)return void(s=null);u=c?o.position-c.position:0}else r(a);i.forEach((t=>{t(n.value,l,{delta:u,type:x.pop,direction:u?u>0?S.forward:S.back:S.unknown})}))};function c(){s=n.value}function u(t){i.push(t);const e=()=>{const e=i.indexOf(t);e>-1&&i.splice(e,1)};return o.push(e),e}function d(){const{history:t}=window;t.state&&t.replaceState(a({},t.state,{scroll:A()}),"")}function h(){for(const t of o)t();o=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:c,listen:u,destroy:h}}function U(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?A():null}}function F(t){const{history:e,location:n}=window,r={value:I(t,n)},i={value:e.state};function o(r,o,s){const a=t.indexOf("#"),l=a>-1?(n.host&&document.querySelector("base")?t:t.slice(a))+r:D()+t+r;try{e[s?"replaceState":"pushState"](o,"",l),i.value=o}catch(c){console.error(c),n[s?"replace":"assign"](l)}}function s(t,n){const s=a({},e.state,U(i.value.back,t,i.value.forward,!0),n,{position:i.value.position});o(t,s,!0),r.value=t}function l(t,n){const s=a({},i.value,e.state,{forward:t,scroll:A()});o(s.current,s,!0);const l=a({},U(r.value,t,null),{position:s.position+1},n);o(t,l,!1),r.value=t}return i.value||o(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0),{location:r,state:i,push:l,replace:s}}function B(t){t=E(t);const e=F(t),n=N(t,e.state,e.location,e.replace);function r(t,e=!0){e||n.pauseListeners(),history.go(t)}const i=a({location:"",base:t,go:r,createHref:T.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function V(t){return"string"===typeof t||t&&"object"===typeof t}function z(t){return"string"===typeof t||"symbol"===typeof t}const j={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},H=Symbol("");var W;(function(t){t[t["aborted"]=4]="aborted",t[t["cancelled"]=8]="cancelled",t[t["duplicated"]=16]="duplicated"})(W||(W={}));function G(t,e){return a(new Error,{type:t,[H]:!0},e)}function $(t,e){return t instanceof Error&&H in t&&(null==e||!!(t.type&e))}const q="[^/]+?",Y={sensitive:!1,strict:!1,start:!0,end:!0},X=/[.+*?^${}()[\]/\\]/g;function Z(t,e){const n=a({},Y,e),r=[];let i=n.start?"^":"";const o=[];for(const a of t){const t=a.length?[]:[90];n.strict&&!a.length&&(i+="/");for(let e=0;e<a.length;e++){const r=a[e];let s=40+(n.sensitive?.25:0);if(0===r.type)e||(i+="/"),i+=r.value.replace(X,"\\$&"),s+=40;else if(1===r.type){const{value:t,repeatable:n,optional:l,regexp:c}=r;o.push({name:t,repeatable:n,optional:l});const u=c||q;if(u!==q){s+=10;try{new RegExp(`(${u})`)}catch(d){throw new Error(`Invalid custom RegExp for param "${t}" (${u}): `+d.message)}}let h=n?`((?:${u})(?:/(?:${u}))*)`:`(${u})`;e||(h=l&&a.length<2?`(?:/${h})`:"/"+h),l&&(h+="?"),i+=h,s+=20,l&&(s+=-8),n&&(s+=-20),".*"===u&&(s+=-50)}t.push(s)}r.push(t)}if(n.strict&&n.end){const t=r.length-1;r[t][r[t].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const s=new RegExp(i,n.sensitive?"":"i");function l(t){const e=t.match(s),n={};if(!e)return null;for(let r=1;r<e.length;r++){const t=e[r]||"",i=o[r-1];n[i.name]=t&&i.repeatable?t.split("/"):t}return n}function c(e){let n="",r=!1;for(const i of t){r&&n.endsWith("/")||(n+="/"),r=!1;for(const t of i)if(0===t.type)n+=t.value;else if(1===t.type){const{value:o,repeatable:s,optional:a}=t,l=o in e?e[o]:"";if(u(l)&&!s)throw new Error(`Provided param "${o}" is an array but it is not repeatable (* or + modifiers)`);const c=u(l)?l.join("/"):l;if(!c){if(!a)throw new Error(`Missing required param "${o}"`);i.length<2&&(n.endsWith("/")?n=n.slice(0,-1):r=!0)}n+=c}}return n||"/"}return{re:s,score:r,keys:o,parse:l,stringify:c}}function K(t,e){let n=0;while(n<t.length&&n<e.length){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?1===t.length&&80===t[0]?-1:1:t.length>e.length?1===e.length&&80===e[0]?1:-1:0}function J(t,e){let n=0;const r=t.score,i=e.score;while(n<r.length&&n<i.length){const t=K(r[n],i[n]);if(t)return t;n++}if(1===Math.abs(i.length-r.length)){if(Q(r))return 1;if(Q(i))return-1}return i.length-r.length}function Q(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const tt={type:0,value:""},et=/[a-zA-Z0-9_]/;function nt(t){if(!t)return[[]];if("/"===t)return[[tt]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(t){throw new Error(`ERR (${n})/"${c}": ${t}`)}let n=0,r=n;const i=[];let o;function s(){o&&i.push(o),o=[]}let a,l=0,c="",u="";function d(){c&&(0===n?o.push({type:0,value:c}):1===n||2===n||3===n?(o.length>1&&("*"===a||"+"===a)&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:c,regexp:u,repeatable:"*"===a||"+"===a,optional:"*"===a||"?"===a})):e("Invalid state to consume buffer"),c="")}function h(){c+=a}while(l<t.length)if(a=t[l++],"\\"!==a||2===n)switch(n){case 0:"/"===a?(c&&d(),s()):":"===a?(d(),n=1):h();break;case 4:h(),n=r;break;case 1:"("===a?n=2:et.test(a)?h():(d(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&l--);break;case 2:")"===a?"\\"==u[u.length-1]?u=u.slice(0,-1)+a:n=3:u+=a;break;case 3:d(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&l--,u="";break;default:e("Unknown state");break}else r=n,n=4;return 2===n&&e(`Unfinished custom RegExp for param "${c}"`),d(),s(),i}function rt(t,e,n){const r=Z(nt(t.path),n);const i=a(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf===!e.record.aliasOf&&e.children.push(i),i}function it(t,e){const n=[],r=new Map;function i(t){return r.get(t)}function o(t,n,r){const i=!r,l=st(t);l.aliasOf=r&&r.record;const d=ut(e,t),h=[l];if("alias"in t){const e="string"===typeof t.alias?[t.alias]:t.alias;for(const t of e)h.push(a({},l,{components:r?r.record.components:l.components,path:t,aliasOf:r?r.record:l}))}let f,p;for(const e of h){const{path:a}=e;if(n&&"/"!==a[0]){const t=n.record.path,r="/"===t[t.length-1]?"":"/";e.path=n.record.path+(a&&r+a)}if(f=rt(e,n,d),r?r.alias.push(f):(p=p||f,p!==f&&p.alias.push(f),i&&t.name&&!lt(f)&&s(t.name)),l.children){const t=l.children;for(let e=0;e<t.length;e++)o(t[e],f,r&&r.children[e])}r=r||f,(f.record.components&&Object.keys(f.record.components).length||f.record.name||f.record.redirect)&&u(f)}return p?()=>{s(p)}:c}function s(t){if(z(t)){const e=r.get(t);e&&(r.delete(t),n.splice(n.indexOf(e),1),e.children.forEach(s),e.alias.forEach(s))}else{const e=n.indexOf(t);e>-1&&(n.splice(e,1),t.record.name&&r.delete(t.record.name),t.children.forEach(s),t.alias.forEach(s))}}function l(){return n}function u(t){let e=0;while(e<n.length&&J(t,n[e])>=0&&(t.record.path!==n[e].record.path||!dt(t,n[e])))e++;n.splice(e,0,t),t.record.name&&!lt(t)&&r.set(t.record.name,t)}function d(t,e){let i,o,s,l={};if("name"in t&&t.name){if(i=r.get(t.name),!i)throw G(1,{location:t});0,s=i.record.name,l=a(ot(e.params,i.keys.filter((t=>!t.optional)).map((t=>t.name))),t.params&&ot(t.params,i.keys.map((t=>t.name)))),o=i.stringify(l)}else if("path"in t)o=t.path,i=n.find((t=>t.re.test(o))),i&&(l=i.parse(o),s=i.record.name);else{if(i=e.name?r.get(e.name):n.find((t=>t.re.test(e.path))),!i)throw G(1,{location:t,currentLocation:e});s=i.record.name,l=a({},e.params,t.params),o=i.stringify(l)}const c=[];let u=i;while(u)c.unshift(u.record),u=u.parent;return{name:s,path:o,params:l,matched:c,meta:ct(c)}}return e=ut({strict:!1,end:!0,sensitive:!1},e),t.forEach((t=>o(t))),{addRoute:o,resolve:d,removeRoute:s,getRoutes:l,getRecordMatcher:i}}function ot(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function st(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:at(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function at(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]="boolean"===typeof n?n:n[r];return e}function lt(t){while(t){if(t.record.aliasOf)return!0;t=t.parent}return!1}function ct(t){return t.reduce(((t,e)=>a(t,e.meta)),{})}function ut(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function dt(t,e){return e.children.some((e=>e===t||dt(t,e)))}const ht=/#/g,ft=/&/g,pt=/\//g,mt=/=/g,gt=/\?/g,vt=/\+/g,yt=/%5B/g,bt=/%5D/g,_t=/%5E/g,wt=/%60/g,xt=/%7B/g,St=/%7C/g,Et=/%7D/g,Mt=/%20/g;function Tt(t){return encodeURI(""+t).replace(St,"|").replace(yt,"[").replace(bt,"]")}function Ct(t){return Tt(t).replace(xt,"{").replace(Et,"}").replace(_t,"^")}function At(t){return Tt(t).replace(vt,"%2B").replace(Mt,"+").replace(ht,"%23").replace(ft,"%26").replace(wt,"`").replace(xt,"{").replace(Et,"}").replace(_t,"^")}function kt(t){return At(t).replace(mt,"%3D")}function Ot(t){return Tt(t).replace(ht,"%23").replace(gt,"%3F")}function Rt(t){return null==t?"":Ot(t).replace(pt,"%2F")}function Pt(t){try{return decodeURIComponent(""+t)}catch(e){}return""+t}function Lt(t){const e={};if(""===t||"?"===t)return e;const n="?"===t[0],r=(n?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const t=r[i].replace(vt," "),n=t.indexOf("="),o=Pt(n<0?t:t.slice(0,n)),s=n<0?null:Pt(t.slice(n+1));if(o in e){let t=e[o];u(t)||(t=e[o]=[t]),t.push(s)}else e[o]=s}return e}function Dt(t){let e="";for(let n in t){const r=t[n];if(n=kt(n),null==r){void 0!==r&&(e+=(e.length?"&":"")+n);continue}const i=u(r)?r.map((t=>t&&At(t))):[r&&At(r)];i.forEach((t=>{void 0!==t&&(e+=(e.length?"&":"")+n,null!=t&&(e+="="+t))}))}return e}function It(t){const e={};for(const n in t){const r=t[n];void 0!==r&&(e[n]=u(r)?r.map((t=>null==t?null:""+t)):null==r?r:""+r)}return e}const Nt=Symbol(""),Ut=Symbol(""),Ft=Symbol(""),Bt=Symbol(""),Vt=Symbol("");function zt(){let t=[];function e(e){return t.push(e),()=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function jt(t,e,n,r,i){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise(((s,a)=>{const l=t=>{!1===t?a(G(4,{from:n,to:e})):t instanceof Error?a(t):V(t)?a(G(2,{from:e,to:t})):(o&&r.enterCallbacks[i]===o&&"function"===typeof t&&o.push(t),s())},c=t.call(r&&r.instances[i],e,n,l);let u=Promise.resolve(c);t.length<3&&(u=u.then(l)),u.catch((t=>a(t)))}))}function Ht(t,e,n,r){const i=[];for(const o of t){0;for(const t in o.components){let a=o.components[t];if("beforeRouteEnter"===e||o.instances[t])if(Wt(a)){const s=a.__vccOpts||a,l=s[e];l&&i.push(jt(l,n,r,o,t))}else{let l=a();0,i.push((()=>l.then((i=>{if(!i)return Promise.reject(new Error(`Couldn't resolve component "${t}" at "${o.path}"`));const a=s(i)?i.default:i;o.components[t]=a;const l=a.__vccOpts||a,c=l[e];return c&&jt(c,n,r,o,t)()}))))}}}return i}function Wt(t){return"object"===typeof t||"displayName"in t||"props"in t||"__vccOpts"in t}function Gt(t){const e=(0,r.f3)(Ft),n=(0,r.f3)(Bt),o=(0,r.Fl)((()=>e.resolve((0,i.SU)(t.to)))),s=(0,r.Fl)((()=>{const{matched:t}=o.value,{length:e}=t,r=t[e-1],i=n.matched;if(!r||!i.length)return-1;const s=i.findIndex(v.bind(null,r));if(s>-1)return s;const a=Zt(t[e-2]);return e>1&&Zt(r)===a&&i[i.length-1].path!==a?i.findIndex(v.bind(null,t[e-2])):s})),a=(0,r.Fl)((()=>s.value>-1&&Xt(n.params,o.value.params))),l=(0,r.Fl)((()=>s.value>-1&&s.value===n.matched.length-1&&y(n.params,o.value.params)));function u(n={}){return Yt(n)?e[(0,i.SU)(t.replace)?"replace":"push"]((0,i.SU)(t.to)).catch(c):Promise.resolve()}return{route:o,href:(0,r.Fl)((()=>o.value.href)),isActive:a,isExactActive:l,navigate:u}}const $t=(0,r.aZ)({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Gt,setup(t,{slots:e}){const n=(0,i.qj)(Gt(t)),{options:o}=(0,r.f3)(Ft),s=(0,r.Fl)((()=>({[Kt(t.activeClass,o.linkActiveClass,"router-link-active")]:n.isActive,[Kt(t.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{const i=e.default&&e.default(n);return t.custom?i:(0,r.h)("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),qt=$t;function Yt(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&(void 0===t.button||0===t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Xt(t,e){for(const n in e){const r=e[n],i=t[n];if("string"===typeof r){if(r!==i)return!1}else if(!u(i)||i.length!==r.length||r.some(((t,e)=>t!==i[e])))return!1}return!0}function Zt(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Kt=(t,e,n)=>null!=t?t:null!=e?e:n,Jt=(0,r.aZ)({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const o=(0,r.f3)(Vt),s=(0,r.Fl)((()=>t.route||o.value)),l=(0,r.f3)(Ut,0),c=(0,r.Fl)((()=>{let t=(0,i.SU)(l);const{matched:e}=s.value;let n;while((n=e[t])&&!n.components)t++;return t})),u=(0,r.Fl)((()=>s.value.matched[c.value]));(0,r.JJ)(Ut,(0,r.Fl)((()=>c.value+1))),(0,r.JJ)(Nt,u),(0,r.JJ)(Vt,s);const d=(0,i.iH)();return(0,r.YP)((()=>[d.value,u.value,t.name]),(([t,e,n],[r,i,o])=>{e&&(e.instances[n]=t,i&&i!==e&&t&&t===r&&(e.leaveGuards.size||(e.leaveGuards=i.leaveGuards),e.updateGuards.size||(e.updateGuards=i.updateGuards))),!t||!e||i&&v(e,i)&&r||(e.enterCallbacks[n]||[]).forEach((e=>e(t)))}),{flush:"post"}),()=>{const i=s.value,o=t.name,l=u.value,c=l&&l.components[o];if(!c)return Qt(n.default,{Component:c,route:i});const h=l.props[o],f=h?!0===h?i.params:"function"===typeof h?h(i):h:null,p=t=>{t.component.isUnmounted&&(l.instances[o]=null)},m=(0,r.h)(c,a({},f,e,{onVnodeUnmounted:p,ref:d}));return Qt(n.default,{Component:m,route:i})||m}}});function Qt(t,e){if(!t)return null;const n=t(e);return 1===n.length?n[0]:n}const te=Jt;function ee(t){const e=it(t.routes,t),n=t.parseQuery||Lt,s=t.stringifyQuery||Dt,d=t.history;const h=zt(),m=zt(),v=zt(),y=(0,i.XI)(j);let b=j;o&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const _=l.bind(null,(t=>""+t)),w=l.bind(null,Rt),S=l.bind(null,Pt);function E(t,n){let r,i;return z(t)?(r=e.getRecordMatcher(t),i=n):i=t,e.addRoute(i,r)}function M(t){const n=e.getRecordMatcher(t);n&&e.removeRoute(n)}function T(){return e.getRoutes().map((t=>t.record))}function C(t){return!!e.getRecordMatcher(t)}function R(t,r){if(r=a({},r||y.value),"string"===typeof t){const i=f(n,t,r.path),o=e.resolve({path:i.path},r),s=d.createHref(i.fullPath);return a(i,o,{params:S(o.params),hash:Pt(i.hash),redirectedFrom:void 0,href:s})}let i;if("path"in t)i=a({},t,{path:f(n,t.path,r.path).path});else{const e=a({},t.params);for(const t in e)null==e[t]&&delete e[t];i=a({},t,{params:w(e)}),r.params=w(r.params)}const o=e.resolve(i,r),l=t.hash||"";o.params=_(S(o.params));const c=p(s,a({},t,{hash:Ct(l),path:o.path})),u=d.createHref(c);return a({fullPath:c,hash:l,query:s===Dt?It(t.query):t.query||{}},o,{redirectedFrom:void 0,href:u})}function D(t){return"string"===typeof t?f(n,t,y.value.path):a({},t)}function I(t,e){if(b!==t)return G(8,{from:e,to:t})}function N(t){return B(t)}function U(t){return N(a(D(t),{replace:!0}))}function F(t){const e=t.matched[t.matched.length-1];if(e&&e.redirect){const{redirect:n}=e;let r="function"===typeof n?n(t):n;return"string"===typeof r&&(r=r.includes("?")||r.includes("#")?r=D(r):{path:r},r.params={}),a({query:t.query,hash:t.hash,params:"path"in r?{}:t.params},r)}}function B(t,e){const n=b=R(t),r=y.value,i=t.state,o=t.force,l=!0===t.replace,c=F(n);if(c)return B(a(D(c),{state:"object"===typeof c?a({},i,c.state):i,force:o,replace:l}),e||n);const u=n;let d;return u.redirectedFrom=e,!o&&g(s,r,n)&&(d=G(16,{to:u,from:r}),rt(r,r,!0,!1)),(d?Promise.resolve(d):W(u,r)).catch((t=>$(t)?$(t,2)?t:nt(t):tt(t,u,r))).then((t=>{if(t){if($(t,2))return B(a({replace:l},D(t.to),{state:"object"===typeof t.to?a({},i,t.to.state):i,force:o}),e||u)}else t=Y(u,r,!0,l,i);return q(u,r,t),t}))}function V(t,e){const n=I(t,e);return n?Promise.reject(n):Promise.resolve()}function H(t){const e=at.values().next().value;return e&&"function"===typeof e.runWithContext?e.runWithContext(t):t()}function W(t,e){let n;const[r,i,o]=ne(t,e);n=Ht(r.reverse(),"beforeRouteLeave",t,e);for(const a of r)a.leaveGuards.forEach((r=>{n.push(jt(r,t,e))}));const s=V.bind(null,t,e);return n.push(s),ct(n).then((()=>{n=[];for(const r of h.list())n.push(jt(r,t,e));return n.push(s),ct(n)})).then((()=>{n=Ht(i,"beforeRouteUpdate",t,e);for(const r of i)r.updateGuards.forEach((r=>{n.push(jt(r,t,e))}));return n.push(s),ct(n)})).then((()=>{n=[];for(const r of t.matched)if(r.beforeEnter&&!e.matched.includes(r))if(u(r.beforeEnter))for(const i of r.beforeEnter)n.push(jt(i,t,e));else n.push(jt(r.beforeEnter,t,e));return n.push(s),ct(n)})).then((()=>(t.matched.forEach((t=>t.enterCallbacks={})),n=Ht(o,"beforeRouteEnter",t,e),n.push(s),ct(n)))).then((()=>{n=[];for(const r of m.list())n.push(jt(r,t,e));return n.push(s),ct(n)})).catch((t=>$(t,8)?t:Promise.reject(t)))}function q(t,e,n){for(const r of v.list())H((()=>r(t,e,n)))}function Y(t,e,n,r,i){const s=I(t,e);if(s)return s;const l=e===j,c=o?history.state:{};n&&(r||l?d.replace(t.fullPath,a({scroll:l&&c&&c.scroll},i)):d.push(t.fullPath,i)),y.value=t,rt(t,e,n,l),nt()}let X;function Z(){X||(X=d.listen(((t,e,n)=>{if(!lt.listening)return;const r=R(t),i=F(r);if(i)return void B(a(i,{replace:!0}),r).catch(c);b=r;const s=y.value;o&&P(O(s.fullPath,n.delta),A()),W(r,s).catch((t=>$(t,12)?t:$(t,2)?(B(t.to,r).then((t=>{$(t,20)&&!n.delta&&n.type===x.pop&&d.go(-1,!1)})).catch(c),Promise.reject()):(n.delta&&d.go(-n.delta,!1),tt(t,r,s)))).then((t=>{t=t||Y(r,s,!1),t&&(n.delta&&!$(t,8)?d.go(-n.delta,!1):n.type===x.pop&&$(t,20)&&d.go(-1,!1)),q(r,s,t)})).catch(c)})))}let K,J=zt(),Q=zt();function tt(t,e,n){nt(t);const r=Q.list();return r.length?r.forEach((r=>r(t,e,n))):console.error(t),Promise.reject(t)}function et(){return K&&y.value!==j?Promise.resolve():new Promise(((t,e)=>{J.add([t,e])}))}function nt(t){return K||(K=!t,Z(),J.list().forEach((([e,n])=>t?n(t):e())),J.reset()),t}function rt(e,n,i,s){const{scrollBehavior:a}=t;if(!o||!a)return Promise.resolve();const l=!i&&L(O(e.fullPath,0))||(s||!i)&&history.state&&history.state.scroll||null;return(0,r.Y3)().then((()=>a(e,n,l))).then((t=>t&&k(t))).catch((t=>tt(t,e,n)))}const ot=t=>d.go(t);let st;const at=new Set,lt={currentRoute:y,listening:!0,addRoute:E,removeRoute:M,hasRoute:C,getRoutes:T,resolve:R,options:t,push:N,replace:U,go:ot,back:()=>ot(-1),forward:()=>ot(1),beforeEach:h.add,beforeResolve:m.add,afterEach:v.add,onError:Q.add,isReady:et,install(t){const e=this;t.component("RouterLink",qt),t.component("RouterView",te),t.config.globalProperties.$router=e,Object.defineProperty(t.config.globalProperties,"$route",{enumerable:!0,get:()=>(0,i.SU)(y)}),o&&!st&&y.value===j&&(st=!0,N(d.location).catch((t=>{0})));const n={};for(const i in j)n[i]=(0,r.Fl)((()=>y.value[i]));t.provide(Ft,e),t.provide(Bt,(0,i.qj)(n)),t.provide(Vt,y);const s=t.unmount;at.add(t),t.unmount=function(){at.delete(t),at.size<1&&(b=j,X&&X(),X=null,y.value=j,st=!1,K=!1),s()}}};function ct(t){return t.reduce(((t,e)=>t.then((()=>H(e)))),Promise.resolve())}return lt}function ne(t,e){const n=[],r=[],i=[],o=Math.max(e.matched.length,t.matched.length);for(let s=0;s<o;s++){const o=e.matched[s];o&&(t.matched.find((t=>v(t,o)))?r.push(o):n.push(o));const a=t.matched[s];a&&(e.matched.find((t=>v(t,a)))||i.push(a))}return[n,r,i]}},3696:function(t,e,n){"use strict";n.d(e,{H7:function(){return O}});var r=n(7974),i=(n(1703),n(2296)),o=n(1755);const s=t=>i.Ue(((e,n)=>{t.onerror=t=>n(new Error(t.target.error)),t.onsuccess=t=>e(t.target.result)})),a=(t,e)=>i.Ue(((n,r)=>{const i=indexedDB.open(t);i.onupgradeneeded=t=>e(t.target.result),i.onerror=t=>r(o.Ue(t.target.error)),i.onsuccess=t=>{const e=t.target.result;e.onversionchange=()=>{e.close()},"undefined"!==typeof addEventListener&&addEventListener("unload",(()=>e.close())),n(e)}})),l=t=>s(indexedDB.deleteDatabase(t)),c=(t,e)=>e.forEach((e=>t.createObjectStore.apply(t,e))),u=(t,e,n="readwrite")=>{const r=t.transaction(e,n);return e.map((t=>w(r,t)))},d=(t,e)=>s(t.count(e)),h=(t,e)=>s(t.get(e)),f=(t,e)=>s(t.delete(e)),p=(t,e,n)=>s(t.put(e,n)),m=(t,e)=>s(t.add(e)),g=(t,e,n)=>s(t.getAll(e,n)),v=(t,e,n)=>{let r=null;return _(t,e,(t=>(r=t,!1)),n).then((()=>r))},y=(t,e=null)=>v(t,e,"prev"),b=(t,e)=>i.Ue(((n,r)=>{t.onerror=r,t.onsuccess=async t=>{const r=t.target.result;if(null===r||!1===await e(r))return n();r.continue()}})),_=(t,e,n,r="next")=>b(t.openKeyCursor(e,r),(t=>n(t.key))),w=(t,e)=>t.objectStore(e),x=(t,e)=>IDBKeyRange.upperBound(t,e),S=(t,e)=>IDBKeyRange.lowerBound(t,e);var E=n(3837);const M="custom",T="updates",C=500,A=(t,e=(()=>{}),n=(()=>{}))=>{const[i]=u(t.db,[T]);return g(i,S(t._dbref,!1)).then((o=>{t._destroyed||(e(i),r.ay(t.doc,(()=>{o.forEach((e=>r.NG(t.doc,e)))}),t,!1),n(i))})).then((()=>y(i).then((e=>{t._dbref=e+1})))).then((()=>d(i).then((e=>{t._dbsize=e})))).then((()=>i))},k=(t,e=!0)=>A(t).then((n=>{(e||t._dbsize>=C)&&m(n,r.D$(t.doc)).then((()=>f(n,x(t._dbref,!0)))).then((()=>d(n).then((e=>{t._dbsize=e}))))}));class O extends E.y{constructor(t,e){super(),this.doc=e,this.name=t,this._dbref=0,this._dbsize=0,this._destroyed=!1,this.db=null,this.synced=!1,this._db=a(t,(t=>c(t,[["updates",{autoIncrement:!0}],["custom"]]))),this.whenSynced=i.Ue((t=>this.on("synced",(()=>t(this))))),this._db.then((t=>{this.db=t;const n=t=>m(t,r.D$(e)),i=()=>{if(this._destroyed)return this;this.synced=!0,this.emit("synced",[this])};A(this,n,i)})),this._storeTimeout=1e3,this._storeTimeoutId=null,this._storeUpdate=(t,e)=>{if(this.db&&e!==this){const[e]=u(this.db,[T]);m(e,t),++this._dbsize>=C&&(null!==this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this._storeTimeoutId=setTimeout((()=>{k(this,!1),this._storeTimeoutId=null}),this._storeTimeout))}},e.on("update",this._storeUpdate),this.destroy=this.destroy.bind(this),e.on("destroy",this.destroy)}destroy(){return this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this.doc.off("update",this._storeUpdate),this.doc.off("destroy",this.destroy),this._destroyed=!0,this._db.then((t=>{t.close()}))}clearData(){return this.destroy().then((()=>{l(this.name)}))}get(t){return this._db.then((e=>{const[n]=u(e,[M],"readonly");return h(n,t)}))}set(t,e){return this._db.then((n=>{const[r]=u(n,[M]);return p(r,e,t)}))}del(t){return this._db.then((e=>{const[n]=u(e,[M]);return f(n,t)}))}}},9087:function(t,e,n){"use strict";n.d(e,{JR:function(){return d},SF:function(){return f},US:function(){return u}});var r=n(4714),i=n(7974),o=n(1755),s=n(7793),a=n(9765);let l=null;const c=()=>{const t=l;l=null,t.forEach(((t,e)=>{const n=e.state.tr,i=r.Gt.getState(e.state);i&&i.binding&&!i.binding.isDestroyed&&(t.forEach(((t,e)=>{n.setMeta(e,t)})),e.dispatch(n))}))},u=(t,e,n)=>{l||(l=new Map,a.Vs(0,c)),s.Yu(l,t,s.Ue).set(e,n)},d=(t,e,n)=>{if(0===t)return i.w$(e,0);let r=null===e._first?null:e._first.content.type;while(null!==r&&e!==r){if(r instanceof i.eI){if(r._length>=t)return i.w$(r,t);if(t-=r._length,null!==r._item&&null!==r._item.next)r=r._item.next.content.type;else{do{r=null===r._item?null:r._item.parent,t--}while(r!==e&&null!==r&&null!==r._item&&null===r._item.next);null!==r&&r!==e&&(r=null===r._item?null:r._item.next.content.type)}}else{const o=(n.get(r)||{nodeSize:0}).nodeSize;if(null!==r._first&&t<o)r=r._first.content.type,t--;else{if(1===t&&0===r._length&&o>1)return new i.Zi(null===r._item?null:r._item.id,null===r._item?i.BW(r):null,null);if(t-=o,null!==r._item&&null!==r._item.next)r=r._item.next.content.type;else{if(0===t)return r=null===r._item?r:r._item.parent,new i.Zi(null===r._item?null:r._item.id,null===r._item?i.BW(r):null,null);do{r=r._item.parent,t--}while(r!==e&&null===r._item.next);r!==e&&(r=r._item.next.content.type)}}}if(null===r)throw o.zR();if(0===t&&r.constructor!==i.eI&&r!==e)return h(r._item.parent,r._item)}return i.w$(e,e._length)},h=(t,e)=>{let n=null,r=null;return null===t._item?r=i.BW(t):n=i.at(t._item.id.client,t._item.id.clock),new i.Zi(n,r,e.id)},f=(t,e,n,r)=>{const o=i.or(n,t);if(null===o||o.type!==e&&!i.$4(e,o.type._item))return null;let s=o.type,a=0;if(s.constructor===i.eI)a=o.index;else if(null===s._item||!s._item.deleted){let t=s._first,e=0;while(e<s._length&&e<o.index&&null!==t){if(!t.deleted){const n=t.content.type;e++,n instanceof i.eI?a+=n._length:a+=r.get(n).nodeSize}t=t.right}a+=1}while(s!==e&&null!==s._item){const t=s._item.parent;if(null===t._item||!t._item.deleted){a+=1;let e=t._first;while(null!==e){const t=e.content.type;if(t===s)break;e.deleted||(t instanceof i.eI?a+=t._length:a+=r.get(t).nodeSize),e=e.right}}s=t}return a-1}},4714:function(t,e,n){"use strict";n.d(e,{Gk:function(){return o},Gt:function(){return i},uJ:function(){return s}});var r=n(1418);const i=new r.H$("y-sync"),o=new r.H$("y-undo"),s=new r.H$("yjs-cursor")},2405:function(t,e,n){"use strict";n.d(e,{Ag:function(){return d},GL:function(){return u},oy:function(){return f},xq:function(){return h}});n(7658);var r=n(4251),i=n(4805),o=n(9514),s=n(3035),a=n(3837),l=n(3918);const c=3e4;class u extends a.y{constructor(t){super(),this.doc=t,this.clientID=t.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval((()=>{const t=o.ZG();null!==this.getLocalState()&&c/2<=t-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const e=[];this.meta.forEach(((n,r)=>{r!==this.clientID&&c<=t-n.lastUpdated&&this.states.has(r)&&e.push(r)})),e.length>0&&d(this,e,"timeout")}),s.GW(c/10)),t.on("destroy",(()=>{this.destroy()})),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(t){const e=this.clientID,n=this.meta.get(e),r=void 0===n?0:n.clock+1,i=this.states.get(e);null===t?this.states.delete(e):this.states.set(e,t),this.meta.set(e,{clock:r,lastUpdated:o.ZG()});const s=[],a=[],c=[],u=[];null===t?u.push(e):null==i?null!=t&&s.push(e):(a.push(e),l.Hi(i,t)||c.push(e)),(s.length>0||c.length>0||u.length>0)&&this.emit("change",[{added:s,updated:c,removed:u},"local"]),this.emit("update",[{added:s,updated:a,removed:u},"local"])}setLocalStateField(t,e){const n=this.getLocalState();null!==n&&this.setLocalState({...n,[t]:e})}getStates(){return this.states}}const d=(t,e,n)=>{const r=[];for(let i=0;i<e.length;i++){const n=e[i];if(t.states.has(n)){if(t.states.delete(n),n===t.clientID){const e=t.meta.get(n);t.meta.set(n,{clock:e.clock+1,lastUpdated:o.ZG()})}r.push(n)}}r.length>0&&(t.emit("change",[{added:[],updated:[],removed:r},n]),t.emit("update",[{added:[],updated:[],removed:r},n]))},h=(t,e,n=t.states)=>{const i=e.length,o=r.Mf();r.uE(o,i);for(let s=0;s<i;s++){const i=e[s],a=n.get(i)||null,l=t.meta.get(i).clock;r.uE(o,i),r.uE(o,l),r.uw(o,JSON.stringify(a))}return r._f(o)},f=(t,e,n)=>{const r=i.l1(e),s=o.ZG(),a=[],c=[],u=[],d=[],h=i.yg(r);for(let o=0;o<h;o++){const e=i.yg(r);let n=i.yg(r);const o=JSON.parse(i.kf(r)),h=t.meta.get(e),f=t.states.get(e),p=void 0===h?0:h.clock;(p<n||p===n&&null===o&&t.states.has(e))&&(null===o?e===t.clientID&&null!=t.getLocalState()?n++:t.states.delete(e):t.states.set(e,o),t.meta.set(e,{clock:n,lastUpdated:s}),void 0===h&&null!==o?a.push(e):void 0!==h&&null===o?d.push(e):null!==o&&(l.Hi(o,f)||u.push(e),c.push(e)))}(a.length>0||u.length>0||d.length>0)&&t.emit("change",[{added:a,updated:u,removed:d},n]),(a.length>0||c.length>0||d.length>0)&&t.emit("update",[{added:a,updated:c,removed:d},n])}},3428:function(t,e,n){"use strict";n.d(e,{K0:function(){return u},Px:function(){return a},Wh:function(){return s},_J:function(){return c},lr:function(){return f},zu:function(){return m}});n(1703);var r=n(4251),i=n(4805),o=n(7974);const s=0,a=1,l=2,c=(t,e)=>{r.uE(t,s);const n=o.gJ(e);r.mP(t,n)},u=(t,e,n)=>{r.uE(t,a),r.mP(t,o.D$(e,n))},d=(t,e,n)=>u(e,n,i.HN(t)),h=(t,e,n)=>{try{o.NG(e,i.HN(t),n)}catch(r){console.error("Caught error while handling a Yjs update",r)}},f=(t,e)=>{r.uE(t,l),r.mP(t,e)},p=h,m=(t,e,n,r)=>{const o=i.yg(t);switch(o){case s:d(t,e,n);break;case a:h(t,n,r);break;case l:p(t,n,r);break;default:throw new Error("Unknown message type")}return o}},8363:function(t,e,n){"use strict";n.d(e,{x$:function(){return J}});n(7658),n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315);var r=n(3837),i=n(9514),o=n(3035);const s=1200,a=2500,l=3e4,c=t=>{if(t.shouldConnect&&null===t.ws){const e=new WebSocket(t.url),n=t.binaryType;let r=null;n&&(e.binaryType=n),t.ws=e,t.connecting=!0,t.connected=!1,e.onmessage=e=>{t.lastMessageReceived=i.ZG();const n=e.data,o="string"===typeof n?JSON.parse(n):n;o&&"pong"===o.type&&(clearTimeout(r),r=setTimeout(d,l/2)),t.emit("message",[o,t])};const u=e=>{null!==t.ws&&(t.ws=null,t.connecting=!1,t.connected?(t.connected=!1,t.emit("disconnect",[{type:"disconnect",error:e},t])):t.unsuccessfulReconnects++,setTimeout(c,o.VV(o.mv(t.unsuccessfulReconnects+1)*s,a),t)),clearTimeout(r)},d=()=>{t.ws===e&&t.send({type:"ping"})};e.onclose=()=>u(null),e.onerror=t=>u(t),e.onopen=()=>{t.lastMessageReceived=i.ZG(),t.connecting=!1,t.connected=!0,t.unsuccessfulReconnects=0,t.emit("connect",[{type:"connect"},t]),r=setTimeout(d,l/2)}}};class u extends r.y{constructor(t,{binaryType:e}={}){super(),this.url=t,this.ws=null,this.binaryType=e||null,this.connected=!1,this.connecting=!1,this.unsuccessfulReconnects=0,this.lastMessageReceived=0,this.shouldConnect=!0,this._checkInterval=setInterval((()=>{this.connected&&l<i.ZG()-this.lastMessageReceived&&this.ws.close()}),l/2),c(this)}send(t){this.ws&&this.ws.send(JSON.stringify(t))}destroy(){clearInterval(this._checkInterval),this.disconnect(),super.destroy()}disconnect(){this.shouldConnect=!1,null!==this.ws&&this.ws.close()}connect(){this.shouldConnect=!0,this.connected||null!==this.ws||c(this)}}var d=n(7793),h=n(1755),f=n(3751),p=n(4251),m=n(4805),g=n(311),v=n(1886),y=n(2296),b=n(2428),_=n(4606),w=n(5611),x=n(8305),S=n(3428),E=n(2405),M=n(6003);const T=(t,e)=>{const n=M.lz(t).buffer,r=M.lz(e).buffer;return crypto.subtle.importKey("raw",n,"PBKDF2",!1,["deriveKey"]).then((t=>crypto.subtle.deriveKey({name:"PBKDF2",salt:r,iterations:1e5,hash:"SHA-256"},t,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])))},C=(t,e)=>{if(!e)return y.DB(t);const n=crypto.getRandomValues(new Uint8Array(12));return crypto.subtle.encrypt({name:"AES-GCM",iv:n},e,t).then((t=>{const e=p.Mf();return p.uw(e,"AES-GCM"),p.mP(e,n),p.mP(e,new Uint8Array(t)),p._f(e)}))},A=(t,e)=>{const n=p.Mf();return p.EM(n,t),C(p._f(n),e)},k=(t,e)=>{if(!e)return y.DB(t);const n=m.l1(t),r=m.kf(n);"AES-GCM"!==r&&y.d1(h.Ue("Unknown encryption algorithm"));const i=m.HN(n),o=m.HN(n);return crypto.subtle.decrypt({name:"AES-GCM",iv:i},e,o).then((t=>new Uint8Array(t)))},O=(t,e)=>k(t,e).then((t=>m.v_(m.l1(new Uint8Array(t))))),R=g.YX("y-webrtc"),P=0,L=3,D=1,I=4,N=new Map,U=new Map,F=t=>{let e=!0;t.webrtcConns.forEach((t=>{t.synced||(e=!1)})),(!e&&t.synced||e&&!t.synced)&&(t.synced=e,t.provider.emit("synced",[{synced:e}]),R("synced ",v.Pl,t.name,v.YW," with all peers"))},B=(t,e,n)=>{const r=m.l1(e),i=p.Mf(),o=m.yg(r);if(void 0===t)return null;const s=t.awareness,a=t.doc;let l=!1;switch(o){case P:{p.uE(i,P);const e=S.zu(r,i,a,t);e!==S.Px||t.synced||n(),e===S.Wh&&(l=!0);break}case L:p.uE(i,D),p.mP(i,E.xq(s,Array.from(s.getStates().keys()))),l=!0;break;case D:E.oy(s,m.HN(r),t);break;case I:{const e=1===m.kj(r),n=m.kf(r);if(n!==t.peerId&&(t.bcConns.has(n)&&!e||!t.bcConns.has(n)&&e)){const r=[],i=[];e?(t.bcConns.add(n),i.push(n)):(t.bcConns.delete(n),r.push(n)),t.provider.emit("peers",[{added:i,removed:r,webrtcPeers:Array.from(t.webrtcConns.keys()),bcPeers:Array.from(t.bcConns)}]),q(t)}break}default:return console.error("Unable to compute message"),i}return l?i:null},V=(t,e)=>{const n=t.room;return R("received message from ",v.Pl,t.remotePeerId,v.s7," (",n.name,")",v.YW,v.WO),B(n,e,(()=>{t.synced=!0,R("synced ",v.Pl,n.name,v.YW," with ",v.Pl,t.remotePeerId),F(n)}))},z=(t,e)=>{R("send message to ",v.Pl,t.remotePeerId,v.YW,v.s7," (",t.room.name,")",v.WO);try{t.peer.send(p._f(e))}catch(n){}},j=(t,e)=>{R("broadcast message in ",v.Pl,t.name,v.YW),t.webrtcConns.forEach((t=>{try{t.peer.send(e)}catch(n){}}))};class H{constructor(t,e,n,r){R("establishing connection to ",v.Pl,n),this.room=r,this.remotePeerId=n,this.closed=!1,this.connected=!1,this.synced=!1,this.peer=new x({initiator:e,...r.provider.peerOpts}),this.peer.on("signal",(e=>{Z(t,r,{to:n,from:r.peerId,type:"signal",signal:e})})),this.peer.on("connect",(()=>{R("connected to ",v.Pl,n),this.connected=!0;const t=r.provider,e=t.doc,i=r.awareness,o=p.Mf();p.uE(o,P),S._J(o,e),z(this,o);const s=i.getStates();if(s.size>0){const t=p.Mf();p.uE(t,D),p.mP(t,E.xq(i,Array.from(s.keys()))),z(this,t)}})),this.peer.on("close",(()=>{this.connected=!1,this.closed=!0,r.webrtcConns.has(this.remotePeerId)&&(r.webrtcConns.delete(this.remotePeerId),r.provider.emit("peers",[{removed:[this.remotePeerId],added:[],webrtcPeers:Array.from(r.webrtcConns.keys()),bcPeers:Array.from(r.bcConns)}])),F(r),this.peer.destroy(),R("closed connection to ",v.Pl,n),$(r)})),this.peer.on("error",(t=>{R("Error in connection to ",v.Pl,n,": ",t),$(r)})),this.peer.on("data",(t=>{const e=V(this,t);null!==e&&z(this,e)}))}destroy(){this.peer.destroy()}}const W=(t,e)=>C(e,t.key).then((e=>t.mux((()=>b.nY(t.name,e))))),G=(t,e)=>{t.bcconnected&&W(t,e),j(t,e)},$=t=>{N.forEach((e=>{e.connected&&(e.send({type:"subscribe",topics:[t.name]}),t.webrtcConns.size<t.provider.maxConns&&Z(e,t,{type:"announce",from:t.peerId}))}))},q=t=>{if(t.provider.filterBcConns){const e=p.Mf();p.uE(e,I),p.$F(e,1),p.uw(e,t.peerId),W(t,p._f(e))}};class Y{constructor(t,e,n,r){this.peerId=f.k$(),this.doc=t,this.awareness=e.awareness,this.provider=e,this.synced=!1,this.name=n,this.key=r,this.webrtcConns=new Map,this.bcConns=new Set,this.mux=(0,w.M)(),this.bcconnected=!1,this._bcSubscriber=t=>k(new Uint8Array(t),r).then((t=>this.mux((()=>{const e=B(this,t,(()=>{}));e&&W(this,p._f(e))})))),this._docUpdateHandler=(t,e)=>{const n=p.Mf();p.uE(n,P),S.lr(n,t),G(this,p._f(n))},this._awarenessUpdateHandler=({added:t,updated:e,removed:n},r)=>{const i=t.concat(e).concat(n),o=p.Mf();p.uE(o,D),p.mP(o,E.xq(this.awareness,i)),G(this,p._f(o))},this._beforeUnloadHandler=()=>{E.Ag(this.awareness,[t.clientID],"window unload"),U.forEach((t=>{t.disconnect()}))},"undefined"!==typeof window?window.addEventListener("beforeunload",this._beforeUnloadHandler):"undefined"!==typeof process&&process.on("exit",this._beforeUnloadHandler)}connect(){this.doc.on("update",this._docUpdateHandler),this.awareness.on("update",this._awarenessUpdateHandler),$(this);const t=this.name;b.Ld(t,this._bcSubscriber),this.bcconnected=!0,q(this);const e=p.Mf();p.uE(e,P),S._J(e,this.doc),W(this,p._f(e));const n=p.Mf();p.uE(n,P),S.K0(n,this.doc),W(this,p._f(n));const r=p.Mf();p.uE(r,L),W(this,p._f(r));const i=p.Mf();p.uE(i,D),p.mP(i,E.xq(this.awareness,[this.doc.clientID])),W(this,p._f(i))}disconnect(){N.forEach((t=>{t.connected&&t.send({type:"unsubscribe",topics:[this.name]})})),E.Ag(this.awareness,[this.doc.clientID],"disconnect");const t=p.Mf();p.uE(t,I),p.$F(t,0),p.uw(t,this.peerId),W(this,p._f(t)),b.r1(this.name,this._bcSubscriber),this.bcconnected=!1,this.doc.off("update",this._docUpdateHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.webrtcConns.forEach((t=>t.destroy()))}destroy(){this.disconnect(),"undefined"!==typeof window?window.removeEventListener("beforeunload",this._beforeUnloadHandler):"undefined"!==typeof process&&process.off("exit",this._beforeUnloadHandler)}}const X=(t,e,n,r)=>{if(U.has(n))throw h.Ue(`A Yjs Doc connected to room "${n}" already exists!`);const i=new Y(t,e,n,r);return U.set(n,i),i},Z=(t,e,n)=>{e.key?A(n,e.key).then((n=>{t.send({type:"publish",topic:e.name,data:_.s3(n)})})):t.send({type:"publish",topic:e.name,data:n})};class K extends u{constructor(t){super(t),this.providers=new Set,this.on("connect",(()=>{R(`connected (${t})`);const e=Array.from(U.keys());this.send({type:"subscribe",topics:e}),U.forEach((t=>Z(this,t,{type:"announce",from:t.peerId})))})),this.on("message",(t=>{switch(t.type){case"publish":{const e=t.topic,n=U.get(e);if(null==n||"string"!==typeof e)return;const r=t=>{const e=n.webrtcConns,r=n.peerId;if(null==t||t.from===r||void 0!==t.to&&t.to!==r||n.bcConns.has(t.from))return;const i=e.has(t.from)?()=>{}:()=>n.provider.emit("peers",[{removed:[],added:[t.from],webrtcPeers:Array.from(n.webrtcConns.keys()),bcPeers:Array.from(n.bcConns)}]);switch(t.type){case"announce":e.size<n.provider.maxConns&&(d.Yu(e,t.from,(()=>new H(this,!0,t.from,n))),i());break;case"signal":t.to===r&&(d.Yu(e,t.from,(()=>new H(this,!1,t.from,n))).peer.signal(t.signal),i());break}};n.key?"string"===typeof t.data&&O(_.Gh(t.data),n.key).then(r):r(t.data)}}})),this.on("disconnect",(()=>R(`disconnect (${t})`)))}}class J extends r.y{constructor(t,e,{signaling:n=["wss://y-webrtc-eu.fly.dev"],password:r=null,awareness:i=new E.GL(e),maxConns:s=20+o.GW(15*f.TN()),filterBcConns:a=!0,peerOpts:l={}}={}){super(),this.roomName=t,this.doc=e,this.filterBcConns=a,this.awareness=i,this.shouldConnect=!1,this.signalingUrls=n,this.signalingConns=[],this.maxConns=s,this.peerOpts=l,this.key=r?T(r,t):y.DB(null),this.room=null,this.key.then((n=>{this.room=X(e,this,t,n),this.shouldConnect?this.room.connect():this.room.disconnect()})),this.connect(),this.destroy=this.destroy.bind(this),e.on("destroy",this.destroy)}get connected(){return null!==this.room&&this.shouldConnect}connect(){this.shouldConnect=!0,this.signalingUrls.forEach((t=>{const e=d.Yu(N,t,(()=>new K(t)));this.signalingConns.push(e),e.providers.add(this)})),this.room&&this.room.connect()}disconnect(){this.shouldConnect=!1,this.signalingConns.forEach((t=>{t.providers.delete(this),0===t.providers.size&&(t.destroy(),N.delete(t.url))})),this.room&&this.room.disconnect()}destroy(){this.doc.off("destroy",this.destroy),this.key.then((()=>{this.room.destroy(),U.delete(this.roomName)})),super.destroy()}}},7974:function(t,e,n){"use strict";n.d(e,{QP:function(){return Me},mJ:function(){return Ge},MM:function(){return Un},$_:function(){return Hn},zc:function(){return Qn},QW:function(){return U},GC:function(){return Cn},ck:function(){return sr},D5:function(){return Ye},Zi:function(){return bt},aC:function(){return Ct},xv:function(){return fn},H6:function(){return ee},lt:function(){return yn},sI:function(){return gn},yP:function(){return wn},eI:function(){return Sn},NG:function(){return Q},Uq:function(){return Tt},or:function(){return Mt},VG:function(){return R},at:function(){return gt},og:function(){return _t},w$:function(){return Et},Ox:function(){return At},D$:function(){return nt},gJ:function(){return lt},g4:function(){return Nt},BW:function(){return vt},uY:function(){return C},$4:function(){return yt},UQ:function(){return M},CO:function(){return kt},ay:function(){return Kt},ud:function(){return Ae}});n(7658),n(1703),n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315);var r=n(3837),i=n(9471),o=n(3035),s=n(7793),a=n(4251),l=n(4805),c=n(3751),u=n(2296),d=n(4606),h=n(1755),f=n(547),p=n(3918),m=n(8674),g=n(311),v=n(1886),y=n(9514);const b=t=>({[Symbol.iterator](){return this},next:t}),_=(t,e)=>b((()=>{let n;do{n=t.next()}while(!n.done&&!e(n.value));return n})),w=(t,e)=>b((()=>{const{done:n,value:r}=t.next();return{done:n,value:n?void 0:e(r)}}));var x=n(3913);class S{constructor(t,e){this.clock=t,this.len=e}}class E{constructor(){this.clients=new Map}}const M=(t,e,n)=>e.clients.forEach(((e,r)=>{const i=t.doc.store.clients.get(r);for(let o=0;o<e.length;o++){const r=e[o];Ht(t,i,r.clock,r.len,n)}})),T=(t,e)=>{let n=0,r=t.length-1;while(n<=r){const i=o.GW((n+r)/2),s=t[i],a=s.clock;if(a<=e){if(e<a+s.len)return i;n=i+1}else r=i-1}return null},C=(t,e)=>{const n=t.clients.get(e.client);return void 0!==n&&null!==T(n,e.clock)},A=t=>{t.clients.forEach((t=>{let e,n;for(t.sort(((t,e)=>t.clock-e.clock)),e=1,n=1;e<t.length;e++){const r=t[n-1],i=t[e];r.clock+r.len>=i.clock?r.len=o.Fp(r.len,i.clock+i.len-r.clock):(n<e&&(t[n]=i),n++)}t.length=n}))},k=t=>{const e=new E;for(let n=0;n<t.length;n++)t[n].clients.forEach(((r,o)=>{if(!e.clients.has(o)){const s=r.slice();for(let e=n+1;e<t.length;e++)i.s7(s,t[e].clients.get(o)||[]);e.clients.set(o,s)}}));return A(e),e},O=(t,e,n,r)=>{s.Yu(t.clients,e,(()=>[])).push(new S(n,r))},R=()=>new E,P=t=>{const e=R();return t.clients.forEach(((t,n)=>{const r=[];for(let e=0;e<t.length;e++){const n=t[e];if(n.deleted){const i=n.id.clock;let o=n.length;if(e+1<t.length)for(let n=t[e+1];e+1<t.length&&n.deleted;n=t[1+ ++e])o+=n.length;r.push(new S(i,o))}}r.length>0&&e.clients.set(n,r)})),e},L=(t,e)=>{a.uE(t.restEncoder,e.clients.size),i.Dp(e.clients.entries()).sort(((t,e)=>e[0]-t[0])).forEach((([e,n])=>{t.resetDsCurVal(),a.uE(t.restEncoder,e);const r=n.length;a.uE(t.restEncoder,r);for(let i=0;i<r;i++){const e=n[i];t.writeDsClock(e.clock),t.writeDsLen(e.len)}}))},D=t=>{const e=new E,n=l.yg(t.restDecoder);for(let r=0;r<n;r++){t.resetDsCurVal();const n=l.yg(t.restDecoder),r=l.yg(t.restDecoder);if(r>0){const i=s.Yu(e.clients,n,(()=>[]));for(let e=0;e<r;e++)i.push(new S(t.readDsClock(),t.readDsLen()))}}return e},I=(t,e,n)=>{const r=new E,i=l.yg(t.restDecoder);for(let o=0;o<i;o++){t.resetDsCurVal();const i=l.yg(t.restDecoder),o=l.yg(t.restDecoder),s=n.clients.get(i)||[],a=Dt(n,i);for(let n=0;n<o;n++){const n=t.readDsClock(),o=n+t.readDsLen();if(n<a){a<o&&O(r,i,a,o-a);let t=Nt(s,n),l=s[t];!l.deleted&&l.id.clock<n&&(s.splice(t+1,0,rr(e,l,n-l.id.clock)),t++);while(t<s.length){if(l=s[t++],!(l.id.clock<o))break;l.deleted||(o<l.id.clock+l.length&&s.splice(t,0,rr(e,l,o-l.id.clock)),l.delete(e))}}else O(r,i,n,o-n)}}if(r.clients.size>0){const t=new G;return a.uE(t.restEncoder,0),L(t,r),t.toUint8Array()}return null},N=c.U7;class U extends r.y{constructor({guid:t=c.k$(),collectionid:e=null,gc:n=!0,gcFilter:r=(()=>!0),meta:i=null,autoLoad:o=!1,shouldLoad:s=!0}={}){super(),this.gc=n,this.gcFilter=r,this.clientID=N(),this.guid=t,this.collectionid=e,this.share=new Map,this.store=new Pt,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=s,this.autoLoad=o,this.meta=i,this.isLoaded=!1,this.isSynced=!1,this.whenLoaded=u.Ue((t=>{this.on("load",(()=>{this.isLoaded=!0,t(this)}))}));const a=()=>u.Ue((t=>{const e=n=>{void 0!==n&&!0!==n||(this.off("sync",e),t())};this.on("sync",e)}));this.on("sync",(t=>{!1===t&&this.isSynced&&(this.whenSynced=a()),this.isSynced=void 0===t||!0===t,this.isLoaded||this.emit("load",[])})),this.whenSynced=a()}load(){const t=this._item;null===t||this.shouldLoad||Kt(t.parent.doc,(t=>{t.subdocsLoaded.add(this)}),null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(i.Dp(this.subdocs).map((t=>t.guid)))}transact(t,e=null){return Kt(this,t,e)}get(t,e=Me){const n=s.Yu(this.share,t,(()=>{const t=new e;return t._integrate(this,null),t})),r=n.constructor;if(e!==Me&&r!==e){if(r===Me){const r=new e;r._map=n._map,n._map.forEach((t=>{for(;null!==t;t=t.left)t.parent=r})),r._start=n._start;for(let t=r._start;null!==t;t=t.right)t.parent=r;return r._length=n._length,this.share.set(t,r),r._integrate(this,null),r}throw new Error(`Type with the name ${t} has already been defined with a different constructor`)}return n}getArray(t=""){return this.get(t,Ge)}getText(t=""){return this.get(t,fn)}getMap(t=""){return this.get(t,Ye)}getXmlFragment(t=""){return this.get(t,gn)}toJSON(){const t={};return this.share.forEach(((e,n)=>{t[n]=e.toJSON()})),t}destroy(){i.Dp(this.subdocs).forEach((t=>t.destroy()));const t=this._item;if(null!==t){this._item=null;const e=t.content;e.doc=new U({guid:this.guid,...e.opts,shouldLoad:!1}),e.doc._item=t,Kt(t.parent.doc,(n=>{const r=e.doc;t.deleted||n.subdocsAdded.add(r),n.subdocsRemoved.add(this)}),null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}on(t,e){super.on(t,e)}off(t,e){super.off(t,e)}}class F{constructor(t){this.restDecoder=t}resetDsCurVal(){}readDsClock(){return l.yg(this.restDecoder)}readDsLen(){return l.yg(this.restDecoder)}}class B extends F{readLeftID(){return gt(l.yg(this.restDecoder),l.yg(this.restDecoder))}readRightID(){return gt(l.yg(this.restDecoder),l.yg(this.restDecoder))}readClient(){return l.yg(this.restDecoder)}readInfo(){return l.kj(this.restDecoder)}readString(){return l.kf(this.restDecoder)}readParentInfo(){return 1===l.yg(this.restDecoder)}readTypeRef(){return l.yg(this.restDecoder)}readLen(){return l.yg(this.restDecoder)}readAny(){return l.v_(this.restDecoder)}readBuf(){return d.f9(l.HN(this.restDecoder))}readJSON(){return JSON.parse(l.kf(this.restDecoder))}readKey(){return l.kf(this.restDecoder)}}class V{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=l.yg(this.restDecoder),this.dsCurrVal}readDsLen(){const t=l.yg(this.restDecoder)+1;return this.dsCurrVal+=t,t}}class z extends V{constructor(t){super(t),this.keys=[],l.yg(t),this.keyClockDecoder=new l.dD(l.HN(t)),this.clientDecoder=new l.UF(l.HN(t)),this.leftClockDecoder=new l.dD(l.HN(t)),this.rightClockDecoder=new l.dD(l.HN(t)),this.infoDecoder=new l.XW(l.HN(t),l.kj),this.stringDecoder=new l.sO(l.HN(t)),this.parentInfoDecoder=new l.XW(l.HN(t),l.kj),this.typeRefDecoder=new l.UF(l.HN(t)),this.lenDecoder=new l.UF(l.HN(t))}readLeftID(){return new pt(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new pt(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return 1===this.parentInfoDecoder.read()}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return l.v_(this.restDecoder)}readBuf(){return l.HN(this.restDecoder)}readJSON(){return l.v_(this.restDecoder)}readKey(){const t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{const t=this.stringDecoder.read();return this.keys.push(t),t}}}class j{constructor(){this.restEncoder=a.Mf()}toUint8Array(){return a._f(this.restEncoder)}resetDsCurVal(){}writeDsClock(t){a.uE(this.restEncoder,t)}writeDsLen(t){a.uE(this.restEncoder,t)}}class H extends j{writeLeftID(t){a.uE(this.restEncoder,t.client),a.uE(this.restEncoder,t.clock)}writeRightID(t){a.uE(this.restEncoder,t.client),a.uE(this.restEncoder,t.clock)}writeClient(t){a.uE(this.restEncoder,t)}writeInfo(t){a.$F(this.restEncoder,t)}writeString(t){a.uw(this.restEncoder,t)}writeParentInfo(t){a.uE(this.restEncoder,t?1:0)}writeTypeRef(t){a.uE(this.restEncoder,t)}writeLen(t){a.uE(this.restEncoder,t)}writeAny(t){a.EM(this.restEncoder,t)}writeBuf(t){a.mP(this.restEncoder,t)}writeJSON(t){a.uw(this.restEncoder,JSON.stringify(t))}writeKey(t){a.uw(this.restEncoder,t)}}class W{constructor(){this.restEncoder=a.Mf(),this.dsCurrVal=0}toUint8Array(){return a._f(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){const e=t-this.dsCurrVal;this.dsCurrVal=t,a.uE(this.restEncoder,e)}writeDsLen(t){0===t&&h.zR(),a.uE(this.restEncoder,t-1),this.dsCurrVal+=t}}class G extends W{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new a.sX,this.clientEncoder=new a.HE,this.leftClockEncoder=new a.sX,this.rightClockEncoder=new a.sX,this.infoEncoder=new a.GF(a.$F),this.stringEncoder=new a.TS,this.parentInfoEncoder=new a.GF(a.$F),this.typeRefEncoder=new a.HE,this.lenEncoder=new a.HE}toUint8Array(){const t=a.Mf();return a.uE(t,0),a.mP(t,this.keyClockEncoder.toUint8Array()),a.mP(t,this.clientEncoder.toUint8Array()),a.mP(t,this.leftClockEncoder.toUint8Array()),a.mP(t,this.rightClockEncoder.toUint8Array()),a.mP(t,a._f(this.infoEncoder)),a.mP(t,this.stringEncoder.toUint8Array()),a.mP(t,a._f(this.parentInfoEncoder)),a.mP(t,this.typeRefEncoder.toUint8Array()),a.mP(t,this.lenEncoder.toUint8Array()),a.HK(t,a._f(this.restEncoder)),a._f(t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){a.EM(this.restEncoder,t)}writeBuf(t){a.mP(this.restEncoder,t)}writeJSON(t){a.EM(this.restEncoder,t)}writeKey(t){const e=this.keyMap.get(t);void 0===e?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(e)}}const $=(t,e,n,r)=>{r=o.Fp(r,e[0].id.clock);const i=Nt(e,r);a.uE(t.restEncoder,e.length-i),t.writeClient(n),a.uE(t.restEncoder,r);const s=e[i];s.write(t,r-s.id.clock);for(let o=i+1;o<e.length;o++)e[o].write(t,0)},q=(t,e,n)=>{const r=new Map;n.forEach(((t,n)=>{Dt(e,n)>t&&r.set(n,t)})),Lt(e).forEach(((t,e)=>{n.has(e)||r.set(e,0)})),a.uE(t.restEncoder,r.size),i.Dp(r.entries()).sort(((t,e)=>e[0]-t[0])).forEach((([n,r])=>{$(t,e.clients.get(n),n,r)}))},Y=(t,e)=>{const n=s.Ue(),r=l.yg(t.restDecoder);for(let i=0;i<r;i++){const r=l.yg(t.restDecoder),i=new Array(r),o=t.readClient();let s=l.yg(t.restDecoder);n.set(o,{i:0,refs:i});for(let n=0;n<r;n++){const r=t.readInfo();switch(f.kr&r){case 0:{const e=t.readLen();i[n]=new Cn(gt(o,s),e),s+=e;break}case 10:{const e=l.yg(t.restDecoder);i[n]=new ur(gt(o,s),e),s+=e;break}default:{const a=0===(r&(f.rc|f.x1)),l=new sr(gt(o,s),null,(r&f.x1)===f.x1?t.readLeftID():null,null,(r&f.rc)===f.rc?t.readRightID():null,a?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,a&&(r&f.cq)===f.cq?t.readString():null,ar(t,r));i[n]=l,s+=l.length}}}}return n},X=(t,e,n)=>{const r=[];let o=i.Dp(n.keys()).sort(((t,e)=>t-e));if(0===o.length)return null;const l=()=>{if(0===o.length)return null;let t=n.get(o[o.length-1]);while(t.refs.length===t.i){if(o.pop(),!(o.length>0))return null;t=n.get(o[o.length-1])}return t};let c=l();if(null===c&&0===r.length)return null;const u=new Pt,d=new Map,h=(t,e)=>{const n=d.get(t);(null==n||n>e)&&d.set(t,e)};let f=c.refs[c.i++];const p=new Map,m=()=>{for(const t of r){const e=t.id.client,r=n.get(e);r?(r.i--,u.clients.set(e,r.refs.slice(r.i)),n.delete(e),r.i=0,r.refs=[]):u.clients.set(e,[t]),o=o.filter((t=>t!==e))}r.length=0};while(1){if(f.constructor!==ur){const i=s.Yu(p,f.id.client,(()=>Dt(e,f.id.client))),o=i-f.id.clock;if(o<0)r.push(f),h(f.id.client,f.id.clock-1),m();else{const i=f.getMissing(t,e);if(null!==i){r.push(f);const t=n.get(i)||{refs:[],i:0};if(t.refs.length!==t.i){f=t.refs[t.i++];continue}h(i,Dt(e,i)),m()}else(0===o||o<f.length)&&(f.integrate(t,o),p.set(f.id.client,f.id.clock+f.length))}}if(r.length>0)f=r.pop();else if(null!==c&&c.i<c.refs.length)f=c.refs[c.i++];else{if(c=l(),null===c)break;f=c.refs[c.i++]}}if(u.clients.size>0){const t=new G;return q(t,u,new Map),a.uE(t.restEncoder,0),{missing:d,update:t.toUint8Array()}}return null},Z=(t,e)=>q(t,e.doc.store,e.beforeState),K=(t,e,n,r=new z(t))=>Kt(e,(t=>{t.local=!1;let e=!1;const n=t.doc,i=n.store,o=Y(r,n),s=X(t,i,o),a=i.pendingStructs;if(a){for(const[t,n]of a.missing)if(n<Dt(i,t)){e=!0;break}if(s){for(const[t,e]of s.missing){const n=a.missing.get(t);(null==n||n>e)&&a.missing.set(t,e)}a.update=ae([a.update,s.update])}}else i.pendingStructs=s;const c=I(r,t,i);if(i.pendingDs){const e=new z(l.l1(i.pendingDs));l.yg(e.restDecoder);const n=I(e,t,i);i.pendingDs=c&&n?ae([c,n]):c||n}else i.pendingDs=c;if(e){const e=i.pendingStructs.update;i.pendingStructs=null,J(t.doc,e)}}),n,!1),J=(t,e,n,r=z)=>{const i=l.l1(e);K(i,t,n,new r(i))},Q=(t,e,n)=>J(t,e,n,B),tt=(t,e,n=new Map)=>{q(t,e.store,n),L(t,P(e.store))},et=(t,e=new Uint8Array([0]),n=new G)=>{const r=it(e);tt(n,t,r);const i=[n.toUint8Array()];if(t.store.pendingDs&&i.push(t.store.pendingDs),t.store.pendingStructs&&i.push(le(t.store.pendingStructs.update,e)),i.length>1){if(n.constructor===H)return oe(i.map(((t,e)=>0===e?t:fe(t))));if(n.constructor===G)return ae(i)}return i[0]},nt=(t,e)=>et(t,e,new H),rt=t=>{const e=new Map,n=l.yg(t.restDecoder);for(let r=0;r<n;r++){const n=l.yg(t.restDecoder),r=l.yg(t.restDecoder);e.set(n,r)}return e},it=t=>rt(new F(l.l1(t))),ot=(t,e)=>(a.uE(t.restEncoder,e.size),i.Dp(e.entries()).sort(((t,e)=>e[0]-t[0])).forEach((([e,n])=>{a.uE(t.restEncoder,e),a.uE(t.restEncoder,n)})),t),st=(t,e)=>ot(t,Lt(e.store)),at=(t,e=new W)=>(t instanceof Map?ot(e,t):st(e,t),e.toUint8Array()),lt=t=>at(t,new j);class ct{constructor(){this.l=[]}}const ut=()=>new ct,dt=(t,e)=>t.l.push(e),ht=(t,e)=>{const n=t.l,r=n.length;t.l=n.filter((t=>e!==t)),r===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},ft=(t,e,n)=>p.PP(t.l,[e,n]);class pt{constructor(t,e){this.client=t,this.clock=e}}const mt=(t,e)=>t===e||null!==t&&null!==e&&t.client===e.client&&t.clock===e.clock,gt=(t,e)=>new pt(t,e),vt=t=>{for(const[e,n]of t.doc.share.entries())if(n===t)return e;throw h.zR()},yt=(t,e)=>{while(null!==e){if(e.parent===t)return!0;e=e.parent._item}return!1};class bt{constructor(t,e,n,r=0){this.type=t,this.tname=e,this.item=n,this.assoc=r}}const _t=t=>new bt(null==t.type?null:gt(t.type.client,t.type.clock),t.tname||null,null==t.item?null:gt(t.item.client,t.item.clock),null==t.assoc?0:t.assoc);class wt{constructor(t,e,n=0){this.type=t,this.index=e,this.assoc=n}}const xt=(t,e,n=0)=>new wt(t,e,n),St=(t,e,n)=>{let r=null,i=null;return null===t._item?i=vt(t):r=gt(t._item.id.client,t._item.id.clock),new bt(r,i,e,n)},Et=(t,e,n=0)=>{let r=t._start;if(n<0){if(0===e)return St(t,null,n);e--}while(null!==r){if(!r.deleted&&r.countable){if(r.length>e)return St(t,gt(r.id.client,r.id.clock+e),n);e-=r.length}if(null===r.right&&n<0)return St(t,r.lastId,n);r=r.right}return St(t,null,n)},Mt=(t,e)=>{const n=e.store,r=t.item,i=t.type,o=t.tname,s=t.assoc;let a=null,l=0;if(null!==r){if(Dt(n,r.client)<=r.clock)return null;const t=er(n,r),e=t.item;if(!(e instanceof sr))return null;if(a=e.parent,null===a._item||!a._item.deleted){l=e.deleted||!e.countable?0:t.diff+(s>=0?0:1);let n=e.left;while(null!==n)!n.deleted&&n.countable&&(l+=n.length),n=n.left}}else{if(null!==o)a=e.get(o);else{if(null===i)throw h.zR();{if(Dt(n,i.client)<=i.clock)return null;const{item:t}=er(n,i);if(!(t instanceof sr&&t.content instanceof Qn))return null;a=t.content.type}}l=s>=0?a._length:0}return xt(a,l,t.assoc)},Tt=(t,e)=>t===e||null!==t&&null!==e&&t.tname===e.tname&&mt(t.item,e.item)&&mt(t.type,e.type)&&t.assoc===e.assoc;class Ct{constructor(t,e){this.ds=t,this.sv=e}}const At=(t,e)=>new Ct(t,e),kt=(At(R(),new Map),t=>At(P(t.store),Lt(t.store))),Ot=(t,e)=>void 0===e?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!C(e.ds,t.id),Rt=(t,e)=>{const n=s.Yu(t.meta,Rt,m.Ue),r=t.doc.store;n.has(e)||(e.sv.forEach(((e,n)=>{e<Dt(r,n)&&Vt(t,gt(n,e))})),M(t,e.ds,(t=>{})),n.add(e))};class Pt{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Lt=t=>{const e=new Map;return t.clients.forEach(((t,n)=>{const r=t[t.length-1];e.set(n,r.id.clock+r.length)})),e},Dt=(t,e)=>{const n=t.clients.get(e);if(void 0===n)return 0;const r=n[n.length-1];return r.id.clock+r.length},It=(t,e)=>{let n=t.clients.get(e.id.client);if(void 0===n)n=[],t.clients.set(e.id.client,n);else{const t=n[n.length-1];if(t.id.clock+t.length!==e.id.clock)throw h.zR()}n.push(e)},Nt=(t,e)=>{let n=0,r=t.length-1,i=t[r],s=i.id.clock;if(s===e)return r;let a=o.GW(e/(s+i.length-1)*r);while(n<=r){if(i=t[a],s=i.id.clock,s<=e){if(e<s+i.length)return a;n=a+1}else r=a-1;a=o.GW((n+r)/2)}throw h.zR()},Ut=(t,e)=>{const n=t.clients.get(e.client);return n[Nt(n,e.clock)]},Ft=Ut,Bt=(t,e,n)=>{const r=Nt(e,n),i=e[r];return i.id.clock<n&&i instanceof sr?(e.splice(r+1,0,rr(t,i,n-i.id.clock)),r+1):r},Vt=(t,e)=>{const n=t.doc.store.clients.get(e.client);return n[Bt(t,n,e.clock)]},zt=(t,e,n)=>{const r=e.clients.get(n.client),i=Nt(r,n.clock),o=r[i];return n.clock!==o.id.clock+o.length-1&&o.constructor!==Cn&&r.splice(i+1,0,rr(t,o,n.clock-o.id.clock+1)),o},jt=(t,e,n)=>{const r=t.clients.get(e.id.client);r[Nt(r,e.id.clock)]=n},Ht=(t,e,n,r,i)=>{if(0===r)return;const o=n+r;let s,a=Bt(t,e,n);do{s=e[a++],o<s.id.clock+s.length&&Bt(t,e,o),i(s)}while(a<e.length&&e[a].id.clock<o)};class Wt{constructor(t,e,n){this.doc=t,this.deleteSet=new E,this.beforeState=Lt(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=e,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const Gt=(t,e)=>!(0===e.deleteSet.clients.size&&!s.Yj(e.afterState,((t,n)=>e.beforeState.get(n)!==t)))&&(A(e.deleteSet),Z(t,e),L(t,e.deleteSet),!0),$t=(t,e,n)=>{const r=e._item;(null===r||r.id.clock<(t.beforeState.get(r.id.client)||0)&&!r.deleted)&&s.Yu(t.changed,e,m.Ue).add(n)},qt=(t,e)=>{const n=t[e-1],r=t[e];n.deleted===r.deleted&&n.constructor===r.constructor&&n.mergeWith(r)&&(t.splice(e,1),r instanceof sr&&null!==r.parentSub&&r.parent._map.get(r.parentSub)===r&&r.parent._map.set(r.parentSub,n))},Yt=(t,e,n)=>{for(const[r,i]of t.clients.entries()){const t=e.clients.get(r);for(let r=i.length-1;r>=0;r--){const o=i[r],s=o.clock+o.len;for(let r=Nt(t,o.clock),i=t[r];r<t.length&&i.id.clock<s;i=t[++r]){const i=t[r];if(o.clock+o.len<=i.id.clock)break;i instanceof sr&&i.deleted&&!i.keep&&n(i)&&i.gc(e,!1)}}}},Xt=(t,e)=>{t.clients.forEach(((t,n)=>{const r=e.clients.get(n);for(let e=t.length-1;e>=0;e--){const n=t[e],i=o.VV(r.length-1,1+Nt(r,n.clock+n.len-1));for(let t=i,e=r[t];t>0&&e.id.clock>=n.clock;e=r[--t])qt(r,t)}}))},Zt=(t,e)=>{if(e<t.length){const n=t[e],r=n.doc,i=r.store,s=n.deleteSet,a=n._mergeStructs;try{A(s),n.afterState=Lt(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const t=[];n.changed.forEach(((e,r)=>t.push((()=>{null!==r._item&&r._item.deleted||r._callObserver(n,e)})))),t.push((()=>{n.changedParentTypes.forEach(((e,r)=>t.push((()=>{null!==r._item&&r._item.deleted||(e=e.filter((t=>null===t.target._item||!t.target._item.deleted)),e.forEach((t=>{t.currentTarget=r})),e.sort(((t,e)=>t.path.length-e.path.length)),ft(r._dEH,e,n))})))),t.push((()=>r.emit("afterTransaction",[n,r])))})),(0,p.PP)(t,[]),n._needFormattingCleanup&&un(n)}finally{r.gc&&Yt(s,i,r.gcFilter),Xt(s,i),n.afterState.forEach(((t,e)=>{const r=n.beforeState.get(e)||0;if(r!==t){const t=i.clients.get(e),n=o.Fp(Nt(t,r),1);for(let e=t.length-1;e>=n;e--)qt(t,e)}}));for(let t=0;t<a.length;t++){const{client:e,clock:n}=a[t].id,r=i.clients.get(e),o=Nt(r,n);o+1<r.length&&qt(r,o+1),o>0&&qt(r,o)}if(n.local||n.afterState.get(r.clientID)===n.beforeState.get(r.clientID)||(g.S0(v.ud,v.Pl,"[yjs] ",v.YW,v.hM,"Changed the client-id because another client seems to be using it."),r.clientID=N()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const t=new H,e=Gt(t,n);e&&r.emit("update",[t.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const t=new G,e=Gt(t,n);e&&r.emit("updateV2",[t.toUint8Array(),n.origin,r,n])}const{subdocsAdded:l,subdocsLoaded:c,subdocsRemoved:u}=n;(l.size>0||u.size>0||c.size>0)&&(l.forEach((t=>{t.clientID=r.clientID,null==t.collectionid&&(t.collectionid=r.collectionid),r.subdocs.add(t)})),u.forEach((t=>r.subdocs.delete(t))),r.emit("subdocs",[{loaded:c,added:l,removed:u},r,n]),u.forEach((t=>t.destroy()))),t.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,t])):Zt(t,e+1)}}},Kt=(t,e,n=null,r=!0)=>{const i=t._transactionCleanups;let o=!1,s=null;null===t._transaction&&(o=!0,t._transaction=new Wt(t,n,r),i.push(t._transaction),1===i.length&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{s=e(t._transaction)}finally{if(o){const e=t._transaction===i[0];t._transaction=null,e&&Zt(i,0)}}return s};class Jt{constructor(t,e){this.insertions=e,this.deletions=t,this.meta=new Map}}const Qt=(t,e,n)=>{M(t,n.deletions,(t=>{t instanceof sr&&e.scope.some((e=>yt(e,t)))&&nr(t,!1)}))},te=(t,e,n)=>{let r=null,i=null;const o=t.doc,s=t.scope;if(Kt(o,(n=>{while(e.length>0&&null===r){const i=o.store,a=e.pop(),l=new Set,c=[];let u=!1;M(n,a.insertions,(t=>{if(t instanceof sr){if(null!==t.redone){let{item:e,diff:r}=er(i,t.id);r>0&&(e=Vt(n,gt(e.id.client,e.id.clock+r))),t=e}!t.deleted&&s.some((e=>yt(e,t)))&&c.push(t)}})),M(n,a.deletions,(t=>{t instanceof sr&&s.some((e=>yt(e,t)))&&!C(a.insertions,t.id)&&l.add(t)})),l.forEach((e=>{u=null!==or(n,e,l,a.insertions,t.ignoreRemoteMapChanges,t)||u}));for(let e=c.length-1;e>=0;e--){const r=c[e];t.deleteFilter(r)&&(r.delete(n),u=!0)}r=u?a:null}n.changed.forEach(((t,e)=>{t.has(null)&&e._searchMarker&&(e._searchMarker.length=0)})),i=n}),t),null!=r){const e=i.changedParentTypes;t.emit("stack-item-popped",[{stackItem:r,type:n,changedParentTypes:e},t])}return r};class ee extends r.y{constructor(t,{captureTimeout:e=500,captureTransaction:n=(t=>!0),deleteFilter:r=(()=>!0),trackedOrigins:o=new Set([null]),ignoreRemoteMapChanges:s=!1,doc:a=(i.kJ(t)?t[0].doc:t.doc)}={}){super(),this.scope=[],this.addToScope(t),this.deleteFilter=r,o.add(this),this.trackedOrigins=o,this.captureTransaction=n,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.doc=a,this.lastChange=0,this.ignoreRemoteMapChanges=s,this.captureTimeout=e,this.afterTransactionHandler=t=>{if(!this.captureTransaction(t)||!this.scope.some((e=>t.changedParentTypes.has(e)))||!this.trackedOrigins.has(t.origin)&&(!t.origin||!this.trackedOrigins.has(t.origin.constructor)))return;const e=this.undoing,n=this.redoing,r=e?this.redoStack:this.undoStack;e?this.stopCapturing():n||this.clear(!1,!0);const i=new E;t.afterState.forEach(((e,n)=>{const r=t.beforeState.get(n)||0,o=e-r;o>0&&O(i,n,r,o)}));const o=y.ZG();let s=!1;if(this.lastChange>0&&o-this.lastChange<this.captureTimeout&&r.length>0&&!e&&!n){const e=r[r.length-1];e.deletions=k([e.deletions,t.deleteSet]),e.insertions=k([e.insertions,i])}else r.push(new Jt(t.deleteSet,i)),s=!0;e||n||(this.lastChange=o),M(t,t.deleteSet,(t=>{t instanceof sr&&this.scope.some((e=>yt(e,t)))&&nr(t,!0)}));const a=[{stackItem:r[r.length-1],origin:t.origin,type:e?"redo":"undo",changedParentTypes:t.changedParentTypes},this];s?this.emit("stack-item-added",a):this.emit("stack-item-updated",a)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",(()=>{this.destroy()}))}addToScope(t){t=i.kJ(t)?t:[t],t.forEach((t=>{this.scope.every((e=>e!==t))&&this.scope.push(t)}))}addTrackedOrigin(t){this.trackedOrigins.add(t)}removeTrackedOrigin(t){this.trackedOrigins.delete(t)}clear(t=!0,e=!0){(t&&this.canUndo()||e&&this.canRedo())&&this.doc.transact((n=>{t&&(this.undoStack.forEach((t=>Qt(n,this,t))),this.undoStack=[]),e&&(this.redoStack.forEach((t=>Qt(n,this,t))),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:t,redoStackCleared:e}])}))}stopCapturing(){this.lastChange=0}undo(){let t;this.undoing=!0;try{t=te(this,this.undoStack,"undo")}finally{this.undoing=!1}return t}redo(){let t;this.redoing=!0;try{t=te(this,this.redoStack,"redo")}finally{this.redoing=!1}return t}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}function*ne(t){const e=l.yg(t.restDecoder);for(let n=0;n<e;n++){const e=l.yg(t.restDecoder),n=t.readClient();let r=l.yg(t.restDecoder);for(let i=0;i<e;i++){const e=t.readInfo();if(10===e){const e=l.yg(t.restDecoder);yield new ur(gt(n,r),e),r+=e}else if(0!==(f.kr&e)){const i=0===(e&(f.rc|f.x1)),o=new sr(gt(n,r),null,(e&f.x1)===f.x1?t.readLeftID():null,null,(e&f.rc)===f.rc?t.readRightID():null,i?t.readParentInfo()?t.readString():t.readLeftID():null,i&&(e&f.cq)===f.cq?t.readString():null,ar(t,e));yield o,r+=o.length}else{const e=t.readLen();yield new Cn(gt(n,r),e),r+=e}}}}class re{constructor(t,e){this.gen=ne(t),this.curr=null,this.done=!1,this.filterSkips=e,this.next()}next(){do{this.curr=this.gen.next().value||null}while(this.filterSkips&&null!==this.curr&&this.curr.constructor===ur);return this.curr}}class ie{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}}const oe=t=>ae(t,B,H),se=(t,e)=>{if(t.constructor===Cn){const{client:n,clock:r}=t.id;return new Cn(gt(n,r+e),t.length-e)}if(t.constructor===ur){const{client:n,clock:r}=t.id;return new ur(gt(n,r+e),t.length-e)}{const n=t,{client:r,clock:i}=n.id;return new sr(gt(r,i+e),null,gt(r,i+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},ae=(t,e=z,n=G)=>{if(1===t.length)return t[0];const r=t.map((t=>new e(l.l1(t))));let i=r.map((t=>new re(t,!0))),o=null;const s=new n,a=new ie(s);while(1){if(i=i.filter((t=>null!==t.curr)),i.sort(((t,e)=>{if(t.curr.id.client===e.curr.id.client){const n=t.curr.id.clock-e.curr.id.clock;return 0===n?t.curr.constructor===e.curr.constructor?0:t.curr.constructor===ur?1:-1:n}return e.curr.id.client-t.curr.id.client})),0===i.length)break;const t=i[0],e=t.curr.id.client;if(null!==o){let n=t.curr,r=!1;while(null!==n&&n.id.clock+n.length<=o.struct.id.clock+o.struct.length&&n.id.client>=o.struct.id.client)n=t.next(),r=!0;if(null===n||n.id.client!==e||r&&n.id.clock>o.struct.id.clock+o.struct.length)continue;if(e!==o.struct.id.client)ue(a,o.struct,o.offset),o={struct:n,offset:0},t.next();else if(o.struct.id.clock+o.struct.length<n.id.clock)if(o.struct.constructor===ur)o.struct.length=n.id.clock+n.length-o.struct.id.clock;else{ue(a,o.struct,o.offset);const t=n.id.clock-o.struct.id.clock-o.struct.length,r=new ur(gt(e,o.struct.id.clock+o.struct.length),t);o={struct:r,offset:0}}else{const e=o.struct.id.clock+o.struct.length-n.id.clock;e>0&&(o.struct.constructor===ur?o.struct.length-=e:n=se(n,e)),o.struct.mergeWith(n)||(ue(a,o.struct,o.offset),o={struct:n,offset:0},t.next())}}else o={struct:t.curr,offset:0},t.next();for(let n=t.curr;null!==n&&n.id.client===e&&n.id.clock===o.struct.id.clock+o.struct.length&&n.constructor!==ur;n=t.next())ue(a,o.struct,o.offset),o={struct:n,offset:0}}null!==o&&(ue(a,o.struct,o.offset),o=null),de(a);const c=r.map((t=>D(t))),u=k(c);return L(s,u),s.toUint8Array()},le=(t,e,n=z,r=G)=>{const i=it(e),s=new r,a=new ie(s),c=new n(l.l1(t)),u=new re(c,!1);while(u.curr){const t=u.curr,e=t.id.client,n=i.get(e)||0;if(u.curr.constructor!==ur)if(t.id.clock+t.length>n){ue(a,t,o.Fp(n-t.id.clock,0)),u.next();while(u.curr&&u.curr.id.client===e)ue(a,u.curr,0),u.next()}else while(u.curr&&u.curr.id.client===e&&u.curr.id.clock+u.curr.length<=n)u.next();else u.next()}de(a);const d=D(c);return L(s,d),s.toUint8Array()},ce=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:a._f(t.encoder.restEncoder)}),t.encoder.restEncoder=a.Mf(),t.written=0)},ue=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&ce(t),0===t.written&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),a.uE(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},de=t=>{ce(t);const e=t.encoder.restEncoder;a.uE(e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){const r=t.clientStructs[n];a.uE(e,r.written),a.HK(e,r.restEncoder)}},he=(t,e,n,r)=>{const i=new n(l.l1(t)),o=new re(i,!1),s=new r,a=new ie(s);for(let l=o.curr;null!==l;l=o.next())ue(a,e(l),0);de(a);const c=D(i);return L(s,c),s.toUint8Array()},fe=t=>he(t,p.id,z,H);class pe{constructor(t,e){this.target=t,this.currentTarget=t,this.transaction=e,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=me(this.currentTarget,this.target))}deletes(t){return C(this.transaction.deleteSet,t.id)}get keys(){if(null===this._keys){const t=new Map,e=this.target,n=this.transaction.changed.get(e);n.forEach((n=>{if(null!==n){const r=e._map.get(n);let o,s;if(this.adds(r)){let t=r.left;while(null!==t&&this.adds(t))t=t.left;if(this.deletes(r)){if(null===t||!this.deletes(t))return;o="delete",s=i.Z$(t.content.getContent())}else null!==t&&this.deletes(t)?(o="update",s=i.Z$(t.content.getContent())):(o="add",s=void 0)}else{if(!this.deletes(r))return;o="delete",s=i.Z$(r.content.getContent())}t.set(n,{action:o,oldValue:s})}})),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(null===t){const e=this.target,n=m.Ue(),r=m.Ue(),i=[];t={added:n,deleted:r,delta:i,keys:this.keys};const o=this.transaction.changed.get(e);if(o.has(null)){let t=null;const o=()=>{t&&i.push(t)};for(let i=e._start;null!==i;i=i.right)i.deleted?this.deletes(i)&&!this.adds(i)&&(null!==t&&void 0!==t.delete||(o(),t={delete:0}),t.delete+=i.length,r.add(i)):this.adds(i)?(null!==t&&void 0!==t.insert||(o(),t={insert:[]}),t.insert=t.insert.concat(i.content.getContent()),n.add(i)):(null!==t&&void 0!==t.retain||(o(),t={retain:0}),t.retain+=i.length);null!==t&&void 0===t.retain&&o()}this._changes=t}return t}}const me=(t,e)=>{const n=[];while(null!==e._item&&e!==t){if(null!==e._item.parentSub)n.unshift(e._item.parentSub);else{let t=0,r=e._item.parent._start;while(r!==e._item&&null!==r)r.deleted||t++,r=r.right;n.unshift(t)}e=e._item.parent}return n},ge=80;let ve=0;class ye{constructor(t,e){t.marker=!0,this.p=t,this.index=e,this.timestamp=ve++}}const be=t=>{t.timestamp=ve++},_e=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=ve++},we=(t,e,n)=>{if(t.length>=ge){const r=t.reduce(((t,e)=>t.timestamp<e.timestamp?t:e));return _e(r,e,n),r}{const r=new ye(e,n);return t.push(r),r}},xe=(t,e)=>{if(null===t._start||0===e||null===t._searchMarker)return null;const n=0===t._searchMarker.length?null:t._searchMarker.reduce(((t,n)=>o.Wn(e-t.index)<o.Wn(e-n.index)?t:n));let r=t._start,i=0;null!==n&&(r=n.p,i=n.index,be(n));while(null!==r.right&&i<e){if(!r.deleted&&r.countable){if(e<i+r.length)break;i+=r.length}r=r.right}while(null!==r.left&&i>e)r=r.left,!r.deleted&&r.countable&&(i-=r.length);while(null!==r.left&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return null!==n&&o.Wn(n.index-i)<r.parent.length/ge?(_e(n,r,i),n):we(t._searchMarker,r,i)},Se=(t,e,n)=>{for(let r=t.length-1;r>=0;r--){const i=t[r];if(n>0){let e=i.p;e.marker=!1;while(e&&(e.deleted||!e.countable))e=e.left,e&&!e.deleted&&e.countable&&(i.index-=e.length);if(null===e||!0===e.marker){t.splice(r,1);continue}i.p=e,e.marker=!0}(e<i.index||n>0&&e===i.index)&&(i.index=o.Fp(e,i.index+n))}},Ee=(t,e,n)=>{const r=t,i=e.changedParentTypes;while(1){if(s.Yu(i,t,(()=>[])).push(n),null===t._item)break;t=t._item.parent}ft(r._eH,n,e)};class Me{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=ut(),this._dEH=ut(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,e){this.doc=t,this._item=e}_copy(){throw h.Nw()}clone(){throw h.Nw()}_write(t){}get _first(){let t=this._start;while(null!==t&&t.deleted)t=t.right;return t}_callObserver(t,e){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){dt(this._eH,t)}observeDeep(t){dt(this._dEH,t)}unobserve(t){ht(this._eH,t)}unobserveDeep(t){ht(this._dEH,t)}toJSON(){}}const Te=(t,e,n)=>{e<0&&(e=t._length+e),n<0&&(n=t._length+n);let r=n-e;const i=[];let o=t._start;while(null!==o&&r>0){if(o.countable&&!o.deleted){const t=o.content.getContent();if(t.length<=e)e-=t.length;else{for(let n=e;n<t.length&&r>0;n++)i.push(t[n]),r--;e=0}}o=o.right}return i},Ce=t=>{const e=[];let n=t._start;while(null!==n){if(n.countable&&!n.deleted){const t=n.content.getContent();for(let n=0;n<t.length;n++)e.push(t[n])}n=n.right}return e},Ae=(t,e)=>{const n=[];let r=t._start;while(null!==r){if(r.countable&&Ot(r,e)){const t=r.content.getContent();for(let e=0;e<t.length;e++)n.push(t[e])}r=r.right}return n},ke=(t,e)=>{let n=0,r=t._start;while(null!==r){if(r.countable&&!r.deleted){const i=r.content.getContent();for(let r=0;r<i.length;r++)e(i[r],n++,t)}r=r.right}},Oe=(t,e)=>{const n=[];return ke(t,((r,i)=>{n.push(e(r,i,t))})),n},Re=t=>{let e=t._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(null===n){while(null!==e&&e.deleted)e=e.right;if(null===e)return{done:!0,value:void 0};n=e.content.getContent(),r=0,e=e.right}const t=n[r++];return n.length<=r&&(n=null),{done:!1,value:t}}}},Pe=(t,e)=>{const n=xe(t,e);let r=t._start;for(null!==n&&(r=n.p,e-=n.index);null!==r;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},Le=(t,e,n,r)=>{let i=n;const o=t.doc,s=o.clientID,a=o.store,l=null===n?e._start:n.right;let c=[];const u=()=>{c.length>0&&(i=new sr(gt(s,Dt(a,s)),i,i&&i.lastId,l,l&&l.id,e,null,new zn(c)),i.integrate(t,0),c=[])};r.forEach((n=>{if(null===n)c.push(n);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(n);break;default:switch(u(),n.constructor){case Uint8Array:case ArrayBuffer:i=new sr(gt(s,Dt(a,s)),i,i&&i.lastId,l,l&&l.id,e,null,new An(new Uint8Array(n))),i.integrate(t,0);break;case U:i=new sr(gt(s,Dt(a,s)),i,i&&i.lastId,l,l&&l.id,e,null,new Ln(n)),i.integrate(t,0);break;default:if(!(n instanceof Me))throw new Error("Unexpected content type in insert operation");i=new sr(gt(s,Dt(a,s)),i,i&&i.lastId,l,l&&l.id,e,null,new Qn(n)),i.integrate(t,0)}}})),u()},De=h.Ue("Length exceeded!"),Ie=(t,e,n,r)=>{if(n>e._length)throw De;if(0===n)return e._searchMarker&&Se(e._searchMarker,n,r.length),Le(t,e,null,r);const i=n,o=xe(e,n);let s=e._start;for(null!==o&&(s=o.p,n-=o.index,0===n&&(s=s.prev,n+=s&&s.countable&&!s.deleted?s.length:0));null!==s;s=s.right)if(!s.deleted&&s.countable){if(n<=s.length){n<s.length&&Vt(t,gt(s.id.client,s.id.clock+n));break}n-=s.length}return e._searchMarker&&Se(e._searchMarker,i,r.length),Le(t,e,s,r)},Ne=(t,e,n)=>{const r=(e._searchMarker||[]).reduce(((t,e)=>e.index>t.index?e:t),{index:0,p:e._start});let i=r.p;if(i)while(i.right)i=i.right;return Le(t,e,i,n)},Ue=(t,e,n,r)=>{if(0===r)return;const i=n,o=r,s=xe(e,n);let a=e._start;for(null!==s&&(a=s.p,n-=s.index);null!==a&&n>0;a=a.right)!a.deleted&&a.countable&&(n<a.length&&Vt(t,gt(a.id.client,a.id.clock+n)),n-=a.length);while(r>0&&null!==a)a.deleted||(r<a.length&&Vt(t,gt(a.id.client,a.id.clock+r)),a.delete(t),r-=a.length),a=a.right;if(r>0)throw De;e._searchMarker&&Se(e._searchMarker,i,-o+r)},Fe=(t,e,n)=>{const r=e._map.get(n);void 0!==r&&r.delete(t)},Be=(t,e,n,r)=>{const i=e._map.get(n)||null,o=t.doc,s=o.clientID;let a;if(null==r)a=new zn([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:a=new zn([r]);break;case Uint8Array:a=new An(r);break;case U:a=new Ln(r);break;default:if(!(r instanceof Me))throw new Error("Unexpected content type");a=new Qn(r)}new sr(gt(s,Dt(o.store,s)),i,i&&i.lastId,null,null,e,n,a).integrate(t,0)},Ve=(t,e)=>{const n=t._map.get(e);return void 0===n||n.deleted?void 0:n.content.getContent()[n.length-1]},ze=t=>{const e={};return t._map.forEach(((t,n)=>{t.deleted||(e[n]=t.content.getContent()[t.length-1])})),e},je=(t,e)=>{const n=t._map.get(e);return void 0!==n&&!n.deleted},He=t=>_(t.entries(),(t=>!t[1].deleted));class We extends pe{constructor(t,e){super(t,e),this._transaction=e}}class Ge extends Me{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){const e=new Ge;return e.push(t),e}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Ge}clone(){const t=new Ge;return t.insert(0,this.toArray().map((t=>t instanceof Me?t.clone():t))),t}get length(){return null===this._prelimContent?this._length:this._prelimContent.length}_callObserver(t,e){super._callObserver(t,e),Ee(this,t,new We(this,t))}insert(t,e){null!==this.doc?Kt(this.doc,(n=>{Ie(n,this,t,e)})):this._prelimContent.splice(t,0,...e)}push(t){null!==this.doc?Kt(this.doc,(e=>{Ne(e,this,t)})):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,e=1){null!==this.doc?Kt(this.doc,(n=>{Ue(n,this,t,e)})):this._prelimContent.splice(t,e)}get(t){return Pe(this,t)}toArray(){return Ce(this)}slice(t=0,e=this.length){return Te(this,t,e)}toJSON(){return this.map((t=>t instanceof Me?t.toJSON():t))}map(t){return Oe(this,t)}forEach(t){ke(this,t)}[Symbol.iterator](){return Re(this)}_write(t){t.writeTypeRef($n)}}const $e=t=>new Ge;class qe extends pe{constructor(t,e,n){super(t,e),this.keysChanged=n}}class Ye extends Me{constructor(t){super(),this._prelimContent=null,this._prelimContent=void 0===t?new Map:new Map(t)}_integrate(t,e){super._integrate(t,e),this._prelimContent.forEach(((t,e)=>{this.set(e,t)})),this._prelimContent=null}_copy(){return new Ye}clone(){const t=new Ye;return this.forEach(((e,n)=>{t.set(n,e instanceof Me?e.clone():e)})),t}_callObserver(t,e){Ee(this,t,new qe(this,t,e))}toJSON(){const t={};return this._map.forEach(((e,n)=>{if(!e.deleted){const r=e.content.getContent()[e.length-1];t[n]=r instanceof Me?r.toJSON():r}})),t}get size(){return[...He(this._map)].length}keys(){return w(He(this._map),(t=>t[0]))}values(){return w(He(this._map),(t=>t[1].content.getContent()[t[1].length-1]))}entries(){return w(He(this._map),(t=>[t[0],t[1].content.getContent()[t[1].length-1]]))}forEach(t){this._map.forEach(((e,n)=>{e.deleted||t(e.content.getContent()[e.length-1],n,this)}))}[Symbol.iterator](){return this.entries()}delete(t){null!==this.doc?Kt(this.doc,(e=>{Fe(e,this,t)})):this._prelimContent.delete(t)}set(t,e){return null!==this.doc?Kt(this.doc,(n=>{Be(n,this,t,e)})):this._prelimContent.set(t,e),e}get(t){return Ve(this,t)}has(t){return je(this,t)}clear(){null!==this.doc?Kt(this.doc,(t=>{this.forEach((function(e,n,r){Fe(t,r,n)}))})):this._prelimContent.clear()}_write(t){t.writeTypeRef(qn)}}const Xe=t=>new Ye,Ze=(t,e)=>t===e||"object"===typeof t&&"object"===typeof e&&t&&e&&x.$m(t,e);class Ke{constructor(t,e,n,r){this.left=t,this.right=e,this.index=n,this.currentAttributes=r}forward(){switch(null===this.right&&h.zR(),this.right.content.constructor){case Un:this.right.deleted||en(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const Je=(t,e,n)=>{while(null!==e.right&&n>0){switch(e.right.content.constructor){case Un:e.right.deleted||en(e.currentAttributes,e.right.content);break;default:e.right.deleted||(n<e.right.length&&Vt(t,gt(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},Qe=(t,e,n)=>{const r=new Map,i=xe(e,n);if(i){const e=new Ke(i.p.left,i.p,i.index,r);return Je(t,e,n-i.index)}{const i=new Ke(null,e._start,0,r);return Je(t,i,n)}},tn=(t,e,n,r)=>{while(null!==n.right&&(!0===n.right.deleted||n.right.content.constructor===Un&&Ze(r.get(n.right.content.key),n.right.content.value)))n.right.deleted||r.delete(n.right.content.key),n.forward();const i=t.doc,o=i.clientID;r.forEach(((r,s)=>{const a=n.left,l=n.right,c=new sr(gt(o,Dt(i.store,o)),a,a&&a.lastId,l,l&&l.id,e,null,new Un(s,r));c.integrate(t,0),n.right=c,n.forward()}))},en=(t,e)=>{const{key:n,value:r}=e;null===r?t.delete(n):t.set(n,r)},nn=(t,e)=>{while(1){if(null===t.right)break;if(!(t.right.deleted||t.right.content.constructor===Un&&Ze(e[t.right.content.key]||null,t.right.content.value)))break;t.forward()}},rn=(t,e,n,r)=>{const i=t.doc,o=i.clientID,s=new Map;for(const a in r){const l=r[a],c=n.currentAttributes.get(a)||null;if(!Ze(c,l)){s.set(a,c);const{left:r,right:u}=n;n.right=new sr(gt(o,Dt(i.store,o)),r,r&&r.lastId,u,u&&u.id,e,null,new Un(a,l)),n.right.integrate(t,0),n.forward()}}return s},on=(t,e,n,r,i)=>{n.currentAttributes.forEach(((t,e)=>{void 0===i[e]&&(i[e]=null)}));const o=t.doc,s=o.clientID;nn(n,i);const a=rn(t,e,n,i),l=r.constructor===String?new Hn(r):r instanceof Me?new Qn(r):new In(r);let{left:c,right:u,index:d}=n;e._searchMarker&&Se(e._searchMarker,n.index,l.getLength()),u=new sr(gt(s,Dt(o.store,s)),c,c&&c.lastId,u,u&&u.id,e,null,l),u.integrate(t,0),n.right=u,n.index=d,n.forward(),tn(t,e,n,a)},sn=(t,e,n,r,i)=>{const o=t.doc,s=o.clientID;nn(n,i);const a=rn(t,e,n,i);t:while(null!==n.right&&(r>0||a.size>0&&(n.right.deleted||n.right.content.constructor===Un))){if(!n.right.deleted)switch(n.right.content.constructor){case Un:{const{key:e,value:o}=n.right.content,s=i[e];if(void 0!==s){if(Ze(s,o))a.delete(e);else{if(0===r)break t;a.set(e,o)}n.right.delete(t)}else n.currentAttributes.set(e,o);break}default:r<n.right.length&&Vt(t,gt(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let i="";for(;r>0;r--)i+="\n";n.right=new sr(gt(s,Dt(o.store,s)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new Hn(i)),n.right.integrate(t,0),n.forward()}tn(t,e,n,a)},an=(t,e,n,r,i)=>{let o=e;const a=s.Ue();while(o&&(!o.countable||o.deleted)){if(!o.deleted&&o.content.constructor===Un){const t=o.content;a.set(t.key,t)}o=o.right}let l=0,c=!1;while(e!==o){if(n===e&&(c=!0),!e.deleted){const n=e.content;switch(n.constructor){case Un:{const{key:o,value:s}=n,u=r.get(o)||null;a.get(o)===n&&u!==s||(e.delete(t),l++,c||(i.get(o)||null)!==s||u===s||(null===u?i.delete(o):i.set(o,u))),c||e.deleted||en(i,n);break}}}e=e.right}return l},ln=(t,e)=>{while(e&&e.right&&(e.right.deleted||!e.right.countable))e=e.right;const n=new Set;while(e&&(e.deleted||!e.countable)){if(!e.deleted&&e.content.constructor===Un){const r=e.content.key;n.has(r)?e.delete(t):n.add(r)}e=e.left}},cn=t=>{let e=0;return Kt(t.doc,(n=>{let r=t._start,i=t._start,o=s.Ue();const a=s.JG(o);while(i){if(!1===i.deleted)switch(i.content.constructor){case Un:en(a,i.content);break;default:e+=an(n,r,i,o,a),o=s.JG(a),r=i;break}i=i.right}})),e},un=t=>{const e=new Set,n=t.doc;for(const[r,i]of t.afterState.entries()){const o=t.beforeState.get(r)||0;i!==o&&Ht(t,n.store.clients.get(r),o,i,(t=>{t.deleted||t.content.constructor!==Un||t.constructor===Cn||e.add(t.parent)}))}Kt(n,(n=>{M(t,t.deleteSet,(t=>{if(t instanceof Cn||e.has(t.parent))return;const r=t.parent;t.content.constructor===Un?e.add(r):ln(n,t)}));for(const t of e)cn(t)}))},dn=(t,e,n)=>{const r=n,i=s.JG(e.currentAttributes),o=e.right;while(n>0&&null!==e.right){if(!1===e.right.deleted)switch(e.right.content.constructor){case Qn:case In:case Hn:n<e.right.length&&Vt(t,gt(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}o&&an(t,o,e.right,i,e.currentAttributes);const a=(e.left||e.right).parent;return a._searchMarker&&Se(a._searchMarker,e.index,-r+n),e};class hn extends pe{constructor(t,e,n){super(t,e),this.childListChanged=!1,this.keysChanged=new Set,n.forEach((t=>{null===t?this.childListChanged=!0:this.keysChanged.add(t)}))}get changes(){if(null===this._changes){const t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(null===this._delta){const t=this.target.doc,e=[];Kt(t,(t=>{const n=new Map,r=new Map;let i=this.target._start,o=null;const s={};let a="",l=0,c=0;const u=()=>{if(null!==o){let t=null;switch(o){case"delete":c>0&&(t={delete:c}),c=0;break;case"insert":("object"===typeof a||a.length>0)&&(t={insert:a},n.size>0&&(t.attributes={},n.forEach(((e,n)=>{null!==e&&(t.attributes[n]=e)})))),a="";break;case"retain":l>0&&(t={retain:l},x.xb(s)||(t.attributes=x.f0({},s))),l=0;break}t&&e.push(t),o=null}};while(null!==i){switch(i.content.constructor){case Qn:case In:this.adds(i)?this.deletes(i)||(u(),o="insert",a=i.content.getContent()[0],u()):this.deletes(i)?("delete"!==o&&(u(),o="delete"),c+=1):i.deleted||("retain"!==o&&(u(),o="retain"),l+=1);break;case Hn:this.adds(i)?this.deletes(i)||("insert"!==o&&(u(),o="insert"),a+=i.content.str):this.deletes(i)?("delete"!==o&&(u(),o="delete"),c+=i.length):i.deleted||("retain"!==o&&(u(),o="retain"),l+=i.length);break;case Un:{const{key:e,value:a}=i.content;if(this.adds(i)){if(!this.deletes(i)){const l=n.get(e)||null;Ze(l,a)?null!==a&&i.delete(t):("retain"===o&&u(),Ze(a,r.get(e)||null)?delete s[e]:s[e]=a)}}else if(this.deletes(i)){r.set(e,a);const t=n.get(e)||null;Ze(t,a)||("retain"===o&&u(),s[e]=t)}else if(!i.deleted){r.set(e,a);const n=s[e];void 0!==n&&(Ze(n,a)?null!==n&&i.delete(t):("retain"===o&&u(),null===a?delete s[e]:s[e]=a))}i.deleted||("insert"===o&&u(),en(n,i.content));break}}i=i.right}u();while(e.length>0){const t=e[e.length-1];if(void 0===t.retain||void 0!==t.attributes)break;e.pop()}})),this._delta=e}return this._delta}}class fn extends Me{constructor(t){super(),this._pending=void 0!==t?[()=>this.insert(0,t)]:[],this._searchMarker=[]}get length(){return this._length}_integrate(t,e){super._integrate(t,e);try{this._pending.forEach((t=>t()))}catch(n){console.error(n)}this._pending=null}_copy(){return new fn}clone(){const t=new fn;return t.applyDelta(this.toDelta()),t}_callObserver(t,e){super._callObserver(t,e);const n=new hn(this,t,e);Ee(this,t,n),t.local||(t._needFormattingCleanup=!0)}toString(){let t="",e=this._start;while(null!==e)!e.deleted&&e.countable&&e.content.constructor===Hn&&(t+=e.content.str),e=e.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:e=!0}={}){null!==this.doc?Kt(this.doc,(n=>{const r=new Ke(null,this._start,0,new Map);for(let i=0;i<t.length;i++){const o=t[i];if(void 0!==o.insert){const s=e||"string"!==typeof o.insert||i!==t.length-1||null!==r.right||"\n"!==o.insert.slice(-1)?o.insert:o.insert.slice(0,-1);("string"!==typeof s||s.length>0)&&on(n,this,r,s,o.attributes||{})}else void 0!==o.retain?sn(n,this,r,o.retain,o.attributes||{}):void 0!==o.delete&&dn(n,r,o.delete)}})):this._pending.push((()=>this.applyDelta(t)))}toDelta(t,e,n){const r=[],i=new Map,o=this.doc;let s="",a=this._start;function l(){if(s.length>0){const t={};let e=!1;i.forEach(((n,r)=>{e=!0,t[r]=n}));const n={insert:s};e&&(n.attributes=t),r.push(n),s=""}}const c=()=>{while(null!==a){if(Ot(a,t)||void 0!==e&&Ot(a,e))switch(a.content.constructor){case Hn:{const r=i.get("ychange");void 0===t||Ot(a,t)?void 0===e||Ot(a,e)?void 0!==r&&(l(),i.delete("ychange")):void 0!==r&&r.user===a.id.client&&"added"===r.type||(l(),i.set("ychange",n?n("added",a.id):{type:"added"})):void 0!==r&&r.user===a.id.client&&"removed"===r.type||(l(),i.set("ychange",n?n("removed",a.id):{type:"removed"})),s+=a.content.str;break}case Qn:case In:{l();const t={insert:a.content.getContent()[0]};if(i.size>0){const e={};t.attributes=e,i.forEach(((t,n)=>{e[n]=t}))}r.push(t);break}case Un:Ot(a,t)&&(l(),en(i,a.content));break}a=a.right}l()};return t||e?Kt(o,(n=>{t&&Rt(n,t),e&&Rt(n,e),c()}),"cleanup"):c(),r}insert(t,e,n){if(e.length<=0)return;const r=this.doc;null!==r?Kt(r,(r=>{const i=Qe(r,this,t);n||(n={},i.currentAttributes.forEach(((t,e)=>{n[e]=t}))),on(r,this,i,e,n)})):this._pending.push((()=>this.insert(t,e,n)))}insertEmbed(t,e,n={}){const r=this.doc;null!==r?Kt(r,(r=>{const i=Qe(r,this,t);on(r,this,i,e,n)})):this._pending.push((()=>this.insertEmbed(t,e,n)))}delete(t,e){if(0===e)return;const n=this.doc;null!==n?Kt(n,(n=>{dn(n,Qe(n,this,t),e)})):this._pending.push((()=>this.delete(t,e)))}format(t,e,n){if(0===e)return;const r=this.doc;null!==r?Kt(r,(r=>{const i=Qe(r,this,t);null!==i.right&&sn(r,this,i,e,n)})):this._pending.push((()=>this.format(t,e,n)))}removeAttribute(t){null!==this.doc?Kt(this.doc,(e=>{Fe(e,this,t)})):this._pending.push((()=>this.removeAttribute(t)))}setAttribute(t,e){null!==this.doc?Kt(this.doc,(n=>{Be(n,this,t,e)})):this._pending.push((()=>this.setAttribute(t,e)))}getAttribute(t){return Ve(this,t)}getAttributes(){return ze(this)}_write(t){t.writeTypeRef(Yn)}}const pn=t=>new fn;class mn{constructor(t,e=(()=>!0)){this._filter=e,this._root=t,this._currentNode=t._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let t=this._currentNode,e=t&&t.content&&t.content.type;if(null!==t&&(!this._firstCall||t.deleted||!this._filter(e)))do{if(e=t.content.type,t.deleted||e.constructor!==yn&&e.constructor!==gn||null===e._start)while(null!==t){if(null!==t.right){t=t.right;break}t=t.parent===this._root?null:t.parent._item}else t=e._start}while(null!==t&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,null===t?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}class gn extends Me{constructor(){super(),this._prelimContent=[]}get firstChild(){const t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new gn}clone(){const t=new gn;return t.insert(0,this.toArray().map((t=>t instanceof Me?t.clone():t))),t}get length(){return null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(t){return new mn(this,t)}querySelector(t){t=t.toUpperCase();const e=new mn(this,(e=>e.nodeName&&e.nodeName.toUpperCase()===t)),n=e.next();return n.done?null:n.value}querySelectorAll(t){return t=t.toUpperCase(),i.Dp(new mn(this,(e=>e.nodeName&&e.nodeName.toUpperCase()===t)))}_callObserver(t,e){Ee(this,t,new _n(this,e,t))}toString(){return Oe(this,(t=>t.toString())).join("")}toJSON(){return this.toString()}toDOM(t=document,e={},n){const r=t.createDocumentFragment();return void 0!==n&&n._createAssociation(r,this),ke(this,(i=>{r.insertBefore(i.toDOM(t,e,n),null)})),r}insert(t,e){null!==this.doc?Kt(this.doc,(n=>{Ie(n,this,t,e)})):this._prelimContent.splice(t,0,...e)}insertAfter(t,e){if(null!==this.doc)Kt(this.doc,(n=>{const r=t&&t instanceof Me?t._item:t;Le(n,this,r,e)}));else{const n=this._prelimContent,r=null===t?0:n.findIndex((e=>e===t))+1;if(0===r&&null!==t)throw h.Ue("Reference item not found");n.splice(r,0,...e)}}delete(t,e=1){null!==this.doc?Kt(this.doc,(n=>{Ue(n,this,t,e)})):this._prelimContent.splice(t,e)}toArray(){return Ce(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return Pe(this,t)}slice(t=0,e=this.length){return Te(this,t,e)}forEach(t){ke(this,t)}_write(t){t.writeTypeRef(Zn)}}const vn=t=>new gn;class yn extends gn{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,e){super._integrate(t,e),this._prelimAttrs.forEach(((t,e)=>{this.setAttribute(e,t)})),this._prelimAttrs=null}_copy(){return new yn(this.nodeName)}clone(){const t=new yn(this.nodeName),e=this.getAttributes();return x.Ed(e,((e,n)=>{"string"===typeof e&&t.setAttribute(n,e)})),t.insert(0,this.toArray().map((t=>t instanceof Me?t.clone():t))),t}toString(){const t=this.getAttributes(),e=[],n=[];for(const s in t)n.push(s);n.sort();const r=n.length;for(let s=0;s<r;s++){const r=n[s];e.push(r+'="'+t[r]+'"')}const i=this.nodeName.toLocaleLowerCase(),o=e.length>0?" "+e.join(" "):"";return`<${i}${o}>${super.toString()}</${i}>`}removeAttribute(t){null!==this.doc?Kt(this.doc,(e=>{Fe(e,this,t)})):this._prelimAttrs.delete(t)}setAttribute(t,e){null!==this.doc?Kt(this.doc,(n=>{Be(n,this,t,e)})):this._prelimAttrs.set(t,e)}getAttribute(t){return Ve(this,t)}hasAttribute(t){return je(this,t)}getAttributes(){return ze(this)}toDOM(t=document,e={},n){const r=t.createElement(this.nodeName),i=this.getAttributes();for(const o in i){const t=i[o];"string"===typeof t&&r.setAttribute(o,t)}return ke(this,(i=>{r.appendChild(i.toDOM(t,e,n))})),void 0!==n&&n._createAssociation(r,this),r}_write(t){t.writeTypeRef(Xn),t.writeKey(this.nodeName)}}const bn=t=>new yn(t.readKey());class _n extends pe{constructor(t,e,n){super(t,n),this.childListChanged=!1,this.attributesChanged=new Set,e.forEach((t=>{null===t?this.childListChanged=!0:this.attributesChanged.add(t)}))}}class wn extends Ye{constructor(t){super(),this.hookName=t}_copy(){return new wn(this.hookName)}clone(){const t=new wn(this.hookName);return this.forEach(((e,n)=>{t.set(n,e)})),t}toDOM(t=document,e={},n){const r=e[this.hookName];let i;return i=void 0!==r?r.createDom(this):document.createElement(this.hookName),i.setAttribute("data-yjs-hook",this.hookName),void 0!==n&&n._createAssociation(i,this),i}_write(t){t.writeTypeRef(Kn),t.writeKey(this.hookName)}}const xn=t=>new wn(t.readKey());class Sn extends fn{get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new Sn}clone(){const t=new Sn;return t.applyDelta(this.toDelta()),t}toDOM(t=document,e,n){const r=t.createTextNode(this.toString());return void 0!==n&&n._createAssociation(r,this),r}toString(){return this.toDelta().map((t=>{const e=[];for(const r in t.attributes){const n=[];for(const e in t.attributes[r])n.push({key:e,value:t.attributes[r][e]});n.sort(((t,e)=>t.key<e.key?-1:1)),e.push({nodeName:r,attrs:n})}e.sort(((t,e)=>t.nodeName<e.nodeName?-1:1));let n="";for(let r=0;r<e.length;r++){const t=e[r];n+=`<${t.nodeName}`;for(let e=0;e<t.attrs.length;e++){const r=t.attrs[e];n+=` ${r.key}="${r.value}"`}n+=">"}n+=t.insert;for(let r=e.length-1;r>=0;r--)n+=`</${e[r].nodeName}>`;return n})).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(Jn)}}const En=t=>new Sn;class Mn{constructor(t,e){this.id=t,this.length=e}get deleted(){throw h.Nw()}mergeWith(t){return!1}write(t,e,n){throw h.Nw()}integrate(t,e){throw h.Nw()}}const Tn=0;class Cn extends Mn{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor===t.constructor&&(this.length+=t.length,!0)}integrate(t,e){e>0&&(this.id.clock+=e,this.length-=e),It(t.doc.store,this)}write(t,e){t.writeInfo(Tn),t.writeLen(this.length-e)}getMissing(t,e){return null}}class An{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new An(this.content)}splice(t){throw h.Nw()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeBuf(this.content)}getRef(){return 3}}const kn=t=>new An(t.readBuf());class On{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new On(this.len)}splice(t){const e=new On(this.len-t);return this.len=t,e}mergeWith(t){return this.len+=t.len,!0}integrate(t,e){O(t.deleteSet,e.id.client,e.id.clock,this.len),e.markDeleted()}delete(t){}gc(t){}write(t,e){t.writeLen(this.len-e)}getRef(){return 1}}const Rn=t=>new On(t.readLen()),Pn=(t,e)=>new U({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class Ln{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;const e={};this.opts=e,t.gc||(e.gc=!1),t.autoLoad&&(e.autoLoad=!0),null!==t.meta&&(e.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Ln(Pn(this.doc.guid,this.opts))}splice(t){throw h.Nw()}mergeWith(t){return!1}integrate(t,e){this.doc._item=e,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,e){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}}const Dn=t=>new Ln(Pn(t.readString(),t.readAny()));class In{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new In(this.embed)}splice(t){throw h.Nw()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeJSON(this.embed)}getRef(){return 5}}const Nn=t=>new In(t.readJSON());class Un{constructor(t,e){this.key=t,this.value=e}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new Un(this.key,this.value)}splice(t){throw h.Nw()}mergeWith(t){return!1}integrate(t,e){e.parent._searchMarker=null}delete(t){}gc(t){}write(t,e){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}}const Fn=t=>new Un(t.readKey(),t.readJSON());class Bn{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Bn(this.arr)}splice(t){const e=new Bn(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){const n=this.arr.length;t.writeLen(n-e);for(let r=e;r<n;r++){const e=this.arr[r];t.writeString(void 0===e?"undefined":JSON.stringify(e))}}getRef(){return 2}}const Vn=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++){const e=t.readString();"undefined"===e?n.push(void 0):n.push(JSON.parse(e))}return new Bn(n)};class zn{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new zn(this.arr)}splice(t){const e=new zn(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){const n=this.arr.length;t.writeLen(n-e);for(let r=e;r<n;r++){const e=this.arr[r];t.writeAny(e)}}getRef(){return 8}}const jn=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++)n.push(t.readAny());return new zn(n)};class Hn{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Hn(this.str)}splice(t){const e=new Hn(this.str.slice(t));this.str=this.str.slice(0,t);const n=this.str.charCodeAt(t-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,t-1)+"�",e.str="�"+e.str.slice(1)),e}mergeWith(t){return this.str+=t.str,!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeString(0===e?this.str:this.str.slice(e))}getRef(){return 4}}const Wn=t=>new Hn(t.readString()),Gn=[$e,Xe,pn,bn,vn,xn,En],$n=0,qn=1,Yn=2,Xn=3,Zn=4,Kn=5,Jn=6;class Qn{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Qn(this.type._copy())}splice(t){throw h.Nw()}mergeWith(t){return!1}integrate(t,e){this.type._integrate(t.doc,e)}delete(t){let e=this.type._start;while(null!==e)e.deleted?t._mergeStructs.push(e):e.delete(t),e=e.right;this.type._map.forEach((e=>{e.deleted?t._mergeStructs.push(e):e.delete(t)})),t.changed.delete(this.type)}gc(t){let e=this.type._start;while(null!==e)e.gc(t,!0),e=e.right;this.type._start=null,this.type._map.forEach((e=>{while(null!==e)e.gc(t,!0),e=e.left})),this.type._map=new Map}write(t,e){this.type._write(t)}getRef(){return 7}}const tr=t=>new Qn(Gn[t.readTypeRef()](t)),er=(t,e)=>{let n,r=e,i=0;do{i>0&&(r=gt(r.client,r.clock+i)),n=Ft(t,r),i=r.clock-n.id.clock,r=n.redone}while(null!==r&&n instanceof sr);return{item:n,diff:i}},nr=(t,e)=>{while(null!==t&&t.keep!==e)t.keep=e,t=t.parent._item},rr=(t,e,n)=>{const{client:r,clock:i}=e.id,o=new sr(gt(r,i+n),e,gt(r,i+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&o.markDeleted(),e.keep&&(o.keep=!0),null!==e.redone&&(o.redone=gt(e.redone.client,e.redone.clock+n)),e.right=o,null!==o.right&&(o.right.left=o),t._mergeStructs.push(o),null!==o.parentSub&&null===o.right&&o.parent._map.set(o.parentSub,o),e.length=n,o},ir=(t,e)=>i.G(t,(t=>C(t.deletions,e))),or=(t,e,n,r,i,o)=>{const s=t.doc,a=s.store,l=s.clientID,c=e.redone;if(null!==c)return Vt(t,c);let u,d=e.parent._item,h=null;if(null!==d&&!0===d.deleted){if(null===d.redone&&(!n.has(d)||null===or(t,d,n,r,i,o)))return null;while(null!==d.redone)d=Vt(t,d.redone)}const f=null===d?e.parent:d.content.type;if(null===e.parentSub){h=e.left,u=e;while(null!==h){let e=h;while(null!==e&&e.parent._item!==d)e=null===e.redone?null:Vt(t,e.redone);if(null!==e&&e.parent._item===d){h=e;break}h=h.left}while(null!==u){let e=u;while(null!==e&&e.parent._item!==d)e=null===e.redone?null:Vt(t,e.redone);if(null!==e&&e.parent._item===d){u=e;break}u=u.right}}else if(u=null,e.right&&!i){h=e;while(null!==h&&null!==h.right&&(h.right.redone||C(r,h.right.id)||ir(o.undoStack,h.right.id)||ir(o.redoStack,h.right.id))){h=h.right;while(h.redone)h=Vt(t,h.redone)}if(h&&null!==h.right)return null}else h=f._map.get(e.parentSub)||null;const p=Dt(a,l),m=gt(l,p),g=new sr(m,h,h&&h.lastId,u,u&&u.id,f,e.parentSub,e.content.copy());return e.redone=m,nr(g,!0),g.integrate(t,0),g};class sr extends Mn{constructor(t,e,n,r,i,o,s,a){super(t,a.getLength()),this.origin=n,this.left=e,this.right=r,this.rightOrigin=i,this.parent=o,this.parentSub=s,this.redone=null,this.content=a,this.info=this.content.isCountable()?f.Qn:0}set marker(t){(this.info&f.Ko)>0!==t&&(this.info^=f.Ko)}get marker(){return(this.info&f.Ko)>0}get keep(){return(this.info&f.Vw)>0}set keep(t){this.keep!==t&&(this.info^=f.Vw)}get countable(){return(this.info&f.Qn)>0}get deleted(){return(this.info&f.CY)>0}set deleted(t){this.deleted!==t&&(this.info^=f.CY)}markDeleted(){this.info|=f.CY}getMissing(t,e){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Dt(e,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Dt(e,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===pt&&this.id.client!==this.parent.client&&this.parent.clock>=Dt(e,this.parent.client))return this.parent.client;if(this.origin&&(this.left=zt(t,e,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Vt(t,this.rightOrigin),this.rightOrigin=this.right.id),(this.left&&this.left.constructor===Cn||this.right&&this.right.constructor===Cn)&&(this.parent=null),this.parent){if(this.parent.constructor===pt){const t=Ft(e,this.parent);t.constructor===Cn?this.parent=null:this.parent=t.content.type}}else this.left&&this.left.constructor===sr&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===sr&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(t,e){if(e>0&&(this.id.clock+=e,this.left=zt(t,t.doc.store,gt(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(e),this.length-=e),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let e,n=this.left;if(null!==n)e=n.right;else if(null!==this.parentSub){e=this.parent._map.get(this.parentSub)||null;while(null!==e&&null!==e.left)e=e.left}else e=this.parent._start;const r=new Set,i=new Set;while(null!==e&&e!==this.right){if(i.add(e),r.add(e),mt(this.origin,e.origin)){if(e.id.client<this.id.client)n=e,r.clear();else if(mt(this.rightOrigin,e.rightOrigin))break}else{if(null===e.origin||!i.has(Ft(t.doc.store,e.origin)))break;r.has(Ft(t.doc.store,e.origin))||(n=e,r.clear())}e=e.right}this.left=n}if(null!==this.left){const t=this.left.right;this.right=t,this.left.right=this}else{let t;if(null!==this.parentSub){t=this.parent._map.get(this.parentSub)||null;while(null!==t&&null!==t.left)t=t.left}else t=this.parent._start,this.parent._start=this;this.right=t}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(t)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),It(t.doc.store,this),this.content.integrate(t,this),$t(t,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(t)}else new Cn(this.id,this.length).integrate(t,0)}get next(){let t=this.right;while(null!==t&&t.deleted)t=t.right;return t}get prev(){let t=this.left;while(null!==t&&t.deleted)t=t.left;return t}get lastId(){return 1===this.length?this.id:gt(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&mt(t.origin,this.lastId)&&this.right===t&&mt(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&null===this.redone&&null===t.redone&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){const e=this.parent._searchMarker;return e&&e.forEach((e=>{e.p===t&&(e.p=this,!this.deleted&&this.countable&&(e.index-=this.length))})),t.keep&&(this.keep=!0),this.right=t.right,null!==this.right&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){const e=this.parent;this.countable&&null===this.parentSub&&(e._length-=this.length),this.markDeleted(),O(t.deleteSet,this.id.client,this.id.clock,this.length),$t(t,e,this.parentSub),this.content.delete(t)}}gc(t,e){if(!this.deleted)throw h.zR();this.content.gc(t),e?jt(t,this,new Cn(this.id,this.length)):this.content=new On(this.length)}write(t,e){const n=e>0?gt(this.id.client,this.id.clock+e-1):this.origin,r=this.rightOrigin,i=this.parentSub,o=this.content.getRef()&f.kr|(null===n?0:f.x1)|(null===r?0:f.rc)|(null===i?0:f.cq);if(t.writeInfo(o),null!==n&&t.writeLeftID(n),null!==r&&t.writeRightID(r),null===n&&null===r){const e=this.parent;if(void 0!==e._item){const n=e._item;if(null===n){const n=vt(e);t.writeParentInfo(!0),t.writeString(n)}else t.writeParentInfo(!1),t.writeLeftID(n.id)}else e.constructor===String?(t.writeParentInfo(!0),t.writeString(e)):e.constructor===pt?(t.writeParentInfo(!1),t.writeLeftID(e)):h.zR();null!==i&&t.writeString(i)}this.content.write(t,e)}}const ar=(t,e)=>lr[e&f.kr](t),lr=[()=>{h.zR()},Rn,Vn,kn,Wn,Nn,Fn,tr,jn,Dn,()=>{h.zR()}],cr=10;class ur extends Mn{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor===t.constructor&&(this.length+=t.length,!0)}integrate(t,e){h.zR()}write(t,e){t.writeInfo(cr),a.uE(t.restEncoder,this.length-e)}getMissing(t,e){return null}}const dr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{},hr="__ $YJS$ __";!0===dr[hr]&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),dr[hr]=!0}}]);
//# sourceMappingURL=chunk-vendors.fcd067bb.js.map