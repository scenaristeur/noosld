(self["webpackChunknoosld"]=self["webpackChunknoosld"]||[]).push([[998],{9662:function(e,t,n){var r=n(614),i=n(6330),o=TypeError;e.exports=function(e){if(r(e))return e;throw o(i(e)+" is not a function")}},6077:function(e,t,n){var r=n(614),i=String,o=TypeError;e.exports=function(e){if("object"==typeof e||r(e))return e;throw o("Can't set "+i(e)+" as a prototype")}},1223:function(e,t,n){var r=n(5112),i=n(30),o=n(3070).f,s=r("unscopables"),a=Array.prototype;void 0==a[s]&&o(a,s,{configurable:!0,value:i(null)}),e.exports=function(e){a[s][e]=!0}},5787:function(e,t,n){var r=n(7976),i=TypeError;e.exports=function(e,t){if(r(t,e))return e;throw i("Incorrect invocation")}},9670:function(e,t,n){var r=n(111),i=String,o=TypeError;e.exports=function(e){if(r(e))return e;throw o(i(e)+" is not an object")}},3013:function(e){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},260:function(e,t,n){"use strict";var r,i,o,s=n(3013),a=n(9781),l=n(7854),c=n(614),u=n(111),d=n(2597),h=n(648),f=n(6330),p=n(8880),m=n(8052),g=n(7045),v=n(7976),y=n(9518),b=n(7674),_=n(5112),w=n(9711),x=n(9909),S=x.enforce,E=x.get,M=l.Int8Array,T=M&&M.prototype,C=l.Uint8ClampedArray,A=C&&C.prototype,k=M&&y(M),O=T&&y(T),R=Object.prototype,P=l.TypeError,L=_("toStringTag"),D=w("TYPED_ARRAY_TAG"),I="TypedArrayConstructor",N=s&&!!b&&"Opera"!==h(l.opera),U=!1,F={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},B={BigInt64Array:8,BigUint64Array:8},V=function(e){if(!u(e))return!1;var t=h(e);return"DataView"===t||d(F,t)||d(B,t)},z=function(e){var t=y(e);if(u(t)){var n=E(t);return n&&d(n,I)?n[I]:z(t)}},j=function(e){if(!u(e))return!1;var t=h(e);return d(F,t)||d(B,t)},H=function(e){if(j(e))return e;throw P("Target is not a typed array")},W=function(e){if(c(e)&&(!b||v(k,e)))return e;throw P(f(e)+" is not a typed array constructor")},G=function(e,t,n,r){if(a){if(n)for(var i in F){var o=l[i];if(o&&d(o.prototype,e))try{delete o.prototype[e]}catch(s){try{o.prototype[e]=t}catch(c){}}}O[e]&&!n||m(O,e,n?t:N&&T[e]||t,r)}},$=function(e,t,n){var r,i;if(a){if(b){if(n)for(r in F)if(i=l[r],i&&d(i,e))try{delete i[e]}catch(o){}if(k[e]&&!n)return;try{return m(k,e,n?t:N&&k[e]||t)}catch(o){}}for(r in F)i=l[r],!i||i[e]&&!n||m(i,e,t)}};for(r in F)i=l[r],o=i&&i.prototype,o?S(o)[I]=i:N=!1;for(r in B)i=l[r],o=i&&i.prototype,o&&(S(o)[I]=i);if((!N||!c(k)||k===Function.prototype)&&(k=function(){throw P("Incorrect invocation")},N))for(r in F)l[r]&&b(l[r],k);if((!N||!O||O===R)&&(O=k.prototype,N))for(r in F)l[r]&&b(l[r].prototype,O);if(N&&y(A)!==O&&b(A,O),a&&!d(O,L))for(r in U=!0,g(O,L,{configurable:!0,get:function(){return u(this)?this[D]:void 0}}),F)l[r]&&p(l[r],D,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:N,TYPED_ARRAY_TAG:U&&D,aTypedArray:H,aTypedArrayConstructor:W,exportTypedArrayMethod:G,exportTypedArrayStaticMethod:$,getTypedArrayConstructor:z,isView:V,isTypedArray:j,TypedArray:k,TypedArrayPrototype:O}},7745:function(e,t,n){var r=n(6244);e.exports=function(e,t){var n=0,i=r(t),o=new e(i);while(i>n)o[n]=t[n++];return o}},1318:function(e,t,n){var r=n(5656),i=n(1400),o=n(6244),s=function(e){return function(t,n,s){var a,l=r(t),c=o(l),u=i(s,c);if(e&&n!=n){while(c>u)if(a=l[u++],a!=a)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},9671:function(e,t,n){var r=n(9974),i=n(8361),o=n(7908),s=n(6244),a=function(e){var t=1==e;return function(n,a,l){var c,u,d=o(n),h=i(d),f=r(a,l),p=s(h);while(p-- >0)if(c=h[p],u=f(c,p,d),u)switch(e){case 0:return c;case 1:return p}return t?-1:void 0}};e.exports={findLast:a(0),findLastIndex:a(1)}},3658:function(e,t,n){"use strict";var r=n(9781),i=n(3157),o=TypeError,s=Object.getOwnPropertyDescriptor,a=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=a?function(e,t){if(i(e)&&!s(e,"length").writable)throw o("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},1843:function(e,t,n){var r=n(6244);e.exports=function(e,t){for(var n=r(e),i=new t(n),o=0;o<n;o++)i[o]=e[n-o-1];return i}},1572:function(e,t,n){var r=n(6244),i=n(9303),o=RangeError;e.exports=function(e,t,n,s){var a=r(e),l=i(n),c=l<0?a+l:l;if(c>=a||c<0)throw o("Incorrect index");for(var u=new t(a),d=0;d<a;d++)u[d]=d===c?s:e[d];return u}},4326:function(e,t,n){var r=n(1702),i=r({}.toString),o=r("".slice);e.exports=function(e){return o(i(e),8,-1)}},648:function(e,t,n){var r=n(1694),i=n(614),o=n(4326),s=n(5112),a=s("toStringTag"),l=Object,c="Arguments"==o(function(){return arguments}()),u=function(e,t){try{return e[t]}catch(n){}};e.exports=r?o:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=u(t=l(e),a))?n:c?o(t):"Object"==(r=o(t))&&i(t.callee)?"Arguments":r}},9920:function(e,t,n){var r=n(2597),i=n(3887),o=n(1236),s=n(3070);e.exports=function(e,t,n){for(var a=i(t),l=s.f,c=o.f,u=0;u<a.length;u++){var d=a[u];r(e,d)||n&&r(n,d)||l(e,d,c(t,d))}}},8544:function(e,t,n){var r=n(7293);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},8880:function(e,t,n){var r=n(9781),i=n(3070),o=n(9114);e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},9114:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},7045:function(e,t,n){var r=n(6339),i=n(3070);e.exports=function(e,t,n){return n.get&&r(n.get,t,{getter:!0}),n.set&&r(n.set,t,{setter:!0}),i.f(e,t,n)}},8052:function(e,t,n){var r=n(614),i=n(3070),o=n(6339),s=n(3072);e.exports=function(e,t,n,a){a||(a={});var l=a.enumerable,c=void 0!==a.name?a.name:t;if(r(n)&&o(n,c,a),a.global)l?e[t]=n:s(t,n);else{try{a.unsafe?e[t]&&(l=!0):delete e[t]}catch(u){}l?e[t]=n:i.f(e,t,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e}},3072:function(e,t,n){var r=n(7854),i=Object.defineProperty;e.exports=function(e,t){try{i(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},9781:function(e,t,n){var r=n(7293);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:function(e){var t="object"==typeof document&&document.all,n="undefined"==typeof t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:n}},317:function(e,t,n){var r=n(7854),i=n(111),o=r.document,s=i(o)&&i(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},7207:function(e){var t=TypeError,n=9007199254740991;e.exports=function(e){if(e>n)throw t("Maximum allowed index exceeded");return e}},3678:function(e){e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},8113:function(e){e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7392:function(e,t,n){var r,i,o=n(7854),s=n(8113),a=o.process,l=o.Deno,c=a&&a.versions||l&&l.version,u=c&&c.v8;u&&(r=u.split("."),i=r[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&s&&(r=s.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/),r&&(i=+r[1]))),e.exports=i},748:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},1060:function(e,t,n){var r=n(1702),i=Error,o=r("".replace),s=function(e){return String(i(e).stack)}("zxcasd"),a=/\n\s*at [^:]*:[^\n]*/,l=a.test(s);e.exports=function(e,t){if(l&&"string"==typeof e&&!i.prepareStackTrace)while(t--)e=o(e,a,"");return e}},5392:function(e,t,n){var r=n(8880),i=n(1060),o=n(2914),s=Error.captureStackTrace;e.exports=function(e,t,n,a){o&&(s?s(e,t):r(e,"stack",i(n,a)))}},2914:function(e,t,n){var r=n(7293),i=n(9114);e.exports=!r((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",i(1,7)),7!==e.stack)}))},2109:function(e,t,n){var r=n(7854),i=n(1236).f,o=n(8880),s=n(8052),a=n(3072),l=n(9920),c=n(4705);e.exports=function(e,t){var n,u,d,h,f,p,m=e.target,g=e.global,v=e.stat;if(u=g?r:v?r[m]||a(m,{}):(r[m]||{}).prototype,u)for(d in t){if(f=t[d],e.dontCallGetSet?(p=i(u,d),h=p&&p.value):h=u[d],n=c(g?d:m+(v?".":"#")+d,e.forced),!n&&void 0!==h){if(typeof f==typeof h)continue;l(f,h)}(e.sham||h&&h.sham)&&o(f,"sham",!0),s(u,d,f,e)}}},7293:function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},2104:function(e,t,n){var r=n(4374),i=Function.prototype,o=i.apply,s=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?s.bind(o):function(){return s.apply(o,arguments)})},9974:function(e,t,n){var r=n(1470),i=n(9662),o=n(4374),s=r(r.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?s(e,t):function(){return e.apply(t,arguments)}}},4374:function(e,t,n){var r=n(7293);e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},6916:function(e,t,n){var r=n(4374),i=Function.prototype.call;e.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},6530:function(e,t,n){var r=n(9781),i=n(2597),o=Function.prototype,s=r&&Object.getOwnPropertyDescriptor,a=i(o,"name"),l=a&&"something"===function(){}.name,c=a&&(!r||r&&s(o,"name").configurable);e.exports={EXISTS:a,PROPER:l,CONFIGURABLE:c}},5668:function(e,t,n){var r=n(1702),i=n(9662);e.exports=function(e,t,n){try{return r(i(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(o){}}},1470:function(e,t,n){var r=n(4326),i=n(1702);e.exports=function(e){if("Function"===r(e))return i(e)}},1702:function(e,t,n){var r=n(4374),i=Function.prototype,o=i.call,s=r&&i.bind.bind(o,o);e.exports=r?s:function(e){return function(){return o.apply(e,arguments)}}},5005:function(e,t,n){var r=n(7854),i=n(614),o=function(e){return i(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?o(r[e]):r[e]&&r[e][t]}},8173:function(e,t,n){var r=n(9662),i=n(8554);e.exports=function(e,t){var n=e[t];return i(n)?void 0:r(n)}},7854:function(e,t,n){var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||this||Function("return this")()},2597:function(e,t,n){var r=n(1702),i=n(7908),o=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},3501:function(e){e.exports={}},490:function(e,t,n){var r=n(5005);e.exports=r("document","documentElement")},4664:function(e,t,n){var r=n(9781),i=n(7293),o=n(317);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},8361:function(e,t,n){var r=n(1702),i=n(7293),o=n(4326),s=Object,a=r("".split);e.exports=i((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?a(e,""):s(e)}:s},9587:function(e,t,n){var r=n(614),i=n(111),o=n(7674);e.exports=function(e,t,n){var s,a;return o&&r(s=t.constructor)&&s!==n&&i(a=s.prototype)&&a!==n.prototype&&o(e,a),e}},2788:function(e,t,n){var r=n(1702),i=n(614),o=n(5465),s=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return s(e)}),e.exports=o.inspectSource},8340:function(e,t,n){var r=n(111),i=n(8880);e.exports=function(e,t){r(t)&&"cause"in t&&i(e,"cause",t.cause)}},9909:function(e,t,n){var r,i,o,s=n(4811),a=n(7854),l=n(111),c=n(8880),u=n(2597),d=n(5465),h=n(6200),f=n(3501),p="Object already initialized",m=a.TypeError,g=a.WeakMap,v=function(e){return o(e)?i(e):r(e,{})},y=function(e){return function(t){var n;if(!l(t)||(n=i(t)).type!==e)throw m("Incompatible receiver, "+e+" required");return n}};if(s||d.state){var b=d.state||(d.state=new g);b.get=b.get,b.has=b.has,b.set=b.set,r=function(e,t){if(b.has(e))throw m(p);return t.facade=e,b.set(e,t),t},i=function(e){return b.get(e)||{}},o=function(e){return b.has(e)}}else{var _=h("state");f[_]=!0,r=function(e,t){if(u(e,_))throw m(p);return t.facade=e,c(e,_,t),t},i=function(e){return u(e,_)?e[_]:{}},o=function(e){return u(e,_)}}e.exports={set:r,get:i,has:o,enforce:v,getterFor:y}},3157:function(e,t,n){var r=n(4326);e.exports=Array.isArray||function(e){return"Array"==r(e)}},4067:function(e,t,n){var r=n(648);e.exports=function(e){var t=r(e);return"BigInt64Array"==t||"BigUint64Array"==t}},614:function(e,t,n){var r=n(4154),i=r.all;e.exports=r.IS_HTMLDDA?function(e){return"function"==typeof e||e===i}:function(e){return"function"==typeof e}},4705:function(e,t,n){var r=n(7293),i=n(614),o=/#|\.prototype\./,s=function(e,t){var n=l[a(e)];return n==u||n!=c&&(i(t)?r(t):!!t)},a=s.normalize=function(e){return String(e).replace(o,".").toLowerCase()},l=s.data={},c=s.NATIVE="N",u=s.POLYFILL="P";e.exports=s},8554:function(e){e.exports=function(e){return null===e||void 0===e}},111:function(e,t,n){var r=n(614),i=n(4154),o=i.all;e.exports=i.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:r(e)||e===o}:function(e){return"object"==typeof e?null!==e:r(e)}},1913:function(e){e.exports=!1},2190:function(e,t,n){var r=n(5005),i=n(614),o=n(7976),s=n(3307),a=Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return i(t)&&o(t.prototype,a(e))}},6244:function(e,t,n){var r=n(7466);e.exports=function(e){return r(e.length)}},6339:function(e,t,n){var r=n(1702),i=n(7293),o=n(614),s=n(2597),a=n(9781),l=n(6530).CONFIGURABLE,c=n(2788),u=n(9909),d=u.enforce,h=u.get,f=String,p=Object.defineProperty,m=r("".slice),g=r("".replace),v=r([].join),y=a&&!i((function(){return 8!==p((function(){}),"length",{value:8}).length})),b=String(String).split("String"),_=e.exports=function(e,t,n){"Symbol("===m(f(t),0,7)&&(t="["+g(f(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!s(e,"name")||l&&e.name!==t)&&(a?p(e,"name",{value:t,configurable:!0}):e.name=t),y&&n&&s(n,"arity")&&e.length!==n.arity&&p(e,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?a&&p(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(i){}var r=d(e);return s(r,"source")||(r.source=v(b,"string"==typeof t?t:"")),e};Function.prototype.toString=_((function(){return o(this)&&h(this).source||c(this)}),"toString")},4758:function(e){var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var r=+e;return(r>0?n:t)(r)}},6277:function(e,t,n){var r=n(1340);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:r(e)}},30:function(e,t,n){var r,i=n(9670),o=n(6048),s=n(748),a=n(3501),l=n(490),c=n(317),u=n(6200),d=">",h="<",f="prototype",p="script",m=u("IE_PROTO"),g=function(){},v=function(e){return h+p+d+e+h+"/"+p+d},y=function(e){e.write(v("")),e.close();var t=e.parentWindow.Object;return e=null,t},b=function(){var e,t=c("iframe"),n="java"+p+":";return t.style.display="none",l.appendChild(t),t.src=String(n),e=t.contentWindow.document,e.open(),e.write(v("document.F=Object")),e.close(),e.F},_=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}_="undefined"!=typeof document?document.domain&&r?y(r):b():y(r);var e=s.length;while(e--)delete _[f][s[e]];return _()};a[m]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(g[f]=i(e),n=new g,g[f]=null,n[m]=e):n=_(),void 0===t?n:o.f(n,t)}},6048:function(e,t,n){var r=n(9781),i=n(3353),o=n(3070),s=n(9670),a=n(5656),l=n(1956);t.f=r&&!i?Object.defineProperties:function(e,t){s(e);var n,r=a(t),i=l(t),c=i.length,u=0;while(c>u)o.f(e,n=i[u++],r[n]);return e}},3070:function(e,t,n){var r=n(9781),i=n(4664),o=n(3353),s=n(9670),a=n(4948),l=TypeError,c=Object.defineProperty,u=Object.getOwnPropertyDescriptor,d="enumerable",h="configurable",f="writable";t.f=r?o?function(e,t,n){if(s(e),t=a(t),s(n),"function"===typeof e&&"prototype"===t&&"value"in n&&f in n&&!n[f]){var r=u(e,t);r&&r[f]&&(e[t]=n.value,n={configurable:h in n?n[h]:r[h],enumerable:d in n?n[d]:r[d],writable:!1})}return c(e,t,n)}:c:function(e,t,n){if(s(e),t=a(t),s(n),i)try{return c(e,t,n)}catch(r){}if("get"in n||"set"in n)throw l("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},1236:function(e,t,n){var r=n(9781),i=n(6916),o=n(5296),s=n(9114),a=n(5656),l=n(4948),c=n(2597),u=n(4664),d=Object.getOwnPropertyDescriptor;t.f=r?d:function(e,t){if(e=a(e),t=l(t),u)try{return d(e,t)}catch(n){}if(c(e,t))return s(!i(o.f,e,t),e[t])}},8006:function(e,t,n){var r=n(6324),i=n(748),o=i.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},5181:function(e,t){t.f=Object.getOwnPropertySymbols},9518:function(e,t,n){var r=n(2597),i=n(614),o=n(7908),s=n(6200),a=n(8544),l=s("IE_PROTO"),c=Object,u=c.prototype;e.exports=a?c.getPrototypeOf:function(e){var t=o(e);if(r(t,l))return t[l];var n=t.constructor;return i(n)&&t instanceof n?n.prototype:t instanceof c?u:null}},7976:function(e,t,n){var r=n(1702);e.exports=r({}.isPrototypeOf)},6324:function(e,t,n){var r=n(1702),i=n(2597),o=n(5656),s=n(1318).indexOf,a=n(3501),l=r([].push);e.exports=function(e,t){var n,r=o(e),c=0,u=[];for(n in r)!i(a,n)&&i(r,n)&&l(u,n);while(t.length>c)i(r,n=t[c++])&&(~s(u,n)||l(u,n));return u}},1956:function(e,t,n){var r=n(6324),i=n(748);e.exports=Object.keys||function(e){return r(e,i)}},5296:function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);t.f=i?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},7674:function(e,t,n){var r=n(5668),i=n(9670),o=n(6077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{e=r(Object.prototype,"__proto__","set"),e(n,[]),t=n instanceof Array}catch(s){}return function(n,r){return i(n),o(r),t?e(n,r):n.__proto__=r,n}}():void 0)},2140:function(e,t,n){var r=n(6916),i=n(614),o=n(111),s=TypeError;e.exports=function(e,t){var n,a;if("string"===t&&i(n=e.toString)&&!o(a=r(n,e)))return a;if(i(n=e.valueOf)&&!o(a=r(n,e)))return a;if("string"!==t&&i(n=e.toString)&&!o(a=r(n,e)))return a;throw s("Can't convert object to primitive value")}},3887:function(e,t,n){var r=n(5005),i=n(1702),o=n(8006),s=n(5181),a=n(9670),l=i([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(a(e)),n=s.f;return n?l(t,n(e)):t}},2626:function(e,t,n){var r=n(3070).f;e.exports=function(e,t,n){n in e||r(e,n,{configurable:!0,get:function(){return t[n]},set:function(e){t[n]=e}})}},4488:function(e,t,n){var r=n(8554),i=TypeError;e.exports=function(e){if(r(e))throw i("Can't call method on "+e);return e}},6200:function(e,t,n){var r=n(2309),i=n(9711),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},5465:function(e,t,n){var r=n(7854),i=n(3072),o="__core-js_shared__",s=r[o]||i(o,{});e.exports=s},2309:function(e,t,n){var r=n(1913),i=n(5465);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.31.0",mode:r?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.31.0/LICENSE",source:"https://github.com/zloirock/core-js"})},6293:function(e,t,n){var r=n(7392),i=n(7293),o=n(7854),s=o.String;e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!s(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},1400:function(e,t,n){var r=n(9303),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},4599:function(e,t,n){var r=n(7593),i=TypeError;e.exports=function(e){var t=r(e,"number");if("number"==typeof t)throw i("Can't convert number to bigint");return BigInt(t)}},5656:function(e,t,n){var r=n(8361),i=n(4488);e.exports=function(e){return r(i(e))}},9303:function(e,t,n){var r=n(4758);e.exports=function(e){var t=+e;return t!==t||0===t?0:r(t)}},7466:function(e,t,n){var r=n(9303),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},7908:function(e,t,n){var r=n(4488),i=Object;e.exports=function(e){return i(r(e))}},2452:function(e,t,n){var r=n(3002),i=RangeError;e.exports=function(e,t){var n=r(e);if(n%t)throw i("Wrong offset");return n}},3002:function(e,t,n){var r=n(9303),i=RangeError;e.exports=function(e){var t=r(e);if(t<0)throw i("The argument can't be less than 0");return t}},7593:function(e,t,n){var r=n(6916),i=n(111),o=n(2190),s=n(8173),a=n(2140),l=n(5112),c=TypeError,u=l("toPrimitive");e.exports=function(e,t){if(!i(e)||o(e))return e;var n,l=s(e,u);if(l){if(void 0===t&&(t="default"),n=r(l,e,t),!i(n)||o(n))return n;throw c("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},4948:function(e,t,n){var r=n(7593),i=n(2190);e.exports=function(e){var t=r(e,"string");return i(t)?t:t+""}},1694:function(e,t,n){var r=n(5112),i=r("toStringTag"),o={};o[i]="z",e.exports="[object z]"===String(o)},1340:function(e,t,n){var r=n(648),i=String;e.exports=function(e){if("Symbol"===r(e))throw TypeError("Cannot convert a Symbol value to a string");return i(e)}},6330:function(e){var t=String;e.exports=function(e){try{return t(e)}catch(n){return"Object"}}},9711:function(e,t,n){var r=n(1702),i=0,o=Math.random(),s=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++i+o,36)}},3307:function(e,t,n){var r=n(6293);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(e,t,n){var r=n(9781),i=n(7293);e.exports=r&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},4811:function(e,t,n){var r=n(7854),i=n(614),o=r.WeakMap;e.exports=i(o)&&/native code/.test(String(o))},5112:function(e,t,n){var r=n(7854),i=n(2309),o=n(2597),s=n(9711),a=n(6293),l=n(3307),c=r.Symbol,u=i("wks"),d=l?c["for"]||c:c&&c.withoutSetter||s;e.exports=function(e){return o(u,e)||(u[e]=a&&o(c,e)?c[e]:d("Symbol."+e)),u[e]}},9191:function(e,t,n){"use strict";var r=n(5005),i=n(2597),o=n(8880),s=n(7976),a=n(7674),l=n(9920),c=n(2626),u=n(9587),d=n(6277),h=n(8340),f=n(5392),p=n(9781),m=n(1913);e.exports=function(e,t,n,g){var v="stackTraceLimit",y=g?2:1,b=e.split("."),_=b[b.length-1],w=r.apply(null,b);if(w){var x=w.prototype;if(!m&&i(x,"cause")&&delete x.cause,!n)return w;var S=r("Error"),E=t((function(e,t){var n=d(g?t:e,void 0),r=g?new w(e):new w;return void 0!==n&&o(r,"message",n),f(r,E,r.stack,2),this&&s(x,this)&&u(r,this,E),arguments.length>y&&h(r,arguments[y]),r}));if(E.prototype=x,"Error"!==_?a?a(E,S):l(E,S,{name:!0}):p&&v in w&&(c(E,w,v),c(E,w,"prepareStackTrace")),l(E,w),!m)try{x.name!==_&&o(x,"name",_),x.constructor=E}catch(M){}return E}}},2262:function(e,t,n){"use strict";var r=n(2109),i=n(7908),o=n(6244),s=n(9303),a=n(1223);r({target:"Array",proto:!0},{at:function(e){var t=i(this),n=o(t),r=s(e),a=r>=0?r:n+r;return a<0||a>=n?void 0:t[a]}}),a("at")},7658:function(e,t,n){"use strict";var r=n(2109),i=n(7908),o=n(6244),s=n(3658),a=n(7207),l=n(7293),c=l((function(){return 4294967297!==[].push.call({length:4294967296},1)})),u=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},d=c||!u();r({target:"Array",proto:!0,arity:1,forced:d},{push:function(e){var t=i(this),n=o(t),r=arguments.length;a(n+r);for(var l=0;l<r;l++)t[n]=arguments[l],n++;return s(t,n),n}})},1703:function(e,t,n){var r=n(2109),i=n(7854),o=n(2104),s=n(9191),a="WebAssembly",l=i[a],c=7!==Error("e",{cause:7}).cause,u=function(e,t){var n={};n[e]=s(e,t,c),r({global:!0,constructor:!0,arity:1,forced:c},n)},d=function(e,t){if(l&&l[e]){var n={};n[e]=s(a+"."+e,t,c),r({target:a,stat:!0,constructor:!0,arity:1,forced:c},n)}};u("Error",(function(e){return function(t){return o(e,this,arguments)}})),u("EvalError",(function(e){return function(t){return o(e,this,arguments)}})),u("RangeError",(function(e){return function(t){return o(e,this,arguments)}})),u("ReferenceError",(function(e){return function(t){return o(e,this,arguments)}})),u("SyntaxError",(function(e){return function(t){return o(e,this,arguments)}})),u("TypeError",(function(e){return function(t){return o(e,this,arguments)}})),u("URIError",(function(e){return function(t){return o(e,this,arguments)}})),d("CompileError",(function(e){return function(t){return o(e,this,arguments)}})),d("LinkError",(function(e){return function(t){return o(e,this,arguments)}})),d("RuntimeError",(function(e){return function(t){return o(e,this,arguments)}}))},4506:function(e,t,n){"use strict";var r=n(2109),i=n(1702),o=n(4488),s=n(9303),a=n(1340),l=n(7293),c=i("".charAt),u=l((function(){return"\ud842"!=="𠮷".at(-2)}));r({target:"String",proto:!0,forced:u},{at:function(e){var t=a(o(this)),n=t.length,r=s(e),i=r>=0?r:n+r;return i<0||i>=n?void 0:c(t,i)}})},8675:function(e,t,n){"use strict";var r=n(260),i=n(6244),o=n(9303),s=r.aTypedArray,a=r.exportTypedArrayMethod;a("at",(function(e){var t=s(this),n=i(t),r=o(e),a=r>=0?r:n+r;return a<0||a>=n?void 0:t[a]}))},4590:function(e,t,n){"use strict";var r=n(260),i=n(9671).findLastIndex,o=r.aTypedArray,s=r.exportTypedArrayMethod;s("findLastIndex",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},3408:function(e,t,n){"use strict";var r=n(260),i=n(9671).findLast,o=r.aTypedArray,s=r.exportTypedArrayMethod;s("findLast",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},3462:function(e,t,n){"use strict";var r=n(7854),i=n(6916),o=n(260),s=n(6244),a=n(2452),l=n(7908),c=n(7293),u=r.RangeError,d=r.Int8Array,h=d&&d.prototype,f=h&&h.set,p=o.aTypedArray,m=o.exportTypedArrayMethod,g=!c((function(){var e=new Uint8ClampedArray(2);return i(f,e,{length:1,0:3},1),3!==e[1]})),v=g&&o.NATIVE_ARRAY_BUFFER_VIEWS&&c((function(){var e=new d(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));m("set",(function(e){p(this);var t=a(arguments.length>1?arguments[1]:void 0,1),n=l(e);if(g)return i(f,this,n,t);var r=this.length,o=s(n),c=0;if(o+t>r)throw u("Wrong length");while(c<o)this[t+c]=n[c++]}),!g||v)},1439:function(e,t,n){"use strict";var r=n(1843),i=n(260),o=i.aTypedArray,s=i.exportTypedArrayMethod,a=i.getTypedArrayConstructor;s("toReversed",(function(){return r(o(this),a(this))}))},7585:function(e,t,n){"use strict";var r=n(260),i=n(1702),o=n(9662),s=n(7745),a=r.aTypedArray,l=r.getTypedArrayConstructor,c=r.exportTypedArrayMethod,u=i(r.TypedArrayPrototype.sort);c("toSorted",(function(e){void 0!==e&&o(e);var t=a(this),n=s(l(t),t);return u(n,e)}))},5315:function(e,t,n){"use strict";var r=n(1572),i=n(260),o=n(4067),s=n(9303),a=n(4599),l=i.aTypedArray,c=i.getTypedArrayConstructor,u=i.exportTypedArrayMethod,d=!!function(){try{new Int8Array(1)["with"](2,{valueOf:function(){throw 8}})}catch(e){return 8===e}}();u("with",{with:function(e,t){var n=l(this),i=s(e),u=o(n)?a(t):+t;return r(n,c(n),i,u)}}["with"],!d)},2801:function(e,t,n){"use strict";var r=n(2109),i=n(7854),o=n(5005),s=n(9114),a=n(3070).f,l=n(2597),c=n(5787),u=n(9587),d=n(6277),h=n(3678),f=n(1060),p=n(9781),m=n(1913),g="DOMException",v=o("Error"),y=o(g),b=function(){c(this,_);var e=arguments.length,t=d(e<1?void 0:arguments[0]),n=d(e<2?void 0:arguments[1],"Error"),r=new y(t,n),i=v(t);return i.name=g,a(r,"stack",s(1,f(i.stack,1))),u(r,this,b),r},_=b.prototype=y.prototype,w="stack"in v(g),x="stack"in new y(1,2),S=y&&p&&Object.getOwnPropertyDescriptor(i,g),E=!!S&&!(S.writable&&S.configurable),M=w&&!E&&!x;r({global:!0,constructor:!0,forced:m||M},{DOMException:M?b:y});var T=o(g),C=T.prototype;if(C.constructor!==T)for(var A in m||a(C,"constructor",s(1,T)),h)if(l(h,A)){var k=h[A],O=k.s;l(T,O)||a(T,O,s(6,k.c))}},455:function(){},8106:function(e,t,n){"use strict";n.d(t,{fi:function(){return C},kZ:function(){return T}});n(7658);var r=n(5498),i=n(3957),o=n(1504),s=n(9467);function a(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function l(e){return e!==(0,o.Z)(e)&&(0,s.Re)(e)?a(e):(0,i.Z)(e)}var c=n(8706),u=n(4214),d=n(5254),h=n(6127),f=n(9267);function p(e){var t=e.getBoundingClientRect(),n=(0,f.NM)(t.width)/e.offsetWidth||1,r=(0,f.NM)(t.height)/e.offsetHeight||1;return 1!==n||1!==r}function m(e,t,n){void 0===n&&(n=!1);var i=(0,s.Re)(t),o=(0,s.Re)(t)&&p(t),a=(0,d.Z)(t),f=(0,r.Z)(e,o,n),m={scrollLeft:0,scrollTop:0},g={x:0,y:0};return(i||!i&&!n)&&(("body"!==(0,c.Z)(t)||(0,h.Z)(a))&&(m=l(t)),(0,s.Re)(t)?(g=(0,r.Z)(t,!0),g.x+=t.clientLeft,g.y+=t.clientTop):a&&(g.x=(0,u.Z)(a))),{x:f.left+m.scrollLeft-g.x,y:f.top+m.scrollTop-g.y,width:f.width,height:f.height}}var g=n(7409),v=n(5786),y=n(1358),b=n(7385);function _(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name);var o=[].concat(e.requires||[],e.requiresIfExists||[]);o.forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}function w(e){var t=_(e);return b.xs.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}function x(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}function S(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}var E={placement:"bottom",modifiers:[],strategy:"absolute"};function M(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function T(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,o=void 0===i?E:i;return function(e,t,n){void 0===n&&(n=o);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},E,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},a=[],l=!1,c={state:i,setOptions:function(n){var a="function"===typeof n?n(i.options):n;d(),i.options=Object.assign({},o,i.options,a),i.scrollParents={reference:(0,s.kK)(e)?(0,v.Z)(e):e.contextElement?(0,v.Z)(e.contextElement):[],popper:(0,v.Z)(t)};var l=w(S([].concat(r,i.options.modifiers)));return i.orderedModifiers=l.filter((function(e){return e.enabled})),u(),c.update()},forceUpdate:function(){if(!l){var e=i.elements,t=e.reference,n=e.popper;if(M(t,n)){i.rects={reference:m(t,(0,y.Z)(n),"fixed"===i.options.strategy),popper:(0,g.Z)(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(e){return i.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var o=i.orderedModifiers[r],s=o.fn,a=o.options,u=void 0===a?{}:a,d=o.name;"function"===typeof s&&(i=s({state:i,options:u,name:d,instance:c})||i)}else i.reset=!1,r=-1}}},update:x((function(){return new Promise((function(e){c.forceUpdate(),e(i)}))})),destroy:function(){d(),l=!0}};if(!M(e,t))return c;function u(){i.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,o=e.effect;if("function"===typeof o){var s=o({state:i,name:t,instance:c,options:r}),l=function(){};a.push(s||l)}}))}function d(){a.forEach((function(e){return e()})),a=[]}return c.setOptions(n).then((function(e){!l&&n.onFirstUpdate&&n.onFirstUpdate(e)})),c}}var C=T()},8389:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9467);function i(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&(0,r.Zq)(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}},5498:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(9467),i=n(9267),o=n(1504),s=n(9043);function a(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var a=e.getBoundingClientRect(),l=1,c=1;t&&(0,r.Re)(e)&&(l=e.offsetWidth>0&&(0,i.NM)(a.width)/e.offsetWidth||1,c=e.offsetHeight>0&&(0,i.NM)(a.height)/e.offsetHeight||1);var u=(0,r.kK)(e)?(0,o.Z)(e):window,d=u.visualViewport,h=!(0,s.Z)()&&n,f=(a.left+(h&&d?d.offsetLeft:0))/l,p=(a.top+(h&&d?d.offsetTop:0))/c,m=a.width/l,g=a.height/c;return{width:m,height:g,top:p,right:f+m,bottom:p+g,left:f,x:f,y:p}}},6534:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(1504);function i(e){return(0,r.Z)(e).getComputedStyle(e)}},5254:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9467);function i(e){return(((0,r.kK)(e)?e.ownerDocument:e.document)||window.document).documentElement}},7409:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(5498);function i(e){var t=(0,r.Z)(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}},8706:function(e,t,n){"use strict";function r(e){return e?(e.nodeName||"").toLowerCase():null}n.d(t,{Z:function(){return r}})},1358:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(1504),i=n(8706),o=n(6534),s=n(9467);function a(e){return["table","td","th"].indexOf((0,i.Z)(e))>=0}var l=n(6751),c=n(9326);function u(e){return(0,s.Re)(e)&&"fixed"!==(0,o.Z)(e).position?e.offsetParent:null}function d(e){var t=/firefox/i.test((0,c.Z)()),n=/Trident/i.test((0,c.Z)());if(n&&(0,s.Re)(e)){var r=(0,o.Z)(e);if("fixed"===r.position)return null}var a=(0,l.Z)(e);(0,s.Zq)(a)&&(a=a.host);while((0,s.Re)(a)&&["html","body"].indexOf((0,i.Z)(a))<0){var u=(0,o.Z)(a);if("none"!==u.transform||"none"!==u.perspective||"paint"===u.contain||-1!==["transform","perspective"].indexOf(u.willChange)||t&&"filter"===u.willChange||t&&u.filter&&"none"!==u.filter)return a;a=a.parentNode}return null}function h(e){var t=(0,r.Z)(e),n=u(e);while(n&&a(n)&&"static"===(0,o.Z)(n).position)n=u(n);return n&&("html"===(0,i.Z)(n)||"body"===(0,i.Z)(n)&&"static"===(0,o.Z)(n).position)?t:n||d(e)||t}},6751:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(8706),i=n(5254),o=n(9467);function s(e){return"html"===(0,r.Z)(e)?e:e.assignedSlot||e.parentNode||((0,o.Zq)(e)?e.host:null)||(0,i.Z)(e)}},1504:function(e,t,n){"use strict";function r(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}n.d(t,{Z:function(){return r}})},3957:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(1504);function i(e){var t=(0,r.Z)(e),n=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:n,scrollTop:i}}},4214:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(5498),i=n(5254),o=n(3957);function s(e){return(0,r.Z)((0,i.Z)(e)).left+(0,o.Z)(e).scrollLeft}},9467:function(e,t,n){"use strict";n.d(t,{Re:function(){return o},Zq:function(){return s},kK:function(){return i}});var r=n(1504);function i(e){var t=(0,r.Z)(e).Element;return e instanceof t||e instanceof Element}function o(e){var t=(0,r.Z)(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function s(e){if("undefined"===typeof ShadowRoot)return!1;var t=(0,r.Z)(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}},9043:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9326);function i(){return!/^((?!chrome|android).)*safari/i.test((0,r.Z)())}},6127:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(6534);function i(e){var t=(0,r.Z)(e),n=t.overflow,i=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+i)}},5786:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(6751),i=n(6127),o=n(8706),s=n(9467);function a(e){return["html","body","#document"].indexOf((0,o.Z)(e))>=0?e.ownerDocument.body:(0,s.Re)(e)&&(0,i.Z)(e)?e:a((0,r.Z)(e))}var l=n(1504);function c(e,t){var n;void 0===t&&(t=[]);var o=a(e),s=o===(null==(n=e.ownerDocument)?void 0:n.body),u=(0,l.Z)(o),d=s?[u].concat(u.visualViewport||[],(0,i.Z)(o)?o:[]):o,h=t.concat(d);return s?h:h.concat(c((0,r.Z)(d)))}},7385:function(e,t,n){"use strict";n.d(t,{BL:function(){return c},Ct:function(){return g},DH:function(){return w},F2:function(){return o},I:function(){return i},MS:function(){return M},N7:function(){return v},Pj:function(){return h},XM:function(){return _},YP:function(){return p},bw:function(){return m},cW:function(){return E},d7:function(){return a},ij:function(){return y},iv:function(){return S},k5:function(){return f},mv:function(){return l},r5:function(){return b},t$:function(){return s},ut:function(){return u},wX:function(){return x},we:function(){return r},xs:function(){return T},zV:function(){return d}});var r="top",i="bottom",o="right",s="left",a="auto",l=[r,i,o,s],c="start",u="end",d="clippingParents",h="viewport",f="popper",p="reference",m=l.reduce((function(e,t){return e.concat([t+"-"+c,t+"-"+u])}),[]),g=[].concat(l,[a]).reduce((function(e,t){return e.concat([t,t+"-"+c,t+"-"+u])}),[]),v="beforeRead",y="read",b="afterRead",_="beforeMain",w="main",x="afterMain",S="beforeWrite",E="write",M="afterWrite",T=[v,y,b,_,w,x,S,E,M]},94:function(e,t,n){"use strict";var r=n(8706),i=n(9467);function o(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},o=t.attributes[e]||{},s=t.elements[e];(0,i.Re)(s)&&(0,r.Z)(s)&&(Object.assign(s.style,n),Object.keys(o).forEach((function(e){var t=o[e];!1===t?s.removeAttribute(e):s.setAttribute(e,!0===t?"":t)})))}))}function s(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var o=t.elements[e],s=t.attributes[e]||{},a=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]),l=a.reduce((function(e,t){return e[t]="",e}),{});(0,i.Re)(o)&&(0,r.Z)(o)&&(Object.assign(o.style,l),Object.keys(s).forEach((function(e){o.removeAttribute(e)})))}))}}t.Z={name:"applyStyles",enabled:!0,phase:"write",fn:o,effect:s,requires:["computeStyles"]}},2066:function(e,t,n){"use strict";var r=n(2382),i=n(7409),o=n(8389),s=n(1358),a=n(158),l=n(1672),c=n(7770),u=n(4289),d=n(7385),h=function(e,t){return e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e,(0,c.Z)("number"!==typeof e?e:(0,u.Z)(e,d.mv))};function f(e){var t,n=e.state,o=e.name,c=e.options,u=n.elements.arrow,f=n.modifiersData.popperOffsets,p=(0,r.Z)(n.placement),m=(0,a.Z)(p),g=[d.t$,d.F2].indexOf(p)>=0,v=g?"height":"width";if(u&&f){var y=h(c.padding,n),b=(0,i.Z)(u),_="y"===m?d.we:d.t$,w="y"===m?d.I:d.F2,x=n.rects.reference[v]+n.rects.reference[m]-f[m]-n.rects.popper[v],S=f[m]-n.rects.reference[m],E=(0,s.Z)(u),M=E?"y"===m?E.clientHeight||0:E.clientWidth||0:0,T=x/2-S/2,C=y[_],A=M-b[v]-y[w],k=M/2-b[v]/2+T,O=(0,l.u)(C,k,A),R=m;n.modifiersData[o]=(t={},t[R]=O,t.centerOffset=O-k,t)}}function p(e){var t=e.state,n=e.options,r=n.element,i=void 0===r?"[data-popper-arrow]":r;null!=i&&("string"!==typeof i||(i=t.elements.popper.querySelector(i),i))&&(0,o.Z)(t.elements.popper,i)&&(t.elements.arrow=i)}t.Z={name:"arrow",enabled:!0,phase:"main",fn:f,effect:p,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]}},1870:function(e,t,n){"use strict";var r=n(7385),i=n(1358),o=n(1504),s=n(5254),a=n(6534),l=n(2382),c=n(9527),u=n(9267),d={top:"auto",right:"auto",bottom:"auto",left:"auto"};function h(e){var t=e.x,n=e.y,r=window,i=r.devicePixelRatio||1;return{x:(0,u.NM)(t*i)/i||0,y:(0,u.NM)(n*i)/i||0}}function f(e){var t,n=e.popper,l=e.popperRect,c=e.placement,u=e.variation,f=e.offsets,p=e.position,m=e.gpuAcceleration,g=e.adaptive,v=e.roundOffsets,y=e.isFixed,b=f.x,_=void 0===b?0:b,w=f.y,x=void 0===w?0:w,S="function"===typeof v?v({x:_,y:x}):{x:_,y:x};_=S.x,x=S.y;var E=f.hasOwnProperty("x"),M=f.hasOwnProperty("y"),T=r.t$,C=r.we,A=window;if(g){var k=(0,i.Z)(n),O="clientHeight",R="clientWidth";if(k===(0,o.Z)(n)&&(k=(0,s.Z)(n),"static"!==(0,a.Z)(k).position&&"absolute"===p&&(O="scrollHeight",R="scrollWidth")),c===r.we||(c===r.t$||c===r.F2)&&u===r.ut){C=r.I;var P=y&&k===A&&A.visualViewport?A.visualViewport.height:k[O];x-=P-l.height,x*=m?1:-1}if(c===r.t$||(c===r.we||c===r.I)&&u===r.ut){T=r.F2;var L=y&&k===A&&A.visualViewport?A.visualViewport.width:k[R];_-=L-l.width,_*=m?1:-1}}var D,I=Object.assign({position:p},g&&d),N=!0===v?h({x:_,y:x}):{x:_,y:x};return _=N.x,x=N.y,m?Object.assign({},I,(D={},D[C]=M?"0":"",D[T]=E?"0":"",D.transform=(A.devicePixelRatio||1)<=1?"translate("+_+"px, "+x+"px)":"translate3d("+_+"px, "+x+"px, 0)",D)):Object.assign({},I,(t={},t[C]=M?x+"px":"",t[T]=E?_+"px":"",t.transform="",t))}function p(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,s=void 0===o||o,a=n.roundOffsets,u=void 0===a||a,d={placement:(0,l.Z)(t.placement),variation:(0,c.Z)(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,f(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:u})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,f(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}t.Z={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:p,data:{}}},3116:function(e,t,n){"use strict";var r=n(1504),i={passive:!0};function o(e){var t=e.state,n=e.instance,o=e.options,s=o.scroll,a=void 0===s||s,l=o.resize,c=void 0===l||l,u=(0,r.Z)(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&d.forEach((function(e){e.addEventListener("scroll",n.update,i)})),c&&u.addEventListener("resize",n.update,i),function(){a&&d.forEach((function(e){e.removeEventListener("scroll",n.update,i)})),c&&u.removeEventListener("resize",n.update,i)}}t.Z={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:o,data:{}}},5805:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});n(7658);var r={left:"right",right:"left",bottom:"top",top:"bottom"};function i(e){return e.replace(/left|right|bottom|top/g,(function(e){return r[e]}))}var o=n(2382),s={start:"end",end:"start"};function a(e){return e.replace(/start|end/g,(function(e){return s[e]}))}var l=n(6707),c=n(9527),u=n(7385);function d(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,s=n.rootBoundary,a=n.padding,d=n.flipVariations,h=n.allowedAutoPlacements,f=void 0===h?u.Ct:h,p=(0,c.Z)(r),m=p?d?u.bw:u.bw.filter((function(e){return(0,c.Z)(e)===p})):u.mv,g=m.filter((function(e){return f.indexOf(e)>=0}));0===g.length&&(g=m);var v=g.reduce((function(t,n){return t[n]=(0,l.Z)(e,{placement:n,boundary:i,rootBoundary:s,padding:a})[(0,o.Z)(n)],t}),{});return Object.keys(v).sort((function(e,t){return v[e]-v[t]}))}function h(e){if((0,o.Z)(e)===u.d7)return[];var t=i(e);return[a(e),t,a(t)]}function f(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var s=n.mainAxis,a=void 0===s||s,f=n.altAxis,p=void 0===f||f,m=n.fallbackPlacements,g=n.padding,v=n.boundary,y=n.rootBoundary,b=n.altBoundary,_=n.flipVariations,w=void 0===_||_,x=n.allowedAutoPlacements,S=t.options.placement,E=(0,o.Z)(S),M=E===S,T=m||(M||!w?[i(S)]:h(S)),C=[S].concat(T).reduce((function(e,n){return e.concat((0,o.Z)(n)===u.d7?d(t,{placement:n,boundary:v,rootBoundary:y,padding:g,flipVariations:w,allowedAutoPlacements:x}):n)}),[]),A=t.rects.reference,k=t.rects.popper,O=new Map,R=!0,P=C[0],L=0;L<C.length;L++){var D=C[L],I=(0,o.Z)(D),N=(0,c.Z)(D)===u.BL,U=[u.we,u.I].indexOf(I)>=0,F=U?"width":"height",B=(0,l.Z)(t,{placement:D,boundary:v,rootBoundary:y,altBoundary:b,padding:g}),V=U?N?u.F2:u.t$:N?u.I:u.we;A[F]>k[F]&&(V=i(V));var z=i(V),j=[];if(a&&j.push(B[I]<=0),p&&j.push(B[V]<=0,B[z]<=0),j.every((function(e){return e}))){P=D,R=!1;break}O.set(D,j)}if(R)for(var H=w?3:1,W=function(e){var t=C.find((function(t){var n=O.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return P=t,"break"},G=H;G>0;G--){var $=W(G);if("break"===$)break}t.placement!==P&&(t.modifiersData[r]._skip=!0,t.placement=P,t.reset=!0)}}var p={name:"flip",enabled:!0,phase:"main",fn:f,requiresIfExists:["offset"],data:{_skip:!1}}},8948:function(e,t,n){"use strict";var r=n(7385),i=n(6707);function o(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function s(e){return[r.we,r.F2,r.I,r.t$].some((function(t){return e[t]>=0}))}function a(e){var t=e.state,n=e.name,r=t.rects.reference,a=t.rects.popper,l=t.modifiersData.preventOverflow,c=(0,i.Z)(t,{elementContext:"reference"}),u=(0,i.Z)(t,{altBoundary:!0}),d=o(c,r),h=o(u,a,l),f=s(d),p=s(h);t.modifiersData[n]={referenceClippingOffsets:d,popperEscapeOffsets:h,isReferenceHidden:f,hasPopperEscaped:p},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":p})}t.Z={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:a}},7953:function(e,t,n){"use strict";var r=n(2382),i=n(7385);function o(e,t,n){var o=(0,r.Z)(e),s=[i.t$,i.we].indexOf(o)>=0?-1:1,a="function"===typeof n?n(Object.assign({},t,{placement:e})):n,l=a[0],c=a[1];return l=l||0,c=(c||0)*s,[i.t$,i.F2].indexOf(o)>=0?{x:c,y:l}:{x:l,y:c}}function s(e){var t=e.state,n=e.options,r=e.name,s=n.offset,a=void 0===s?[0,0]:s,l=i.Ct.reduce((function(e,n){return e[n]=o(n,t.rects,a),e}),{}),c=l[t.placement],u=c.x,d=c.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=u,t.modifiersData.popperOffsets.y+=d),t.modifiersData[r]=l}t.Z={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:s}},3268:function(e,t,n){"use strict";var r=n(3108);function i(e){var t=e.state,n=e.name;t.modifiersData[n]=(0,r.Z)({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}t.Z={name:"popperOffsets",enabled:!0,phase:"read",fn:i,data:{}}},8285:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(7385),i=n(2382),o=n(158);function s(e){return"x"===e?"y":"x"}var a=n(1672),l=n(7409),c=n(1358),u=n(6707),d=n(9527),h=n(218),f=n(9267);function p(e){var t=e.state,n=e.options,p=e.name,m=n.mainAxis,g=void 0===m||m,v=n.altAxis,y=void 0!==v&&v,b=n.boundary,_=n.rootBoundary,w=n.altBoundary,x=n.padding,S=n.tether,E=void 0===S||S,M=n.tetherOffset,T=void 0===M?0:M,C=(0,u.Z)(t,{boundary:b,rootBoundary:_,padding:x,altBoundary:w}),A=(0,i.Z)(t.placement),k=(0,d.Z)(t.placement),O=!k,R=(0,o.Z)(A),P=s(R),L=t.modifiersData.popperOffsets,D=t.rects.reference,I=t.rects.popper,N="function"===typeof T?T(Object.assign({},t.rects,{placement:t.placement})):T,U="number"===typeof N?{mainAxis:N,altAxis:N}:Object.assign({mainAxis:0,altAxis:0},N),F=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,B={x:0,y:0};if(L){if(g){var V,z="y"===R?r.we:r.t$,j="y"===R?r.I:r.F2,H="y"===R?"height":"width",W=L[R],G=W+C[z],$=W-C[j],q=E?-I[H]/2:0,Y=k===r.BL?D[H]:I[H],X=k===r.BL?-I[H]:-D[H],Z=t.elements.arrow,K=E&&Z?(0,l.Z)(Z):{width:0,height:0},J=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:(0,h.Z)(),Q=J[z],ee=J[j],te=(0,a.u)(0,D[H],K[H]),ne=O?D[H]/2-q-te-Q-U.mainAxis:Y-te-Q-U.mainAxis,re=O?-D[H]/2+q+te+ee+U.mainAxis:X+te+ee+U.mainAxis,ie=t.elements.arrow&&(0,c.Z)(t.elements.arrow),oe=ie?"y"===R?ie.clientTop||0:ie.clientLeft||0:0,se=null!=(V=null==F?void 0:F[R])?V:0,ae=W+ne-se-oe,le=W+re-se,ce=(0,a.u)(E?(0,f.VV)(G,ae):G,W,E?(0,f.Fp)($,le):$);L[R]=ce,B[R]=ce-W}if(y){var ue,de="x"===R?r.we:r.t$,he="x"===R?r.I:r.F2,fe=L[P],pe="y"===P?"height":"width",me=fe+C[de],ge=fe-C[he],ve=-1!==[r.we,r.t$].indexOf(A),ye=null!=(ue=null==F?void 0:F[P])?ue:0,be=ve?me:fe-D[pe]-I[pe]-ye+U.altAxis,_e=ve?fe+D[pe]+I[pe]-ye-U.altAxis:ge,we=E&&ve?(0,a.q)(be,fe,_e):(0,a.u)(E?be:me,fe,E?_e:ge);L[P]=we,B[P]=we-fe}t.modifiersData[p]=B}}var m={name:"preventOverflow",enabled:!0,phase:"main",fn:p,requiresIfExists:["offset"]}},1320:function(e,t,n){"use strict";n.d(t,{fi:function(){return p}});var r=n(8106),i=n(3116),o=n(3268),s=n(1870),a=n(94),l=n(7953),c=n(5805),u=n(8285),d=n(2066),h=n(8948),f=[i.Z,o.Z,s.Z,a.Z,l.Z,c.Z,u.Z,d.Z,h.Z],p=(0,r.kZ)({defaultModifiers:f})},3108:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(2382),i=n(9527),o=n(158),s=n(7385);function a(e){var t,n=e.reference,a=e.element,l=e.placement,c=l?(0,r.Z)(l):null,u=l?(0,i.Z)(l):null,d=n.x+n.width/2-a.width/2,h=n.y+n.height/2-a.height/2;switch(c){case s.we:t={x:d,y:n.y-a.height};break;case s.I:t={x:d,y:n.y+n.height};break;case s.F2:t={x:n.x+n.width,y:h};break;case s.t$:t={x:n.x-a.width,y:h};break;default:t={x:n.x,y:n.y}}var f=c?(0,o.Z)(c):null;if(null!=f){var p="y"===f?"height":"width";switch(u){case s.BL:t[f]=t[f]-(n[p]/2-a[p]/2);break;case s.ut:t[f]=t[f]+(n[p]/2-a[p]/2);break;default:}}return t}},6707:function(e,t,n){"use strict";n.d(t,{Z:function(){return A}});var r=n(7385),i=n(1504),o=n(5254),s=n(4214),a=n(9043);function l(e,t){var n=(0,i.Z)(e),r=(0,o.Z)(e),l=n.visualViewport,c=r.clientWidth,u=r.clientHeight,d=0,h=0;if(l){c=l.width,u=l.height;var f=(0,a.Z)();(f||!f&&"fixed"===t)&&(d=l.offsetLeft,h=l.offsetTop)}return{width:c,height:u,x:d+(0,s.Z)(e),y:h}}var c=n(6534),u=n(3957),d=n(9267);function h(e){var t,n=(0,o.Z)(e),r=(0,u.Z)(e),i=null==(t=e.ownerDocument)?void 0:t.body,a=(0,d.Fp)(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),l=(0,d.Fp)(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),h=-r.scrollLeft+(0,s.Z)(e),f=-r.scrollTop;return"rtl"===(0,c.Z)(i||n).direction&&(h+=(0,d.Fp)(n.clientWidth,i?i.clientWidth:0)-a),{width:a,height:l,x:h,y:f}}var f=n(5786),p=n(1358),m=n(9467),g=n(5498),v=n(6751),y=n(8389),b=n(8706);function _(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function w(e,t){var n=(0,g.Z)(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function x(e,t,n){return t===r.Pj?_(l(e,n)):(0,m.kK)(t)?w(t,n):_(h((0,o.Z)(e)))}function S(e){var t=(0,f.Z)((0,v.Z)(e)),n=["absolute","fixed"].indexOf((0,c.Z)(e).position)>=0,r=n&&(0,m.Re)(e)?(0,p.Z)(e):e;return(0,m.kK)(r)?t.filter((function(e){return(0,m.kK)(e)&&(0,y.Z)(e,r)&&"body"!==(0,b.Z)(e)})):[]}function E(e,t,n,r){var i="clippingParents"===t?S(e):[].concat(t),o=[].concat(i,[n]),s=o[0],a=o.reduce((function(t,n){var i=x(e,n,r);return t.top=(0,d.Fp)(i.top,t.top),t.right=(0,d.VV)(i.right,t.right),t.bottom=(0,d.VV)(i.bottom,t.bottom),t.left=(0,d.Fp)(i.left,t.left),t}),x(e,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}var M=n(3108),T=n(7770),C=n(4289);function A(e,t){void 0===t&&(t={});var n=t,i=n.placement,s=void 0===i?e.placement:i,a=n.strategy,l=void 0===a?e.strategy:a,c=n.boundary,u=void 0===c?r.zV:c,d=n.rootBoundary,h=void 0===d?r.Pj:d,f=n.elementContext,p=void 0===f?r.k5:f,v=n.altBoundary,y=void 0!==v&&v,b=n.padding,w=void 0===b?0:b,x=(0,T.Z)("number"!==typeof w?w:(0,C.Z)(w,r.mv)),S=p===r.k5?r.YP:r.k5,A=e.rects.popper,k=e.elements[y?S:p],O=E((0,m.kK)(k)?k:k.contextElement||(0,o.Z)(e.elements.popper),u,h,l),R=(0,g.Z)(e.elements.reference),P=(0,M.Z)({reference:R,element:A,strategy:"absolute",placement:s}),L=_(Object.assign({},A,P)),D=p===r.k5?L:R,I={top:O.top-D.top+x.top,bottom:D.bottom-O.bottom+x.bottom,left:O.left-D.left+x.left,right:D.right-O.right+x.right},N=e.modifiersData.offset;if(p===r.k5&&N){var U=N[s];Object.keys(I).forEach((function(e){var t=[r.F2,r.I].indexOf(e)>=0?1:-1,n=[r.we,r.I].indexOf(e)>=0?"y":"x";I[e]+=U[n]*t}))}return I}},4289:function(e,t,n){"use strict";function r(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}n.d(t,{Z:function(){return r}})},2382:function(e,t,n){"use strict";function r(e){return e.split("-")[0]}n.d(t,{Z:function(){return r}})},218:function(e,t,n){"use strict";function r(){return{top:0,right:0,bottom:0,left:0}}n.d(t,{Z:function(){return r}})},158:function(e,t,n){"use strict";function r(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}n.d(t,{Z:function(){return r}})},9527:function(e,t,n){"use strict";function r(e){return e.split("-")[1]}n.d(t,{Z:function(){return r}})},9267:function(e,t,n){"use strict";n.d(t,{Fp:function(){return r},NM:function(){return o},VV:function(){return i}});var r=Math.max,i=Math.min,o=Math.round},7770:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(218);function i(e){return Object.assign({},(0,r.Z)(),e)}},9326:function(e,t,n){"use strict";function r(){var e=navigator.userAgentData;return null!=e&&e.brands?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}n.d(t,{Z:function(){return r}})},1672:function(e,t,n){"use strict";n.d(t,{q:function(){return o},u:function(){return i}});var r=n(9267);function i(e,t,n){return(0,r.Fp)(e,(0,r.VV)(t,n))}function o(e,t,n){var r=i(e,t,n);return r>n?n:r}},4188:function(e,t,n){"use strict";n.d(t,{$y:function(){return Ne},B:function(){return s},BK:function(){return rt},Bj:function(){return o},EB:function(){return c},Fl:function(){return ct},IU:function(){return Be},Jd:function(){return A},OT:function(){return Pe},PG:function(){return Ie},SU:function(){return Ke},Tn:function(){return Je},Um:function(){return Re},Vh:function(){return st},WL:function(){return et},X$:function(){return P},X3:function(){return Fe},XI:function(){return qe},Xl:function(){return Ve},YS:function(){return Le},ZM:function(){return nt},cE:function(){return E},dq:function(){return Ge},iH:function(){return $e},j:function(){return O},lk:function(){return k},nZ:function(){return l},oR:function(){return Ze},qj:function(){return Oe},qq:function(){return x},sT:function(){return M},yT:function(){return Ue}});n(7658);var r=n(4887);let i;class o{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=i,!e&&i&&(this.index=(i.scopes||(i.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=i;try{return i=this,e()}finally{i=t}}else 0}on(){i=this}off(){i=this.parent}stop(e){if(this._active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0,this._active=!1}}}function s(e){return new o(e)}function a(e,t=i){t&&t.active&&t.effects.push(e)}function l(){return i}function c(e){i&&i.cleanups.push(e)}const u=e=>{const t=new Set(e);return t.w=0,t.n=0,t},d=e=>(e.w&v)>0,h=e=>(e.n&v)>0,f=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=v},p=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const i=t[r];d(i)&&!h(i)?i.delete(e):t[n++]=i,i.w&=~v,i.n&=~v}t.length=n}},m=new WeakMap;let g=0,v=1;const y=30;let b;const _=Symbol(""),w=Symbol("");class x{constructor(e,t=null,n){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,a(this,n)}run(){if(!this.active)return this.fn();let e=b,t=T;while(e){if(e===this)return;e=e.parent}try{return this.parent=b,b=this,T=!0,v=1<<++g,g<=y?f(this):S(this),this.fn()}finally{g<=y&&p(this),v=1<<--g,b=this.parent,T=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){b===this?this.deferStop=!0:this.active&&(S(this),this.onStop&&this.onStop(),this.active=!1)}}function S(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}function E(e,t){e.effect&&(e=e.effect.fn);const n=new x(e);t&&((0,r.l7)(n,t),t.scope&&a(n,t.scope)),t&&t.lazy||n.run();const i=n.run.bind(n);return i.effect=n,i}function M(e){e.effect.stop()}let T=!0;const C=[];function A(){C.push(T),T=!1}function k(){const e=C.pop();T=void 0===e||e}function O(e,t,n){if(T&&b){let t=m.get(e);t||m.set(e,t=new Map);let r=t.get(n);r||t.set(n,r=u());const i=void 0;R(r,i)}}function R(e,t){let n=!1;g<=y?h(e)||(e.n|=v,n=!d(e)):n=!e.has(b),n&&(e.add(b),b.deps.push(e))}function P(e,t,n,i,o,s){const a=m.get(e);if(!a)return;let l=[];if("clear"===t)l=[...a.values()];else if("length"===n&&(0,r.kJ)(e)){const e=Number(i);a.forEach(((t,n)=>{("length"===n||n>=e)&&l.push(t)}))}else switch(void 0!==n&&l.push(a.get(n)),t){case"add":(0,r.kJ)(e)?(0,r.S0)(n)&&l.push(a.get("length")):(l.push(a.get(_)),(0,r._N)(e)&&l.push(a.get(w)));break;case"delete":(0,r.kJ)(e)||(l.push(a.get(_)),(0,r._N)(e)&&l.push(a.get(w)));break;case"set":(0,r._N)(e)&&l.push(a.get(_));break}if(1===l.length)l[0]&&L(l[0]);else{const e=[];for(const t of l)t&&e.push(...t);L(u(e))}}function L(e,t){const n=(0,r.kJ)(e)?e:[...e];for(const r of n)r.computed&&D(r,t);for(const r of n)r.computed||D(r,t)}function D(e,t){(e!==b||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}function I(e,t){var n;return null==(n=m.get(e))?void 0:n.get(t)}const N=(0,r.fY)("__proto__,__v_isRef,__isVue"),U=new Set(Object.getOwnPropertyNames(Symbol).filter((e=>"arguments"!==e&&"caller"!==e)).map((e=>Symbol[e])).filter(r.yk)),F=G(),B=G(!1,!0),V=G(!0),z=G(!0,!0),j=H();function H(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const n=Be(this);for(let t=0,i=this.length;t<i;t++)O(n,"get",t+"");const r=n[t](...e);return-1===r||!1===r?n[t](...e.map(Be)):r}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){A();const n=Be(this)[t].apply(this,e);return k(),n}})),e}function W(e){const t=Be(this);return O(t,"has",e),t.hasOwnProperty(e)}function G(e=!1,t=!1){return function(n,i,o){if("__v_isReactive"===i)return!e;if("__v_isReadonly"===i)return e;if("__v_isShallow"===i)return t;if("__v_raw"===i&&o===(e?t?Ce:Te:t?Me:Ee).get(n))return n;const s=(0,r.kJ)(n);if(!e){if(s&&(0,r.RI)(j,i))return Reflect.get(j,i,o);if("hasOwnProperty"===i)return W}const a=Reflect.get(n,i,o);return((0,r.yk)(i)?U.has(i):N(i))?a:(e||O(n,"get",i),t?a:Ge(a)?s&&(0,r.S0)(i)?a:a.value:(0,r.Kn)(a)?e?Pe(a):Oe(a):a)}}const $=Y(),q=Y(!0);function Y(e=!1){return function(t,n,i,o){let s=t[n];if(Ne(s)&&Ge(s)&&!Ge(i))return!1;if(!e&&(Ue(i)||Ne(i)||(s=Be(s),i=Be(i)),!(0,r.kJ)(t)&&Ge(s)&&!Ge(i)))return s.value=i,!0;const a=(0,r.kJ)(t)&&(0,r.S0)(n)?Number(n)<t.length:(0,r.RI)(t,n),l=Reflect.set(t,n,i,o);return t===Be(o)&&(a?(0,r.aU)(i,s)&&P(t,"set",n,i,s):P(t,"add",n,i)),l}}function X(e,t){const n=(0,r.RI)(e,t),i=e[t],o=Reflect.deleteProperty(e,t);return o&&n&&P(e,"delete",t,void 0,i),o}function Z(e,t){const n=Reflect.has(e,t);return(0,r.yk)(t)&&U.has(t)||O(e,"has",t),n}function K(e){return O(e,"iterate",(0,r.kJ)(e)?"length":_),Reflect.ownKeys(e)}const J={get:F,set:$,deleteProperty:X,has:Z,ownKeys:K},Q={get:V,set(e,t){return!0},deleteProperty(e,t){return!0}},ee=(0,r.l7)({},J,{get:B,set:q}),te=(0,r.l7)({},Q,{get:z}),ne=e=>e,re=e=>Reflect.getPrototypeOf(e);function ie(e,t,n=!1,r=!1){e=e["__v_raw"];const i=Be(e),o=Be(t);n||(t!==o&&O(i,"get",t),O(i,"get",o));const{has:s}=re(i),a=r?ne:n?je:ze;return s.call(i,t)?a(e.get(t)):s.call(i,o)?a(e.get(o)):void(e!==i&&e.get(t))}function oe(e,t=!1){const n=this["__v_raw"],r=Be(n),i=Be(e);return t||(e!==i&&O(r,"has",e),O(r,"has",i)),e===i?n.has(e):n.has(e)||n.has(i)}function se(e,t=!1){return e=e["__v_raw"],!t&&O(Be(e),"iterate",_),Reflect.get(e,"size",e)}function ae(e){e=Be(e);const t=Be(this),n=re(t),r=n.has.call(t,e);return r||(t.add(e),P(t,"add",e,e)),this}function le(e,t){t=Be(t);const n=Be(this),{has:i,get:o}=re(n);let s=i.call(n,e);s||(e=Be(e),s=i.call(n,e));const a=o.call(n,e);return n.set(e,t),s?(0,r.aU)(t,a)&&P(n,"set",e,t,a):P(n,"add",e,t),this}function ce(e){const t=Be(this),{has:n,get:r}=re(t);let i=n.call(t,e);i||(e=Be(e),i=n.call(t,e));const o=r?r.call(t,e):void 0,s=t.delete(e);return i&&P(t,"delete",e,void 0,o),s}function ue(){const e=Be(this),t=0!==e.size,n=void 0,r=e.clear();return t&&P(e,"clear",void 0,void 0,n),r}function de(e,t){return function(n,r){const i=this,o=i["__v_raw"],s=Be(o),a=t?ne:e?je:ze;return!e&&O(s,"iterate",_),o.forEach(((e,t)=>n.call(r,a(e),a(t),i)))}}function he(e,t,n){return function(...i){const o=this["__v_raw"],s=Be(o),a=(0,r._N)(s),l="entries"===e||e===Symbol.iterator&&a,c="keys"===e&&a,u=o[e](...i),d=n?ne:t?je:ze;return!t&&O(s,"iterate",c?w:_),{next(){const{value:e,done:t}=u.next();return t?{value:e,done:t}:{value:l?[d(e[0]),d(e[1])]:d(e),done:t}},[Symbol.iterator](){return this}}}}function fe(e){return function(...t){return"delete"!==e&&this}}function pe(){const e={get(e){return ie(this,e)},get size(){return se(this)},has:oe,add:ae,set:le,delete:ce,clear:ue,forEach:de(!1,!1)},t={get(e){return ie(this,e,!1,!0)},get size(){return se(this)},has:oe,add:ae,set:le,delete:ce,clear:ue,forEach:de(!1,!0)},n={get(e){return ie(this,e,!0)},get size(){return se(this,!0)},has(e){return oe.call(this,e,!0)},add:fe("add"),set:fe("set"),delete:fe("delete"),clear:fe("clear"),forEach:de(!0,!1)},r={get(e){return ie(this,e,!0,!0)},get size(){return se(this,!0)},has(e){return oe.call(this,e,!0)},add:fe("add"),set:fe("set"),delete:fe("delete"),clear:fe("clear"),forEach:de(!0,!0)},i=["keys","values","entries",Symbol.iterator];return i.forEach((i=>{e[i]=he(i,!1,!1),n[i]=he(i,!0,!1),t[i]=he(i,!1,!0),r[i]=he(i,!0,!0)})),[e,n,t,r]}const[me,ge,ve,ye]=pe();function be(e,t){const n=t?e?ye:ve:e?ge:me;return(t,i,o)=>"__v_isReactive"===i?!e:"__v_isReadonly"===i?e:"__v_raw"===i?t:Reflect.get((0,r.RI)(n,i)&&i in t?n:t,i,o)}const _e={get:be(!1,!1)},we={get:be(!1,!0)},xe={get:be(!0,!1)},Se={get:be(!0,!0)};const Ee=new WeakMap,Me=new WeakMap,Te=new WeakMap,Ce=new WeakMap;function Ae(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ke(e){return e["__v_skip"]||!Object.isExtensible(e)?0:Ae((0,r.W7)(e))}function Oe(e){return Ne(e)?e:De(e,!1,J,_e,Ee)}function Re(e){return De(e,!1,ee,we,Me)}function Pe(e){return De(e,!0,Q,xe,Te)}function Le(e){return De(e,!0,te,Se,Ce)}function De(e,t,n,i,o){if(!(0,r.Kn)(e))return e;if(e["__v_raw"]&&(!t||!e["__v_isReactive"]))return e;const s=o.get(e);if(s)return s;const a=ke(e);if(0===a)return e;const l=new Proxy(e,2===a?i:n);return o.set(e,l),l}function Ie(e){return Ne(e)?Ie(e["__v_raw"]):!(!e||!e["__v_isReactive"])}function Ne(e){return!(!e||!e["__v_isReadonly"])}function Ue(e){return!(!e||!e["__v_isShallow"])}function Fe(e){return Ie(e)||Ne(e)}function Be(e){const t=e&&e["__v_raw"];return t?Be(t):e}function Ve(e){return(0,r.Nj)(e,"__v_skip",!0),e}const ze=e=>(0,r.Kn)(e)?Oe(e):e,je=e=>(0,r.Kn)(e)?Pe(e):e;function He(e){T&&b&&(e=Be(e),R(e.dep||(e.dep=u())))}function We(e,t){e=Be(e);const n=e.dep;n&&L(n)}function Ge(e){return!(!e||!0!==e.__v_isRef)}function $e(e){return Ye(e,!1)}function qe(e){return Ye(e,!0)}function Ye(e,t){return Ge(e)?e:new Xe(e,t)}class Xe{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:Be(e),this._value=t?e:ze(e)}get value(){return He(this),this._value}set value(e){const t=this.__v_isShallow||Ue(e)||Ne(e);e=t?e:Be(e),(0,r.aU)(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:ze(e),We(this,e))}}function Ze(e){We(e,void 0)}function Ke(e){return Ge(e)?e.value:e}function Je(e){return(0,r.mf)(e)?e():Ke(e)}const Qe={get:(e,t,n)=>Ke(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return Ge(i)&&!Ge(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function et(e){return Ie(e)?e:new Proxy(e,Qe)}class tt{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:t,set:n}=e((()=>He(this)),(()=>We(this)));this._get=t,this._set=n}get value(){return this._get()}set value(e){this._set(e)}}function nt(e){return new tt(e)}function rt(e){const t=(0,r.kJ)(e)?new Array(e.length):{};for(const n in e)t[n]=at(e,n);return t}class it{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0}get value(){const e=this._object[this._key];return void 0===e?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return I(Be(this._object),this._key)}}class ot{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function st(e,t,n){return Ge(e)?e:(0,r.mf)(e)?new ot(e):(0,r.Kn)(e)&&arguments.length>1?at(e,t,n):$e(e)}function at(e,t,n){const r=e[t];return Ge(r)?r:new it(e,t,n)}class lt{constructor(e,t,n,r){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this["__v_isReadonly"]=!1,this._dirty=!0,this.effect=new x(e,(()=>{this._dirty||(this._dirty=!0,We(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!r,this["__v_isReadonly"]=n}get value(){const e=Be(this);return He(e),!e._dirty&&e._cacheable||(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function ct(e,t,n=!1){let i,o;const s=(0,r.mf)(e);s?(i=e,o=r.dG):(i=e.get,o=e.set);const a=new lt(i,o,s||!o,n);return a}},8473:function(e,t,n){"use strict";n.d(t,{$d:function(){return l},$y:function(){return r.$y},Ah:function(){return et},B:function(){return r.B},BK:function(){return r.BK},Bj:function(){return r.Bj},Bz:function(){return Et},C3:function(){return lr},C_:function(){return i.C_},Cn:function(){return j},EB:function(){return r.EB},EM:function(){return an},Eo:function(){return Pn},F4:function(){return mr},FN:function(){return kr},Fl:function(){return Zr},G:function(){return oi},Gn:function(){return At},HX:function(){return H},HY:function(){return $n},Ho:function(){return gr},IU:function(){return r.IU},JJ:function(){return on},Jd:function(){return Qe},KU:function(){return a},Ko:function(){return ft},LL:function(){return ct},MW:function(){return St},MX:function(){return ti},Mr:function(){return ei},Nv:function(){return pt},OT:function(){return r.OT},Ob:function(){return Be},P$:function(){return Te},PG:function(){return r.PG},Q2:function(){return ut},Q6:function(){return Pe},RC:function(){return Ie},Rh:function(){return he},Rr:function(){return Ot},S3:function(){return c},SU:function(){return r.SU},Tn:function(){return r.Tn},U2:function(){return Ae},Uc:function(){return Jr},Uk:function(){return vr},Um:function(){return r.Um},Us:function(){return Rn},Vf:function(){return Nt},Vh:function(){return r.Vh},WI:function(){return mt},WL:function(){return r.WL},WY:function(){return Mt},Wl:function(){return Ct},Wm:function(){return fr},Wu:function(){return s},X3:function(){return r.X3},XI:function(){return r.XI},Xl:function(){return r.Xl},Xn:function(){return Ke},Y1:function(){return jr},Y3:function(){return _},Y8:function(){return xe},YP:function(){return me},YS:function(){return r.YS},Yq:function(){return nt},Yu:function(){return Tt},ZK:function(){return o},ZM:function(){return r.ZM},Zq:function(){return Qr},_:function(){return hr},_A:function(){return i._A},aZ:function(){return Le},b9:function(){return kt},bT:function(){return rt},bv:function(){return Ze},cE:function(){return r.cE},d1:function(){return it},dD:function(){return z},dG:function(){return Sr},dl:function(){return ze},dq:function(){return r.dq},ec:function(){return D},eq:function(){return si},f3:function(){return sn},h:function(){return Kr},hR:function(){return i.hR},i8:function(){return ri},iD:function(){return ir},iH:function(){return r.iH},ic:function(){return Je},j4:function(){return or},j5:function(){return i.j5},kC:function(){return i.kC},kq:function(){return br},l1:function(){return Rt},lA:function(){return sr},lR:function(){return Wn},m0:function(){return de},mW:function(){return R},mv:function(){return Ft},mx:function(){return vt},n4:function(){return ee},nJ:function(){return Ee},nK:function(){return Re},nQ:function(){return ni},nZ:function(){return r.nZ},oR:function(){return r.oR},of:function(){return Hr},p1:function(){return Ut},qG:function(){return Xn},qZ:function(){return nr},qb:function(){return M},qj:function(){return r.qj},qq:function(){return r.qq},ry:function(){return ai},sT:function(){return r.sT},se:function(){return je},sv:function(){return Yn},tT:function(){return Pt},uE:function(){return yr},u_:function(){return It},up:function(){return at},vl:function(){return tt},vs:function(){return i.vs},w5:function(){return W},wF:function(){return Xe},wg:function(){return Jn},wy:function(){return _e},xv:function(){return qn},yT:function(){return r.yT},yX:function(){return fe},zw:function(){return i.zw}});n(7658),n(1703);var r=n(4188),i=n(4887);function o(e,...t){}function s(e,t){}function a(e,t,n,r){let i;try{i=r?e(...r):e()}catch(o){c(o,t,n)}return i}function l(e,t,n,r){if((0,i.mf)(e)){const o=a(e,t,n,r);return o&&(0,i.tI)(o)&&o.catch((e=>{c(e,t,n)})),o}const o=[];for(let i=0;i<e.length;i++)o.push(l(e[i],t,n,r));return o}function c(e,t,n,r=!0){const i=t?t.vnode:null;if(t){let r=t.parent;const i=t.proxy,o=n;while(r){const t=r.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,i,o))return;r=r.parent}const s=t.appContext.config.errorHandler;if(s)return void a(s,null,10,[e,i,o])}u(e,n,i,r)}function u(e,t,n,r=!0){console.error(e)}let d=!1,h=!1;const f=[];let p=0;const m=[];let g=null,v=0;const y=Promise.resolve();let b=null;function _(e){const t=b||y;return e?t.then(this?e.bind(this):e):t}function w(e){let t=p+1,n=f.length;while(t<n){const r=t+n>>>1,i=A(f[r]);i<e?t=r+1:n=r}return t}function x(e){f.length&&f.includes(e,d&&e.allowRecurse?p+1:p)||(null==e.id?f.push(e):f.splice(w(e.id),0,e),S())}function S(){d||h||(h=!0,b=y.then(O))}function E(e){const t=f.indexOf(e);t>p&&f.splice(t,1)}function M(e){(0,i.kJ)(e)?m.push(...e):g&&g.includes(e,e.allowRecurse?v+1:v)||m.push(e),S()}function T(e,t=(d?p+1:0)){for(0;t<f.length;t++){const e=f[t];e&&e.pre&&(f.splice(t,1),t--,e())}}function C(e){if(m.length){const e=[...new Set(m)];if(m.length=0,g)return void g.push(...e);for(g=e,g.sort(((e,t)=>A(e)-A(t))),v=0;v<g.length;v++)g[v]();g=null,v=0}}const A=e=>null==e.id?1/0:e.id,k=(e,t)=>{const n=A(e)-A(t);if(0===n){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function O(e){h=!1,d=!0,f.sort(k);i.dG;try{for(p=0;p<f.length;p++){const e=f[p];e&&!1!==e.active&&a(e,null,14)}}finally{p=0,f.length=0,C(e),d=!1,b=null,(f.length||m.length)&&O(e)}}let R,P=[],L=!1;function D(e,t){var n,r;if(R=e,R)R.enabled=!0,P.forEach((({event:e,args:t})=>R.emit(e,...t))),P=[];else if("undefined"!==typeof window&&window.HTMLElement&&!(null==(r=null==(n=window.navigator)?void 0:n.userAgent)?void 0:r.includes("jsdom"))){const e=t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[];e.push((e=>{D(e,t)})),setTimeout((()=>{R||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,L=!0,P=[])}),3e3)}else L=!0,P=[]}function I(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||i.kT;let o=n;const s=t.startsWith("update:"),a=s&&t.slice(7);if(a&&a in r){const e=`${"modelValue"===a?"model":a}Modifiers`,{number:t,trim:s}=r[e]||i.kT;s&&(o=n.map((e=>(0,i.HD)(e)?e.trim():e))),t&&(o=n.map(i.h5))}let c;let u=r[c=(0,i.hR)(t)]||r[c=(0,i.hR)((0,i._A)(t))];!u&&s&&(u=r[c=(0,i.hR)((0,i.rs)(t))]),u&&l(u,e,6,o);const d=r[c+"Once"];if(d){if(e.emitted){if(e.emitted[c])return}else e.emitted={};e.emitted[c]=!0,l(d,e,6,o)}}function N(e,t,n=!1){const r=t.emitsCache,o=r.get(e);if(void 0!==o)return o;const s=e.emits;let a={},l=!1;if(!(0,i.mf)(e)){const r=e=>{const n=N(e,t,!0);n&&(l=!0,(0,i.l7)(a,n))};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}return s||l?((0,i.kJ)(s)?s.forEach((e=>a[e]=null)):(0,i.l7)(a,s),(0,i.Kn)(e)&&r.set(e,a),a):((0,i.Kn)(e)&&r.set(e,null),null)}function U(e,t){return!(!e||!(0,i.F7)(t))&&(t=t.slice(2).replace(/Once$/,""),(0,i.RI)(e,t[0].toLowerCase()+t.slice(1))||(0,i.RI)(e,(0,i.rs)(t))||(0,i.RI)(e,t))}let F=null,B=null;function V(e){const t=F;return F=e,B=e&&e.type.__scopeId||null,t}function z(e){B=e}function j(){B=null}const H=e=>W;function W(e,t=F,n){if(!t)return e;if(e._n)return e;const r=(...n)=>{r._d&&nr(-1);const i=V(t);let o;try{o=e(...n)}finally{V(i),r._d&&nr(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function G(e){const{type:t,vnode:n,proxy:r,withProxy:o,props:s,propsOptions:[a],slots:l,attrs:u,emit:d,render:h,renderCache:f,data:p,setupState:m,ctx:g,inheritAttrs:v}=e;let y,b;const _=V(e);try{if(4&n.shapeFlag){const e=o||r;y=_r(h.call(e,e,f,s,m,p,g)),b=u}else{const e=t;0,y=_r(e.length>1?e(s,{attrs:u,slots:l,emit:d}):e(s,null)),b=t.props?u:q(u)}}catch(x){Zn.length=0,c(x,e,1),y=fr(Yn)}let w=y;if(b&&!1!==v){const e=Object.keys(b),{shapeFlag:t}=w;e.length&&7&t&&(a&&e.some(i.tR)&&(b=Y(b,a)),w=gr(w,b))}return n.dirs&&(w=gr(w),w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&(w.transition=n.transition),y=w,V(_),y}function $(e){let t;for(let n=0;n<e.length;n++){const r=e[n];if(!sr(r))return;if(r.type!==Yn||"v-if"===r.children){if(t)return;t=r}}return t}const q=e=>{let t;for(const n in e)("class"===n||"style"===n||(0,i.F7)(n))&&((t||(t={}))[n]=e[n]);return t},Y=(e,t)=>{const n={};for(const r in e)(0,i.tR)(r)&&r.slice(9)in t||(n[r]=e[r]);return n};function X(e,t,n){const{props:r,children:i,component:o}=e,{props:s,children:a,patchFlag:l}=t,c=o.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&l>=0))return!(!i&&!a||a&&a.$stable)||r!==s&&(r?!s||Z(r,s,c):!!s);if(1024&l)return!0;if(16&l)return r?Z(r,s,c):!!s;if(8&l){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(s[n]!==r[n]&&!U(c,n))return!0}}return!1}function Z(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(t[o]!==e[o]&&!U(n,o))return!0}return!1}function K({vnode:e,parent:t},n){while(t&&t.subTree===e)(e=t.vnode).el=n,t=t.parent}const J=e=>e.__isSuspense,Q={name:"Suspense",__isSuspense:!0,process(e,t,n,r,i,o,s,a,l,c){null==e?ne(t,n,r,i,o,s,a,l,c):re(e,t,n,r,i,s,a,l,c)},hydrate:oe,create:ie,normalize:se},ee=Q;function te(e,t){const n=e.props&&e.props[t];(0,i.mf)(n)&&n()}function ne(e,t,n,r,i,o,s,a,l){const{p:c,o:{createElement:u}}=l,d=u("div"),h=e.suspense=ie(e,i,r,t,d,n,o,s,a,l);c(null,h.pendingBranch=e.ssContent,d,null,r,h,o,s),h.deps>0?(te(e,"onPending"),te(e,"onFallback"),c(null,e.ssFallback,t,n,r,null,o,s),ce(h,e.ssFallback)):h.resolve(!1,!0)}function re(e,t,n,r,i,o,s,a,{p:l,um:c,o:{createElement:u}}){const d=t.suspense=e.suspense;d.vnode=t,t.el=e.el;const h=t.ssContent,f=t.ssFallback,{activeBranch:p,pendingBranch:m,isInFallback:g,isHydrating:v}=d;if(m)d.pendingBranch=h,ar(h,m)?(l(m,h,d.hiddenContainer,null,i,d,o,s,a),d.deps<=0?d.resolve():g&&(l(p,f,n,r,i,null,o,s,a),ce(d,f))):(d.pendingId++,v?(d.isHydrating=!1,d.activeBranch=m):c(m,i,d),d.deps=0,d.effects.length=0,d.hiddenContainer=u("div"),g?(l(null,h,d.hiddenContainer,null,i,d,o,s,a),d.deps<=0?d.resolve():(l(p,f,n,r,i,null,o,s,a),ce(d,f))):p&&ar(h,p)?(l(p,h,n,r,i,d,o,s,a),d.resolve(!0)):(l(null,h,d.hiddenContainer,null,i,d,o,s,a),d.deps<=0&&d.resolve()));else if(p&&ar(h,p))l(p,h,n,r,i,d,o,s,a),ce(d,h);else if(te(t,"onPending"),d.pendingBranch=h,d.pendingId++,l(null,h,d.hiddenContainer,null,i,d,o,s,a),d.deps<=0)d.resolve();else{const{timeout:e,pendingId:t}=d;e>0?setTimeout((()=>{d.pendingId===t&&d.fallback(f)}),e):0===e&&d.fallback(f)}}function ie(e,t,n,r,o,s,a,l,u,d,h=!1){const{p:f,m:p,um:m,n:g,o:{parentNode:v,remove:y}}=d;let b;const _=ue(e);_&&(null==t?void 0:t.pendingBranch)&&(b=t.pendingId,t.deps++);const w=e.props?(0,i.He)(e.props.timeout):void 0;const x={vnode:e,parent:t,parentComponent:n,isSVG:a,container:r,hiddenContainer:o,anchor:s,deps:0,pendingId:0,timeout:"number"===typeof w?w:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:h,isUnmounted:!1,effects:[],resolve(e=!1,n=!1){const{vnode:r,activeBranch:i,pendingBranch:o,pendingId:s,effects:a,parentComponent:l,container:c}=x;if(x.isHydrating)x.isHydrating=!1;else if(!e){const e=i&&o.transition&&"out-in"===o.transition.mode;e&&(i.transition.afterLeave=()=>{s===x.pendingId&&p(o,c,t,0)});let{anchor:t}=x;i&&(t=g(i),m(i,l,x,!0)),e||p(o,c,t,0)}ce(x,o),x.pendingBranch=null,x.isInFallback=!1;let u=x.parent,d=!1;while(u){if(u.pendingBranch){u.effects.push(...a),d=!0;break}u=u.parent}d||M(a),x.effects=[],_&&t&&t.pendingBranch&&b===t.pendingId&&(t.deps--,0!==t.deps||n||t.resolve()),te(r,"onResolve")},fallback(e){if(!x.pendingBranch)return;const{vnode:t,activeBranch:n,parentComponent:r,container:i,isSVG:o}=x;te(t,"onFallback");const s=g(n),a=()=>{x.isInFallback&&(f(null,e,i,s,r,null,o,l,u),ce(x,e))},c=e.transition&&"out-in"===e.transition.mode;c&&(n.transition.afterLeave=a),x.isInFallback=!0,m(n,r,null,!0),c||a()},move(e,t,n){x.activeBranch&&p(x.activeBranch,e,t,n),x.container=e},next(){return x.activeBranch&&g(x.activeBranch)},registerDep(e,t){const n=!!x.pendingBranch;n&&x.deps++;const r=e.vnode.el;e.asyncDep.catch((t=>{c(t,e,0)})).then((i=>{if(e.isUnmounted||x.isUnmounted||x.pendingId!==e.suspenseId)return;e.asyncResolved=!0;const{vnode:o}=e;zr(e,i,!1),r&&(o.el=r);const s=!r&&e.subTree.el;t(e,o,v(r||e.subTree.el),r?null:g(e.subTree),x,a,u),s&&y(s),K(e,o.el),n&&0===--x.deps&&x.resolve()}))},unmount(e,t){x.isUnmounted=!0,x.activeBranch&&m(x.activeBranch,n,e,t),x.pendingBranch&&m(x.pendingBranch,n,e,t)}};return x}function oe(e,t,n,r,i,o,s,a,l){const c=t.suspense=ie(t,r,n,e.parentNode,document.createElement("div"),null,i,o,s,a,!0),u=l(e,c.pendingBranch=t.ssContent,n,c,o,s);return 0===c.deps&&c.resolve(!1,!0),u}function se(e){const{shapeFlag:t,children:n}=e,r=32&t;e.ssContent=ae(r?n.default:n),e.ssFallback=r?ae(n.fallback):fr(Yn)}function ae(e){let t;if((0,i.mf)(e)){const n=tr&&e._c;n&&(e._d=!1,Jn()),e=e(),n&&(e._d=!0,t=Kn,Qn())}if((0,i.kJ)(e)){const t=$(e);0,e=t}return e=_r(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter((t=>t!==e))),e}function le(e,t){t&&t.pendingBranch?(0,i.kJ)(e)?t.effects.push(...e):t.effects.push(e):M(e)}function ce(e,t){e.activeBranch=t;const{vnode:n,parentComponent:r}=e,i=n.el=t.el;r&&r.subTree===n&&(r.vnode.el=i,K(r,i))}function ue(e){var t;return null!=(null==(t=e.props)?void 0:t.suspensible)&&!1!==e.props.suspensible}function de(e,t){return ge(e,null,t)}function he(e,t){return ge(e,null,{flush:"post"})}function fe(e,t){return ge(e,null,{flush:"sync"})}const pe={};function me(e,t,n){return ge(e,t,n)}function ge(e,t,{immediate:n,deep:o,flush:s,onTrack:c,onTrigger:u}=i.kT){var d;const h=(0,r.nZ)()===(null==(d=Ar)?void 0:d.scope)?Ar:null;let f,p,m=!1,g=!1;if((0,r.dq)(e)?(f=()=>e.value,m=(0,r.yT)(e)):(0,r.PG)(e)?(f=()=>e,o=!0):(0,i.kJ)(e)?(g=!0,m=e.some((e=>(0,r.PG)(e)||(0,r.yT)(e))),f=()=>e.map((e=>(0,r.dq)(e)?e.value:(0,r.PG)(e)?be(e):(0,i.mf)(e)?a(e,h,2):void 0))):f=(0,i.mf)(e)?t?()=>a(e,h,2):()=>{if(!h||!h.isUnmounted)return p&&p(),l(e,h,3,[y])}:i.dG,t&&o){const e=f;f=()=>be(e())}let v,y=e=>{p=S.onStop=()=>{a(e,h,4)}};if(Fr){if(y=i.dG,t?n&&l(t,h,3,[f(),g?[]:void 0,y]):f(),"sync"!==s)return i.dG;{const e=Qr();v=e.__watcherHandles||(e.__watcherHandles=[])}}let b=g?new Array(e.length).fill(pe):pe;const _=()=>{if(S.active)if(t){const e=S.run();(o||m||(g?e.some(((e,t)=>(0,i.aU)(e,b[t]))):(0,i.aU)(e,b)))&&(p&&p(),l(t,h,3,[e,b===pe?void 0:g&&b[0]===pe?[]:b,y]),b=e)}else S.run()};let w;_.allowRecurse=!!t,"sync"===s?w=_:"post"===s?w=()=>On(_,h&&h.suspense):(_.pre=!0,h&&(_.id=h.uid),w=()=>x(_));const S=new r.qq(f,w);t?n?_():b=S.run():"post"===s?On(S.run.bind(S),h&&h.suspense):S.run();const E=()=>{S.stop(),h&&h.scope&&(0,i.Od)(h.scope.effects,S)};return v&&v.push(E),E}function ve(e,t,n){const r=this.proxy,o=(0,i.HD)(e)?e.includes(".")?ye(r,e):()=>r[e]:e.bind(r,r);let s;(0,i.mf)(t)?s=t:(s=t.handler,n=t);const a=Ar;Lr(this);const l=ge(o,s.bind(r),n);return a?Lr(a):Dr(),l}function ye(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}function be(e,t){if(!(0,i.Kn)(e)||e["__v_skip"])return e;if(t=t||new Set,t.has(e))return e;if(t.add(e),(0,r.dq)(e))be(e.value,t);else if((0,i.kJ)(e))for(let n=0;n<e.length;n++)be(e[n],t);else if((0,i.DM)(e)||(0,i._N)(e))e.forEach((e=>{be(e,t)}));else if((0,i.PO)(e))for(const n in e)be(e[n],t);return e}function _e(e,t){const n=F;if(null===n)return e;const r=qr(n)||n.proxy,o=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[e,n,a,l=i.kT]=t[s];e&&((0,i.mf)(e)&&(e={mounted:e,updated:e}),e.deep&&be(n),o.push({dir:e,instance:r,value:n,oldValue:void 0,arg:a,modifiers:l}))}return e}function we(e,t,n,i){const o=e.dirs,s=t&&t.dirs;for(let a=0;a<o.length;a++){const c=o[a];s&&(c.oldValue=s[a].value);let u=c.dir[i];u&&((0,r.Jd)(),l(u,n,8,[e.el,c,e,t]),(0,r.lk)())}}function xe(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ze((()=>{e.isMounted=!0})),Qe((()=>{e.isUnmounting=!0})),e}const Se=[Function,Array],Ee={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Se,onEnter:Se,onAfterEnter:Se,onEnterCancelled:Se,onBeforeLeave:Se,onLeave:Se,onAfterLeave:Se,onLeaveCancelled:Se,onBeforeAppear:Se,onAppear:Se,onAfterAppear:Se,onAppearCancelled:Se},Me={name:"BaseTransition",props:Ee,setup(e,{slots:t}){const n=kr(),i=xe();let o;return()=>{const s=t.default&&Pe(t.default(),!0);if(!s||!s.length)return;let a=s[0];if(s.length>1){let e=!1;for(const t of s)if(t.type!==Yn){0,a=t,e=!0;break}}const l=(0,r.IU)(e),{mode:c}=l;if(i.isLeaving)return ke(a);const u=Oe(a);if(!u)return ke(a);const d=Ae(u,l,i,n);Re(u,d);const h=n.subTree,f=h&&Oe(h);let p=!1;const{getTransitionKey:m}=u.type;if(m){const e=m();void 0===o?o=e:e!==o&&(o=e,p=!0)}if(f&&f.type!==Yn&&(!ar(u,f)||p)){const e=Ae(f,l,i,n);if(Re(f,e),"out-in"===c)return i.isLeaving=!0,e.afterLeave=()=>{i.isLeaving=!1,!1!==n.update.active&&n.update()},ke(a);"in-out"===c&&u.type!==Yn&&(e.delayLeave=(e,t,n)=>{const r=Ce(i,f);r[String(f.key)]=f,e._leaveCb=()=>{t(),e._leaveCb=void 0,delete d.delayedLeave},d.delayedLeave=n})}return a}}},Te=Me;function Ce(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function Ae(e,t,n,r){const{appear:o,mode:s,persisted:a=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:d,onEnterCancelled:h,onBeforeLeave:f,onLeave:p,onAfterLeave:m,onLeaveCancelled:g,onBeforeAppear:v,onAppear:y,onAfterAppear:b,onAppearCancelled:_}=t,w=String(e.key),x=Ce(n,e),S=(e,t)=>{e&&l(e,r,9,t)},E=(e,t)=>{const n=t[1];S(e,t),(0,i.kJ)(e)?e.every((e=>e.length<=1))&&n():e.length<=1&&n()},M={mode:s,persisted:a,beforeEnter(t){let r=c;if(!n.isMounted){if(!o)return;r=v||c}t._leaveCb&&t._leaveCb(!0);const i=x[w];i&&ar(e,i)&&i.el._leaveCb&&i.el._leaveCb(),S(r,[t])},enter(e){let t=u,r=d,i=h;if(!n.isMounted){if(!o)return;t=y||u,r=b||d,i=_||h}let s=!1;const a=e._enterCb=t=>{s||(s=!0,S(t?i:r,[e]),M.delayedLeave&&M.delayedLeave(),e._enterCb=void 0)};t?E(t,[e,a]):a()},leave(t,r){const i=String(e.key);if(t._enterCb&&t._enterCb(!0),n.isUnmounting)return r();S(f,[t]);let o=!1;const s=t._leaveCb=n=>{o||(o=!0,r(),S(n?g:m,[t]),t._leaveCb=void 0,x[i]===e&&delete x[i])};x[i]=e,p?E(p,[t,s]):s()},clone(e){return Ae(e,t,n,r)}};return M}function ke(e){if(Ue(e))return e=gr(e),e.children=null,e}function Oe(e){return Ue(e)?e.children?e.children[0]:void 0:e}function Re(e,t){6&e.shapeFlag&&e.component?Re(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Pe(e,t=!1,n){let r=[],i=0;for(let o=0;o<e.length;o++){let s=e[o];const a=null==n?s.key:String(n)+String(null!=s.key?s.key:o);s.type===$n?(128&s.patchFlag&&i++,r=r.concat(Pe(s.children,t,a))):(t||s.type!==Yn)&&r.push(null!=a?gr(s,{key:a}):s)}if(i>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}function Le(e,t){return(0,i.mf)(e)?(()=>(0,i.l7)({name:e.name},t,{setup:e}))():e}const De=e=>!!e.type.__asyncLoader;function Ie(e){(0,i.mf)(e)&&(e={loader:e});const{loader:t,loadingComponent:n,errorComponent:o,delay:s=200,timeout:a,suspensible:l=!0,onError:u}=e;let d,h=null,f=0;const p=()=>(f++,h=null,m()),m=()=>{let e;return h||(e=h=t().catch((e=>{if(e=e instanceof Error?e:new Error(String(e)),u)return new Promise(((t,n)=>{const r=()=>t(p()),i=()=>n(e);u(e,r,i,f+1)}));throw e})).then((t=>e!==h&&h?h:(t&&(t.__esModule||"Module"===t[Symbol.toStringTag])&&(t=t.default),d=t,t))))};return Le({name:"AsyncComponentWrapper",__asyncLoader:m,get __asyncResolved(){return d},setup(){const e=Ar;if(d)return()=>Ne(d,e);const t=t=>{h=null,c(t,e,13,!o)};if(l&&e.suspense||Fr)return m().then((t=>()=>Ne(t,e))).catch((e=>(t(e),()=>o?fr(o,{error:e}):null)));const i=(0,r.iH)(!1),u=(0,r.iH)(),f=(0,r.iH)(!!s);return s&&setTimeout((()=>{f.value=!1}),s),null!=a&&setTimeout((()=>{if(!i.value&&!u.value){const e=new Error(`Async component timed out after ${a}ms.`);t(e),u.value=e}}),a),m().then((()=>{i.value=!0,e.parent&&Ue(e.parent.vnode)&&x(e.parent.update)})).catch((e=>{t(e),u.value=e})),()=>i.value&&d?Ne(d,e):u.value&&o?fr(o,{error:u.value}):n&&!f.value?fr(n):void 0}})}function Ne(e,t){const{ref:n,props:r,children:i,ce:o}=t.vnode,s=fr(e,r,i);return s.ref=n,s.ce=o,delete t.vnode.ce,s}const Ue=e=>e.type.__isKeepAlive,Fe={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=kr(),r=n.ctx;if(!r.renderer)return()=>{const e=t.default&&t.default();return e&&1===e.length?e[0]:e};const o=new Map,s=new Set;let a=null;const l=n.suspense,{renderer:{p:c,m:u,um:d,o:{createElement:h}}}=r,f=h("div");function p(e){Ge(e),d(e,n,l,!0)}function m(e){o.forEach(((t,n)=>{const r=Yr(t.type);!r||e&&e(r)||g(n)}))}function g(e){const t=o.get(e);a&&ar(t,a)?a&&Ge(a):p(t),o.delete(e),s.delete(e)}r.activate=(e,t,n,r,o)=>{const s=e.component;u(e,t,n,0,l),c(s.vnode,e,t,n,s,l,r,e.slotScopeIds,o),On((()=>{s.isDeactivated=!1,s.a&&(0,i.ir)(s.a);const t=e.props&&e.props.onVnodeMounted;t&&Er(t,s.parent,e)}),l)},r.deactivate=e=>{const t=e.component;u(e,f,null,1,l),On((()=>{t.da&&(0,i.ir)(t.da);const n=e.props&&e.props.onVnodeUnmounted;n&&Er(n,t.parent,e),t.isDeactivated=!0}),l)},me((()=>[e.include,e.exclude]),(([e,t])=>{e&&m((t=>Ve(e,t))),t&&m((e=>!Ve(t,e)))}),{flush:"post",deep:!0});let v=null;const y=()=>{null!=v&&o.set(v,$e(n.subTree))};return Ze(y),Je(y),Qe((()=>{o.forEach((e=>{const{subTree:t,suspense:r}=n,i=$e(t);if(e.type!==i.type||e.key!==i.key)p(e);else{Ge(i);const e=i.component.da;e&&On(e,r)}}))})),()=>{if(v=null,!t.default)return null;const n=t.default(),r=n[0];if(n.length>1)return a=null,n;if(!sr(r)||!(4&r.shapeFlag)&&!(128&r.shapeFlag))return a=null,r;let i=$e(r);const l=i.type,c=Yr(De(i)?i.type.__asyncResolved||{}:l),{include:u,exclude:d,max:h}=e;if(u&&(!c||!Ve(u,c))||d&&c&&Ve(d,c))return a=i,r;const f=null==i.key?l:i.key,p=o.get(f);return i.el&&(i=gr(i),128&r.shapeFlag&&(r.ssContent=i)),v=f,p?(i.el=p.el,i.component=p.component,i.transition&&Re(i,i.transition),i.shapeFlag|=512,s.delete(f),s.add(f)):(s.add(f),h&&s.size>parseInt(h,10)&&g(s.values().next().value)),i.shapeFlag|=256,a=i,J(r.type)?r:i}}},Be=Fe;function Ve(e,t){return(0,i.kJ)(e)?e.some((e=>Ve(e,t))):(0,i.HD)(e)?e.split(",").includes(t):!!(0,i.Kj)(e)&&e.test(t)}function ze(e,t){He(e,"a",t)}function je(e,t){He(e,"da",t)}function He(e,t,n=Ar){const r=e.__wdc||(e.__wdc=()=>{let t=n;while(t){if(t.isDeactivated)return;t=t.parent}return e()});if(qe(t,r,n),n){let e=n.parent;while(e&&e.parent)Ue(e.parent.vnode)&&We(r,t,n,e),e=e.parent}}function We(e,t,n,r){const o=qe(t,e,r,!0);et((()=>{(0,i.Od)(r[t],o)}),n)}function Ge(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function $e(e){return 128&e.shapeFlag?e.ssContent:e}function qe(e,t,n=Ar,i=!1){if(n){const o=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...i)=>{if(n.isUnmounted)return;(0,r.Jd)(),Lr(n);const o=l(t,n,e,i);return Dr(),(0,r.lk)(),o});return i?o.unshift(s):o.push(s),s}}const Ye=e=>(t,n=Ar)=>(!Fr||"sp"===e)&&qe(e,((...e)=>t(...e)),n),Xe=Ye("bm"),Ze=Ye("m"),Ke=Ye("bu"),Je=Ye("u"),Qe=Ye("bum"),et=Ye("um"),tt=Ye("sp"),nt=Ye("rtg"),rt=Ye("rtc");function it(e,t=Ar){qe("ec",e,t)}const ot="components",st="directives";function at(e,t){return dt(ot,e,!0,t)||e}const lt=Symbol.for("v-ndc");function ct(e){return(0,i.HD)(e)?dt(ot,e,!1)||e:e||lt}function ut(e){return dt(st,e)}function dt(e,t,n=!0,r=!1){const o=F||Ar;if(o){const n=o.type;if(e===ot){const e=Yr(n,!1);if(e&&(e===t||e===(0,i._A)(t)||e===(0,i.kC)((0,i._A)(t))))return n}const s=ht(o[e]||n[e],t)||ht(o.appContext[e],t);return!s&&r?n:s}}function ht(e,t){return e&&(e[t]||e[(0,i._A)(t)]||e[(0,i.kC)((0,i._A)(t))])}function ft(e,t,n,r){let o;const s=n&&n[r];if((0,i.kJ)(e)||(0,i.HD)(e)){o=new Array(e.length);for(let n=0,r=e.length;n<r;n++)o[n]=t(e[n],n,void 0,s&&s[n])}else if("number"===typeof e){0,o=new Array(e);for(let n=0;n<e;n++)o[n]=t(n+1,n,void 0,s&&s[n])}else if((0,i.Kn)(e))if(e[Symbol.iterator])o=Array.from(e,((e,n)=>t(e,n,void 0,s&&s[n])));else{const n=Object.keys(e);o=new Array(n.length);for(let r=0,i=n.length;r<i;r++){const i=n[r];o[r]=t(e[i],i,r,s&&s[r])}}else o=[];return n&&(n[r]=o),o}function pt(e,t){for(let n=0;n<t.length;n++){const r=t[n];if((0,i.kJ)(r))for(let t=0;t<r.length;t++)e[r[t].name]=r[t].fn;else r&&(e[r.name]=r.key?(...e)=>{const t=r.fn(...e);return t&&(t.key=r.key),t}:r.fn)}return e}function mt(e,t,n={},r,i){if(F.isCE||F.parent&&De(F.parent)&&F.parent.isCE)return"default"!==t&&(n.name=t),fr("slot",n,r&&r());let o=e[t];o&&o._c&&(o._d=!1),Jn();const s=o&&gt(o(n)),a=or($n,{key:n.key||s&&s.key||`_${t}`},s||(r?r():[]),s&&1===e._?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),o&&o._c&&(o._d=!0),a}function gt(e){return e.some((e=>!sr(e)||e.type!==Yn&&!(e.type===$n&&!gt(e.children))))?e:null}function vt(e,t){const n={};for(const r in e)n[t&&/[A-Z]/.test(r)?`on:${r}`:(0,i.hR)(r)]=e[r];return n}const yt=e=>e?Ir(e)?qr(e)||e.proxy:yt(e.parent):null,bt=(0,i.l7)(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>yt(e.parent),$root:e=>yt(e.root),$emit:e=>e.emit,$options:e=>Wt(e),$forceUpdate:e=>e.f||(e.f=()=>x(e.update)),$nextTick:e=>e.n||(e.n=_.bind(e.proxy)),$watch:e=>ve.bind(e)}),_t=(e,t)=>e!==i.kT&&!e.__isScriptSetup&&(0,i.RI)(e,t),wt={get({_:e},t){const{ctx:n,setupState:o,data:s,props:a,accessCache:l,type:c,appContext:u}=e;let d;if("$"!==t[0]){const r=l[t];if(void 0!==r)switch(r){case 1:return o[t];case 2:return s[t];case 4:return n[t];case 3:return a[t]}else{if(_t(o,t))return l[t]=1,o[t];if(s!==i.kT&&(0,i.RI)(s,t))return l[t]=2,s[t];if((d=e.propsOptions[0])&&(0,i.RI)(d,t))return l[t]=3,a[t];if(n!==i.kT&&(0,i.RI)(n,t))return l[t]=4,n[t];Bt&&(l[t]=0)}}const h=bt[t];let f,p;return h?("$attrs"===t&&(0,r.j)(e,"get",t),h(e)):(f=c.__cssModules)&&(f=f[t])?f:n!==i.kT&&(0,i.RI)(n,t)?(l[t]=4,n[t]):(p=u.config.globalProperties,(0,i.RI)(p,t)?p[t]:void 0)},set({_:e},t,n){const{data:r,setupState:o,ctx:s}=e;return _t(o,t)?(o[t]=n,!0):r!==i.kT&&(0,i.RI)(r,t)?(r[t]=n,!0):!(0,i.RI)(e.props,t)&&(("$"!==t[0]||!(t.slice(1)in e))&&(s[t]=n,!0))},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:o,propsOptions:s}},a){let l;return!!n[a]||e!==i.kT&&(0,i.RI)(e,a)||_t(t,a)||(l=s[0])&&(0,i.RI)(l,a)||(0,i.RI)(r,a)||(0,i.RI)(bt,a)||(0,i.RI)(o.config.globalProperties,a)},defineProperty(e,t,n){return null!=n.get?e._.accessCache[t]=0:(0,i.RI)(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};const xt=(0,i.l7)({},wt,{get(e,t){if(t!==Symbol.unscopables)return wt.get(e,t,e)},has(e,t){const n="_"!==t[0]&&!(0,i.e1)(t);return n}});function St(){return null}function Et(){return null}function Mt(e){0}function Tt(e){0}function Ct(){return null}function At(){0}function kt(e,t){return null}function Ot(){return Lt().slots}function Rt(){return Lt().attrs}function Pt(e,t,n){const i=kr();if(n&&n.local){const n=(0,r.iH)(e[t]);return me((()=>e[t]),(e=>n.value=e)),me(n,(n=>{n!==e[t]&&i.emit(`update:${t}`,n)})),n}return{__v_isRef:!0,get value(){return e[t]},set value(e){i.emit(`update:${t}`,e)}}}function Lt(){const e=kr();return e.setupContext||(e.setupContext=$r(e))}function Dt(e){return(0,i.kJ)(e)?e.reduce(((e,t)=>(e[t]=null,e)),{}):e}function It(e,t){const n=Dt(e);for(const r in t){if(r.startsWith("__skip"))continue;let e=n[r];e?(0,i.kJ)(e)||(0,i.mf)(e)?e=n[r]={type:e,default:t[r]}:e.default=t[r]:null===e&&(e=n[r]={default:t[r]}),e&&t[`__skip_${r}`]&&(e.skipFactory=!0)}return n}function Nt(e,t){return e&&t?(0,i.kJ)(e)&&(0,i.kJ)(t)?e.concat(t):(0,i.l7)({},Dt(e),Dt(t)):e||t}function Ut(e,t){const n={};for(const r in e)t.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>e[r]});return n}function Ft(e){const t=kr();let n=e();return Dr(),(0,i.tI)(n)&&(n=n.catch((e=>{throw Lr(t),e}))),[n,()=>Lr(t)]}let Bt=!0;function Vt(e){const t=Wt(e),n=e.proxy,o=e.ctx;Bt=!1,t.beforeCreate&&jt(t.beforeCreate,e,"bc");const{data:s,computed:a,methods:l,watch:c,provide:u,inject:d,created:h,beforeMount:f,mounted:p,beforeUpdate:m,updated:g,activated:v,deactivated:y,beforeDestroy:b,beforeUnmount:_,destroyed:w,unmounted:x,render:S,renderTracked:E,renderTriggered:M,errorCaptured:T,serverPrefetch:C,expose:A,inheritAttrs:k,components:O,directives:R,filters:P}=t,L=null;if(d&&zt(d,o,L),l)for(const r in l){const e=l[r];(0,i.mf)(e)&&(o[r]=e.bind(n))}if(s){0;const t=s.call(n,n);0,(0,i.Kn)(t)&&(e.data=(0,r.qj)(t))}if(Bt=!0,a)for(const r in a){const e=a[r],t=(0,i.mf)(e)?e.bind(n,n):(0,i.mf)(e.get)?e.get.bind(n,n):i.dG;0;const s=!(0,i.mf)(e)&&(0,i.mf)(e.set)?e.set.bind(n):i.dG,l=Zr({get:t,set:s});Object.defineProperty(o,r,{enumerable:!0,configurable:!0,get:()=>l.value,set:e=>l.value=e})}if(c)for(const r in c)Ht(c[r],o,n,r);if(u){const e=(0,i.mf)(u)?u.call(n):u;Reflect.ownKeys(e).forEach((t=>{on(t,e[t])}))}function D(e,t){(0,i.kJ)(t)?t.forEach((t=>e(t.bind(n)))):t&&e(t.bind(n))}if(h&&jt(h,e,"c"),D(Xe,f),D(Ze,p),D(Ke,m),D(Je,g),D(ze,v),D(je,y),D(it,T),D(rt,E),D(nt,M),D(Qe,_),D(et,x),D(tt,C),(0,i.kJ)(A))if(A.length){const t=e.exposed||(e.exposed={});A.forEach((e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})}))}else e.exposed||(e.exposed={});S&&e.render===i.dG&&(e.render=S),null!=k&&(e.inheritAttrs=k),O&&(e.components=O),R&&(e.directives=R)}function zt(e,t,n=i.dG){(0,i.kJ)(e)&&(e=Xt(e));for(const o in e){const n=e[o];let s;s=(0,i.Kn)(n)?"default"in n?sn(n.from||o,n.default,!0):sn(n.from||o):sn(n),(0,r.dq)(s)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>s.value,set:e=>s.value=e}):t[o]=s}}function jt(e,t,n){l((0,i.kJ)(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,n)}function Ht(e,t,n,r){const o=r.includes(".")?ye(n,r):()=>n[r];if((0,i.HD)(e)){const n=t[e];(0,i.mf)(n)&&me(o,n)}else if((0,i.mf)(e))me(o,e.bind(n));else if((0,i.Kn)(e))if((0,i.kJ)(e))e.forEach((e=>Ht(e,t,n,r)));else{const r=(0,i.mf)(e.handler)?e.handler.bind(n):t[e.handler];(0,i.mf)(r)&&me(o,r,e)}else 0}function Wt(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:o,optionsCache:s,config:{optionMergeStrategies:a}}=e.appContext,l=s.get(t);let c;return l?c=l:o.length||n||r?(c={},o.length&&o.forEach((e=>Gt(c,e,a,!0))),Gt(c,t,a)):c=t,(0,i.Kn)(t)&&s.set(t,c),c}function Gt(e,t,n,r=!1){const{mixins:i,extends:o}=t;o&&Gt(e,o,n,!0),i&&i.forEach((t=>Gt(e,t,n,!0)));for(const s in t)if(r&&"expose"===s);else{const r=$t[s]||n&&n[s];e[s]=r?r(e[s],t[s]):t[s]}return e}const $t={data:qt,props:Jt,emits:Jt,methods:Kt,computed:Kt,beforeCreate:Zt,created:Zt,beforeMount:Zt,mounted:Zt,beforeUpdate:Zt,updated:Zt,beforeDestroy:Zt,beforeUnmount:Zt,destroyed:Zt,unmounted:Zt,activated:Zt,deactivated:Zt,errorCaptured:Zt,serverPrefetch:Zt,components:Kt,directives:Kt,watch:Qt,provide:qt,inject:Yt};function qt(e,t){return t?e?function(){return(0,i.l7)((0,i.mf)(e)?e.call(this,this):e,(0,i.mf)(t)?t.call(this,this):t)}:t:e}function Yt(e,t){return Kt(Xt(e),Xt(t))}function Xt(e){if((0,i.kJ)(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Zt(e,t){return e?[...new Set([].concat(e,t))]:t}function Kt(e,t){return e?(0,i.l7)(Object.create(null),e,t):t}function Jt(e,t){return e?(0,i.kJ)(e)&&(0,i.kJ)(t)?[...new Set([...e,...t])]:(0,i.l7)(Object.create(null),Dt(e),Dt(null!=t?t:{})):t}function Qt(e,t){if(!e)return t;if(!t)return e;const n=(0,i.l7)(Object.create(null),e);for(const r in t)n[r]=Zt(e[r],t[r]);return n}function en(){return{app:null,config:{isNativeTag:i.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let tn=0;function nn(e,t){return function(n,r=null){(0,i.mf)(n)||(n=(0,i.l7)({},n)),null==r||(0,i.Kn)(r)||(r=null);const o=en();const s=new Set;let a=!1;const l=o.app={_uid:tn++,_component:n,_props:r,_container:null,_context:o,_instance:null,version:ri,get config(){return o.config},set config(e){0},use(e,...t){return s.has(e)||(e&&(0,i.mf)(e.install)?(s.add(e),e.install(l,...t)):(0,i.mf)(e)&&(s.add(e),e(l,...t))),l},mixin(e){return o.mixins.includes(e)||o.mixins.push(e),l},component(e,t){return t?(o.components[e]=t,l):o.components[e]},directive(e,t){return t?(o.directives[e]=t,l):o.directives[e]},mount(i,s,c){if(!a){0;const u=fr(n,r);return u.appContext=o,s&&t?t(u,i):e(u,i,c),a=!0,l._container=i,i.__vue_app__=l,qr(u.component)||u.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(e,t){return o.provides[e]=t,l},runWithContext(e){rn=l;try{return e()}finally{rn=null}}};return l}}let rn=null;function on(e,t){if(Ar){let n=Ar.provides;const r=Ar.parent&&Ar.parent.provides;r===n&&(n=Ar.provides=Object.create(r)),n[e]=t}else 0}function sn(e,t,n=!1){const r=Ar||F;if(r||rn){const o=r?null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:rn._context.provides;if(o&&e in o)return o[e];if(arguments.length>1)return n&&(0,i.mf)(t)?t.call(r&&r.proxy):t}else 0}function an(){return!!(Ar||F||rn)}function ln(e,t,n,o=!1){const s={},a={};(0,i.Nj)(a,cr,1),e.propsDefaults=Object.create(null),un(e,t,s,a);for(const r in e.propsOptions[0])r in s||(s[r]=void 0);n?e.props=o?s:(0,r.Um)(s):e.type.props?e.props=s:e.props=a,e.attrs=a}function cn(e,t,n,o){const{props:s,attrs:a,vnode:{patchFlag:l}}=e,c=(0,r.IU)(s),[u]=e.propsOptions;let d=!1;if(!(o||l>0)||16&l){let r;un(e,t,s,a)&&(d=!0);for(const o in c)t&&((0,i.RI)(t,o)||(r=(0,i.rs)(o))!==o&&(0,i.RI)(t,r))||(u?!n||void 0===n[o]&&void 0===n[r]||(s[o]=dn(u,c,o,void 0,e,!0)):delete s[o]);if(a!==c)for(const e in a)t&&(0,i.RI)(t,e)||(delete a[e],d=!0)}else if(8&l){const n=e.vnode.dynamicProps;for(let r=0;r<n.length;r++){let o=n[r];if(U(e.emitsOptions,o))continue;const l=t[o];if(u)if((0,i.RI)(a,o))l!==a[o]&&(a[o]=l,d=!0);else{const t=(0,i._A)(o);s[t]=dn(u,c,t,l,e,!1)}else l!==a[o]&&(a[o]=l,d=!0)}}d&&(0,r.X$)(e,"set","$attrs")}function un(e,t,n,o){const[s,a]=e.propsOptions;let l,c=!1;if(t)for(let r in t){if((0,i.Gg)(r))continue;const u=t[r];let d;s&&(0,i.RI)(s,d=(0,i._A)(r))?a&&a.includes(d)?(l||(l={}))[d]=u:n[d]=u:U(e.emitsOptions,r)||r in o&&u===o[r]||(o[r]=u,c=!0)}if(a){const t=(0,r.IU)(n),o=l||i.kT;for(let r=0;r<a.length;r++){const l=a[r];n[l]=dn(s,t,l,o[l],e,!(0,i.RI)(o,l))}}return c}function dn(e,t,n,r,o,s){const a=e[n];if(null!=a){const e=(0,i.RI)(a,"default");if(e&&void 0===r){const e=a.default;if(a.type!==Function&&!a.skipFactory&&(0,i.mf)(e)){const{propsDefaults:i}=o;n in i?r=i[n]:(Lr(o),r=i[n]=e.call(null,t),Dr())}else r=e}a[0]&&(s&&!e?r=!1:!a[1]||""!==r&&r!==(0,i.rs)(n)||(r=!0))}return r}function hn(e,t,n=!1){const r=t.propsCache,o=r.get(e);if(o)return o;const s=e.props,a={},l=[];let c=!1;if(!(0,i.mf)(e)){const r=e=>{c=!0;const[n,r]=hn(e,t,!0);(0,i.l7)(a,n),r&&l.push(...r)};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}if(!s&&!c)return(0,i.Kn)(e)&&r.set(e,i.Z6),i.Z6;if((0,i.kJ)(s))for(let d=0;d<s.length;d++){0;const e=(0,i._A)(s[d]);fn(e)&&(a[e]=i.kT)}else if(s){0;for(const e in s){const t=(0,i._A)(e);if(fn(t)){const n=s[e],r=a[t]=(0,i.kJ)(n)||(0,i.mf)(n)?{type:n}:(0,i.l7)({},n);if(r){const e=gn(Boolean,r.type),n=gn(String,r.type);r[0]=e>-1,r[1]=n<0||e<n,(e>-1||(0,i.RI)(r,"default"))&&l.push(t)}}}}const u=[a,l];return(0,i.Kn)(e)&&r.set(e,u),u}function fn(e){return"$"!==e[0]}function pn(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:null===e?"null":""}function mn(e,t){return pn(e)===pn(t)}function gn(e,t){return(0,i.kJ)(t)?t.findIndex((t=>mn(t,e))):(0,i.mf)(t)&&mn(t,e)?0:-1}const vn=e=>"_"===e[0]||"$stable"===e,yn=e=>(0,i.kJ)(e)?e.map(_r):[_r(e)],bn=(e,t,n)=>{if(t._n)return t;const r=W(((...e)=>yn(t(...e))),n);return r._c=!1,r},_n=(e,t,n)=>{const r=e._ctx;for(const o in e){if(vn(o))continue;const n=e[o];if((0,i.mf)(n))t[o]=bn(o,n,r);else if(null!=n){0;const e=yn(n);t[o]=()=>e}}},wn=(e,t)=>{const n=yn(t);e.slots.default=()=>n},xn=(e,t)=>{if(32&e.vnode.shapeFlag){const n=t._;n?(e.slots=(0,r.IU)(t),(0,i.Nj)(t,"_",n)):_n(t,e.slots={})}else e.slots={},t&&wn(e,t);(0,i.Nj)(e.slots,cr,1)},Sn=(e,t,n)=>{const{vnode:r,slots:o}=e;let s=!0,a=i.kT;if(32&r.shapeFlag){const e=t._;e?n&&1===e?s=!1:((0,i.l7)(o,t),n||1!==e||delete o._):(s=!t.$stable,_n(t,o)),a=t}else t&&(wn(e,t),a={default:1});if(s)for(const i in o)vn(i)||i in a||delete o[i]};function En(e,t,n,o,s=!1){if((0,i.kJ)(e))return void e.forEach(((e,r)=>En(e,t&&((0,i.kJ)(t)?t[r]:t),n,o,s)));if(De(o)&&!s)return;const l=4&o.shapeFlag?qr(o.component)||o.component.proxy:o.el,c=s?null:l,{i:u,r:d}=e;const h=t&&t.r,f=u.refs===i.kT?u.refs={}:u.refs,p=u.setupState;if(null!=h&&h!==d&&((0,i.HD)(h)?(f[h]=null,(0,i.RI)(p,h)&&(p[h]=null)):(0,r.dq)(h)&&(h.value=null)),(0,i.mf)(d))a(d,u,12,[c,f]);else{const t=(0,i.HD)(d),o=(0,r.dq)(d);if(t||o){const r=()=>{if(e.f){const n=t?(0,i.RI)(p,d)?p[d]:f[d]:d.value;s?(0,i.kJ)(n)&&(0,i.Od)(n,l):(0,i.kJ)(n)?n.includes(l)||n.push(l):t?(f[d]=[l],(0,i.RI)(p,d)&&(p[d]=f[d])):(d.value=[l],e.k&&(f[e.k]=d.value))}else t?(f[d]=c,(0,i.RI)(p,d)&&(p[d]=c)):o&&(d.value=c,e.k&&(f[e.k]=c))};c?(r.id=-1,On(r,n)):r()}else 0}}let Mn=!1;const Tn=e=>/svg/.test(e.namespaceURI)&&"foreignObject"!==e.tagName,Cn=e=>8===e.nodeType;function An(e){const{mt:t,p:n,o:{patchProp:r,createText:o,nextSibling:s,parentNode:a,remove:l,insert:c,createComment:u}}=e,d=(e,t)=>{if(!t.hasChildNodes())return n(null,e,t),C(),void(t._vnode=e);Mn=!1,h(t.firstChild,e,null,null,null),C(),t._vnode=e,Mn&&console.error("Hydration completed but contains mismatches.")},h=(n,r,i,l,u,d=!1)=>{const y=Cn(n)&&"["===n.data,b=()=>g(n,r,i,l,u,y),{type:_,ref:w,shapeFlag:x,patchFlag:S}=r;let E=n.nodeType;r.el=n,-2===S&&(d=!1,r.dynamicChildren=null);let M=null;switch(_){case qn:3!==E?""===r.children?(c(r.el=o(""),a(n),n),M=n):M=b():(n.data!==r.children&&(Mn=!0,n.data=r.children),M=s(n));break;case Yn:M=8!==E||y?b():s(n);break;case Xn:if(y&&(n=s(n),E=n.nodeType),1===E||3===E){M=n;const e=!r.children.length;for(let t=0;t<r.staticCount;t++)e&&(r.children+=1===M.nodeType?M.outerHTML:M.data),t===r.staticCount-1&&(r.anchor=M),M=s(M);return y?s(M):M}b();break;case $n:M=y?m(n,r,i,l,u,d):b();break;default:if(1&x)M=1!==E||r.type.toLowerCase()!==n.tagName.toLowerCase()?b():f(n,r,i,l,u,d);else if(6&x){r.slotScopeIds=u;const e=a(n);if(t(r,e,null,i,l,Tn(e),d),M=y?v(n):s(n),M&&Cn(M)&&"teleport end"===M.data&&(M=s(M)),De(r)){let t;y?(t=fr($n),t.anchor=M?M.previousSibling:e.lastChild):t=3===n.nodeType?vr(""):fr("div"),t.el=n,r.component.subTree=t}}else 64&x?M=8!==E?b():r.type.hydrate(n,r,i,l,u,d,e,p):128&x&&(M=r.type.hydrate(n,r,i,l,Tn(a(n)),u,d,e,h))}return null!=w&&En(w,null,l,r),M},f=(e,t,n,o,s,a)=>{a=a||!!t.dynamicChildren;const{type:c,props:u,patchFlag:d,shapeFlag:h,dirs:f}=t,m="input"===c&&f||"option"===c;if(m||-1!==d){if(f&&we(t,null,n,"created"),u)if(m||!a||48&d)for(const t in u)(m&&t.endsWith("value")||(0,i.F7)(t)&&!(0,i.Gg)(t))&&r(e,t,null,u[t],!1,void 0,n);else u.onClick&&r(e,"onClick",null,u.onClick,!1,void 0,n);let c;if((c=u&&u.onVnodeBeforeMount)&&Er(c,n,t),f&&we(t,null,n,"beforeMount"),((c=u&&u.onVnodeMounted)||f)&&le((()=>{c&&Er(c,n,t),f&&we(t,null,n,"mounted")}),o),16&h&&(!u||!u.innerHTML&&!u.textContent)){let r=p(e.firstChild,t,e,n,o,s,a);while(r){Mn=!0;const e=r;r=r.nextSibling,l(e)}}else 8&h&&e.textContent!==t.children&&(Mn=!0,e.textContent=t.children)}return e.nextSibling},p=(e,t,r,i,o,s,a)=>{a=a||!!t.dynamicChildren;const l=t.children,c=l.length;for(let u=0;u<c;u++){const t=a?l[u]:l[u]=_r(l[u]);if(e)e=h(e,t,i,o,s,a);else{if(t.type===qn&&!t.children)continue;Mn=!0,n(null,t,r,null,i,o,Tn(r),s)}}return e},m=(e,t,n,r,i,o)=>{const{slotScopeIds:l}=t;l&&(i=i?i.concat(l):l);const d=a(e),h=p(s(e),t,d,n,r,i,o);return h&&Cn(h)&&"]"===h.data?s(t.anchor=h):(Mn=!0,c(t.anchor=u("]"),d,h),h)},g=(e,t,r,i,o,c)=>{if(Mn=!0,t.el=null,c){const t=v(e);while(1){const n=s(e);if(!n||n===t)break;l(n)}}const u=s(e),d=a(e);return l(e),n(null,t,d,u,r,i,Tn(d),o),u},v=e=>{let t=0;while(e)if(e=s(e),e&&Cn(e)&&("["===e.data&&t++,"]"===e.data)){if(0===t)return s(e);t--}return e};return[d,h]}function kn(){}const On=le;function Rn(e){return Ln(e)}function Pn(e){return Ln(e,An)}function Ln(e,t){kn();const n=(0,i.E9)();n.__VUE__=!0;const{insert:o,remove:s,patchProp:a,createElement:l,createText:c,createComment:u,setText:d,setElementText:h,parentNode:f,nextSibling:p,setScopeId:m=i.dG,insertStaticContent:g}=e,v=(e,t,n,r=null,i=null,o=null,s=!1,a=null,l=!!t.dynamicChildren)=>{if(e===t)return;e&&!ar(e,t)&&(r=J(e),W(e,i,o,!0),e=null),-2===t.patchFlag&&(l=!1,t.dynamicChildren=null);const{type:c,ref:u,shapeFlag:d}=t;switch(c){case qn:y(e,t,n,r);break;case Yn:b(e,t,n,r);break;case Xn:null==e&&_(t,n,r,s);break;case $n:D(e,t,n,r,i,o,s,a,l);break;default:1&d?M(e,t,n,r,i,o,s,a,l):6&d?I(e,t,n,r,i,o,s,a,l):(64&d||128&d)&&c.process(e,t,n,r,i,o,s,a,l,ee)}null!=u&&i&&En(u,e&&e.ref,o,t||e,!t)},y=(e,t,n,r)=>{if(null==e)o(t.el=c(t.children),n,r);else{const n=t.el=e.el;t.children!==e.children&&d(n,t.children)}},b=(e,t,n,r)=>{null==e?o(t.el=u(t.children||""),n,r):t.el=e.el},_=(e,t,n,r)=>{[e.el,e.anchor]=g(e.children,t,n,r,e.el,e.anchor)},w=({el:e,anchor:t},n,r)=>{let i;while(e&&e!==t)i=p(e),o(e,n,r),e=i;o(t,n,r)},S=({el:e,anchor:t})=>{let n;while(e&&e!==t)n=p(e),s(e),e=n;s(t)},M=(e,t,n,r,i,o,s,a,l)=>{s=s||"svg"===t.type,null==e?A(t,n,r,i,o,s,a,l):R(e,t,i,o,s,a,l)},A=(e,t,n,r,s,c,u,d)=>{let f,p;const{type:m,props:g,shapeFlag:v,transition:y,dirs:b}=e;if(f=e.el=l(e.type,c,g&&g.is,g),8&v?h(f,e.children):16&v&&O(e.children,f,null,r,s,c&&"foreignObject"!==m,u,d),b&&we(e,null,r,"created"),k(f,e,e.scopeId,u,r),g){for(const t in g)"value"===t||(0,i.Gg)(t)||a(f,t,null,g[t],c,e.children,r,s,Z);"value"in g&&a(f,"value",null,g.value),(p=g.onVnodeBeforeMount)&&Er(p,r,e)}b&&we(e,null,r,"beforeMount");const _=(!s||s&&!s.pendingBranch)&&y&&!y.persisted;_&&y.beforeEnter(f),o(f,t,n),((p=g&&g.onVnodeMounted)||_||b)&&On((()=>{p&&Er(p,r,e),_&&y.enter(f),b&&we(e,null,r,"mounted")}),s)},k=(e,t,n,r,i)=>{if(n&&m(e,n),r)for(let o=0;o<r.length;o++)m(e,r[o]);if(i){let n=i.subTree;if(t===n){const t=i.vnode;k(e,t,t.scopeId,t.slotScopeIds,i.parent)}}},O=(e,t,n,r,i,o,s,a,l=0)=>{for(let c=l;c<e.length;c++){const l=e[c]=a?wr(e[c]):_r(e[c]);v(null,l,t,n,r,i,o,s,a)}},R=(e,t,n,r,o,s,l)=>{const c=t.el=e.el;let{patchFlag:u,dynamicChildren:d,dirs:f}=t;u|=16&e.patchFlag;const p=e.props||i.kT,m=t.props||i.kT;let g;n&&Dn(n,!1),(g=m.onVnodeBeforeUpdate)&&Er(g,n,t,e),f&&we(t,e,n,"beforeUpdate"),n&&Dn(n,!0);const v=o&&"foreignObject"!==t.type;if(d?P(e.dynamicChildren,d,c,n,r,v,s):l||V(e,t,c,null,n,r,v,s,!1),u>0){if(16&u)L(c,t,p,m,n,r,o);else if(2&u&&p.class!==m.class&&a(c,"class",null,m.class,o),4&u&&a(c,"style",p.style,m.style,o),8&u){const i=t.dynamicProps;for(let t=0;t<i.length;t++){const s=i[t],l=p[s],u=m[s];u===l&&"value"!==s||a(c,s,l,u,o,e.children,n,r,Z)}}1&u&&e.children!==t.children&&h(c,t.children)}else l||null!=d||L(c,t,p,m,n,r,o);((g=m.onVnodeUpdated)||f)&&On((()=>{g&&Er(g,n,t,e),f&&we(t,e,n,"updated")}),r)},P=(e,t,n,r,i,o,s)=>{for(let a=0;a<t.length;a++){const l=e[a],c=t[a],u=l.el&&(l.type===$n||!ar(l,c)||70&l.shapeFlag)?f(l.el):n;v(l,c,u,null,r,i,o,s,!0)}},L=(e,t,n,r,o,s,l)=>{if(n!==r){if(n!==i.kT)for(const c in n)(0,i.Gg)(c)||c in r||a(e,c,n[c],null,l,t.children,o,s,Z);for(const c in r){if((0,i.Gg)(c))continue;const u=r[c],d=n[c];u!==d&&"value"!==c&&a(e,c,d,u,l,t.children,o,s,Z)}"value"in r&&a(e,"value",n.value,r.value)}},D=(e,t,n,r,i,s,a,l,u)=>{const d=t.el=e?e.el:c(""),h=t.anchor=e?e.anchor:c("");let{patchFlag:f,dynamicChildren:p,slotScopeIds:m}=t;m&&(l=l?l.concat(m):m),null==e?(o(d,n,r),o(h,n,r),O(t.children,n,h,i,s,a,l,u)):f>0&&64&f&&p&&e.dynamicChildren?(P(e.dynamicChildren,p,n,i,s,a,l),(null!=t.key||i&&t===i.subTree)&&In(e,t,!0)):V(e,t,n,h,i,s,a,l,u)},I=(e,t,n,r,i,o,s,a,l)=>{t.slotScopeIds=a,null==e?512&t.shapeFlag?i.ctx.activate(t,n,r,s,l):N(t,n,r,i,o,s,l):U(e,t,l)},N=(e,t,n,r,i,o,s)=>{const a=e.component=Cr(e,r,i);if(Ue(e)&&(a.ctx.renderer=ee),Br(a),a.asyncDep){if(i&&i.registerDep(a,F),!e.el){const e=a.subTree=fr(Yn);b(null,e,t,n)}}else F(a,e,t,n,i,o,s)},U=(e,t,n)=>{const r=t.component=e.component;if(X(e,t,n)){if(r.asyncDep&&!r.asyncResolved)return void B(r,t,n);r.next=t,E(r.update),r.update()}else t.el=e.el,r.vnode=t},F=(e,t,n,o,s,a,l)=>{const c=()=>{if(e.isMounted){let t,{next:n,bu:r,u:o,parent:c,vnode:u}=e,d=n;0,Dn(e,!1),n?(n.el=u.el,B(e,n,l)):n=u,r&&(0,i.ir)(r),(t=n.props&&n.props.onVnodeBeforeUpdate)&&Er(t,c,n,u),Dn(e,!0);const h=G(e);0;const p=e.subTree;e.subTree=h,v(p,h,f(p.el),J(p),e,s,a),n.el=h.el,null===d&&K(e,h.el),o&&On(o,s),(t=n.props&&n.props.onVnodeUpdated)&&On((()=>Er(t,c,n,u)),s)}else{let r;const{el:l,props:c}=t,{bm:u,m:d,parent:h}=e,f=De(t);if(Dn(e,!1),u&&(0,i.ir)(u),!f&&(r=c&&c.onVnodeBeforeMount)&&Er(r,h,t),Dn(e,!0),l&&ne){const n=()=>{e.subTree=G(e),ne(l,e.subTree,e,s,null)};f?t.type.__asyncLoader().then((()=>!e.isUnmounted&&n())):n()}else{0;const r=e.subTree=G(e);0,v(null,r,n,o,e,s,a),t.el=r.el}if(d&&On(d,s),!f&&(r=c&&c.onVnodeMounted)){const e=t;On((()=>Er(r,h,e)),s)}(256&t.shapeFlag||h&&De(h.vnode)&&256&h.vnode.shapeFlag)&&e.a&&On(e.a,s),e.isMounted=!0,t=n=o=null}},u=e.effect=new r.qq(c,(()=>x(d)),e.scope),d=e.update=()=>u.run();d.id=e.uid,Dn(e,!0),d()},B=(e,t,n)=>{t.component=e;const i=e.vnode.props;e.vnode=t,e.next=null,cn(e,t.props,i,n),Sn(e,t.children,n),(0,r.Jd)(),T(),(0,r.lk)()},V=(e,t,n,r,i,o,s,a,l=!1)=>{const c=e&&e.children,u=e?e.shapeFlag:0,d=t.children,{patchFlag:f,shapeFlag:p}=t;if(f>0){if(128&f)return void j(c,d,n,r,i,o,s,a,l);if(256&f)return void z(c,d,n,r,i,o,s,a,l)}8&p?(16&u&&Z(c,i,o),d!==c&&h(n,d)):16&u?16&p?j(c,d,n,r,i,o,s,a,l):Z(c,i,o,!0):(8&u&&h(n,""),16&p&&O(d,n,r,i,o,s,a,l))},z=(e,t,n,r,o,s,a,l,c)=>{e=e||i.Z6,t=t||i.Z6;const u=e.length,d=t.length,h=Math.min(u,d);let f;for(f=0;f<h;f++){const r=t[f]=c?wr(t[f]):_r(t[f]);v(e[f],r,n,null,o,s,a,l,c)}u>d?Z(e,o,s,!0,!1,h):O(t,n,r,o,s,a,l,c,h)},j=(e,t,n,r,o,s,a,l,c)=>{let u=0;const d=t.length;let h=e.length-1,f=d-1;while(u<=h&&u<=f){const r=e[u],i=t[u]=c?wr(t[u]):_r(t[u]);if(!ar(r,i))break;v(r,i,n,null,o,s,a,l,c),u++}while(u<=h&&u<=f){const r=e[h],i=t[f]=c?wr(t[f]):_r(t[f]);if(!ar(r,i))break;v(r,i,n,null,o,s,a,l,c),h--,f--}if(u>h){if(u<=f){const e=f+1,i=e<d?t[e].el:r;while(u<=f)v(null,t[u]=c?wr(t[u]):_r(t[u]),n,i,o,s,a,l,c),u++}}else if(u>f)while(u<=h)W(e[u],o,s,!0),u++;else{const p=u,m=u,g=new Map;for(u=m;u<=f;u++){const e=t[u]=c?wr(t[u]):_r(t[u]);null!=e.key&&g.set(e.key,u)}let y,b=0;const _=f-m+1;let w=!1,x=0;const S=new Array(_);for(u=0;u<_;u++)S[u]=0;for(u=p;u<=h;u++){const r=e[u];if(b>=_){W(r,o,s,!0);continue}let i;if(null!=r.key)i=g.get(r.key);else for(y=m;y<=f;y++)if(0===S[y-m]&&ar(r,t[y])){i=y;break}void 0===i?W(r,o,s,!0):(S[i-m]=u+1,i>=x?x=i:w=!0,v(r,t[i],n,null,o,s,a,l,c),b++)}const E=w?Nn(S):i.Z6;for(y=E.length-1,u=_-1;u>=0;u--){const e=m+u,i=t[e],h=e+1<d?t[e+1].el:r;0===S[u]?v(null,i,n,h,o,s,a,l,c):w&&(y<0||u!==E[y]?H(i,n,h,2):y--)}}},H=(e,t,n,r,i=null)=>{const{el:s,type:a,transition:l,children:c,shapeFlag:u}=e;if(6&u)return void H(e.component.subTree,t,n,r);if(128&u)return void e.suspense.move(t,n,r);if(64&u)return void a.move(e,t,n,ee);if(a===$n){o(s,t,n);for(let e=0;e<c.length;e++)H(c[e],t,n,r);return void o(e.anchor,t,n)}if(a===Xn)return void w(e,t,n);const d=2!==r&&1&u&&l;if(d)if(0===r)l.beforeEnter(s),o(s,t,n),On((()=>l.enter(s)),i);else{const{leave:e,delayLeave:r,afterLeave:i}=l,a=()=>o(s,t,n),c=()=>{e(s,(()=>{a(),i&&i()}))};r?r(s,a,c):c()}else o(s,t,n)},W=(e,t,n,r=!1,i=!1)=>{const{type:o,props:s,ref:a,children:l,dynamicChildren:c,shapeFlag:u,patchFlag:d,dirs:h}=e;if(null!=a&&En(a,null,n,e,!0),256&u)return void t.ctx.deactivate(e);const f=1&u&&h,p=!De(e);let m;if(p&&(m=s&&s.onVnodeBeforeUnmount)&&Er(m,t,e),6&u)Y(e.component,n,r);else{if(128&u)return void e.suspense.unmount(n,r);f&&we(e,null,t,"beforeUnmount"),64&u?e.type.remove(e,t,n,i,ee,r):c&&(o!==$n||d>0&&64&d)?Z(c,t,n,!1,!0):(o===$n&&384&d||!i&&16&u)&&Z(l,t,n),r&&$(e)}(p&&(m=s&&s.onVnodeUnmounted)||f)&&On((()=>{m&&Er(m,t,e),f&&we(e,null,t,"unmounted")}),n)},$=e=>{const{type:t,el:n,anchor:r,transition:i}=e;if(t===$n)return void q(n,r);if(t===Xn)return void S(e);const o=()=>{s(n),i&&!i.persisted&&i.afterLeave&&i.afterLeave()};if(1&e.shapeFlag&&i&&!i.persisted){const{leave:t,delayLeave:r}=i,s=()=>t(n,o);r?r(e.el,o,s):s()}else o()},q=(e,t)=>{let n;while(e!==t)n=p(e),s(e),e=n;s(t)},Y=(e,t,n)=>{const{bum:r,scope:o,update:s,subTree:a,um:l}=e;r&&(0,i.ir)(r),o.stop(),s&&(s.active=!1,W(a,e,t,n)),l&&On(l,t),On((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},Z=(e,t,n,r=!1,i=!1,o=0)=>{for(let s=o;s<e.length;s++)W(e[s],t,n,r,i)},J=e=>6&e.shapeFlag?J(e.component.subTree):128&e.shapeFlag?e.suspense.next():p(e.anchor||e.el),Q=(e,t,n)=>{null==e?t._vnode&&W(t._vnode,null,null,!0):v(t._vnode||null,e,t,null,null,null,n),T(),C(),t._vnode=e},ee={p:v,um:W,m:H,r:$,mt:N,mc:O,pc:V,pbc:P,n:J,o:e};let te,ne;return t&&([te,ne]=t(ee)),{render:Q,hydrate:te,createApp:nn(Q,te)}}function Dn({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function In(e,t,n=!1){const r=e.children,o=t.children;if((0,i.kJ)(r)&&(0,i.kJ)(o))for(let i=0;i<r.length;i++){const e=r[i];let t=o[i];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=o[i]=wr(o[i]),t.el=e.el),n||In(e,t)),t.type===qn&&(t.el=e.el)}}function Nn(e){const t=e.slice(),n=[0];let r,i,o,s,a;const l=e.length;for(r=0;r<l;r++){const l=e[r];if(0!==l){if(i=n[n.length-1],e[i]<l){t[r]=i,n.push(r);continue}o=0,s=n.length-1;while(o<s)a=o+s>>1,e[n[a]]<l?o=a+1:s=a;l<e[n[o]]&&(o>0&&(t[r]=n[o-1]),n[o]=r)}}o=n.length,s=n[o-1];while(o-- >0)n[o]=s,s=t[s];return n}const Un=e=>e.__isTeleport,Fn=e=>e&&(e.disabled||""===e.disabled),Bn=e=>"undefined"!==typeof SVGElement&&e instanceof SVGElement,Vn=(e,t)=>{const n=e&&e.to;if((0,i.HD)(n)){if(t){const e=t(n);return e}return null}return n},zn={__isTeleport:!0,process(e,t,n,r,i,o,s,a,l,c){const{mc:u,pc:d,pbc:h,o:{insert:f,querySelector:p,createText:m,createComment:g}}=c,v=Fn(t.props);let{shapeFlag:y,children:b,dynamicChildren:_}=t;if(null==e){const e=t.el=m(""),c=t.anchor=m("");f(e,n,r),f(c,n,r);const d=t.target=Vn(t.props,p),h=t.targetAnchor=m("");d&&(f(h,d),s=s||Bn(d));const g=(e,t)=>{16&y&&u(b,e,t,i,o,s,a,l)};v?g(n,c):d&&g(d,h)}else{t.el=e.el;const r=t.anchor=e.anchor,u=t.target=e.target,f=t.targetAnchor=e.targetAnchor,m=Fn(e.props),g=m?n:u,y=m?r:f;if(s=s||Bn(u),_?(h(e.dynamicChildren,_,g,i,o,s,a),In(e,t,!0)):l||d(e,t,g,y,i,o,s,a,!1),v)m||jn(t,n,r,c,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const e=t.target=Vn(t.props,p);e&&jn(t,e,null,c,0)}else m&&jn(t,u,f,c,1)}Gn(t)},remove(e,t,n,r,{um:i,o:{remove:o}},s){const{shapeFlag:a,children:l,anchor:c,targetAnchor:u,target:d,props:h}=e;if(d&&o(u),(s||!Fn(h))&&(o(c),16&a))for(let f=0;f<l.length;f++){const e=l[f];i(e,t,n,!0,!!e.dynamicChildren)}},move:jn,hydrate:Hn};function jn(e,t,n,{o:{insert:r},m:i},o=2){0===o&&r(e.targetAnchor,t,n);const{el:s,anchor:a,shapeFlag:l,children:c,props:u}=e,d=2===o;if(d&&r(s,t,n),(!d||Fn(u))&&16&l)for(let h=0;h<c.length;h++)i(c[h],t,n,2);d&&r(a,t,n)}function Hn(e,t,n,r,i,o,{o:{nextSibling:s,parentNode:a,querySelector:l}},c){const u=t.target=Vn(t.props,l);if(u){const l=u._lpa||u.firstChild;if(16&t.shapeFlag)if(Fn(t.props))t.anchor=c(s(e),t,a(e),n,r,i,o),t.targetAnchor=l;else{t.anchor=s(e);let a=l;while(a)if(a=s(a),a&&8===a.nodeType&&"teleport anchor"===a.data){t.targetAnchor=a,u._lpa=t.targetAnchor&&s(t.targetAnchor);break}c(l,t,u,n,r,i,o)}Gn(t)}return t.anchor&&s(t.anchor)}const Wn=zn;function Gn(e){const t=e.ctx;if(t&&t.ut){let n=e.children[0].el;while(n!==e.targetAnchor)1===n.nodeType&&n.setAttribute("data-v-owner",t.uid),n=n.nextSibling;t.ut()}}const $n=Symbol.for("v-fgt"),qn=Symbol.for("v-txt"),Yn=Symbol.for("v-cmt"),Xn=Symbol.for("v-stc"),Zn=[];let Kn=null;function Jn(e=!1){Zn.push(Kn=e?null:[])}function Qn(){Zn.pop(),Kn=Zn[Zn.length-1]||null}let er,tr=1;function nr(e){tr+=e}function rr(e){return e.dynamicChildren=tr>0?Kn||i.Z6:null,Qn(),tr>0&&Kn&&Kn.push(e),e}function ir(e,t,n,r,i,o){return rr(hr(e,t,n,r,i,o,!0))}function or(e,t,n,r,i){return rr(fr(e,t,n,r,i,!0))}function sr(e){return!!e&&!0===e.__v_isVNode}function ar(e,t){return e.type===t.type&&e.key===t.key}function lr(e){er=e}const cr="__vInternal",ur=({key:e})=>null!=e?e:null,dr=({ref:e,ref_key:t,ref_for:n})=>("number"===typeof e&&(e=""+e),null!=e?(0,i.HD)(e)||(0,r.dq)(e)||(0,i.mf)(e)?{i:F,r:e,k:t,f:!!n}:e:null);function hr(e,t=null,n=null,r=0,o=null,s=(e===$n?0:1),a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&ur(t),ref:t&&dr(t),scopeId:B,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:F};return l?(xr(c,n),128&s&&e.normalize(c)):n&&(c.shapeFlag|=(0,i.HD)(n)?8:16),tr>0&&!a&&Kn&&(c.patchFlag>0||6&s)&&32!==c.patchFlag&&Kn.push(c),c}const fr=pr;function pr(e,t=null,n=null,o=0,s=null,a=!1){if(e&&e!==lt||(e=Yn),sr(e)){const r=gr(e,t,!0);return n&&xr(r,n),tr>0&&!a&&Kn&&(6&r.shapeFlag?Kn[Kn.indexOf(e)]=r:Kn.push(r)),r.patchFlag|=-2,r}if(Xr(e)&&(e=e.__vccOpts),t){t=mr(t);let{class:e,style:n}=t;e&&!(0,i.HD)(e)&&(t.class=(0,i.C_)(e)),(0,i.Kn)(n)&&((0,r.X3)(n)&&!(0,i.kJ)(n)&&(n=(0,i.l7)({},n)),t.style=(0,i.j5)(n))}const l=(0,i.HD)(e)?1:J(e)?128:Un(e)?64:(0,i.Kn)(e)?4:(0,i.mf)(e)?2:0;return hr(e,t,n,o,s,l,a,!0)}function mr(e){return e?(0,r.X3)(e)||cr in e?(0,i.l7)({},e):e:null}function gr(e,t,n=!1){const{props:r,ref:o,patchFlag:s,children:a}=e,l=t?Sr(r||{},t):r,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&ur(l),ref:t&&t.ref?n&&o?(0,i.kJ)(o)?o.concat(dr(t)):[o,dr(t)]:dr(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==$n?-1===s?16:16|s:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&gr(e.ssContent),ssFallback:e.ssFallback&&gr(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c}function vr(e=" ",t=0){return fr(qn,null,e,t)}function yr(e,t){const n=fr(Xn,null,e);return n.staticCount=t,n}function br(e="",t=!1){return t?(Jn(),or(Yn,null,e)):fr(Yn,null,e)}function _r(e){return null==e||"boolean"===typeof e?fr(Yn):(0,i.kJ)(e)?fr($n,null,e.slice()):"object"===typeof e?wr(e):fr(qn,null,String(e))}function wr(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:gr(e)}function xr(e,t){let n=0;const{shapeFlag:r}=e;if(null==t)t=null;else if((0,i.kJ)(t))n=16;else if("object"===typeof t){if(65&r){const n=t.default;return void(n&&(n._c&&(n._d=!1),xr(e,n()),n._c&&(n._d=!0)))}{n=32;const r=t._;r||cr in t?3===r&&F&&(1===F.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=F}}else(0,i.mf)(t)?(t={default:t,_ctx:F},n=32):(t=String(t),64&r?(n=16,t=[vr(t)]):n=8);e.children=t,e.shapeFlag|=n}function Sr(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const e in r)if("class"===e)t.class!==r.class&&(t.class=(0,i.C_)([t.class,r.class]));else if("style"===e)t.style=(0,i.j5)([t.style,r.style]);else if((0,i.F7)(e)){const n=t[e],o=r[e];!o||n===o||(0,i.kJ)(n)&&n.includes(o)||(t[e]=n?[].concat(n,o):o)}else""!==e&&(t[e]=r[e])}return t}function Er(e,t,n,r=null){l(e,t,7,[n,r])}const Mr=en();let Tr=0;function Cr(e,t,n){const o=e.type,s=(t?t.appContext:e.appContext)||Mr,a={uid:Tr++,vnode:e,type:o,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new r.Bj(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:hn(o,s),emitsOptions:N(o,s),emit:null,emitted:null,propsDefaults:i.kT,inheritAttrs:o.inheritAttrs,ctx:i.kT,data:i.kT,props:i.kT,attrs:i.kT,slots:i.kT,refs:i.kT,setupState:i.kT,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=I.bind(null,a),e.ce&&e.ce(a),a}let Ar=null;const kr=()=>Ar||F;let Or,Rr,Pr="__VUE_INSTANCE_SETTERS__";(Rr=(0,i.E9)()[Pr])||(Rr=(0,i.E9)()[Pr]=[]),Rr.push((e=>Ar=e)),Or=e=>{Rr.length>1?Rr.forEach((t=>t(e))):Rr[0](e)};const Lr=e=>{Or(e),e.scope.on()},Dr=()=>{Ar&&Ar.scope.off(),Or(null)};function Ir(e){return 4&e.vnode.shapeFlag}let Nr,Ur,Fr=!1;function Br(e,t=!1){Fr=t;const{props:n,children:r}=e.vnode,i=Ir(e);ln(e,n,i,t),xn(e,r);const o=i?Vr(e,t):void 0;return Fr=!1,o}function Vr(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=(0,r.Xl)(new Proxy(e.ctx,wt));const{setup:o}=n;if(o){const n=e.setupContext=o.length>1?$r(e):null;Lr(e),(0,r.Jd)();const s=a(o,e,0,[e.props,n]);if((0,r.lk)(),Dr(),(0,i.tI)(s)){if(s.then(Dr,Dr),t)return s.then((n=>{zr(e,n,t)})).catch((t=>{c(t,e,0)}));e.asyncDep=s}else zr(e,s,t)}else Wr(e,t)}function zr(e,t,n){(0,i.mf)(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:(0,i.Kn)(t)&&(e.setupState=(0,r.WL)(t)),Wr(e,n)}function jr(e){Nr=e,Ur=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,xt))}}const Hr=()=>!Nr;function Wr(e,t,n){const o=e.type;if(!e.render){if(!t&&Nr&&!o.render){const t=o.template||Wt(e).template;if(t){0;const{isCustomElement:n,compilerOptions:r}=e.appContext.config,{delimiters:s,compilerOptions:a}=o,l=(0,i.l7)((0,i.l7)({isCustomElement:n,delimiters:s},r),a);o.render=Nr(t,l)}}e.render=o.render||i.dG,Ur&&Ur(e)}Lr(e),(0,r.Jd)(),Vt(e),(0,r.lk)(),Dr()}function Gr(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return(0,r.j)(e,"get","$attrs"),t[n]}}))}function $r(e){const t=t=>{e.exposed=t||{}};return{get attrs(){return Gr(e)},slots:e.slots,emit:e.emit,expose:t}}function qr(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy((0,r.WL)((0,r.Xl)(e.exposed)),{get(t,n){return n in t?t[n]:n in bt?bt[n](e):void 0},has(e,t){return t in e||t in bt}}))}function Yr(e,t=!0){return(0,i.mf)(e)?e.displayName||e.name:e.name||t&&e.__name}function Xr(e){return(0,i.mf)(e)&&"__vccOpts"in e}const Zr=(e,t)=>(0,r.Fl)(e,t,Fr);function Kr(e,t,n){const r=arguments.length;return 2===r?(0,i.Kn)(t)&&!(0,i.kJ)(t)?sr(t)?fr(e,null,[t]):fr(e,t):fr(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&sr(n)&&(n=[n]),fr(e,t,n))}const Jr=Symbol.for("v-scx"),Qr=()=>{{const e=sn(Jr);return e}};function ei(){return void 0}function ti(e,t,n,r){const i=n[r];if(i&&ni(i,e))return i;const o=t();return o.memo=e.slice(),n[r]=o}function ni(e,t){const n=e.memo;if(n.length!=t.length)return!1;for(let r=0;r<n.length;r++)if((0,i.aU)(n[r],t[r]))return!1;return tr>0&&Kn&&Kn.push(e),!0}const ri="3.3.4",ii={createComponentInstance:Cr,setupComponent:Br,renderComponentRoot:G,setCurrentRenderingInstance:V,isVNode:sr,normalizeVNode:_r},oi=ii,si=null,ai=null},9197:function(e,t,n){"use strict";n.d(t,{$d:function(){return i.$d},$y:function(){return i.$y},Ah:function(){return D},B:function(){return i.B},BK:function(){return i.BK},Bj:function(){return i.Bj},Bz:function(){return i.Bz},C3:function(){return i.C3},C_:function(){return i.C_},Cn:function(){return i.Cn},D2:function(){return Le},EB:function(){return i.EB},EM:function(){return i.EM},Eo:function(){return i.Eo},F4:function(){return i.F4},F8:function(){return De},FN:function(){return i.FN},Fl:function(){return i.Fl},G:function(){return i.G},G2:function(){return _e},Gn:function(){return i.Gn},HX:function(){return i.HX},HY:function(){return i.HY},Ho:function(){return i.Ho},IU:function(){return i.IU},JJ:function(){return i.JJ},Jd:function(){return i.Jd},KU:function(){return i.KU},Ko:function(){return i.Ko},LL:function(){return i.LL},MW:function(){return L},MX:function(){return i.MX},Mr:function(){return i.Mr},Nd:function(){return Ye},Nv:function(){return i.Nv},OT:function(){return i.OT},Ob:function(){return i.Ob},P$:function(){return i.P$},PG:function(){return i.PG},Q2:function(){return i.Q2},Q6:function(){return i.Q6},RC:function(){return i.RC},Rh:function(){return i.Rh},Rr:function(){return i.Rr},S3:function(){return i.S3},SK:function(){return i.Ah},SU:function(){return i.SU},Tn:function(){return i.Tn},U2:function(){return i.U2},Uc:function(){return i.Uc},Uk:function(){return i.Uk},Um:function(){return i.Um},Us:function(){return i.Us},Vf:function(){return i.Vf},Vh:function(){return i.Vh},W3:function(){return ce},WI:function(){return i.WI},WL:function(){return i.WL},WY:function(){return i.WY},Wl:function(){return i.Wl},Wm:function(){return i.Wm},Wu:function(){return i.Wu},X3:function(){return i.X3},XI:function(){return i.XI},Xl:function(){return i.Xl},Xn:function(){return i.Xn},Y1:function(){return i.Y1},Y3:function(){return i.Y3},Y8:function(){return i.Y8},YP:function(){return i.YP},YS:function(){return i.YS},YZ:function(){return Me},Yq:function(){return i.Yq},Yu:function(){return i.Yu},ZB:function(){return He},ZK:function(){return i.ZK},ZM:function(){return i.ZM},Zq:function(){return i.Zq},_:function(){return i._},_A:function(){return i._A},a2:function(){return N},aZ:function(){return i.aZ},b9:function(){return i.b9},bM:function(){return we},bT:function(){return i.bT},bv:function(){return i.bv},cE:function(){return i.cE},d1:function(){return i.d1},dD:function(){return i.dD},dG:function(){return i.dG},dl:function(){return i.dl},dq:function(){return i.dq},e8:function(){return ye},ec:function(){return i.ec},eq:function(){return i.eq},f3:function(){return i.f3},fb:function(){return U},h:function(){return i.h},hR:function(){return i.hR},i8:function(){return i.i8},iD:function(){return i.iD},iH:function(){return i.iH},iM:function(){return Re},ic:function(){return i.ic},j4:function(){return i.j4},j5:function(){return i.j5},kC:function(){return i.kC},kq:function(){return i.kq},l1:function(){return i.l1},lA:function(){return i.lA},lR:function(){return i.lR},m0:function(){return i.m0},mW:function(){return i.mW},mv:function(){return i.mv},mx:function(){return i.mx},n4:function(){return i.n4},nJ:function(){return i.nJ},nK:function(){return i.nK},nQ:function(){return i.nQ},nZ:function(){return i.nZ},nr:function(){return ve},oR:function(){return i.oR},of:function(){return i.of},p1:function(){return i.p1},qG:function(){return i.qG},qZ:function(){return i.qZ},qb:function(){return i.qb},qj:function(){return i.qj},qq:function(){return i.qq},ri:function(){return We},ry:function(){return i.ry},sT:function(){return i.sT},sY:function(){return je},se:function(){return i.se},sj:function(){return F},sv:function(){return i.sv},tT:function(){return i.tT},uE:function(){return i.uE},uT:function(){return H},u_:function(){return i.u_},up:function(){return i.up},vl:function(){return i.vl},vr:function(){return Ge},vs:function(){return i.vs},w5:function(){return i.w5},wF:function(){return i.wF},wg:function(){return i.wg},wy:function(){return i.wy},xv:function(){return i.xv},yT:function(){return i.yT},yX:function(){return i.yX},yb:function(){return i.MW},zw:function(){return i.zw}});n(7658);var r=n(4887),i=n(8473),o=n(4188);const s="http://www.w3.org/2000/svg",a="undefined"!==typeof document?document:null,l=a&&a.createElement("template"),c={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t?a.createElementNS(s,e):a.createElement(e,n?{is:n}:void 0);return"select"===e&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:e=>a.createTextNode(e),createComment:e=>a.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>a.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,o){const s=n?n.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling)){while(1)if(t.insertBefore(i.cloneNode(!0),n),i===o||!(i=i.nextSibling))break}else{l.innerHTML=r?`<svg>${e}</svg>`:e;const i=l.content;if(r){const e=i.firstChild;while(e.firstChild)i.appendChild(e.firstChild);i.removeChild(e)}t.insertBefore(i,n)}return[s?s.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function u(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function d(e,t,n){const i=e.style,o=(0,r.HD)(n);if(n&&!o){if(t&&!(0,r.HD)(t))for(const e in t)null==n[e]&&f(i,e,"");for(const e in n)f(i,e,n[e])}else{const r=i.display;o?t!==n&&(i.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(i.display=r)}}const h=/\s*!important$/;function f(e,t,n){if((0,r.kJ)(n))n.forEach((n=>f(e,t,n)));else if(null==n&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=g(e,t);h.test(n)?e.setProperty((0,r.rs)(i),n.replace(h,""),"important"):e[i]=n}}const p=["Webkit","Moz","ms"],m={};function g(e,t){const n=m[t];if(n)return n;let i=(0,r._A)(t);if("filter"!==i&&i in e)return m[t]=i;i=(0,r.kC)(i);for(let r=0;r<p.length;r++){const n=p[r]+i;if(n in e)return m[t]=n}return t}const v="http://www.w3.org/1999/xlink";function y(e,t,n,i,o){if(i&&t.startsWith("xlink:"))null==n?e.removeAttributeNS(v,t.slice(6,t.length)):e.setAttributeNS(v,t,n);else{const i=(0,r.Pq)(t);null==n||i&&!(0,r.yA)(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}function b(e,t,n,i,o,s,a){if("innerHTML"===t||"textContent"===t)return i&&a(i,o,s),void(e[t]=null==n?"":n);const l=e.tagName;if("value"===t&&"PROGRESS"!==l&&!l.includes("-")){e._value=n;const r="OPTION"===l?e.getAttribute("value"):e.value,i=null==n?"":n;return r!==i&&(e.value=i),void(null==n&&e.removeAttribute(t))}let c=!1;if(""===n||null==n){const i=typeof e[t];"boolean"===i?n=(0,r.yA)(n):null==n&&"string"===i?(n="",c=!0):"number"===i&&(n=0,c=!0)}try{e[t]=n}catch(u){0}c&&e.removeAttribute(t)}function _(e,t,n,r){e.addEventListener(t,n,r)}function w(e,t,n,r){e.removeEventListener(t,n,r)}function x(e,t,n,r,i=null){const o=e._vei||(e._vei={}),s=o[t];if(r&&s)s.value=r;else{const[n,a]=E(t);if(r){const s=o[t]=A(r,i);_(e,n,s,a)}else s&&(w(e,n,s,a),o[t]=void 0)}}const S=/(?:Once|Passive|Capture)$/;function E(e){let t;if(S.test(e)){let n;t={};while(n=e.match(S))e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}const n=":"===e[2]?e.slice(3):(0,r.rs)(e.slice(2));return[n,t]}let M=0;const T=Promise.resolve(),C=()=>M||(T.then((()=>M=0)),M=Date.now());function A(e,t){const n=e=>{if(e._vts){if(e._vts<=n.attached)return}else e._vts=Date.now();(0,i.$d)(k(e,n.value),t,5,[e])};return n.value=e,n.attached=C(),n}function k(e,t){if((0,r.kJ)(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e&&e(t)))}return t}const O=/^on[a-z]/,R=(e,t,n,i,o=!1,s,a,l,c)=>{"class"===t?u(e,i,o):"style"===t?d(e,n,i):(0,r.F7)(t)?(0,r.tR)(t)||x(e,t,n,i,a):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):P(e,t,i,o))?b(e,t,i,s,a,l,c):("true-value"===t?e._trueValue=i:"false-value"===t&&(e._falseValue=i),y(e,t,i,o))};function P(e,t,n,i){return i?"innerHTML"===t||"textContent"===t||!!(t in e&&O.test(t)&&(0,r.mf)(n)):"spellcheck"!==t&&"draggable"!==t&&"translate"!==t&&("form"!==t&&(("list"!==t||"INPUT"!==e.tagName)&&(("type"!==t||"TEXTAREA"!==e.tagName)&&((!O.test(t)||!(0,r.HD)(n))&&t in e))))}function L(e,t){const n=(0,i.aZ)(e);class r extends N{constructor(e){super(n,e,t)}}return r.def=n,r}const D=e=>L(e,He),I="undefined"!==typeof HTMLElement?HTMLElement:class{};class N extends I{constructor(e,t={},n){super(),this._def=e,this._props=t,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&n?n(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,(0,i.Y3)((()=>{this._connected||(je(null,this.shadowRoot),this._instance=null)}))}_resolveDef(){this._resolved=!0;for(let n=0;n<this.attributes.length;n++)this._setAttr(this.attributes[n].name);new MutationObserver((e=>{for(const t of e)this._setAttr(t.attributeName)})).observe(this,{attributes:!0});const e=(e,t=!1)=>{const{props:n,styles:i}=e;let o;if(n&&!(0,r.kJ)(n))for(const s in n){const e=n[s];(e===Number||e&&e.type===Number)&&(s in this._props&&(this._props[s]=(0,r.He)(this._props[s])),(o||(o=Object.create(null)))[(0,r._A)(s)]=!0)}this._numberProps=o,t&&this._resolveProps(e),this._applyStyles(i),this._update()},t=this._def.__asyncLoader;t?t().then((t=>e(t,!0))):e(this._def)}_resolveProps(e){const{props:t}=e,n=(0,r.kJ)(t)?t:Object.keys(t||{});for(const r of Object.keys(this))"_"!==r[0]&&n.includes(r)&&this._setProp(r,this[r],!0,!1);for(const i of n.map(r._A))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(e){this._setProp(i,e)}})}_setAttr(e){let t=this.getAttribute(e);const n=(0,r._A)(e);this._numberProps&&this._numberProps[n]&&(t=(0,r.He)(t)),this._setProp(n,t,!1)}_getProp(e){return this._props[e]}_setProp(e,t,n=!0,i=!0){t!==this._props[e]&&(this._props[e]=t,i&&this._instance&&this._update(),n&&(!0===t?this.setAttribute((0,r.rs)(e),""):"string"===typeof t||"number"===typeof t?this.setAttribute((0,r.rs)(e),t+""):t||this.removeAttribute((0,r.rs)(e))))}_update(){je(this._createVNode(),this.shadowRoot)}_createVNode(){const e=(0,i.Wm)(this._def,(0,r.l7)({},this._props));return this._instance||(e.ce=e=>{this._instance=e,e.isCE=!0;const t=(e,t)=>{this.dispatchEvent(new CustomEvent(e,{detail:t}))};e.emit=(e,...n)=>{t(e,n),(0,r.rs)(e)!==e&&t((0,r.rs)(e),n)};let n=this;while(n=n&&(n.parentNode||n.host))if(n instanceof N){e.parent=n._instance,e.provides=n._instance.provides;break}}),e}_applyStyles(e){e&&e.forEach((e=>{const t=document.createElement("style");t.textContent=e,this.shadowRoot.appendChild(t)}))}}function U(e="$style"){{const t=(0,i.FN)();if(!t)return r.kT;const n=t.type.__cssModules;if(!n)return r.kT;const o=n[e];return o||r.kT}}function F(e){const t=(0,i.FN)();if(!t)return;const n=t.ut=(n=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach((e=>V(e,n)))},r=()=>{const r=e(t.proxy);B(t.subTree,r),n(r)};(0,i.Rh)(r),(0,i.bv)((()=>{const e=new MutationObserver(r);e.observe(t.subTree.el.parentNode,{childList:!0}),(0,i.Ah)((()=>e.disconnect()))}))}function B(e,t){if(128&e.shapeFlag){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push((()=>{B(n.activeBranch,t)}))}while(e.component)e=e.component.subTree;if(1&e.shapeFlag&&e.el)V(e.el,t);else if(e.type===i.HY)e.children.forEach((e=>B(e,t)));else if(e.type===i.qG){let{el:n,anchor:r}=e;while(n){if(V(n,t),n===r)break;n=n.nextSibling}}}function V(e,t){if(1===e.nodeType){const n=e.style;for(const e in t)n.setProperty(`--${e}`,t[e])}}const z="transition",j="animation",H=(e,{slots:t})=>(0,i.h)(i.P$,Y(e),t);H.displayName="Transition";const W={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},G=H.props=(0,r.l7)({},i.nJ,W),$=(e,t=[])=>{(0,r.kJ)(e)?e.forEach((e=>e(...t))):e&&e(...t)},q=e=>!!e&&((0,r.kJ)(e)?e.some((e=>e.length>1)):e.length>1);function Y(e){const t={};for(const r in e)r in W||(t[r]=e[r]);if(!1===e.css)return t;const{name:n="v",type:i,duration:o,enterFromClass:s=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:c=s,appearActiveClass:u=a,appearToClass:d=l,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=e,m=X(o),g=m&&m[0],v=m&&m[1],{onBeforeEnter:y,onEnter:b,onEnterCancelled:_,onLeave:w,onLeaveCancelled:x,onBeforeAppear:S=y,onAppear:E=b,onAppearCancelled:M=_}=t,T=(e,t,n)=>{J(e,t?d:l),J(e,t?u:a),n&&n()},C=(e,t)=>{e._isLeaving=!1,J(e,h),J(e,p),J(e,f),t&&t()},A=e=>(t,n)=>{const r=e?E:b,o=()=>T(t,e,n);$(r,[t,o]),Q((()=>{J(t,e?c:s),K(t,e?d:l),q(r)||te(t,i,g,o)}))};return(0,r.l7)(t,{onBeforeEnter(e){$(y,[e]),K(e,s),K(e,a)},onBeforeAppear(e){$(S,[e]),K(e,c),K(e,u)},onEnter:A(!1),onAppear:A(!0),onLeave(e,t){e._isLeaving=!0;const n=()=>C(e,t);K(e,h),oe(),K(e,f),Q((()=>{e._isLeaving&&(J(e,h),K(e,p),q(w)||te(e,i,v,n))})),$(w,[e,n])},onEnterCancelled(e){T(e,!1),$(_,[e])},onAppearCancelled(e){T(e,!0),$(M,[e])},onLeaveCancelled(e){C(e),$(x,[e])}})}function X(e){if(null==e)return null;if((0,r.Kn)(e))return[Z(e.enter),Z(e.leave)];{const t=Z(e);return[t,t]}}function Z(e){const t=(0,r.He)(e);return t}function K(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.add(t))),(e._vtc||(e._vtc=new Set)).add(t)}function J(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.remove(t)));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function Q(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))}let ee=0;function te(e,t,n,r){const i=e._endId=++ee,o=()=>{i===e._endId&&r()};if(n)return setTimeout(o,n);const{type:s,timeout:a,propCount:l}=ne(e,t);if(!s)return r();const c=s+"end";let u=0;const d=()=>{e.removeEventListener(c,h),o()},h=t=>{t.target===e&&++u>=l&&d()};setTimeout((()=>{u<l&&d()}),a+1),e.addEventListener(c,h)}function ne(e,t){const n=window.getComputedStyle(e),r=e=>(n[e]||"").split(", "),i=r(`${z}Delay`),o=r(`${z}Duration`),s=re(i,o),a=r(`${j}Delay`),l=r(`${j}Duration`),c=re(a,l);let u=null,d=0,h=0;t===z?s>0&&(u=z,d=s,h=o.length):t===j?c>0&&(u=j,d=c,h=l.length):(d=Math.max(s,c),u=d>0?s>c?z:j:null,h=u?u===z?o.length:l.length:0);const f=u===z&&/\b(transform|all)(,|$)/.test(r(`${z}Property`).toString());return{type:u,timeout:d,propCount:h,hasTransform:f}}function re(e,t){while(e.length<t.length)e=e.concat(e);return Math.max(...t.map(((t,n)=>ie(t)+ie(e[n]))))}function ie(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function oe(){return document.body.offsetHeight}const se=new WeakMap,ae=new WeakMap,le={name:"TransitionGroup",props:(0,r.l7)({},G,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=(0,i.FN)(),r=(0,i.Y8)();let s,a;return(0,i.ic)((()=>{if(!s.length)return;const t=e.moveClass||`${e.name||"v"}-move`;if(!fe(s[0].el,n.vnode.el,t))return;s.forEach(ue),s.forEach(de);const r=s.filter(he);oe(),r.forEach((e=>{const n=e.el,r=n.style;K(n,t),r.transform=r.webkitTransform=r.transitionDuration="";const i=n._moveCb=e=>{e&&e.target!==n||e&&!/transform$/.test(e.propertyName)||(n.removeEventListener("transitionend",i),n._moveCb=null,J(n,t))};n.addEventListener("transitionend",i)}))})),()=>{const l=(0,o.IU)(e),c=Y(l);let u=l.tag||i.HY;s=a,a=t.default?(0,i.Q6)(t.default()):[];for(let e=0;e<a.length;e++){const t=a[e];null!=t.key&&(0,i.nK)(t,(0,i.U2)(t,c,r,n))}if(s)for(let e=0;e<s.length;e++){const t=s[e];(0,i.nK)(t,(0,i.U2)(t,c,r,n)),se.set(t,t.el.getBoundingClientRect())}return(0,i.Wm)(u,null,a)}}};le.props;const ce=le;function ue(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function de(e){ae.set(e,e.el.getBoundingClientRect())}function he(e){const t=se.get(e),n=ae.get(e),r=t.left-n.left,i=t.top-n.top;if(r||i){const t=e.el.style;return t.transform=t.webkitTransform=`translate(${r}px,${i}px)`,t.transitionDuration="0s",e}}function fe(e,t,n){const r=e.cloneNode();e._vtc&&e._vtc.forEach((e=>{e.split(/\s+/).forEach((e=>e&&r.classList.remove(e)))})),n.split(/\s+/).forEach((e=>e&&r.classList.add(e))),r.style.display="none";const i=1===t.nodeType?t:t.parentNode;i.appendChild(r);const{hasTransform:o}=ne(r);return i.removeChild(r),o}const pe=e=>{const t=e.props["onUpdate:modelValue"]||!1;return(0,r.kJ)(t)?e=>(0,r.ir)(t,e):t};function me(e){e.target.composing=!0}function ge(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const ve={created(e,{modifiers:{lazy:t,trim:n,number:i}},o){e._assign=pe(o);const s=i||o.props&&"number"===o.props.type;_(e,t?"change":"input",(t=>{if(t.target.composing)return;let i=e.value;n&&(i=i.trim()),s&&(i=(0,r.h5)(i)),e._assign(i)})),n&&_(e,"change",(()=>{e.value=e.value.trim()})),t||(_(e,"compositionstart",me),_(e,"compositionend",ge),_(e,"change",ge))},mounted(e,{value:t}){e.value=null==t?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:i,number:o}},s){if(e._assign=pe(s),e.composing)return;if(document.activeElement===e&&"range"!==e.type){if(n)return;if(i&&e.value.trim()===t)return;if((o||"number"===e.type)&&(0,r.h5)(e.value)===t)return}const a=null==t?"":t;e.value!==a&&(e.value=a)}},ye={deep:!0,created(e,t,n){e._assign=pe(n),_(e,"change",(()=>{const t=e._modelValue,n=Se(e),i=e.checked,o=e._assign;if((0,r.kJ)(t)){const e=(0,r.hq)(t,n),s=-1!==e;if(i&&!s)o(t.concat(n));else if(!i&&s){const n=[...t];n.splice(e,1),o(n)}}else if((0,r.DM)(t)){const e=new Set(t);i?e.add(n):e.delete(n),o(e)}else o(Ee(e,i))}))},mounted:be,beforeUpdate(e,t,n){e._assign=pe(n),be(e,t,n)}};function be(e,{value:t,oldValue:n},i){e._modelValue=t,(0,r.kJ)(t)?e.checked=(0,r.hq)(t,i.props.value)>-1:(0,r.DM)(t)?e.checked=t.has(i.props.value):t!==n&&(e.checked=(0,r.WV)(t,Ee(e,!0)))}const _e={created(e,{value:t},n){e.checked=(0,r.WV)(t,n.props.value),e._assign=pe(n),_(e,"change",(()=>{e._assign(Se(e))}))},beforeUpdate(e,{value:t,oldValue:n},i){e._assign=pe(i),t!==n&&(e.checked=(0,r.WV)(t,i.props.value))}},we={deep:!0,created(e,{value:t,modifiers:{number:n}},i){const o=(0,r.DM)(t);_(e,"change",(()=>{const t=Array.prototype.filter.call(e.options,(e=>e.selected)).map((e=>n?(0,r.h5)(Se(e)):Se(e)));e._assign(e.multiple?o?new Set(t):t:t[0])})),e._assign=pe(i)},mounted(e,{value:t}){xe(e,t)},beforeUpdate(e,t,n){e._assign=pe(n)},updated(e,{value:t}){xe(e,t)}};function xe(e,t){const n=e.multiple;if(!n||(0,r.kJ)(t)||(0,r.DM)(t)){for(let i=0,o=e.options.length;i<o;i++){const o=e.options[i],s=Se(o);if(n)(0,r.kJ)(t)?o.selected=(0,r.hq)(t,s)>-1:o.selected=t.has(s);else if((0,r.WV)(Se(o),t))return void(e.selectedIndex!==i&&(e.selectedIndex=i))}n||-1===e.selectedIndex||(e.selectedIndex=-1)}}function Se(e){return"_value"in e?e._value:e.value}function Ee(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Me={created(e,t,n){Ce(e,t,n,null,"created")},mounted(e,t,n){Ce(e,t,n,null,"mounted")},beforeUpdate(e,t,n,r){Ce(e,t,n,r,"beforeUpdate")},updated(e,t,n,r){Ce(e,t,n,r,"updated")}};function Te(e,t){switch(e){case"SELECT":return we;case"TEXTAREA":return ve;default:switch(t){case"checkbox":return ye;case"radio":return _e;default:return ve}}}function Ce(e,t,n,r,i){const o=Te(e.tagName,n.props&&n.props.type),s=o[i];s&&s(e,t,n,r)}function Ae(){ve.getSSRProps=({value:e})=>({value:e}),_e.getSSRProps=({value:e},t)=>{if(t.props&&(0,r.WV)(t.props.value,e))return{checked:!0}},ye.getSSRProps=({value:e},t)=>{if((0,r.kJ)(e)){if(t.props&&(0,r.hq)(e,t.props.value)>-1)return{checked:!0}}else if((0,r.DM)(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}},Me.getSSRProps=(e,t)=>{if("string"!==typeof t.type)return;const n=Te(t.type.toUpperCase(),t.props&&t.props.type);return n.getSSRProps?n.getSSRProps(e,t):void 0}}const ke=["ctrl","shift","alt","meta"],Oe={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>ke.some((n=>e[`${n}Key`]&&!t.includes(n)))},Re=(e,t)=>(n,...r)=>{for(let e=0;e<t.length;e++){const r=Oe[t[e]];if(r&&r(n,t))return}return e(n,...r)},Pe={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Le=(e,t)=>n=>{if(!("key"in n))return;const i=(0,r.rs)(n.key);return t.some((e=>e===i||Pe[e]===i))?e(n):void 0},De={beforeMount(e,{value:t},{transition:n}){e._vod="none"===e.style.display?"":e.style.display,n&&t?n.beforeEnter(e):Ie(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!==!n&&(r?t?(r.beforeEnter(e),Ie(e,!0),r.enter(e)):r.leave(e,(()=>{Ie(e,!1)})):Ie(e,t))},beforeUnmount(e,{value:t}){Ie(e,t)}};function Ie(e,t){e.style.display=t?e._vod:"none"}function Ne(){De.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const Ue=(0,r.l7)({patchProp:R},c);let Fe,Be=!1;function Ve(){return Fe||(Fe=(0,i.Us)(Ue))}function ze(){return Fe=Be?Fe:(0,i.Eo)(Ue),Be=!0,Fe}const je=(...e)=>{Ve().render(...e)},He=(...e)=>{ze().hydrate(...e)},We=(...e)=>{const t=Ve().createApp(...e);const{mount:n}=t;return t.mount=e=>{const i=$e(e);if(!i)return;const o=t._component;(0,r.mf)(o)||o.render||o.template||(o.template=i.innerHTML),i.innerHTML="";const s=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},t},Ge=(...e)=>{const t=ze().createApp(...e);const{mount:n}=t;return t.mount=e=>{const t=$e(e);if(t)return n(t,!0,t instanceof SVGElement)},t};function $e(e){if((0,r.HD)(e)){const t=document.querySelector(e);return t}return e}let qe=!1;const Ye=()=>{qe||(qe=!0,Ae(),Ne())}},4887:function(e,t,n){"use strict";n.d(t,{C_:function(){return J},DM:function(){return v},E9:function(){return W},F7:function(){return c},Gg:function(){return O},HD:function(){return w},He:function(){return j},Kj:function(){return b},Kn:function(){return S},NO:function(){return a},Nj:function(){return V},Od:function(){return h},PO:function(){return A},Pq:function(){return te},RI:function(){return p},S0:function(){return k},W7:function(){return C},WV:function(){return ie},Z6:function(){return o},_A:function(){return L},_N:function(){return g},aU:function(){return F},dG:function(){return s},e1:function(){return $},fY:function(){return r},h5:function(){return z},hR:function(){return U},hq:function(){return oe},ir:function(){return B},j5:function(){return q},kC:function(){return N},kJ:function(){return m},kT:function(){return i},l7:function(){return d},mf:function(){return _},rs:function(){return I},tI:function(){return E},tR:function(){return u},vs:function(){return Q},yA:function(){return ne},yk:function(){return x},zw:function(){return se}});n(7658);function r(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}const i={},o=[],s=()=>{},a=()=>!1,l=/^on[^a-z]/,c=e=>l.test(e),u=e=>e.startsWith("onUpdate:"),d=Object.assign,h=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},f=Object.prototype.hasOwnProperty,p=(e,t)=>f.call(e,t),m=Array.isArray,g=e=>"[object Map]"===T(e),v=e=>"[object Set]"===T(e),y=e=>"[object Date]"===T(e),b=e=>"[object RegExp]"===T(e),_=e=>"function"===typeof e,w=e=>"string"===typeof e,x=e=>"symbol"===typeof e,S=e=>null!==e&&"object"===typeof e,E=e=>S(e)&&_(e.then)&&_(e.catch),M=Object.prototype.toString,T=e=>M.call(e),C=e=>T(e).slice(8,-1),A=e=>"[object Object]"===T(e),k=e=>w(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,O=r(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),R=e=>{const t=Object.create(null);return n=>{const r=t[n];return r||(t[n]=e(n))}},P=/-(\w)/g,L=R((e=>e.replace(P,((e,t)=>t?t.toUpperCase():"")))),D=/\B([A-Z])/g,I=R((e=>e.replace(D,"-$1").toLowerCase())),N=R((e=>e.charAt(0).toUpperCase()+e.slice(1))),U=R((e=>e?`on${N(e)}`:"")),F=(e,t)=>!Object.is(e,t),B=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},V=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},z=e=>{const t=parseFloat(e);return isNaN(t)?e:t},j=e=>{const t=w(e)?Number(e):NaN;return isNaN(t)?e:t};let H;const W=()=>H||(H="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{});const G="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console",$=r(G);function q(e){if(m(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=w(r)?K(r):q(r);if(i)for(const e in i)t[e]=i[e]}return t}return w(e)||S(e)?e:void 0}const Y=/;(?![^(]*\))/g,X=/:([^]+)/,Z=/\/\*[^]*?\*\//g;function K(e){const t={};return e.replace(Z,"").split(Y).forEach((e=>{if(e){const n=e.split(X);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}function J(e){let t="";if(w(e))t=e;else if(m(e))for(let n=0;n<e.length;n++){const r=J(e[n]);r&&(t+=r+" ")}else if(S(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function Q(e){if(!e)return null;let{class:t,style:n}=e;return t&&!w(t)&&(e.class=J(t)),n&&(e.style=q(n)),e}const ee="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",te=r(ee);function ne(e){return!!e||""===e}function re(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=ie(e[r],t[r]);return n}function ie(e,t){if(e===t)return!0;let n=y(e),r=y(t);if(n||r)return!(!n||!r)&&e.getTime()===t.getTime();if(n=x(e),r=x(t),n||r)return e===t;if(n=m(e),r=m(t),n||r)return!(!n||!r)&&re(e,t);if(n=S(e),r=S(t),n||r){if(!n||!r)return!1;const i=Object.keys(e).length,o=Object.keys(t).length;if(i!==o)return!1;for(const n in e){const r=e.hasOwnProperty(n),i=t.hasOwnProperty(n);if(r&&!i||!r&&i||!ie(e[n],t[n]))return!1}}return String(e)===String(t)}function oe(e,t){return e.findIndex((e=>ie(e,t)))}const se=e=>w(e)?e:null==e?"":m(e)||S(e)&&(e.toString===M||!_(e.toString))?JSON.stringify(e,ae,2):String(e),ae=(e,t)=>t&&t.__v_isRef?ae(e,t.value):g(t)?{[`Map(${t.size})`]:[...t.entries()].reduce(((e,[t,n])=>(e[`${t} =>`]=n,e)),{})}:v(t)?{[`Set(${t.size})`]:[...t.values()]}:!S(t)||m(t)||A(t)?t:String(t)},2217:function(e,t,n){"use strict";n(7658);var r=n(9004);function i(){var e={},t=0,n=0,r=0;function i(i,o){o||(o=i,i=0),i>n?n=i:i<r&&(r=i),e[i]||(e[i]=[]),e[i].push(o),t++}function o(){for(var t=r;t<=n;t++)for(var i=e[t],o=0;o<i.length;o++){var s=i[o];s()}}function s(){return t}return{add:i,process:o,size:s}}e.exports=function(e){e=e||{};var t=e.reporter,n=r.getOption(e,"async",!0),o=r.getOption(e,"auto",!0);o&&!n&&(t&&t.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),n=!0);var s,a=i(),l=!1;function c(e,t){!l&&o&&n&&0===a.size()&&h(),a.add(e,t)}function u(){l=!0;while(a.size()){var e=a;a=i(),e.process()}l=!1}function d(e){l||(void 0===e&&(e=n),s&&(f(s),s=null),e?h():u())}function h(){s=p(u)}function f(e){var t=clearTimeout;return t(e)}function p(e){var t=function(e){return setTimeout(e,0)};return t(e)}return{add:c,force:d}}},9004:function(e){"use strict";var t=e.exports={};function n(e,t,n){var r=e[t];return void 0!==r&&null!==r||void 0===n?r:n}t.getOption=n},8396:function(e,t,n){"use strict";n.d(t,{ZP:function(){return Of}});var r={};n.r(r),n.d(r,{afterMain:function(){return l.wX},afterRead:function(){return l.r5},afterWrite:function(){return l.MS},applyStyles:function(){return c.Z},arrow:function(){return u.Z},auto:function(){return l.d7},basePlacements:function(){return l.mv},beforeMain:function(){return l.XM},beforeRead:function(){return l.N7},beforeWrite:function(){return l.iv},bottom:function(){return l.I},clippingParents:function(){return l.zV},computeStyles:function(){return d.Z},createPopper:function(){return _.fi},createPopperBase:function(){return y.fi},createPopperLite:function(){return x},detectOverflow:function(){return b.Z},end:function(){return l.ut},eventListeners:function(){return h.Z},flip:function(){return f.Z},hide:function(){return p.Z},left:function(){return l.t$},main:function(){return l.DH},modifierPhases:function(){return l.xs},offset:function(){return m.Z},placements:function(){return l.Ct},popper:function(){return l.k5},popperGenerator:function(){return y.kZ},popperOffsets:function(){return g.Z},preventOverflow:function(){return v.Z},read:function(){return l.ij},reference:function(){return l.YP},right:function(){return l.F2},start:function(){return l.BL},top:function(){return l.we},variationPlacements:function(){return l.bw},viewport:function(){return l.Pj},write:function(){return l.cW}});n(1703),n(7658);var i=n(8473),o=n(4188),s=n(4887),a=n(9197),l=n(7385),c=n(94),u=n(2066),d=n(1870),h=n(3116),f=n(5805),p=n(8948),m=n(7953),g=n(3268),v=n(8285),y=n(8106),b=n(6707),_=n(1320),w=[h.Z,g.Z,d.Z,c.Z],x=(0,y.kZ)({defaultModifiers:w});
/*!
  * Bootstrap v5.2.1 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
const S=1e6,E=1e3,M="transitionend",T=e=>null===e||void 0===e?`${e}`:Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase(),C=e=>{do{e+=Math.floor(Math.random()*S)}while(document.getElementById(e));return e},A=e=>{let t=e.getAttribute("data-bs-target");if(!t||"#"===t){let n=e.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),t=n&&"#"!==n?n.trim():null}return t},k=e=>{const t=A(e);return t&&document.querySelector(t)?t:null},O=e=>{const t=A(e);return t?document.querySelector(t):null},R=e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:n}=window.getComputedStyle(e);const r=Number.parseFloat(t),i=Number.parseFloat(n);return r||i?(t=t.split(",")[0],n=n.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(n))*E):0},P=e=>{e.dispatchEvent(new Event(M))},L=e=>!(!e||"object"!==typeof e)&&("undefined"!==typeof e.jquery&&(e=e[0]),"undefined"!==typeof e.nodeType),D=e=>L(e)?e.jquery?e[0]:e:"string"===typeof e&&e.length>0?document.querySelector(e):null,I=e=>{if(!L(e)||0===e.getClientRects().length)return!1;const t="visible"===getComputedStyle(e).getPropertyValue("visibility"),n=e.closest("details:not([open])");if(!n)return t;if(n!==e){const t=e.closest("summary");if(t&&t.parentNode!==n)return!1;if(null===t)return!1}return t},N=e=>!e||e.nodeType!==Node.ELEMENT_NODE||(!!e.classList.contains("disabled")||("undefined"!==typeof e.disabled?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled"))),U=e=>{if(!document.documentElement.attachShadow)return null;if("function"===typeof e.getRootNode){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?U(e.parentNode):null},F=()=>{},B=e=>{e.offsetHeight},V=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,z=[],j=e=>{"loading"===document.readyState?(z.length||document.addEventListener("DOMContentLoaded",(()=>{for(const e of z)e()})),z.push(e)):e()},H=()=>"rtl"===document.documentElement.dir,W=e=>{j((()=>{const t=V();if(t){const n=e.NAME,r=t.fn[n];t.fn[n]=e.jQueryInterface,t.fn[n].Constructor=e,t.fn[n].noConflict=()=>(t.fn[n]=r,e.jQueryInterface)}}))},G=e=>{"function"===typeof e&&e()},$=(e,t,n=!0)=>{if(!n)return void G(e);const r=5,i=R(t)+r;let o=!1;const s=({target:n})=>{n===t&&(o=!0,t.removeEventListener(M,s),G(e))};t.addEventListener(M,s),setTimeout((()=>{o||P(t)}),i)},q=(e,t,n,r)=>{const i=e.length;let o=e.indexOf(t);return-1===o?!n&&r?e[i-1]:e[0]:(o+=n?1:-1,r&&(o=(o+i)%i),e[Math.max(0,Math.min(o,i-1))])},Y=/[^.]*(?=\..*)\.|.*/,X=/\..*/,Z=/::\d+$/,K={};let J=1;const Q={mouseenter:"mouseover",mouseleave:"mouseout"},ee=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function te(e,t){return t&&`${t}::${J++}`||e.uidEvent||J++}function ne(e){const t=te(e);return e.uidEvent=t,K[t]=K[t]||{},K[t]}function re(e,t){return function n(r){return he(r,{delegateTarget:e}),n.oneOff&&de.off(e,r.type,t),t.apply(e,[r])}}function ie(e,t,n){return function r(i){const o=e.querySelectorAll(t);for(let{target:s}=i;s&&s!==this;s=s.parentNode)for(const a of o)if(a===s)return he(i,{delegateTarget:s}),r.oneOff&&de.off(e,i.type,t,n),n.apply(s,[i])}}function oe(e,t,n=null){return Object.values(e).find((e=>e.callable===t&&e.delegationSelector===n))}function se(e,t,n){const r="string"===typeof t,i=r?n:t||n;let o=ue(e);return ee.has(o)||(o=e),[r,i,o]}function ae(e,t,n,r,i){if("string"!==typeof t||!e)return;let[o,s,a]=se(t,n,r);if(t in Q){const e=e=>function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return e.call(this,t)};s=e(s)}const l=ne(e),c=l[a]||(l[a]={}),u=oe(c,s,o?n:null);if(u)return void(u.oneOff=u.oneOff&&i);const d=te(s,t.replace(Y,"")),h=o?ie(e,n,s):re(e,s);h.delegationSelector=o?n:null,h.callable=s,h.oneOff=i,h.uidEvent=d,c[d]=h,e.addEventListener(a,h,o)}function le(e,t,n,r,i){const o=oe(t[n],r,i);o&&(e.removeEventListener(n,o,Boolean(i)),delete t[n][o.uidEvent])}function ce(e,t,n,r){const i=t[n]||{};for(const o of Object.keys(i))if(o.includes(r)){const r=i[o];le(e,t,n,r.callable,r.delegationSelector)}}function ue(e){return e=e.replace(X,""),Q[e]||e}const de={on(e,t,n,r){ae(e,t,n,r,!1)},one(e,t,n,r){ae(e,t,n,r,!0)},off(e,t,n,r){if("string"!==typeof t||!e)return;const[i,o,s]=se(t,n,r),a=s!==t,l=ne(e),c=l[s]||{},u=t.startsWith(".");if("undefined"===typeof o){if(u)for(const n of Object.keys(l))ce(e,l,n,t.slice(1));for(const n of Object.keys(c)){const r=n.replace(Z,"");if(!a||t.includes(r)){const t=c[n];le(e,l,s,t.callable,t.delegationSelector)}}}else{if(!Object.keys(c).length)return;le(e,l,s,o,i?n:null)}},trigger(e,t,n){if("string"!==typeof t||!e)return null;const r=V(),i=ue(t),o=t!==i;let s=null,a=!0,l=!0,c=!1;o&&r&&(s=r.Event(t,n),r(e).trigger(s),a=!s.isPropagationStopped(),l=!s.isImmediatePropagationStopped(),c=s.isDefaultPrevented());let u=new Event(t,{bubbles:a,cancelable:!0});return u=he(u,n),c&&u.preventDefault(),l&&e.dispatchEvent(u),u.defaultPrevented&&s&&s.preventDefault(),u}};function he(e,t){for(const[r,i]of Object.entries(t||{}))try{e[r]=i}catch(n){Object.defineProperty(e,r,{configurable:!0,get(){return i}})}return e}const fe=new Map,pe={set(e,t,n){fe.has(e)||fe.set(e,new Map);const r=fe.get(e);r.has(t)||0===r.size?r.set(t,n):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(r.keys())[0]}.`)},get(e,t){return fe.has(e)&&fe.get(e).get(t)||null},remove(e,t){if(!fe.has(e))return;const n=fe.get(e);n.delete(t),0===n.size&&fe.delete(e)}};function me(e){if("true"===e)return!0;if("false"===e)return!1;if(e===Number(e).toString())return Number(e);if(""===e||"null"===e)return null;if("string"!==typeof e)return e;try{return JSON.parse(decodeURIComponent(e))}catch(t){return e}}function ge(e){return e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}const ve={setDataAttribute(e,t,n){e.setAttribute(`data-bs-${ge(t)}`,n)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${ge(t)}`)},getDataAttributes(e){if(!e)return{};const t={},n=Object.keys(e.dataset).filter((e=>e.startsWith("bs")&&!e.startsWith("bsConfig")));for(const r of n){let n=r.replace(/^bs/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),t[n]=me(e.dataset[r])}return t},getDataAttribute(e,t){return me(e.getAttribute(`data-bs-${ge(t)}`))}};class ye{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const n=L(t)?ve.getDataAttribute(t,"config"):{};return{...this.constructor.Default,..."object"===typeof n?n:{},...L(t)?ve.getDataAttributes(t):{},..."object"===typeof e?e:{}}}_typeCheckConfig(e,t=this.constructor.DefaultType){for(const n of Object.keys(t)){const r=t[n],i=e[n],o=L(i)?"element":T(i);if(!new RegExp(r).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${n}" provided type "${o}" but expected type "${r}".`)}}}const be="5.2.1";class _e extends ye{constructor(e,t){super(),e=D(e),e&&(this._element=e,this._config=this._getConfig(t),pe.set(this._element,this.constructor.DATA_KEY,this))}dispose(){pe.remove(this._element,this.constructor.DATA_KEY),de.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t,n=!0){$(e,t,n)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return pe.get(D(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,"object"===typeof t?t:null)}static get VERSION(){return be}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const we=(e,t="hide")=>{const n=`click.dismiss${e.EVENT_KEY}`,r=e.NAME;de.on(document,n,`[data-bs-dismiss="${r}"]`,(function(n){if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),N(this))return;const i=O(this)||this.closest(`.${r}`),o=e.getOrCreateInstance(i);o[t]()}))},xe="alert",Se="bs.alert",Ee=`.${Se}`,Me=`close${Ee}`,Te=`closed${Ee}`,Ce="fade",Ae="show";class ke extends _e{static get NAME(){return xe}close(){const e=de.trigger(this._element,Me);if(e.defaultPrevented)return;this._element.classList.remove(Ae);const t=this._element.classList.contains(Ce);this._queueCallback((()=>this._destroyElement()),this._element,t)}_destroyElement(){this._element.remove(),de.trigger(this._element,Te),this.dispose()}static jQueryInterface(e){return this.each((function(){const t=ke.getOrCreateInstance(this);if("string"===typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}}))}}we(ke,"close"),W(ke);const Oe="button",Re="bs.button",Pe=`.${Re}`,Le=".data-api",De="active",Ie='[data-bs-toggle="button"]',Ne=`click${Pe}${Le}`;class Ue extends _e{static get NAME(){return Oe}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(De))}static jQueryInterface(e){return this.each((function(){const t=Ue.getOrCreateInstance(this);"toggle"===e&&t[e]()}))}}de.on(document,Ne,Ie,(e=>{e.preventDefault();const t=e.target.closest(Ie),n=Ue.getOrCreateInstance(t);n.toggle()})),W(Ue);const Fe={find(e,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,e))},findOne(e,t=document.documentElement){return Element.prototype.querySelector.call(t,e)},children(e,t){return[].concat(...e.children).filter((e=>e.matches(t)))},parents(e,t){const n=[];let r=e.parentNode.closest(t);while(r)n.push(r),r=r.parentNode.closest(t);return n},prev(e,t){let n=e.previousElementSibling;while(n){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(e,t){let n=e.nextElementSibling;while(n){if(n.matches(t))return[n];n=n.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((e=>`${e}:not([tabindex^="-"])`)).join(",");return this.find(t,e).filter((e=>!N(e)&&I(e)))}},Be="swipe",Ve=".bs.swipe",ze=`touchstart${Ve}`,je=`touchmove${Ve}`,He=`touchend${Ve}`,We=`pointerdown${Ve}`,Ge=`pointerup${Ve}`,$e="touch",qe="pen",Ye="pointer-event",Xe=40,Ze={endCallback:null,leftCallback:null,rightCallback:null},Ke={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Je extends ye{constructor(e,t){super(),this._element=e,e&&Je.isSupported()&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return Ze}static get DefaultType(){return Ke}static get NAME(){return Be}dispose(){de.off(this._element,Ve)}_start(e){this._supportPointerEvents?this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX):this._deltaX=e.touches[0].clientX}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),G(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=Xe)return;const t=e/this._deltaX;this._deltaX=0,t&&G(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(de.on(this._element,We,(e=>this._start(e))),de.on(this._element,Ge,(e=>this._end(e))),this._element.classList.add(Ye)):(de.on(this._element,ze,(e=>this._start(e))),de.on(this._element,je,(e=>this._move(e))),de.on(this._element,He,(e=>this._end(e))))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===qe||e.pointerType===$e)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Qe="carousel",et="bs.carousel",tt=`.${et}`,nt=".data-api",rt="ArrowLeft",it="ArrowRight",ot=500,st="next",at="prev",lt="left",ct="right",ut=`slide${tt}`,dt=`slid${tt}`,ht=`keydown${tt}`,ft=`mouseenter${tt}`,pt=`mouseleave${tt}`,mt=`dragstart${tt}`,gt=`load${tt}${nt}`,vt=`click${tt}${nt}`,yt="carousel",bt="active",_t="slide",wt="carousel-item-end",xt="carousel-item-start",St="carousel-item-next",Et="carousel-item-prev",Mt=".active",Tt=".carousel-item",Ct=Mt+Tt,At=".carousel-item img",kt=".carousel-indicators",Ot="[data-bs-slide], [data-bs-slide-to]",Rt='[data-bs-ride="carousel"]',Pt={[rt]:ct,[it]:lt},Lt={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Dt={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class It extends _e{constructor(e,t){super(e,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Fe.findOne(kt,this._element),this._addEventListeners(),this._config.ride===yt&&this.cycle()}static get Default(){return Lt}static get DefaultType(){return Dt}static get NAME(){return Qe}next(){this._slide(st)}nextWhenVisible(){!document.hidden&&I(this._element)&&this.next()}prev(){this._slide(at)}pause(){this._isSliding&&P(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval((()=>this.nextWhenVisible()),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?de.one(this._element,dt,(()=>this.cycle())):this.cycle())}to(e){const t=this._getItems();if(e>t.length-1||e<0)return;if(this._isSliding)return void de.one(this._element,dt,(()=>this.to(e)));const n=this._getItemIndex(this._getActive());if(n===e)return;const r=e>n?st:at;this._slide(r,t[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&de.on(this._element,ht,(e=>this._keydown(e))),"hover"===this._config.pause&&(de.on(this._element,ft,(()=>this.pause())),de.on(this._element,pt,(()=>this._maybeEnableCycle()))),this._config.touch&&Je.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const n of Fe.find(At,this._element))de.on(n,mt,(e=>e.preventDefault()));const e=()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((()=>this._maybeEnableCycle()),ot+this._config.interval))},t={leftCallback:()=>this._slide(this._directionToOrder(lt)),rightCallback:()=>this._slide(this._directionToOrder(ct)),endCallback:e};this._swipeHelper=new Je(this._element,t)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=Pt[e.key];t&&(e.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const t=Fe.findOne(Mt,this._indicatorsElement);t.classList.remove(bt),t.removeAttribute("aria-current");const n=Fe.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);n&&(n.classList.add(bt),n.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(e,t=null){if(this._isSliding)return;const n=this._getActive(),r=e===st,i=t||q(this._getItems(),n,r,this._config.wrap);if(i===n)return;const o=this._getItemIndex(i),s=t=>de.trigger(this._element,t,{relatedTarget:i,direction:this._orderToDirection(e),from:this._getItemIndex(n),to:o}),a=s(ut);if(a.defaultPrevented)return;if(!n||!i)return;const l=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=i;const c=r?xt:wt,u=r?St:Et;i.classList.add(u),B(i),n.classList.add(c),i.classList.add(c);const d=()=>{i.classList.remove(c,u),i.classList.add(bt),n.classList.remove(bt,u,c),this._isSliding=!1,s(dt)};this._queueCallback(d,n,this._isAnimated()),l&&this.cycle()}_isAnimated(){return this._element.classList.contains(_t)}_getActive(){return Fe.findOne(Ct,this._element)}_getItems(){return Fe.find(Tt,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return H()?e===lt?at:st:e===lt?st:at}_orderToDirection(e){return H()?e===at?lt:ct:e===at?ct:lt}static jQueryInterface(e){return this.each((function(){const t=It.getOrCreateInstance(this,e);if("number"!==typeof e){if("string"===typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}}else t.to(e)}))}}de.on(document,vt,Ot,(function(e){const t=O(this);if(!t||!t.classList.contains(yt))return;e.preventDefault();const n=It.getOrCreateInstance(t),r=this.getAttribute("data-bs-slide-to");return r?(n.to(r),void n._maybeEnableCycle()):"next"===ve.getDataAttribute(this,"slide")?(n.next(),void n._maybeEnableCycle()):(n.prev(),void n._maybeEnableCycle())})),de.on(window,gt,(()=>{const e=Fe.find(Rt);for(const t of e)It.getOrCreateInstance(t)})),W(It);const Nt="collapse",Ut="bs.collapse",Ft=`.${Ut}`,Bt=".data-api",Vt=`show${Ft}`,zt=`shown${Ft}`,jt=`hide${Ft}`,Ht=`hidden${Ft}`,Wt=`click${Ft}${Bt}`,Gt="show",$t="collapse",qt="collapsing",Yt="collapsed",Xt=`:scope .${$t} .${$t}`,Zt="collapse-horizontal",Kt="width",Jt="height",Qt=".collapse.show, .collapse.collapsing",en='[data-bs-toggle="collapse"]',tn={parent:null,toggle:!0},nn={parent:"(null|element)",toggle:"boolean"};class rn extends _e{constructor(e,t){super(e,t),this._isTransitioning=!1,this._triggerArray=[];const n=Fe.find(en);for(const r of n){const e=k(r),t=Fe.find(e).filter((e=>e===this._element));null!==e&&t.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return tn}static get DefaultType(){return nn}static get NAME(){return Nt}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(Qt).filter((e=>e!==this._element)).map((e=>rn.getOrCreateInstance(e,{toggle:!1})))),e.length&&e[0]._isTransitioning)return;const t=de.trigger(this._element,Vt);if(t.defaultPrevented)return;for(const s of e)s.hide();const n=this._getDimension();this._element.classList.remove($t),this._element.classList.add(qt),this._element.style[n]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(qt),this._element.classList.add($t,Gt),this._element.style[n]="",de.trigger(this._element,zt)},i=n[0].toUpperCase()+n.slice(1),o=`scroll${i}`;this._queueCallback(r,this._element,!0),this._element.style[n]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown())return;const e=de.trigger(this._element,jt);if(e.defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,B(this._element),this._element.classList.add(qt),this._element.classList.remove($t,Gt);for(const r of this._triggerArray){const e=O(r);e&&!this._isShown(e)&&this._addAriaAndCollapsedClass([r],!1)}this._isTransitioning=!0;const n=()=>{this._isTransitioning=!1,this._element.classList.remove(qt),this._element.classList.add($t),de.trigger(this._element,Ht)};this._element.style[t]="",this._queueCallback(n,this._element,!0)}_isShown(e=this._element){return e.classList.contains(Gt)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=D(e.parent),e}_getDimension(){return this._element.classList.contains(Zt)?Kt:Jt}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(en);for(const t of e){const e=O(t);e&&this._addAriaAndCollapsedClass([t],this._isShown(e))}}_getFirstLevelChildren(e){const t=Fe.find(Xt,this._config.parent);return Fe.find(e,this._config.parent).filter((e=>!t.includes(e)))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const n of e)n.classList.toggle(Yt,!t),n.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return"string"===typeof e&&/show|hide/.test(e)&&(t.toggle=!1),this.each((function(){const n=rn.getOrCreateInstance(this,t);if("string"===typeof e){if("undefined"===typeof n[e])throw new TypeError(`No method named "${e}"`);n[e]()}}))}}de.on(document,Wt,en,(function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault();const t=k(this),n=Fe.find(t);for(const r of n)rn.getOrCreateInstance(r,{toggle:!1}).toggle()})),W(rn);const on="dropdown",sn="bs.dropdown",an=`.${sn}`,ln=".data-api",cn="Escape",un="Tab",dn="ArrowUp",hn="ArrowDown",fn=2,pn=`hide${an}`,mn=`hidden${an}`,gn=`show${an}`,vn=`shown${an}`,yn=`click${an}${ln}`,bn=`keydown${an}${ln}`,_n=`keyup${an}${ln}`,wn="show",xn="dropup",Sn="dropend",En="dropstart",Mn="dropup-center",Tn="dropdown-center",Cn='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',An=`${Cn}.${wn}`,kn=".dropdown-menu",On=".navbar",Rn=".navbar-nav",Pn=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Ln=H()?"top-end":"top-start",Dn=H()?"top-start":"top-end",In=H()?"bottom-end":"bottom-start",Nn=H()?"bottom-start":"bottom-end",Un=H()?"left-start":"right-start",Fn=H()?"right-start":"left-start",Bn="top",Vn="bottom",zn={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},jn={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Hn extends _e{constructor(e,t){super(e,t),this._popper=null,this._parent=this._element.parentNode,this._menu=Fe.next(this._element,kn)[0]||Fe.prev(this._element,kn)[0],this._inNavbar=this._detectNavbar()}static get Default(){return zn}static get DefaultType(){return jn}static get NAME(){return on}toggle(){return this._isShown()?this.hide():this.show()}show(){if(N(this._element)||this._isShown())return;const e={relatedTarget:this._element},t=de.trigger(this._element,gn,e);if(!t.defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(Rn))for(const e of[].concat(...document.body.children))de.on(e,"mouseover",F);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(wn),this._element.classList.add(wn),de.trigger(this._element,vn,e)}}hide(){if(N(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){const t=de.trigger(this._element,pn,e);if(!t.defaultPrevented){if("ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))de.off(e,"mouseover",F);this._popper&&this._popper.destroy(),this._menu.classList.remove(wn),this._element.classList.remove(wn),this._element.setAttribute("aria-expanded","false"),ve.removeDataAttribute(this._menu,"popper"),de.trigger(this._element,mn,e)}}_getConfig(e){if(e=super._getConfig(e),"object"===typeof e.reference&&!L(e.reference)&&"function"!==typeof e.reference.getBoundingClientRect)throw new TypeError(`${on.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if("undefined"===typeof r)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;"parent"===this._config.reference?e=this._parent:L(this._config.reference)?e=D(this._config.reference):"object"===typeof this._config.reference&&(e=this._config.reference);const t=this._getPopperConfig();this._popper=_.fi(e,this._menu,t)}_isShown(){return this._menu.classList.contains(wn)}_getPlacement(){const e=this._parent;if(e.classList.contains(Sn))return Un;if(e.classList.contains(En))return Fn;if(e.classList.contains(Mn))return Bn;if(e.classList.contains(Tn))return Vn;const t="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return e.classList.contains(xn)?t?Dn:Ln:t?Nn:In}_detectNavbar(){return null!==this._element.closest(On)}_getOffset(){const{offset:e}=this._config;return"string"===typeof e?e.split(",").map((e=>Number.parseInt(e,10))):"function"===typeof e?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(ve.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,..."function"===typeof this._config.popperConfig?this._config.popperConfig(e):this._config.popperConfig}}_selectMenuItem({key:e,target:t}){const n=Fe.find(Pn,this._menu).filter((e=>I(e)));n.length&&q(n,t,e===hn,!n.includes(t)).focus()}static jQueryInterface(e){return this.each((function(){const t=Hn.getOrCreateInstance(this,e);if("string"===typeof e){if("undefined"===typeof t[e])throw new TypeError(`No method named "${e}"`);t[e]()}}))}static clearMenus(e){if(e.button===fn||"keyup"===e.type&&e.key!==un)return;const t=Fe.find(An);for(const n of t){const t=Hn.getInstance(n);if(!t||!1===t._config.autoClose)continue;const r=e.composedPath(),i=r.includes(t._menu);if(r.includes(t._element)||"inside"===t._config.autoClose&&!i||"outside"===t._config.autoClose&&i)continue;if(t._menu.contains(e.target)&&("keyup"===e.type&&e.key===un||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const o={relatedTarget:t._element};"click"===e.type&&(o.clickEvent=e),t._completeHide(o)}}static dataApiKeydownHandler(e){const t=/input|textarea/i.test(e.target.tagName),n=e.key===cn,r=[dn,hn].includes(e.key);if(!r&&!n)return;if(t&&!n)return;e.preventDefault();const i=this.matches(Cn)?this:Fe.prev(this,Cn)[0]||Fe.next(this,Cn)[0],o=Hn.getOrCreateInstance(i);if(r)return e.stopPropagation(),o.show(),void o._selectMenuItem(e);o._isShown()&&(e.stopPropagation(),o.hide(),i.focus())}}de.on(document,bn,Cn,Hn.dataApiKeydownHandler),de.on(document,bn,kn,Hn.dataApiKeydownHandler),de.on(document,yn,Hn.clearMenus),de.on(document,_n,Hn.clearMenus),de.on(document,yn,Cn,(function(e){e.preventDefault(),Hn.getOrCreateInstance(this).toggle()})),W(Hn);const Wn=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Gn=".sticky-top",$n="padding-right",qn="margin-right";class Yn{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,$n,(t=>t+e)),this._setElementAttributes(Wn,$n,(t=>t+e)),this._setElementAttributes(Gn,qn,(t=>t-e))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,$n),this._resetElementAttributes(Wn,$n),this._resetElementAttributes(Gn,qn)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,n){const r=this.getWidth(),i=e=>{if(e!==this._element&&window.innerWidth>e.clientWidth+r)return;this._saveInitialAttribute(e,t);const i=window.getComputedStyle(e).getPropertyValue(t);e.style.setProperty(t,`${n(Number.parseFloat(i))}px`)};this._applyManipulationCallback(e,i)}_saveInitialAttribute(e,t){const n=e.style.getPropertyValue(t);n&&ve.setDataAttribute(e,t,n)}_resetElementAttributes(e,t){const n=e=>{const n=ve.getDataAttribute(e,t);null!==n?(ve.removeDataAttribute(e,t),e.style.setProperty(t,n)):e.style.removeProperty(t)};this._applyManipulationCallback(e,n)}_applyManipulationCallback(e,t){if(L(e))t(e);else for(const n of Fe.find(e,this._element))t(n)}}const Xn="backdrop",Zn="fade",Kn="show",Jn=`mousedown.bs.${Xn}`,Qn={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},er={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class tr extends ye{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Qn}static get DefaultType(){return er}static get NAME(){return Xn}show(e){if(!this._config.isVisible)return void G(e);this._append();const t=this._getElement();this._config.isAnimated&&B(t),t.classList.add(Kn),this._emulateAnimation((()=>{G(e)}))}hide(e){this._config.isVisible?(this._getElement().classList.remove(Kn),this._emulateAnimation((()=>{this.dispose(),G(e)}))):G(e)}dispose(){this._isAppended&&(de.off(this._element,Jn),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(Zn),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=D(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),de.on(e,Jn,(()=>{G(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(e){$(e,this._getElement(),this._config.isAnimated)}}const nr="focustrap",rr="bs.focustrap",ir=`.${rr}`,or=`focusin${ir}`,sr=`keydown.tab${ir}`,ar="Tab",lr="forward",cr="backward",ur={autofocus:!0,trapElement:null},dr={autofocus:"boolean",trapElement:"element"};class hr extends ye{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return ur}static get DefaultType(){return dr}static get NAME(){return nr}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),de.off(document,ir),de.on(document,or,(e=>this._handleFocusin(e))),de.on(document,sr,(e=>this._handleKeydown(e))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,de.off(document,ir))}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;const n=Fe.focusableChildren(t);0===n.length?t.focus():this._lastTabNavDirection===cr?n[n.length-1].focus():n[0].focus()}_handleKeydown(e){e.key===ar&&(this._lastTabNavDirection=e.shiftKey?cr:lr)}}const fr="modal",pr="bs.modal",mr=`.${pr}`,gr=".data-api",vr="Escape",yr=`hide${mr}`,br=`hidePrevented${mr}`,_r=`hidden${mr}`,wr=`show${mr}`,xr=`shown${mr}`,Sr=`resize${mr}`,Er=`click.dismiss${mr}`,Mr=`mousedown.dismiss${mr}`,Tr=`keydown.dismiss${mr}`,Cr=`click${mr}${gr}`,Ar="modal-open",kr="fade",Or="show",Rr="modal-static",Pr=".modal.show",Lr=".modal-dialog",Dr=".modal-body",Ir='[data-bs-toggle="modal"]',Nr={backdrop:!0,focus:!0,keyboard:!0},Ur={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Fr extends _e{constructor(e,t){super(e,t),this._dialog=Fe.findOne(Lr,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Yn,this._addEventListeners()}static get Default(){return Nr}static get DefaultType(){return Ur}static get NAME(){return fr}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||this._isTransitioning)return;const t=de.trigger(this._element,wr,{relatedTarget:e});t.defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Ar),this._adjustDialog(),this._backdrop.show((()=>this._showElement(e))))}hide(){if(!this._isShown||this._isTransitioning)return;const e=de.trigger(this._element,yr);e.defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Or),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated()))}dispose(){for(const e of[window,this._dialog])de.off(e,mr);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new tr({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new hr({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=Fe.findOne(Dr,this._dialog);t&&(t.scrollTop=0),B(this._element),this._element.classList.add(Or);const n=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,de.trigger(this._element,xr,{relatedTarget:e})};this._queueCallback(n,this._dialog,this._isAnimated())}_addEventListeners(){de.on(this._element,Tr,(e=>{if(e.key===vr)return this._config.keyboard?(e.preventDefault(),void this.hide()):void this._triggerBackdropTransition()})),de.on(window,Sr,(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),de.on(this._element,Mr,(e=>{de.one(this._element,Er,(t=>{this._dialog.contains(e.target)||this._dialog.contains(t.target)||("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(Ar),this._resetAdjustments(),this._scrollBar.reset(),de.trigger(this._element,_r)}))}_isAnimated(){return this._element.classList.contains(kr)}_triggerBackdropTransition(){const e=de.trigger(this._element,br);if(e.defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,n=this._element.style.overflowY;"hidden"===n||this._element.classList.contains(Rr)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(Rr),this._queueCallback((()=>{this._element.classList.remove(Rr),this._queueCallback((()=>{this._element.style.overflowY=n}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),n=t>0;if(n&&!e){const e=H()?"paddingLeft":"paddingRight";this._element.style[e]=`${t}px`}if(!n&&e){const e=H()?"paddingRight":"paddingLeft";this._element.style[e]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each((function(){const n=Fr.getOrCreateInstance(this,e);if("string"===typeof e){if("undefined"===typeof n[e])throw new TypeError(`No method named "${e}"`);n[e](t)}}))}}de.on(document,Cr,Ir,(function(e){const t=O(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),de.one(t,wr,(e=>{e.defaultPrevented||de.one(t,_r,(()=>{I(this)&&this.focus()}))}));const n=Fe.findOne(Pr);n&&Fr.getInstance(n).hide();const r=Fr.getOrCreateInstance(t);r.toggle(this)})),we(Fr),W(Fr);const Br="offcanvas",Vr="bs.offcanvas",zr=`.${Vr}`,jr=".data-api",Hr=`load${zr}${jr}`,Wr="Escape",Gr="show",$r="showing",qr="hiding",Yr="offcanvas-backdrop",Xr=".offcanvas.show",Zr=`show${zr}`,Kr=`shown${zr}`,Jr=`hide${zr}`,Qr=`hidePrevented${zr}`,ei=`hidden${zr}`,ti=`resize${zr}`,ni=`click${zr}${jr}`,ri=`keydown.dismiss${zr}`,ii='[data-bs-toggle="offcanvas"]',oi={backdrop:!0,keyboard:!0,scroll:!1},si={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class ai extends _e{constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return oi}static get DefaultType(){return si}static get NAME(){return Br}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown)return;const t=de.trigger(this._element,Zr,{relatedTarget:e});if(t.defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||(new Yn).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add($r);const n=()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Gr),this._element.classList.remove($r),de.trigger(this._element,Kr,{relatedTarget:e})};this._queueCallback(n,this._element,!0)}hide(){if(!this._isShown)return;const e=de.trigger(this._element,Jr);if(e.defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(qr),this._backdrop.hide();const t=()=>{this._element.classList.remove(Gr,qr),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new Yn).reset(),de.trigger(this._element,ei)};this._queueCallback(t,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{"static"!==this._config.backdrop?this.hide():de.trigger(this._element,Qr)},t=Boolean(this._config.backdrop);return new tr({className:Yr,isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?e:null})}_initializeFocusTrap(){return new hr({trapElement:this._element})}_addEventListeners(){de.on(this._element,ri,(e=>{e.key===Wr&&(this._config.keyboard?this.hide():de.trigger(this._element,Qr))}))}static jQueryInterface(e){return this.each((function(){const t=ai.getOrCreateInstance(this,e);if("string"===typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}}))}}de.on(document,ni,ii,(function(e){const t=O(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),N(this))return;de.one(t,ei,(()=>{I(this)&&this.focus()}));const n=Fe.findOne(Xr);n&&n!==t&&ai.getInstance(n).hide();const r=ai.getOrCreateInstance(t);r.toggle(this)})),de.on(window,Hr,(()=>{for(const e of Fe.find(Xr))ai.getOrCreateInstance(e).show()})),de.on(window,ti,(()=>{for(const e of Fe.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(e).position&&ai.getOrCreateInstance(e).hide()})),we(ai),W(ai);const li=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),ci=/^aria-[\w-]*$/i,ui=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,di=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,hi=(e,t)=>{const n=e.nodeName.toLowerCase();return t.includes(n)?!li.has(n)||Boolean(ui.test(e.nodeValue)||di.test(e.nodeValue)):t.filter((e=>e instanceof RegExp)).some((e=>e.test(n)))},fi={"*":["class","dir","id","lang","role",ci],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function pi(e,t,n){if(!e.length)return e;if(n&&"function"===typeof n)return n(e);const r=new window.DOMParser,i=r.parseFromString(e,"text/html"),o=[].concat(...i.body.querySelectorAll("*"));for(const s of o){const e=s.nodeName.toLowerCase();if(!Object.keys(t).includes(e)){s.remove();continue}const n=[].concat(...s.attributes),r=[].concat(t["*"]||[],t[e]||[]);for(const t of n)hi(t,r)||s.removeAttribute(t.nodeName)}return i.body.innerHTML}const mi="TemplateFactory",gi={allowList:fi,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},vi={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},yi={entry:"(string|element|function|null)",selector:"(string|element)"};class bi extends ye{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return gi}static get DefaultType(){return vi}static get NAME(){return mi}getContent(){return Object.values(this._config.content).map((e=>this._resolvePossibleFunction(e))).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[r,i]of Object.entries(this._config.content))this._setContent(e,i,r);const t=e.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&t.classList.add(...n.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[t,n]of Object.entries(e))super._typeCheckConfig({selector:t,entry:n},yi)}_setContent(e,t,n){const r=Fe.findOne(n,e);r&&(t=this._resolvePossibleFunction(t),t?L(t)?this._putElementInTemplate(D(t),r):this._config.html?r.innerHTML=this._maybeSanitize(t):r.textContent=t:r.remove())}_maybeSanitize(e){return this._config.sanitize?pi(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return"function"===typeof e?e(this):e}_putElementInTemplate(e,t){if(this._config.html)return t.innerHTML="",void t.append(e);t.textContent=e.textContent}}const _i="tooltip",wi=new Set(["sanitize","allowList","sanitizeFn"]),xi="fade",Si="modal",Ei="show",Mi=".tooltip-inner",Ti=`.${Si}`,Ci="hide.bs.modal",Ai="hover",ki="focus",Oi="click",Ri="manual",Pi="hide",Li="hidden",Di="show",Ii="shown",Ni="inserted",Ui="click",Fi="focusin",Bi="focusout",Vi="mouseenter",zi="mouseleave",ji={AUTO:"auto",TOP:"top",RIGHT:H()?"left":"right",BOTTOM:"bottom",LEFT:H()?"right":"left"},Hi={allowList:fi,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Wi={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Gi extends _e{constructor(e,t){if("undefined"===typeof r)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners()}static get Default(){return Hi}static get DefaultType(){return Wi}static get NAME(){return _i}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(e){if(this._isEnabled){if(e){const t=this._initializeOnDelegatedTarget(e);return t._activeTrigger.click=!t._activeTrigger.click,void(t._isWithActiveTrigger()?t._enter():t._leave())}this._isShown()?this._leave():this._enter()}}dispose(){clearTimeout(this._timeout),de.off(this._element.closest(Ti),Ci,this._hideModalHandler),this.tip&&this.tip.remove(),this._config.originalTitle&&this._element.setAttribute("title",this._config.originalTitle),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const e=de.trigger(this._element,this.constructor.eventName(Di)),t=U(this._element),n=(t||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!n)return;this.tip&&(this.tip.remove(),this.tip=null);const r=this._getTipElement();this._element.setAttribute("aria-describedby",r.getAttribute("id"));const{container:i}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(i.append(r),de.trigger(this._element,this.constructor.eventName(Ni))),this._popper?this._popper.update():this._popper=this._createPopper(r),r.classList.add(Ei),"ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))de.on(s,"mouseover",F);const o=()=>{de.trigger(this._element,this.constructor.eventName(Ii)),!1===this._isHovered&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown())return;const e=de.trigger(this._element,this.constructor.eventName(Pi));if(e.defaultPrevented)return;const t=this._getTipElement();if(t.classList.remove(Ei),"ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))de.off(r,"mouseover",F);this._activeTrigger[Oi]=!1,this._activeTrigger[ki]=!1,this._activeTrigger[Ai]=!1,this._isHovered=null;const n=()=>{this._isWithActiveTrigger()||(this._isHovered||t.remove(),this._element.removeAttribute("aria-describedby"),de.trigger(this._element,this.constructor.eventName(Li)),this._disposePopper())};this._queueCallback(n,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(xi,Ei),t.classList.add(`bs-${this.constructor.NAME}-auto`);const n=C(this.constructor.NAME).toString();return t.setAttribute("id",n),this._isAnimated()&&t.classList.add(xi),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new bi({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Mi]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._config.originalTitle}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(xi)}_isShown(){return this.tip&&this.tip.classList.contains(Ei)}_createPopper(e){const t="function"===typeof this._config.placement?this._config.placement.call(this,e,this._element):this._config.placement,n=ji[t.toUpperCase()];return _.fi(this._element,e,this._getPopperConfig(n))}_getOffset(){const{offset:e}=this._config;return"string"===typeof e?e.split(",").map((e=>Number.parseInt(e,10))):"function"===typeof e?t=>e(t,this._element):e}_resolvePossibleFunction(e){return"function"===typeof e?e.call(this._element):e}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:e=>{this._getTipElement().setAttribute("data-popper-placement",e.state.placement)}}]};return{...t,..."function"===typeof this._config.popperConfig?this._config.popperConfig(t):this._config.popperConfig}}_setListeners(){const e=this._config.trigger.split(" ");for(const t of e)if("click"===t)de.on(this._element,this.constructor.eventName(Ui),this._config.selector,(e=>this.toggle(e)));else if(t!==Ri){const e=t===Ai?this.constructor.eventName(Vi):this.constructor.eventName(Fi),n=t===Ai?this.constructor.eventName(zi):this.constructor.eventName(Bi);de.on(this._element,e,this._config.selector,(e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusin"===e.type?ki:Ai]=!0,t._enter()})),de.on(this._element,n,this._config.selector,(e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusout"===e.type?ki:Ai]=t._element.contains(e.relatedTarget),t._leave()}))}this._hideModalHandler=()=>{this._element&&this.hide()},de.on(this._element.closest(Ti),Ci,this._hideModalHandler),this._config.selector?this._config={...this._config,trigger:"manual",selector:""}:this._fixTitle()}_fixTitle(){const e=this._config.originalTitle;e&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",e),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout((()=>{this._isHovered&&this.show()}),this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout((()=>{this._isHovered||this.hide()}),this._config.delay.hide))}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const t=ve.getDataAttributes(this._element);for(const n of Object.keys(t))wi.has(n)&&delete t[n];return e={...t,..."object"===typeof e&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=!1===e.container?document.body:D(e.container),"number"===typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e.originalTitle=this._element.getAttribute("title")||"","number"===typeof e.title&&(e.title=e.title.toString()),"number"===typeof e.content&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const t in this._config)this.constructor.Default[t]!==this._config[t]&&(e[t]=this._config[t]);return e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null)}static jQueryInterface(e){return this.each((function(){const t=Gi.getOrCreateInstance(this,e);if("string"===typeof e){if("undefined"===typeof t[e])throw new TypeError(`No method named "${e}"`);t[e]()}}))}}W(Gi);const $i="popover",qi=".popover-header",Yi=".popover-body",Xi={...Gi.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Zi={...Gi.DefaultType,content:"(null|string|element|function)"};class Ki extends Gi{static get Default(){return Xi}static get DefaultType(){return Zi}static get NAME(){return $i}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[qi]:this._getTitle(),[Yi]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each((function(){const t=Ki.getOrCreateInstance(this,e);if("string"===typeof e){if("undefined"===typeof t[e])throw new TypeError(`No method named "${e}"`);t[e]()}}))}}W(Ki);const Ji="scrollspy",Qi="bs.scrollspy",eo=`.${Qi}`,to=".data-api",no=`activate${eo}`,ro=`click${eo}`,io=`load${eo}${to}`,oo="dropdown-item",so="active",ao='[data-bs-spy="scroll"]',lo="[href]",co=".nav, .list-group",uo=".nav-link",ho=".nav-item",fo=".list-group-item",po=`${uo}, ${ho} > ${uo}, ${fo}`,mo=".dropdown",go=".dropdown-toggle",vo={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},yo={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class bo extends _e{constructor(e,t){super(e,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return vo}static get DefaultType(){return yo}static get NAME(){return Ji}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=D(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,"string"===typeof e.threshold&&(e.threshold=e.threshold.split(",").map((e=>Number.parseFloat(e)))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(de.off(this._config.target,ro),de.on(this._config.target,ro,lo,(e=>{const t=this._observableSections.get(e.target.hash);if(t){e.preventDefault();const n=this._rootElement||window,r=t.offsetTop-this._element.offsetTop;if(n.scrollTo)return void n.scrollTo({top:r,behavior:"smooth"});n.scrollTop=r}})))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver((e=>this._observerCallback(e)),e)}_observerCallback(e){const t=e=>this._targetLinks.get(`#${e.target.id}`),n=e=>{this._previousScrollData.visibleEntryTop=e.target.offsetTop,this._process(t(e))},r=(this._rootElement||document.documentElement).scrollTop,i=r>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=r;for(const o of e){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(o));continue}const e=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(i&&e){if(n(o),!r)return}else i||e||n(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=Fe.find(lo,this._config.target);for(const t of e){if(!t.hash||N(t))continue;const e=Fe.findOne(t.hash,this._element);I(e)&&(this._targetLinks.set(t.hash,t),this._observableSections.set(t.hash,e))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(so),this._activateParents(e),de.trigger(this._element,no,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(oo))Fe.findOne(go,e.closest(mo)).classList.add(so);else for(const t of Fe.parents(e,co))for(const e of Fe.prev(t,po))e.classList.add(so)}_clearActiveClass(e){e.classList.remove(so);const t=Fe.find(`${lo}.${so}`,e);for(const n of t)n.classList.remove(so)}static jQueryInterface(e){return this.each((function(){const t=bo.getOrCreateInstance(this,e);if("string"===typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}}))}}de.on(window,io,(()=>{for(const e of Fe.find(ao))bo.getOrCreateInstance(e)})),W(bo);const _o="tab",wo="bs.tab",xo=`.${wo}`,So=`hide${xo}`,Eo=`hidden${xo}`,Mo=`show${xo}`,To=`shown${xo}`,Co=`click${xo}`,Ao=`keydown${xo}`,ko=`load${xo}`,Oo="ArrowLeft",Ro="ArrowRight",Po="ArrowUp",Lo="ArrowDown",Do="active",Io="fade",No="show",Uo="dropdown",Fo=".dropdown-toggle",Bo=".dropdown-menu",Vo=".dropdown-item",zo=":not(.dropdown-toggle)",jo='.list-group, .nav, [role="tablist"]',Ho=".nav-item, .list-group-item",Wo=`.nav-link${zo}, .list-group-item${zo}, [role="tab"]${zo}`,Go='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',$o=`${Wo}, ${Go}`,qo=`.${Do}[data-bs-toggle="tab"], .${Do}[data-bs-toggle="pill"], .${Do}[data-bs-toggle="list"]`;class Yo extends _e{constructor(e){super(e),this._parent=this._element.closest(jo),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),de.on(this._element,Ao,(e=>this._keydown(e))))}static get NAME(){return _o}show(){const e=this._element;if(this._elemIsActive(e))return;const t=this._getActiveElem(),n=t?de.trigger(t,So,{relatedTarget:e}):null,r=de.trigger(e,Mo,{relatedTarget:t});r.defaultPrevented||n&&n.defaultPrevented||(this._deactivate(t,e),this._activate(e,t))}_activate(e,t){if(!e)return;e.classList.add(Do),this._activate(O(e));const n=()=>{"tab"===e.getAttribute("role")?(e.focus(),e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),de.trigger(e,To,{relatedTarget:t})):e.classList.add(No)};this._queueCallback(n,e,e.classList.contains(Io))}_deactivate(e,t){if(!e)return;e.classList.remove(Do),e.blur(),this._deactivate(O(e));const n=()=>{"tab"===e.getAttribute("role")?(e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),de.trigger(e,Eo,{relatedTarget:t})):e.classList.remove(No)};this._queueCallback(n,e,e.classList.contains(Io))}_keydown(e){if(![Oo,Ro,Po,Lo].includes(e.key))return;e.stopPropagation(),e.preventDefault();const t=[Ro,Lo].includes(e.key),n=q(this._getChildren().filter((e=>!N(e))),e.target,t,!0);n&&Yo.getOrCreateInstance(n).show()}_getChildren(){return Fe.find($o,this._parent)}_getActiveElem(){return this._getChildren().find((e=>this._elemIsActive(e)))||null}_setInitialAttributes(e,t){this._setAttributeIfNotExists(e,"role","tablist");for(const n of t)this._setInitialAttributesOnChild(n)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const t=this._elemIsActive(e),n=this._getOuterElement(e);e.setAttribute("aria-selected",t),n!==e&&this._setAttributeIfNotExists(n,"role","presentation"),t||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const t=O(e);t&&(this._setAttributeIfNotExists(t,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(t,"aria-labelledby",`#${e.id}`))}_toggleDropDown(e,t){const n=this._getOuterElement(e);if(!n.classList.contains(Uo))return;const r=(e,r)=>{const i=Fe.findOne(e,n);i&&i.classList.toggle(r,t)};r(Fo,Do),r(Bo,No),r(Vo,Do),n.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(e,t,n){e.hasAttribute(t)||e.setAttribute(t,n)}_elemIsActive(e){return e.classList.contains(Do)}_getInnerElement(e){return e.matches($o)?e:Fe.findOne($o,e)}_getOuterElement(e){return e.closest(Ho)||e}static jQueryInterface(e){return this.each((function(){const t=Yo.getOrCreateInstance(this);if("string"===typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}}))}}de.on(document,Co,Go,(function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),N(this)||Yo.getOrCreateInstance(this).show()})),de.on(window,ko,(()=>{for(const e of Fe.find(qo))Yo.getOrCreateInstance(e)})),W(Yo);const Xo="toast",Zo="bs.toast",Ko=`.${Zo}`,Jo=`mouseover${Ko}`,Qo=`mouseout${Ko}`,es=`focusin${Ko}`,ts=`focusout${Ko}`,ns=`hide${Ko}`,rs=`hidden${Ko}`,is=`show${Ko}`,os=`shown${Ko}`,ss="fade",as="hide",ls="show",cs="showing",us={animation:"boolean",autohide:"boolean",delay:"number"},ds={animation:!0,autohide:!0,delay:5e3};class hs extends _e{constructor(e,t){super(e,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return ds}static get DefaultType(){return us}static get NAME(){return Xo}show(){const e=de.trigger(this._element,is);if(e.defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(ss);const t=()=>{this._element.classList.remove(cs),de.trigger(this._element,os),this._maybeScheduleHide()};this._element.classList.remove(as),B(this._element),this._element.classList.add(ls,cs),this._queueCallback(t,this._element,this._config.animation)}hide(){if(!this.isShown())return;const e=de.trigger(this._element,ns);if(e.defaultPrevented)return;const t=()=>{this._element.classList.add(as),this._element.classList.remove(cs,ls),de.trigger(this._element,rs)};this._element.classList.add(cs),this._queueCallback(t,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(ls),super.dispose()}isShown(){return this._element.classList.contains(ls)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=t;break;case"focusin":case"focusout":this._hasKeyboardInteraction=t;break}if(t)return void this._clearTimeout();const n=e.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){de.on(this._element,Jo,(e=>this._onInteraction(e,!0))),de.on(this._element,Qo,(e=>this._onInteraction(e,!1))),de.on(this._element,es,(e=>this._onInteraction(e,!0))),de.on(this._element,ts,(e=>this._onInteraction(e,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each((function(){const t=hs.getOrCreateInstance(this,e);if("string"===typeof e){if("undefined"===typeof t[e])throw new TypeError(`No method named "${e}"`);t[e](this)}}))}}we(hs),W(hs);var fs=Object.defineProperty,ps=(e,t,n)=>t in e?fs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ms=(e,t,n)=>(ps(e,"symbol"!=typeof t?t+"":t,n),n);const gs=e=>(0,i.Fl)((()=>"center"===e.value?"justify-content-center":"end"===e.value?"justify-content-end":"justify-content-start")),vs=(e,t)=>Object.keys(e).filter((e=>!t.includes(e))).reduce(((t,n)=>({...t,[n]:e[n]})),{}),ys=()=>({enumerable:!0,configurable:!1,writable:!1}),bs=e=>Array.isArray(e)?e.map((e=>bs(e))):e instanceof Date?new Date(e.getTime()):e&&"object"==typeof e?Object.getOwnPropertyNames(e).reduce(((t,n)=>{var r;return Object.defineProperty(t,n,null!=(r=Object.getOwnPropertyDescriptor(e,n))?r:{}),t[n]=bs(e[n]),t}),Object.create(Object.getPrototypeOf(e))):e,_s=e=>new Promise((t=>t(bs(e))));class ws{constructor(e,t={}){if(ms(this,"cancelable",!0),ms(this,"componentId",null),ms(this,"defaultPrevented",!1),ms(this,"nativeEvent",null),ms(this,"preventDefault"),ms(this,"relatedTarget",null),ms(this,"target",null),ms(this,"eventType",""),ms(this,"vueTarget",null),!e)throw new TypeError(`Failed to construct '${this.constructor.name}'. 1 argument required, ${arguments.length} given.`);Object.assign(this,ws.Defaults,this.constructor.Defaults,t,{eventType:e}),Object.defineProperties(this,{type:ys(),cancelable:ys(),nativeEvent:ys(),target:ys(),relatedTarget:ys(),vueTarget:ys(),componentId:ys()});let n=!1;this.preventDefault=function(){this.cancelable&&(n=!0)},Object.defineProperty(this,"defaultPrevented",{enumerable:!0,get(){return n}})}static get Defaults(){return{eventType:"",cancelable:!0,nativeEvent:null,target:null,relatedTarget:null,vueTarget:null,componentId:null}}}const xs=e=>null!==e&&"object"==typeof e,Ss=e=>/^[0-9]*\.?[0-9]+$/.test(String(e)),Es=e=>"[object Object]"===Object.prototype.toString.call(e),Ms=/_/g,Ts=/([a-z])([A-Z])/g,Cs=/(\s|^)(\w)/g,As=/(\s|^)(\w)/,ks=/\s+/,Os=/^#/,Rs=/^#[A-Za-z]+[\w\-:.]*$/,Ps=(e,t=2)=>"string"==typeof e?e:null==e?"":Array.isArray(e)||Es(e)&&e.toString===Object.prototype.toString?JSON.stringify(e,null,t):String(e),Ls=e=>e.replace(Ms," ").replace(Ts,((e,t,n)=>`${t} ${n}`)).replace(As,((e,t,n)=>t+n.toUpperCase())),Ds=e=>e.replace(Ms," ").replace(Ts,((e,t,n)=>`${t} ${n}`)).replace(Cs,((e,t,n)=>t+n.toUpperCase())),Is=e=>{const t=e.trim();return t.charAt(0).toUpperCase()+t.slice(1)},Ns=e=>`\\${e}`,Us=e=>{e=Ps(e);const{length:t}=e,n=e.charCodeAt(0);return e.split("").reduce(((r,i,o)=>{const s=e.charCodeAt(o);return 0===s?`${r}�`:127===s||s>=1&&s<=31||0===o&&s>=48&&s<=57||1===o&&s>=48&&s<=57&&45===n?r+Ns(`${s.toString(16)} `):0===o&&45===s&&1===t?r+Ns(i):s>=128||45===s||95===s||s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122?r+i:r+Ns(i)}),"")},Fs=typeof window<"u",Bs=typeof document<"u",Vs=typeof navigator<"u",zs=Fs&&Bs&&Vs,js=Bs?document:{},Hs=e=>!(!e||e.nodeType!==Node.ELEMENT_NODE),Ws=e=>Hs(e)?e.getBoundingClientRect():null,Gs=(e=[])=>{const{activeElement:t}=document;return t&&!e.some((e=>e===t))?t:null},$s=e=>Hs(e)&&e===Gs(),qs=(e,t={})=>{try{e.focus(t)}catch(n){console.error(n)}return $s(e)},Ys=(e,t)=>t&&Hs(e)&&e.getAttribute(t)||null,Xs=e=>{if("none"===Ys(e,"display"))return!1;const t=Ws(e);return!!(t&&t.height>0&&t.width>0)},Zs=(e,t)=>!e||e(t).filter((e=>e.type!==i.sv)).length<1,Ks=(e,t)=>(Hs(t)?t:js).querySelector(e)||null,Js=(e,t)=>Array.from([(Hs(t)?t:js).querySelectorAll(e)]),Qs=(e,t)=>t&&Hs(e)?e.getAttribute(t):null,ea=(e,t,n)=>{t&&Hs(e)&&e.setAttribute(t,n)},ta=(e,t)=>{t&&Hs(e)&&e.removeAttribute(t)},na=(e,t)=>Ps(e).toLowerCase()===Ps(t).toLowerCase(),ra=Fs?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||(e=>setTimeout(e,16)):e=>setTimeout(e,0),ia=(e,t,n)=>t.concat(["sm","md","lg","xl","xxl"]).reduce(((t,r)=>(t[e?`${e}${r.charAt(0).toUpperCase()+r.slice(1)}`:r]=n,t)),Object.create(null)),oa=(e,t,n,r=n)=>Object.keys(t).reduce(((t,i)=>(e[i]&&t.push([r,i.replace(n,""),e[i]].filter((e=>e&&"boolean"!=typeof e)).join("-").toLowerCase()),t)),[]),sa=(e="")=>`__BVID__${Math.random().toString().slice(2,8)}___BV_${e}__`,aa=(e,t)=>!0===e||"true"===e||""===e?"true":"grammar"===e||"spelling"===e?e:!1===t?"true":!1===e||"false"===e?"false":void 0,la=e=>!!e&&"object"==typeof e&&e.constructor===Object,ca=(e,t,n=!0)=>{const r=e instanceof Date&&"function"==typeof e.getMonth?new Date(e.getTime()):Object.assign({},e);return la(e)&&la(t)&&Object.keys(t).forEach((i=>{la(t[i])?i in e?r[i]=ca(e[i],t[i],n):Object.assign(r,{[i]:t[i]}):Array.isArray(t[i])&&Array.isArray(e[i])?Object.assign(r,{[i]:n?e[i].concat(t[i].filter((t=>!e[i].includes(t)))):t[i]}):Object.assign(r,{[i]:t[i]})})),r},ua=(e,t={},n={})=>{const r=[e];let i;for(let o=0;o<r.length&&!i;o++){const e=r[o];i=n[e]}return i&&"function"==typeof i?i(t):i},da=(e,t=NaN)=>Number.isInteger(e)?e:t,ha=(e,t=NaN)=>{const n=parseInt(e,10);return isNaN(n)?t:n},fa=(e,t=NaN)=>{const n=parseFloat(e.toString());return isNaN(n)?t:n},pa=(e,t)=>t+(e?Is(e):""),ma=(e,t)=>(Array.isArray(t)?t.slice():Object.keys(t)).reduce(((t,n)=>(t[n]=e[n],t)),{}),ga=e=>"boolean"==typeof e?e:""===e||"true"===e,va=e=>!(!e.href&&!e.to);function ya(e){return(0,i.Fl)((()=>void 0===e.value?void 0:ga(e.value)))}const ba=Symbol(),_a={items:(0,o.qj)([]),reset(){this.items=(0,o.qj)([])}},wa=e=>{e.provide(ba,_a)},xa=()=>{const e=(0,i.f3)(ba);return e||_a},Sa=(e,t,n)=>{(0,i.bv)((()=>{var r;null==(r=null==e?void 0:e.value)||r.addEventListener(t,n)})),(0,i.Jd)((()=>{var r;null==(r=null==e?void 0:e.value)||r.removeEventListener(t,n)}))},Ea=e=>(0,i.Fl)((()=>({"form-check":!e.plain&&!e.button,"form-check-inline":e.inline,"form-switch":e.switch,[`form-control-${e.size}`]:e.size&&"md"!==e.size}))),Ma=e=>(0,i.Fl)((()=>({"form-check-input":!e.plain&&!e.button,"is-valid":!0===e.state,"is-invalid":!1===e.state,"btn-check":e.button}))),Ta=e=>(0,i.Fl)((()=>({"form-check-label":!e.plain&&!e.button,btn:e.button,[`btn-${e.buttonVariant}`]:e.button,[`btn-${e.size}`]:e.button&&e.size&&"md"!==e.size}))),Ca=e=>(0,i.Fl)((()=>{var t;return{"aria-invalid":aa(e.ariaInvalid,e.state),"aria-required":"true"===(null==(t=e.required)?void 0:t.toString())?"true":null}})),Aa=e=>(0,i.Fl)((()=>({"was-validated":e.validated,"btn-group":e.buttons&&!e.stacked,"btn-group-vertical":e.stacked,[`btn-group-${e.size}`]:e.size}))),ka=(e,t,n)=>e.reduce(((e,t)=>"Symbol(Fragment)"===t.type.toString()?e.concat(t.children):e.concat([t])),[]).filter((e=>(e.type.__name||e.type.name)===t)).map((e=>{const t=(e.children.default?e.children.default():[]).find((e=>"Symbol(Text)"===e.type.toString()));return{props:{disabled:n,...e.props},text:t?t.children:""}})),Oa=(e,t)=>"string"==typeof e?{props:{value:e,disabled:t.disabled},text:e}:{props:{value:e[t.valueField],disabled:t.disabled||e[t.disabledField],...e.props},text:e[t.textField],html:e[t.htmlField]},Ra=(e,t,n,r,i)=>({...e,props:{"button-variant":n.buttonVariant,form:n.form,name:r.value,id:`${i.value}_option_${t}`,button:n.buttons,state:n.state,plain:n.plain,size:n.size,inline:!n.stacked,required:n.required,...e.props}}),Pa=(e,t)=>(0,i.Fl)((()=>(null==e?void 0:e.value)||sa(t))),La={ariaInvalid:{type:[Boolean,String],default:void 0},autocomplete:{type:String,required:!1},autofocus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},form:{type:String,required:!1},formatter:{type:Function,required:!1},id:{type:String,required:!1},lazy:{type:Boolean,default:!1},lazyFormatter:{type:Boolean,default:!1},list:{type:String,required:!1},modelValue:{type:[String,Number],default:""},name:{type:String,required:!1},number:{type:Boolean,default:!1},placeholder:{type:String,required:!1},plaintext:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},size:{type:String,required:!1},state:{type:Boolean,default:null},trim:{type:Boolean,default:!1}},Da=(e,t)=>{const n=(0,o.iH)();let r=null,s=!0;const a=Pa((0,o.Vh)(e,"id"),"input"),l=(t,n,r=!1)=>(t=String(t),"function"!=typeof e.formatter||e.lazyFormatter&&!r?t:(s=!1,e.formatter(t,n))),c=t=>e.trim?t.trim():e.number?parseFloat(t):t,u=()=>{(0,i.Y3)((()=>{var t;e.autofocus&&(null==(t=n.value)||t.focus())}))};(0,i.bv)(u),(0,i.bv)((()=>{n.value&&(n.value.value=e.modelValue)})),(0,i.dl)(u);const d=(0,i.Fl)((()=>{var t;return aa(e.ariaInvalid,null!=(t=e.state)?t:void 0)})),h=n=>{const{value:i}=n.target,o=l(i,n);if(!1===o||n.defaultPrevented)return void n.preventDefault();if(e.lazy)return;const s=c(o);e.modelValue!==s&&(r=i,t("update:modelValue",s)),t("input",o)},f=n=>{const{value:i}=n.target,o=l(i,n);if(!1===o||n.defaultPrevented)return void n.preventDefault();if(!e.lazy)return;r=i,t("update:modelValue",o);const s=c(o);e.modelValue!==s&&t("change",o)},p=n=>{if(t("blur",n),!e.lazy&&!e.lazyFormatter)return;const{value:i}=n.target,o=l(i,n,!0);r=i,t("update:modelValue",o)},m=()=>{var t;e.disabled||null==(t=n.value)||t.focus()},g=()=>{var t;e.disabled||null==(t=n.value)||t.blur()};return(0,i.YP)((()=>e.modelValue),(e=>{!n.value||(n.value.value=r&&s?r:e,r=null,s=!0)})),{input:n,computedId:a,computedAriaInvalid:d,onInput:h,onChange:f,onBlur:p,focus:m,blur:g}},Ia=(e,t)=>{if(!e)return e;if(t in e)return e[t];const n=t.split(".");return Ia(e[n[0]],n.splice(1).join("."))},Na=(e,t=null,n,r)=>{if("[object Object]"===Object.prototype.toString.call(e)){const i=Ia(e,r.valueField),o=Ia(e,r.textField),s=Ia(e,r.htmlField),a=Ia(e,r.disabledField),l=e[r.optionsField]||null;return null!==l?{label:String(Ia(e,r.labelField)||o),options:Ua(l,n,r)}:{value:typeof i>"u"?t||o:i,text:String(typeof o>"u"?t:o),html:s,disabled:Boolean(a)}}return{value:t||e,text:String(e),disabled:!1}},Ua=(e,t,n)=>Array.isArray(e)?e.map((e=>Na(e,null,t,n))):"[object Object]"===Object.prototype.toString.call(e)?(console.warn(`[BootstrapVue warn]: ${t} - Setting prop "options" to an object is deprecated. Use the array format instead.`),Object.keys(e).map((r=>{const i=e[r];switch(typeof i){case"object":return Na(i.text,String(i.value),t,n);default:return Na(i,String(r),t,n)}}))):[],Fa=["id"],Ba=Symbol(),Va=(0,i.aZ)({__name:"BAccordion",props:{flush:{default:!1},free:{default:!1},id:{default:void 0}},setup(e){const t=e,n=Pa((0,o.Vh)(t,"id"),"accordion"),r=ya((0,o.Vh)(t,"flush")),a=ya((0,o.Vh)(t,"free")),l=(0,i.Fl)((()=>({"accordion-flush":r.value})));return a.value||(0,i.JJ)(Ba,n.value.toString()),(e,t)=>((0,i.wg)(),(0,i.iD)("div",{id:(0,o.SU)(n),class:(0,s.C_)(["accordion",(0,o.SU)(l)])},[(0,i.WI)(e.$slots,"default")],10,Fa))}}),za=(0,i.aZ)({__name:"BCollapse",props:{accordion:null,id:{default:sa()},modelValue:{default:!1},tag:{default:"div"},toggle:{default:!1},visible:{default:!1},isNav:{default:!1}},emits:["update:modelValue","show","shown","hide","hidden"],setup(e,{emit:t}){const n=e,r=ya((0,o.Vh)(n,"modelValue")),a=ya((0,o.Vh)(n,"toggle")),l=ya((0,o.Vh)(n,"visible")),c=ya((0,o.Vh)(n,"isNav")),u=(0,o.iH)(),d=(0,o.iH)(),h=(0,i.Fl)((()=>({show:r.value,"navbar-collapse":c.value}))),f=()=>t("update:modelValue",!1);return Sa(u,"show.bs.collapse",(()=>{t("show"),t("update:modelValue",!0)})),Sa(u,"hide.bs.collapse",(()=>{t("hide"),t("update:modelValue",!1)})),Sa(u,"shown.bs.collapse",(()=>t("shown"))),Sa(u,"hidden.bs.collapse",(()=>t("hidden"))),(0,i.bv)((()=>{var e;d.value=new rn(u.value,{parent:n.accordion?`#${n.accordion}`:void 0,toggle:a.value}),(l.value||r.value)&&(t("update:modelValue",!0),null==(e=d.value)||e.show())})),(0,i.YP)((()=>r.value),(e=>{var t,n;e?null==(t=d.value)||t.show():null==(n=d.value)||n.hide()})),(0,i.YP)((()=>l.value),(e=>{var n,r;e?(t("update:modelValue",!!e),null==(n=d.value)||n.show()):(t("update:modelValue",!!e),null==(r=d.value)||r.hide())})),(t,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(e.tag),{id:e.id,ref_key:"element",ref:u,class:(0,s.C_)(["collapse",(0,o.SU)(h)]),"data-bs-parent":e.accordion||null,"is-nav":(0,o.SU)(c)},{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default",{visible:(0,o.SU)(r),close:f})])),_:3},8,["id","class","data-bs-parent","is-nav"]))}}),ja={mounted(e,t){let n=t.value;Object.keys(t.modifiers).length>0&&([n]=Object.keys(t.modifiers)),e.setAttribute("data-bs-toggle","modal"),e.setAttribute("data-bs-target",`#${n}`)}},Ha={mounted(e,t){let n="right";const r=[];t.modifiers.left?n="left":t.modifiers.right?n="right":t.modifiers.bottom?n="bottom":t.modifiers.top&&(n="top"),t.modifiers.manual?r.push("manual"):(t.modifiers.click&&r.push("click"),t.modifiers.hover&&r.push("hover"),t.modifiers.focus&&r.push("focus")),e.setAttribute("data-bs-toggle","popover"),new Ki(e,{trigger:0===r.length?"click":r.join(" "),placement:n,content:t.value})},unmounted(e){const t=Ki.getInstance(e);null==t||t.dispose()}},Wa=e=>{if(e.classList.contains("offcanvas"))return"offcanvas";if(e.classList.contains("collapse"))return"collapse";throw Error("Couldn't resolve toggle type")},Ga=(e,t)=>{const{modifiers:n,arg:r,value:i}=e,o=Object.keys(n||{}),s="string"==typeof i?i.split(ks):i;if(na(t.tagName,"a")){const e=Qs(t,"href")||"";Rs.test(e)&&o.push(e.replace(Os,""))}return Array.prototype.concat.apply([],[r,s]).forEach((e=>"string"==typeof e&&o.push(e))),o.filter(((e,t,n)=>e&&n.indexOf(e)===t))},$a={mounted(e,t){const n=Ga(t,e),r=[];let i="data-bs-target";"a"===e.tagName&&(i="href");for(let o=0;o<n.length;o++){const t=n[o],i=document.getElementById(t);i&&(e.setAttribute("data-bs-toggle",Wa(i)),r.push(`#${t}`))}r.length>0&&e.setAttribute(i,r.join(","))}},qa=(e,t)=>{if(null!=t&&t.trigger)return t.trigger;if(e.manual)return"manual";const n=[];return e.click&&n.push("click"),e.hover&&n.push("hover"),e.focus&&n.push("focus"),n.length>0?n.join(" "):"hover focus"},Ya=(e,t)=>null!=t&&t.placement?t.placement:e.left?"left":e.right?"right":e.bottom?"bottom":"top",Xa=e=>null!=e&&e.delay?e.delay:0,Za=e=>"object"==typeof e?null==e?void 0:e.title:e,Ka={beforeMount(e,t){e.setAttribute("data-bs-toggle","tooltip"),e.getAttribute("title")||e.setAttribute("title",Za(t.value).toString());const n=/<("[^"]*"|'[^']*'|[^'">])*>/.test(e.title),r=qa(t.modifiers,t.value),i=Ya(t.modifiers,t.value),o=Xa(t.value),s=e.getAttribute("title");new Gi(e,{trigger:r,placement:i,delay:o,html:n}),s&&e.setAttribute("data-bs-original-title",s)},updated(e,t){e.getAttribute("title")||e.setAttribute("title",Za(t.value).toString());const n=e.getAttribute("title"),r=e.getAttribute("data-bs-original-title"),i=Gi.getInstance(e);e.removeAttribute("title"),n&&n!==r&&(null==i||i.setContent({".tooltip-inner":n}),e.setAttribute("data-bs-original-title",n))},unmounted(e){const t=Gi.getInstance(e);null==t||t.dispose()}},Ja=new Map,Qa=e=>{if(Ja.has(e)){const t=Ja.get(e);t&&t.stop&&t.stop(),Ja.delete(e)}},el=(e,t)=>{const n={margin:"0px",once:!1,callback:t.value};Object.keys(t.modifiers).forEach((e=>{Number.isInteger(e)?n.margin=`${e}px`:"once"===e.toLowerCase()&&(n.once=!0)})),Qa(e);const r=new nl(e,n.margin,n.once,n.callback,t.instance);Ja.set(e,r)},tl={beforeMount(e,t){el(e,t)},updated(e,t){el(e,t)},unmounted(e){Qa(e)}};class nl{constructor(e,t,n,r,i){ms(this,"element"),ms(this,"margin"),ms(this,"once"),ms(this,"callback"),ms(this,"instance"),ms(this,"observer"),ms(this,"doneOnce"),ms(this,"visible"),this.element=e,this.margin=t,this.once=n,this.callback=r,this.instance=i,this.createObserver()}createObserver(){if(this.observer&&this.stop(),!this.doneOnce&&"function"==typeof this.callback){try{this.observer=new IntersectionObserver(this.handler.bind(this),{root:null,rootMargin:this.margin,threshold:0})}catch{return console.error("Intersection Observer not supported"),this.doneOnce=!0,this.observer=void 0,void this.callback(null)}this.instance.$nextTick((()=>{this.observer&&this.observer.observe(this.element)}))}}handler(e){const[t]=e,n=Boolean(t.isIntersecting||t.intersectionRatio>0);n!==this.visible&&(this.visible=n,this.callback(n),this.once&&this.visible&&(this.doneOnce=!0,this.stop()))}stop(){this.observer&&this.observer.disconnect(),this.observer=null}}const rl={mounted(e,t){!1!==t.value&&e.focus()}},il={BModal:ja,BPopover:Ha,BToggle:$a,BTooltip:Ka,BVisible:tl,focus:rl},ol={class:"accordion-item"},sl=["id"],al=["aria-expanded","aria-controls"],ll={class:"accordion-body"},cl=(0,i.aZ)({__name:"BAccordionItem",props:{id:null,title:null,visible:{default:!1}},setup(e){const t=e,n=ya((0,o.Vh)(t,"visible")),r=Pa((0,o.Vh)(t,"id"),"accordion_item"),a=(0,i.f3)(Ba,"");return(t,l)=>((0,i.wg)(),(0,i.iD)("div",ol,[(0,i._)("h2",{id:`${(0,o.SU)(r)}heading`,class:"accordion-header"},[(0,i.wy)(((0,i.wg)(),(0,i.iD)("button",{class:(0,s.C_)(["accordion-button",{collapsed:!(0,o.SU)(n)}]),type:"button","aria-expanded":(0,o.SU)(n)?"true":"false","aria-controls":(0,o.SU)(r)},[(0,i.WI)(t.$slots,"title",{},(()=>[(0,i.Uk)((0,s.zw)(e.title),1)]))],10,al)),[[(0,o.SU)($a),void 0,(0,o.SU)(r)]])],8,sl),(0,i.Wm)(za,{id:(0,o.SU)(r),class:"accordion-collapse",visible:(0,o.SU)(n),accordion:(0,o.SU)(a),"aria-labelledby":`heading${(0,o.SU)(r)}`},{default:(0,i.w5)((()=>[(0,i._)("div",ll,[(0,i.WI)(t.$slots,"default")])])),_:3},8,["id","visible","accordion","aria-labelledby"])]))}}),ul=["type","disabled","aria-label"],dl=(0,i.aZ)({__name:"BCloseButton",props:{disabled:{default:!1},white:{default:!1},ariaLabel:{default:"Close"},type:{default:"button"}},setup(e){const t=e,n=ya((0,o.Vh)(t,"disabled")),r=ya((0,o.Vh)(t,"white")),a=(0,i.Fl)((()=>({"btn-close-white":r.value})));return(t,r)=>((0,i.wg)(),(0,i.iD)("button",{type:e.type,class:(0,s.C_)(["btn-close",(0,o.SU)(a)]),disabled:(0,o.SU)(n),"aria-label":e.ariaLabel},null,10,ul))}}),hl=(0,i.aZ)({__name:"BAlert",props:{dismissLabel:{default:"Close"},dismissible:{default:!1},fade:{default:!1},modelValue:{type:[Boolean,Number],default:!1},show:{default:!1},variant:{default:"info"}},emits:["dismissed","dismiss-count-down","update:modelValue"],setup(e,{emit:t}){const n=e,r=ya((0,o.Vh)(n,"dismissible"));ya((0,o.Vh)(n,"fade"));const a=ya((0,o.Vh)(n,"show")),l=(0,o.iH)(),c=(0,o.iH)(),u=(0,i.Fl)((()=>({[`alert-${n.variant}`]:!!n.variant,show:!!n.modelValue,"alert-dismissible":r.value,fade:!!n.modelValue})));let d;const h=e=>{if("boolean"==typeof e)return 0;const t=da(e,0);return t>0?t:0},f=()=>{void 0!==d&&(clearTimeout(d),d=void 0)},p=(0,o.iH)(h(n.modelValue)),m=(0,i.Fl)((()=>!!n.modelValue||a.value));(0,i.Jd)((()=>{var e;f(),null==(e=c.value)||e.dispose(),c.value=void 0}));const g=(0,i.Fl)((()=>!0===n.modelValue||!(!1===n.modelValue||da(n.modelValue,0)<1)&&!!n.modelValue)),v=()=>{p.value=h(n.modelValue),(g.value||a.value)&&!c.value&&(c.value=new ke(l.value))},y=()=>{"boolean"==typeof n.modelValue?t("update:modelValue",!1):t("update:modelValue",0),t("dismissed")};return(0,i.YP)((()=>n.modelValue),v),(0,i.YP)((()=>a.value),v),(0,i.YP)(p,(e=>{f(),"boolean"!=typeof n.modelValue&&(t("dismiss-count-down",e),0===e&&n.modelValue>0&&t("dismissed"),n.modelValue!==e&&t("update:modelValue",e),e>0&&(d=setTimeout((()=>{p.value--}),1e3)))})),(t,n)=>(0,o.SU)(m)?((0,i.wg)(),(0,i.iD)("div",{key:0,ref_key:"element",ref:l,class:(0,s.C_)(["alert",(0,o.SU)(u)]),role:"alert"},[(0,i.WI)(t.$slots,"default"),(0,o.SU)(r)?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[t.$slots.dismissible?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button","data-bs-dismiss":"alert",onClick:y},[(0,i.WI)(t.$slots,"dismissible")])):((0,i.wg)(),(0,i.j4)(dl,{key:1,"aria-label":e.dismissLabel,"data-bs-dismiss":"alert",onClick:y},null,8,["aria-label"]))],64)):(0,i.kq)("",!0)],2)):(0,i.kq)("",!0)}}),fl=Symbol(),pl=(0,i.aZ)({__name:"BAvatarGroup",props:{overlap:{default:.3},rounded:{type:[Boolean,String],default:!1},size:null,square:{default:!1},tag:{default:"div"},variant:null},setup(e){const t=e,n=ya((0,o.Vh)(t,"square")),r=(0,i.Fl)((()=>yl(t.size))),a=e=>"string"==typeof e&&Ss(e)?fa(e,0):e||0,l=(0,i.Fl)((()=>Math.min(Math.max(a(t.overlap),0),1)/2)),c=(0,i.Fl)((()=>{const e=r.value?`calc(${r.value} * ${l.value})`:null;return e?{paddingLeft:e,paddingRight:e}:{}}));return(0,i.JJ)(fl,{overlapScale:l,size:t.size,square:n.value,rounded:t.rounded,variant:t.variant}),(t,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(e.tag),{class:"b-avatar-group",role:"group"},{default:(0,i.w5)((()=>[(0,i._)("div",{class:"b-avatar-group-inner",style:(0,s.j5)((0,o.SU)(c))},[(0,i.WI)(t.$slots,"default")],4)])),_:3}))}}),ml={key:0,class:"b-avatar-custom"},gl={key:1,class:"b-avatar-img"},vl=["src","alt"],yl=e=>{const t="string"==typeof e&&Ss(e)?fa(e,0):e;return"number"==typeof t?`${t}px`:t||null},bl=(0,i.aZ)({__name:"BAvatar",props:{alt:{default:"avatar"},ariaLabel:null,badge:{type:[Boolean,String],default:!1},badgeLeft:{default:!1},badgeOffset:null,badgeTop:{default:!1},badgeVariant:{default:"primary"},button:{default:!1},buttonType:{default:"button"},disabled:{default:!1},icon:null,rounded:{type:[Boolean,String],default:"circle"},size:null,square:{default:!1},src:null,text:null,textVariant:{default:void 0},variant:{default:"secondary"}},emits:["click","img-error"],setup(e,{emit:t}){const n=e,r=ya((0,o.Vh)(n,"badgeLeft")),a=ya((0,o.Vh)(n,"badgeTop")),l=ya((0,o.Vh)(n,"button")),c=ya((0,o.Vh)(n,"disabled")),u=ya((0,o.Vh)(n,"square")),d=(0,i.Rr)(),h=["sm",null,"lg"],f=.4,p=.7*f,m=(0,i.f3)(fl,null),g=e=>{const t=e;return"light"===t||"warning"===t?"dark":"light"},v=(0,i.Fl)((()=>!Zs(d.default))),y=(0,i.Fl)((()=>!Zs(d.badge))),b=(0,i.Fl)((()=>n.badge||""===n.badge||y.value)),_=(0,i.Fl)((()=>null!=m&&m.size?m.size:yl(n.size))),w=(0,i.Fl)((()=>null!=m&&m.variant?m.variant:n.variant)),x=(0,i.Fl)((()=>null!=m&&m.rounded?m.rounded:n.rounded)),S=(0,i.Fl)((()=>({"aria-label":n.ariaLabel||null,disabled:c.value||null}))),E=(0,i.Fl)((()=>({[`bg-${n.badgeVariant}`]:!!n.badgeVariant}))),M=(0,i.Fl)((()=>!0===n.badge?"":n.badge)),T=(0,i.Fl)((()=>`text-${g(n.badgeVariant)}`)),C=(0,i.Fl)((()=>({[`b-avatar-${n.size}`]:!!n.size&&-1!==h.indexOf(yl(n.size)),[`bg-${w.value}`]:!!w.value,badge:!l.value&&w.value&&v.value,rounded:""===x.value||!0===x.value,["rounded-circle"]:!u.value&&"circle"===x.value,["rounded-0"]:u.value||"0"===x.value,["rounded-1"]:!u.value&&"sm"===x.value,["rounded-3"]:!u.value&&"lg"===x.value,["rounded-top"]:!u.value&&"top"===x.value,["rounded-bottom"]:!u.value&&"bottom"===x.value,["rounded-start"]:!u.value&&"left"===x.value,["rounded-end"]:!u.value&&"right"===x.value,btn:l.value,[`btn-${w.value}`]:!!l.value&&!!w.value}))),A=(0,i.Fl)((()=>`text-${n.textVariant||g(w.value)}`)),k=(0,i.Fl)((()=>{const e=n.badgeOffset||"0px";return{fontSize:(-1===h.indexOf(_.value||null)?`calc(${_.value} * ${p})`:"")||"",top:a.value?e:"",bottom:a.value?"":e,left:r.value?e:"",right:r.value?"":e}})),O=(0,i.Fl)((()=>{const e=-1===h.indexOf(_.value||null)?`calc(${_.value} * ${f})`:null;return e?{fontSize:e}:{}})),R=(0,i.Fl)((()=>{var e;const t=(null==(e=null==m?void 0:m.overlapScale)?void 0:e.value)||0,n=_.value&&t?`calc(${_.value} * -${t})`:null;return n?{marginLeft:n,marginRight:n}:{}})),P=(0,i.Fl)((()=>l.value?n.buttonType:"span")),L=(0,i.Fl)((()=>({...R.value,width:_.value,height:_.value}))),D=e=>{!c.value&&l.value&&t("click",e)},I=e=>t("img-error",e);return(t,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)((0,o.SU)(P)),(0,i.dG)({class:["b-avatar",(0,o.SU)(C)],style:(0,o.SU)(L)},(0,o.SU)(S),{onClick:D}),{default:(0,i.w5)((()=>[(0,o.SU)(v)?((0,i.wg)(),(0,i.iD)("span",ml,[(0,i.WI)(t.$slots,"default")])):e.src?((0,i.wg)(),(0,i.iD)("span",gl,[(0,i._)("img",{src:e.src,alt:e.alt,onError:I},null,40,vl)])):e.text?((0,i.wg)(),(0,i.iD)("span",{key:2,class:(0,s.C_)(["b-avatar-text",(0,o.SU)(A)]),style:(0,s.j5)((0,o.SU)(O))},(0,s.zw)(e.text),7)):(0,i.kq)("",!0),(0,o.SU)(b)?((0,i.wg)(),(0,i.iD)("span",{key:3,class:(0,s.C_)(["b-avatar-badge",(0,o.SU)(E)]),style:(0,s.j5)((0,o.SU)(k))},[(0,o.SU)(y)?(0,i.WI)(t.$slots,"badge",{key:0}):((0,i.wg)(),(0,i.iD)("span",{key:1,class:(0,s.C_)((0,o.SU)(T))},(0,s.zw)((0,o.SU)(M)),3))],6)):(0,i.kq)("",!0)])),_:3},16,["class","style"]))}}),_l={active:{type:[Boolean,String],default:!1},activeClass:{type:String,default:"router-link-active"},append:{type:[Boolean,String],default:!1},disabled:{type:[Boolean,String],default:!1},event:{type:[String,Array],default:"click"},exact:{type:[Boolean,String],default:!1},exactActiveClass:{type:String,default:"router-link-exact-active"},href:{type:String},rel:{type:String,default:null},replace:{type:[Boolean,String],default:!1},routerComponentName:{type:String,default:"router-link"},routerTag:{type:String,default:"a"},target:{type:String,default:"_self"},to:{type:[String,Object],default:null}},wl=(0,i.aZ)({props:_l,emits:["click"],setup(e,{emit:t,attrs:n}){const r=ya((0,o.Vh)(e,"active")),s=ya((0,o.Vh)(e,"append")),a=ya((0,o.Vh)(e,"disabled")),l=ya((0,o.Vh)(e,"exact")),c=ya((0,o.Vh)(e,"replace")),u=(0,i.FN)(),d=(0,o.iH)(null),h=(0,i.Fl)((()=>{const t=e.routerComponentName.split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join("");return void 0===(null==u?void 0:u.appContext.app.component(t))||a.value||!e.to?"a":e.routerComponentName})),f=(0,i.Fl)((()=>{const t="#";if(e.href)return e.href;if("string"==typeof e.to)return e.to||t;const n=e.to;if("[object Object]"===Object.prototype.toString.call(n)&&(n.path||n.query||n.hash)){const e=n.path||"",r=n.query?`?${Object.keys(n.query).map((e=>`${e}=${n.query[e]}`)).join("=")}`:"",i=n.hash&&"#"!==n.hash.charAt(0)?`#${n.hash}`:n.hash||"";return`${e}${r}${i}`||t}return t})),p=(0,i.Fl)((()=>({to:e.to,href:f.value,target:e.target,rel:"_blank"===e.target&&null===e.rel?"noopener":e.rel||null,tabindex:a.value?"-1":typeof n.tabindex>"u"?null:n.tabindex,"aria-disabled":a.value?"true":null})));return{tag:h,routerAttr:p,link:d,clicked:e=>{if(a.value)return e.preventDefault(),void e.stopImmediatePropagation();t("click",e)},activeBoolean:r,appendBoolean:s,disabledBoolean:a,replaceBoolean:c,exactBoolean:l}}}),xl=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n};function Sl(e,t,n,r,o,s){return"router-link"===e.tag?((0,i.wg)(),(0,i.j4)((0,i.LL)(e.tag),(0,i.dG)({key:0},e.routerAttr,{custom:""}),{default:(0,i.w5)((({href:t,navigate:n,isActive:r,isExactActive:o})=>[((0,i.wg)(),(0,i.j4)((0,i.LL)(e.routerTag),(0,i.dG)({ref:"link",href:t,class:[r&&e.activeClass,o&&e.exactActiveClass]},e.$attrs,{onClick:n}),{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default")])),_:2},1040,["href","class","onClick"]))])),_:3},16)):((0,i.wg)(),(0,i.j4)((0,i.LL)(e.tag),(0,i.dG)({key:1,ref:"link",class:{active:e.activeBoolean,disabled:e.disabledBoolean}},e.routerAttr,{onClick:e.clicked}),{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default")])),_:3},16,["class","onClick"]))}const El=xl(wl,[["render",Sl]]),Ml=vs(_l,["event","routerTag"]),Tl=(0,i.aZ)({components:{BLink:El},props:{pill:{type:[Boolean,String],default:!1},tag:{type:String,default:"span"},variant:{type:String,default:"secondary"},textIndicator:{type:[Boolean,String],default:!1},dotIndicator:{type:[Boolean,String],default:!1},...Ml},setup(e){const t=(0,i.Fl)((()=>va(e))),n=(0,i.Fl)((()=>t.value?El:e.tag)),r=ya((0,o.Vh)(e,"pill")),s=ya((0,o.Vh)(e,"textIndicator")),a=ya((0,o.Vh)(e,"dotIndicator"));return{classes:(0,i.Fl)((()=>({[`bg-${e.variant}`]:e.variant,active:e.active,disabled:e.disabled,"text-dark":["warning","info","light"].includes(e.variant),"rounded-pill":r.value,"position-absolute top-0 start-100 translate-middle":s.value||a.value,"p-2 border border-light rounded-circle":a.value,"text-decoration-none":t.value}))),props:t.value?ma(e,Ml):{},computedTag:n}}});function Cl(e,t,n,r,o,s){return(0,i.wg)(),(0,i.j4)((0,i.LL)(e.computedTag),(0,i.dG)({class:["badge",e.classes]},e.props),{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default")])),_:3},16,["class"])}const Al=xl(Tl,[["render",Cl]]),kl=vs(_l,["event","routerTag"]),Ol=(0,i.aZ)({components:{BLink:El},props:{...kl,active:{type:[Boolean,String],default:!1},ariaCurrent:{type:String,default:"location"},disabled:{type:[Boolean,String],default:!1},text:{type:String,required:!1}},emits:["click"],setup(e,{emit:t}){const n=ya((0,o.Vh)(e,"active")),r=ya((0,o.Vh)(e,"disabled")),s=(0,i.Fl)((()=>({active:n.value}))),a=(0,i.Fl)((()=>n.value?"span":El)),l=(0,i.Fl)((()=>n.value?e.ariaCurrent:void 0));return{liClasses:s,computedTag:a,computedAriaCurrent:l,clicked:e=>{if(r.value||n.value)return e.preventDefault(),void e.stopImmediatePropagation();r.value||t("click",e)}}}});function Rl(e,t,n,r,o,a){return(0,i.wg)(),(0,i.iD)("li",{class:(0,s.C_)(["breadcrumb-item",e.liClasses])},[((0,i.wg)(),(0,i.j4)((0,i.LL)(e.computedTag),(0,i.dG)({"aria-current":e.computedAriaCurrent},e.$props,{onClick:e.clicked}),{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default")])),_:3},16,["aria-current","onClick"]))],2)}const Pl=xl(Ol,[["render",Rl]]),Ll={"aria-label":"breadcrumb"},Dl={class:"breadcrumb"},Il=(0,i.aZ)({__name:"BBreadcrumb",props:{items:null},setup(e){const t=e,n=xa(),r=(0,i.Fl)((()=>{const e=t.items||(null==n?void 0:n.items)||[];let r=!1;return e.map(((t,n)=>("string"==typeof t&&(t={text:t},n<e.length-1&&(t.href="#")),t.active&&(r=!0),!t.active&&!r&&(t.active=n+1===e.length),t)))}));return(e,t)=>((0,i.wg)(),(0,i.iD)("nav",Ll,[(0,i._)("ol",Dl,[(0,i.WI)(e.$slots,"prepend"),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,o.SU)(r),((e,t)=>((0,i.wg)(),(0,i.j4)(Pl,(0,i.dG)({key:t},e),{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e.text),1)])),_:2},1040)))),128)),(0,i.WI)(e.$slots,"default"),(0,i.WI)(e.$slots,"append")])]))}}),Nl={key:0,class:"visually-hidden"},Ul=(0,i.aZ)({__name:"BSpinner",props:{label:null,role:{default:"status"},small:{default:!1},tag:{default:"span"},type:{default:"border"},variant:null},setup(e){const t=e,n=ya((0,o.Vh)(t,"small")),r=(0,i.Fl)((()=>({"spinner-border":"border"===t.type,"spinner-border-sm":"border"===t.type&&n.value,"spinner-grow":"grow"===t.type,"spinner-grow-sm":"grow"===t.type&&n.value,[`text-${t.variant}`]:void 0!==t.variant})));return(t,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(e.tag),{class:(0,s.C_)((0,o.SU)(r)),role:e.label||t.$slots.label?e.role:null,"aria-hidden":!e.label&&!t.$slots.label||null},{default:(0,i.w5)((()=>[e.label||t.$slots.label?((0,i.wg)(),(0,i.iD)("span",Nl,[(0,i.WI)(t.$slots,"label",{},(()=>[(0,i.Uk)((0,s.zw)(e.label),1)]))])):(0,i.kq)("",!0)])),_:3},8,["class","role","aria-hidden"]))}}),Fl=(0,i.aZ)({components:{BLink:El,BSpinner:Ul},props:{..._l,active:{type:[Boolean,String],default:!1},disabled:{type:[Boolean,String],default:!1},href:{type:String,required:!1},pill:{type:[Boolean,String],default:!1},pressed:{type:[Boolean,String],default:!1},rel:{type:String,default:void 0},size:{type:String,default:"md"},squared:{type:[Boolean,String],default:!1},tag:{type:String,default:"button"},target:{type:String,default:"_self"},type:{type:String,default:"button"},variant:{type:String,default:"secondary"},loading:{type:[Boolean,String],default:!1},loadingMode:{type:String,default:"inline"}},emits:["click","update:pressed"],setup(e,{emit:t}){const n=ya((0,o.Vh)(e,"active")),r=ya((0,o.Vh)(e,"disabled")),s=ya((0,o.Vh)(e,"pill")),a=ya((0,o.Vh)(e,"pressed")),l=ya((0,o.Vh)(e,"squared")),c=ya((0,o.Vh)(e,"loading")),u=(0,i.Fl)((()=>!0===a.value)),d=(0,i.Fl)((()=>"button"===e.tag&&void 0===e.href&&null===e.to)),h=(0,i.Fl)((()=>va(e))),f=(0,i.Fl)((()=>null!==e.to)),p=(0,i.Fl)((()=>void 0===e.href&&!d.value)),m=(0,i.Fl)((()=>({[`btn-${e.variant}`]:!!e.variant,[`btn-${e.size}`]:!!e.size,active:n.value||a.value,"rounded-pill":s.value,"rounded-0":l.value,disabled:r.value}))),g=(0,i.Fl)((()=>({"aria-disabled":p.value?r.value:null,"aria-pressed":u.value?a.value:null,autocomplete:u.value?"off":null,disabled:d.value?r.value:null,href:e.href,rel:h.value?e.rel:null,role:p.value||h.value?"button":null,target:h.value?e.target:null,type:d.value?e.type:null,to:d.value?null:e.to,append:h.value?e.append:null,activeClass:f.value?e.activeClass:null,event:f.value?e.event:null,exact:f.value?e.exact:null,exactActiveClass:f.value?e.exactActiveClass:null,replace:f.value?e.replace:null,routerComponentName:f.value?e.routerComponentName:null,routerTag:f.value?e.routerTag:null}))),v=(0,i.Fl)((()=>f.value?El:e.href?"a":e.tag));return{classes:m,attrs:g,computedTag:v,clicked:e=>{if(r.value)return e.preventDefault(),void e.stopPropagation();t("click",e),u.value&&t("update:pressed",!a.value)},loadingBoolean:c}}});function Bl(e,t,n,r,o,a){const l=(0,i.up)("b-spinner");return(0,i.wg)(),(0,i.j4)((0,i.LL)(e.computedTag),(0,i.dG)({class:["btn",e.classes]},e.attrs,{onClick:e.clicked}),{default:(0,i.w5)((()=>[e.loadingBoolean?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,s.C_)(["btn-loading",{"mode-fill":"fill"===e.loadingMode,"mode-inline":"inline"===e.loadingMode}])},[(0,i.WI)(e.$slots,"loading",{},(()=>[(0,i.Wm)(l,{class:"btn-spinner",small:"lg"!==e.size},null,8,["small"])]))],2)):(0,i.kq)("",!0),(0,i._)("div",{class:(0,s.C_)(["btn-content",{"btn-loading-fill":e.loadingBoolean&&"fill"===e.loadingMode}])},[(0,i.WI)(e.$slots,"default")],2)])),_:3},16,["class","onClick"])}const Vl=xl(Fl,[["render",Bl]]),zl=(0,i.aZ)({__name:"BButtonGroup",props:{ariaLabel:{default:"Group"},size:null,tag:{default:"div"},vertical:{default:!1}},setup(e){const t=e,n=ya((0,o.Vh)(t,"vertical")),r=(0,i.Fl)((()=>({"btn-group":!n.value&&void 0===t.size,[`btn-group-${t.size}`]:void 0!==t.size,"btn-group-vertical":n.value})));return(t,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(e.tag),{class:(0,s.C_)((0,o.SU)(r)),role:"group","aria-label":e.ariaLabel},{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default")])),_:3},8,["class","aria-label"]))}}),jl=["aria-label"],Hl=(0,i.aZ)({__name:"BButtonToolbar",props:{ariaLabel:{default:"Group"},justify:{default:!1}},setup(e){const t=ya((0,o.Vh)(e,"justify")),n=(0,i.Fl)((()=>({"justify-content-between":t.value})));return(t,r)=>((0,i.wg)(),(0,i.iD)("div",{class:(0,s.C_)([(0,o.SU)(n),"btn-toolbar"]),role:"toolbar","aria-label":e.ariaLabel},[(0,i.WI)(t.$slots,"default")],10,jl))}}),Wl=(0,i.aZ)({__name:"BCardImg",props:{alt:{default:void 0},bottom:{default:!1},end:{default:!1},height:null,left:{default:!1},right:{default:!1},src:null,lazy:{default:!1},start:{default:!1},top:{default:!1},width:null},setup(e){const t=e,n=ya((0,o.Vh)(t,"bottom")),r=ya((0,o.Vh)(t,"end")),s=ya((0,o.Vh)(t,"left")),a=ya((0,o.Vh)(t,"right")),l=ya((0,o.Vh)(t,"start")),c=ya((0,o.Vh)(t,"top")),u=ya((0,o.Vh)(t,"lazy")),d=(0,i.Fl)((()=>({loading:u.value?"lazy":"eager",src:t.src,alt:t.alt,width:("number"==typeof t.width?t.width:parseInt(t.width,10))||void 0,height:("number"==typeof t.height?t.height:parseInt(t.height,10))||void 0}))),h=(0,i.Fl)((()=>s.value?"float-start":a.value?"float-end":"")),f=(0,i.Fl)((()=>c.value?"card-img-top":a.value||r.value?"card-img-right":n.value?"card-img-bottom":s.value||l.value?"card-img-left":"card-img")),p=(0,i.Fl)((()=>({[h.value]:!!h.value,[f.value]:!!f.value})));return(e,t)=>((0,i.wg)(),(0,i.iD)("img",(0,i.dG)({class:(0,o.SU)(p)},(0,o.SU)(d)),null,16))}}),Gl=["innerHTML"],$l=(0,i.aZ)({__name:"BCardHeadFoot",props:{text:null,bgVariant:null,borderVariant:null,html:null,tag:{default:"div"},textVariant:null},setup(e){const t=e,n=(0,i.Fl)((()=>({[`text-${t.textVariant}`]:void 0!==t.textVariant,[`bg-${t.bgVariant}`]:void 0!==t.bgVariant,[`border-${t.borderVariant}`]:void 0!==t.borderVariant})));return(t,r)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(e.tag),{class:(0,s.C_)((0,o.SU)(n))},{default:(0,i.w5)((()=>[e.html?((0,i.wg)(),(0,i.iD)("div",{key:0,innerHTML:e.html},null,8,Gl)):(0,i.WI)(t.$slots,"default",{key:1},(()=>[(0,i.Uk)((0,s.zw)(e.text),1)]))])),_:3},8,["class"]))}}),ql=(0,i.aZ)({__name:"BCardHeader",props:{text:null,bgVariant:null,borderVariant:null,html:null,tag:{default:"div"},textVariant:null},setup(e){return(e,t)=>((0,i.wg)(),(0,i.j4)($l,(0,i.dG)({class:"card-header"},e.$props),{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default")])),_:3},16))}}),Yl=(0,i.aZ)({__name:"BCardTitle",props:{text:null,tag:{default:"h4"}},setup(e){return(t,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(e.tag),{class:"card-title"},{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default",{},(()=>[(0,i.Uk)((0,s.zw)(e.text),1)]))])),_:3}))}}),Xl=(0,i.aZ)({__name:"BCardSubTitle",props:{text:null,tag:{default:"h6"},textVariant:{default:"muted"}},setup(e){const t=e,n=(0,i.Fl)((()=>({[`text-${t.textVariant}`]:!!t.textVariant})));return(t,r)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(e.tag),{class:(0,s.C_)(["card-subtitle mb-2",(0,o.SU)(n)])},{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default",{},(()=>[(0,i.Uk)((0,s.zw)(e.text),1)]))])),_:3},8,["class"]))}}),Zl=(0,i.aZ)({__name:"BCardBody",props:{bodyBgVariant:null,bodyTag:{default:"div"},bodyTextVariant:null,overlay:{default:!1},subTitle:null,subTitleTag:{default:"h4"},subTitleTextVariant:null,title:null,titleTag:{default:"h4"},text:null},setup(e){const t=e,n=ya((0,o.Vh)(t,"overlay")),r=(0,i.Fl)((()=>({"card-img-overlay":n.value,[`text-${t.bodyTextVariant}`]:void 0!==t.bodyTextVariant,[`bg-${t.bodyBgVariant}`]:void 0!==t.bodyBgVariant})));return(t,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(e.bodyTag),{class:(0,s.C_)(["card-body",(0,o.SU)(r)])},{default:(0,i.w5)((()=>[e.title||t.$slots.title?((0,i.wg)(),(0,i.j4)(Yl,{key:0,tag:e.titleTag},{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"title",{},(()=>[(0,i.Uk)((0,s.zw)(e.title),1)]))])),_:3},8,["tag"])):(0,i.kq)("",!0),e.subTitle||t.$slots.subTitle?((0,i.wg)(),(0,i.j4)(Xl,{key:1,tag:e.subTitleTag,"text-variant":e.subTitleTextVariant},{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"subTitle",{},(()=>[(0,i.Uk)((0,s.zw)(e.subTitle),1)]))])),_:3},8,["tag","text-variant"])):(0,i.kq)("",!0),(0,i.WI)(t.$slots,"default",{},(()=>[(0,i.Uk)((0,s.zw)(e.text),1)]))])),_:3},8,["class"]))}}),Kl=(0,i.aZ)({__name:"BCardFooter",props:{text:null,bgVariant:null,borderVariant:null,html:null,tag:{default:"div"},textVariant:null},setup(e){return(t,n)=>((0,i.wg)(),(0,i.j4)($l,(0,i.dG)({class:"card-footer"},t.$props),{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default",{},(()=>[(0,i.Uk)((0,s.zw)(e.text),1)]))])),_:3},16))}}),Jl=(0,i.aZ)({__name:"BCard",props:{align:null,bgVariant:null,bodyBgVariant:null,bodyClass:null,bodyTag:{default:"div"},bodyTextVariant:null,borderVariant:null,footer:null,footerBgVariant:null,footerBorderVariant:null,footerClass:null,footerHtml:{default:""},footerTag:{default:"div"},footerTextVariant:null,header:null,headerBgVariant:null,headerBorderVariant:null,headerClass:null,headerHtml:{default:""},headerTag:{default:"div"},headerTextVariant:null,imgAlt:null,imgBottom:{default:!1},imgEnd:{default:!1},imgHeight:null,imgLeft:{default:!1},imgRight:{default:!1},imgSrc:null,imgStart:{default:!1},imgTop:{default:!1},imgWidth:null,noBody:{default:!1},overlay:{default:!1},subTitle:null,subTitleTag:{default:"h6"},subTitleTextVariant:{default:"muted"},tag:{default:"div"},textVariant:null,title:null,titleTag:{default:"h4"},bodyText:{default:""}},setup(e){const t=e,n=ya((0,o.Vh)(t,"imgBottom")),r=ya((0,o.Vh)(t,"imgEnd")),a=ya((0,o.Vh)(t,"imgLeft")),l=ya((0,o.Vh)(t,"imgRight")),c=ya((0,o.Vh)(t,"imgStart")),u=ya((0,o.Vh)(t,"noBody")),d=(0,i.Fl)((()=>({[`text-${t.align}`]:void 0!==t.align,[`text-${t.textVariant}`]:void 0!==t.textVariant,[`bg-${t.bgVariant}`]:void 0!==t.bgVariant,[`border-${t.borderVariant}`]:void 0!==t.borderVariant,"flex-row":a.value||c.value,"flex-row-reverse":r.value||l.value}))),h=(0,i.Fl)((()=>({bgVariant:t.headerBgVariant,borderVariant:t.headerBorderVariant,html:t.headerHtml,tag:t.headerTag,textVariant:t.headerTextVariant}))),f=(0,i.Fl)((()=>({overlay:t.overlay,bodyBgVariant:t.bodyBgVariant,bodyTag:t.bodyTag,bodyTextVariant:t.bodyTextVariant,subTitle:t.subTitle,subTitleTag:t.subTitleTag,subTitleTextVariant:t.subTitleTextVariant,title:t.title,titleTag:t.titleTag}))),p=(0,i.Fl)((()=>({bgVariant:t.footerBgVariant,borderVariant:t.footerBorderVariant,html:t.footerHtml,tag:t.footerTag,textVariant:t.footerTextVariant}))),m=(0,i.Fl)((()=>({src:t.imgSrc,alt:t.imgAlt,height:t.imgHeight,width:t.imgWidth,bottom:t.imgBottom,end:t.imgEnd,left:t.imgLeft,right:t.imgRight,start:t.imgStart,top:t.imgTop})));return(t,r)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(e.tag),{class:(0,s.C_)(["card",(0,o.SU)(d)])},{default:(0,i.w5)((()=>[e.imgSrc&&!(0,o.SU)(n)?((0,i.wg)(),(0,i.j4)(Wl,(0,s.vs)((0,i.dG)({key:0},(0,o.SU)(m))),null,16)):(0,i.kq)("",!0),e.header||t.$slots.header||e.headerHtml?((0,i.wg)(),(0,i.j4)(ql,(0,i.dG)({key:1},(0,o.SU)(h),{class:e.headerClass}),{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"header",{},(()=>[(0,i.Uk)((0,s.zw)(e.header),1)]))])),_:3},16,["class"])):(0,i.kq)("",!0),(0,o.SU)(u)?(0,i.WI)(t.$slots,"default",{key:3},(()=>[(0,i.Uk)((0,s.zw)(e.bodyText),1)])):((0,i.wg)(),(0,i.j4)(Zl,(0,i.dG)({key:2},(0,o.SU)(f),{class:e.bodyClass}),{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default",{},(()=>[(0,i.Uk)((0,s.zw)(e.bodyText),1)]))])),_:3},16,["class"])),e.footer||t.$slots.footer||e.footerHtml?((0,i.wg)(),(0,i.j4)(Kl,(0,i.dG)({key:4},(0,o.SU)(p),{class:e.footerClass}),{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"footer",{},(()=>[(0,i.Uk)((0,s.zw)(e.footer),1)]))])),_:3},16,["class"])):(0,i.kq)("",!0),e.imgSrc&&(0,o.SU)(n)?((0,i.wg)(),(0,i.j4)(Wl,(0,s.vs)((0,i.dG)({key:5},(0,o.SU)(m))),null,16)):(0,i.kq)("",!0)])),_:3},8,["class"]))}}),Ql=(0,i.aZ)({__name:"BCardGroup",props:{columns:{default:!1},deck:{default:!1},tag:{default:"div"}},setup(e){const t=e,n=ya((0,o.Vh)(t,"columns")),r=ya((0,o.Vh)(t,"deck")),a=(0,i.Fl)((()=>r.value?"card-deck":n.value?"card-columns":"card-group")),l=(0,i.Fl)((()=>({[a.value]:!!a.value})));return(t,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(e.tag),{class:(0,s.C_)((0,o.SU)(l))},{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default")])),_:3},8,["class"]))}}),ec=(0,i.aZ)({__name:"BCardText",props:{text:null,tag:{default:"p"}},setup(e){return(t,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(e.tag),{class:"card-text"},{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default",{},(()=>[(0,i.Uk)((0,s.zw)(e.text),1)]))])),_:3}))}}),tc=["id"],nc={key:0,class:"carousel-indicators"},rc=["data-bs-target","data-bs-slide-to","aria-label"],ic={class:"carousel-inner"},oc=["data-bs-target"],sc=(0,i._)("span",{class:"carousel-control-prev-icon","aria-hidden":"true"},null,-1),ac={class:"visually-hidden"},lc=["data-bs-target"],cc=(0,i._)("span",{class:"carousel-control-next-icon","aria-hidden":"true"},null,-1),uc={class:"visually-hidden"},dc=Symbol(),hc=(0,i.aZ)({__name:"BCarousel",props:{id:null,imgHeight:null,imgWidth:null,background:null,modelValue:{default:0},controls:{default:!1},indicators:{default:!1},interval:{default:5e3},noTouch:{default:!1},noWrap:{default:!1},controlsPrevText:{default:"Previous"},controlsNextText:{default:"Next"},indicatorsButtonLabel:{default:"Slide"}},emits:["sliding-start","sliding-end"],setup(e,{emit:t}){const n=e,r=ya((0,o.Vh)(n,"controls")),a=ya((0,o.Vh)(n,"indicators")),l=ya((0,o.Vh)(n,"noTouch"));ya((0,o.Vh)(n,"noWrap"));const c=(0,i.Rr)(),u=(0,o.iH)(),d=(0,o.iH)(),h=Pa((0,o.Vh)(n,"id"),"accordion"),f=(0,o.iH)([]);return Sa(u,"slide.bs.carousel",(e=>t("sliding-start",e))),Sa(u,"slid.bs.carousel",(e=>t("sliding-end",e))),(0,i.bv)((()=>{d.value=new It(u.value,{wrap:!l.value,interval:n.interval,touch:!l.value}),c.default&&(f.value=c.default().filter((e=>{var t;return"BCarouselSlide"===(null==(t=e.type)?void 0:t.name)})))})),(0,i.JJ)(dc,{background:n.background,width:n.imgWidth,height:n.imgHeight}),(t,n)=>((0,i.wg)(),(0,i.iD)("div",{id:(0,o.SU)(h),ref_key:"element",ref:u,class:"carousel slide","data-bs-ride":"carousel"},[(0,o.SU)(a)?((0,i.wg)(),(0,i.iD)("div",nc,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(f.value,((t,n)=>((0,i.wg)(),(0,i.iD)("button",{key:n,type:"button","data-bs-target":`#${(0,o.SU)(h)}`,"data-bs-slide-to":n,class:(0,s.C_)(0===n?"active":""),"aria-current":"true","aria-label":`${e.indicatorsButtonLabel} ${n}`},null,10,rc)))),128))])):(0,i.kq)("",!0),(0,i._)("div",ic,[(0,i.WI)(t.$slots,"default")]),(0,o.SU)(r)?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i._)("button",{class:"carousel-control-prev",type:"button","data-bs-target":`#${(0,o.SU)(h)}`,"data-bs-slide":"prev"},[sc,(0,i._)("span",ac,(0,s.zw)(e.controlsPrevText),1)],8,oc),(0,i._)("button",{class:"carousel-control-next",type:"button","data-bs-target":`#${(0,o.SU)(h)}`,"data-bs-slide":"next"},[cc,(0,i._)("span",uc,(0,s.zw)(e.controlsNextText),1)],8,lc)],64)):(0,i.kq)("",!0)],8,tc))}}),fc=(0,i.aZ)({__name:"BImg",props:{alt:null,blank:{default:!1},blankColor:{default:"transparent"},block:{default:!1},center:{default:!1},fluid:{default:!1},lazy:{default:!1},fluidGrow:{default:!1},height:null,left:{default:!1},right:{default:!1},rounded:{type:[Boolean,String],default:!1},sizes:null,src:null,srcset:null,thumbnail:{default:!1},width:null},emits:["load"],setup(e,{emit:t}){const n=e,r=ya((0,o.Vh)(n,"lazy")),s=ya((0,o.Vh)(n,"blank")),a=ya((0,o.Vh)(n,"block")),l=ya((0,o.Vh)(n,"center")),c=ya((0,o.Vh)(n,"fluid")),u=ya((0,o.Vh)(n,"fluidGrow")),d=ya((0,o.Vh)(n,"left")),h=ya((0,o.Vh)(n,"right")),f=ya((0,o.Vh)(n,"thumbnail")),p='<svg width="%{w}" height="%{h}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 %{w} %{h}" preserveAspectRatio="none"><rect width="100%" height="100%" style="fill:%{f};"></rect></svg>',m=(e,t,n)=>`data:image/svg+xml;charset=UTF-8,${encodeURIComponent(p.replace("%{w}",String(e)).replace("%{h}",String(t)).replace("%{f}",n))}`,g=(0,i.Fl)((()=>"string"==typeof n.srcset?n.srcset.split(",").filter((e=>e)).join(","):Array.isArray(n.srcset)?n.srcset.filter((e=>e)).join(","):void 0)),v=(0,i.Fl)((()=>"string"==typeof n.sizes?n.sizes.split(",").filter((e=>e)).join(","):Array.isArray(n.sizes)?n.sizes.filter((e=>e)).join(","):void 0)),y=(0,i.Fl)((()=>{const e="number"==typeof n.width?n.width:parseInt(n.width,10)||void 0,t="number"==typeof n.height?n.height:parseInt(n.height,10)||void 0;if(s.value){if(e&&!t)return{height:e,width:e};if(!e&&t)return{height:t,width:t};if(!e&&!t)return{height:1,width:1}}return{width:e,height:t}})),b=(0,i.Fl)((()=>m(y.value.width,y.value.height,n.blankColor||"transparent"))),_=(0,i.Fl)((()=>({src:s.value?b.value:n.src,alt:n.alt,width:y.value.width||void 0,height:y.value.height||void 0,srcset:s.value?void 0:g.value,sizes:s.value?void 0:v.value,loading:r.value?"lazy":"eager"}))),w=(0,i.Fl)((()=>d.value?"float-start":h.value?"float-end":l.value?"mx-auto":void 0)),x=(0,i.Fl)((()=>({"img-thumbnail":f.value,"img-fluid":c.value||u.value,"w-100":u.value,rounded:""===n.rounded||!0===n.rounded,[`rounded-${n.rounded}`]:"string"==typeof n.rounded&&""!==n.rounded,[`${w.value}`]:void 0!==w.value,"d-block":a.value||l.value})));return(e,n)=>((0,i.wg)(),(0,i.iD)("img",(0,i.dG)({class:(0,o.SU)(x)},(0,o.SU)(_),{onLoad:n[0]||(n[0]=e=>t("load",e))}),null,16))}}),pc=["id","data-bs-interval"],mc=["innerHTML"],gc={key:1},vc=["innerHTML"],yc={key:1},bc=(0,i.aZ)({__name:"BCarouselSlide",props:{imgSrc:null,imgHeight:null,imgWidth:null,interval:null,active:{default:!1},background:null,caption:null,captionHtml:null,captionTag:{default:"h3"},contentTag:{default:"div"},contentVisibleUp:null,id:null,imgAlt:null,imgBlank:{default:!1},imgBlankColor:{default:"transparent"},text:null,textHtml:null,textTag:{default:"p"}},setup(e){const t=e,n=ya((0,o.Vh)(t,"active")),r=ya((0,o.Vh)(t,"imgBlank")),a=(0,i.f3)(dc,{}),l=Pa((0,o.Vh)(t,"id"),"accordion");(0,i.Fl)((()=>r.value?r.value:t.imgSrc));const c=(0,i.Fl)((()=>({background:`${t.background||a.background||"rgb(171, 171, 171)"} none repeat scroll 0% 0%`}))),u=(0,i.Fl)((()=>({"d-none":void 0!==t.contentVisibleUp,[`d-${t.contentVisibleUp}-block`]:void 0!==t.contentVisibleUp}))),d=(0,i.Fl)((()=>a.width)),h=(0,i.Fl)((()=>a.height));return(t,a)=>((0,i.wg)(),(0,i.iD)("div",{id:(0,o.SU)(l),class:(0,s.C_)(["carousel-item",{active:(0,o.SU)(n)}]),"data-bs-interval":e.interval,style:(0,s.j5)((0,o.SU)(c))},[(0,i.WI)(t.$slots,"img",{},(()=>[(0,i.Wm)(fc,{class:"d-block w-100",alt:e.imgAlt,src:e.imgSrc,width:e.imgWidth||(0,o.SU)(d),height:e.imgHeight||(0,o.SU)(h),blank:(0,o.SU)(r),"blank-color":e.imgBlankColor},null,8,["alt","src","width","height","blank","blank-color"])])),e.caption||e.captionHtml||e.text||e.textHtml||t.$slots.default?((0,i.wg)(),(0,i.j4)((0,i.LL)(e.contentTag),{key:0,class:(0,s.C_)(["carousel-caption",(0,o.SU)(u)])},{default:(0,i.w5)((()=>[e.caption||e.captionHtml?((0,i.wg)(),(0,i.j4)((0,i.LL)(e.captionTag),{key:0},{default:(0,i.w5)((()=>[e.captionHtml?((0,i.wg)(),(0,i.iD)("span",{key:0,innerHTML:e.captionHtml},null,8,mc)):((0,i.wg)(),(0,i.iD)("span",gc,(0,s.zw)(e.caption),1))])),_:1})):(0,i.kq)("",!0),e.text||e.textHtml?((0,i.wg)(),(0,i.j4)((0,i.LL)(e.textTag),{key:1},{default:(0,i.w5)((()=>[e.textHtml?((0,i.wg)(),(0,i.iD)("span",{key:0,innerHTML:e.textHtml},null,8,vc)):((0,i.wg)(),(0,i.iD)("span",yc,(0,s.zw)(e.text),1))])),_:1})):(0,i.kq)("",!0),(0,i.WI)(t.$slots,"default")])),_:3},8,["class"])):(0,i.kq)("",!0)],14,pc))}}),_c=ia("",[],{type:[Boolean,String,Number],default:!1}),wc=ia("offset",[""],{type:[String,Number],default:null}),xc=ia("order",[""],{type:[String,Number],default:null}),Sc=(0,i.aZ)({name:"BCol",props:{col:{type:[Boolean,String],default:!1},cols:{type:[String,Number],default:null},..._c,offset:{type:[String,Number],default:null},...wc,order:{type:[String,Number],default:null},...xc,alignSelf:{type:String,default:null},tag:{type:String,default:"div"}},setup(e){const t=ya((0,o.Vh)(e,"col")),n=[{content:_c,propPrefix:"cols",classPrefix:"col"},{content:wc,propPrefix:"offset"},{content:xc,propPrefix:"order"}],r=(0,i.Fl)((()=>n.flatMap((t=>oa(e,t.content,t.propPrefix,t.classPrefix)))));return{classes:(0,i.Fl)((()=>({col:t.value||!r.value.some((t=>/^col-/.test(t)&&!e.cols)),[`col-${e.cols}`]:!!e.cols,[`offset-${e.offset}`]:!!e.offset,[`order-${e.order}`]:!!e.order,[`align-self-${e.alignSelf}`]:!!e.alignSelf}))),classList:r}}});function Ec(e,t,n,r,o,a){return(0,i.wg)(),(0,i.j4)((0,i.LL)(e.tag),{class:(0,s.C_)([e.classes,e.classList])},{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default")])),_:3},8,["class"])}const Mc=xl(Sc,[["render",Ec]]),Tc={name:"",enterActiveClass:"",enterToClass:"",leaveActiveClass:"",leaveToClass:"showing",enterFromClass:"showing",leaveFromClass:""},Cc={...Tc,enterActiveClass:"fade showing",leaveActiveClass:"fade showing"},Ac=(0,i.aZ)({props:{appear:{type:[Boolean,String],default:!1},mode:{type:String,required:!1},noFade:{type:[Boolean,String],default:!1},transProps:{type:Object,required:!1}},setup(e,{slots:t}){const n=ya((0,o.Vh)(e,"appear")),r=ya((0,o.Vh)(e,"noFade")),s=(0,o.iH)(e.transProps);return Es(s.value)||(s.value=r.value?Tc:Cc,n.value&&(s.value={...s.value,appear:!0,appearClass:s.value.enterClass,appearActiveClass:s.value.enterActiveClass,appearToClass:s.value.enterToClass})),s.value={mode:e.mode,...s.value,css:!0},()=>(0,i.h)(a.uT,{...s.value},{default:()=>t.default?t.default():[]})}}),kc="toast-title",Oc=1e3,Rc=(0,i.aZ)({components:{BLink:El},props:{..._l,delay:{type:Number,default:5e3},bodyClass:{type:String},body:{type:[Object,String]},headerClass:{type:String},headerTag:{type:String,default:"div"},animation:{type:[Boolean,String],default:!0},id:{type:String},isStatus:{type:[Boolean,String],default:!1},autoHide:{type:[Boolean,String],default:!0},noCloseButton:{type:[Boolean,String],default:!1},noFade:{type:[Boolean,String],default:!1},noHoverPause:{type:[Boolean,String],default:!1},solid:{type:[Boolean,String],default:!1},static:{type:[Boolean,String],default:!1},title:{type:String},modelValue:{type:[Boolean,String],default:!1},toastClass:{type:Array},variant:{type:String}},emits:["destroyed","update:modelValue"],setup(e,{emit:t,slots:n}){ya((0,o.Vh)(e,"animation"));const r=ya((0,o.Vh)(e,"isStatus")),s=ya((0,o.Vh)(e,"autoHide")),a=ya((0,o.Vh)(e,"noCloseButton")),l=ya((0,o.Vh)(e,"noFade")),c=ya((0,o.Vh)(e,"noHoverPause"));ya((0,o.Vh)(e,"solid")),ya((0,o.Vh)(e,"static"));const u=ya((0,o.Vh)(e,"modelValue")),d=(0,o.iH)(!1),h=(0,o.iH)(!1),f=(0,o.iH)(!1),p=(0,i.Fl)((()=>({[`b-toast-${e.variant}`]:void 0!==e.variant,show:f.value||d.value})));let m,g,v;const y=()=>{typeof m>"u"||(clearTimeout(m),m=void 0)},b=(0,i.Fl)((()=>Math.max(da(e.delay,0),Oc))),_=()=>{u.value&&(g=v=0,y(),h.value=!0,ra((()=>{f.value=!1})))},w=()=>{y(),t("update:modelValue",!0),g=v=0,h.value=!1,(0,i.Y3)((()=>{ra((()=>{f.value=!0}))}))},x=()=>{if(!s.value||c.value||!m||v)return;const e=Date.now()-g;e>0&&(y(),v=Math.max(b.value-e,Oc))},S=()=>{(!s.value||c.value||!v)&&(v=g=0),E()};(0,i.YP)((()=>u.value),(e=>{e?w():_()}));const E=()=>{y(),s.value&&(m=setTimeout(_,v||b.value),g=Date.now(),v=0)},M=()=>{d.value=!0,t("update:modelValue",!0)},T=()=>{d.value=!1,E()},C=()=>{d.value=!0},A=()=>{d.value=!1,v=g=0,t("update:modelValue",!1)};(0,i.Ah)((()=>{y(),s.value&&t("destroyed",e.id)})),(0,i.bv)((()=>{(0,i.Y3)((()=>{u.value&&ra((()=>{w()}))}))}));const k=()=>{(0,i.Y3)((()=>{ra((()=>{_()}))}))};return()=>{const t=()=>{const t=[],r=ua(kc,{hide:_},n);r?t.push((0,i.h)(r)):e.title&&t.push((0,i.h)("strong",{class:"me-auto"},e.title)),!a.value&&0!==t.length&&t.push((0,i.h)(dl,{class:["btn-close"],onClick:()=>{_()}}));const o=[];if(t.length>0&&o.push((0,i.h)(e.headerTag,{class:"toast-header"},{default:()=>t})),ua("default",{hide:_},n)||e.body){const t=(0,i.h)(va(e)?"b-link":"div",{class:["toast-body",e.bodyClass],onClick:va(e)?{click:k}:{}},ua("default",{hide:_},n)||e.body);o.push(t)}return(0,i.h)("div",{class:["toast",e.toastClass,p.value],tabindex:"0"},o)};return(0,i.h)("div",{class:["b-toast"],id:e.id,role:h.value?null:r.value?"status":"alert","aria-live":h.value?null:r.value?"polite":"assertive","aria-atomic":h.value?null:"true",onmouseenter:x,onmouseleave:S},[(0,i.h)(Ac,{noFade:l.value,onAfterEnter:T,onBeforeEnter:M,onAfterLeave:A,onBeforeLeave:C},(()=>[f.value?t():""]))])}}}),Pc=(0,i.aZ)({__name:"BToaster",props:{position:{default:"top-right"},instance:null},setup(e){const t=e,n={"top-left":"top-0 start-0","top-center":"top-0 start-50 translate-middle-x","top-right":"top-0 end-0","middle-left":"top-50 start-0 translate-middle-y","middle-center":"top-50 start-50 translate-middle","middle-right":"top-50 end-0 translate-middle-y","bottom-left":"bottom-0 start-0","bottom-center":"bottom-0 start-50 translate-middle-x","bottom-right":"bottom-0 end-0"},r=(0,i.Fl)((()=>n[t.position])),a=e=>{var n;null==(n=t.instance)||n.remove(e)};return(t,n)=>{var l;return(0,i.wg)(),(0,i.iD)("div",{class:(0,s.C_)([[(0,o.SU)(r)],"b-toaster position-fixed p-3"]),style:{"z-index":"11"}},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(null==(l=e.instance)?void 0:l.toasts(e.position).value,(e=>((0,i.wg)(),(0,i.j4)(Rc,{id:e.options.id,key:e.options.id,modelValue:e.options.value,"onUpdate:modelValue":t=>e.options.value=t,delay:e.options.delay,title:e.content.title,body:e.content.body,component:e.content.body,variant:e.options.variant,onDestroyed:a},null,8,["id","modelValue","onUpdate:modelValue","delay","title","body","component","variant"])))),128))],2)}}}),Lc={delay:5e3,value:!0,pos:"top-right"};class Dc{constructor(e){ms(this,"vm"),ms(this,"containerPositions"),(0,o.PG)(e)?this.vm=e:this.vm=(0,o.qj)(e),this.containerPositions=(0,i.Fl)((()=>{const e=new Set([]);return this.vm.toasts.map((t=>{t.options.pos&&e.add(t.options.pos)})),e}))}toasts(e){return e?(0,i.Fl)((()=>this.vm.toasts.filter((t=>{if(t.options.pos===e&&t.options.value)return t})))):(0,i.Fl)((()=>this.vm.toasts))}remove(...e){this.vm.toasts=this.vm.toasts.filter((t=>{if(t.options.id&&!e.includes(t.options.id))return t}))}isRoot(){var e;return null!=(e=this.vm.root)&&e}show(e,t=Lc){const n={id:sa(),...Lc,...t},r={options:(0,o.qj)(n),content:e};return this.vm.toasts.push(r),r}info(e,t=Lc){return this.show(e,{variant:"info",...t})}danger(e,t=Lc){return this.show(e,{variant:"danger",...t})}warning(e,t=Lc){return this.show(e,{variant:"warning",...t})}success(e,t=Lc){return this.show(e,{variant:"success",...t})}hide(){}}class Ic{constructor(){ms(this,"vms"),ms(this,"rootInstance"),ms(this,"useToast",Vc),this.vms={}}getOrCreateViewModel(e){if(!e){if(this.rootInstance)return this.vms[this.rootInstance];const e={root:!0,toasts:[],container:void 0,id:Symbol("toast")};return this.rootInstance=e.id,this.vms[e.id]=e,e}if(e.root){if(this.rootInstance)return this.vms[this.rootInstance];this.rootInstance=e.id}return this.vms[e.id]=e,e}getVM(e){return!e&&this.rootInstance?this.vms[this.rootInstance]:e?this.vms[e]:void 0}}const Nc=Symbol(),Uc=Symbol(),Fc={container:void 0,toasts:[],root:!1};function Bc(){return(0,i.f3)(Uc)}function Vc(e,t=Nc){const n=(0,i.f3)(Bc());if(!e)return new Dc(n.getOrCreateViewModel());const r={id:Symbol("toastInstance")},o={...Fc,...r,...e},s=n.getOrCreateViewModel(o);return new Dc(s)}const zc={install:(e,t={})=>{var n,r,i,o;e.provide(Uc,null!=(r=null==(n=null==t?void 0:t.BToast)?void 0:n.injectkey)?r:Nc),e.provide(null!=(o=null==(i=null==t?void 0:t.BToast)?void 0:i.injectkey)?o:Nc,new Ic)}},jc=(0,i.aZ)({name:"BContainer",props:{gutterX:{type:String,default:null},gutterY:{type:String,default:null},fluid:{type:[Boolean,String],default:!1},toast:{type:Object},position:{type:String,required:!1},tag:{type:String,default:"div"}},setup(e,{slots:t,expose:n}){const r=(0,o.iH)();let s;const a=(0,i.Fl)((()=>({container:!e.fluid,["container-fluid"]:"boolean"==typeof e.fluid&&e.fluid,[`container-${e.fluid}`]:"string"==typeof e.fluid,[`gx-${e.gutterX}`]:null!==e.gutterX,[`gy-${e.gutterY}`]:null!==e.gutterY})));return(0,i.bv)((()=>{e.toast})),e.toast&&(s=Vc({container:r,root:e.toast.root}),n({})),()=>{var n;const o=[];return null==s||s.containerPositions.value.forEach((e=>{o.push((0,i.h)(Pc,{key:e,instance:s,position:e}))})),(0,i.h)(e.tag,{class:[a.value,e.position],ref:r},[...o,null==(n=t.default)?void 0:n.call(t)])}},methods:{}}),Hc={class:"visually-hidden"},Wc=["aria-labelledby","role"],Gc=(0,i.aZ)({__name:"BDropdown",props:{id:null,menuClass:null,size:null,splitClass:null,splitVariant:null,text:null,toggleClass:null,autoClose:{type:[Boolean,String],default:!0},block:{default:!1},boundary:{default:"clippingParents"},dark:{default:!1},disabled:{default:!1},isNav:{default:!1},dropup:{default:!1},dropright:{default:!1},dropleft:{default:!1},noFlip:{default:!1},offset:{default:0},popperOpts:{default:()=>({})},right:{default:!1},role:{default:"menu"},split:{default:!1},splitButtonType:{default:"button"},splitHref:{default:void 0},noCaret:{default:!1},toggleText:{default:"Toggle dropdown"},variant:{default:"secondary"}},emits:["show","shown","hide","hidden","click","toggle"],setup(e,{expose:t,emit:n}){const r=e,a=ya((0,o.Vh)(r,"block")),l=ya((0,o.Vh)(r,"dark")),c=ya((0,o.Vh)(r,"disabled")),u=ya((0,o.Vh)(r,"dropup")),d=ya((0,o.Vh)(r,"dropright")),h=ya((0,o.Vh)(r,"isNav")),f=ya((0,o.Vh)(r,"dropleft")),p=ya((0,o.Vh)(r,"right")),m=ya((0,o.Vh)(r,"split")),g=ya((0,o.Vh)(r,"noCaret")),v=(0,o.iH)(),y=(0,o.iH)(),b=(0,o.iH)(),_=Pa((0,o.Vh)(r,"id"),"dropdown");Sa(v,"show.bs.dropdown",(()=>n("show"))),Sa(v,"shown.bs.dropdown",(()=>n("shown"))),Sa(v,"hide.bs.dropdown",(()=>n("hide"))),Sa(v,"hidden.bs.dropdown",(()=>n("hidden")));const w=e=>{m.value&&n("click",e)},x=(0,i.Fl)((()=>({"d-grid":a.value,"d-flex":a.value&&m.value}))),S=(0,i.Fl)((()=>({"nav-link":h.value,"dropdown-toggle":!m.value,"dropdown-toggle-no-caret":g.value&&!m.value,"w-100":m.value&&a.value}))),E=(0,i.Fl)((()=>({"dropdown-menu-dark":l.value,"dropdown-menu-end":p.value}))),M=(0,i.Fl)((()=>({"data-bs-toggle":m.value?void 0:"dropdown","aria-expanded":!!m.value&&void 0,ref:m.value?void 0:y,href:m.value?r.splitHref:void 0}))),T=(0,i.Fl)((()=>({ref:m.value?y:void 0}))),C=()=>{var e;null==(e=b.value)||e.hide()};return(0,i.bv)((()=>{var e;b.value=new Hn(null==(e=y.value)?void 0:e.$el,{autoClose:r.autoClose,boundary:r.boundary,offset:r.offset?r.offset.toString():"",reference:r.offset||m.value?"parent":"toggle",popperConfig:e=>{const t={placement:"bottom-start",modifiers:r.noFlip?[{name:"flip",options:{fallbackPlacements:[]}}]:[]};return u.value?t.placement=p.value?"top-end":"top-start":d.value?t.placement="right-start":f.value?t.placement="left-start":p.value&&(t.placement="bottom-end"),ca(e,ca(t,r.popperOpts))}})})),t({hide:C}),(t,r)=>((0,i.wg)(),(0,i.iD)("div",{ref_key:"parent",ref:v,class:(0,s.C_)([(0,o.SU)(x),"btn-group"])},[(0,i.Wm)(Vl,(0,i.dG)({id:(0,o.SU)(_),variant:e.splitVariant||e.variant,size:e.size,class:[(0,o.SU)(S),(0,o.SU)(m)?e.splitClass:e.toggleClass],disabled:(0,o.SU)(c),type:e.splitButtonType},(0,o.SU)(M),{onClick:w}),{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"button-content",{},(()=>[(0,i.Uk)((0,s.zw)(e.text),1)]))])),_:3},16,["id","variant","size","class","disabled","type"]),(0,o.SU)(m)?((0,i.wg)(),(0,i.j4)(Vl,(0,i.dG)({key:0,variant:e.variant,size:e.size,disabled:(0,o.SU)(c)},(0,o.SU)(T),{class:[e.toggleClass,"dropdown-toggle-split dropdown-toggle"],"data-bs-toggle":"dropdown","aria-expanded":"false",onClick:r[0]||(r[0]=e=>n("toggle"))}),{default:(0,i.w5)((()=>[(0,i._)("span",Hc,[(0,i.WI)(t.$slots,"toggle-text",{},(()=>[(0,i.Uk)((0,s.zw)(e.toggleText),1)]))])])),_:3},16,["variant","size","disabled","class"])):(0,i.kq)("",!0),(0,i._)("ul",{class:(0,s.C_)(["dropdown-menu",[e.menuClass,(0,o.SU)(E)]]),"aria-labelledby":(0,o.SU)(_),role:e.role},[(0,i.WI)(t.$slots,"default")],10,Wc)],2))}}),$c={role:"presentation"},qc=(0,i.aZ)({__name:"BDropdownDivider",props:{tag:{default:"hr"}},setup(e){return(t,n)=>((0,i.wg)(),(0,i.iD)("li",$c,[((0,i.wg)(),(0,i.j4)((0,i.LL)(e.tag),{class:"dropdown-divider",role:"separator","aria-orientation":"horizontal"}))]))}}),Yc={},Xc={role:"presentation"},Zc={class:"px-4 py-3"};function Kc(e,t){return(0,i.wg)(),(0,i.iD)("li",Xc,[(0,i._)("form",Zc,[(0,i.WI)(e.$slots,"default")])])}const Jc=xl(Yc,[["render",Kc]]),Qc={role:"presentation"},eu=["id","aria-describedby"],tu={inheritAttrs:!1},nu=(0,i.aZ)({...tu,__name:"BDropdownGroup",props:{id:null,ariaDescribedby:null,header:null,headerClass:{default:void 0},headerTag:{default:"header"},headerVariant:null},setup(e){const t=e,n=(0,i.Fl)((()=>t.id?`${t.id}_group_dd_header`:void 0)),r=(0,i.Fl)((()=>"header"===t.headerTag?void 0:"heading")),a=(0,i.Fl)((()=>({[`text-${t.headerVariant}`]:void 0!==t.headerVariant})));return(t,l)=>((0,i.wg)(),(0,i.iD)("li",Qc,[((0,i.wg)(),(0,i.j4)((0,i.LL)(e.headerTag),{id:(0,o.SU)(n),class:(0,s.C_)(["dropdown-header",[(0,o.SU)(a),e.headerClass]]),role:(0,o.SU)(r)},{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"header",{},(()=>[(0,i.Uk)((0,s.zw)(e.header),1)]))])),_:3},8,["id","class","role"])),(0,i._)("ul",(0,i.dG)({id:e.id,role:"group",class:"list-unstyled"},t.$attrs,{"aria-describedby":e.ariaDescribedby||(0,o.SU)(n)}),[(0,i.WI)(t.$slots,"default")],16,eu)]))}}),ru={},iu={class:"dropdown-header"};function ou(e,t){return(0,i.wg)(),(0,i.iD)("li",null,[(0,i._)("h6",iu,[(0,i.WI)(e.$slots,"default")])])}const su=xl(ru,[["render",ou]]),au={inheritAttrs:!1},lu=(0,i.aZ)({...au,__name:"BDropdownItem",props:{href:null,linkClass:null,active:{default:!1},disabled:{default:!1},rel:{default:void 0},target:{default:"_self"},variant:null},emits:["click"],setup(e,{emit:t}){const n=e,r=ya((0,o.Vh)(n,"active")),a=ya((0,o.Vh)(n,"disabled")),l=(0,i.l1)(),c=(0,i.Fl)((()=>({active:r.value,disabled:a.value,[`text-${n.variant}`]:void 0!==n.variant}))),u=(0,i.Fl)((()=>n.href?"a":l.to?El:"button")),d=(0,i.Fl)((()=>({disabled:a.value,"aria-current":r.value?"true":null,href:"a"===u.value?n.href:null,rel:n.rel,type:"button"===u.value?"button":null,target:n.target,...l.to?{activeClass:"active",...l}:{}}))),h=e=>t("click",e);return(t,n)=>((0,i.wg)(),(0,i.iD)("li",{role:"presentation",class:(0,s.C_)(t.$attrs.class)},[((0,i.wg)(),(0,i.j4)((0,i.LL)((0,o.SU)(u)),(0,i.dG)({class:["dropdown-item",[(0,o.SU)(c),e.linkClass]]},(0,o.SU)(d),{onClick:h}),{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default")])),_:3},16,["class"]))],2))}}),cu={inheritAttrs:!1},uu=(0,i.aZ)({...cu,__name:"BDropdownItemButton",props:{buttonClass:null,active:{default:!1},activeClass:{default:"active"},disabled:{default:!1},variant:null},emits:["click"],setup(e,{emit:t}){const n=e,r=ya((0,o.Vh)(n,"active")),a=ya((0,o.Vh)(n,"disabled")),l=(0,i.Fl)((()=>({[n.activeClass]:r.value,disabled:a.value,[`text-${n.variant}`]:void 0!==n.variant}))),c=(0,i.Fl)((()=>({disabled:a.value}))),u=e=>t("click",e);return(t,n)=>((0,i.wg)(),(0,i.iD)("li",{role:"presentation",class:(0,s.C_)(t.$attrs.class)},[(0,i._)("button",(0,i.dG)({role:"menu",type:"button",class:["dropdown-item",[(0,o.SU)(l),e.buttonClass]]},(0,o.SU)(c),{onClick:u}),[(0,i.WI)(t.$slots,"default")],16)],2))}}),du={role:"presentation"},hu={class:"px-4 py-1 mb-0 text-muted"},fu=(0,i.aZ)({__name:"BDropdownText",props:{text:{default:""}},setup(e){return(t,n)=>((0,i.wg)(),(0,i.iD)("li",du,[(0,i._)("p",hu,[(0,i.WI)(t.$slots,"default",{},(()=>[(0,i.Uk)((0,s.zw)(e.text),1)]))])]))}}),pu=["id","novalidate","onSubmit"],mu=(0,i.aZ)({__name:"BForm",props:{id:null,floating:{default:!1},novalidate:{default:!1},validated:{default:!1}},emits:["submit"],setup(e,{emit:t}){const n=e,r=ya((0,o.Vh)(n,"floating")),l=ya((0,o.Vh)(n,"novalidate")),c=ya((0,o.Vh)(n,"validated")),u=(0,i.Fl)((()=>({"form-floating":r.value,"was-validated":c.value}))),d=e=>t("submit",e);return(t,n)=>((0,i.wg)(),(0,i.iD)("form",{id:e.id,novalidate:(0,o.SU)(l),class:(0,s.C_)((0,o.SU)(u)),onSubmit:(0,a.iM)(d,["prevent"])},[(0,i.WI)(t.$slots,"default")],42,pu))}}),gu={class:"form-floating"},vu=["for"],yu=(0,i.aZ)({__name:"BFormFloatingLabel",props:{labelFor:null,label:null,text:null},setup(e){return(t,n)=>((0,i.wg)(),(0,i.iD)("div",gu,[(0,i.WI)(t.$slots,"default",{},(()=>[(0,i.Uk)((0,s.zw)(e.text),1)])),(0,i._)("label",{for:e.labelFor},[(0,i.WI)(t.$slots,"label",{},(()=>[(0,i.Uk)((0,s.zw)(e.label),1)]))],8,vu)]))}}),bu=(0,i.aZ)({__name:"BFormInvalidFeedback",props:{ariaLive:null,forceShow:{default:!1},id:null,text:null,role:null,state:{default:void 0},tag:{default:"div"},tooltip:{default:!1}},setup(e){const t=e,n=ya((0,o.Vh)(t,"forceShow")),r=ya((0,o.Vh)(t,"state")),a=ya((0,o.Vh)(t,"tooltip")),l=(0,i.Fl)((()=>!0===n.value||!1===r.value)),c=(0,i.Fl)((()=>({"d-block":l.value,"invalid-feedback":!a.value,"invalid-tooltip":a.value}))),u=(0,i.Fl)((()=>({id:t.id,role:t.role,"aria-live":t.ariaLive,"aria-atomic":t.ariaLive?"true":void 0})));return(t,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(e.tag),(0,i.dG)({class:(0,o.SU)(c)},(0,o.SU)(u)),{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default",{},(()=>[(0,i.Uk)((0,s.zw)(e.text),1)]))])),_:3},16,["class"]))}}),_u=(0,i.aZ)({__name:"BFormRow",props:{tag:{default:"div"}},setup(e){return(t,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(e.tag),{class:"row d-flex flex-wrap"},{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default")])),_:3}))}}),wu=(0,i.aZ)({__name:"BFormText",props:{id:null,inline:{default:!1},tag:{default:"small"},text:null,textVariant:{default:"muted"}},setup(e){const t=e,n=ya((0,o.Vh)(t,"inline")),r=(0,i.Fl)((()=>({"form-text":!n.value,[`text-${t.textVariant}`]:!!t.textVariant}))),a=(0,i.Fl)((()=>({id:t.id})));return(t,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(e.tag),(0,i.dG)({class:(0,o.SU)(r)},(0,o.SU)(a)),{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default",{},(()=>[(0,i.Uk)((0,s.zw)(e.text),1)]))])),_:3},16,["class"]))}}),xu=(0,i.aZ)({__name:"BFormValidFeedback",props:{ariaLive:null,forceShow:{default:!1},id:null,role:null,text:null,state:{default:void 0},tag:{default:"div"},tooltip:{default:!1}},setup(e){const t=e,n=ya((0,o.Vh)(t,"forceShow")),r=ya((0,o.Vh)(t,"state")),a=ya((0,o.Vh)(t,"tooltip")),l=(0,i.Fl)((()=>!0===n.value||!0===r.value)),c=(0,i.Fl)((()=>({"d-block":l.value,"valid-feedback":!a.value,"valid-tooltip":a.value}))),u=(0,i.Fl)((()=>({id:t.id||null,role:t.role||null,"aria-live":t.ariaLive||null,"aria-atomic":t.ariaLive?"true":null})));return(t,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(e.tag),(0,i.dG)({class:(0,o.SU)(c)},(0,o.SU)(u)),{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default",{},(()=>[(0,i.Uk)((0,s.zw)(e.text),1)]))])),_:3},16,["class"]))}}),Su=["id","disabled","required","name","form","aria-label","aria-labelledby","aria-required","value","indeterminate"],Eu=["for"],Mu={inheritAttrs:!1},Tu=(0,i.aZ)({...Mu,__name:"BFormCheckbox",props:{ariaLabel:null,ariaLabelledBy:null,form:null,indeterminate:null,name:null,id:{default:void 0},autofocus:{default:!1},plain:{default:!1},button:{default:!1},switch:{default:!1},disabled:{default:!1},buttonVariant:{default:"secondary"},inline:{default:!1},required:{default:void 0},size:{default:"md"},state:{default:void 0},uncheckedValue:{type:[Array,Set,Boolean,String,Object,Number],default:!1},value:{type:[Array,Set,Boolean,String,Object,Number],default:!0},modelValue:{type:[Array,Set,Boolean,String,Object,Number],default:void 0}},emits:["update:modelValue","input","change"],setup(e,{emit:t}){const n=e,r=ya((0,o.Vh)(n,"indeterminate")),l=ya((0,o.Vh)(n,"autofocus")),c=ya((0,o.Vh)(n,"plain")),u=ya((0,o.Vh)(n,"button")),d=ya((0,o.Vh)(n,"switch")),h=ya((0,o.Vh)(n,"disabled")),f=ya((0,o.Vh)(n,"inline")),p=ya((0,o.Vh)(n,"required")),m=ya((0,o.Vh)(n,"state")),g=Pa((0,o.Vh)(n,"id"),"form-check"),v=(0,o.iH)(null),y=(0,o.iH)(!1),b=(0,i.Fl)({get:()=>n.uncheckedValue?Array.isArray(n.modelValue)?n.modelValue.indexOf(n.value)>-1:n.modelValue===n.value:n.modelValue,set:e=>{let r=e;Array.isArray(n.modelValue)?n.uncheckedValue&&(r=n.modelValue,e?(r.indexOf(n.uncheckedValue)>-1&&r.splice(r.indexOf(n.uncheckedValue),1),r.push(n.value)):(r.indexOf(n.value)>-1&&r.splice(r.indexOf(n.value),1),r.push(n.uncheckedValue))):r=e?n.value:n.uncheckedValue,t("input",r),t("update:modelValue",r),t("change",r)}}),_=(0,i.Fl)((()=>Array.isArray(n.modelValue)?n.modelValue.indexOf(n.value)>-1:JSON.stringify(n.modelValue)===JSON.stringify(n.value))),w=(0,o.qj)({plain:(0,o.Vh)(c,"value"),button:(0,o.Vh)(u,"value"),inline:(0,o.Vh)(f,"value"),switch:(0,o.Vh)(d,"value"),size:(0,o.Vh)(n,"size"),state:(0,o.Vh)(m,"value"),buttonVariant:(0,o.Vh)(n,"buttonVariant")}),x=Ea(w),S=Ma(w),E=Ta(w);return(0,i.bv)((()=>{l.value&&v.value.focus()})),(t,n)=>((0,i.wg)(),(0,i.iD)("div",{class:(0,s.C_)((0,o.SU)(x))},[(0,i.wy)((0,i._)("input",(0,i.dG)({id:(0,o.SU)(g)},t.$attrs,{ref_key:"input",ref:v,"onUpdate:modelValue":n[0]||(n[0]=e=>(0,o.dq)(b)?b.value=e:null),class:(0,o.SU)(S),type:"checkbox",disabled:(0,o.SU)(h),required:!!e.name&&!!(0,o.SU)(p),name:e.name,form:e.form,"aria-label":e.ariaLabel,"aria-labelledby":e.ariaLabelledBy,"aria-required":e.name&&(0,o.SU)(p)?"true":void 0,value:e.value,indeterminate:(0,o.SU)(r),onFocus:n[1]||(n[1]=e=>y.value=!0),onBlur:n[2]||(n[2]=e=>y.value=!1)}),null,16,Su),[[a.e8,(0,o.SU)(b)]]),t.$slots.default||!(0,o.SU)(c)?((0,i.wg)(),(0,i.iD)("label",{key:0,for:(0,o.SU)(g),class:(0,s.C_)([(0,o.SU)(E),{active:(0,o.SU)(_),focus:y.value}])},[(0,i.WI)(t.$slots,"default")],10,Eu)):(0,i.kq)("",!0)],2))}}),Cu=["id"],Au=["innerHTML"],ku=["textContent"],Ou=(0,i.aZ)({__name:"BFormCheckboxGroup",props:{id:null,form:null,modelValue:{default:()=>[]},ariaInvalid:{default:void 0},autofocus:{default:!1},buttonVariant:{default:"secondary"},buttons:{default:!1},disabled:{default:!1},disabledField:{default:"disabled"},htmlField:{default:"html"},name:null,options:{default:()=>[]},plain:{default:!1},required:{default:!1},size:null,stacked:{default:!1},state:{default:void 0},switches:{default:!1},textField:{default:"text"},validated:{default:!1},valueField:{default:"value"}},emits:["input","update:modelValue","change"],setup(e,{emit:t}){const n=e;ya((0,o.Vh)(n,"autofocus"));const r=ya((0,o.Vh)(n,"buttons")),a=ya((0,o.Vh)(n,"disabled"));ya((0,o.Vh)(n,"plain"));const l=ya((0,o.Vh)(n,"required")),c=ya((0,o.Vh)(n,"stacked")),u=ya((0,o.Vh)(n,"state")),d=ya((0,o.Vh)(n,"switches")),h=ya((0,o.Vh)(n,"validated")),f=(0,i.Rr)(),p="BFormCheckbox",m=Pa((0,o.Vh)(n,"id"),"checkbox"),g=Pa((0,o.Vh)(n,"name"),"checkbox"),v=(0,i.Fl)({get:()=>n.modelValue,set:e=>{if(JSON.stringify(e)===JSON.stringify(n.modelValue))return;const r=n.options.filter((t=>e.map((e=>JSON.stringify(e))).includes(JSON.stringify("string"==typeof t?t:t[n.valueField])))).map((e=>"string"==typeof e?e:e[n.valueField]));t("input",r),t("update:modelValue",r),t("change",r)}}),y=(0,i.Fl)((()=>(f.first?ka(f.first(),p,a.value):[]).concat(n.options.map((e=>Oa(e,n)))).concat(f.default?ka(f.default(),p,a.value):[]).map(((e,t)=>Ra(e,t,n,g,m))).map((e=>({...e,props:{switch:d.value,...e.props}}))))),b=(0,o.qj)({required:(0,o.Vh)(l,"value"),ariaInvalid:(0,o.Vh)(n,"ariaInvalid"),state:(0,o.Vh)(u,"value"),validated:(0,o.Vh)(h,"value"),buttons:(0,o.Vh)(r,"value"),stacked:(0,o.Vh)(c,"value"),size:(0,o.Vh)(n,"size")}),_=Ca(b),w=Aa(b);return(e,t)=>((0,i.wg)(),(0,i.iD)("div",(0,i.dG)((0,o.SU)(_),{id:(0,o.SU)(m),role:"group",class:[(0,o.SU)(w),"bv-no-focus-ring"],tabindex:"-1"}),[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,o.SU)(y),((e,n)=>((0,i.wg)(),(0,i.j4)(Tu,(0,i.dG)({key:n,modelValue:(0,o.SU)(v),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,o.dq)(v)?v.value=e:null)},e.props),{default:(0,i.w5)((()=>[e.html?((0,i.wg)(),(0,i.iD)("span",{key:0,innerHTML:e.html},null,8,Au)):((0,i.wg)(),(0,i.iD)("span",{key:1,textContent:(0,s.zw)(e.text)},null,8,ku))])),_:2},1040,["modelValue"])))),128))],16,Cu))}}),Ru=["input","select","textarea"],Pu=Ru.map((e=>`${e}:not([disabled])`)).join(),Lu=[...Ru,"a","button","label"],Du="label",Iu="invalid-feedback",Nu="valid-feedback",Uu="description",Fu="default",Bu=(0,i.aZ)({components:{BCol:Mc,BFormInvalidFeedback:bu,BFormRow:_u,BFormText:wu,BFormValidFeedback:xu},props:{contentCols:{type:[Boolean,String,Number],required:!1},contentColsLg:{type:[Boolean,String,Number],required:!1},contentColsMd:{type:[Boolean,String,Number],required:!1},contentColsSm:{type:[Boolean,String,Number],required:!1},contentColsXl:{type:[Boolean,String,Number],required:!1},description:{type:[String],required:!1},disabled:{type:[Boolean,String],default:!1},feedbackAriaLive:{type:String,default:"assertive"},id:{type:String,required:!1},invalidFeedback:{type:String,required:!1},label:{type:String,required:!1},labelAlign:{type:[Boolean,String,Number],required:!1},labelAlignLg:{type:[Boolean,String,Number],required:!1},labelAlignMd:{type:[Boolean,String,Number],required:!1},labelAlignSm:{type:[Boolean,String,Number],required:!1},labelAlignXl:{type:[Boolean,String,Number],required:!1},labelClass:{type:[Array,Object,String],required:!1},labelCols:{type:[Boolean,String,Number],required:!1},labelColsLg:{type:[Boolean,String,Number],required:!1},labelColsMd:{type:[Boolean,String,Number],required:!1},labelColsSm:{type:[Boolean,String,Number],required:!1},labelColsXl:{type:[Boolean,String,Number],required:!1},labelFor:{type:String,required:!1},labelSize:{type:String,required:!1},labelSrOnly:{type:[Boolean,String],default:!1},state:{type:[Boolean,String],default:null},tooltip:{type:[Boolean,String],default:!1},validFeedback:{type:String,required:!1},validated:{type:[Boolean,String],default:!1},floating:{type:[Boolean,String],default:!1}},setup(e,{attrs:t}){const n=ya((0,o.Vh)(e,"disabled")),r=ya((0,o.Vh)(e,"labelSrOnly")),s=ya((0,o.Vh)(e,"state")),a=ya((0,o.Vh)(e,"tooltip")),l=ya((0,o.Vh)(e,"validated")),c=ya((0,o.Vh)(e,"floating")),u=null,d=["xs","sm","md","lg","xl"],h=(e,t)=>d.reduce(((n,r)=>{const i=e[pa(r,`${t}Align`)]||null;return i&&n.push(["text",r,i].filter((e=>e)).join("-")),n}),[]),f=(e,t)=>d.reduce(((n,r)=>{let i=e[pa(r,`${t}Cols`)];return i=""===i||(i||!1),"boolean"!=typeof i&&"auto"!==i&&(i=ha(i,0),i=i>0&&i),i&&(n[r||("boolean"==typeof i?"col":"cols")]=i),n}),{}),p=(0,o.iH)(),m=(t,n=null)=>{if(zs&&e.labelFor){const r=Ks(`#${Us(e.labelFor)}`,p);if(r){const e="aria-describedby",i=(t||"").split(ks),o=(n||"").split(ks),s=(Qs(r,e)||"").split(ks).filter((e=>!o.includes(e))).concat(i).filter(((e,t,n)=>n.indexOf(e)===t)).filter((e=>e)).join(" ").trim();s?ea(r,e,s):ta(r,e)}}},g=(0,i.Fl)((()=>f(e,"content"))),v=(0,i.Fl)((()=>h(e,"label"))),y=(0,i.Fl)((()=>f(e,"label"))),b=(0,i.Fl)((()=>Object.keys(g.value).length>0||Object.keys(y.value).length>0)),_=(0,i.Fl)((()=>"boolean"==typeof s.value?s.value:null)),w=(0,i.Fl)((()=>{const e=_.value;return!0===e?"is-valid":!1===e?"is-invalid":null})),x=(0,i.Fl)((()=>aa(t.ariaInvalid,s.value)));return(0,i.YP)((()=>u),((e,t)=>{e!==t&&m(e,t)})),(0,i.bv)((()=>{(0,i.Y3)((()=>{m(u)}))})),{disabledBoolean:n,labelSrOnlyBoolean:r,stateBoolean:s,tooltipBoolean:a,validatedBoolean:l,floatingBoolean:c,ariaDescribedby:u,computedAriaInvalid:x,contentColProps:g,isHorizontal:b,labelAlignClasses:v,labelColProps:y,onLegendClick:t=>{if(e.labelFor)return;const{target:n}=t,r=n?n.tagName:"";if(-1!==Lu.indexOf(r))return;const i=Js(Pu,p).filter(Xs);1===i.length&&qs(i[0])},stateClass:w}},render(){const e=this.$props,t=this.$slots,n=Pa(),r=!e.labelFor;let s=null;const a=ua(Du,{},t)||e.label,l=a?sa("_BV_label_"):null;if(a||this.isHorizontal){const t=r?"legend":"label";if(this.labelSrOnlyBoolean)a&&(s=(0,i.h)(t,{class:"visually-hidden",id:l,for:e.labelFor||null},a)),s=this.isHorizontal?(0,i.h)(Mc,this.labelColProps,{default:()=>s}):(0,i.h)("div",{},[s]);else{const n={onClick:r?this.onLegendClick:null,...this.isHorizontal?this.labelColProps:{},tag:this.isHorizontal?t:null,id:l,for:e.labelFor||null,tabIndex:r?"-1":null,class:[this.isHorizontal?"col-form-label":"form-label",{"bv-no-focus-ring":r,"col-form-label":this.isHorizontal||r,"pt-0":!this.isHorizontal&&r,"d-block":!this.isHorizontal&&!r,[`col-form-label-${e.labelSize}`]:!!e.labelSize},this.labelAlignClasses,e.labelClass]};s=this.isHorizontal?(0,i.h)(Mc,n,{default:()=>a}):(0,i.h)(t,n,a)}}let c=null;const u=ua(Iu,{},t)||this.invalidFeedback,d=u?sa("_BV_feedback_invalid_"):void 0;u&&(c=(0,i.h)(bu,{ariaLive:e.feedbackAriaLive,id:d,state:this.stateBoolean,tooltip:this.tooltipBoolean},{default:()=>u}));let h=null;const f=ua(Nu,{},t)||this.validFeedback,p=f?sa("_BV_feedback_valid_"):void 0;f&&(h=(0,i.h)(xu,{ariaLive:e.feedbackAriaLive,id:p,state:this.stateBoolean,tooltip:this.tooltipBoolean},{default:()=>f}));let m=null;const g=ua(Uu,{},t)||this.description,v=g?sa("_BV_description_"):void 0;g&&(m=(0,i.h)(wu,{id:v},{default:()=>g}));const y=this.ariaDescribedby=[v,!1===this.stateBoolean?d:null,!0===this.stateBoolean?p:null].filter((e=>e)).join(" ")||null,b=[ua(Fu,{ariaDescribedby:y,descriptionId:v,id:n,labelId:l},t)||"",c,h,m];!this.isHorizontal&&this.floatingBoolean&&b.push(s);let _=(0,i.h)("div",{ref:"content",class:[{"form-floating":!this.isHorizontal&&this.floatingBoolean}]},b);this.isHorizontal&&(_=(0,i.h)(Mc,{ref:"content",...this.contentColProps},{default:()=>b}));const w={class:["mb-3",this.stateClass,{"was-validated":this.validatedBoolean}],id:Pa((0,o.Vh)(e,"id")).value,disabled:r?this.disabledBoolean:null,role:r?null:"group","aria-invalid":this.computedAriaInvalid,"aria-labelledby":r&&this.isHorizontal?l:null};return this.isHorizontal&&!r?(0,i.h)(_u,w,{default:()=>[s,_]}):(0,i.h)(r?"fieldset":"div",w,this.isHorizontal&&r?[(0,i.h)(_u,{},{default:()=>[s,_]})]:this.isHorizontal||!this.floatingBoolean?[s,_]:[_])}}),Vu=["text","number","email","password","search","url","tel","date","time","range","color"],zu=(0,i.aZ)({props:{...La,max:{type:[String,Number],required:!1},min:{type:[String,Number],required:!1},step:{type:[String,Number],required:!1},type:{type:String,default:"text",validator:e=>Vu.includes(e)}},emits:["update:modelValue","change","blur","input"],setup(e,{emit:t}){const n=(0,i.Fl)((()=>{const t="range"===e.type,n="color"===e.type;return{"form-range":t,"form-control":n||!e.plaintext&&!t,"form-control-color":n,"form-control-plaintext":e.plaintext&&!t&&!n,[`form-control-${e.size}`]:!!e.size,"is-valid":!0===e.state,"is-invalid":!1===e.state}})),r=(0,i.Fl)((()=>Vu.includes(e.type)?e.type:"text")),{input:o,computedId:s,computedAriaInvalid:a,onInput:l,onChange:c,onBlur:u,focus:d,blur:h}=Da(e,t);return{classes:n,localType:r,input:o,computedId:s,computedAriaInvalid:a,onInput:l,onChange:c,onBlur:u,focus:d,blur:h}}}),ju=["id","name","form","type","disabled","placeholder","required","autocomplete","readonly","min","max","step","list","aria-required","aria-invalid"];function Hu(e,t,n,r,o,s){return(0,i.wg)(),(0,i.iD)("input",(0,i.dG)({id:e.computedId,ref:"input",class:e.classes,name:e.name||void 0,form:e.form||void 0,type:e.localType,disabled:e.disabled,placeholder:e.placeholder,required:e.required,autocomplete:e.autocomplete||void 0,readonly:e.readonly||e.plaintext,min:e.min,max:e.max,step:e.step,list:"password"!==e.type?e.list:void 0,"aria-required":e.required?"true":void 0,"aria-invalid":e.computedAriaInvalid},e.$attrs,{onInput:t[0]||(t[0]=t=>e.onInput(t)),onChange:t[1]||(t[1]=t=>e.onChange(t)),onBlur:t[2]||(t[2]=t=>e.onBlur(t))}),null,16,ju)}const Wu=xl(zu,[["render",Hu]]),Gu=["id","disabled","required","name","form","aria-label","aria-labelledby","value","aria-required"],$u=["for"],qu=(0,i.aZ)({__name:"BFormRadio",props:{ariaLabel:null,ariaLabelledBy:null,form:null,id:null,name:null,size:null,autofocus:{default:!1},modelValue:{type:[Boolean,String,Array,Object,Number],default:void 0},plain:{default:!1},button:{default:!1},switch:{default:!1},disabled:{default:!1},buttonVariant:{default:"secondary"},inline:{default:!1},required:{default:!1},state:{default:void 0},value:{type:[String,Boolean,Object,Number],default:!0}},emits:["input","change","update:modelValue"],setup(e,{emit:t}){const n=e,r=ya((0,o.Vh)(n,"autofocus")),l=ya((0,o.Vh)(n,"plain")),c=ya((0,o.Vh)(n,"button")),u=ya((0,o.Vh)(n,"switch")),d=ya((0,o.Vh)(n,"disabled")),h=ya((0,o.Vh)(n,"inline")),f=ya((0,o.Vh)(n,"required")),p=ya((0,o.Vh)(n,"state")),m=Pa((0,o.Vh)(n,"id"),"form-check"),g=(0,o.iH)(null),v=(0,o.iH)(!1),y=(0,i.Fl)({get:()=>Array.isArray(n.modelValue)?n.modelValue[0]:n.modelValue,set:e=>{const r=!!e&&n.value,i=Array.isArray(n.modelValue)?[r]:r;t("input",i),t("change",i),t("update:modelValue",i)}}),b=(0,i.Fl)((()=>Array.isArray(n.modelValue)?(n.modelValue||[]).find((e=>e===n.value)):JSON.stringify(n.modelValue)===JSON.stringify(n.value))),_=(0,o.qj)({plain:(0,o.Vh)(l,"value"),button:(0,o.Vh)(c,"value"),inline:(0,o.Vh)(h,"value"),switch:(0,o.Vh)(u,"value"),size:(0,o.Vh)(n,"size"),state:(0,o.Vh)(p,"value"),buttonVariant:(0,o.Vh)(n,"buttonVariant")}),w=Ea(_),x=Ma(_),S=Ta(_);return(0,i.bv)((()=>{r.value&&g.value.focus()})),(t,n)=>((0,i.wg)(),(0,i.iD)("div",{class:(0,s.C_)((0,o.SU)(w))},[(0,i.wy)((0,i._)("input",(0,i.dG)({id:(0,o.SU)(m)},t.$attrs,{ref_key:"input",ref:g,"onUpdate:modelValue":n[0]||(n[0]=e=>(0,o.dq)(y)?y.value=e:null),class:(0,o.SU)(x),type:"radio",disabled:(0,o.SU)(d),required:!!e.name&&!!(0,o.SU)(f),name:e.name,form:e.form,"aria-label":e.ariaLabel,"aria-labelledby":e.ariaLabelledBy,value:e.value,"aria-required":!(!e.name||!(0,o.SU)(f))||void 0,onFocus:n[1]||(n[1]=e=>v.value=!0),onBlur:n[2]||(n[2]=e=>v.value=!1)}),null,16,Gu),[[a.G2,(0,o.SU)(y)]]),t.$slots.default||!(0,o.SU)(l)?((0,i.wg)(),(0,i.iD)("label",{key:0,for:(0,o.SU)(m),class:(0,s.C_)([(0,o.SU)(S),{active:(0,o.SU)(b),focus:v.value}])},[(0,i.WI)(t.$slots,"default")],10,$u)):(0,i.kq)("",!0)],2))}}),Yu=["id"],Xu=["innerHTML"],Zu=["textContent"],Ku=(0,i.aZ)({__name:"BFormRadioGroup",props:{size:null,form:null,id:null,name:null,modelValue:{type:[String,Boolean,Array,Object,Number],default:""},ariaInvalid:{default:void 0},autofocus:{default:!1},buttonVariant:{default:"secondary"},buttons:{default:!1},disabled:{default:!1},disabledField:{default:"disabled"},htmlField:{default:"html"},options:{default:()=>[]},plain:{default:!1},required:{default:!1},stacked:{default:!1},state:{default:void 0},textField:{default:"text"},validated:{default:!1},valueField:{default:"value"}},emits:["input","update:modelValue","change"],setup(e,{emit:t}){const n=e;ya((0,o.Vh)(n,"autofocus"));const r=ya((0,o.Vh)(n,"buttons")),a=ya((0,o.Vh)(n,"disabled"));ya((0,o.Vh)(n,"plain"));const l=ya((0,o.Vh)(n,"required")),c=ya((0,o.Vh)(n,"stacked")),u=ya((0,o.Vh)(n,"state")),d=ya((0,o.Vh)(n,"validated")),h=(0,i.Rr)(),f="BFormRadio",p=Pa((0,o.Vh)(n,"id"),"radio"),m=Pa((0,o.Vh)(n,"name"),"checkbox"),g=(0,i.Fl)({get:()=>n.modelValue,set:e=>{t("input",e),t("update:modelValue",e),t("change",e)}}),v=(0,i.Fl)((()=>(h.first?ka(h.first(),f,a.value):[]).concat(n.options.map((e=>Oa(e,n)))).concat(h.default?ka(h.default(),f,a.value):[]).map(((e,t)=>Ra(e,t,n,m,p))).map((e=>({...e}))))),y=(0,o.qj)({required:(0,o.Vh)(l,"value"),ariaInvalid:(0,o.Vh)(n,"ariaInvalid"),state:(0,o.Vh)(u,"value"),validated:(0,o.Vh)(d,"value"),buttons:(0,o.Vh)(r,"value"),stacked:(0,o.Vh)(c,"value"),size:(0,o.Vh)(n,"size")}),b=Ca(y),_=Aa(y);return(e,t)=>((0,i.wg)(),(0,i.iD)("div",(0,i.dG)((0,o.SU)(b),{id:(0,o.SU)(p),role:"radiogroup",class:[(0,o.SU)(_),"bv-no-focus-ring"],tabindex:"-1"}),[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,o.SU)(v),((e,n)=>((0,i.wg)(),(0,i.j4)(qu,(0,i.dG)({key:n,modelValue:(0,o.SU)(g),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,o.dq)(g)?g.value=e:null)},e.props),{default:(0,i.w5)((()=>[e.html?((0,i.wg)(),(0,i.iD)("span",{key:0,innerHTML:e.html},null,8,Xu)):((0,i.wg)(),(0,i.iD)("span",{key:1,textContent:(0,s.zw)(e.text)},null,8,Zu))])),_:2},1040,["modelValue"])))),128))],16,Yu))}}),Ju=["value","disabled"],Qu=(0,i.aZ)({__name:"BFormSelectOption",props:{value:null,disabled:{default:!1}},setup(e){const t=ya((0,o.Vh)(e,"disabled"));return(n,r)=>((0,i.wg)(),(0,i.iD)("option",{value:e.value,disabled:(0,o.SU)(t)},[(0,i.WI)(n.$slots,"default")],8,Ju))}}),ed=["label"],td=(0,i.aZ)({__name:"BFormSelectOptionGroup",props:{label:null,disabledField:{default:"disabled"},htmlField:{default:"html"},options:{default:()=>[]},textField:{default:"text"},valueField:{default:"value"}},setup(e){const t=e,n=(0,i.Fl)((()=>Ua(t.options,"BFormSelectOptionGroup",t)));return(t,r)=>((0,i.wg)(),(0,i.iD)("optgroup",{label:e.label},[(0,i.WI)(t.$slots,"first"),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,o.SU)(n),((e,n)=>((0,i.wg)(),(0,i.j4)(Qu,(0,i.dG)({key:`option_${n}`,value:e.value,disabled:e.disabled},t.$attrs,{innerHTML:e.html||e.text}),null,16,["value","disabled","innerHTML"])))),128)),(0,i.WI)(t.$slots,"default")],8,ed))}}),nd=["id","name","form","multiple","size","disabled","required","aria-required","aria-invalid"],rd=(0,i.aZ)({__name:"BFormSelect",props:{ariaInvalid:{default:void 0},autofocus:{default:!1},disabled:{default:!1},disabledField:{default:"disabled"},form:null,htmlField:{default:"html"},id:null,labelField:{default:"label"},multiple:{default:!1},name:null,options:{default:()=>[]},optionsField:{default:"options"},plain:{default:!1},required:{default:!1},selectSize:{default:0},size:null,state:{default:void 0},textField:{default:"text"},valueField:{default:"value"},modelValue:{default:""}},emits:["input","update:modelValue","change"],setup(e,{expose:t,emit:n}){const r=e,s=ya((0,o.Vh)(r,"autofocus")),l=ya((0,o.Vh)(r,"disabled")),c=ya((0,o.Vh)(r,"multiple")),u=ya((0,o.Vh)(r,"plain")),d=ya((0,o.Vh)(r,"required")),h=ya((0,o.Vh)(r,"state")),f=(0,o.iH)(),p=Pa((0,o.Vh)(r,"id"),"input"),m=()=>{(0,i.Y3)((()=>{var e;s.value&&(null==(e=f.value)||e.focus())}))};(0,i.bv)(m),(0,i.dl)(m);const g=(0,i.Fl)((()=>({"form-control":u.value,[`form-control-${r.size}`]:r.size&&u.value,"form-select":!u.value,[`form-select-${r.size}`]:r.size&&!u.value,"is-valid":!0===h.value,"is-invalid":!1===h.value}))),v=(0,i.Fl)((()=>{if(r.selectSize||u.value)return r.selectSize})),y=(0,i.Fl)((()=>aa(r.ariaInvalid,h.value))),b=(0,i.Fl)((()=>Ua(r.options,"BFormSelect",r))),_=(0,i.Fl)({get(){return r.modelValue},set(e){n("change",e),n("update:modelValue",e),n("input",e)}});return t({blur:()=>{var e;l.value||null==(e=f.value)||e.blur()},focus:()=>{var e;l.value||null==(e=f.value)||e.focus()}}),(t,n)=>(0,i.wy)(((0,i.wg)(),(0,i.iD)("select",(0,i.dG)({id:(0,o.SU)(p),ref_key:"input",ref:f},t.$attrs,{"onUpdate:modelValue":n[0]||(n[0]=e=>(0,o.dq)(_)?_.value=e:null),class:(0,o.SU)(g),name:e.name,form:e.form||void 0,multiple:(0,o.SU)(c)||void 0,size:(0,o.SU)(v),disabled:(0,o.SU)(l),required:(0,o.SU)(d),"aria-required":!!(0,o.SU)(d)||void 0,"aria-invalid":(0,o.SU)(y)}),[(0,i.WI)(t.$slots,"first"),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,o.SU)(b),((e,t)=>((0,i.wg)(),(0,i.iD)(i.HY,null,[Array.isArray(e.options)?((0,i.wg)(),(0,i.j4)(td,{key:`option_${t}`,label:e.label,options:e.options},null,8,["label","options"])):((0,i.wg)(),(0,i.j4)(Qu,{key:`option2_${t}`,value:e.value,disabled:e.disabled,innerHTML:e.html||e.text},null,8,["value","disabled","innerHTML"]))],64)))),256)),(0,i.WI)(t.$slots,"default")],16,nd)),[[a.bM,(0,o.SU)(_)]])}}),id=["id"],od=(0,i.aZ)({__name:"BFormTag",props:{id:null,title:null,disabled:{default:!1},noRemove:{default:!1},pill:{default:!1},removeLabel:{default:"Remove tag"},tag:{default:"span"},variant:{default:"secondary"}},emits:["remove"],setup(e,{emit:t}){const n=e,r=ya((0,o.Vh)(n,"disabled")),a=ya((0,o.Vh)(n,"noRemove")),l=ya((0,o.Vh)(n,"pill")),c=(0,i.Rr)(),u=(0,i.Fl)((()=>{var e,t,r;return null!=(r=(null==(t=null==(e=c.default)?void 0:e.call(c)[0].children)?void 0:t.toString())||n.title)?r:""})),d=Pa((0,o.Vh)(n,"id")),h=(0,i.Fl)((()=>`${d.value}taglabel__`)),f=(0,i.Fl)((()=>[`bg-${n.variant}`,{"text-dark":["warning","info","light"].includes(n.variant),"rounded-pill":l.value,disabled:r.value}]));return(n,l)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(e.tag),{id:(0,o.SU)(d),title:(0,o.SU)(u),class:(0,s.C_)(["badge b-form-tag d-inline-flex align-items-center mw-100",(0,o.SU)(f)]),"aria-labelledby":(0,o.SU)(h)},{default:(0,i.w5)((()=>[(0,i._)("span",{id:(0,o.SU)(h),class:"b-form-tag-content flex-grow-1 text-truncate"},[(0,i.WI)(n.$slots,"default",{},(()=>[(0,i.Uk)((0,s.zw)((0,o.SU)(u)),1)]))],8,id),(0,o.SU)(r)||(0,o.SU)(a)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(dl,{key:0,"aria-keyshortcuts":"Delete",type:"button","aria-label":e.removeLabel,class:"b-form-tag-remove",white:!["warning","info","light"].includes(e.variant),"aria-describedby":(0,o.SU)(h),"aria-controls":e.id,onClick:l[0]||(l[0]=e=>t("remove",(0,o.SU)(u)))},null,8,["aria-label","white","aria-describedby","aria-controls"]))])),_:3},8,["id","title","class","aria-labelledby"]))}}),sd=["id"],ad=["id","for","aria-live"],ld=["id","aria-live"],cd=["id"],ud=["aria-controls"],dd={role:"group",class:"d-flex"},hd=["id","disabled","value","type","placeholder","form","required"],fd=["disabled"],pd={"aria-live":"polite","aria-atomic":"true"},md={key:0,class:"d-block invalid-feedback"},gd={key:1,class:"form-text text-muted"},vd={key:2,class:"form-text text-muted"},yd=["name","value"],bd=(0,i.aZ)({__name:"BFormTags",props:{addButtonText:{default:"Add"},addButtonVariant:{default:"outline-secondary"},addOnChange:{default:!1},autofocus:{default:!1},disabled:{default:!1},duplicateTagText:{default:"Duplicate tag(s)"},inputAttrs:null,inputClass:null,inputId:null,inputType:{default:"text"},invalidTagText:{default:"Invalid tag(s)"},form:null,limit:null,limitTagsText:{default:"Tag limit reached"},modelValue:{default:()=>[]},name:null,noAddOnEnter:{default:!1},noOuterFocus:{default:!1},noTagRemove:{default:!1},placeholder:{default:"Add tag..."},removeOnDelete:{default:!1},required:{default:!1},separator:null,state:{default:void 0},size:null,tagClass:null,tagPills:{default:!1},tagRemoveLabel:null,tagRemovedLabel:{default:"Tag removed"},tagValidator:{type:Function,default:()=>!0},tagVariant:{default:"secondary"}},emits:["update:modelValue","input","tag-state","focus","focusin","focusout","blur"],setup(e,{emit:t}){const n=e,r=ya((0,o.Vh)(n,"addOnChange")),a=ya((0,o.Vh)(n,"autofocus")),l=ya((0,o.Vh)(n,"disabled")),c=ya((0,o.Vh)(n,"noAddOnEnter")),u=ya((0,o.Vh)(n,"noOuterFocus")),d=ya((0,o.Vh)(n,"noTagRemove")),h=ya((0,o.Vh)(n,"removeOnDelete")),f=ya((0,o.Vh)(n,"required")),p=ya((0,o.Vh)(n,"state")),m=ya((0,o.Vh)(n,"tagPills")),g=(0,o.iH)(null),v=Pa(),y=(0,i.Fl)((()=>n.inputId||`${v.value}input__`));(0,i.bv)((()=>{P(),n.modelValue.length>0&&(w.value=!0)})),(0,i.dl)((()=>P())),(0,i.YP)((()=>n.modelValue),(e=>{b.value=e}));const b=(0,o.iH)(n.modelValue),_=(0,o.iH)(""),w=(0,o.iH)(!1),x=(0,o.iH)(!1),S=(0,o.iH)(""),E=(0,o.iH)([]),M=(0,o.iH)([]),T=(0,o.iH)([]),C=(0,i.Fl)((()=>({[`form-control-${n.size}`]:void 0!==n.size,disabled:l.value,focus:x.value,"is-invalid":!1===p.value,"is-valid":!0===p.value}))),A=(0,i.Fl)((()=>b.value.includes(_.value))),k=(0,i.Fl)((()=>""!==_.value&&!n.tagValidator(_.value))),O=(0,i.Fl)((()=>b.value.length===n.limit)),R=(0,i.Fl)((()=>!k.value&&!A.value)),P=()=>{var e;a.value&&(null==(e=g.value)||e.focus())},L=e=>{l.value?e.target.blur():t("focusin",e)},D=e=>{l.value||u.value||(x.value=!0,t("focus",e))},I=e=>{x.value=!1,t("blur",e)},N=e=>{var r,i;const o="string"==typeof e?e:e.target.value;w.value=!1,(null==(r=n.separator)?void 0:r.includes(o.charAt(0)))&&o.length>0?g.value&&(g.value.value=""):(_.value=o,null!=(i=n.separator)&&i.includes(o.charAt(o.length-1))?B(o.slice(0,o.length-1)):(E.value=n.tagValidator(o)&&!A.value?[o]:[],M.value=n.tagValidator(o)?[]:[o],T.value=A.value?[o]:[],t("tag-state",E.value,M.value,T.value)))},U=e=>{r.value&&(N(e),A.value||B(_.value))},F=e=>{"Enter"!==e.key||c.value?("Backspace"===e.key||"Delete"===e.key)&&h.value&&""===_.value&&w.value&&b.value.length>0?V(b.value[b.value.length-1]):w.value=!0:B(_.value)},B=e=>{var r;if(e=(e||_.value).trim(),""===e||A.value||!n.tagValidator(e)||n.limit&&O.value)return;const i=[...n.modelValue,e];_.value="",w.value=!0,t("update:modelValue",i),t("input",i),null==(r=g.value)||r.focus()},V=e=>{var n;const r=b.value.indexOf(null!=(n=null==e?void 0:e.toString())?n:"");S.value=b.value.splice(r,1).toString(),t("update:modelValue",b.value)},z=(0,i.Fl)((()=>{const{addButtonText:e,addButtonVariant:t,duplicateTagText:r,inputAttrs:i,form:o,inputType:s,invalidTagText:a,limitTagsText:c,limit:u,placeholder:h,separator:g,size:v,tagClass:w,tagRemoveLabel:x,tagVariant:S}=n;return{addButtonText:e,addButtonVariant:t,addTag:B,disableAddButton:R,disabled:l.value,duplicateTagText:r,duplicateTags:T,form:o,inputAttrs:{...i,disabled:l.value,form:o,id:y,value:_},inputHandlers:{input:N,keydown:F,change:U},inputId:y,inputType:s,invalidTagText:a,invalidTags:M,isDuplicate:A,isInvalid:k,isLimitReached:O,limitTagsText:c,limit:u,noTagRemove:d.value,placeholder:h,removeTag:V,required:f.value,separator:g,size:v,state:p.value,tagClass:w,tagPills:m.value,tagRemoveLabel:x,tagVariant:S,tags:b}}));return(n,r)=>((0,i.wg)(),(0,i.iD)("div",{id:(0,o.SU)(v),class:(0,s.C_)(["b-form-tags form-control h-auto",(0,o.SU)(C)]),role:"group",tabindex:"-1",onFocusin:L,onFocusout:r[1]||(r[1]=e=>t("focusout",e))},[(0,i._)("output",{id:`${(0,o.SU)(v)}selected_tags__`,class:"visually-hidden",role:"status",for:(0,o.SU)(y),"aria-live":x.value?"polite":"off","aria-atomic":"true","aria-relevant":"additions text"},(0,s.zw)(b.value.join(", ")),9,ad),(0,i._)("div",{id:`${(0,o.SU)(v)}removed_tags__`,role:"status","aria-live":x.value?"assertive":"off","aria-atomic":"true",class:"visually-hidden"}," ("+(0,s.zw)(e.tagRemovedLabel)+") "+(0,s.zw)(S.value),9,ld),(0,i.WI)(n.$slots,"default",(0,s.vs)((0,i.F4)((0,o.SU)(z))),(()=>[(0,i._)("ul",{id:`${(0,o.SU)(v)}tag_list__`,class:"b-form-tags-list list-unstyled mb-0 d-flex flex-wrap align-items-center"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(b.value,(t=>((0,i.wg)(),(0,i.j4)(od,{key:t,class:(0,s.C_)(e.tagClass),tag:"li",variant:e.tagVariant,pill:(0,o.SU)(m),onRemove:V},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(t),1)])),_:2},1032,["class","variant","pill"])))),128)),(0,i._)("li",{role:"none","aria-live":"off",class:"b-from-tags-field flex-grow-1","aria-controls":`${(0,o.SU)(v)}tag_list__`},[(0,i._)("div",dd,[(0,i._)("input",(0,i.dG)({id:(0,o.SU)(y),ref_key:"input",ref:g,disabled:(0,o.SU)(l),value:_.value,type:e.inputType,placeholder:e.placeholder,class:"b-form-tags-input w-100 flex-grow-1 p-0 m-0 bg-transparent border-0",style:{outline:"currentcolor none 0px","min-width":"5rem"}},e.inputAttrs,{form:e.form,required:(0,o.SU)(f),onInput:N,onChange:U,onKeydown:F,onFocus:D,onBlur:I}),null,16,hd),(0,o.SU)(R)?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",class:(0,s.C_)(["btn b-form-tags-button py-0",[`btn-${e.addButtonVariant}`,{"disabled invisible":0===_.value.length},e.inputClass]]),style:{"font-size":"90%"},disabled:(0,o.SU)(l)||0===_.value.length||(0,o.SU)(O),onClick:r[0]||(r[0]=e=>B(_.value))},[(0,i.WI)(n.$slots,"add-button-text",{},(()=>[(0,i.Uk)((0,s.zw)(e.addButtonText),1)]))],10,fd)):(0,i.kq)("",!0)])],8,ud)],8,cd),(0,i._)("div",pd,[(0,o.SU)(k)?((0,i.wg)(),(0,i.iD)("div",md,(0,s.zw)(e.invalidTagText)+": "+(0,s.zw)(_.value),1)):(0,i.kq)("",!0),(0,o.SU)(A)?((0,i.wg)(),(0,i.iD)("small",gd,(0,s.zw)(e.duplicateTagText)+": "+(0,s.zw)(_.value),1)):(0,i.kq)("",!0),b.value.length===e.limit?((0,i.wg)(),(0,i.iD)("small",vd,"Tag limit reached")):(0,i.kq)("",!0)])])),e.name?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:0},(0,i.Ko)(b.value,(t=>((0,i.wg)(),(0,i.iD)("input",{key:t,type:"hidden",name:e.name,value:t},null,8,yd)))),128)):(0,i.kq)("",!0)],42,sd))}}),_d=(0,i.aZ)({props:{...La,noResize:{type:[Boolean,String],default:!1},rows:{type:[String,Number],required:!1,default:2},wrap:{type:String,default:"soft"}},emits:["update:modelValue","change","blur","input"],setup(e,{emit:t}){const n=ya((0,o.Vh)(e,"noResize")),r=(0,i.Fl)((()=>({"form-control":!e.plaintext,"form-control-plaintext":e.plaintext,[`form-control-${e.size}`]:!!e.size,"is-valid":!0===e.state,"is-invalid":!1===e.state}))),s=(0,i.Fl)((()=>n.value?{resize:"none"}:void 0)),{input:a,computedId:l,computedAriaInvalid:c,onInput:u,onChange:d,onBlur:h,focus:f,blur:p}=Da(e,t);return{input:a,computedId:l,computedAriaInvalid:c,onInput:u,onChange:d,onBlur:h,focus:f,blur:p,classes:r,computedStyles:s}}}),wd=["id","name","form","disabled","placeholder","required","autocomplete","readonly","aria-required","aria-invalid","rows","wrap"];function xd(e,t,n,r,o,s){return(0,i.wg)(),(0,i.iD)("textarea",(0,i.dG)({id:e.computedId,ref:"input",class:e.classes,name:e.name||void 0,form:e.form||void 0,disabled:e.disabled,placeholder:e.placeholder,required:e.required,autocomplete:e.autocomplete||void 0,readonly:e.readonly||e.plaintext,"aria-required":e.required?"true":void 0,"aria-invalid":e.computedAriaInvalid,rows:e.rows,style:e.computedStyles,wrap:e.wrap||void 0},e.$attrs,{onInput:t[0]||(t[0]=t=>e.onInput(t)),onChange:t[1]||(t[1]=t=>e.onChange(t)),onBlur:t[2]||(t[2]=t=>e.onBlur(t))}),null,16,wd)}const Sd=xl(_d,[["render",xd]]),Ed={key:0,class:"input-group-text"},Md=["innerHTML"],Td={key:1},Cd={key:0,class:"input-group-text"},Ad=["innerHTML"],kd={key:1},Od=(0,i.aZ)({__name:"BInputGroup",props:{append:null,appendHtml:null,id:null,prepend:null,prependHtml:null,size:null,tag:{default:"div"}},setup(e){const t=e,n=(0,i.Fl)((()=>({"input-group-sm":"sm"===t.size,"input-group-lg":"lg"===t.size}))),r=(0,i.Fl)((()=>!!t.append||!!t.appendHtml)),a=(0,i.Fl)((()=>!!t.prepend||!!t.prependHtml));return(t,l)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(e.tag),{id:e.id,class:(0,s.C_)(["input-group",(0,o.SU)(n)]),role:"group"},{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"prepend",{},(()=>[(0,o.SU)(a)?((0,i.wg)(),(0,i.iD)("span",Ed,[e.prependHtml?((0,i.wg)(),(0,i.iD)("span",{key:0,innerHTML:e.prependHtml},null,8,Md)):((0,i.wg)(),(0,i.iD)("span",Td,(0,s.zw)(e.prepend),1))])):(0,i.kq)("",!0)])),(0,i.WI)(t.$slots,"default"),(0,i.WI)(t.$slots,"append",{},(()=>[(0,o.SU)(r)?((0,i.wg)(),(0,i.iD)("span",Cd,[e.appendHtml?((0,i.wg)(),(0,i.iD)("span",{key:0,innerHTML:e.appendHtml},null,8,Ad)):((0,i.wg)(),(0,i.iD)("span",kd,(0,s.zw)(e.append),1))])):(0,i.kq)("",!0)]))])),_:3},8,["id","class"]))}}),Rd=(0,i.aZ)({__name:"BInputGroupText",props:{tag:{default:"div"},text:null},setup(e){return(t,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(e.tag),{class:"input-group-text"},{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default",{},(()=>[(0,i.Uk)((0,s.zw)(e.text),1)]))])),_:3}))}}),Pd=(0,i.aZ)({__name:"BInputGroupAddon",props:{append:{default:!1},id:null,isText:{default:!1},tag:{default:"div"}},setup(e){const t=e,n=ya((0,o.Vh)(t,"append")),r=ya((0,o.Vh)(t,"isText")),a=(0,i.Fl)((()=>({"input-group-append":n.value,"input-group-prepend":!n.value})));return(t,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(e.tag),{id:e.id,class:(0,s.C_)(["d-flex",(0,o.SU)(a)])},{default:(0,i.w5)((()=>[(0,o.SU)(r)?((0,i.wg)(),(0,i.j4)(Rd,{key:0},{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default")])),_:3})):(0,i.WI)(t.$slots,"default",{key:1})])),_:3},8,["id","class"]))}}),Ld=(0,i.aZ)({__name:"BInputGroupAppend",props:{id:null,isText:{default:!1},tag:{default:"div"}},setup(e){const t=e,n=(0,i.Fl)((()=>({id:t.id,isText:t.isText,tag:t.tag,append:!0})));return(e,t)=>((0,i.wg)(),(0,i.j4)(Pd,(0,s.vs)((0,i.F4)((0,o.SU)(n))),{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default")])),_:3},16))}}),Dd=(0,i.aZ)({__name:"BInputGroupPrepend",props:{id:null,isText:{default:!1},tag:{default:"div"}},setup(e){const t=e,n=(0,i.Fl)((()=>({id:t.id,isText:t.isText,tag:t.tag,append:!1})));return(e,t)=>((0,i.wg)(),(0,i.j4)(Pd,(0,s.vs)((0,i.F4)((0,o.SU)(n))),{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default")])),_:3},16))}}),Id=Symbol(),Nd=(0,i.aZ)({__name:"BListGroup",props:{flush:{default:!1},horizontal:{type:[Boolean,String],default:!1},numbered:{default:!1},tag:{default:"div"}},setup(e){const t=e,n=ya((0,o.Vh)(t,"flush")),r=ya((0,o.Vh)(t,"numbered")),a=(0,i.Fl)((()=>{const e=!n.value&&t.horizontal;return{"list-group-flush":n.value,"list-group-horizontal":!0===e,[`list-group-horizontal-${e}`]:"string"==typeof e,"list-group-numbered":r.value}})),l=(0,i.Fl)((()=>!0===r.value?"ol":t.tag));return(0,i.JJ)(Id,{numbered:r.value}),(e,t)=>((0,i.wg)(),(0,i.j4)((0,i.LL)((0,o.SU)(l)),{class:(0,s.C_)(["list-group",(0,o.SU)(a)])},{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default")])),_:3},8,["class"]))}}),Ud=(0,i.aZ)({__name:"BListGroupItem",props:{action:{default:!1},active:{default:!1},button:{default:!1},disabled:{default:!1},href:null,tag:{default:"div"},target:{default:"_self"},to:null,variant:null},setup(e){const t=e,n=ya((0,o.Vh)(t,"action")),r=ya((0,o.Vh)(t,"active")),s=ya((0,o.Vh)(t,"button")),a=ya((0,o.Vh)(t,"disabled")),l=(0,i.l1)(),c=(0,i.f3)(Id,null),u=(0,i.Fl)((()=>!s.value&&(!!t.href||!!t.to))),d=(0,i.Fl)((()=>null!=c&&c.numbered?"li":s.value?"button":u.value?El:t.tag)),h=(0,i.Fl)((()=>{const e=n.value||u.value||s.value||["a","router-link","button","b-link"].includes(t.tag);return{[`list-group-item-${t.variant}`]:void 0!==t.variant,"list-group-item-action":e,active:r.value,disabled:a.value}})),f=(0,i.Fl)((()=>{const e={};return s.value&&((!l||!l.type)&&(e.type="button"),a.value&&(e.disabled=!0)),e}));return(t,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)((0,o.SU)(d)),(0,i.dG)({class:["list-group-item",(0,o.SU)(h)],"aria-current":!!(0,o.SU)(r)||null,"aria-disabled":!!(0,o.SU)(a)||null,target:(0,o.SU)(u)?e.target:null,href:(0,o.SU)(s)?null:e.href,to:(0,o.SU)(s)?null:e.to},(0,o.SU)(f)),{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default")])),_:3},16,["class","aria-current","aria-disabled","target","href","to"]))}}),Fd=["id"],Bd={inheritAttrs:!1},Vd=(0,i.aZ)({...Bd,__name:"BModal",props:{bodyBgVariant:null,bodyClass:null,bodyTextVariant:null,busy:{default:!1},lazy:{default:!1},buttonSize:{default:"md"},cancelDisabled:{default:!1},cancelTitle:{default:"Cancel"},cancelVariant:{default:"secondary"},centered:{default:!1},contentClass:null,dialogClass:null,footerBgVariant:null,footerBorderVariant:null,footerClass:null,footerTextVariant:null,fullscreen:{type:[Boolean,String],default:!1},headerBgVariant:null,headerBorderVariant:null,headerClass:null,headerCloseLabel:{default:"Close"},headerCloseWhite:{default:!1},headerTextVariant:null,hideBackdrop:{default:!1},hideFooter:{default:!1},hideHeader:{default:!1},hideHeaderClose:{default:!1},id:null,modalClass:null,modelValue:{default:!1},noCloseOnBackdrop:{default:!1},noCloseOnEsc:{default:!1},noFade:{default:!1},noFocus:{default:!1},okDisabled:{default:!1},okOnly:{default:!1},okTitle:{default:"Ok"},okVariant:{default:"primary"},scrollable:{default:!1},show:{default:!1},size:null,title:null,titleClass:null,titleSrOnly:{default:!1},titleTag:{default:"h5"}},emits:["update:modelValue","show","shown","hide","hidden","hide-prevented","ok","cancel"],setup(e,{emit:t}){const n=e,r=ya((0,o.Vh)(n,"busy")),l=ya((0,o.Vh)(n,"lazy")),c=ya((0,o.Vh)(n,"cancelDisabled")),u=ya((0,o.Vh)(n,"centered")),d=ya((0,o.Vh)(n,"headerCloseWhite")),h=ya((0,o.Vh)(n,"hideBackdrop")),f=ya((0,o.Vh)(n,"hideFooter")),p=ya((0,o.Vh)(n,"hideHeader")),m=ya((0,o.Vh)(n,"hideHeaderClose")),g=ya((0,o.Vh)(n,"modelValue")),v=ya((0,o.Vh)(n,"noCloseOnBackdrop")),y=ya((0,o.Vh)(n,"noCloseOnEsc")),b=ya((0,o.Vh)(n,"noFade")),_=ya((0,o.Vh)(n,"noFocus")),w=ya((0,o.Vh)(n,"okDisabled")),x=ya((0,o.Vh)(n,"okOnly")),S=ya((0,o.Vh)(n,"scrollable")),E=ya((0,o.Vh)(n,"show")),M=ya((0,o.Vh)(n,"titleSrOnly")),T=(0,o.iH)(!1),C=Pa((0,o.Vh)(n,"id"),"modal"),A=(0,o.iH)(),k=(0,o.iH)(),O=(0,i.Fl)((()=>[{fade:!b.value,show:E.value},n.modalClass])),R=(0,i.Fl)((()=>[{"modal-fullscreen":"boolean"==typeof n.fullscreen&&n.fullscreen,[`modal-fullscreen-${n.fullscreen}-down`]:"string"==typeof n.fullscreen&&n.fullscreen,[`modal-${n.size}`]:n.size,"modal-dialog-centered":u.value,"modal-dialog-scrollable":S.value},n.dialogClass])),P=(0,i.Fl)((()=>[{[`bg-${n.bodyBgVariant}`]:n.bodyBgVariant,[`text-${n.bodyTextVariant}`]:n.bodyTextVariant},n.bodyClass])),L=(0,i.Fl)((()=>[{[`bg-${n.headerBgVariant}`]:n.headerBgVariant,[`border-${n.headerBorderVariant}`]:n.headerBorderVariant,[`text-${n.headerTextVariant}`]:n.headerTextVariant},n.headerClass])),D=(0,i.Fl)((()=>[{[`bg-${n.footerBgVariant}`]:n.footerBgVariant,[`border-${n.footerBorderVariant}`]:n.footerBorderVariant,[`text-${n.footerTextVariant}`]:n.footerTextVariant},n.footerClass])),I=(0,i.Fl)((()=>[{["visually-hidden"]:M.value},n.titleClass])),N=(0,i.Fl)((()=>c.value||r.value)),U=(0,i.Fl)((()=>w.value||r.value));Sa(A,"shown.bs.modal",(e=>F(e))),Sa(A,"hidden.bs.modal",(e=>B(e))),Sa(A,"show.bs.modal",(e=>V(e))),Sa(A,"hide.bs.modal",(e=>z(e)));const F=e=>{t("shown",e),!0===l.value&&(T.value=!0),!1===g.value&&t("update:modelValue",!0),e.target.focus()},B=e=>{t("hidden",e),!0===l.value&&(T.value=!1),!0===g.value&&t("update:modelValue",!1);const n=document.querySelector(".modal");n&&n.focus()},V=e=>{t("show",e)},z=e=>{t("hide",e)},j=()=>{g.value&&t("update:modelValue",!0),W().show()},H=()=>{g.value&&t("update:modelValue",!1),W().hide()},W=()=>(void 0!==k.value||(k.value=new Fr(A.value,{backdrop:!1,keyboard:!y.value,focus:!_.value})),k.value);return(0,i.bv)((()=>{g.value&&W().show()})),(0,i.YP)((()=>n.noCloseOnBackdrop),(e=>{W()._config.backdrop=!n.hideBackdrop&&(e?"static":!n.hideBackdrop)})),(0,i.YP)((()=>n.noCloseOnEsc),(e=>{W()._config.keyboard=!e})),(0,i.YP)((()=>g.value),(e=>{(0,i.Y3)((()=>{e?j():H()}))})),(n,r)=>((0,i.wg)(),(0,i.j4)(i.lR,{to:"body"},[(0,i._)("div",(0,i.dG)({id:(0,o.SU)(C),ref_key:"element",ref:A,class:["modal",(0,o.SU)(O)],tabindex:"-1"},n.$attrs),[(0,i._)("div",{class:(0,s.C_)(["modal-dialog",(0,o.SU)(R)])},[!(0,o.SU)(l)||(0,o.SU)(l)&&T.value||(0,o.SU)(l)&&!0===(0,o.SU)(g)?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,s.C_)(["modal-content",e.contentClass])},[(0,o.SU)(p)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,s.C_)(["modal-header",(0,o.SU)(L)])},[((0,i.wg)(),(0,i.j4)((0,i.LL)(e.titleTag),{class:(0,s.C_)(["modal-title",(0,o.SU)(I)])},{default:(0,i.w5)((()=>[(0,i.WI)(n.$slots,"title",{},(()=>[(0,i.Uk)((0,s.zw)(e.title),1)]),!0)])),_:3},8,["class"])),(0,o.SU)(m)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[n.$slots["header-close"]?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button","data-bs-dismiss":"modal",onClick:r[0]||(r[0]=e=>H())},[(0,i.WI)(n.$slots,"header-close",{},void 0,!0)])):((0,i.wg)(),(0,i.j4)(dl,{key:1,type:"button","aria-label":e.headerCloseLabel,"data-bs-dismiss":"modal",white:(0,o.SU)(d),onClick:r[1]||(r[1]=e=>H())},null,8,["aria-label","white"]))],64))],2)),(0,i._)("div",{class:(0,s.C_)(["modal-body",(0,o.SU)(P)])},[(0,i.WI)(n.$slots,"default",{},void 0,!0)],2),(0,o.SU)(f)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",{key:1,class:(0,s.C_)(["modal-footer",(0,o.SU)(D)])},[(0,i.WI)(n.$slots,"footer",{},(()=>[(0,o.SU)(x)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(Vl,{key:0,type:"button",class:"btn",disabled:(0,o.SU)(N),size:e.buttonSize,variant:e.cancelVariant,onClick:r[2]||(r[2]=e=>(H(),t("cancel")))},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e.cancelTitle),1)])),_:1},8,["disabled","size","variant"])),(0,i.Wm)(Vl,{type:"button",class:"btn",disabled:(0,o.SU)(U),size:e.buttonSize,variant:e.okVariant,onClick:r[3]||(r[3]=e=>(H(),t("ok")))},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e.okTitle),1)])),_:1},8,["disabled","size","variant"])]),!0)],2))],2)):(0,i.kq)("",!0)],2),!1===(0,o.SU)(h)?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"modal-backdrop fade show",onClick:r[4]||(r[4]=(0,a.iM)((e=>!1===(0,o.SU)(v)&&H()),["prevent"]))})):(0,i.kq)("",!0)],16,Fd)]))}}),zd=xl(Vd,[["__scopeId","data-v-eba3f010"]]),jd=(0,i.aZ)({__name:"BNav",props:{align:null,cardHeader:{default:!1},fill:{default:!1},justified:{default:!1},pills:{default:!1},small:{default:!1},tabs:{default:!1},tag:{default:"ul"},vertical:{default:!1}},setup(e){const t=e,n=ya((0,o.Vh)(t,"cardHeader")),r=ya((0,o.Vh)(t,"fill")),a=ya((0,o.Vh)(t,"justified")),l=ya((0,o.Vh)(t,"pills")),c=ya((0,o.Vh)(t,"small")),u=ya((0,o.Vh)(t,"tabs")),d=ya((0,o.Vh)(t,"vertical")),h=(0,i.Fl)((()=>({"nav-tabs":u.value,"nav-pills":l.value&&!u.value,"card-header-tabs":!d.value&&n.value&&u.value,"card-header-pills":!d.value&&n.value&&l.value&&!u.value,"flex-column":d.value,"nav-fill":!d.value&&r.value,"nav-justified":!d.value&&a.value,[`justify-content-${t.align}`]:!d.value&&void 0!==t.align,small:c.value})));return(t,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(e.tag),{class:(0,s.C_)(["nav",(0,o.SU)(h)])},{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default")])),_:3},8,["class"]))}}),Hd=(0,i.aZ)({__name:"BNavForm",props:{role:null,id:null,floating:{default:!1},novalidate:{default:!1},validated:{default:!1}},emits:["submit"],setup(e,{emit:t}){const n=e,r=e=>t("submit",e),s=(0,i.Fl)((()=>({floating:n.floating,role:n.role,id:n.id,novalidate:n.novalidate,validated:n.validated})));return(e,t)=>((0,i.wg)(),(0,i.j4)(mu,(0,i.dG)((0,o.SU)(s),{class:"d-flex",onSubmit:(0,a.iM)(r,["prevent"])}),{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default")])),_:3},16,["onSubmit"]))}}),Wd=(0,i.aZ)({components:{BLink:El},props:{...vs(_l,["event","routerTag"])},setup(e){return{disabledBoolean:ya((0,o.Vh)(e,"disabled"))}}}),Gd={class:"nav-item"};function $d(e,t,n,r,o,s){const a=(0,i.up)("b-link");return(0,i.wg)(),(0,i.iD)("li",Gd,[(0,i.Wm)(a,(0,i.dG)({class:"nav-link"},e.$props,{tabindex:e.disabledBoolean?-1:void 0,"aria-disabled":!!e.disabledBoolean||void 0}),{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default")])),_:3},16,["tabindex","aria-disabled"])])}const qd=xl(Wd,[["render",$d]]),Yd={class:"nav-item dropdown"},Xd=(0,i.aZ)({__name:"BNavItemDropdown",props:{id:null,text:null,toggleClass:null,size:null,offset:null,autoClose:{type:[Boolean,String],default:!0},dark:{type:Boolean,default:!1},dropleft:{type:Boolean,default:!1},dropright:{type:Boolean,default:!1},dropup:{type:Boolean,default:!1},right:{type:Boolean,default:!1},left:{type:[Boolean,String],default:!1},split:{type:Boolean,default:!1},splitVariant:null,noCaret:{type:Boolean,default:!1},variant:{default:"link"}},setup(e){return(e,t)=>((0,i.wg)(),(0,i.iD)("li",Yd,[(0,i.Wm)(Gc,(0,i.dG)(e.$props,{"is-nav":""}),(0,i.Nv)({_:2},[(0,i.Ko)(e.$slots,((t,n)=>({name:n,fn:(0,i.w5)((t=>[(0,i.WI)(e.$slots,n,(0,s.vs)((0,i.F4)(t||{})))]))})))]),1040)]))}}),Zd={class:"navbar-text"},Kd=(0,i.aZ)({__name:"BNavText",props:{text:null},setup(e){return(t,n)=>((0,i.wg)(),(0,i.iD)("li",Zd,[(0,i.WI)(t.$slots,"default",{},(()=>[(0,i.Uk)((0,s.zw)(e.text),1)]))]))}}),Jd=(0,i.aZ)({__name:"BNavbar",props:{fixed:null,print:{default:!1},sticky:null,tag:{default:"nav"},toggleable:{type:[Boolean,String],default:!1},dark:{default:!1},variant:null,container:{type:[String,Boolean],default:"fluid"}},setup(e){const t=e,n=ya((0,o.Vh)(t,"print")),r=ya((0,o.Vh)(t,"dark")),a=(0,i.Fl)((()=>"nav"===t.tag?void 0:"navigation")),l=(0,i.Fl)((()=>"string"==typeof t.toggleable?`navbar-expand-${t.toggleable}`:!1===t.toggleable?"navbar-expand":void 0)),c=(0,i.Fl)((()=>!1===t.container?void 0:!0===t.container?"container":`container-${t.container}`)),u=(0,i.Fl)((()=>({"d-print":n.value,[`sticky-${t.sticky}`]:void 0!==t.sticky,"navbar-dark":r.value,[`bg-${t.variant}`]:void 0!==t.variant,[`fixed-${t.fixed}`]:void 0!==t.fixed,[`${l.value}`]:void 0!==l.value})));return(t,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(e.tag),{class:(0,s.C_)(["navbar",(0,o.SU)(u)]),role:(0,o.SU)(a)},{default:(0,i.w5)((()=>[!1!==e.container?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,s.C_)((0,o.SU)(c))},[(0,i.WI)(t.$slots,"default")],2)):(0,i.WI)(t.$slots,"default",{key:1})])),_:3},8,["class","role"]))}}),Qd=vs(_l,["event","routerTag"]),eh=(0,i.aZ)({components:{BLink:El},props:{tag:{type:String,default:"div"},...Qd},setup(e){const t=(0,i.Fl)((()=>va(e))),n=(0,i.Fl)((()=>t.value?El:e.tag));return{props:t.value?ma(e,Qd):{},computedTag:n}}});function th(e,t,n,r,o,s){return(0,i.wg)(),(0,i.j4)((0,i.LL)(e.computedTag),(0,i.dG)({class:"navbar-brand"},e.props),{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default")])),_:3},16)}const nh=xl(eh,[["render",th]]),rh=(0,i.aZ)({__name:"BNavbarNav",props:{align:null,fill:{default:!1},justified:{default:!1},small:{default:!1},tag:{default:"ul"}},setup(e){const t=e,n=ya((0,o.Vh)(t,"fill")),r=ya((0,o.Vh)(t,"justified")),a=ya((0,o.Vh)(t,"small")),l=(0,i.Fl)((()=>({"nav-fill":n.value,"nav-justified":r.value,[`justify-content-${t.align}`]:void 0!==t.align,small:a.value})));return(e,t)=>((0,i.wg)(),(0,i.iD)("ul",{class:(0,s.C_)(["navbar-nav",(0,o.SU)(l)])},[(0,i.WI)(e.$slots,"default")],2))}}),ih=(0,i._)("span",{class:"navbar-toggler-icon"},null,-1),oh=(0,i.aZ)({__name:"BNavbarToggle",props:{disabled:{default:!1},label:{default:"Toggle navigation"},target:null},emits:["click"],setup(e,{emit:t}){const n=e,r=ya((0,o.Vh)(n,"disabled")),s=(0,i.Fl)((()=>({disabled:r.value,"aria-label":n.label}))),a=(0,i.Fl)((()=>({disabled:r.value}))),l=e=>{r.value||t("click",e)};return(t,n)=>(0,i.wy)(((0,i.wg)(),(0,i.iD)("button",(0,i.dG)({class:["navbar-toggler",(0,o.SU)(a)],type:"button"},(0,o.SU)(s),{onClick:l}),[(0,i.WI)(t.$slots,"default",{},(()=>[ih]))],16)),[[(0,o.SU)($a),(0,o.SU)(r)?void 0:e.target]])}}),sh=["data-bs-backdrop","data-bs-scroll"],ah={key:0,class:"offcanvas-header"},lh={id:"offcanvasLabel",class:"offcanvas-title"},ch={class:"offcanvas-body"},uh={key:1},dh=(0,i.aZ)({__name:"BOffcanvas",props:{dismissLabel:{default:"Close"},modelValue:{default:!1},bodyScrolling:{default:!1},backdrop:{default:!0},placement:{default:"start"},title:null,noHeaderClose:{default:!1},noHeader:{default:!1}},emits:["update:modelValue","show","shown","hide","hidden"],setup(e,{emit:t}){const n=e,r=ya((0,o.Vh)(n,"modelValue")),a=ya((0,o.Vh)(n,"bodyScrolling")),l=ya((0,o.Vh)(n,"backdrop")),c=ya((0,o.Vh)(n,"noHeaderClose")),u=ya((0,o.Vh)(n,"noHeader")),d=(0,o.iH)(),h=(0,o.iH)();Sa(d,"shown.bs.offcanvas",(()=>t("shown"))),Sa(d,"hidden.bs.offcanvas",(()=>t("hidden")));const f=()=>{t("show"),t("update:modelValue",!0)},p=()=>{t("hide"),t("update:modelValue",!1)};Sa(d,"show.bs.offcanvas",(()=>{f()})),Sa(d,"hide.bs.offcanvas",(()=>{p()})),(0,i.bv)((()=>{var e;h.value=new ai(d.value),r.value&&(null==(e=h.value)||e.show(d.value))}));const m=(0,i.Fl)((()=>({[`offcanvas-${n.placement}`]:!!n.placement})));return(0,i.YP)((()=>r.value),(e=>{var t,n;e?null==(t=h.value)||t.show(d.value):null==(n=h.value)||n.hide()})),(t,n)=>((0,i.wg)(),(0,i.iD)("div",{ref_key:"element",ref:d,class:(0,s.C_)(["offcanvas",(0,o.SU)(m)]),tabindex:"-1","aria-labelledby":"offcanvasLabel","data-bs-backdrop":(0,o.SU)(l),"data-bs-scroll":(0,o.SU)(a)},[(0,o.SU)(u)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",ah,[(0,i.WI)(t.$slots,"header",(0,s.vs)((0,i.F4)({visible:e.modelValue,placement:e.placement,hide:p})),(()=>[(0,i._)("h5",lh,[(0,i.WI)(t.$slots,"title",{},(()=>[(0,i.Uk)((0,s.zw)(e.title),1)]))]),(0,o.SU)(c)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(dl,{key:0,type:"button",class:"text-reset","data-bs-dismiss":"offcanvas","aria-label":e.dismissLabel},null,8,["aria-label"]))]))])),(0,i._)("div",ch,[(0,i.WI)(t.$slots,"default")]),t.$slots.footer?((0,i.wg)(),(0,i.iD)("div",uh,[(0,i.WI)(t.$slots,"footer",(0,s.vs)((0,i.F4)({visible:e.modelValue,placement:e.placement,hide:p})))])):(0,i.kq)("",!0)],10,sh))}}),hh={top:0,left:0,bottom:0,right:0},fh="default",ph="overlay",mh=(0,i.aZ)({components:{BTransition:Ac},props:{bgColor:{type:String,required:!1},blur:{type:String,default:"2px"},fixed:{type:[Boolean,String],default:!1},noCenter:{type:[Boolean,String],default:!1},noFade:{type:[Boolean,String],default:!1},noWrap:{type:[Boolean,String],default:!1},opacity:{type:[Number,String],default:.85,validator:e=>{const t=fa(e,0);return t>=0&&t<=1}},overlayTag:{type:String,default:"div"},rounded:{type:[Boolean,String],default:!1},show:{type:[Boolean,String],default:!1},spinnerSmall:{type:[Boolean,String],default:!1},spinnerType:{type:String,default:"border"},spinnerVariant:{type:String,required:!1},variant:{type:String,default:"light"},wrapTag:{type:String,default:"div"},zIndex:{type:[Number,String],default:10}},emits:["click","hidden","shown"],setup(e,{slots:t,emit:n}){const r=ya((0,o.Vh)(e,"fixed")),s=ya((0,o.Vh)(e,"noCenter")),a=ya((0,o.Vh)(e,"noFade")),l=ya((0,o.Vh)(e,"noWrap")),c=ya((0,o.Vh)(e,"show")),u=ya((0,o.Vh)(e,"spinnerSmall")),d=(0,i.Fl)((()=>!0===e.rounded||""===e.rounded?"rounded":e.rounded?`rounded-${e.rounded}`:"")),h=(0,i.Fl)((()=>e.variant&&!e.bgColor?`bg-${e.variant}`:"")),f=(0,i.Fl)((()=>({spinnerType:e.spinnerType||null,spinnerVariant:e.spinnerVariant||null,spinnerSmall:u.value})));return()=>{const o=e=>(0,i.h)((0,i.up)("BSpinner"),{type:e.spinnerType,variant:e.spinnerVariant,small:u.value});let p="";if(c.value){const a=(0,i.h)("div",{class:["position-absolute",h.value,d.value],style:{...hh,opacity:e.opacity,backgroundColor:e.bgColor||null,backdropFilter:e.blur?`blur(${e.blur})`:null}}),c=(0,i.h)("div",{class:"position-absolute",style:s.value?{...hh}:{top:"50%",left:"50%",transform:"translateX(-50%) translateY(-50%)"}},ua(ph,f.value,t)||o(f.value)||"");p=(0,i.h)(e.overlayTag,{class:["b-overlay",{"position-absolute":!l.value||l.value&&!r.value,"position-fixed":l.value&&r.value}],style:{...hh,zIndex:e.zIndex||10},onClick:e=>n("click",e),key:"overlay"},[a,c])}const m=()=>(0,i.h)(Ac,{noFade:a.value,transProps:{enterToClass:"show"},name:"fade",onAfterEnter:()=>n("shown"),onAfterLeave:()=>n("hidden")},{default:()=>p});return l.value?m():(0,i.h)(e.wrapTag,{class:["b-overlay-wrap position-relative"],"aria-busy":c.value?"true":null},[(0,i.h)("span",ua(fh,{},t)),m()])}}}),gh=5,vh=20,yh=0,bh=3,_h="ellipsis-text",wh="first-text",xh="last-text",Sh="next-text",Eh="page",Mh="prev-text",Th=e=>Math.max(da(e)||vh,1),Ch=e=>Math.max(da(e)||yh,0),Ah=(e,t)=>{const n=da(e)||1;return n>t?t:n<1?1:n},kh=(0,i.aZ)({name:"BPagination",props:{align:{type:String,default:"start"},ariaControls:{type:String,required:!1},ariaLabel:{type:String,default:"Pagination"},disabled:{type:[Boolean,String],default:!1},ellipsisClass:{type:[Array,String],default:()=>[]},ellipsisText:{type:String,default:"…"},firstClass:{type:[Array,String],default:()=>[]},firstNumber:{type:[Boolean,String],default:!1},firstText:{type:String,default:"«"},hideEllipsis:{type:[Boolean,String],default:!1},hideGotoEndButtons:{type:[Boolean,String],default:!1},labelFirstPage:{type:String,default:"Go to first page"},labelLastPage:{type:String,default:"Go to last page"},labelNextPage:{type:String,default:"Go to next page"},labelPage:{type:String,default:"Go to page"},labelPrevPage:{type:String,default:"Go to previous page"},lastClass:{type:[Array,String],default:()=>[]},lastNumber:{type:[Boolean,String],default:!1},lastText:{type:String,default:"»"},limit:{type:Number,default:gh},modelValue:{type:Number,default:1},nextClass:{type:[Array,String],default:()=>[]},nextText:{type:String,default:"›"},pageClass:{type:[Array,String],default:()=>[]},perPage:{type:Number,default:vh},pills:{type:[Boolean,String],default:!1},prevClass:{type:[Array,String],default:()=>[]},prevText:{type:String,default:"‹"},size:{type:String,required:!1},totalRows:{type:Number,default:yh}},emits:["update:modelValue","page-click"],setup(e,{emit:t,slots:n}){const r=ya((0,o.Vh)(e,"disabled")),s=ya((0,o.Vh)(e,"firstNumber")),a=ya((0,o.Vh)(e,"hideEllipsis")),l=ya((0,o.Vh)(e,"hideGotoEndButtons")),c=ya((0,o.Vh)(e,"lastNumber")),u=ya((0,o.Vh)(e,"pills")),d=gs((0,o.Vh)(e,"align")),h=(0,i.Fl)((()=>Math.ceil(Ch(e.totalRows)/Th(e.perPage)))),f=(0,i.Fl)((()=>{let t;return t=h.value-e.modelValue+2<e.limit&&e.limit>bh?h.value-m.value+1:e.modelValue-Math.floor(m.value/2),t<1?t=1:t>h.value-m.value&&(t=h.value-m.value+1),e.limit<=bh&&c.value&&h.value===t+m.value-1&&(t=Math.max(t-1,1)),t})),p=(0,i.Fl)((()=>{const t=h.value-e.modelValue;let n=!1;return t+2<e.limit&&e.limit>bh?e.limit>bh&&(n=!0):e.limit>bh&&(n=!(a.value&&!s.value)),f.value<=1&&(n=!1),n&&s.value&&f.value<4&&(n=!1),n})),m=(0,i.Fl)((()=>{let t=e.limit;return h.value<=e.limit?t=h.value:e.modelValue<e.limit-1&&e.limit>bh?((!a.value||c.value)&&(t=e.limit-(s.value?0:1)),t=Math.min(t,e.limit)):h.value-e.modelValue+2<e.limit&&e.limit>bh?(!a.value||s.value)&&(t=e.limit-(c.value?0:1)):e.limit>bh&&(t=e.limit-(a.value?0:2)),t})),g=(0,i.Fl)((()=>{const t=h.value-m.value;let n=!1;e.modelValue<e.limit-1&&e.limit>bh?(!a.value||c.value)&&(n=!0):e.limit>bh&&(n=!(a.value&&!c.value)),f.value>t&&(n=!1);const r=f.value+m.value-1;return n&&c.value&&r>h.value-3&&(n=!1),n})),v=(0,o.qj)({pageSize:Th(e.perPage),totalRows:Ch(e.totalRows),numberOfPages:h.value}),y=(n,r)=>{if(r===e.modelValue)return;const{target:i}=n,o=new ws("page-click",{cancelable:!0,vueTarget:this,target:i});t("page-click",o,r),!o.defaultPrevented&&t("update:modelValue",r)},b=(0,i.Fl)((()=>e.size?`pagination-${e.size}`:"")),_=(0,i.Fl)((()=>u.value?"b-pagination-pills":""));(0,i.YP)((()=>e.modelValue),(n=>{const r=Ah(n,h.value);r!==e.modelValue&&t("update:modelValue",r)})),(0,i.YP)(v,((n,r)=>{null!=n&&(r.pageSize!==n.pageSize&&r.totalRows===n.totalRows||r.numberOfPages!==n.numberOfPages&&e.modelValue>r.numberOfPages)&&t("update:modelValue",1)}));const w=(0,i.Fl)((()=>{const e=[];for(let t=0;t<m.value;t++)e.push({number:f.value+t,classes:null});return e}));return()=>{const t=[],o=w.value.map((e=>e.number)),a=t=>t===e.modelValue,u=e.modelValue<1,f="fill"===e.align,m=(t,o,s,l,c,d)=>{const p=r.value||a(d)||u||t<1||t>h.value,m=t<1?1:t>h.value?h.value:t,g={disabled:p,page:m,index:m-1},v=ua(s,g,n)||l||"";return(0,i.h)("li",{class:["page-item",{disabled:p,"flex-fill":f,"d-flex":f&&!p},c]},(0,i.h)(p?"span":"button",{class:["page-link",{"flex-grow-1":!p&&f}],"aria-label":o,"aria-controls":e.ariaControls||null,"aria-disabled":p?"true":null,role:"menuitem",type:p?null:"button",tabindex:p?null:"-1",onClick:e=>{p||y(e,m)}},v))},v=t=>(0,i.h)("li",{class:["page-item","disabled","bv-d-xs-down-none",f?"flex-fill":"",e.ellipsisClass],role:"separator",key:"ellipsis-"+(t?"last":"first")},[(0,i.h)("span",{class:["page-link"]},ua(_h,{},n)||e.ellipsisText||"...")]),x=(t,o)=>{const s=a(t.number)&&!u,l=r.value?null:s||u&&0===o?"0":"-1",c={active:s,disabled:r.value,page:t.number,index:t.number-1,content:t.number},d=ua(Eh,c,n)||t.number,h=(0,i.h)(r.value?"span":"button",{class:["page-link",{"flex-grow-1":!r.value&&f}],"aria-controls":e.ariaControls||null,"aria-disabled":r.value?"true":null,"aria-label":e.labelPage?`${e.labelPage} ${t.number}`:null,role:"menuitemradio",type:r.value?null:"button",tabindex:l,onClick:e=>{r.value||y(e,t.number)}},d);return(0,i.h)("li",{class:["page-item",{disabled:r.value,active:s,"flex-fill":f,"d-flex":f&&!r.value},e.pageClass],role:"presentation",key:`page-${t.number}`},h)};if(!l.value&&!s.value){const n=m(1,e.labelFirstPage,wh,e.firstText,e.firstClass,1);t.push(n)}const S=m(e.modelValue-1,e.labelFirstPage,Mh,e.prevText,e.prevClass,1);t.push(S),s.value&&1!==o[0]&&t.push(x({number:1},0)),p.value&&t.push(v(!1)),w.value.forEach(((e,n)=>{const r=p.value&&s.value&&1!==o[0]?1:0;t.push(x(e,n+r))})),g.value&&t.push(v(!0)),c.value&&o[o.length-1]!==h.value&&t.push(x({number:h.value},-1));const E=m(e.modelValue+1,e.labelNextPage,Sh,e.nextText,e.nextClass,h.value);if(t.push(E),!c.value&&!l.value){const n=m(h.value,e.labelLastPage,xh,e.lastText,e.lastClass,h.value);t.push(n)}return(0,i.h)("ul",{class:["pagination",b.value,d.value,_.value],role:"menubar","aria-disabled":r.value,"aria-label":e.ariaLabel||null},t)}}}),Oh=(0,i.aZ)({props:{container:{type:[String,Object],default:"body"},content:{type:String},id:{type:String},customClass:{type:String,default:""},noninteractive:{type:[Boolean,String],default:!1},placement:{type:String,default:"right"},target:{type:[String,Object],default:void 0},title:{type:String},delay:{type:[Number,Object],default:0},triggers:{type:String,default:"click"},show:{type:[Boolean,String],default:!1},variant:{type:String,default:void 0},html:{type:[Boolean,String],default:!0},sanitize:{type:[Boolean,String],default:!1},offset:{type:String,default:"0"}},emits:["show","shown","hide","hidden","inserted"],setup(e,{emit:t,slots:n}){ya((0,o.Vh)(e,"noninteractive"));const r=ya((0,o.Vh)(e,"show")),s=ya((0,o.Vh)(e,"html")),a=ya((0,o.Vh)(e,"sanitize")),l=(0,o.iH)(),c=(0,o.iH)(),u=(0,o.iH)(),d=(0,o.iH)(),h=(0,o.iH)(),f=(0,i.Fl)((()=>({[`b-popover-${e.variant}`]:void 0!==e.variant}))),p=e=>"string"==typeof e||e instanceof HTMLElement?e:typeof e<"u"?e.$el:void 0,m=e=>{if(e){if("string"==typeof e){const t=document.getElementById(e);return t||void 0}return e}},g=t=>{c.value=m(p(t)),c.value&&(u.value=new Ki(c.value,{customClass:e.customClass,container:p(e.container),trigger:e.triggers,placement:e.placement,title:e.title||n.title?d.value:"",content:h.value,html:s.value,delay:e.delay,sanitize:a.value,offset:e.offset}))};return(0,i.bv)((()=>{var t,n,o;(0,i.Y3)((()=>{g(e.target)})),null==(n=null==(t=l.value)?void 0:t.parentNode)||n.removeChild(l.value),r.value&&(null==(o=u.value)||o.show())})),(0,i.Jd)((()=>{var e;null==(e=u.value)||e.dispose()})),(0,i.YP)((()=>e.target),(e=>{var t;null==(t=u.value)||t.dispose(),g(e)})),(0,i.YP)((()=>r.value),((e,t)=>{var n,r;e!==t&&(e?null==(n=u.value)||n.show():null==(r=u.value)||r.hide())})),Sa(c,"show.bs.popover",(()=>t("show"))),Sa(c,"shown.bs.popover",(()=>t("shown"))),Sa(c,"hide.bs.popover",(()=>t("hide"))),Sa(c,"hidden.bs.popover",(()=>t("hidden"))),Sa(c,"inserted.bs.popover",(()=>t("inserted"))),{element:l,titleRef:d,contentRef:h,classes:f}}}),Rh=["id"],Ph={ref:"titleRef"},Lh={ref:"contentRef"};function Dh(e,t,n,r,o,a){return(0,i.wg)(),(0,i.iD)("div",{id:e.id,ref:"element",class:(0,s.C_)(["popover b-popover",e.classes]),role:"tooltip",tabindex:"-1"},[(0,i._)("div",Ph,[(0,i.WI)(e.$slots,"title",{},(()=>[(0,i.Uk)((0,s.zw)(e.title),1)]))],512),(0,i._)("div",Lh,[(0,i.WI)(e.$slots,"default",{},(()=>[(0,i.Uk)((0,s.zw)(e.content),1)]))],512)],10,Rh)}const Ih=xl(Oh,[["render",Dh]]),Nh=(0,i.aZ)({props:{animated:{type:[Boolean,String],default:!1},label:{type:String},labelHtml:{type:String},max:{type:[Number,String]},precision:{type:[Number,String],default:0},showProgress:{type:[Boolean,String],default:!1},showValue:{type:[Boolean,String],default:!1},striped:{type:[Boolean,String],default:!1},value:{type:[Number,String],default:0},variant:{type:String}},setup(e,{slots:t}){const n=ya((0,o.Vh)(e,"animated")),r=ya((0,o.Vh)(e,"showProgress")),s=ya((0,o.Vh)(e,"showValue")),a=ya((0,o.Vh)(e,"striped")),l=(0,i.f3)(Uh),c=(0,i.Fl)((()=>({"progress-bar-animated":n.value||(null==l?void 0:l.animated),"progress-bar-striped":a.value||(null==l?void 0:l.striped)||n.value||(null==l?void 0:l.animated),[`bg-${e.variant}`]:void 0!==e.variant}))),u=(0,i.Fl)((()=>{if(s.value||(null==l?void 0:l.showValue))return parseFloat(e.value).toFixed(e.precision);if(r.value||(null==l?void 0:l.showProgress)){const t=(100*e.value/parseInt(e.max||100)).toString();return parseFloat(t).toFixed(e.precision)}return e.label||""})),d=(0,i.Fl)((()=>e.max||(null==l?void 0:l.max)?100*e.value/parseInt(e.max||(null==l?void 0:l.max))+"%":"string"==typeof e.value?e.value:`${e.value}%`)),h=(0,i.Fl)((()=>{const t={class:["progress-bar",c.value],role:"progressbar","aria-valuenow":e.value,"aria-valuemin":0,"aria-valuemax":e.max,style:{width:d.value}};return e.labelHtml?{...t,innerHTML:e.labelHtml}:t}));return()=>{var e;return(0,i.h)("div",h.value,(null==(e=t.default)?void 0:e.call(t))||u.value)}}}),Uh=Symbol(),Fh=(0,i.aZ)({__name:"BProgress",props:{variant:null,max:null,height:null,animated:{default:!1},precision:{default:0},showProgress:{default:!1},showValue:{default:!1},striped:{default:!1},value:{default:0}},setup(e){const t=e,n=ya((0,o.Vh)(t,"animated")),r=ya((0,o.Vh)(t,"showProgress")),a=ya((0,o.Vh)(t,"showValue")),l=ya((0,o.Vh)(t,"striped")),c=(0,i.Fl)((()=>({animated:n.value,max:t.max,precision:t.precision,showProgress:r.value,showValue:a.value,striped:l.value,value:t.value,variant:t.variant})));return(0,i.JJ)(Uh,{animated:n.value,max:t.max,showProgress:r.value,showValue:a.value,striped:l.value}),(t,n)=>((0,i.wg)(),(0,i.iD)("div",{class:"progress",style:(0,s.j5)({height:e.height})},[(0,i.WI)(t.$slots,"default",{},(()=>[(0,i.Wm)(Nh,(0,s.vs)((0,i.F4)((0,o.SU)(c))),null,16)]))],4))}}),Bh=ia("cols",[""],{type:[String,Number],default:null}),Vh=(0,i.aZ)({name:"BRow",props:{tag:{type:String,default:"div"},gutterX:{type:String,default:null},gutterY:{type:String,default:null},noGutters:{type:[Boolean,String],default:!1},alignV:{type:String,default:null},alignH:{type:String,default:null},alignContent:{type:String,default:null},...Bh},setup(e){const t=ya((0,o.Vh)(e,"noGutters")),n=oa(e,Bh,"cols","row-cols");return{classes:(0,i.Fl)((()=>({[`gx-${e.gutterX}`]:null!==e.gutterX,[`gy-${e.gutterY}`]:null!==e.gutterY,"g-0":t.value,[`align-items-${e.alignV}`]:null!==e.alignV,[`justify-content-${e.alignH}`]:null!==e.alignH,[`align-content-${e.alignContent}`]:null!==e.alignContent}))),rowColsClasses:n}}});function zh(e,t,n,r,o,a){return(0,i.wg)(),(0,i.j4)((0,i.LL)(e.tag),{class:(0,s.C_)(["row",[e.classes,e.rowColsClasses]])},{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default")])),_:3},8,["class"])}const jh=xl(Vh,[["render",zh]]),Hh=(0,i.aZ)({__name:"BSkeleton",props:{height:null,width:null,size:null,animation:{default:"wave"},type:{default:"text"},variant:null},setup(e){const t=e,n=(0,i.Fl)((()=>[`b-skeleton-${t.type}`,{[`b-skeleton-animate-${t.animation}`]:"boolean"!=typeof t.animation&&t.animation,[`bg-${t.variant}`]:void 0!==t.variant}])),r=(0,i.Fl)((()=>({width:t.size||t.width,height:t.size||t.height})));return(e,t)=>((0,i.wg)(),(0,i.iD)("div",{class:(0,s.C_)(["b-skeleton",(0,o.SU)(n)]),style:(0,s.j5)((0,o.SU)(r))},null,6))}}),Wh=(0,i.aZ)({__name:"BSkeletonIcon",props:{animation:{default:"wave"}},setup(e){const t=e,n=(0,i.Fl)((()=>[`b-skeleton-animate-${t.animation}`]));return(e,t)=>((0,i.wg)(),(0,i.iD)("div",{class:(0,s.C_)(["b-skeleton-icon-wrapper position-relative d-inline-block overflow-hidden",(0,o.SU)(n)])},[(0,i.WI)(e.$slots,"default")],2))}}),Gh=(0,i.aZ)({__name:"BTableSimple",props:{bordered:{default:!1},borderless:{default:!1},borderVariant:null,captionTop:{default:!1},dark:{default:!1},hover:{default:!1},responsive:{type:[Boolean,String],default:!1},stacked:{type:[Boolean,String],default:!1},striped:{default:!1},small:{default:!1},tableClass:null,tableVariant:null,stickyHeader:{default:!1}},setup(e){const t=e,n=ya((0,o.Vh)(t,"captionTop")),r=ya((0,o.Vh)(t,"borderless")),a=ya((0,o.Vh)(t,"bordered")),l=ya((0,o.Vh)(t,"dark")),c=ya((0,o.Vh)(t,"hover")),u=ya((0,o.Vh)(t,"small")),d=ya((0,o.Vh)(t,"striped")),h=ya((0,o.Vh)(t,"stickyHeader")),f=(0,i.Fl)((()=>["table","b-table",{"table-bordered":a.value,"table-borderless":r.value,[`border-${t.borderVariant}`]:void 0!==t.borderVariant,"caption-top":n.value,"table-dark":l.value,"table-hover":c.value,"b-table-stacked":"boolean"==typeof t.stacked&&t.stacked,[`b-table-stacked-${t.stacked}`]:"string"==typeof t.stacked,"table-striped":d.value,"table-sm":u.value,[`table-${t.tableVariant}`]:void 0!==t.tableVariant},t.tableClass])),p=(0,i.Fl)((()=>[{"table-responsive":!0===t.responsive,[`table-responsive-${t.responsive}`]:"string"==typeof t.responsive,"b-table-sticky-header":h.value}]));return(t,n)=>e.responsive?((0,i.wg)(),(0,i.iD)("div",{key:1,class:(0,s.C_)((0,o.SU)(p))},[(0,i._)("table",{role:"table",class:(0,s.C_)((0,o.SU)(f))},[(0,i.WI)(t.$slots,"default")],2)],2)):((0,i.wg)(),(0,i.iD)("table",{key:0,role:"table",class:(0,s.C_)((0,o.SU)(f))},[(0,i.WI)(t.$slots,"default")],2))}}),$h={key:0},qh={key:1},Yh=(0,i.aZ)({__name:"BSkeletonTable",props:{animation:{default:"wave"},columns:{default:5},hideHeader:{default:!1},rows:{default:3},showFooter:{default:!1},tableProps:null},setup(e){const t=e,n=ya((0,o.Vh)(t,"hideHeader")),r=ya((0,o.Vh)(t,"showFooter"));return(t,a)=>((0,i.wg)(),(0,i.j4)(Gh,(0,s.vs)((0,i.F4)(e.tableProps)),{default:(0,i.w5)((()=>[(0,o.SU)(n)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("thead",$h,[(0,i._)("tr",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.columns,((e,t)=>((0,i.wg)(),(0,i.iD)("th",{key:t},[(0,i.Wm)(Hh)])))),128))])])),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.rows,((t,n)=>((0,i.wg)(),(0,i.iD)("tr",{key:n},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.columns,((e,t)=>((0,i.wg)(),(0,i.iD)("td",{key:t},[(0,i.Wm)(Hh,{width:"75%"})])))),128))])))),128))]),(0,o.SU)(r)?((0,i.wg)(),(0,i.iD)("tfoot",qh,[(0,i._)("tr",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.columns,((e,t)=>((0,i.wg)(),(0,i.iD)("th",{key:t},[(0,i.Wm)(Hh)])))),128))])])):(0,i.kq)("",!0)])),_:1},16))}}),Xh=(0,i.aZ)({__name:"BSkeletonWrapper",props:{loading:{default:!1}},setup(e){const t=ya((0,o.Vh)(e,"loading"));return(e,n)=>(0,o.SU)(t)?(0,i.WI)(e.$slots,"loading",{key:0}):(0,i.WI)(e.$slots,"default",{key:1})}}),Zh=()=>{const e=(e,t)=>{const n=[];return null!=e&&e.length||!(null==t?void 0:t.length)?(Array.isArray(e)&&e.forEach((e=>{"string"==typeof e?n.push({key:e,label:Ls(e)}):xs(e)&&e.key&&"string"==typeof e.key&&n.push({...e})})),n):(Object.keys(t[0]).forEach((e=>n.push({key:e,label:Ls(e)}))),n)},t=(0,o.iH)([]),n=(e,n,o,a)=>{if(t.value=bs(n),"isFilterableTable"in a&&!0===a.isFilterableTable.value&&o.filter&&(t.value=s(t.value,o.filter,o.filterable),r.value&&r.value(t.value)),"isSortable"in a&&!0===a.isSortable.value&&(t.value=i(e,t.value,{key:o.sortBy,desc:a.sortDescBoolean.value})),void 0!==o.perPage){const e=(o.currentPage-1)*o.perPage;t.value=t.value.splice(e,o.perPage)}return t.value},r=(0,o.iH)(void 0),i=(e,t,n)=>{if(!n||!n.key)return t;const r=n.key;return t.sort(((e,t)=>{const i=e=>"object"==typeof e?JSON.stringify(e):e;return i(e[r])>i(t[r])?n.desc?-1:1:i(t[r])>i(e[r])?n.desc?1:-1:0}))},s=(e,t,n)=>e.filter((e=>Object.entries(e).filter((e=>{const[r,i]=e;return!("_"===r[0]||n.length>0&&!n.includes(r))&&("object"==typeof i?JSON.stringify(Object.values(i)):"string"==typeof i?i:i.toString()).toLowerCase().includes(t.toLowerCase())})).length>0));return{normaliseFields:e,mapItems:n,internalItems:t,updateInternalItems:async e=>{try{return t.value=await _s(e),t.value}catch{return}},filterEvent:r}},Kh=["title","abbr","onClick"],Jh={class:"d-inline-flex flex-nowrap align-items-center gap-1"},Qh={key:0,class:"b-table-sort-icon text-muted small"},ef={key:1},tf=["onClick","onDblclick","onMouseenter","onMouseleave"],nf=["colspan"],rf=["colspan"],of={class:"d-flex align-items-center justify-content-center gap-2"},sf=(0,i._)("strong",null,"Loading...",-1),af={key:1,class:"b-table-empty-slot"},lf=["colspan"],cf={key:0},uf=["title","abbr","onClick"],df={key:1},hf={key:2},ff={key:3},pf=(0,i.aZ)({__name:"BTable",props:{align:null,caption:null,captionTop:{default:!1},borderless:{default:!1},bordered:{default:!1},borderVariant:null,dark:{default:!1},fields:{default:()=>[]},footClone:{default:!1},hover:{default:!1},items:{default:()=>[]},provider:null,noProvider:null,noProviderPaging:null,noProviderSorting:null,noProviderFiltering:null,responsive:{type:[Boolean,String],default:!1},small:{default:!1},striped:{default:!1},variant:null,sortBy:null,sortDesc:{default:!1},sortInternal:{default:!0},selectable:{default:!1},stickySelect:{default:!1},selectHead:{type:[Boolean,String],default:!0},selectMode:{default:"single"},selectionVariant:{default:"primary"},stickyHeader:{default:!1},busy:{default:!1},showEmpty:{default:!1},perPage:null,currentPage:{default:1},filter:null,filterable:null,emptyText:{default:"There are no records to show"},emptyFilteredText:{default:"There are no records matching your request"}},emits:["headClicked","rowClicked","rowDblClicked","rowHovered","rowUnhovered","rowSelected","rowUnselected","selection","update:busy","update:sortBy","update:sortDesc","sorted","filtered"],setup(e,{expose:t,emit:n}){const r=e,a=ya((0,o.Vh)(r,"footClone")),l=ya((0,o.Vh)(r,"sortDesc")),c=ya((0,o.Vh)(r,"sortInternal")),u=ya((0,o.Vh)(r,"selectable")),d=ya((0,o.Vh)(r,"stickySelect")),h=ya((0,o.Vh)(r,"busy")),f=ya((0,o.Vh)(r,"showEmpty")),p=ya((0,o.Vh)(r,"showEmpty")),m=ya((0,o.Vh)(r,"showEmpty")),g=ya((0,o.Vh)(r,"showEmpty")),v=(0,o.iH)(h.value),y=(0,i.Rr)(),b=(0,i.Fl)((()=>({[`align-${r.align}`]:void 0!==r.align,"b-table-selectable":u.value,[`b-table-select-${r.selectMode}`]:u.value,"b-table-selecting user-select-none":u.value&&F.value,"b-table-busy":v.value,"b-table-sortable":I.value,"b-table-sort-desc":I.value&&!0===l.value,"b-table-sort-asc":I.value&&!1===l.value}))),_=(0,i.Fl)((()=>({bordered:r.bordered,borderless:r.borderless,borderVariant:r.borderVariant,captionTop:r.captionTop,dark:r.dark,hover:r.hover,responsive:r.responsive,striped:r.striped,small:r.small,tableClass:b.value,tableVariant:r.variant,stickyHeader:r.stickyHeader}))),w=Zh();w.filterEvent.value=async e=>{if(M.value)return void await z();const t=await _s(e);n("filtered",t)};const x=(0,i.Fl)((()=>w.normaliseFields(r.fields,r.items))),S=(0,i.Fl)((()=>x.value.length+(u.value?1:0))),E=(0,i.Fl)((()=>void 0!==r.filter&&""!==r.filter)),M=(0,i.Fl)((()=>void 0!==r.provider)),T=(0,i.Fl)((()=>I.value&&!0===c.value)),C=(0,i.Fl)((()=>M.value?w.internalItems.value:T.value?w.mapItems(r.fields,r.items,r,{isSortable:I,isFilterableTable:E,sortDescBoolean:l}):r.items)),A=e=>"string"==typeof e?Ds(e):void 0!==e.label?e.label:"string"==typeof e.key?Ds(e.key):e.key,k=(e,t,r=!1)=>{const i="string"==typeof e?e:e.key;n("headClicked",i,e,t,r),N(e)},O=(e,t,r)=>{n("rowClicked",e,t,r),V(e,t,r.shiftKey)},R=(e,t,r)=>n("rowDblClicked",e,t,r),P=(e,t,r)=>n("rowHovered",e,t,r),L=(e,t,r)=>n("rowUnhovered",e,t,r),D=(0,i.Fl)((()=>u.value&&(!!r.selectHead||void 0!==y.selectHead))),I=(0,i.Fl)((()=>r.fields.filter((e=>"string"!=typeof e&&e.sortable)).length>0)),N=e=>{if(!I.value)return;const t="string"==typeof e?e:e.key,i="string"!=typeof e&&e.sortable;if(!0===I.value&&!0===i){const e=!l.value;t!==r.sortBy&&n("update:sortBy",t),n("update:sortDesc",e),n("sorted",t,e)}},U=(0,o.iH)(new Set([])),F=(0,i.Fl)((()=>U.value.size>0)),B=()=>{!u.value||n("selection",Array.from(U.value))},V=(e,t,i=!1)=>{if(u.value){if(U.value.has(e))U.value.delete(e),n("rowUnselected",e);else if("single"===r.selectMode&&U.value.size>0&&(U.value.forEach((e=>n("rowUnselected",e))),U.value.clear()),"range"===r.selectMode&&U.value.size>0&&i){const e=Array.from(U.value).pop(),r=C.value.findIndex((t=>t===e)),i=Math.min(r,t),o=Math.max(r,t);C.value.slice(i,o+1).forEach((e=>{U.value.has(e)||(U.value.add(e),n("rowSelected",e))}))}else U.value.add(e),n("rowSelected",e);B()}},z=async()=>{if(!M.value||!r.provider||v.value)return;v.value=!0;const e=new Proxy({currentPage:r.currentPage,filter:r.filter,sortBy:r.sortBy,sortDesc:r.sortDesc,perPage:r.perPage},{get(e,t){return t in e?e[t]:void 0},set(){return console.error("BTable provider context is a read-only object."),!0}}),t=r.provider(e,w.updateInternalItems);if(void 0!==t){if(t instanceof Promise)try{const e=await t;return Array.isArray(e)?await w.updateInternalItems(e):void 0}finally{v.value||(v.value=!1)}try{return await w.updateInternalItems(t)}finally{v.value&&(v.value=!1)}}},j=e=>{e._showDetails=!e._showDetails},H=e=>[e.class,e.thClass,e.variant?`table-${e.variant}`:void 0,{"b-table-sortable-column":I.value&&e.sortable,"b-table-sticky-column":e.stickyColumn}],W=(e,t)=>[e.class,e.tdClass,e.variant?`table-${e.variant}`:void 0,(null==t?void 0:t._cellVariants)&&(null==t?void 0:t._cellVariants[e.key])?`table-${null==t?void 0:t._cellVariants[e.key]}`:void 0,{"b-table-sticky-column":e.stickyColumn}],G=e=>[e._rowVariant?`table-${e._rowVariant}`:null,e._rowVariant?`table-${e._rowVariant}`:null,u.value&&U.value.has(e)?`selected table-${r.selectionVariant}`:null],$=()=>{if(!u.value)return;const e=U.value.size>0?Array.from(U.value):[];U.value=new Set([...C.value]),U.value.forEach((t=>{e.includes(t)||n("rowSelected",t)})),B()},q=()=>{!u.value||(U.value.forEach((e=>{n("rowUnselected",e)})),U.value=new Set([]),B())},Y=e=>{if(!u.value)return;const t=C.value[e];!t||U.value.has(t)||(U.value.add(t),n("rowSelected",t),B())},X=e=>{if(!u.value)return;const t=C.value[e];!t||!U.value.has(t)||(U.value.delete(t),n("rowUnselected",t),B())};(0,i.bv)((()=>{M.value&&z()})),(0,i.YP)((()=>r.filter),((e,t)=>{e===t||M.value||e||_s(r.items).then((e=>n("filtered",e)))}));const Z=async(e,t,n)=>{if(t===n)return;const i=e=>r.noProvider&&r.noProvider.includes(e),o=["currentPage","perPage"].includes(e)&&(i("paging")||!0===p.value),s=["filter"].includes(e)&&(i("filtering")||!0===g.value),a=["sortBy","sortDesc"].includes(e)&&(i("sorting")||!0===m.value);o||s||a||await z()};return(0,i.YP)((()=>v.value),(()=>v.value!==h.value&&n("update:busy",v.value))),(0,i.YP)((()=>h.value),(()=>v.value!==h.value&&(v.value=h.value))),(0,i.YP)((()=>r.filter),((e,t)=>Z("filter",e,t))),(0,i.YP)((()=>r.currentPage),((e,t)=>Z("currentPage",e,t))),(0,i.YP)((()=>r.perPage),((e,t)=>Z("perPage",e,t))),(0,i.YP)((()=>r.sortBy),((e,t)=>Z("sortBy",e,t))),(0,i.YP)((()=>r.sortDesc),((e,t)=>Z("sortDesc",e,t))),t({selectAllRows:$,clearSelected:q,selectRow:Y,unselectRow:X}),(t,n)=>((0,i.wg)(),(0,i.j4)(Gh,(0,s.vs)((0,i.F4)((0,o.SU)(_))),{default:(0,i.w5)((()=>{var n;return[(0,i._)("thead",null,[t.$slots["thead-top"]?(0,i.WI)(t.$slots,"thead-top",{key:0}):(0,i.kq)("",!0),(0,i._)("tr",null,[(0,o.SU)(D)?((0,i.wg)(),(0,i.iD)("th",{key:0,class:(0,s.C_)(["b-table-selection-column",{"b-table-sticky-column":(0,o.SU)(d)}])},[(0,i.WI)(t.$slots,"selectHead",{},(()=>[(0,i.Uk)((0,s.zw)("boolean"==typeof e.selectHead?"Selected":e.selectHead),1)]))],2)):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,o.SU)(x),(n=>((0,i.wg)(),(0,i.iD)("th",(0,i.dG)({key:n.key,scope:"col",class:H(n),title:n.headerTitle,abbr:n.headerAbbr,style:n.thStyle},n.thAttr,{onClick:e=>k(n,e)}),[(0,i._)("div",Jh,[(0,i.WI)(t.$slots,"sortIcon",{field:n,sortBy:e.sortBy,selected:n.key===e.sortBy,isDesc:(0,o.SU)(l),direction:(0,o.SU)(l)?"desc":"asc"},(()=>[(0,o.SU)(I)&&n.sortable&&n.key===e.sortBy?((0,i.wg)(),(0,i.iD)("span",Qh)):(0,i.kq)("",!0)])),(0,i._)("div",null,[t.$slots["head("+n.key+")"]||t.$slots["head()"]?(0,i.WI)(t.$slots,t.$slots["head("+n.key+")"]?"head("+n.key+")":"head()",{key:0,label:n.label}):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.Uk)((0,s.zw)(A(n)),1)],64))])])],16,Kh)))),128))]),t.$slots["thead-sub"]?((0,i.wg)(),(0,i.iD)("tr",ef,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,o.SU)(x),(e=>((0,i.wg)(),(0,i.iD)("td",{key:e.key,scope:"col",class:(0,s.C_)([e.class,e.thClass,e.variant?`table-${e.variant}`:""])},[t.$slots["thead-sub"]?(0,i.WI)(t.$slots,"thead-sub",(0,i.dG)({key:0,items:(0,o.SU)(x)},e)):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.Uk)((0,s.zw)(e.label),1)],64))],2)))),128))])):(0,i.kq)("",!0)]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,o.SU)(C),((n,r)=>((0,i.wg)(),(0,i.iD)(i.HY,{key:r},[(0,i._)("tr",{class:(0,s.C_)(G(n)),onClick:e=>O(n,r,e),onDblclick:e=>R(n,r,e),onMouseenter:e=>P(n,r,e),onMouseleave:e=>L(n,r,e)},[(0,o.SU)(D)?((0,i.wg)(),(0,i.iD)("td",{key:0,class:(0,s.C_)(["b-table-selection-column",{"b-table-sticky-column":(0,o.SU)(d)}])},[(0,i.WI)(t.$slots,"selectCell",{},(()=>[(0,i._)("span",{class:(0,s.C_)(U.value.has(n)?"text-primary":"")},"🗹",2)]))],2)):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,o.SU)(x),(o=>((0,i.wg)(),(0,i.iD)("td",(0,i.dG)({key:o.key},o.tdAttr,{class:W(o,n)}),[t.$slots["cell("+o.key+")"]||t.$slots["cell()"]?(0,i.WI)(t.$slots,t.$slots["cell("+o.key+")"]?"cell("+o.key+")":"cell()",{key:0,value:n[o.key],index:r,item:n,field:o,items:e.items,toggleDetails:()=>j(n),detailsShowing:n._showDetails}):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.Uk)((0,s.zw)(n[o.key]),1)],64))],16)))),128))],42,tf),!0===n._showDetails&&t.$slots["row-details"]?((0,i.wg)(),(0,i.iD)("tr",{key:0,class:(0,s.C_)(G(n))},[(0,i._)("td",{colspan:(0,o.SU)(S)},[(0,i.WI)(t.$slots,"row-details",{item:n,toggleDetails:()=>j(n)})],8,nf)],2)):(0,i.kq)("",!0)],64)))),128)),v.value?((0,i.wg)(),(0,i.iD)("tr",{key:0,class:(0,s.C_)(["b-table-busy-slot",{"b-table-static-busy":0==(0,o.SU)(C).length}])},[(0,i._)("td",{colspan:(0,o.SU)(S)},[(0,i.WI)(t.$slots,"table-busy",{},(()=>[(0,i._)("div",of,[(0,i.Wm)(Ul,{class:"align-middle"}),sf])]))],8,rf)],2)):(0,i.kq)("",!0),(0,o.SU)(f)&&0===(0,o.SU)(C).length?((0,i.wg)(),(0,i.iD)("tr",af,[(0,i._)("td",{colspan:(0,o.SU)(S)},[(0,i.WI)(t.$slots,"empty",{items:(0,o.SU)(C),filtered:(0,o.SU)(E)},(()=>[(0,i.Uk)((0,s.zw)((0,o.SU)(E)?e.emptyFilteredText:e.emptyText),1)]))],8,lf)])):(0,i.kq)("",!0)]),(0,o.SU)(a)?((0,i.wg)(),(0,i.iD)("tfoot",cf,[(0,i._)("tr",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,o.SU)(x),(e=>((0,i.wg)(),(0,i.iD)("th",(0,i.dG)({key:e.key},e.thAttr,{scope:"col",class:[e.class,e.thClass,e.variant?`table-${e.variant}`:""],title:e.headerTitle,abbr:e.headerAbbr,style:e.thStyle,onClick:t=>k(e,t,!0)}),(0,s.zw)(e.label),17,uf)))),128))])])):t.$slots["custom-foot"]?((0,i.wg)(),(0,i.iD)("tfoot",df,[(0,i.WI)(t.$slots,"custom-foot",{fields:(0,o.SU)(x),items:e.items,columns:null==(n=(0,o.SU)(x))?void 0:n.length})])):(0,i.kq)("",!0),t.$slots["table-caption"]?((0,i.wg)(),(0,i.iD)("caption",hf,[(0,i.WI)(t.$slots,"table-caption")])):e.caption?((0,i.wg)(),(0,i.iD)("caption",ff,(0,s.zw)(e.caption),1)):(0,i.kq)("",!0)]})),_:3},16))}}),mf=(0,i.aZ)({__name:"BTbody",props:{variant:null},setup(e){const t=e,n=(0,i.Fl)((()=>({[`thead-${t.variant}`]:void 0!==t.variant})));return(e,t)=>((0,i.wg)(),(0,i.iD)("tbody",{role:"rowgroup",class:(0,s.C_)((0,o.SU)(n))},[(0,i.WI)(e.$slots,"default")],2))}}),gf=["scope","colspan","rowspan","data-label"],vf={key:0},yf=(0,i.aZ)({__name:"BTd",props:{colspan:null,rowspan:null,stackedHeading:null,stickyColumn:{default:!1},variant:null},setup(e){const t=e,n=ya((0,o.Vh)(t,"stickyColumn")),r=(0,i.Fl)((()=>({[`table-${t.variant}`]:void 0!==t.variant,"b-table-sticky-column":n.value,"table-b-table-default":n.value&&!t.variant}))),a=(0,i.Fl)((()=>t.colspan?"colspan":t.rowspan?"rowspan":"col"));return(t,n)=>((0,i.wg)(),(0,i.iD)("td",{role:"cell",scope:(0,o.SU)(a),class:(0,s.C_)((0,o.SU)(r)),colspan:e.colspan,rowspan:e.rowspan,"data-label":e.stackedHeading},[e.stackedHeading?((0,i.wg)(),(0,i.iD)("div",vf,[(0,i.WI)(t.$slots,"default")])):(0,i.WI)(t.$slots,"default",{key:1})],10,gf))}}),bf=(0,i.aZ)({__name:"BTfoot",props:{variant:null},setup(e){const t=e,n=(0,i.Fl)((()=>({[`table-${t.variant}`]:void 0!==t.variant})));return(e,t)=>((0,i.wg)(),(0,i.iD)("tfoot",{role:"rowgroup",class:(0,s.C_)((0,o.SU)(n))},[(0,i.WI)(e.$slots,"default")],2))}}),_f=["scope","colspan","rowspan","data-label"],wf={key:0},xf=(0,i.aZ)({__name:"BTh",props:{colspan:null,rowspan:null,stackedHeading:null,stickyColumn:{default:!1},variant:null},setup(e){const t=e,n=ya((0,o.Vh)(t,"stickyColumn")),r=(0,i.Fl)((()=>({[`table-${t.variant}`]:void 0!==t.variant,"b-table-sticky-column":n.value,"table-b-table-default":n.value&&void 0===t.variant}))),a=(0,i.Fl)((()=>t.colspan?"colspan":t.rowspan?"rowspan":"col"));return(t,n)=>((0,i.wg)(),(0,i.iD)("th",{role:"columnheader",scope:(0,o.SU)(a),class:(0,s.C_)((0,o.SU)(r)),colspan:e.colspan,rowspan:e.rowspan,"data-label":e.stackedHeading},[void 0!==e.stackedHeading?((0,i.wg)(),(0,i.iD)("div",wf,[(0,i.WI)(t.$slots,"default")])):(0,i.WI)(t.$slots,"default",{key:1})],10,_f))}}),Sf=(0,i.aZ)({__name:"BThead",props:{variant:null},setup(e){const t=e,n=(0,i.Fl)((()=>({[`table-${t.variant}`]:void 0!==t.variant})));return(e,t)=>((0,i.wg)(),(0,i.iD)("thead",{role:"rowgroup",class:(0,s.C_)((0,o.SU)(n))},[(0,i.WI)(e.$slots,"default")],2))}}),Ef=(0,i.aZ)({__name:"BTr",props:{variant:null},setup(e){const t=e,n=(0,i.Fl)((()=>({[`table-${t.variant}`]:void 0!==t.variant})));return(e,t)=>((0,i.wg)(),(0,i.iD)("tr",{role:"row",class:(0,s.C_)((0,o.SU)(n))},[(0,i.WI)(e.$slots,"default")],2))}}),Mf=["id","data-bs-target","aria-controls","aria-selected","onClick"],Tf=Symbol(),Cf=(0,i.aZ)({__name:"BTabs",props:{activeNavItemClass:null,activeTabClass:null,align:null,card:{default:!1},contentClass:null,end:{default:!1},fill:{default:!1},id:null,justified:{default:!1},lazy:{default:!1},navClass:null,navWrapperClass:null,noFade:{default:!1},noNavStyle:{default:!1},pills:{default:!1},small:{default:!1},tag:{default:"div"},vertical:{default:!1},modelValue:{default:-1}},emits:["update:modelValue","activate-tab","click"],setup(e,{emit:t}){const n=e,r=ya((0,o.Vh)(n,"card")),l=ya((0,o.Vh)(n,"end")),c=ya((0,o.Vh)(n,"fill")),u=ya((0,o.Vh)(n,"justified")),d=ya((0,o.Vh)(n,"lazy")),h=ya((0,o.Vh)(n,"noFade")),f=ya((0,o.Vh)(n,"noNavStyle")),p=ya((0,o.Vh)(n,"pills")),m=ya((0,o.Vh)(n,"small")),g=ya((0,o.Vh)(n,"vertical")),v=(0,i.Rr)(),y=(0,o.iH)(n.modelValue),b=(0,o.iH)(""),_=(0,i.Fl)({get:()=>y.value,set:e=>{y.value=e,w.value.length>0&&e>=0&&e<w.value.length?b.value=w.value[e].buttonId:b.value="",t("update:modelValue",e)}}),w=(0,i.Fl)((()=>{let e=[];return v.default&&(e=C(v).map(((e,t)=>{e.props||(e.props={});const r=e.props["button-id"]||sa("tab"),i=e.props.id||sa(),o=_.value>-1?t===_.value:""===e.props.active,s=e.props["title-item-class"],a=e.props["title-link-attributes"];return{buttonId:r,contentId:i,active:o,disabled:""===e.props.disabled||!0===e.props.disabled,navItemClasses:[{active:o,disabled:""===e.props.disabled||!0===e.props.disabled},o&&n.activeNavItemClass?n.activeNavItemClass:null,e.props["title-link-class"]],tabClasses:[{fade:!h.value},o&&n.activeTabClass?n.activeTabClass:null],target:`#${i}`,title:e.props.title,titleItemClass:s,titleLinkAttributes:a,onClick:e.props.onClick,tab:e}}))),e})),x=(0,i.Fl)((()=>!((null==w?void 0:w.value)&&w.value.length>0))),S=(0,i.Fl)((()=>({"d-flex":g.value,"align-items-start":g.value}))),E=(0,i.Fl)((()=>({"nav-pills":p.value,"flex-column me-3":g.value,[`justify-content-${n.align}`]:void 0!==n.align,"nav-fill":c.value,"card-header-tabs":r.value,"nav-justified":u.value,"nav-tabs":!f.value&&!p.value,small:m.value}))),M=e=>{let r=!1;if(void 0!==e&&e>-1&&e<w.value.length&&!w.value[e].disabled&&(_.value<0||w.value[e].buttonId!==b.value)){const n=new ws("activate-tab",{cancelable:!0,vueTarget:this});t("activate-tab",e,_.value,n),n.defaultPrevented||(_.value=e,r=!0)}return!r&&n.modelValue!==_.value&&t("update:modelValue",_.value),r},T=(e,t)=>{var n;M(t),t>=0&&!w.value[t].disabled&&(null==(n=w.value[t])?void 0:n.onClick)&&"function"==typeof w.value[t].onClick&&w.value[t].onClick(e)},C=e=>e&&e.default?e.default().reduce(((e,t)=>("symbol"==typeof t.type?e=e.concat(t.children):e.push(t),e)),[]).filter((e=>{var t;return"BTab"===(null==(t=e.type)?void 0:t.__name)})):[];return M(y.value),(0,i.YP)((()=>n.modelValue),((e,t)=>{if(e===t)return;if(e=Math.max(e,-1),t=Math.max(t,-1),w.value.length<=0)return void(_.value=-1);const n=e>t;let r=e;const i=w.value.length-1;for(;r>=0&&r<=i&&w.value[r].disabled;)r+=n?1:-1;r<0?M(0):r>=w.value.length?M(w.value.length-1):M(r)})),(0,i.YP)((()=>w.value),(()=>{let e=w.value.map((e=>e.active&&!e.disabled)).lastIndexOf(!0);e<0&&(_.value>=w.value.length?e=w.value.map((e=>!e.disabled)).lastIndexOf(!0):w.value[_.value]&&!w.value[_.value].disabled&&(e=_.value)),e<0&&(e=w.value.map((e=>!e.disabled)).indexOf(!0)),w.value.forEach(((t,n)=>t.active=n===e)),M(e)})),(0,i.bv)((()=>{if(_.value<0&&w.value.length>0&&!w.value.some((e=>e.active))){const e=w.value.map((e=>!e.disabled)).indexOf(!0);M(e>=0?e:-1)}})),(0,i.JJ)(Tf,{lazy:d.value,card:r.value}),(t,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(e.tag),{id:e.id,class:(0,s.C_)(["tabs",(0,o.SU)(S)])},{default:(0,i.w5)((()=>[(0,o.SU)(l)?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,s.C_)(["tab-content",e.contentClass])},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,o.SU)(w),(({tab:e,contentId:t,tabClasses:n,active:r},o)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(e),{id:t,key:o,class:(0,s.C_)(n),active:r},null,8,["id","class","active"])))),128)),(0,o.SU)(x)?((0,i.wg)(),(0,i.iD)("div",{key:"bv-empty-tab",class:(0,s.C_)(["tab-pane active",{"card-body":(0,o.SU)(r)}])},[(0,i.WI)(t.$slots,"empty")],2)):(0,i.kq)("",!0)],2)):(0,i.kq)("",!0),(0,i._)("div",{class:(0,s.C_)([e.navWrapperClass,{"card-header":(0,o.SU)(r),"ms-auto":e.vertical&&(0,o.SU)(l)}])},[(0,i._)("ul",{class:(0,s.C_)(["nav",[(0,o.SU)(E),e.navClass]]),role:"tablist"},[(0,i.WI)(t.$slots,"tabs-start"),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,o.SU)(w),(({tab:e,buttonId:t,contentId:n,navItemClasses:r,active:o,target:l},c)=>((0,i.wg)(),(0,i.iD)("li",{key:c,class:(0,s.C_)(["nav-item",e.props["title-item-class"]])},[(0,i._)("button",(0,i.dG)({id:t,class:["nav-link",r],"data-bs-toggle":"tab","data-bs-target":l,role:"tab","aria-controls":n,"aria-selected":o},e.props["title-link-attributes"],{onClick:(0,a.iM)((e=>T(e,c)),["stop","prevent"])}),[e.children&&e.children.title?((0,i.wg)(),(0,i.j4)((0,i.LL)(e.children.title),{key:0})):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.Uk)((0,s.zw)(e.props.title),1)],64))],16,Mf)],2)))),128)),(0,i.WI)(t.$slots,"tabs-end")],2)],2),(0,o.SU)(l)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",{key:1,class:(0,s.C_)(["tab-content",e.contentClass])},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,o.SU)(w),(({tab:e,contentId:t,tabClasses:n,active:r},o)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(e),{id:t,key:o,class:(0,s.C_)(n),active:r},null,8,["id","class","active"])))),128)),(0,o.SU)(x)?((0,i.wg)(),(0,i.iD)("div",{key:"bv-empty-tab",class:(0,s.C_)(["tab-pane active",{"card-body":(0,o.SU)(r)}])},[(0,i.WI)(t.$slots,"empty")],2)):(0,i.kq)("",!0)],2))])),_:3},8,["id","class"]))}}),Af=(0,i.aZ)({__name:"BTab",props:{id:null,title:null,active:{default:!1},buttonId:{default:void 0},disabled:{default:!1},lazy:{default:void 0},lazyOnce:{default:void 0},noBody:{type:[Boolean,String],default:!1},tag:{default:"div"},titleItemClass:{default:void 0},titleLinkAttributes:{default:void 0},titleLinkClass:{default:void 0}},setup(e){const t=e,n=(0,o.iH)(!1),r=ya((0,o.Vh)(t,"active")),a=ya((0,o.Vh)(t,"disabled")),l=ya((0,o.Vh)(t,void 0!==t.lazyOnce?"lazyOnce":"lazy")),c=(0,i.f3)(Tf,null),u=(0,i.Fl)((()=>(null==c?void 0:c.lazy)||l.value)),d=(0,i.Fl)((()=>void 0!==t.lazyOnce)),h=(0,i.Fl)((()=>r.value&&!a.value)),f=(0,i.Fl)((()=>{const e=u.value&&d.value&&n.value;return h.value||!u.value||e})),p=(0,i.Fl)((()=>({active:r.value,show:r.value,"card-body":(null==c?void 0:c.card)&&!1===t.noBody})));return(0,i.YP)((()=>f.value),(e=>{e&&!n.value&&(n.value=!0)})),(t,n)=>((0,i.wg)(),(0,i.j4)((0,i.LL)(e.tag),{id:e.id,class:(0,s.C_)(["tab-pane",(0,o.SU)(p)]),role:"tabpanel","aria-labelledby":"profile-tab"},{default:(0,i.w5)((()=>[(0,o.SU)(f)?(0,i.WI)(t.$slots,"default",{key:0}):(0,i.kq)("",!0)])),_:3},8,["id","class"]))}}),kf={BAccordion:Va,BAccordionItem:cl,BNavText:Kd,BAlert:hl,BAvatar:bl,BAvatarGroup:pl,BNavForm:Hd,BBadge:Al,BBreadcrumb:Il,BBreadcrumbItem:Pl,BButton:Vl,BButtonGroup:zl,BButtonToolbar:Hl,BCard:Jl,BCardBody:Zl,BCardFooter:Kl,BCardGroup:Ql,BCardHeader:ql,BCardImg:Wl,BCardSubTitle:Xl,BCardText:ec,BCardTitle:Yl,BCarousel:hc,BCarouselSlide:bc,BCloseButton:dl,BCol:Mc,BCollapse:za,BContainer:jc,BDropdown:Gc,BDropdownDivider:qc,BDropdownForm:Jc,BDropdownGroup:nu,BDropdownHeader:su,BDropdownItem:lu,BDropdownItemButton:uu,BDropdownText:fu,BForm:mu,BFormCheckbox:Tu,BFormCheckboxGroup:Ou,BFormFloatingLabel:yu,BFormGroup:Bu,BFormInput:Wu,BFormInvalidFeedback:bu,BFormRadio:qu,BFormRadioGroup:Ku,BFormRow:_u,BFormSelect:rd,BFormSelectOption:Qu,BFormSelectOptionGroup:td,BFormText:wu,BFormTextarea:Sd,BFormTag:od,BFormTags:bd,BFormValidFeedback:xu,BImg:fc,BInputGroup:Od,BInputGroupAddon:Pd,BInputGroupAppend:Ld,BInputGroupPrepend:Dd,BInputGroupText:Rd,BLink:El,BListGroup:Nd,BListGroupItem:Ud,BModal:zd,BNav:jd,BNavbar:Jd,BNavbarBrand:nh,BNavbarNav:rh,BNavbarToggle:oh,BNavItem:qd,BNavItemDropdown:Xd,BOffcanvas:dh,BOverlay:mh,BPagination:kh,BPopover:Ih,BProgress:Fh,BProgressBar:Nh,BRow:jh,BSkeleton:Hh,BSkeletonIcon:Wh,BSkeletonTable:Yh,BSkeletonWrapper:Xh,BSpinner:Ul,BTab:Af,BTable:pf,BTableSimple:Gh,BTbody:mf,BTd:yf,BTfoot:bf,BTh:xf,BThead:Sf,BTr:Ef,BToast:Rc,BToaster:Pc,BToastContainer:Pc,BTabs:Cf,BTransition:Ac,BToastPlugin:zc},Of={install(e,t={}){Object.entries(kf).forEach((([t,n])=>{e.component(t,n)})),Object.entries(il).forEach((([t,n])=>{e.directive(t,n)})),wa(e)}}},1279:function(e){"use strict";var t=e.exports={};t.isIE=function(e){function t(){var e=navigator.userAgent.toLowerCase();return-1!==e.indexOf("msie")||-1!==e.indexOf("trident")||-1!==e.indexOf(" edge/")}if(!t())return!1;if(!e)return!0;var n=function(){var e,t=3,n=document.createElement("div"),r=n.getElementsByTagName("i");do{n.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e"}while(r[0]);return t>4?t:e}();return e===n},t.isLegacyOpera=function(){return!!window.opera}},3141:function(e){"use strict";var t=e.exports={};t.forEach=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n]);if(r)return r}}},8192:function(e,t,n){"use strict";n(1703);var r=n(1279);e.exports=function(e){e=e||{};var t=e.reporter,n=e.batchProcessor,i=e.stateHandler.getState;if(!t)throw new Error("Missing required dependency: reporter.");function o(e,t){function n(){t(e)}if(r.isIE(8))i(e).object={proxy:n},e.attachEvent("onresize",n);else{var o=l(e);if(!o)throw new Error("Element is not detectable by this strategy.");o.contentDocument.defaultView.addEventListener("resize",n)}}function s(t){var n=e.important?" !important; ":"; ";return(t.join(n)+n).trim()}function a(e,o,a){a||(a=o,o=e,e=null),e=e||{};e.debug;function l(o,a){var l=s(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),c=!1,u=window.getComputedStyle(o),d=o.offsetWidth,h=o.offsetHeight;function f(){function n(){if("static"===u.position){o.style.setProperty("position","relative",e.important?"important":"");var n=function(t,n,r,i){function o(e){return e.replace(/[^-\d\.]/g,"")}var s=r[i];"auto"!==s&&"0"!==o(s)&&(t.warn("An element that is positioned static has style."+i+"="+s+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+i+" will be set to 0. Element: ",n),n.style.setProperty(i,"0",e.important?"important":""))};n(t,o,u,"top"),n(t,o,u,"right"),n(t,o,u,"bottom"),n(t,o,u,"left")}}function s(){function e(t,n){if(!t.contentDocument){var r=i(t);return r.checkForObjectDocumentTimeoutId&&window.clearTimeout(r.checkForObjectDocumentTimeoutId),void(r.checkForObjectDocumentTimeoutId=setTimeout((function(){r.checkForObjectDocumentTimeoutId=0,e(t,n)}),100))}n(t.contentDocument)}c||n();var t=this;e(t,(function(e){a(o)}))}""!==u.position&&(n(u),c=!0);var d=document.createElement("object");d.style.cssText=l,d.tabIndex=-1,d.type="text/html",d.setAttribute("aria-hidden","true"),d.onload=s,r.isIE()||(d.data="about:blank"),i(o)&&(o.appendChild(d),i(o).object=d,r.isIE()&&(d.data="about:blank"))}i(o).startSize={width:d,height:h},n?n.add(f):f()}r.isIE(8)?a(o):l(o,a)}function l(e){return i(e).object}function c(e){if(i(e)){var t=l(e);t&&(r.isIE(8)?e.detachEvent("onresize",t.proxy):e.removeChild(t),i(e).checkForObjectDocumentTimeoutId&&window.clearTimeout(i(e).checkForObjectDocumentTimeoutId),delete i(e).object)}}return{makeDetectable:a,addListener:o,uninstall:c}}},2318:function(e,t,n){"use strict";n(1703),n(7658);var r=n(3141).forEach;e.exports=function(e){e=e||{};var t=e.reporter,n=e.batchProcessor,i=e.stateHandler.getState,o=(e.stateHandler.hasState,e.idHandler);if(!n)throw new Error("Missing required dependency: batchProcessor");if(!t)throw new Error("Missing required dependency: reporter.");var s=d(),a="erd_scroll_detection_scrollbar_style",l="erd_scroll_detection_container";function c(e){h(e,a,l)}function u(t){var n=e.important?" !important; ":"; ";return(t.join(n)+n).trim()}function d(){var e=500,t=500,n=document.createElement("div");n.style.cssText=u(["position: absolute","width: "+2*e+"px","height: "+2*t+"px","visibility: hidden","margin: 0","padding: 0"]);var r=document.createElement("div");r.style.cssText=u(["position: absolute","width: "+e+"px","height: "+t+"px","overflow: scroll","visibility: none","top: "+3*-e+"px","left: "+3*-t+"px","visibility: hidden","margin: 0","padding: 0"]),r.appendChild(n),document.body.insertBefore(r,document.body.firstChild);var i=e-r.clientWidth,o=t-r.clientHeight;return document.body.removeChild(r),{width:i,height:o}}function h(e,t,n){function r(n,r){r=r||function(t){e.head.appendChild(t)};var i=e.createElement("style");return i.innerHTML=n,i.id=t,r(i),i}if(!e.getElementById(t)){var i=n+"_animation",o=n+"_animation_active",s="/* Created by the element-resize-detector library. */\n";s+="."+n+" > div::-webkit-scrollbar { "+u(["display: none"])+" }\n\n",s+="."+o+" { "+u(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+i,"animation-name: "+i])+" }\n",s+="@-webkit-keyframes "+i+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }\n",s+="@keyframes "+i+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",r(s)}}function f(e){e.className+=" "+l+"_animation_active"}function p(e,n,r){if(e.addEventListener)e.addEventListener(n,r);else{if(!e.attachEvent)return t.error("[scroll] Don't know how to add event listeners.");e.attachEvent("on"+n,r)}}function m(e,n,r){if(e.removeEventListener)e.removeEventListener(n,r);else{if(!e.detachEvent)return t.error("[scroll] Don't know how to remove event listeners.");e.detachEvent("on"+n,r)}}function g(e){return i(e).container.childNodes[0].childNodes[0].childNodes[0]}function v(e){return i(e).container.childNodes[0].childNodes[0].childNodes[1]}function y(e,t){var n=i(e).listeners;if(!n.push)throw new Error("Cannot add listener to an element that is not detectable.");i(e).listeners.push(t)}function b(e,a,c){function d(){if(e.debug){var n=Array.prototype.slice.call(arguments);if(n.unshift(o.get(a),"Scroll: "),t.log.apply)t.log.apply(null,n);else for(var r=0;r<n.length;r++)t.log(n[r])}}function h(e){function t(e){var t=e.getRootNode&&e.getRootNode().contains(e);return e===e.ownerDocument.body||e.ownerDocument.body.contains(e)||t}return!t(e)||null===window.getComputedStyle(e)}function m(e){var t=i(e).container.childNodes[0],n=window.getComputedStyle(t);return!n.width||-1===n.width.indexOf("px")}function y(){var e=window.getComputedStyle(a),t={};return t.position=e.position,t.width=a.offsetWidth,t.height=a.offsetHeight,t.top=e.top,t.right=e.right,t.bottom=e.bottom,t.left=e.left,t.widthCSS=e.width,t.heightCSS=e.height,t}function b(){var e=y();i(a).startSize={width:e.width,height:e.height},d("Element start size",i(a).startSize)}function _(){i(a).listeners=[]}function w(){if(d("storeStyle invoked."),i(a)){var e=y();i(a).style=e}else d("Aborting because element has been uninstalled")}function x(e,t,n){i(e).lastWidth=t,i(e).lastHeight=n}function S(e){return g(e).childNodes[0]}function E(){return 2*s.width+1}function M(){return 2*s.height+1}function T(e){return e+10+E()}function C(e){return e+10+M()}function A(e){return 2*e+E()}function k(e){return 2*e+M()}function O(e,t,n){var r=g(e),i=v(e),o=T(t),s=C(n),a=A(t),l=k(n);r.scrollLeft=o,r.scrollTop=s,i.scrollLeft=a,i.scrollTop=l}function R(){var e=i(a).container;if(!e){e=document.createElement("div"),e.className=l,e.style.cssText=u(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),i(a).container=e,f(e),a.appendChild(e);var t=function(){i(a).onRendered&&i(a).onRendered()};p(e,"animationstart",t),i(a).onAnimationStart=t}return e}function P(){function n(){var n=i(a).style;if("static"===n.position){a.style.setProperty("position","relative",e.important?"important":"");var r=function(e,t,n,r){function i(e){return e.replace(/[^-\d\.]/g,"")}var o=n[r];"auto"!==o&&"0"!==i(o)&&(e.warn("An element that is positioned static has style."+r+"="+o+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+r+" will be set to 0. Element: ",t),t.style[r]=0)};r(t,a,n,"top"),r(t,a,n,"right"),r(t,a,n,"bottom"),r(t,a,n,"left")}}function r(e,t,n,r){return e=e?e+"px":"0",t=t?t+"px":"0",n=n?n+"px":"0",r=r?r+"px":"0",["left: "+e,"top: "+t,"right: "+r,"bottom: "+n]}if(d("Injecting elements"),i(a)){n();var o=i(a).container;o||(o=R());var c=s.width,h=s.height,f=u(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),m=u(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(r(-(1+c),-(1+h),-h,-c))),g=u(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),v=u(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),y=u(["position: absolute","left: 0","top: 0"]),b=u(["position: absolute","width: 200%","height: 200%"]),_=document.createElement("div"),w=document.createElement("div"),x=document.createElement("div"),S=document.createElement("div"),E=document.createElement("div"),M=document.createElement("div");_.dir="ltr",_.style.cssText=f,_.className=l,w.className=l,w.style.cssText=m,x.style.cssText=g,S.style.cssText=y,E.style.cssText=v,M.style.cssText=b,x.appendChild(S),E.appendChild(M),w.appendChild(x),w.appendChild(E),_.appendChild(w),o.appendChild(_),p(x,"scroll",T),p(E,"scroll",C),i(a).onExpandScroll=T,i(a).onShrinkScroll=C}else d("Aborting because element has been uninstalled");function T(){var e=i(a);e&&e.onExpand?e.onExpand():d("Aborting expand scroll handler: element has been uninstalled")}function C(){var e=i(a);e&&e.onShrink?e.onShrink():d("Aborting shrink scroll handler: element has been uninstalled")}}function L(){function s(t,n,r){var i=S(t),o=T(n),s=C(r);i.style.setProperty("width",o+"px",e.important?"important":""),i.style.setProperty("height",s+"px",e.important?"important":"")}function l(r){var l=a.offsetWidth,u=a.offsetHeight,h=l!==i(a).lastWidth||u!==i(a).lastHeight;d("Storing current size",l,u),x(a,l,u),n.add(0,(function(){if(h)if(i(a))if(c()){if(e.debug){var n=a.offsetWidth,r=a.offsetHeight;n===l&&r===u||t.warn(o.get(a),"Scroll: Size changed before updating detector elements.")}s(a,l,u)}else d("Aborting because element container has not been initialized");else d("Aborting because element has been uninstalled")})),n.add(1,(function(){i(a)?c()?O(a,l,u):d("Aborting because element container has not been initialized"):d("Aborting because element has been uninstalled")})),h&&r&&n.add(2,(function(){i(a)?c()?r():d("Aborting because element container has not been initialized"):d("Aborting because element has been uninstalled")}))}function c(){return!!i(a).container}function u(){function e(){return void 0===i(a).lastNotifiedWidth}d("notifyListenersIfNeeded invoked");var t=i(a);return e()&&t.lastWidth===t.startSize.width&&t.lastHeight===t.startSize.height?d("Not notifying: Size is the same as the start size, and there has been no notification yet."):t.lastWidth===t.lastNotifiedWidth&&t.lastHeight===t.lastNotifiedHeight?d("Not notifying: Size already notified"):(d("Current size not notified, notifying..."),t.lastNotifiedWidth=t.lastWidth,t.lastNotifiedHeight=t.lastHeight,void r(i(a).listeners,(function(e){e(a)})))}function h(){if(d("startanimation triggered."),m(a))d("Ignoring since element is still unrendered...");else{d("Element rendered.");var e=g(a),t=v(a);0!==e.scrollLeft&&0!==e.scrollTop&&0!==t.scrollLeft&&0!==t.scrollTop||(d("Scrollbars out of sync. Updating detector elements..."),l(u))}}function f(){d("Scroll detected."),m(a)?d("Scroll event fired while unrendered. Ignoring..."):l(u)}if(d("registerListenersAndPositionElements invoked."),i(a)){i(a).onRendered=h,i(a).onExpand=f,i(a).onShrink=f;var p=i(a).style;s(a,p.width,p.height)}else d("Aborting because element has been uninstalled")}function D(){if(d("finalizeDomMutation invoked."),i(a)){var e=i(a).style;x(a,e.width,e.height),O(a,e.width,e.height)}else d("Aborting because element has been uninstalled")}function I(){c(a)}function N(){d("Installing..."),_(),b(),n.add(0,w),n.add(1,P),n.add(2,L),n.add(3,D),n.add(4,I)}c||(c=a,a=e,e=null),e=e||{},d("Making detectable..."),h(a)?(d("Element is detached"),R(),d("Waiting until element is attached..."),i(a).onRendered=function(){d("Element is now attached"),N()}):N()}function _(e){var t=i(e);t&&(t.onExpandScroll&&m(g(e),"scroll",t.onExpandScroll),t.onShrinkScroll&&m(v(e),"scroll",t.onShrinkScroll),t.onAnimationStart&&m(t.container,"animationstart",t.onAnimationStart),t.container&&e.removeChild(t.container))}return c(window.document),{makeDetectable:b,addListener:y,uninstall:_,initDocument:c}}},7024:function(e,t,n){"use strict";n(7658),n(1703);var r=n(3141).forEach,i=n(9945),o=n(9499),s=n(9484),a=n(9141),l=n(2271),c=n(1279),u=n(2217),d=n(6795),h=n(8192),f=n(2318);function p(e){return Array.isArray(e)||void 0!==e.length}function m(e){if(Array.isArray(e))return e;var t=[];return r(e,(function(e){t.push(e)})),t}function g(e){return e&&1===e.nodeType}function v(e,t,n){var r=e[t];return void 0!==r&&null!==r||void 0===n?r:n}e.exports=function(e){var t;if(e=e||{},e.idHandler)t={get:function(t){return e.idHandler.get(t,!0)},set:e.idHandler.set};else{var n=s(),y=a({idGenerator:n,stateHandler:d});t=y}var b=e.reporter;if(!b){var _=!1===b;b=l(_)}var w=v(e,"batchProcessor",u({reporter:b})),x={};x.callOnAdd=!!v(e,"callOnAdd",!0),x.debug=!!v(e,"debug",!1);var S,E=o(t),M=i({stateHandler:d}),T=v(e,"strategy","object"),C=v(e,"important",!1),A={reporter:b,batchProcessor:w,stateHandler:d,idHandler:t,important:C};if("scroll"===T&&(c.isLegacyOpera()?(b.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),T="object"):c.isIE(9)&&(b.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),T="object")),"scroll"===T)S=f(A);else{if("object"!==T)throw new Error("Invalid strategy name: "+T);S=h(A)}var k={};function O(e,n,i){function o(e){var t=E.get(e);r(t,(function(t){t(e)}))}function s(e,t,n){E.add(t,n),e&&n(t)}if(i||(i=n,n=e,e={}),!n)throw new Error("At least one element required.");if(!i)throw new Error("Listener required.");if(g(n))n=[n];else{if(!p(n))return b.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");n=m(n)}var a=0,l=v(e,"callOnAdd",x.callOnAdd),c=v(e,"onReady",(function(){})),u=v(e,"debug",x.debug);r(n,(function(e){d.getState(e)||(d.initState(e),t.set(e));var h=t.get(e);if(u&&b.log("Attaching listener to element",h,e),!M.isDetectable(e))return u&&b.log(h,"Not detectable."),M.isBusy(e)?(u&&b.log(h,"System busy making it detectable"),s(l,e,i),k[h]=k[h]||[],void k[h].push((function(){a++,a===n.length&&c()}))):(u&&b.log(h,"Making detectable..."),M.markBusy(e,!0),S.makeDetectable({debug:u,important:C},e,(function(e){if(u&&b.log(h,"onElementDetectable"),d.getState(e)){M.markAsDetectable(e),M.markBusy(e,!1),S.addListener(e,o),s(l,e,i);var t=d.getState(e);if(t&&t.startSize){var f=e.offsetWidth,p=e.offsetHeight;t.startSize.width===f&&t.startSize.height===p||o(e)}k[h]&&r(k[h],(function(e){e()}))}else u&&b.log(h,"Element uninstalled before being detectable.");delete k[h],a++,a===n.length&&c()})));u&&b.log(h,"Already detecable, adding listener."),s(l,e,i),a++})),a===n.length&&c()}function R(e){if(!e)return b.error("At least one element is required.");if(g(e))e=[e];else{if(!p(e))return b.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");e=m(e)}r(e,(function(e){E.removeAllListeners(e),S.uninstall(e),d.cleanState(e)}))}function P(e){S.initDocument&&S.initDocument(e)}return{listenTo:O,removeListener:E.removeListener,removeAllListeners:E.removeAllListeners,uninstall:R,initDocument:P}}},9945:function(e){"use strict";e.exports=function(e){var t=e.stateHandler.getState;function n(e){var n=t(e);return n&&!!n.isDetectable}function r(e){t(e).isDetectable=!0}function i(e){return!!t(e).busy}function o(e,n){t(e).busy=!!n}return{isDetectable:n,markAsDetectable:r,isBusy:i,markBusy:o}}},9484:function(e){"use strict";e.exports=function(){var e=1;function t(){return e++}return{generate:t}}},9141:function(e,t,n){"use strict";n(1703),e.exports=function(e){var t=e.idGenerator,n=e.stateHandler.getState;function r(e){var t=n(e);return t&&void 0!==t.id?t.id:null}function i(e){var r=n(e);if(!r)throw new Error("setId required the element to have a resize detection state.");var i=t.generate();return r.id=i,i}return{get:r,set:i}}},9499:function(e,t,n){"use strict";n(7658),e.exports=function(e){var t={};function n(n){var r=e.get(n);return void 0===r?[]:t[r]||[]}function r(n,r){var i=e.get(n);t[i]||(t[i]=[]),t[i].push(r)}function i(e,t){for(var r=n(e),i=0,o=r.length;i<o;++i)if(r[i]===t){r.splice(i,1);break}}function o(e){var t=n(e);t&&(t.length=0)}return{get:n,add:r,removeListener:i,removeAllListeners:o}}},2271:function(e){"use strict";e.exports=function(e){function t(){}var n={log:t,warn:t,error:t};if(!e&&window.console){var r=function(e,t){e[t]=function(){var e=console[t];if(e.apply)e.apply(console,arguments);else for(var n=0;n<arguments.length;n++)e(arguments[n])}};r(n,"log"),r(n,"warn"),r(n,"error")}return n}},6795:function(e){"use strict";var t="_erd";function n(e){return e[t]={},r(e)}function r(e){return e[t]}function i(e){delete e[t]}e.exports={initState:n,getState:r,cleanState:i}},3624:function(e,t,n){function r(e){var t=Object.create(null);return{on:function(n,r,i){if("function"!==typeof r)throw new Error("callback is expected to be a function");var o=t[n];return o||(o=t[n]=[]),o.push({callback:r,ctx:i}),e},off:function(n,r){var i="undefined"===typeof n;if(i)return t=Object.create(null),e;if(t[n]){var o="function"!==typeof r;if(o)delete t[n];else for(var s=t[n],a=0;a<s.length;++a)s[a].callback===r&&s.splice(a,1)}return e},fire:function(n){var r,i=t[n];if(!i)return e;arguments.length>1&&(r=Array.prototype.splice.call(arguments,1));for(var o=0;o<i.length;++o){var s=i[o];s.callback.apply(s.ctx,r)}return e}}}function i(e){if(!e)throw new Error("Eventify cannot use falsy object as events subject");for(var t=["on","fire","off"],n=0;n<t.length;++n)if(e.hasOwnProperty(t[n]))throw new Error("Subject cannot be eventified, since it already has property '"+t[n]+"'")}n(1703),n(7658),e.exports=function(e){i(e);var t=r(e);return e.on=t.on,e.off=t.off,e.fire=t.fire,e}},6334:function(e,t,n){n(1703),n(7658),e.exports=i,e.exports.simulator=n(2029);var r=n(3624);function i(e,t){if(!e)throw new Error("Graph structure cannot be undefined");var i=t&&t.createSimulator||n(2029),s=i(t);if(Array.isArray(t))throw new Error("Physics settings is expected to be an object");var a=e.version>19?P:R;t&&"function"===typeof t.nodeMass&&(a=t.nodeMass);var l=new Map,c={},u=0,d=s.settings.springTransform||o;x(),b();var h=!1,f={step:function(){if(0===u)return p(!0),!0;var e=s.step();f.lastMove=e,f.fire("step");var t=e/u,n=t<=.01;return p(n),n},getNodePosition:function(e){return O(e).pos},setNodePosition:function(e){var t=O(e);t.setPosition.apply(t,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(e){var t=c[e];if(t)return{from:t.from.pos,to:t.to.pos}},getGraphRect:function(){return s.getBBox()},forEachBody:m,pinNode:function(e,t){var n=O(e.id);n.isPinned=!!t},isNodePinned:function(e){return O(e.id).isPinned},dispose:function(){e.off("changed",w),f.fire("disposed")},getBody:y,getSpring:v,getForceVectorLength:g,simulator:s,graph:e,lastMove:0};return r(f),f;function p(e){h!==e&&(h=e,_(e))}function m(e){l.forEach(e)}function g(){var e=0,t=0;return m((function(n){e+=Math.abs(n.force.x),t+=Math.abs(n.force.y)})),Math.sqrt(e*e+t*t)}function v(t,n){var r;if(void 0===n)r="object"!==typeof t?t:t.id;else{var i=e.hasLink(t,n);if(!i)return;r=i.id}return c[r]}function y(e){return l.get(e)}function b(){e.on("changed",w)}function _(e){f.fire("stable",e)}function w(t){for(var n=0;n<t.length;++n){var r=t[n];"add"===r.changeType?(r.node&&S(r.node.id),r.link&&M(r.link)):"remove"===r.changeType&&(r.node&&E(r.node),r.link&&T(r.link))}u=e.getNodesCount()}function x(){u=0,e.forEachNode((function(e){S(e.id),u+=1})),e.forEachLink(M)}function S(t){var n=l.get(t);if(!n){var r=e.getNode(t);if(!r)throw new Error("initBody() was called with unknown node id");var i=r.position;if(!i){var o=C(r);i=s.getBestNewBodyPosition(o)}n=s.addBodyAt(i),n.id=t,l.set(t,n),A(t),k(r)&&(n.isPinned=!0)}}function E(e){var t=e.id,n=l.get(t);n&&(l.delete(t),s.removeBody(n))}function M(e){A(e.fromId),A(e.toId);var t=l.get(e.fromId),n=l.get(e.toId),r=s.addSpring(t,n,e.length);d(e,r),c[e.id]=r}function T(t){var n=c[t.id];if(n){var r=e.getNode(t.fromId),i=e.getNode(t.toId);r&&A(r.id),i&&A(i.id),delete c[t.id],s.removeSpring(n)}}function C(e){var t=[];if(!e.links)return t;for(var n=Math.min(e.links.length,2),r=0;r<n;++r){var i=e.links[r],o=i.fromId!==e.id?l.get(i.fromId):l.get(i.toId);o&&o.pos&&t.push(o)}return t}function A(e){var t=l.get(e);if(t.mass=a(e),Number.isNaN(t.mass))throw new Error("Node mass should be a number")}function k(e){return e&&(e.isPinned||e.data&&e.data.isPinned)}function O(e){var t=l.get(e);return t||(S(e),t=l.get(e)),t}function R(t){var n=e.getLinks(t);return n?1+n.length/3:1}function P(t){var n=e.getLinks(t);return n?1+n.size/3:1}}function o(){}},9848:function(e,t,n){n(7658);const r=n(9468);e.exports=function(e){return t;function t(t,n){let i=n&&n.indent||0,o=n&&void 0!==n.join?n.join:"\n",s=Array(i+1).join(" "),a=[];for(let l=0;l<e;++l){let e=r(l),n=0===l?"":s;a.push(n+t.replace(/{var}/g,e))}return a.join(o)}}},9411:function(e,t,n){e.exports=i,e.exports.generateFunctionBody=o;const r=n(9848);function i(e){let t=o(e);return new Function("bodies","settings","random",t)}function o(e){let t=r(e),n=`\n  var boundingBox = {\n    ${t("min_{var}: 0, max_{var}: 0,",{indent:4})}\n  };\n\n  return {\n    box: boundingBox,\n\n    update: updateBoundingBox,\n\n    reset: resetBoundingBox,\n\n    getBestNewPosition: function (neighbors) {\n      var ${t("base_{var} = 0",{join:", "})};\n\n      if (neighbors.length) {\n        for (var i = 0; i < neighbors.length; ++i) {\n          let neighborPos = neighbors[i].pos;\n          ${t("base_{var} += neighborPos.{var};",{indent:10})}\n        }\n\n        ${t("base_{var} /= neighbors.length;",{indent:8})}\n      } else {\n        ${t("base_{var} = (boundingBox.min_{var} + boundingBox.max_{var}) / 2;",{indent:8})}\n      }\n\n      var springLength = settings.springLength;\n      return {\n        ${t("{var}: base_{var} + (random.nextDouble() - 0.5) * springLength,",{indent:8})}\n      };\n    }\n  };\n\n  function updateBoundingBox() {\n    var i = bodies.length;\n    if (i === 0) return; // No bodies - no borders.\n\n    ${t("var max_{var} = -Infinity;",{indent:4})}\n    ${t("var min_{var} = Infinity;",{indent:4})}\n\n    while(i--) {\n      // this is O(n), it could be done faster with quadtree, if we check the root node bounds\n      var bodyPos = bodies[i].pos;\n      ${t("if (bodyPos.{var} < min_{var}) min_{var} = bodyPos.{var};",{indent:6})}\n      ${t("if (bodyPos.{var} > max_{var}) max_{var} = bodyPos.{var};",{indent:6})}\n    }\n\n    ${t("boundingBox.min_{var} = min_{var};",{indent:4})}\n    ${t("boundingBox.max_{var} = max_{var};",{indent:4})}\n  }\n\n  function resetBoundingBox() {\n    ${t("boundingBox.min_{var} = boundingBox.max_{var} = 0;",{indent:4})}\n  }\n`;return n}},792:function(e,t,n){const r=n(9848);function i(e,t){let n=o(e,t),{Body:r}=new Function(n)();return r}function o(e,t){let n=`\n${a(e,t)}\n${s(e,t)}\nreturn {Body: Body, Vector: Vector};\n`;return n}function s(e){let t=r(e),n=t("{var}",{join:", "});return`\nfunction Body(${n}) {\n  this.isPinned = false;\n  this.pos = new Vector(${n});\n  this.force = new Vector();\n  this.velocity = new Vector();\n  this.mass = 1;\n\n  this.springCount = 0;\n  this.springLength = 0;\n}\n\nBody.prototype.reset = function() {\n  this.force.reset();\n  this.springCount = 0;\n  this.springLength = 0;\n}\n\nBody.prototype.setPosition = function (${n}) {\n  ${t("this.pos.{var} = {var} || 0;",{indent:2})}\n};`}function a(e,t){let n=r(e),i="";t&&(i=`${n("\n   var v{var};\nObject.defineProperty(this, '{var}', {\n  set: function(v) { \n    if (!Number.isFinite(v)) throw new Error('Cannot set non-numbers to {var}');\n    v{var} = v; \n  },\n  get: function() { return v{var}; }\n});")}`);let o=n("{var}",{join:", "});return`function Vector(${o}) {\n  ${i}\n    if (typeof arguments[0] === 'object') {\n      // could be another vector\n      let v = arguments[0];\n      ${n('if (!Number.isFinite(v.{var})) throw new Error("Expected value is not a finite number at Vector constructor ({var})");',{indent:4})}\n      ${n("this.{var} = v.{var};",{indent:4})}\n    } else {\n      ${n('this.{var} = typeof {var} === "number" ? {var} : 0;',{indent:4})}\n    }\n  }\n  \n  Vector.prototype.reset = function () {\n    ${n("this.{var} = ",{join:""})}0;\n  };`}e.exports=i,e.exports.generateCreateBodyFunctionBody=o,e.exports.getVectorCode=a,e.exports.getBodyCode=s},7738:function(e,t,n){const r=n(9848);function i(e){let t=o(e);return new Function("options",t)}function o(e){let t=r(e),n=`\n  if (!Number.isFinite(options.dragCoefficient)) throw new Error('dragCoefficient is not a finite number');\n\n  return {\n    update: function(body) {\n      ${t("body.force.{var} -= options.dragCoefficient * body.velocity.{var};",{indent:6})}\n    }\n  };\n`;return n}e.exports=i,e.exports.generateCreateDragForceFunctionBody=o},9895:function(e,t,n){const r=n(9848);function i(e){let t=o(e);return new Function("options","random",t)}function o(e){let t=r(e),n=`\n  if (!Number.isFinite(options.springCoefficient)) throw new Error('Spring coefficient is not a number');\n  if (!Number.isFinite(options.springLength)) throw new Error('Spring length is not a number');\n\n  return {\n    /**\n     * Updates forces acting on a spring\n     */\n    update: function (spring) {\n      var body1 = spring.from;\n      var body2 = spring.to;\n      var length = spring.length < 0 ? options.springLength : spring.length;\n      ${t("var d{var} = body2.pos.{var} - body1.pos.{var};",{indent:6})}\n      var r = Math.sqrt(${t("d{var} * d{var}",{join:" + "})});\n\n      if (r === 0) {\n        ${t("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:8})}\n        r = Math.sqrt(${t("d{var} * d{var}",{join:" + "})});\n      }\n\n      var d = r - length;\n      var coefficient = ((spring.coefficient > 0) ? spring.coefficient : options.springCoefficient) * d / r;\n\n      ${t("body1.force.{var} += coefficient * d{var}",{indent:6})};\n      body1.springCount += 1;\n      body1.springLength += r;\n\n      ${t("body2.force.{var} -= coefficient * d{var}",{indent:6})};\n      body2.springCount += 1;\n      body2.springLength += r;\n    }\n  };\n`;return n}e.exports=i,e.exports.generateCreateSpringForceFunctionBody=o},7892:function(e,t,n){const r=n(9848);function i(e){let t=o(e);return new Function("bodies","timeStep","adaptiveTimeStepWeight",t)}function o(e){let t=r(e),n=`\n  var length = bodies.length;\n  if (length === 0) return 0;\n\n  ${t("var d{var} = 0, t{var} = 0;",{indent:2})}\n\n  for (var i = 0; i < length; ++i) {\n    var body = bodies[i];\n    if (body.isPinned) continue;\n\n    if (adaptiveTimeStepWeight && body.springCount) {\n      timeStep = (adaptiveTimeStepWeight * body.springLength/body.springCount);\n    }\n\n    var coeff = timeStep / body.mass;\n\n    ${t("body.velocity.{var} += coeff * body.force.{var};",{indent:4})}\n    ${t("var v{var} = body.velocity.{var};",{indent:4})}\n    var v = Math.sqrt(${t("v{var} * v{var}",{join:" + "})});\n\n    if (v > 1) {\n      // We normalize it so that we move within timeStep range. \n      // for the case when v <= 1 - we let velocity to fade out.\n      ${t("body.velocity.{var} = v{var} / v;",{indent:6})}\n    }\n\n    ${t("d{var} = timeStep * body.velocity.{var};",{indent:4})}\n\n    ${t("body.pos.{var} += d{var};",{indent:4})}\n\n    ${t("t{var} += Math.abs(d{var});",{indent:4})}\n  }\n\n  return (${t("t{var} * t{var}",{join:" + "})})/length;\n`;return n}e.exports=i,e.exports.generateIntegratorFunctionBody=o},6069:function(e,t,n){n(7658);const r=n(9848),i=n(9468);function o(e){let t=s(e);return new Function(t)()}function s(e){let t=r(e),n=Math.pow(2,e),o=`\n${d()}\n${u(e)}\n${a(e)}\n${c(e)}\n${l(e)}\n\nfunction createQuadTree(options, random) {\n  options = options || {};\n  options.gravity = typeof options.gravity === 'number' ? options.gravity : -1;\n  options.theta = typeof options.theta === 'number' ? options.theta : 0.8;\n\n  var gravity = options.gravity;\n  var updateQueue = [];\n  var insertStack = new InsertStack();\n  var theta = options.theta;\n\n  var nodesCache = [];\n  var currentInCache = 0;\n  var root = newNode();\n\n  return {\n    insertBodies: insertBodies,\n\n    /**\n     * Gets root node if it is present\n     */\n    getRoot: function() {\n      return root;\n    },\n\n    updateBodyForce: update,\n\n    options: function(newOptions) {\n      if (newOptions) {\n        if (typeof newOptions.gravity === 'number') {\n          gravity = newOptions.gravity;\n        }\n        if (typeof newOptions.theta === 'number') {\n          theta = newOptions.theta;\n        }\n\n        return this;\n      }\n\n      return {\n        gravity: gravity,\n        theta: theta\n      };\n    }\n  };\n\n  function newNode() {\n    // To avoid pressure on GC we reuse nodes.\n    var node = nodesCache[currentInCache];\n    if (node) {\n${f("      node.")}\n      node.body = null;\n      node.mass = ${t("node.mass_{var} = ",{join:""})}0;\n      ${t("node.min_{var} = node.max_{var} = ",{join:""})}0;\n    } else {\n      node = new QuadNode();\n      nodesCache[currentInCache] = node;\n    }\n\n    ++currentInCache;\n    return node;\n  }\n\n  function update(sourceBody) {\n    var queue = updateQueue;\n    var v;\n    ${t("var d{var};",{indent:4})}\n    var r; \n    ${t("var f{var} = 0;",{indent:4})}\n    var queueLength = 1;\n    var shiftIdx = 0;\n    var pushIdx = 1;\n\n    queue[0] = root;\n\n    while (queueLength) {\n      var node = queue[shiftIdx];\n      var body = node.body;\n\n      queueLength -= 1;\n      shiftIdx += 1;\n      var differentBody = (body !== sourceBody);\n      if (body && differentBody) {\n        // If the current node is a leaf node (and it is not source body),\n        // calculate the force exerted by the current node on body, and add this\n        // amount to body's net force.\n        ${t("d{var} = body.pos.{var} - sourceBody.pos.{var};",{indent:8})}\n        r = Math.sqrt(${t("d{var} * d{var}",{join:" + "})});\n\n        if (r === 0) {\n          // Poor man's protection against zero distance.\n          ${t("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}\n          r = Math.sqrt(${t("d{var} * d{var}",{join:" + "})});\n        }\n\n        // This is standard gravitation force calculation but we divide\n        // by r^3 to save two operations when normalizing force vector.\n        v = gravity * body.mass * sourceBody.mass / (r * r * r);\n        ${t("f{var} += v * d{var};",{indent:8})}\n      } else if (differentBody) {\n        // Otherwise, calculate the ratio s / r,  where s is the width of the region\n        // represented by the internal node, and r is the distance between the body\n        // and the node's center-of-mass\n        ${t("d{var} = node.mass_{var} / node.mass - sourceBody.pos.{var};",{indent:8})}\n        r = Math.sqrt(${t("d{var} * d{var}",{join:" + "})});\n\n        if (r === 0) {\n          // Sorry about code duplication. I don't want to create many functions\n          // right away. Just want to see performance first.\n          ${t("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}\n          r = Math.sqrt(${t("d{var} * d{var}",{join:" + "})});\n        }\n        // If s / r < θ, treat this internal node as a single body, and calculate the\n        // force it exerts on sourceBody, and add this amount to sourceBody's net force.\n        if ((node.max_${i(0)} - node.min_${i(0)}) / r < theta) {\n          // in the if statement above we consider node's width only\n          // because the region was made into square during tree creation.\n          // Thus there is no difference between using width or height.\n          v = gravity * node.mass * sourceBody.mass / (r * r * r);\n          ${t("f{var} += v * d{var};",{indent:10})}\n        } else {\n          // Otherwise, run the procedure recursively on each of the current node's children.\n\n          // I intentionally unfolded this loop, to save several CPU cycles.\n${h()}\n        }\n      }\n    }\n\n    ${t("sourceBody.force.{var} += f{var};",{indent:4})}\n  }\n\n  function insertBodies(bodies) {\n    ${t("var {var}min = Number.MAX_VALUE;",{indent:4})}\n    ${t("var {var}max = Number.MIN_VALUE;",{indent:4})}\n    var i = bodies.length;\n\n    // To reduce quad tree depth we are looking for exact bounding box of all particles.\n    while (i--) {\n      var pos = bodies[i].pos;\n      ${t("if (pos.{var} < {var}min) {var}min = pos.{var};",{indent:6})}\n      ${t("if (pos.{var} > {var}max) {var}max = pos.{var};",{indent:6})}\n    }\n\n    // Makes the bounds square.\n    var maxSideLength = -Infinity;\n    ${t("if ({var}max - {var}min > maxSideLength) maxSideLength = {var}max - {var}min ;",{indent:4})}\n\n    currentInCache = 0;\n    root = newNode();\n    ${t("root.min_{var} = {var}min;",{indent:4})}\n    ${t("root.max_{var} = {var}min + maxSideLength;",{indent:4})}\n\n    i = bodies.length - 1;\n    if (i >= 0) {\n      root.body = bodies[i];\n    }\n    while (i--) {\n      insert(bodies[i], root);\n    }\n  }\n\n  function insert(newBody) {\n    insertStack.reset();\n    insertStack.push(root, newBody);\n\n    while (!insertStack.isEmpty()) {\n      var stackItem = insertStack.pop();\n      var node = stackItem.node;\n      var body = stackItem.body;\n\n      if (!node.body) {\n        // This is internal node. Update the total mass of the node and center-of-mass.\n        ${t("var {var} = body.pos.{var};",{indent:8})}\n        node.mass += body.mass;\n        ${t("node.mass_{var} += body.mass * {var};",{indent:8})}\n\n        // Recursively insert the body in the appropriate quadrant.\n        // But first find the appropriate quadrant.\n        var quadIdx = 0; // Assume we are in the 0's quad.\n        ${t("var min_{var} = node.min_{var};",{indent:8})}\n        ${t("var max_{var} = (min_{var} + node.max_{var}) / 2;",{indent:8})}\n\n${s(8)}\n\n        var child = getChild(node, quadIdx);\n\n        if (!child) {\n          // The node is internal but this quadrant is not taken. Add\n          // subnode to it.\n          child = newNode();\n          ${t("child.min_{var} = min_{var};",{indent:10})}\n          ${t("child.max_{var} = max_{var};",{indent:10})}\n          child.body = body;\n\n          setChild(node, quadIdx, child);\n        } else {\n          // continue searching in this quadrant.\n          insertStack.push(child, body);\n        }\n      } else {\n        // We are trying to add to the leaf node.\n        // We have to convert current leaf into internal node\n        // and continue adding two nodes.\n        var oldBody = node.body;\n        node.body = null; // internal nodes do not cary bodies\n\n        if (isSamePosition(oldBody.pos, body.pos)) {\n          // Prevent infinite subdivision by bumping one node\n          // anywhere in this quadrant\n          var retriesCount = 3;\n          do {\n            var offset = random.nextDouble();\n            ${t("var d{var} = (node.max_{var} - node.min_{var}) * offset;",{indent:12})}\n\n            ${t("oldBody.pos.{var} = node.min_{var} + d{var};",{indent:12})}\n            retriesCount -= 1;\n            // Make sure we don't bump it out of the box. If we do, next iteration should fix it\n          } while (retriesCount > 0 && isSamePosition(oldBody.pos, body.pos));\n\n          if (retriesCount === 0 && isSamePosition(oldBody.pos, body.pos)) {\n            // This is very bad, we ran out of precision.\n            // if we do not return from the method we'll get into\n            // infinite loop here. So we sacrifice correctness of layout, and keep the app running\n            // Next layout iteration should get larger bounding box in the first step and fix this\n            return;\n          }\n        }\n        // Next iteration should subdivide node further.\n        insertStack.push(node, oldBody);\n        insertStack.push(node, body);\n      }\n    }\n  }\n}\nreturn createQuadTree;\n\n`;return o;function s(t){let n=[],r=Array(t+1).join(" ");for(let o=0;o<e;++o)n.push(r+`if (${i(o)} > max_${i(o)}) {`),n.push(r+`  quadIdx = quadIdx + ${Math.pow(2,o)};`),n.push(r+`  min_${i(o)} = max_${i(o)};`),n.push(r+`  max_${i(o)} = node.max_${i(o)};`),n.push(r+"}");return n.join("\n")}function h(){let e=Array(11).join(" "),t=[];for(let r=0;r<n;++r)t.push(e+`if (node.quad${r}) {`),t.push(e+`  queue[pushIdx] = node.quad${r};`),t.push(e+"  queueLength += 1;"),t.push(e+"  pushIdx += 1;"),t.push(e+"}");return t.join("\n")}function f(e){let t=[];for(let r=0;r<n;++r)t.push(`${e}quad${r} = null;`);return t.join("\n")}}function a(e){let t=r(e);return`\n  function isSamePosition(point1, point2) {\n    ${t("var d{var} = Math.abs(point1.{var} - point2.{var});",{indent:2})}\n  \n    return ${t("d{var} < 1e-8",{join:" && "})};\n  }  \n`}function l(e){var t=Math.pow(2,e);return`\nfunction setChild(node, idx, child) {\n  ${n()}\n}`;function n(){let e=[];for(let n=0;n<t;++n){let t=0===n?"  ":"  else ";e.push(`${t}if (idx === ${n}) node.quad${n} = child;`)}return e.join("\n")}}function c(e){return`function getChild(node, idx) {\n${t()}\n  return null;\n}`;function t(){let t=[],n=Math.pow(2,e);for(let e=0;e<n;++e)t.push(`  if (idx === ${e}) return node.quad${e};`);return t.join("\n")}}function u(e){let t=r(e),n=Math.pow(2,e);var i=`\nfunction QuadNode() {\n  // body stored inside this node. In quad tree only leaf nodes (by construction)\n  // contain bodies:\n  this.body = null;\n\n  // Child nodes are stored in quads. Each quad is presented by number:\n  // 0 | 1\n  // -----\n  // 2 | 3\n${o("  this.")}\n\n  // Total mass of current node\n  this.mass = 0;\n\n  // Center of mass coordinates\n  ${t("this.mass_{var} = 0;",{indent:2})}\n\n  // bounding box coordinates\n  ${t("this.min_{var} = 0;",{indent:2})}\n  ${t("this.max_{var} = 0;",{indent:2})}\n}\n`;return i;function o(e){let t=[];for(let r=0;r<n;++r)t.push(`${e}quad${r} = null;`);return t.join("\n")}}function d(){return"\n/**\n * Our implementation of QuadTree is non-recursive to avoid GC hit\n * This data structure represent stack of elements\n * which we are trying to insert into quad tree.\n */\nfunction InsertStack () {\n    this.stack = [];\n    this.popIdx = 0;\n}\n\nInsertStack.prototype = {\n    isEmpty: function() {\n        return this.popIdx === 0;\n    },\n    push: function (node, body) {\n        var item = this.stack[this.popIdx];\n        if (!item) {\n            // we are trying to avoid memory pressure: create new element\n            // only when absolutely necessary\n            this.stack[this.popIdx] = new InsertStackElement(node, body);\n        } else {\n            item.node = node;\n            item.body = body;\n        }\n        ++this.popIdx;\n    },\n    pop: function () {\n        if (this.popIdx > 0) {\n            return this.stack[--this.popIdx];\n        }\n    },\n    reset: function () {\n        this.popIdx = 0;\n    }\n};\n\nfunction InsertStackElement(node, body) {\n    this.node = node; // QuadTree node\n    this.body = body; // physical body which needs to be inserted to node\n}\n"}e.exports=o,e.exports.generateQuadTreeFunctionBody=s,e.exports.getInsertStackCode=d,e.exports.getQuadNodeCode=u,e.exports.isSamePosition=a,e.exports.getChildBodyCode=c,e.exports.setChildBodyCode=l},9468:function(e){e.exports=function(e){return 0===e?"x":1===e?"y":2===e?"z":"c"+(e+1)}},2029:function(e,t,n){n(1703),n(7658),e.exports=u;var r=n(792),i=n(6069),o=n(9411),s=n(7738),a=n(9895),l=n(7892),c={};function u(e){var t=n(2227),u=n(3829),h=n(3624);if(e){if(void 0!==e.springCoeff)throw new Error("springCoeff was renamed to springCoefficient");if(void 0!==e.dragCoeff)throw new Error("dragCoeff was renamed to dragCoefficient")}e=u(e,{springLength:10,springCoefficient:.8,gravity:-12,theta:.8,dragCoefficient:.9,timeStep:.5,adaptiveTimeStepWeight:0,dimensions:2,debug:!1});var f=c[e.dimensions];if(!f){var p=e.dimensions;f={Body:r(p,e.debug),createQuadTree:i(p),createBounds:o(p),createDragForce:s(p),createSpringForce:a(p),integrate:l(p)},c[p]=f}var m=f.Body,g=f.createQuadTree,v=f.createBounds,y=f.createDragForce,b=f.createSpringForce,_=f.integrate,w=e=>new m(e),x=n(7424).random(42),S=[],E=[],M=g(e,x),T=v(S,e,x),C=b(e,x),A=y(e),k=0,O=[],R=new Map,P=0;I("nbody",F),I("spring",B);var L={bodies:S,quadTree:M,springs:E,settings:e,addForce:I,removeForce:N,getForces:U,step:function(){for(var t=0;t<O.length;++t)O[t](P);var n=_(S,e.timeStep,e.adaptiveTimeStepWeight);return P+=1,n},addBody:function(e){if(!e)throw new Error("Body is required");return S.push(e),e},addBodyAt:function(e){if(!e)throw new Error("Body position is required");var t=w(e);return S.push(t),t},removeBody:function(e){if(e){var t=S.indexOf(e);if(!(t<0))return S.splice(t,1),0===S.length&&T.reset(),!0}},addSpring:function(e,n,r,i){if(!e||!n)throw new Error("Cannot add null spring to force simulator");"number"!==typeof r&&(r=-1);var o=new t(e,n,r,i>=0?i:-1);return E.push(o),o},getTotalMovement:function(){return k},removeSpring:function(e){if(e){var t=E.indexOf(e);return t>-1?(E.splice(t,1),!0):void 0}},getBestNewBodyPosition:function(e){return T.getBestNewPosition(e)},getBBox:D,getBoundingBox:D,invalidateBBox:function(){console.warn("invalidateBBox() is deprecated, bounds always recomputed on `getBBox()` call")},gravity:function(t){return void 0!==t?(e.gravity=t,M.options({gravity:t}),this):e.gravity},theta:function(t){return void 0!==t?(e.theta=t,M.options({theta:t}),this):e.theta},random:x};return d(e,L),h(L),L;function D(){return T.update(),T.box}function I(e,t){if(R.has(e))throw new Error("Force "+e+" is already added");R.set(e,t),O.push(t)}function N(e){var t=O.indexOf(R.get(e));t<0||(O.splice(t,1),R.delete(e))}function U(){return R}function F(){if(0!==S.length){M.insertBodies(S);var e=S.length;while(e--){var t=S[e];t.isPinned||(t.reset(),M.updateBodyForce(t),A.update(t))}}}function B(){var e=E.length;while(e--)C.update(E[e])}}function d(e,t){for(var n in e)h(e,t,n)}function h(e,t,n){if(e.hasOwnProperty(n)&&"function"!==typeof t[n]){var r=Number.isFinite(e[n]);t[n]=r?function(r){if(void 0!==r){if(!Number.isFinite(r))throw new Error("Value of "+n+" should be a valid number.");return e[n]=r,t}return e[n]}:function(r){return void 0!==r?(e[n]=r,t):e[n]}}}},2227:function(e){function t(e,t,n,r){this.from=e,this.to=t,this.length=n,this.coefficient=r}e.exports=t},2340:function(e,t,n){n(1703),n(7658),e.exports=i;var r=n(3624);function i(e){if(e=e||{},"uniqueLinkId"in e&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n","\n","Note: there is also change in default behavior: From now on each graph\nis considered to be not a multigraph by default (each edge is unique)."),e.multigraph=e.uniqueLinkId),void 0===e.multigraph&&(e.multigraph=!1),"function"!==typeof Map)throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var t=new Map,n=new Map,i={},c=0,u=e.multigraph?M:E,d=[],h=U,f=U,p=U,m=U,g={version:20,addNode:_,addLink:S,removeLink:k,removeNode:x,getNode:w,getNodeCount:T,getLinkCount:C,getEdgeCount:C,getLinksCount:C,getNodesCount:T,getLinks:A,forEachNode:V,forEachLinkedNode:D,forEachLink:L,beginUpdate:p,endUpdate:m,clear:P,hasLink:R,hasNode:w,getLink:R};return r(g),v(),g;function v(){var e=g.on;function t(){return g.beginUpdate=p=F,g.endUpdate=m=B,h=y,f=b,g.on=e,e.apply(g,arguments)}g.on=t}function y(e,t){d.push({link:e,changeType:t})}function b(e,t){d.push({node:e,changeType:t})}function _(e,n){if(void 0===e)throw new Error("Invalid node identifier");p();var r=w(e);return r?(r.data=n,f(r,"update")):(r=new o(e,n),f(r,"add")),t.set(e,r),m(),r}function w(e){return t.get(e)}function x(e){var n=w(e);if(!n)return!1;p();var r=n.links;return r&&(r.forEach(O),n.links=null),t.delete(e),f(n,"remove"),m(),!0}function S(e,t,r){p();var i=w(e)||_(e),o=w(t)||_(t),a=u(e,t,r),l=n.has(a.id);return n.set(a.id,a),s(i,a),e!==t&&s(o,a),h(a,l?"update":"add"),m(),a}function E(e,t,r){var i=l(e,t),o=n.get(i);return o?(o.data=r,o):new a(e,t,r,i)}function M(e,t,n){var r=l(e,t),o=i.hasOwnProperty(r);if(o||R(e,t)){o||(i[r]=0);var s="@"+ ++i[r];r=l(e+s,t+s)}return new a(e,t,n,r)}function T(){return t.size}function C(){return n.size}function A(e){var t=w(e);return t?t.links:null}function k(e,t){return void 0!==t&&(e=R(e,t)),O(e)}function O(e){if(!e)return!1;if(!n.get(e.id))return!1;p(),n.delete(e.id);var t=w(e.fromId),r=w(e.toId);return t&&t.links.delete(e),r&&r.links.delete(e),h(e,"remove"),m(),!0}function R(e,t){if(void 0!==e&&void 0!==t)return n.get(l(e,t))}function P(){p(),V((function(e){x(e.id)})),m()}function L(e){if("function"===typeof e){var t=n.values(),r=t.next();while(!r.done){if(e(r.value))return!0;r=t.next()}}}function D(e,t,n){var r=w(e);if(r&&r.links&&"function"===typeof t)return n?N(r.links,e,t):I(r.links,e,t)}function I(e,n,r){var i,o=e.values(),s=o.next();while(!s.done){var a=s.value,l=a.fromId===n?a.toId:a.fromId;if(i=r(t.get(l),a),i)return!0;s=o.next()}}function N(e,n,r){var i,o=e.values(),s=o.next();while(!s.done){var a=s.value;if(a.fromId===n&&(i=r(t.get(a.toId),a),i))return!0;s=o.next()}}function U(){}function F(){c+=1}function B(){c-=1,0===c&&d.length>0&&(g.fire("changed",d),d.length=0)}function V(e){if("function"!==typeof e)throw new Error("Function is expected to iterate over graph nodes. You passed "+e);var n=t.values(),r=n.next();while(!r.done){if(e(r.value))return!0;r=n.next()}}}function o(e,t){this.id=e,this.links=null,this.data=t}function s(e,t){e.links?e.links.add(t):e.links=new Set([t])}function a(e,t,n,r){this.fromId=e,this.toId=t,this.data=n,this.id=r}function l(e,t){return e.toString()+"👉 "+t.toString()}},3829:function(e){function t(e,n){var r;if(e||(e={}),n)for(r in n)if(n.hasOwnProperty(r)){var i=e.hasOwnProperty(r),o=typeof n[r],s=!i||typeof e[r]!==o;s?e[r]=n[r]:"object"===o&&(e[r]=t(e[r],n[r]))}return e}e.exports=t},7424:function(e,t,n){function r(e){var t="number"===typeof e?e:+new Date;return new i(t)}function i(e){this.seed=e}function o(){var e,t,n;do{t=2*this.nextDouble()-1,n=2*this.nextDouble()-1,e=t*t+n*n}while(e>=1||0===e);return t*Math.sqrt(-2*Math.log(e)/e)}function s(){var e=1.5,t=Math.pow(a(1+e)*Math.sin(Math.PI*e/2)/(a((1+e)/2)*e*Math.pow(2,(e-1)/2)),1/e);return this.gaussian()*t/Math.pow(Math.abs(this.gaussian()),1/e)}function a(e){return Math.sqrt(2*Math.PI/e)*Math.pow(1/Math.E*(e+1/(12*e-1/(10*e))),e)}function l(){var e=this.seed;return e=e+2127912214+(e<<12)&4294967295,e=4294967295&(3345072700^e^e>>>19),e=e+374761393+(e<<5)&4294967295,e=4294967295&(e+3550635116^e<<9),e=e+4251993797+(e<<3)&4294967295,e=4294967295&(3042594569^e^e>>>16),this.seed=e,(268435455&e)/268435456}function c(e){return Math.floor(this.nextDouble()*e)}function u(e,t){var n=t||r();if("function"!==typeof n.next)throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:o,shuffle:i};function i(){var t,r,i;for(t=e.length-1;t>0;--t)r=n.next(t+1),i=e[r],e[r]=e[t],e[t]=i;return e}function o(t){var r,i,o;for(r=e.length-1;r>0;--r)i=n.next(r+1),o=e[i],e[i]=e[r],e[r]=o,t(o);e.length&&t(e[0])}}n(1703),e.exports=r,e.exports.random=r,e.exports.randomIterator=u,i.prototype.next=c,i.prototype.nextDouble=l,i.prototype.uniform=l,i.prototype.gaussian=o,i.prototype.levy=s},9427:function(e,t,n){"use strict";n.d(t,{z:function(){return o}});n(1703);var r,i=function(){return Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))};function o(e,t){void 0===t&&(t={});var n=t.registrationOptions;void 0===n&&(n={}),delete t.registrationOptions;var o=function(e){var n=[],r=arguments.length-1;while(r-- >0)n[r]=arguments[r+1];t&&t[e]&&t[e].apply(t,n)};"serviceWorker"in navigator&&r.then((function(){i()?(l(e,o,n),navigator.serviceWorker.ready.then((function(e){o("ready",e)})).catch((function(e){return s(o,e)}))):(a(e,o,n),navigator.serviceWorker.ready.then((function(e){o("ready",e)})).catch((function(e){return s(o,e)})))}))}function s(e,t){navigator.onLine||e("offline"),e("error",t)}function a(e,t,n){navigator.serviceWorker.register(e,n).then((function(e){t("registered",e),e.waiting?t("updated",e):e.onupdatefound=function(){t("updatefound",e);var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?t("updated",e):t("cached",e))}}})).catch((function(e){return s(t,e)}))}function l(e,t,n){fetch(e).then((function(r){404===r.status?(t("error",new Error("Service worker not found at "+e)),c()):-1===r.headers.get("content-type").indexOf("javascript")?(t("error",new Error("Expected "+e+" to have javascript content-type, but received "+r.headers.get("content-type"))),c()):a(e,t,n)})).catch((function(e){return s(t,e)}))}function c(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){return s(emit,e)}))}"undefined"!==typeof window&&(r="undefined"!==typeof Promise?new Promise((function(e){return window.addEventListener("load",e)})):{then:function(e){return window.addEventListener("load",e)}})},8305:function(e,t,n){n(1703),n(7658),n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315),function(t){e.exports=t()}((function(){var e=Math.floor,t=Math.abs,r=Math.pow;return function(){function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var l=void 0;if(!a&&l)return require(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};t[s][0].call(u.exports,(function(e){var n=t[s][1][e];return i(n||e)}),u,u.exports,e,t,n,r)}return n[s].exports}for(var o=void 0,s=0;s<r.length;s++)i(r[s]);return i}return e}()({1:[function(e,t,n){"use strict";function r(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function i(e,t,n){return 3*(t+n)/4-n}function o(e){var t,n,o=r(e),s=o[0],a=o[1],l=new d(i(e,s,a)),c=0,h=0<a?s-4:s;for(n=0;n<h;n+=4)t=u[e.charCodeAt(n)]<<18|u[e.charCodeAt(n+1)]<<12|u[e.charCodeAt(n+2)]<<6|u[e.charCodeAt(n+3)],l[c++]=255&t>>16,l[c++]=255&t>>8,l[c++]=255&t;return 2===a&&(t=u[e.charCodeAt(n)]<<2|u[e.charCodeAt(n+1)]>>4,l[c++]=255&t),1===a&&(t=u[e.charCodeAt(n)]<<10|u[e.charCodeAt(n+1)]<<4|u[e.charCodeAt(n+2)]>>2,l[c++]=255&t>>8,l[c++]=255&t),l}function s(e){return c[63&e>>18]+c[63&e>>12]+c[63&e>>6]+c[63&e]}function a(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(16711680&e[o]<<16)+(65280&e[o+1]<<8)+(255&e[o+2]),i.push(s(r));return i.join("")}function l(e){for(var t,n=e.length,r=n%3,i=[],o=16383,s=0,l=n-r;s<l;s+=o)i.push(a(e,s,s+o>l?l:s+o));return 1===r?(t=e[n-1],i.push(c[t>>2]+c[63&t<<4]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(c[t>>10]+c[63&t>>4]+c[63&t<<2]+"=")),i.join("")}n.byteLength=function(e){var t=r(e),n=t[0],i=t[1];return 3*(n+i)/4-i},n.toByteArray=o,n.fromByteArray=l;for(var c=[],u=[],d="undefined"==typeof Uint8Array?Array:Uint8Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,p=h.length;f<p;++f)c[f]=h[f],u[h.charCodeAt(f)]=f;u[45]=62,u[95]=63},{}],2:[function(){},{}],3:[function(e,t,n){(function(){(function(){
/*!
          * The buffer module from node.js, for the browser.
          *
          * @author   Feross Aboukhadijeh <https://feross.org>
          * @license  MIT
          */
"use strict";var t=String.fromCharCode,i=Math.min;function o(e){if(2147483647<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=s.prototype,t}function s(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return u(e)}return a(e,t,n)}function a(e,t,n){if("string"==typeof e)return d(e,t);if(ArrayBuffer.isView(e))return h(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if($(e,ArrayBuffer)||e&&$(e.buffer,ArrayBuffer))return f(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return s.from(r,t,n);var i=p(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return s.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(0>e)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e,t,n){return l(e),0>=e||void 0===t?o(e):"string"==typeof n?o(e).fill(t,n):o(e).fill(t)}function u(e){return l(e),o(0>e?0:0|m(e))}function d(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!s.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|g(e,t),r=o(n),i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}function h(e){for(var t=0>e.length?0:0|m(e.length),n=o(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function f(e,t,n){if(0>t||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),r.__proto__=s.prototype,r}function p(e){if(s.isBuffer(e)){var t=0|m(e.length),n=o(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0===e.length?"Buffer"===e.type&&Array.isArray(e.data)?h(e.data):void 0:"number"!=typeof e.length||q(e.length)?o(0):h(e)}function m(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|e}function g(e,t){if(s.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||$(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=2<arguments.length&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(e).length;default:if(i)return r?-1:z(e).length;t=(""+t).toLowerCase(),i=!0}}function v(e,t,n){var r=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),0>=n)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return O(this,t,n);case"latin1":case"binary":return R(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function y(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function b(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:-2147483648>n&&(n=-2147483648),n=+n,q(n)&&(n=i?0:e.length-1),0>n&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(0>n){if(!i)return-1;n=0}if("string"==typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:_(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):_(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function _(e,t,n,r,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var s,a=1,l=e.length,c=t.length;if(void 0!==r&&(r=(r+"").toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(2>e.length||2>t.length)return-1;a=2,l/=2,c/=2,n/=2}if(i){var u=-1;for(s=n;s<l;s++)if(o(e,s)!==o(t,-1===u?0:s-u))-1!==u&&(s-=s-u),u=-1;else if(-1===u&&(u=s),s-u+1===c)return u*a}else for(n+c>l&&(n=l-c),s=n;0<=s;s--){for(var d=!0,h=0;h<c;h++)if(o(e,s+h)!==o(t,h)){d=!1;break}if(d)return s}return-1}function w(e,t,n,r){n=+n||0;var i=e.length-n;r?(r=+r,r>i&&(r=i)):r=i;var o=t.length;r>o/2&&(r=o/2);for(var s,a=0;a<r;++a){if(s=parseInt(t.substr(2*a,2),16),q(s))return a;e[n+a]=s}return a}function x(e,t,n,r){return G(z(t,e.length-n),e,n,r)}function S(e,t,n,r){return G(j(t),e,n,r)}function E(e,t,n,r){return S(e,t,n,r)}function M(e,t,n,r){return G(W(t),e,n,r)}function T(e,t,n,r){return G(H(t,e.length-n),e,n,r)}function C(e,t,n){return 0===t&&n===e.length?Y.fromByteArray(e):Y.fromByteArray(e.slice(t,n))}function A(e,t,n){n=i(e.length,n);for(var r=[],o=t;o<n;){var s,a,l,c,u=e[o],d=null,h=239<u?4:223<u?3:191<u?2:1;if(o+h<=n)1===h?128>u&&(d=u):2===h?(s=e[o+1],128==(192&s)&&(c=(31&u)<<6|63&s,127<c&&(d=c))):3===h?(s=e[o+1],a=e[o+2],128==(192&s)&&128==(192&a)&&(c=(15&u)<<12|(63&s)<<6|63&a,2047<c&&(55296>c||57343<c)&&(d=c))):4===h&&(s=e[o+1],a=e[o+2],l=e[o+3],128==(192&s)&&128==(192&a)&&128==(192&l)&&(c=(15&u)<<18|(63&s)<<12|(63&a)<<6|63&l,65535<c&&1114112>c&&(d=c)));null===d?(d=65533,h=1):65535<d&&(d-=65536,r.push(55296|1023&d>>>10),d=56320|1023&d),r.push(d),o+=h}return k(r)}function k(e){var n=e.length;if(n<=4096)return t.apply(String,e);for(var r="",i=0;i<n;)r+=t.apply(String,e.slice(i,i+=4096));return r}function O(e,n,r){var o="";r=i(e.length,r);for(var s=n;s<r;++s)o+=t(127&e[s]);return o}function R(e,n,r){var o="";r=i(e.length,r);for(var s=n;s<r;++s)o+=t(e[s]);return o}function P(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=V(e[o]);return i}function L(e,n,r){for(var i=e.slice(n,r),o="",s=0;s<i.length;s+=2)o+=t(i[s]+256*i[s+1]);return o}function D(e,t,n){if(0!=e%1||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function I(e,t,n,r,i,o){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function N(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("Index out of range")}function U(e,t,n,r,i){return t=+t,n>>>=0,i||N(e,t,n,4,34028234663852886e22,-34028234663852886e22),X.write(e,t,n,r,23,4),n+4}function F(e,t,n,r,i){return t=+t,n>>>=0,i||N(e,t,n,8,17976931348623157e292,-17976931348623157e292),X.write(e,t,n,r,52,8),n+8}function B(e){if(e=e.split("=")[0],e=e.trim().replace(Z,""),2>e.length)return"";for(;0!=e.length%4;)e+="=";return e}function V(e){return 16>e?"0"+e.toString(16):e.toString(16)}function z(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],s=0;s<r;++s){if(n=e.charCodeAt(s),55295<n&&57344>n){if(!i){if(56319<n){-1<(t-=3)&&o.push(239,191,189);continue}if(s+1===r){-1<(t-=3)&&o.push(239,191,189);continue}i=n;continue}if(56320>n){-1<(t-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(t-=3)&&o.push(239,191,189);if(i=null,128>n){if(0>(t-=1))break;o.push(n)}else if(2048>n){if(0>(t-=2))break;o.push(192|n>>6,128|63&n)}else if(65536>n){if(0>(t-=3))break;o.push(224|n>>12,128|63&n>>6,128|63&n)}else{if(!(1114112>n))throw new Error("Invalid code point");if(0>(t-=4))break;o.push(240|n>>18,128|63&n>>12,128|63&n>>6,128|63&n)}}return o}function j(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function H(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!(0>(t-=2));++s)n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function W(e){return Y.toByteArray(B(e))}function G(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function $(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function q(e){return e!==e}var Y=e("base64-js"),X=e("ieee754");n.Buffer=s,n.SlowBuffer=function(e){return+e!=e&&(e=0),s.alloc(+e)},n.INSPECT_MAX_BYTES=50,n.kMaxLength=2147483647,s.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(t){return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){return s.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){return s.isBuffer(this)?this.byteOffset:void 0}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192,s.from=function(e,t,n){return a(e,t,n)},s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,s.alloc=function(e,t,n){return c(e,t,n)},s.allocUnsafe=function(e){return u(e)},s.allocUnsafeSlow=function(e){return u(e)},s.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==s.prototype},s.compare=function(e,t){if($(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),$(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,o=0,a=i(n,r);o<a;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},s.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=s.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if($(o,Uint8Array)&&(o=s.from(o)),!s.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},s.byteLength=g,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(0!=e%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(0!=e%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(0!=e%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},s.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?A(this,0,e):v.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},s.prototype.compare=function(e,t,n,r,o){if($(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),0>t||n>e.length||0>r||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,o>>>=0,this===e)return 0;for(var a=o-r,l=n-t,c=i(a,l),u=this.slice(r,o),d=e.slice(t,n),h=0;h<c;++h)if(u[h]!==d[h]){a=u[h],l=d[h];break}return a<l?-1:l<a?1:0},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),0<e.length&&(0>n||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return x(this,e,t,n);case"ascii":return S(this,e,t,n);case"latin1":case"binary":return E(this,e,t,n);case"base64":return M(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},s.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return r.__proto__=s.prototype,r},s.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},s.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);for(var r=this[e+--t],i=1;0<t&&(i*=256);)r+=this[e+--t]*i;return r},s.prototype.readUInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);for(var i=this[e],o=1,s=0;++s<t&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=r(2,8*t)),i},s.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);for(var i=t,o=1,s=this[e+--i];0<i&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=r(2,8*t)),s},s.prototype.readInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){e>>>=0,t||D(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){e>>>=0,t||D(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return e>>>=0,t||D(e,4,this.length),X.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e>>>=0,t||D(e,4,this.length),X.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e>>>=0,t||D(e,8,this.length),X.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e>>>=0,t||D(e,8,this.length),X.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t>>>=0,n>>>=0,!i){var o=r(2,8*n)-1;I(this,e,t,n,o,0)}var s=1,a=0;for(this[t]=255&e;++a<n&&(s*=256);)this[t+a]=255&e/s;return t+n},s.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t>>>=0,n>>>=0,!i){var o=r(2,8*n)-1;I(this,e,t,n,o,0)}var s=n-1,a=1;for(this[t+s]=255&e;0<=--s&&(a*=256);)this[t+s]=255&e/a;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,1,255,0),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t>>>=0,!i){var o=r(2,8*n-1);I(this,e,t,n,o-1,-o)}var s=0,a=1,l=0;for(this[t]=255&e;++s<n&&(a*=256);)0>e&&0===l&&0!==this[t+s-1]&&(l=1),this[t+s]=255&(e/a>>0)-l;return t+n},s.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t>>>=0,!i){var o=r(2,8*n-1);I(this,e,t,n,o-1,-o)}var s=n-1,a=1,l=0;for(this[t+s]=255&e;0<=--s&&(a*=256);)0>e&&0===l&&0!==this[t+s+1]&&(l=1),this[t+s]=255&(e/a>>0)-l;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,1,127,-128),0>e&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeFloatLE=function(e,t,n){return U(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return U(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(!s.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),0<r&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("Index out of range");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var o=i-1;0<=o;--o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return i},s.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&128>i||"latin1"===r)&&(e=i)}}else"number"==typeof e&&(e&=255);if(0>t||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=s.isBuffer(e)?e:s.from(e,r),l=a.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=a[o%l]}return this};var Z=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:9}],4:[function(e,t,n){(function(r){(function(){function i(){let e;try{e=n.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof r&&"env"in r&&(e=r.env.DEBUG),e}n.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"===e||(r++,"%c"===e&&(i=r))})),e.splice(i,0,n)},n.save=function(e){try{e?n.storage.setItem("debug",e):n.storage.removeItem("debug")}catch(e){}},n.load=i,n.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},n.storage=function(){try{return localStorage}catch(e){}}(),n.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],n.log=console.debug||console.log||(()=>{}),t.exports=e("./common")(n);const{formatters:o}=t.exports;o.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this)}).call(this,e("_process"))},{"./common":5,_process:12}],5:[function(e,n){n.exports=function(n){function r(e){function t(...e){if(!t.enabled)return;const i=t,o=+new Date,s=o-(n||o);i.diff=s,i.prev=n,i.curr=o,n=o,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((t,n)=>{if("%%"===t)return"%";a++;const o=r.formatters[n];if("function"==typeof o){const n=e[a];t=o.call(i,n),e.splice(a,1),a--}return t})),r.formatArgs.call(i,e);const l=i.log||r.log;l.apply(i,e)}let n,o=null;return t.namespace=e,t.useColors=r.useColors(),t.color=r.selectColor(e),t.extend=i,t.destroy=r.destroy,Object.defineProperty(t,"enabled",{enumerable:!0,configurable:!1,get:()=>null===o?r.enabled(e):o,set:e=>{o=e}}),"function"==typeof r.init&&r.init(t),t}function i(e,t){const n=r(this.namespace+("undefined"==typeof t?":":t)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){const e=[...r.names.map(o),...r.skips.map(o).map((e=>"-"+e))].join(",");return r.enable(""),e},r.enable=function(e){let t;r.save(e),r.names=[],r.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&(e=n[t].replace(/\*/g,".*?"),"-"===e[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")))},r.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=e("ms"),r.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(n).forEach((e=>{r[e]=n[e]})),r.names=[],r.skips=[],r.formatters={},r.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return r.colors[t(n)%r.colors.length]},r.enable(r.load()),r}},{ms:11}],6:[function(e,t){"use strict";function n(e,t){for(const n in t)Object.defineProperty(e,n,{value:t[n],enumerable:!0,configurable:!0});return e}t.exports=function(e,t,r){if(!e||"string"==typeof e)throw new TypeError("Please pass an Error to err-code");r||(r={}),"object"==typeof t&&(r=t,t=""),t&&(r.code=t);try{return n(e,r)}catch(t){r.message=e.message,r.stack=e.stack;const i=function(){};i.prototype=Object.create(Object.getPrototypeOf(e));const o=n(new i,r);return o}}},{}],7:[function(e,t){"use strict";function n(e){console&&console.warn&&console.warn(e)}function r(){r.init.call(this)}function i(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function o(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function s(e,t,r,s){var a,l,c;if(i(r),l=e._events,void 0===l?(l=e._events=Object.create(null),e._eventsCount=0):(void 0!==l.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),l=e._events),c=l[t]),void 0===c)c=l[t]=r,++e._eventsCount;else if("function"==typeof c?c=l[t]=s?[r,c]:[c,r]:s?c.unshift(r):c.push(r),a=o(e),0<a&&c.length>a&&!c.warned){c.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=c.length,n(u)}return e}function a(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=a.bind(r);return i.listener=n,r.wrapFn=i,i}function c(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?f(i):d(i,i.length)}function u(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function d(e,t){for(var n=Array(t),r=0;r<t;++r)n[r]=e[r];return n}function h(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function f(e){for(var t=Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function p(e,t,n){"function"==typeof e.on&&m(e,"error",t,n)}function m(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}var g,v="object"==typeof Reflect?Reflect:null,y=v&&"function"==typeof v.apply?v.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};g=v&&"function"==typeof v.ownKeys?v.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var b=Number.isNaN||function(e){return e!==e};t.exports=r,t.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}m(e,t,o,{once:!0}),"error"!==t&&p(e,i,{once:!0})}))},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var _=10;Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return _},set:function(e){if("number"!=typeof e||0>e||b(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");_=e}}),r.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(e){if("number"!=typeof e||0>e||b(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return o(this)},r.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(0<t.length&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var a=i[e];if(void 0===a)return!1;if("function"==typeof a)y(a,this,t);else{var l=a.length,c=d(a,l);for(n=0;n<l;++n)y(c[n],this,t)}return!0},r.prototype.addListener=function(e,t){return s(this,e,t,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(e,t){return s(this,e,t,!0)},r.prototype.once=function(e,t){return i(t),this.on(e,l(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){return i(t),this.prependListener(e,l(this,e,t)),this},r.prototype.removeListener=function(e,t){var n,r,o,s,a;if(i(t),r=this._events,void 0===r)return this;if(n=r[e],void 0===n)return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,s=n.length-1;0<=s;s--)if(n[s]===t||n[s].listener===t){a=n[s].listener,o=s;break}if(0>o)return this;0===o?n.shift():h(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(e){var t,n,r;if(n=this._events,void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)i=o[r],"removeListener"!==i&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],"function"==typeof t)this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;0<=r;r--)this.removeListener(e,t[r]);return this},r.prototype.listeners=function(e){return c(this,e,!0)},r.prototype.rawListeners=function(e){return c(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):u.call(e,t)},r.prototype.listenerCount=u,r.prototype.eventNames=function(){return 0<this._eventsCount?g(this._events):[]}},{}],8:[function(e,t){t.exports=function(){if("undefined"==typeof globalThis)return null;var e={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}},{}],9:[function(n,i,o){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */o.read=function(e,t,n,i,o){var s,a,l=8*o-i-1,c=(1<<l)-1,u=c>>1,d=-7,h=n?o-1:0,f=n?-1:1,p=e[t+h];for(h+=f,s=p&(1<<-d)-1,p>>=-d,d+=l;0<d;s=256*s+e[t+h],h+=f,d-=8);for(a=s&(1<<-d)-1,s>>=-d,d+=i;0<d;a=256*a+e[t+h],h+=f,d-=8);if(0===s)s=1-u;else{if(s===c)return a?NaN:1/0*(p?-1:1);a+=r(2,i),s-=u}return(p?-1:1)*a*r(2,s-i)},o.write=function(n,i,o,s,a,l){var c,u,d,h=Math.LN2,f=Math.log,p=8*l-a-1,m=(1<<p)-1,g=m>>1,v=23===a?r(2,-24)-r(2,-77):0,y=s?0:l-1,b=s?1:-1,_=0>i||0===i&&0>1/i?1:0;for(i=t(i),isNaN(i)||i===1/0?(u=isNaN(i)?1:0,c=m):(c=e(f(i)/h),1>i*(d=r(2,-c))&&(c--,d*=2),i+=1<=c+g?v/d:v*r(2,1-g),2<=i*d&&(c++,d/=2),c+g>=m?(u=0,c=m):1<=c+g?(u=(i*d-1)*r(2,a),c+=g):(u=i*r(2,g-1)*r(2,a),c=0));8<=a;n[o+y]=255&u,y+=b,u/=256,a-=8);for(c=c<<a|u,p+=a;0<p;n[o+y]=255&c,y+=b,c/=256,p-=8);n[o+y-b]|=128*_}},{}],10:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},{}],11:[function(e,n){var r=Math.round;function i(e){if(e+="",!(100<e.length)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();return"years"===r||"year"===r||"yrs"===r||"yr"===r||"y"===r?315576e5*n:"weeks"===r||"week"===r||"w"===r?6048e5*n:"days"===r||"day"===r||"d"===r?864e5*n:"hours"===r||"hour"===r||"hrs"===r||"hr"===r||"h"===r?36e5*n:"minutes"===r||"minute"===r||"mins"===r||"min"===r||"m"===r?6e4*n:"seconds"===r||"second"===r||"secs"===r||"sec"===r||"s"===r?1e3*n:"milliseconds"===r||"millisecond"===r||"msecs"===r||"msec"===r||"ms"===r?n:void 0}}}function o(e){var n=t(e);return 864e5<=n?r(e/864e5)+"d":36e5<=n?r(e/36e5)+"h":6e4<=n?r(e/6e4)+"m":1e3<=n?r(e/1e3)+"s":e+"ms"}function s(e){var n=t(e);return 864e5<=n?a(e,n,864e5,"day"):36e5<=n?a(e,n,36e5,"hour"):6e4<=n?a(e,n,6e4,"minute"):1e3<=n?a(e,n,1e3,"second"):e+" ms"}function a(e,t,n,i){return r(e/n)+" "+i+(t>=1.5*n?"s":"")}n.exports=function(e,t){t=t||{};var n=typeof e;if("string"==n&&0<e.length)return i(e);if("number"===n&&isFinite(e))return t.long?s(e):o(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],12:[function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(n){try{return u.call(null,e,0)}catch(n){return u.call(this,e,0)}}}function o(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(n){try{return d.call(null,e)}catch(n){return d.call(this,e)}}}function s(){m&&f&&(m=!1,f.length?p=f.concat(p):g=-1,p.length&&a())}function a(){if(!m){var e=i(s);m=!0;for(var t=p.length;t;){for(f=p,p=[];++g<t;)f&&f[g].run();g=-1,t=p.length}f=null,m=!1,o(e)}}function l(e,t){this.fun=e,this.array=t}function c(){}var u,d,h=t.exports={};(function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(t){u=n}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(t){d=r}})();var f,p=[],m=!1,g=-1;h.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new l(e,t)),1!==p.length||m||i(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(){return[]},h.binding=function(){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],13:[function(e,t){(function(e){(function(){
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let n;t.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"==typeof window?e:window):e=>(n||(n=Promise.resolve())).then(e).catch((e=>setTimeout((()=>{throw e}),0)))}).call(this)}).call(this,"undefined"==typeof n.g?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:n.g)},{}],14:[function(e,t){(function(n,r){(function(){"use strict";var i=e("safe-buffer").Buffer,o=r.crypto||r.msCrypto;t.exports=o&&o.getRandomValues?function(e,t){if(e>4294967295)throw new RangeError("requested too many random bytes");var r=i.allocUnsafe(e);if(0<e)if(65536<e)for(var s=0;s<e;s+=65536)o.getRandomValues(r.slice(s,s+65536));else o.getRandomValues(r);return"function"==typeof t?n.nextTick((function(){t(null,r)})):r}:function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this)}).call(this,e("_process"),"undefined"==typeof n.g?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:n.g)},{_process:12,"safe-buffer":30}],15:[function(e,t){"use strict";function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function r(e,t,r){function i(e,n,r){return"string"==typeof t?t:t(e,n,r)}r||(r=Error);var o=function(e){function t(t,n,r){return e.call(this,i(t,n,r))||this}return n(t,e),t}(r);o.prototype.name=r.name,o.prototype.code=e,l[e]=o}function i(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return e+""})),2<n?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(e+"")}function o(e,t,n){return e.substr(!n||0>n?0:+n,t.length)===t}function s(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}function a(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}var l={};r("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),r("ERR_INVALID_ARG_TYPE",(function(e,t,n){var r,l;if("string"==typeof t&&o(t,"not ")?(r="must not be",t=t.replace(/^not /,"")):r="must be",s(e," argument"))l="The ".concat(e," ").concat(r," ").concat(i(t,"type"));else{var c=a(e,".")?"property":"argument";l='The "'.concat(e,'" ').concat(c," ").concat(r," ").concat(i(t,"type"))}return l+=". Received type ".concat(typeof n),l}),TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=l},{}],16:[function(e,t){(function(n){(function(){"use strict";function r(e){return this instanceof r?(a.call(this,e),l.call(this,e),this.allowHalfOpen=!0,void(e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",i))))):new r(e)}function i(){this._writableState.ended||n.nextTick(o,this)}function o(e){e.end()}var s=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=r;var a=e("./_stream_readable"),l=e("./_stream_writable");e("inherits")(r,a);for(var c,u=s(l.prototype),d=0;d<u.length;d++)c=u[d],r.prototype[c]||(r.prototype[c]=l.prototype[c]);Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(r.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(r.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))},{"./_stream_readable":18,"./_stream_writable":20,_process:12,inherits:10}],17:[function(e,t){"use strict";function n(e){return this instanceof n?void r.call(this,e):new n(e)}t.exports=n;var r=e("./_stream_transform");e("inherits")(n,r),n.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":19,inherits:10}],18:[function(e,t){(function(n,r){(function(){"use strict";function i(e){return L.from(e)}function o(e){return L.isBuffer(e)||e instanceof D}function s(e,t,n){return"function"==typeof e.prependListener?e.prependListener(t,n):void(e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n))}function a(t,n,r){k=k||e("./_stream_duplex"),t=t||{},"boolean"!=typeof r&&(r=n instanceof k),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=j(this,t,"readableHighWaterMark",r),this.buffer=new B,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(!N&&(N=e("string_decoder/").StringDecoder),this.decoder=new N(t.encoding),this.encoding=t.encoding)}function l(t){if(k=k||e("./_stream_duplex"),!(this instanceof l))return new l(t);var n=this instanceof k;this._readableState=new a(t,this,n),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),P.call(this)}function c(e,t,n,r,o){O("readableAddChunk",t);var s,a=e._readableState;if(null===t)a.reading=!1,p(e,a);else if(o||(s=d(a,t)),s)Y(e,s);else if(a.objectMode||t&&0<t.length)if("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===L.prototype||(t=i(t)),r)a.endEmitted?Y(e,new q):u(e,a,t,!0);else if(a.ended)Y(e,new G);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?u(e,a,t,!1):v(e,a)):u(e,a,t,!1)}else r||(a.reading=!1,v(e,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function u(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&m(e)),v(e,t)}function d(e,t){var n;return o(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new W("chunk",["string","Buffer","Uint8Array"],t)),n}function h(e){return 1073741824<=e?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function f(e,t){return 0>=e||0===t.length&&t.ended?0:t.objectMode?1:e===e?(e>t.highWaterMark&&(t.highWaterMark=h(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0)):t.flowing&&t.length?t.buffer.head.data.length:t.length}function p(e,t){if(O("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?m(e):(t.needReadable=!1,!t.emittedReadable&&(t.emittedReadable=!0,g(e)))}}function m(e){var t=e._readableState;O("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(O("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(g,e))}function g(e){var t=e._readableState;O("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,E(e)}function v(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(y,e,t))}function y(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(O("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function b(e){return function(){var t=e._readableState;O("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&R(e,"data")&&(t.flowing=!0,E(e))}}function _(e){var t=e._readableState;t.readableListening=0<e.listenerCount("readable"),t.resumeScheduled&&!t.paused?t.flowing=!0:0<e.listenerCount("data")&&e.resume()}function w(e){O("readable nexttick read 0"),e.read(0)}function x(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(S,e,t))}function S(e,t){O("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),E(e),t.flowing&&!t.reading&&e.read(0)}function E(e){var t=e._readableState;for(O("flow",t.flowing);t.flowing&&null!==e.read(););}function M(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function T(e){var t=e._readableState;O("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(C,t,e))}function C(e,t){if(O("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function A(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var k;t.exports=l,l.ReadableState=a;e("events").EventEmitter;var O,R=function(e,t){return e.listeners(t).length},P=e("./internal/streams/stream"),L=e("buffer").Buffer,D=r.Uint8Array||function(){},I=e("util");O=I&&I.debuglog?I.debuglog("stream"):function(){};var N,U,F,B=e("./internal/streams/buffer_list"),V=e("./internal/streams/destroy"),z=e("./internal/streams/state"),j=z.getHighWaterMark,H=e("../errors").codes,W=H.ERR_INVALID_ARG_TYPE,G=H.ERR_STREAM_PUSH_AFTER_EOF,$=H.ERR_METHOD_NOT_IMPLEMENTED,q=H.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(l,P);var Y=V.errorOrDestroy,X=["error","close","destroy","pause","resume"];Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),l.prototype.destroy=V.destroy,l.prototype._undestroy=V.undestroy,l.prototype._destroy=function(e,t){t(e)},l.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=L.from(e,t),t=""),n=!0),c(this,e,t,!1,n)},l.prototype.unshift=function(e){return c(this,e,null,!0,!1)},l.prototype.isPaused=function(){return!1===this._readableState.flowing},l.prototype.setEncoding=function(t){N||(N=e("string_decoder/").StringDecoder);var n=new N(t);this._readableState.decoder=n,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=n.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this},l.prototype.read=function(e){O("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0===t.highWaterMark?0<t.length:t.length>=t.highWaterMark)||t.ended))return O("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?T(this):m(this),null;if(e=f(e,t),0===e&&t.ended)return 0===t.length&&T(this),null;var r,i=t.needReadable;return O("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&(i=!0,O("length less than watermark",i)),t.ended||t.reading?(i=!1,O("reading or ended",i)):i&&(O("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,!t.reading&&(e=f(n,t))),r=0<e?M(e,t):null,null===r?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(!t.ended&&(t.needReadable=!0),n!==e&&t.ended&&T(this)),null!==r&&this.emit("data",r),r},l.prototype._read=function(){Y(this,new $("_read()"))},l.prototype.pipe=function(e,t){function r(e,t){O("onunpipe"),e===h&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,o())}function i(){O("onend"),e.end()}function o(){O("cleanup"),e.removeListener("close",c),e.removeListener("finish",u),e.removeListener("drain",g),e.removeListener("error",l),e.removeListener("unpipe",r),h.removeListener("end",i),h.removeListener("end",d),h.removeListener("data",a),v=!0,f.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&g()}function a(t){O("ondata");var n=e.write(t);O("dest.write",n),!1===n&&((1===f.pipesCount&&f.pipes===e||1<f.pipesCount&&-1!==A(f.pipes,e))&&!v&&(O("false write response, pause",f.awaitDrain),f.awaitDrain++),h.pause())}function l(t){O("onerror",t),d(),e.removeListener("error",l),0===R(e,"error")&&Y(e,t)}function c(){e.removeListener("finish",u),d()}function u(){O("onfinish"),e.removeListener("close",c),d()}function d(){O("unpipe"),h.unpipe(e)}var h=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=e;break;case 1:f.pipes=[f.pipes,e];break;default:f.pipes.push(e)}f.pipesCount+=1,O("pipe count=%d opts=%j",f.pipesCount,t);var p=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr,m=p?i:d;f.endEmitted?n.nextTick(m):h.once("end",m),e.on("unpipe",r);var g=b(h);e.on("drain",g);var v=!1;return h.on("data",a),s(e,"error",l),e.once("close",c),e.once("finish",u),e.emit("pipe",h),f.flowing||(O("pipe resume"),h.resume()),e},l.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=A(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},l.prototype.on=function(e,t){var r=P.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=0<this.listenerCount("readable"),!1!==i.flowing&&this.resume()):"readable"==e&&!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,O("on readable",i.length,i.reading),i.length?m(this):!i.reading&&n.nextTick(w,this)),r},l.prototype.addListener=l.prototype.on,l.prototype.removeListener=function(e,t){var r=P.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(_,this),r},l.prototype.removeAllListeners=function(e){var t=P.prototype.removeAllListeners.apply(this,arguments);return("readable"===e||void 0===e)&&n.nextTick(_,this),t},l.prototype.resume=function(){var e=this._readableState;return e.flowing||(O("resume"),e.flowing=!e.readableListening,x(this,e)),e.paused=!1,this},l.prototype.pause=function(){return O("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(O("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},l.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(O("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){if(O("wrapped data"),n.decoder&&(i=n.decoder.write(i)),(!n.objectMode||null!==i&&void 0!==i)&&(n.objectMode||i&&i.length)){var o=t.push(i);o||(r=!0,e.pause())}})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<X.length;o++)e.on(X[o],this.emit.bind(this,X[o]));return this._read=function(t){O("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(l.prototype[Symbol.asyncIterator]=function(){return void 0===U&&(U=e("./internal/streams/async_iterator")),U(this)}),Object.defineProperty(l.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(l.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(l.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),l._fromList=M,Object.defineProperty(l.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(l.from=function(t,n){return void 0===F&&(F=e("./internal/streams/from")),F(l,t,n)})}).call(this)}).call(this,e("_process"),"undefined"==typeof n.g?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:n.g)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/async_iterator":21,"./internal/streams/buffer_list":22,"./internal/streams/destroy":23,"./internal/streams/from":25,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,events:7,inherits:10,"string_decoder/":31,util:2}],19:[function(e,t){"use strict";function n(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new l);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function r(e){return this instanceof r?(d.call(this,e),this._transformState={afterTransform:n.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),void this.on("prefinish",i)):new r(e)}function i(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?o(this,null,null):this._flush((function(t,n){o(e,t,n)}))}function o(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new u;if(e._transformState.transforming)throw new c;return e.push(null)}t.exports=r;var s=e("../errors").codes,a=s.ERR_METHOD_NOT_IMPLEMENTED,l=s.ERR_MULTIPLE_CALLBACK,c=s.ERR_TRANSFORM_ALREADY_TRANSFORMING,u=s.ERR_TRANSFORM_WITH_LENGTH_0,d=e("./_stream_duplex");e("inherits")(r,d),r.prototype.push=function(e,t){return this._transformState.needTransform=!1,d.prototype.push.call(this,e,t)},r.prototype._transform=function(e,t,n){n(new a("_transform()"))},r.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},r.prototype._read=function(){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},r.prototype._destroy=function(e,t){d.prototype._destroy.call(this,e,(function(e){t(e)}))}},{"../errors":15,"./_stream_duplex":16,inherits:10}],20:[function(e,t){(function(n,r){(function(){"use strict";function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){T(t,e)}}function o(e){return R.from(e)}function s(e){return R.isBuffer(e)||e instanceof P}function a(){}function l(t,n,r){C=C||e("./_stream_duplex"),t=t||{},"boolean"!=typeof r&&(r=n instanceof C),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=I(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===t.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){v(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function c(t){C=C||e("./_stream_duplex");var n=this instanceof C;return n||A.call(c,this)?(this._writableState=new l(t,this,n),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),void O.call(this)):new c(t)}function u(e,t){var r=new H;G(e,r),n.nextTick(t,r)}function d(e,t,r,i){var o;return null===r?o=new j:"string"!=typeof r&&!t.objectMode&&(o=new U("chunk",["string","Buffer"],r)),!o||(G(e,o),n.nextTick(i,o),!1)}function h(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=R.from(t,n)),t}function f(e,t,n,r,i,o){if(!n){var s=h(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=t.objectMode?1:r.length;t.length+=a;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else p(e,t,!1,a,r,i,o);return l}function p(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new z("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function m(e,t,r,i,o){--t.pendingcb,r?(n.nextTick(o,i),n.nextTick(E,e,t),e._writableState.errorEmitted=!0,G(e,i)):(o(i),e._writableState.errorEmitted=!0,G(e,i),E(e,t))}function g(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function v(e,t){var r=e._writableState,i=r.sync,o=r.writecb;if("function"!=typeof o)throw new B;if(g(r),t)m(e,r,i,t,o);else{var s=w(r)||e.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||_(e,r),i?n.nextTick(y,e,r,s,o):y(e,r,s,o)}}function y(e,t,n,r){n||b(e,t),t.pendingcb--,r(),E(e,t)}function b(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function _(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=Array(r),s=t.corkedRequestsFree;s.entry=n;for(var a=0,l=!0;n;)o[a]=n,n.isBuf||(l=!1),n=n.next,a+=1;o.allBuffers=l,p(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,u=n.encoding,d=n.callback,h=t.objectMode?1:c.length;if(p(e,t,!1,h,c,u,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function w(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function x(e,t){e._final((function(n){t.pendingcb--,n&&G(e,n),t.prefinished=!0,e.emit("prefinish"),E(e,t)}))}function S(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(x,e,t)))}function E(e,t){var n=w(t);if(n&&(S(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var r=e._readableState;(!r||r.autoDestroy&&r.endEmitted)&&e.destroy()}return n}function M(e,t,r){t.ending=!0,E(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function T(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}var C;t.exports=c,c.WritableState=l;var A,k={deprecate:e("util-deprecate")},O=e("./internal/streams/stream"),R=e("buffer").Buffer,P=r.Uint8Array||function(){},L=e("./internal/streams/destroy"),D=e("./internal/streams/state"),I=D.getHighWaterMark,N=e("../errors").codes,U=N.ERR_INVALID_ARG_TYPE,F=N.ERR_METHOD_NOT_IMPLEMENTED,B=N.ERR_MULTIPLE_CALLBACK,V=N.ERR_STREAM_CANNOT_PIPE,z=N.ERR_STREAM_DESTROYED,j=N.ERR_STREAM_NULL_VALUES,H=N.ERR_STREAM_WRITE_AFTER_END,W=N.ERR_UNKNOWN_ENCODING,G=L.errorOrDestroy;e("inherits")(c,O),l.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(l.prototype,"buffer",{get:k.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(A=Function.prototype[Symbol.hasInstance],Object.defineProperty(c,Symbol.hasInstance,{value:function(e){return!!A.call(this,e)||!(this!==c)&&e&&e._writableState instanceof l}})):A=function(e){return e instanceof this},c.prototype.pipe=function(){G(this,new V)},c.prototype.write=function(e,t,n){var r=this._writableState,i=!1,l=!r.objectMode&&s(e);return l&&!R.isBuffer(e)&&(e=o(e)),"function"==typeof t&&(n=t,t=null),l?t="buffer":!t&&(t=r.defaultEncoding),"function"!=typeof n&&(n=a),r.ending?u(this,n):(l||d(this,r,e,n))&&(r.pendingcb++,i=f(this,r,l,e,t,n)),i},c.prototype.cork=function(){this._writableState.corked++},c.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.bufferProcessing&&e.bufferedRequest&&_(this,e))},c.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new W(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),c.prototype._write=function(e,t,n){n(new F("_write()"))},c.prototype._writev=null,c.prototype.end=function(e,t,n){var r=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||M(this,r,n),this},Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),c.prototype.destroy=L.destroy,c.prototype._undestroy=L.undestroy,c.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"),"undefined"==typeof n.g?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:n.g)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/destroy":23,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,inherits:10,"util-deprecate":32}],21:[function(e,t){(function(n){(function(){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){return{value:e,done:t}}function o(e){var t=e[u];if(null!==t){var n=e[g].read();null!==n&&(e[p]=null,e[u]=null,e[d]=null,t(i(n,!1)))}}function s(e){n.nextTick(o,e)}function a(e,t){return function(n,r){e.then((function(){return t[f]?void n(i(void 0,!0)):void t[m](n,r)}),r)}}var l,c=e("./end-of-stream"),u=Symbol("lastResolve"),d=Symbol("lastReject"),h=Symbol("error"),f=Symbol("ended"),p=Symbol("lastPromise"),m=Symbol("handlePromise"),g=Symbol("stream"),v=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((l={get stream(){return this[g]},next:function(){var e=this,t=this[h];if(null!==t)return Promise.reject(t);if(this[f])return Promise.resolve(i(void 0,!0));if(this[g].destroyed)return new Promise((function(t,r){n.nextTick((function(){e[h]?r(e[h]):t(i(void 0,!0))}))}));var r,o=this[p];if(o)r=new Promise(a(o,this));else{var s=this[g].read();if(null!==s)return Promise.resolve(i(s,!1));r=new Promise(this[m])}return this[p]=r,r}},r(l,Symbol.asyncIterator,(function(){return this})),r(l,"return",(function(){var e=this;return new Promise((function(t,n){e[g].destroy(null,(function(e){return e?void n(e):void t(i(void 0,!0))}))}))})),l),v);t.exports=function(e){var t,n=Object.create(y,(t={},r(t,g,{value:e,writable:!0}),r(t,u,{value:null,writable:!0}),r(t,d,{value:null,writable:!0}),r(t,h,{value:null,writable:!0}),r(t,f,{value:e._readableState.endEmitted,writable:!0}),r(t,m,{value:function(e,t){var r=n[g].read();r?(n[p]=null,n[u]=null,n[d]=null,e(i(r,!1))):(n[u]=e,n[d]=t)},writable:!0}),t));return n[p]=null,c(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[d];return null!==t&&(n[p]=null,n[u]=null,n[d]=null,t(e)),void(n[h]=e)}var r=n[u];null!==r&&(n[p]=null,n[u]=null,n[d]=null,r(i(void 0,!0))),n[f]=!0})),e.on("readable",s.bind(null,n)),n}}).call(this)}).call(this,e("_process"))},{"./end-of-stream":24,_process:12}],22:[function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t,r=1;r<arguments.length;r++)t=null==arguments[r]?{}:arguments[r],r%2?n(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n,r=0;r<t.length;r++)n=t[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function l(e,t,n){u.prototype.copy.call(e,t,n)}var c=e("buffer"),u=c.Buffer,d=e("util"),h=d.inspect,f=h&&h.custom||"inspect";t.exports=function(){function e(){o(this,e),this.head=null,this.tail=null,this.length=0}return a(e,[{key:"push",value:function(e){var t={data:e,next:null};0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return u.alloc(0);for(var t=u.allocUnsafe(e>>>0),n=this.head,r=0;n;)l(n.data,t,r),r+=n.data.length,n=n.next;return t}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(r+=o===i.length?i:i.slice(0,e),e-=o,0===e){o===i.length?(++n,this.head=t.next?t.next:this.tail=null):(this.head=t,t.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=u.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),e-=o,0===e){o===i.length?(++r,this.head=n.next?n.next:this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,t}},{key:f,value:function(e,t){return h(this,r({},t,{depth:0,customInspect:!1}))}}]),e}()},{buffer:3,util:2}],23:[function(e,t){(function(e){(function(){"use strict";function n(e,t){i(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}t.exports={destroy:function(t,o){var s=this,a=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return a||l?(o?o(t):t&&(this._writableState?!this._writableState.errorEmitted&&(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!o&&t?s._writableState?s._writableState.errorEmitted?e.nextTick(r,s):(s._writableState.errorEmitted=!0,e.nextTick(n,s,t)):e.nextTick(n,s,t):o?(e.nextTick(r,s),o(t)):e.nextTick(r,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))},{_process:12}],24:[function(e,t){"use strict";function n(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}function r(){}function i(e){return e.setHeader&&"function"==typeof e.abort}function o(e,t,a){if("function"==typeof t)return o(e,null,t);t||(t={}),a=n(a||r);var l=t.readable||!1!==t.readable&&e.readable,c=t.writable||!1!==t.writable&&e.writable,u=function(){e.writable||h()},d=e._writableState&&e._writableState.finished,h=function(){c=!1,d=!0,l||a.call(e)},f=e._readableState&&e._readableState.endEmitted,p=function(){l=!1,f=!0,c||a.call(e)},m=function(t){a.call(e,t)},g=function(){var t;return l&&!f?(e._readableState&&e._readableState.ended||(t=new s),a.call(e,t)):c&&!d?(e._writableState&&e._writableState.ended||(t=new s),a.call(e,t)):void 0},v=function(){e.req.on("finish",h)};return i(e)?(e.on("complete",h),e.on("abort",g),e.req?v():e.on("request",v)):c&&!e._writableState&&(e.on("end",u),e.on("close",u)),e.on("end",p),e.on("finish",h),!1!==t.error&&e.on("error",m),e.on("close",g),function(){e.removeListener("complete",h),e.removeListener("abort",g),e.removeListener("request",v),e.req&&e.req.removeListener("finish",h),e.removeListener("end",u),e.removeListener("close",u),e.removeListener("finish",h),e.removeListener("end",p),e.removeListener("error",m),e.removeListener("close",g)}}var s=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;t.exports=o},{"../../../errors":15}],25:[function(e,t){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],26:[function(e,t){"use strict";function n(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}function r(e){if(e)throw e}function i(e){return e.setHeader&&"function"==typeof e.abort}function o(t,r,o,s){s=n(s);var a=!1;t.on("close",(function(){a=!0})),void 0===c&&(c=e("./end-of-stream")),c(t,{readable:r,writable:o},(function(e){return e?s(e):(a=!0,void s())}));var l=!1;return function(e){if(!a)return l?void 0:(l=!0,i(t)?t.abort():"function"==typeof t.destroy?t.destroy():void s(e||new h("pipe")))}}function s(e){e()}function a(e,t){return e.pipe(t)}function l(e){return e.length&&"function"==typeof e[e.length-1]?e.pop():r}var c,u=e("../../../errors").codes,d=u.ERR_MISSING_ARGS,h=u.ERR_STREAM_DESTROYED;t.exports=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=l(t);if(Array.isArray(t[0])&&(t=t[0]),2>t.length)throw new d("streams");var i,c=t.map((function(e,n){var a=n<t.length-1;return o(e,a,0<n,(function(e){i||(i=e),e&&c.forEach(s),a||(c.forEach(s),r(i))}))}));return t.reduce(a)}},{"../../../errors":15,"./end-of-stream":24}],27:[function(t,n){"use strict";function r(e,t,n){return null==e.highWaterMark?t?e[n]:null:e.highWaterMark}var i=t("../../../errors").codes.ERR_INVALID_OPT_VALUE;n.exports={getHighWaterMark:function(t,n,o,s){var a=r(n,s,o);if(null!=a){if(!isFinite(a)||e(a)!==a||0>a){var l=s?o:"highWaterMark";throw new i(l,a)}return e(a)}return t.objectMode?16:16384}}},{"../../../errors":15}],28:[function(e,t){t.exports=e("events").EventEmitter},{events:7}],29:[function(e,t,n){n=t.exports=e("./lib/_stream_readable.js"),n.Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),n.finished=e("./lib/internal/streams/end-of-stream.js"),n.pipeline=e("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":16,"./lib/_stream_passthrough.js":17,"./lib/_stream_readable.js":18,"./lib/_stream_transform.js":19,"./lib/_stream_writable.js":20,"./lib/internal/streams/end-of-stream.js":24,"./lib/internal/streams/pipeline.js":26}],30:[function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function i(e,t,n){return s(e,t,n)}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var o=e("buffer"),s=o.Buffer;s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=o:(r(o,n),n.Buffer=i),i.prototype=Object.create(s.prototype),r(s,i),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return s(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=s(e);return void 0===t?r.fill(0):"string"==typeof n?r.fill(t,n):r.fill(t),r},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return s(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},{buffer:3}],31:[function(e,t,n){"use strict";function r(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function i(e){var t=r(e);if("string"!=typeof t&&(g.isEncoding===v||!v(e)))throw new Error("Unknown encoding: "+e);return t||e}function o(e){var t;switch(this.encoding=i(e),this.encoding){case"utf16le":this.text=u,this.end=d,t=4;break;case"utf8":this.fillLast=c,t=4;break;case"base64":this.text=h,this.end=f,t=3;break;default:return this.write=p,void(this.end=m)}this.lastNeed=0,this.lastTotal=0,this.lastChar=g.allocUnsafe(t)}function s(e){return 127>=e?0:6==e>>5?2:14==e>>4?3:30==e>>3?4:2==e>>6?-1:-2}function a(e,t,n){var r=t.length-1;if(r<n)return 0;var i=s(t[r]);return 0<=i?(0<i&&(e.lastNeed=i-1),i):--r<n||-2===i?0:(i=s(t[r]),0<=i?(0<i&&(e.lastNeed=i-2),i):--r<n||-2===i?0:(i=s(t[r]),0<=i?(0<i&&(2===i?i=0:e.lastNeed=i-3),i):0))}function l(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(1<e.lastNeed&&1<t.length){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(2<e.lastNeed&&2<t.length&&128!=(192&t[2]))return e.lastNeed=2,"�"}}function c(e){var t=this.lastTotal-this.lastNeed,n=l(this,e,t);return void 0===n?this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length)):n}function u(e,t){if(0==(e.length-t)%2){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(55296<=r&&56319>=r)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function d(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function h(e,t){var n=(e.length-t)%3;return 0==n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1==n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function m(e){return e&&e.length?this.write(e):""}var g=e("safe-buffer").Buffer,v=g.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};n.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(t=this.fillLast(e),void 0===t)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var n=a(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){return this.lastNeed<=e.length?(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),void(this.lastNeed-=e.length))}},{"safe-buffer":30}],32:[function(e,t){(function(e){(function(){function n(t){try{if(!e.localStorage)return!1}catch(e){return!1}var n=e.localStorage[t];return null!=n&&"true"===(n+"").toLowerCase()}t.exports=function(e,t){function r(){if(!i){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}if(n("noDeprecation"))return e;var i=!1;return r}}).call(this)}).call(this,"undefined"==typeof n.g?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:n.g)},{}],"/":[function(e,t){function n(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}function r(e){console.warn(e)}/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const i=e("debug")("simple-peer"),o=e("get-browser-rtc"),s=e("randombytes"),a=e("readable-stream"),l=e("queue-microtask"),c=e("err-code"),{Buffer:u}=e("buffer"),d=65536;class h extends a.Duplex{constructor(e){if(e=Object.assign({allowHalfOpen:!1},e),super(e),this._id=s(4).toString("hex").slice(0,7),this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||s(20).toString("hex"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||h.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},h.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(e=>e),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=void 0===e.trickle||e.trickle,this.allowHalfTrickle=void 0!==e.allowHalfTrickle&&e.allowHalfTrickle,this.iceCompleteTimeout=e.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:o(),!this._wrtc)throw"undefined"==typeof window?c(new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"),"ERR_WEBRTC_SUPPORT"):c(new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(e){return void this.destroy(c(e,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc="number"==typeof this._pc._peerConnectionId,this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=e=>{this._onIceCandidate(e)},"object"==typeof this._pc.peerIdentity&&this._pc.peerIdentity.catch((e=>{this.destroy(c(e,"ERR_PC_PEER_IDENTITY"))})),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=e=>{this._setupData(e)},this.streams&&this.streams.forEach((e=>{this.addStream(e)})),this._pc.ontrack=e=>{this._onTrack(e)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&"open"===this._channel.readyState}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then((()=>{this.destroyed||(this._pendingCandidates.forEach((e=>{this._addIceCandidate(e)})),this._pendingCandidates=[],"offer"===this._pc.remoteDescription.type&&this._createAnswer())})).catch((e=>{this.destroy(c(e,"ERR_SET_REMOTE_DESCRIPTION"))})),e.sdp||e.candidate||e.renegotiate||e.transceiverRequest||this.destroy(c(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(e){const t=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(t).catch((e=>{!t.address||t.address.endsWith(".local")?r("Ignoring unsupported ICE candidate."):this.destroy(c(e,"ERR_ADD_ICE_CANDIDATE"))}))}send(e){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(e)}}addTransceiver(e,t){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,t),this._needsNegotiation()}catch(e){this.destroy(c(e,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:e,init:t}})}}addStream(e){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),e.getTracks().forEach((t=>{this.addTrack(t,e)}))}}addTrack(e,t){if(this.destroying)return;if(this.destroyed)throw c(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const n=this._senderMap.get(e)||new Map;let r=n.get(t);if(r)throw r.removed?c(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):c(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED");r=this._pc.addTrack(e,t),n.set(t,r),this._senderMap.set(e,n),this._needsNegotiation()}replaceTrack(e,t,n){if(this.destroying)return;if(this.destroyed)throw c(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const r=this._senderMap.get(e),i=r?r.get(n):null;if(!i)throw c(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");t&&this._senderMap.set(t,r),null==i.replaceTrack?this.destroy(c(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK")):i.replaceTrack(t)}removeTrack(e,t){if(this.destroying)return;if(this.destroyed)throw c(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const n=this._senderMap.get(e),r=n?n.get(t):null;if(!r)throw c(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{r.removed=!0,this._pc.removeTrack(r)}catch(e){"NS_ERROR_UNEXPECTED"===e.name?this._sendersAwaitingStable.push(r):this.destroy(c(e,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(e){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),e.getTracks().forEach((t=>{this.removeTrack(t,e)}))}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,l((()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1})))}negotiate(){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout((()=>{this._createOffer()}),0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(e){this._destroy(e,(()=>{}))}_destroy(e,t){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",e&&(e.message||e)),l((()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(e){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(e){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,e&&this.emit("error",e),this.emit("close"),t()})))}_setupData(e){if(!e.channel)return this.destroy(c(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer","number"==typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=d),this.channelName=this._channel.label,this._channel.onmessage=e=>{this._onChannelMessage(e)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=e=>{const t=e.error instanceof Error?e.error:new Error(`Datachannel error: ${e.message} ${e.filename}:${e.lineno}:${e.colno}`);this.destroy(c(t,"ERR_DATA_CHANNEL"))};let t=!1;this._closingInterval=setInterval((()=>{this._channel&&"closing"===this._channel.readyState?(t&&this._onChannelClose(),t=!0):t=!1}),5e3)}_read(){}_write(e,t,n){if(this.destroyed)return n(c(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(e){return this.destroy(c(e,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>d?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=e,this._cb=n}_onFinish(){if(!this.destroyed){const e=()=>{setTimeout((()=>this.destroy()),1e3)};this._connected?e():this.once("connect",e)}}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout((()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))}),this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then((e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=n(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(!this.destroyed){const t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp})}};this._pc.setLocalDescription(e).then((()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))})).catch((e=>{this.destroy(c(e,"ERR_SET_LOCAL_DESCRIPTION"))}))})).catch((e=>{this.destroy(c(e,"ERR_CREATE_OFFER"))}))}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach((e=>{e.mid||!e.sender.track||e.requested||(e.requested=!0,this.addTransceiver(e.sender.track.kind))}))}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then((e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=n(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(!this.destroyed){const t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(e).then((()=>{this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))})).catch((e=>{this.destroy(c(e,"ERR_SET_LOCAL_DESCRIPTION"))}))})).catch((e=>{this.destroy(c(e,"ERR_CREATE_ANSWER"))}))}_onConnectionStateChange(){this.destroyed||"failed"===this._pc.connectionState&&this.destroy(c(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const e=this._pc.iceConnectionState,t=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,t),this.emit("iceStateChange",e,t),("connected"===e||"completed"===e)&&(this._pcReady=!0,this._maybeReady()),"failed"===e&&this.destroy(c(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),"closed"===e&&this.destroy(c(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(e){const t=e=>("[object Array]"===Object.prototype.toString.call(e.values)&&e.values.forEach((t=>{Object.assign(e,t)})),e);0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then((n=>{const r=[];n.forEach((e=>{r.push(t(e))})),e(null,r)}),(t=>e(t))):0<this._pc.getStats.length?this._pc.getStats((n=>{if(this.destroyed)return;const r=[];n.result().forEach((e=>{const n={};e.names().forEach((t=>{n[t]=e.stat(t)})),n.id=e.id,n.type=e.type,n.timestamp=e.timestamp,r.push(t(n))})),e(null,r)}),(t=>e(t))):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const e=()=>{this.destroyed||this.getStats(((t,n)=>{if(this.destroyed)return;t&&(n=[]);const r={},i={},o={};let s=!1;n.forEach((e=>{("remotecandidate"===e.type||"remote-candidate"===e.type)&&(r[e.id]=e),("localcandidate"===e.type||"local-candidate"===e.type)&&(i[e.id]=e),("candidatepair"===e.type||"candidate-pair"===e.type)&&(o[e.id]=e)}));const a=e=>{s=!0;let t=i[e.localCandidateId];t&&(t.ip||t.address)?(this.localAddress=t.ip||t.address,this.localPort=+t.port):t&&t.ipAddress?(this.localAddress=t.ipAddress,this.localPort=+t.portNumber):"string"==typeof e.googLocalAddress&&(t=e.googLocalAddress.split(":"),this.localAddress=t[0],this.localPort=+t[1]),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let n=r[e.remoteCandidateId];n&&(n.ip||n.address)?(this.remoteAddress=n.ip||n.address,this.remotePort=+n.port):n&&n.ipAddress?(this.remoteAddress=n.ipAddress,this.remotePort=+n.portNumber):"string"==typeof e.googRemoteAddress&&(n=e.googRemoteAddress.split(":"),this.remoteAddress=n[0],this.remotePort=+n[1]),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(n.forEach((e=>{"transport"===e.type&&e.selectedCandidatePairId&&a(o[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&a(e)})),s||Object.keys(o).length&&!Object.keys(i).length){if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(e){return this.destroy(c(e,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const t=this._cb;this._cb=null,t(null)}"number"!=typeof this._channel.bufferedAmountLowThreshold&&(this._interval=setInterval((()=>this._onInterval()),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}else setTimeout(e,100)}))};e()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>d)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||("stable"===this._pc.signalingState&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach((e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0})),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):!e.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(e){if(this.destroyed)return;let t=e.data;t instanceof ArrayBuffer&&(t=u.from(t)),this.push(t)}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const e=this._cb;this._cb=null,e(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach((t=>{this._debug("on track"),this.emit("track",e.track,t),this._remoteTracks.push({track:e.track,stream:t}),this._remoteStreams.some((e=>e.id===t.id))||(this._remoteStreams.push(t),l((()=>{this._debug("on stream"),this.emit("stream",t)})))}))}_debug(){const e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],i.apply(null,e)}}h.WEBRTC_SUPPORT=!!o(),h.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},h.channelConfig={},t.exports=h},{buffer:3,debug:4,"err-code":6,"get-browser-rtc":8,"queue-microtask":13,randombytes:14,"readable-stream":29}]},{},[])("/")}))},9241:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315),n(1703);var r,i=new Uint8Array(16);function o(){if(!r&&(r="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}n(7658);var s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function a(e){return"string"===typeof e&&s.test(e)}for(var l=a,c=[],u=0;u<256;++u)c.push((u+256).toString(16).substr(1));function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!l(n))throw TypeError("Stringified UUID is invalid");return n}var h=d;function f(e,t,n){e=e||{};var r=e.random||(e.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return h(r)}var p=f},5312:function(e,t){"use strict";t.Z=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n}},3702:function(e,t,n){"use strict";n.r(t),n.d(t,{BaseTransition:function(){return r.P$},BaseTransitionPropsValidators:function(){return r.nJ},Comment:function(){return r.sv},EffectScope:function(){return r.Bj},Fragment:function(){return r.HY},KeepAlive:function(){return r.Ob},ReactiveEffect:function(){return r.qq},Static:function(){return r.qG},Suspense:function(){return r.n4},Teleport:function(){return r.lR},Text:function(){return r.xv},Transition:function(){return r.uT},TransitionGroup:function(){return r.W3},VueElement:function(){return r.a2},assertNumber:function(){return r.Wu},callWithAsyncErrorHandling:function(){return r.$d},callWithErrorHandling:function(){return r.KU},camelize:function(){return r._A},capitalize:function(){return r.kC},cloneVNode:function(){return r.Ho},compatUtils:function(){return r.ry},compile:function(){return i},computed:function(){return r.Fl},createApp:function(){return r.ri},createBlock:function(){return r.j4},createCommentVNode:function(){return r.kq},createElementBlock:function(){return r.iD},createElementVNode:function(){return r._},createHydrationRenderer:function(){return r.Eo},createPropsRestProxy:function(){return r.p1},createRenderer:function(){return r.Us},createSSRApp:function(){return r.vr},createSlots:function(){return r.Nv},createStaticVNode:function(){return r.uE},createTextVNode:function(){return r.Uk},createVNode:function(){return r.Wm},customRef:function(){return r.ZM},defineAsyncComponent:function(){return r.RC},defineComponent:function(){return r.aZ},defineCustomElement:function(){return r.MW},defineEmits:function(){return r.Bz},defineExpose:function(){return r.WY},defineModel:function(){return r.Gn},defineOptions:function(){return r.Yu},defineProps:function(){return r.yb},defineSSRCustomElement:function(){return r.Ah},defineSlots:function(){return r.Wl},devtools:function(){return r.mW},effect:function(){return r.cE},effectScope:function(){return r.B},getCurrentInstance:function(){return r.FN},getCurrentScope:function(){return r.nZ},getTransitionRawChildren:function(){return r.Q6},guardReactiveProps:function(){return r.F4},h:function(){return r.h},handleError:function(){return r.S3},hasInjectionContext:function(){return r.EM},hydrate:function(){return r.ZB},initCustomFormatter:function(){return r.Mr},initDirectivesForSSR:function(){return r.Nd},inject:function(){return r.f3},isMemoSame:function(){return r.nQ},isProxy:function(){return r.X3},isReactive:function(){return r.PG},isReadonly:function(){return r.$y},isRef:function(){return r.dq},isRuntimeOnly:function(){return r.of},isShallow:function(){return r.yT},isVNode:function(){return r.lA},markRaw:function(){return r.Xl},mergeDefaults:function(){return r.u_},mergeModels:function(){return r.Vf},mergeProps:function(){return r.dG},nextTick:function(){return r.Y3},normalizeClass:function(){return r.C_},normalizeProps:function(){return r.vs},normalizeStyle:function(){return r.j5},onActivated:function(){return r.dl},onBeforeMount:function(){return r.wF},onBeforeUnmount:function(){return r.Jd},onBeforeUpdate:function(){return r.Xn},onDeactivated:function(){return r.se},onErrorCaptured:function(){return r.d1},onMounted:function(){return r.bv},onRenderTracked:function(){return r.bT},onRenderTriggered:function(){return r.Yq},onScopeDispose:function(){return r.EB},onServerPrefetch:function(){return r.vl},onUnmounted:function(){return r.SK},onUpdated:function(){return r.ic},openBlock:function(){return r.wg},popScopeId:function(){return r.Cn},provide:function(){return r.JJ},proxyRefs:function(){return r.WL},pushScopeId:function(){return r.dD},queuePostFlushCb:function(){return r.qb},reactive:function(){return r.qj},readonly:function(){return r.OT},ref:function(){return r.iH},registerRuntimeCompiler:function(){return r.Y1},render:function(){return r.sY},renderList:function(){return r.Ko},renderSlot:function(){return r.WI},resolveComponent:function(){return r.up},resolveDirective:function(){return r.Q2},resolveDynamicComponent:function(){return r.LL},resolveFilter:function(){return r.eq},resolveTransitionHooks:function(){return r.U2},setBlockTracking:function(){return r.qZ},setDevtoolsHook:function(){return r.ec},setTransitionHooks:function(){return r.nK},shallowReactive:function(){return r.Um},shallowReadonly:function(){return r.YS},shallowRef:function(){return r.XI},ssrContextKey:function(){return r.Uc},ssrUtils:function(){return r.G},stop:function(){return r.sT},toDisplayString:function(){return r.zw},toHandlerKey:function(){return r.hR},toHandlers:function(){return r.mx},toRaw:function(){return r.IU},toRef:function(){return r.Vh},toRefs:function(){return r.BK},toValue:function(){return r.Tn},transformVNodeArgs:function(){return r.C3},triggerRef:function(){return r.oR},unref:function(){return r.SU},useAttrs:function(){return r.l1},useCssModule:function(){return r.fb},useCssVars:function(){return r.sj},useModel:function(){return r.tT},useSSRContext:function(){return r.Zq},useSlots:function(){return r.Rr},useTransitionState:function(){return r.Y8},vModelCheckbox:function(){return r.e8},vModelDynamic:function(){return r.YZ},vModelRadio:function(){return r.G2},vModelSelect:function(){return r.bM},vModelText:function(){return r.nr},vShow:function(){return r.F8},version:function(){return r.i8},warn:function(){return r.ZK},watch:function(){return r.YP},watchEffect:function(){return r.m0},watchPostEffect:function(){return r.Rh},watchSyncEffect:function(){return r.yX},withAsyncContext:function(){return r.mv},withCtx:function(){return r.w5},withDefaults:function(){return r.b9},withDirectives:function(){return r.wy},withKeys:function(){return r.D2},withMemo:function(){return r.MX},withModifiers:function(){return r.iM},withScopeId:function(){return r.HX}});var r=n(9197);const i=()=>{0}},8725:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r=n(8473),i=n(9197),o=n(4887),s=(0,r.aZ)({name:"Vue3SimpleTypeahead",emits:["onInput","onFocus","onBlur","selectItem"],inheritAttrs:!1,props:{id:{type:String},placeholder:{type:String,default:""},items:{type:Array,required:!0},defaultItem:{default:null},itemProjection:{type:Function,default(e){return e}},minInputLength:{type:Number,default:2,validator:e=>e>=0},minItemLength:{type:Number,default:0,validator:e=>e>=0},selectOnTab:{type:Boolean,default:!0}},mounted(){void 0!==this.defaultItem&&null!==this.defaultItem&&this.selectItem(this.defaultItem)},data(){return{inputId:this.id||`simple_typeahead_${(1e3*Math.random()).toFixed()}`,input:"",isInputFocused:!1,currentSelectionIndex:0}},methods:{onInput(){this.isListVisible&&this.currentSelectionIndex>=this.filteredItems.length&&(this.currentSelectionIndex=(this.filteredItems.length||1)-1),this.$emit("onInput",{input:this.input,items:this.filteredItems})},onFocus(){this.isInputFocused=!0,this.$emit("onFocus",{input:this.input,items:this.filteredItems})},onBlur(){this.isInputFocused=!1,this.$emit("onBlur",{input:this.input,items:this.filteredItems})},onArrowDown(e){this.isListVisible&&this.currentSelectionIndex<this.filteredItems.length-1&&this.currentSelectionIndex++,this.scrollSelectionIntoView()},onArrowUp(e){this.isListVisible&&this.currentSelectionIndex>0&&this.currentSelectionIndex--,this.scrollSelectionIntoView()},scrollSelectionIntoView(){setTimeout((()=>{const e=document.querySelector(`#${this.wrapperId} .simple-typeahead-list`),t=document.querySelector(`#${this.wrapperId} .simple-typeahead-list-item.simple-typeahead-list-item-active`);if(!(t.offsetTop>=e.scrollTop&&t.offsetTop+t.offsetHeight<e.scrollTop+e.offsetHeight)){let n=0;t.offsetTop>e.scrollTop?n=t.offsetTop+t.offsetHeight-e.offsetHeight:t.offsetTop<e.scrollTop&&(n=t.offsetTop),e.scrollTo(0,n)}}))},selectCurrentSelection(){this.currentSelection&&this.selectItem(this.currentSelection)},selectCurrentSelectionTab(){this.selectOnTab?this.selectCurrentSelection():this.$refs.inputRef.blur()},selectItem(e){this.input=this.itemProjection(e),this.currentSelectionIndex=0,this.$refs.inputRef.blur(),this.$emit("selectItem",e)},escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},boldMatchText(e){const t=new RegExp(`(${this.escapeRegExp(this.input)})`,"ig");return e.replace(t,"<strong>$1</strong>")},clearInput(){this.input=""},getInput(){return this.$refs.inputRef},focusInput(){this.$refs.inputRef.focus(),this.onFocus()},blurInput(){this.$refs.inputRef.blur(),this.onBlur()}},computed:{wrapperId(){return`${this.inputId}_wrapper`},filteredItems(){const e=new RegExp(this.escapeRegExp(this.input),"i");return this.items.filter((t=>this.itemProjection(t).match(e)))},isListVisible(){return this.isInputFocused&&this.input.length>=this.minInputLength&&this.filteredItems.length>this.minItemLength},currentSelection(){return this.isListVisible&&this.currentSelectionIndex<this.filteredItems.length?this.filteredItems[this.currentSelectionIndex]:void 0}}});(0,r.dD)("data-v-f81ca714");const a=["id"],l=["id","placeholder"],c={key:0,class:"simple-typeahead-list"},u={key:0,class:"simple-typeahead-list-header"},d=["onClick","onMouseenter"],h=["data-text"],f=["data-text","innerHTML"],p={key:1,class:"simple-typeahead-list-footer"};function m(e,t,n,s,m,g){return(0,r.wg)(),(0,r.iD)("div",{id:e.wrapperId,class:"simple-typeahead"},[(0,r.wy)((0,r._)("input",(0,r.dG)({ref:"inputRef",id:e.inputId,class:"simple-typeahead-input",type:"text",placeholder:e.placeholder,"onUpdate:modelValue":t[0]||(t[0]=t=>e.input=t),onInput:t[1]||(t[1]=(...t)=>e.onInput&&e.onInput(...t)),onFocus:t[2]||(t[2]=(...t)=>e.onFocus&&e.onFocus(...t)),onBlur:t[3]||(t[3]=(...t)=>e.onBlur&&e.onBlur(...t)),onKeydown:[t[4]||(t[4]=(0,i.D2)((0,i.iM)(((...t)=>e.onArrowDown&&e.onArrowDown(...t)),["prevent"]),["down"])),t[5]||(t[5]=(0,i.D2)((0,i.iM)(((...t)=>e.onArrowUp&&e.onArrowUp(...t)),["prevent"]),["up"])),t[6]||(t[6]=(0,i.D2)((0,i.iM)(((...t)=>e.selectCurrentSelection&&e.selectCurrentSelection(...t)),["prevent"]),["enter"])),t[7]||(t[7]=(0,i.D2)((0,i.iM)(((...t)=>e.selectCurrentSelectionTab&&e.selectCurrentSelectionTab(...t)),["prevent"]),["tab"]))],autocomplete:"off"},e.$attrs),null,16,l),[[i.nr,e.input]]),e.isListVisible?((0,r.wg)(),(0,r.iD)("div",c,[e.$slots["list-header"]?((0,r.wg)(),(0,r.iD)("div",u,[(0,r.WI)(e.$slots,"list-header")])):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.filteredItems,((n,s)=>((0,r.wg)(),(0,r.iD)("div",{class:(0,o.C_)(["simple-typeahead-list-item",{"simple-typeahead-list-item-active":e.currentSelectionIndex==s}]),key:s,onMousedown:t[8]||(t[8]=(0,i.iM)((()=>{}),["prevent"])),onClick:t=>e.selectItem(n),onMouseenter:t=>e.currentSelectionIndex=s},[e.$slots["list-item-text"]?((0,r.wg)(),(0,r.iD)("span",{key:0,class:"simple-typeahead-list-item-text","data-text":e.itemProjection(n)},[(0,r.WI)(e.$slots,"list-item-text",{item:n,itemProjection:e.itemProjection,boldMatchText:e.boldMatchText})],8,h)):((0,r.wg)(),(0,r.iD)("span",{key:1,class:"simple-typeahead-list-item-text","data-text":e.itemProjection(n),innerHTML:e.boldMatchText(e.itemProjection(n))},null,8,f))],42,d)))),128)),e.$slots["list-footer"]?((0,r.wg)(),(0,r.iD)("div",p,[(0,r.WI)(e.$slots,"list-footer")])):(0,r.kq)("",!0)])):(0,r.kq)("",!0)],8,a)}(0,r.Cn)(),s.render=m,s.__scopeId="data-v-f81ca714";var g=(()=>{const e=s;return e.install=t=>{t.component("Vue3SimpleTypeahead",e)},e})()},299:function(e,t,n){"use strict";n.d(t,{MT:function(){return ee}});n(7658),n(1703);var r=n(8473),i=n(4188);function o(){return s().__VUE_DEVTOOLS_GLOBAL_HOOK__}function s(){return"undefined"!==typeof navigator&&"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{}}const a="function"===typeof Proxy,l="devtools-plugin:setup",c="plugin:settings:set";let u,d;function h(){var e;return void 0!==u||("undefined"!==typeof window&&window.performance?(u=!0,d=window.performance):"undefined"!==typeof n.g&&(null===(e=n.g.perf_hooks)||void 0===e?void 0:e.performance)?(u=!0,d=n.g.perf_hooks.performance):u=!1),u}function f(){return h()?d.now():Date.now()}class p{constructor(e,t){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=t;const n={};if(e.settings)for(const s in e.settings){const t=e.settings[s];n[s]=t.defaultValue}const r=`__vue-devtools-plugin-settings__${e.id}`;let i=Object.assign({},n);try{const e=localStorage.getItem(r),t=JSON.parse(e);Object.assign(i,t)}catch(o){}this.fallbacks={getSettings(){return i},setSettings(e){try{localStorage.setItem(r,JSON.stringify(e))}catch(o){}i=e},now(){return f()}},t&&t.on(c,((e,t)=>{e===this.plugin.id&&this.fallbacks.setSettings(t)})),this.proxiedOn=new Proxy({},{get:(e,t)=>this.target?this.target.on[t]:(...e)=>{this.onQueue.push({method:t,args:e})}}),this.proxiedTarget=new Proxy({},{get:(e,t)=>this.target?this.target[t]:"on"===t?this.proxiedOn:Object.keys(this.fallbacks).includes(t)?(...e)=>(this.targetQueue.push({method:t,args:e,resolve:()=>{}}),this.fallbacks[t](...e)):(...e)=>new Promise((n=>{this.targetQueue.push({method:t,args:e,resolve:n})}))})}async setRealTarget(e){this.target=e;for(const t of this.onQueue)this.target.on[t.method](...t.args);for(const t of this.targetQueue)t.resolve(await this.target[t.method](...t.args))}}function m(e,t){const n=e,r=s(),i=o(),c=a&&n.enableEarlyProxy;if(!i||!r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__&&c){const e=c?new p(n,i):null,o=r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[];o.push({pluginDescriptor:n,setupFn:t,proxy:e}),e&&t(e.proxiedTarget)}else i.emit(l,e,t)}
/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */
var g="store";function v(e,t){Object.keys(e).forEach((function(n){return t(e[n],n)}))}function y(e){return null!==e&&"object"===typeof e}function b(e){return e&&"function"===typeof e.then}function _(e,t){return function(){return e(t)}}function w(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function x(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;E(e,n,[],e._modules.root,!0),S(e,n,t)}function S(e,t,n){var o=e._state,s=e._scope;e.getters={},e._makeLocalGettersCache=Object.create(null);var a=e._wrappedGetters,l={},c={},u=(0,i.B)(!0);u.run((function(){v(a,(function(t,n){l[n]=_(t,e),c[n]=(0,r.Fl)((function(){return l[n]()})),Object.defineProperty(e.getters,n,{get:function(){return c[n].value},enumerable:!0})}))})),e._state=(0,i.qj)({data:t}),e._scope=u,e.strict&&O(e),o&&n&&e._withCommit((function(){o.data=null})),s&&s.stop()}function E(e,t,n,r,i){var o=!n.length,s=e._modules.getNamespace(n);if(r.namespaced&&(e._modulesNamespaceMap[s],e._modulesNamespaceMap[s]=r),!o&&!i){var a=R(t,n.slice(0,-1)),l=n[n.length-1];e._withCommit((function(){a[l]=r.state}))}var c=r.context=M(e,s,n);r.forEachMutation((function(t,n){var r=s+n;C(e,r,t,c)})),r.forEachAction((function(t,n){var r=t.root?n:s+n,i=t.handler||t;A(e,r,i,c)})),r.forEachGetter((function(t,n){var r=s+n;k(e,r,t,c)})),r.forEachChild((function(r,o){E(e,t,n.concat(o),r,i)}))}function M(e,t,n){var r=""===t,i={dispatch:r?e.dispatch:function(n,r,i){var o=P(n,r,i),s=o.payload,a=o.options,l=o.type;return a&&a.root||(l=t+l),e.dispatch(l,s)},commit:r?e.commit:function(n,r,i){var o=P(n,r,i),s=o.payload,a=o.options,l=o.type;a&&a.root||(l=t+l),e.commit(l,s,a)}};return Object.defineProperties(i,{getters:{get:r?function(){return e.getters}:function(){return T(e,t)}},state:{get:function(){return R(e.state,n)}}}),i}function T(e,t){if(!e._makeLocalGettersCache[t]){var n={},r=t.length;Object.keys(e.getters).forEach((function(i){if(i.slice(0,r)===t){var o=i.slice(r);Object.defineProperty(n,o,{get:function(){return e.getters[i]},enumerable:!0})}})),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function C(e,t,n,r){var i=e._mutations[t]||(e._mutations[t]=[]);i.push((function(t){n.call(e,r.state,t)}))}function A(e,t,n,r){var i=e._actions[t]||(e._actions[t]=[]);i.push((function(t){var i=n.call(e,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:e.getters,rootState:e.state},t);return b(i)||(i=Promise.resolve(i)),e._devtoolHook?i.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):i}))}function k(e,t,n,r){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(e){return n(r.state,r.getters,e.state,e.getters)})}function O(e){(0,r.YP)((function(){return e._state.data}),(function(){0}),{deep:!0,flush:"sync"})}function R(e,t){return t.reduce((function(e,t){return e[t]}),e)}function P(e,t,n){return y(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}var L="vuex bindings",D="vuex:mutations",I="vuex:actions",N="vuex",U=0;function F(e,t){m({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[L]},(function(n){n.addTimelineLayer({id:D,label:"Vuex Mutations",color:B}),n.addTimelineLayer({id:I,label:"Vuex Actions",color:B}),n.addInspector({id:N,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree((function(n){if(n.app===e&&n.inspectorId===N)if(n.filter){var r=[];G(r,t._modules.root,n.filter,""),n.rootNodes=r}else n.rootNodes=[W(t._modules.root,"")]})),n.on.getInspectorState((function(n){if(n.app===e&&n.inspectorId===N){var r=n.nodeId;T(t,r),n.state=$(Y(t._modules,r),"root"===r?t.getters:t._makeLocalGettersCache,r)}})),n.on.editInspectorState((function(n){if(n.app===e&&n.inspectorId===N){var r=n.nodeId,i=n.path;"root"!==r&&(i=r.split("/").filter(Boolean).concat(i)),t._withCommit((function(){n.set(t._state.data,i,n.state.value)}))}})),t.subscribe((function(e,t){var r={};e.payload&&(r.payload=e.payload),r.state=t,n.notifyComponentUpdate(),n.sendInspectorTree(N),n.sendInspectorState(N),n.addTimelineEvent({layerId:D,event:{time:Date.now(),title:e.type,data:r}})})),t.subscribeAction({before:function(e,t){var r={};e.payload&&(r.payload=e.payload),e._id=U++,e._time=Date.now(),r.state=t,n.addTimelineEvent({layerId:I,event:{time:e._time,title:e.type,groupId:e._id,subtitle:"start",data:r}})},after:function(e,t){var r={},i=Date.now()-e._time;r.duration={_custom:{type:"duration",display:i+"ms",tooltip:"Action duration",value:i}},e.payload&&(r.payload=e.payload),r.state=t,n.addTimelineEvent({layerId:I,event:{time:Date.now(),title:e.type,groupId:e._id,subtitle:"end",data:r}})}})}))}var B=8702998,V=6710886,z=16777215,j={label:"namespaced",textColor:z,backgroundColor:V};function H(e){return e&&"root"!==e?e.split("/").slice(-2,-1)[0]:"Root"}function W(e,t){return{id:t||"root",label:H(t),tags:e.namespaced?[j]:[],children:Object.keys(e._children).map((function(n){return W(e._children[n],t+n+"/")}))}}function G(e,t,n,r){r.includes(n)&&e.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:t.namespaced?[j]:[]}),Object.keys(t._children).forEach((function(i){G(e,t._children[i],n,r+i+"/")}))}function $(e,t,n){t="root"===n?t:t[n];var r=Object.keys(t),i={state:Object.keys(e.state).map((function(t){return{key:t,editable:!0,value:e.state[t]}}))};if(r.length){var o=q(t);i.getters=Object.keys(o).map((function(e){return{key:e.endsWith("/")?H(e):e,editable:!1,value:X((function(){return o[e]}))}}))}return i}function q(e){var t={};return Object.keys(e).forEach((function(n){var r=n.split("/");if(r.length>1){var i=t,o=r.pop();r.forEach((function(e){i[e]||(i[e]={_custom:{value:{},display:e,tooltip:"Module",abstract:!0}}),i=i[e]._custom.value})),i[o]=X((function(){return e[n]}))}else t[n]=X((function(){return e[n]}))})),t}function Y(e,t){var n=t.split("/").filter((function(e){return e}));return n.reduce((function(e,r,i){var o=e[r];if(!o)throw new Error('Missing module "'+r+'" for path "'+t+'".');return i===n.length-1?o:o._children}),"root"===t?e:e.root._children)}function X(e){try{return e()}catch(t){return t}}var Z=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=("function"===typeof n?n():n)||{}},K={namespaced:{configurable:!0}};K.namespaced.get=function(){return!!this._rawModule.namespaced},Z.prototype.addChild=function(e,t){this._children[e]=t},Z.prototype.removeChild=function(e){delete this._children[e]},Z.prototype.getChild=function(e){return this._children[e]},Z.prototype.hasChild=function(e){return e in this._children},Z.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},Z.prototype.forEachChild=function(e){v(this._children,e)},Z.prototype.forEachGetter=function(e){this._rawModule.getters&&v(this._rawModule.getters,e)},Z.prototype.forEachAction=function(e){this._rawModule.actions&&v(this._rawModule.actions,e)},Z.prototype.forEachMutation=function(e){this._rawModule.mutations&&v(this._rawModule.mutations,e)},Object.defineProperties(Z.prototype,K);var J=function(e){this.register([],e,!1)};function Q(e,t,n){if(t.update(n),n.modules)for(var r in n.modules){if(!t.getChild(r))return void 0;Q(e.concat(r),t.getChild(r),n.modules[r])}}J.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},J.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,n){return t=t.getChild(n),e+(t.namespaced?n+"/":"")}),"")},J.prototype.update=function(e){Q([],this.root,e)},J.prototype.register=function(e,t,n){var r=this;void 0===n&&(n=!0);var i=new Z(t,n);if(0===e.length)this.root=i;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],i)}t.modules&&v(t.modules,(function(t,i){r.register(e.concat(i),t,n)}))},J.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1],r=t.getChild(n);r&&r.runtime&&t.removeChild(n)},J.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1];return!!t&&t.hasChild(n)};function ee(e){return new te(e)}var te=function(e){var t=this;void 0===e&&(e={});var n=e.plugins;void 0===n&&(n=[]);var r=e.strict;void 0===r&&(r=!1);var i=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new J(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=i;var o=this,s=this,a=s.dispatch,l=s.commit;this.dispatch=function(e,t){return a.call(o,e,t)},this.commit=function(e,t,n){return l.call(o,e,t,n)},this.strict=r;var c=this._modules.root.state;E(this,c,[],this._modules.root),S(this,c),n.forEach((function(e){return e(t)}))},ne={state:{configurable:!0}};te.prototype.install=function(e,t){e.provide(t||g,this),e.config.globalProperties.$store=this;var n=void 0!==this._devtools&&this._devtools;n&&F(e,this)},ne.state.get=function(){return this._state.data},ne.state.set=function(e){0},te.prototype.commit=function(e,t,n){var r=this,i=P(e,t,n),o=i.type,s=i.payload,a=(i.options,{type:o,payload:s}),l=this._mutations[o];l&&(this._withCommit((function(){l.forEach((function(e){e(s)}))})),this._subscribers.slice().forEach((function(e){return e(a,r.state)})))},te.prototype.dispatch=function(e,t){var n=this,r=P(e,t),i=r.type,o=r.payload,s={type:i,payload:o},a=this._actions[i];if(a){try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(s,n.state)}))}catch(c){0}var l=a.length>1?Promise.all(a.map((function(e){return e(o)}))):a[0](o);return new Promise((function(e,t){l.then((function(t){try{n._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(s,n.state)}))}catch(c){0}e(t)}),(function(e){try{n._actionSubscribers.filter((function(e){return e.error})).forEach((function(t){return t.error(s,n.state,e)}))}catch(c){0}t(e)}))}))}},te.prototype.subscribe=function(e,t){return w(e,this._subscribers,t)},te.prototype.subscribeAction=function(e,t){var n="function"===typeof e?{before:e}:e;return w(n,this._actionSubscribers,t)},te.prototype.watch=function(e,t,n){var i=this;return(0,r.YP)((function(){return e(i.state,i.getters)}),t,Object.assign({},n))},te.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._state.data=e}))},te.prototype.registerModule=function(e,t,n){void 0===n&&(n={}),"string"===typeof e&&(e=[e]),this._modules.register(e,t),E(this,this.state,e,this._modules.get(e),n.preserveState),S(this,this.state)},te.prototype.unregisterModule=function(e){var t=this;"string"===typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit((function(){var n=R(t.state,e.slice(0,-1));delete n[e[e.length-1]]})),x(this)},te.prototype.hasModule=function(e){return"string"===typeof e&&(e=[e]),this._modules.isRegistered(e)},te.prototype.hotUpdate=function(e){this._modules.update(e),x(this,!0)},te.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(te.prototype,ne);oe((function(e,t){var n={};return re(t).forEach((function(t){var r=t.key,i=t.val;n[r]=function(){var t=this.$store.state,n=this.$store.getters;if(e){var r=se(this.$store,"mapState",e);if(!r)return;t=r.context.state,n=r.context.getters}return"function"===typeof i?i.call(this,t,n):t[i]},n[r].vuex=!0})),n})),oe((function(e,t){var n={};return re(t).forEach((function(t){var r=t.key,i=t.val;n[r]=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];var r=this.$store.commit;if(e){var o=se(this.$store,"mapMutations",e);if(!o)return;r=o.context.commit}return"function"===typeof i?i.apply(this,[r].concat(t)):r.apply(this.$store,[i].concat(t))}})),n})),oe((function(e,t){var n={};return re(t).forEach((function(t){var r=t.key,i=t.val;i=e+i,n[r]=function(){if(!e||se(this.$store,"mapGetters",e))return this.$store.getters[i]},n[r].vuex=!0})),n})),oe((function(e,t){var n={};return re(t).forEach((function(t){var r=t.key,i=t.val;n[r]=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];var r=this.$store.dispatch;if(e){var o=se(this.$store,"mapActions",e);if(!o)return;r=o.context.dispatch}return"function"===typeof i?i.apply(this,[r].concat(t)):r.apply(this.$store,[i].concat(t))}})),n}));function re(e){return ie(e)?Array.isArray(e)?e.map((function(e){return{key:e,val:e}})):Object.keys(e).map((function(t){return{key:t,val:e[t]}})):[]}function ie(e){return Array.isArray(e)||y(e)}function oe(e){return function(t,n){return"string"!==typeof t?(n=t,t=""):"/"!==t.charAt(t.length-1)&&(t+="/"),e(t,n)}}function se(e,t,n){var r=e._modulesNamespaceMap[n];return r}},2993:function(e,t,n){"use strict";n.d(t,{VU:function(){return M}});n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315);var r=n(2428),i=n(9514),o=n(4251),s=n(4805),a=n(3428);const l=0,c=(e,t,n)=>{switch(s.yg(e)){case l:n(t,s.kf(e))}};var u=n(2405),d=n(3837),h=n(3035),f=n(3913);const p=e=>f.UI(e,((e,t)=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`)).join("&"),m=0,g=3,v=1,y=2,b=[];b[m]=(e,t,n,r,i)=>{o.uE(e,m);const s=a.zu(t,e,n.doc,n);r&&s===a.Px&&!n.synced&&(n.synced=!0)},b[g]=(e,t,n,r,i)=>{o.uE(e,v),o.mP(e,u.xq(n.awareness,Array.from(n.awareness.getStates().keys())))},b[v]=(e,t,n,r,i)=>{u.oy(n.awareness,s.HN(t),n)},b[y]=(e,t,n,r,i)=>{c(t,n.doc,((e,t)=>w(n,t)))};const _=3e4,w=(e,t)=>console.warn(`Permission denied to access ${e.url}.\n${t}`),x=(e,t,n)=>{const r=s.l1(t),i=o.Mf(),a=s.yg(r),l=e.messageHandlers[a];return l?l(i,r,e,n,a):console.error("Unable to compute message"),i},S=e=>{if(e.shouldConnect&&null===e.ws){const t=new e._WS(e.url);t.binaryType="arraybuffer",e.ws=t,e.wsconnecting=!0,e.wsconnected=!1,e.synced=!1,t.onmessage=n=>{e.wsLastMessageReceived=i.ZG();const r=x(e,new Uint8Array(n.data),!0);o.kE(r)>1&&t.send(o._f(r))},t.onerror=t=>{e.emit("connection-error",[t,e])},t.onclose=t=>{e.emit("connection-close",[t,e]),e.ws=null,e.wsconnecting=!1,e.wsconnected?(e.wsconnected=!1,e.synced=!1,u.Ag(e.awareness,Array.from(e.awareness.getStates().keys()).filter((t=>t!==e.doc.clientID)),e),e.emit("status",[{status:"disconnected"}])):e.wsUnsuccessfulReconnects++,setTimeout(S,h.VV(100*h.sQ(2,e.wsUnsuccessfulReconnects),e.maxBackoffTime),e)},t.onopen=()=>{e.wsLastMessageReceived=i.ZG(),e.wsconnecting=!1,e.wsconnected=!0,e.wsUnsuccessfulReconnects=0,e.emit("status",[{status:"connected"}]);const n=o.Mf();if(o.uE(n,m),a._J(n,e.doc),t.send(o._f(n)),null!==e.awareness.getLocalState()){const n=o.Mf();o.uE(n,v),o.mP(n,u.xq(e.awareness,[e.doc.clientID])),t.send(o._f(n))}},e.emit("status",[{status:"connecting"}])}},E=(e,t)=>{const n=e.ws;e.wsconnected&&n&&n.readyState===n.OPEN&&n.send(t),e.bcconnected&&r.nY(e.bcChannel,t,e)};class M extends d.y{constructor(e,t,n,{connect:s=!0,awareness:l=new u.GL(n),params:c={},WebSocketPolyfill:d=WebSocket,resyncInterval:h=-1,maxBackoffTime:f=2500,disableBc:g=!1}={}){super();while("/"===e[e.length-1])e=e.slice(0,e.length-1);const y=p(c);this.maxBackoffTime=f,this.bcChannel=e+"/"+t,this.url=e+"/"+t+(0===y.length?"":"?"+y),this.roomname=t,this.doc=n,this._WS=d,this.awareness=l,this.wsconnected=!1,this.wsconnecting=!1,this.bcconnected=!1,this.disableBc=g,this.wsUnsuccessfulReconnects=0,this.messageHandlers=b.slice(),this._synced=!1,this.ws=null,this.wsLastMessageReceived=0,this.shouldConnect=s,this._resyncInterval=0,h>0&&(this._resyncInterval=setInterval((()=>{if(this.ws&&this.ws.readyState===WebSocket.OPEN){const e=o.Mf();o.uE(e,m),a._J(e,n),this.ws.send(o._f(e))}}),h)),this._bcSubscriber=(e,t)=>{if(t!==this){const t=x(this,new Uint8Array(e),!1);o.kE(t)>1&&r.nY(this.bcChannel,o._f(t),this)}},this._updateHandler=(e,t)=>{if(t!==this){const t=o.Mf();o.uE(t,m),a.lr(t,e),E(this,o._f(t))}},this.doc.on("update",this._updateHandler),this._awarenessUpdateHandler=({added:e,updated:t,removed:n},r)=>{const i=e.concat(t).concat(n),s=o.Mf();o.uE(s,v),o.mP(s,u.xq(l,i)),E(this,o._f(s))},this._unloadHandler=()=>{u.Ag(this.awareness,[n.clientID],"window unload")},"undefined"!==typeof window?window.addEventListener("unload",this._unloadHandler):"undefined"!==typeof process&&process.on("exit",this._unloadHandler),l.on("update",this._awarenessUpdateHandler),this._checkInterval=setInterval((()=>{this.wsconnected&&_<i.ZG()-this.wsLastMessageReceived&&this.ws.close()}),_/10),s&&this.connect()}get synced(){return this._synced}set synced(e){this._synced!==e&&(this._synced=e,this.emit("synced",[e]),this.emit("sync",[e]))}destroy(){0!==this._resyncInterval&&clearInterval(this._resyncInterval),clearInterval(this._checkInterval),this.disconnect(),"undefined"!==typeof window?window.removeEventListener("unload",this._unloadHandler):"undefined"!==typeof process&&process.off("exit",this._unloadHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.doc.off("update",this._updateHandler),super.destroy()}connectBc(){if(this.disableBc)return;this.bcconnected||(r.Ld(this.bcChannel,this._bcSubscriber),this.bcconnected=!0);const e=o.Mf();o.uE(e,m),a._J(e,this.doc),r.nY(this.bcChannel,o._f(e),this);const t=o.Mf();o.uE(t,m),a.K0(t,this.doc),r.nY(this.bcChannel,o._f(t),this);const n=o.Mf();o.uE(n,g),r.nY(this.bcChannel,o._f(n),this);const i=o.Mf();o.uE(i,v),o.mP(i,u.xq(this.awareness,[this.doc.clientID])),r.nY(this.bcChannel,o._f(i),this)}disconnectBc(){const e=o.Mf();o.uE(e,v),o.mP(e,u.xq(this.awareness,[this.doc.clientID],new Map)),E(this,o._f(e)),this.bcconnected&&(r.r1(this.bcChannel,this._bcSubscriber),this.bcconnected=!1)}disconnect(){this.shouldConnect=!1,this.disconnectBc(),null!==this.ws&&this.ws.close()}connect(){this.shouldConnect=!0,this.wsconnected||null!==this.ws||(S(this),this.connectBc())}}},4727:function(e,t,n){"use strict";e.exports=n.p+"img/remixicon.symbol.9a882558.svg"},4563:function(e,t,n){"use strict";n.d(t,{Z:function(){return R_}});n(7658),n(1703),n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315),n(2262),n(4506);
/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
const r="153",i={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},o={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},s=0,a=1,l=2,c=1,u=2,d=3,h=0,f=1,p=2,m=0,g=1,v=2,y=3,b=4,_=5,w=100,x=101,S=102,E=103,M=104,T=200,C=201,A=202,k=203,O=204,R=205,P=206,L=207,D=208,I=209,N=210,U=0,F=1,B=2,V=3,z=4,j=5,H=6,W=7,G=0,$=1,q=2,Y=0,X=1,Z=2,K=3,J=4,Q=5,ee=300,te=301,ne=302,re=303,ie=304,oe=306,se=1e3,ae=1001,le=1002,ce=1003,ue=1004,de=1005,he=1006,fe=1007,pe=1008,me=1009,ge=1010,ve=1011,ye=1012,be=1013,_e=1014,we=1015,xe=1016,Se=1017,Ee=1018,Me=1020,Te=1021,Ce=1023,Ae=1024,ke=1025,Oe=1026,Re=1027,Pe=1028,Le=1029,De=1030,Ie=1031,Ne=1033,Ue=33776,Fe=33777,Be=33778,Ve=33779,ze=35840,je=35841,He=35842,We=35843,Ge=36196,$e=37492,qe=37496,Ye=37808,Xe=37809,Ze=37810,Ke=37811,Je=37812,Qe=37813,et=37814,tt=37815,nt=37816,rt=37817,it=37818,ot=37819,st=37820,at=37821,lt=36492,ct=36283,ut=36284,dt=36285,ht=36286,ft=2300,pt=2301,mt=2302,gt=2400,vt=2401,yt=2402,bt=3e3,_t=3001,wt=3200,xt=3201,St=0,Et=1,Mt="",Tt="srgb",Ct="srgb-linear",At="display-p3",kt=7680,Ot=519,Rt=512,Pt=513,Lt=514,Dt=515,It=516,Nt=517,Ut=518,Ft=519,Bt=35044,Vt="300 es",zt=1035,jt=2e3,Ht=2001;class Wt{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners,r=n[e];if(void 0!==r){const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners,n=t[e.type];if(void 0!==n){e.target=this;const t=n.slice(0);for(let n=0,r=t.length;n<r;n++)t[n].call(this,e);e.target=null}}}const Gt=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let $t=1234567;const qt=Math.PI/180,Yt=180/Math.PI;function Xt(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=Gt[255&e]+Gt[e>>8&255]+Gt[e>>16&255]+Gt[e>>24&255]+"-"+Gt[255&t]+Gt[t>>8&255]+"-"+Gt[t>>16&15|64]+Gt[t>>24&255]+"-"+Gt[63&n|128]+Gt[n>>8&255]+"-"+Gt[n>>16&255]+Gt[n>>24&255]+Gt[255&r]+Gt[r>>8&255]+Gt[r>>16&255]+Gt[r>>24&255];return i.toLowerCase()}function Zt(e,t,n){return Math.max(t,Math.min(n,e))}function Kt(e,t){return(e%t+t)%t}function Jt(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)}function Qt(e,t,n){return e!==t?(n-e)/(t-e):0}function en(e,t,n){return(1-n)*e+n*t}function tn(e,t,n,r){return en(e,t,1-Math.exp(-n*r))}function nn(e,t=1){return t-Math.abs(Kt(e,2*t)-t)}function rn(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))}function on(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(6*e-15)+10))}function sn(e,t){return e+Math.floor(Math.random()*(t-e+1))}function an(e,t){return e+Math.random()*(t-e)}function ln(e){return e*(.5-Math.random())}function cn(e){void 0!==e&&($t=e);let t=$t+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296}function un(e){return e*qt}function dn(e){return e*Yt}function hn(e){return 0===(e&e-1)&&0!==e}function fn(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function pn(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function mn(e,t,n,r,i){const o=Math.cos,s=Math.sin,a=o(n/2),l=s(n/2),c=o((t+r)/2),u=s((t+r)/2),d=o((t-r)/2),h=s((t-r)/2),f=o((r-t)/2),p=s((r-t)/2);switch(i){case"XYX":e.set(a*u,l*d,l*h,a*c);break;case"YZY":e.set(l*h,a*u,l*d,a*c);break;case"ZXZ":e.set(l*d,l*h,a*u,a*c);break;case"XZX":e.set(a*u,l*p,l*f,a*c);break;case"YXY":e.set(l*f,a*u,l*p,a*c);break;case"ZYZ":e.set(l*p,l*f,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function gn(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function vn(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const yn={DEG2RAD:qt,RAD2DEG:Yt,generateUUID:Xt,clamp:Zt,euclideanModulo:Kt,mapLinear:Jt,inverseLerp:Qt,lerp:en,damp:tn,pingpong:nn,smoothstep:rn,smootherstep:on,randInt:sn,randFloat:an,randFloatSpread:ln,seededRandom:cn,degToRad:un,radToDeg:dn,isPowerOfTwo:hn,ceilPowerOfTwo:fn,floorPowerOfTwo:pn,setQuaternionFromProperEuler:mn,normalize:vn,denormalize:gn};class bn{constructor(e=0,t=0){bn.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){const e=Math.atan2(-this.y,-this.x)+Math.PI;return e}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Zt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class _n{constructor(e,t,n,r,i,o,s,a,l){_n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,o,s,a,l)}set(e,t,n,r,i,o,s,a,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=s,c[3]=t,c[4]=i,c[5]=a,c[6]=n,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],s=n[3],a=n[6],l=n[1],c=n[4],u=n[7],d=n[2],h=n[5],f=n[8],p=r[0],m=r[3],g=r[6],v=r[1],y=r[4],b=r[7],_=r[2],w=r[5],x=r[8];return i[0]=o*p+s*v+a*_,i[3]=o*m+s*y+a*w,i[6]=o*g+s*b+a*x,i[1]=l*p+c*v+u*_,i[4]=l*m+c*y+u*w,i[7]=l*g+c*b+u*x,i[2]=d*p+h*v+f*_,i[5]=d*m+h*y+f*w,i[8]=d*g+h*b+f*x,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8];return t*o*c-t*s*l-n*i*c+n*s*a+r*i*l-r*o*a}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8],u=c*o-s*l,d=s*a-c*i,h=l*i-o*a,f=t*u+n*d+r*h;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const p=1/f;return e[0]=u*p,e[1]=(r*l-c*n)*p,e[2]=(s*n-r*o)*p,e[3]=d*p,e[4]=(c*t-r*a)*p,e[5]=(r*i-s*t)*p,e[6]=h*p,e[7]=(n*a-l*t)*p,e[8]=(o*t-n*i)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,o,s){const a=Math.cos(i),l=Math.sin(i);return this.set(n*a,n*l,-n*(a*o+l*s)+o+e,-r*l,r*a,-r*(-l*o+a*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(wn.makeScale(e,t)),this}rotate(e){return this.premultiply(wn.makeRotation(-e)),this}translate(e,t){return this.premultiply(wn.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const wn=new _n;function xn(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function Sn(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}const En={};function Mn(e){e in En||(En[e]=!0,console.warn(e))}function Tn(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Cn(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}const An=(new _n).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),kn=(new _n).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function On(e){return e.convertSRGBToLinear().applyMatrix3(kn)}function Rn(e){return e.applyMatrix3(An).convertLinearToSRGB()}const Pn={[Ct]:e=>e,[Tt]:e=>e.convertSRGBToLinear(),[At]:On},Ln={[Ct]:e=>e,[Tt]:e=>e.convertLinearToSRGB(),[At]:Rn},Dn={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(e){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!e},get workingColorSpace(){return Ct},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(!1===this.enabled||t===n||!t||!n)return e;const r=Pn[t],i=Ln[n];if(void 0===r||void 0===i)throw new Error(`Unsupported color space conversion, "${t}" to "${n}".`);return i(r(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}};let In;class Nn{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"===typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===In&&(In=Sn("canvas")),In.width=e.width,In.height=e.height;const n=In.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=In}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const t=Sn("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*Tn(i[e]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*Tn(t[e]/255)):t[e]=Tn(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Un=0;class Fn{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Un++}),this.uuid=Xt(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(Bn(r[t].image)):e.push(Bn(r[t]))}else e=Bn(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function Bn(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?Nn.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Vn=0;class zn extends Wt{constructor(e=zn.DEFAULT_IMAGE,t=zn.DEFAULT_MAPPING,n=ae,r=ae,i=he,o=pe,s=Ce,a=me,l=zn.DEFAULT_ANISOTROPY,c=Mt){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Vn++}),this.uuid=Xt(),this.name="",this.source=new Fn(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=a,this.offset=new bn(0,0),this.repeat=new bn(1,1),this.center=new bn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new _n,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"===typeof c?this.colorSpace=c:(Mn("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=c===_t?Tt:Mt),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==ee)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case se:e.x=e.x-Math.floor(e.x);break;case ae:e.x=e.x<0?0:1;break;case le:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case se:e.y=e.y-Math.floor(e.y);break;case ae:e.y=e.y<0?0:1;break;case le:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Mn("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Tt?_t:bt}set encoding(e){Mn("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===_t?Tt:Mt}}zn.DEFAULT_IMAGE=null,zn.DEFAULT_MAPPING=ee,zn.DEFAULT_ANISOTROPY=1;class jn{constructor(e=0,t=0,n=0,r=1){jn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const o=.01,s=.1,a=e.elements,l=a[0],c=a[4],u=a[8],d=a[1],h=a[5],f=a[9],p=a[2],m=a[6],g=a[10];if(Math.abs(c-d)<o&&Math.abs(u-p)<o&&Math.abs(f-m)<o){if(Math.abs(c+d)<s&&Math.abs(u+p)<s&&Math.abs(f+m)<s&&Math.abs(l+h+g-3)<s)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,a=(h+1)/2,v=(g+1)/2,y=(c+d)/4,b=(u+p)/4,_=(f+m)/4;return e>a&&e>v?e<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=y/n,i=b/n):a>v?a<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(a),n=y/r,i=_/r):v<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=b/i,r=_/i),this.set(n,r,i,t),this}let v=Math.sqrt((m-f)*(m-f)+(u-p)*(u-p)+(d-c)*(d-c));return Math.abs(v)<.001&&(v=1),this.x=(m-f)/v,this.y=(u-p)/v,this.z=(d-c)/v,this.w=Math.acos((l+h+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Hn extends Wt{constructor(e=1,t=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new jn(0,0,e,t),this.scissorTest=!1,this.viewport=new jn(0,0,e,t);const r={width:e,height:t,depth:1};void 0!==n.encoding&&(Mn("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===_t?Tt:Mt),this.texture=new zn(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:he,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Fn(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Wn extends zn{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=ce,this.minFilter=ce,this.wrapR=ae,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Gn extends zn{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=ce,this.minFilter=ce,this.wrapR=ae,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class $n{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,o,s){let a=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3];const d=i[o+0],h=i[o+1],f=i[o+2],p=i[o+3];if(0===s)return e[t+0]=a,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===s)return e[t+0]=d,e[t+1]=h,e[t+2]=f,void(e[t+3]=p);if(u!==p||a!==d||l!==h||c!==f){let e=1-s;const t=a*d+l*h+c*f+u*p,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,t*n);e=Math.sin(e*o)/i,s=Math.sin(s*o)/i}const i=s*n;if(a=a*e+d*i,l=l*e+h*i,c=c*e+f*i,u=u*e+p*i,e===1-s){const e=1/Math.sqrt(a*a+l*l+c*c+u*u);a*=e,l*=e,c*=e,u*=e}}e[t]=a,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,i,o){const s=n[r],a=n[r+1],l=n[r+2],c=n[r+3],u=i[o],d=i[o+1],h=i[o+2],f=i[o+3];return e[t]=s*f+c*u+a*h-l*d,e[t+1]=a*f+c*d+l*u-s*h,e[t+2]=l*f+c*h+s*d-a*u,e[t+3]=c*f-s*u-a*d-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,r=e._y,i=e._z,o=e._order,s=Math.cos,a=Math.sin,l=s(n/2),c=s(r/2),u=s(i/2),d=a(n/2),h=a(r/2),f=a(i/2);switch(o){case"XYZ":this._x=d*c*u+l*h*f,this._y=l*h*u-d*c*f,this._z=l*c*f+d*h*u,this._w=l*c*u-d*h*f;break;case"YXZ":this._x=d*c*u+l*h*f,this._y=l*h*u-d*c*f,this._z=l*c*f-d*h*u,this._w=l*c*u+d*h*f;break;case"ZXY":this._x=d*c*u-l*h*f,this._y=l*h*u+d*c*f,this._z=l*c*f+d*h*u,this._w=l*c*u-d*h*f;break;case"ZYX":this._x=d*c*u-l*h*f,this._y=l*h*u+d*c*f,this._z=l*c*f-d*h*u,this._w=l*c*u+d*h*f;break;case"YZX":this._x=d*c*u+l*h*f,this._y=l*h*u+d*c*f,this._z=l*c*f-d*h*u,this._w=l*c*u-d*h*f;break;case"XZY":this._x=d*c*u-l*h*f,this._y=l*h*u-d*c*f,this._z=l*c*f+d*h*u,this._w=l*c*u+d*h*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],o=t[1],s=t[5],a=t[9],l=t[2],c=t[6],u=t[10],d=n+s+u;if(d>0){const e=.5/Math.sqrt(d+1);this._w=.25/e,this._x=(c-a)*e,this._y=(i-l)*e,this._z=(o-r)*e}else if(n>s&&n>u){const e=2*Math.sqrt(1+n-s-u);this._w=(c-a)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(i+l)/e}else if(s>u){const e=2*Math.sqrt(1+s-n-u);this._w=(i-l)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(a+c)/e}else{const e=2*Math.sqrt(1+u-n-s);this._w=(o-r)/e,this._x=(i+l)/e,this._y=(a+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Zt(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,o=e._w,s=t._x,a=t._y,l=t._z,c=t._w;return this._x=n*c+o*s+r*l-i*a,this._y=r*c+o*a+i*s-n*l,this._z=i*c+o*l+n*a-r*s,this._w=o*c-n*s-r*a-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,o=this._w;let s=o*e._w+n*e._x+r*e._y+i*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const a=1-s*s;if(a<=Number.EPSILON){const e=1-t;return this._w=e*o+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(a),c=Math.atan2(l,s),u=Math.sin((1-t)*c)/l,d=Math.sin(t*c)/l;return this._w=o*u+this._w*d,this._x=n*u+this._x*d,this._y=r*u+this._y*d,this._z=i*u+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class qn{constructor(e=0,t=0,n=0){qn.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Xn.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Xn.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,s=e.z,a=e.w,l=a*t+o*r-s*n,c=a*n+s*t-i*r,u=a*r+i*n-o*t,d=-i*t-o*n-s*r;return this.x=l*a+d*-i+c*-s-u*-o,this.y=c*a+d*-o+u*-i-l*-s,this.z=u*a+d*-s+l*-o-c*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,o=t.x,s=t.y,a=t.z;return this.x=r*a-i*s,this.y=i*o-n*a,this.z=n*s-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Yn.copy(this).projectOnVector(e),this.sub(Yn)}reflect(e){return this.sub(Yn.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Zt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Yn=new qn,Xn=new $n;class Zn{constructor(e=new qn(1/0,1/0,1/0),t=new qn(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Jn.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Jn.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Jn.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),void 0!==e.boundingBox)null===e.boundingBox&&e.computeBoundingBox(),Qn.copy(e.boundingBox),Qn.applyMatrix4(e.matrixWorld),this.union(Qn);else{const n=e.geometry;if(void 0!==n)if(t&&void 0!==n.attributes&&void 0!==n.attributes.position){const t=n.attributes.position;for(let n=0,r=t.count;n<r;n++)Jn.fromBufferAttribute(t,n).applyMatrix4(e.matrixWorld),this.expandByPoint(Jn)}else null===n.boundingBox&&n.computeBoundingBox(),Qn.copy(n.boundingBox),Qn.applyMatrix4(e.matrixWorld),this.union(Qn)}const n=e.children;for(let r=0,i=n.length;r<i;r++)this.expandByObject(n[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Jn),Jn.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(sr),ar.subVectors(this.max,sr),er.subVectors(e.a,sr),tr.subVectors(e.b,sr),nr.subVectors(e.c,sr),rr.subVectors(tr,er),ir.subVectors(nr,tr),or.subVectors(er,nr);let t=[0,-rr.z,rr.y,0,-ir.z,ir.y,0,-or.z,or.y,rr.z,0,-rr.x,ir.z,0,-ir.x,or.z,0,-or.x,-rr.y,rr.x,0,-ir.y,ir.x,0,-or.y,or.x,0];return!!ur(t,er,tr,nr,ar)&&(t=[1,0,0,0,1,0,0,0,1],!!ur(t,er,tr,nr,ar)&&(lr.crossVectors(rr,ir),t=[lr.x,lr.y,lr.z],ur(t,er,tr,nr,ar)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Jn).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(Jn).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Kn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Kn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Kn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Kn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Kn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Kn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Kn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Kn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Kn)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Kn=[new qn,new qn,new qn,new qn,new qn,new qn,new qn,new qn],Jn=new qn,Qn=new Zn,er=new qn,tr=new qn,nr=new qn,rr=new qn,ir=new qn,or=new qn,sr=new qn,ar=new qn,lr=new qn,cr=new qn;function ur(e,t,n,r,i){for(let o=0,s=e.length-3;o<=s;o+=3){cr.fromArray(e,o);const s=i.x*Math.abs(cr.x)+i.y*Math.abs(cr.y)+i.z*Math.abs(cr.z),a=t.dot(cr),l=n.dot(cr),c=r.dot(cr);if(Math.max(-Math.max(a,l,c),Math.min(a,l,c))>s)return!1}return!0}const dr=new Zn,hr=new qn,fr=new qn;class pr{constructor(e=new qn,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):dr.setFromPoints(e).getCenter(n);let r=0;for(let i=0,o=e.length;i<o;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;hr.subVectors(e,this.center);const t=hr.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(hr,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(fr.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(hr.copy(e.center).add(fr)),this.expandByPoint(hr.copy(e.center).sub(fr))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const mr=new qn,gr=new qn,vr=new qn,yr=new qn,br=new qn,_r=new qn,wr=new qn;class xr{constructor(e=new qn,t=new qn(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,mr)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=mr.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(mr.copy(this.origin).addScaledVector(this.direction,t),mr.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){gr.copy(e).add(t).multiplyScalar(.5),vr.copy(t).sub(e).normalize(),yr.copy(this.origin).sub(gr);const i=.5*e.distanceTo(t),o=-this.direction.dot(vr),s=yr.dot(this.direction),a=-yr.dot(vr),l=yr.lengthSq(),c=Math.abs(1-o*o);let u,d,h,f;if(c>0)if(u=o*a-s,d=o*s-a,f=i*c,u>=0)if(d>=-f)if(d<=f){const e=1/c;u*=e,d*=e,h=u*(u+o*d+2*s)+d*(o*u+d+2*a)+l}else d=i,u=Math.max(0,-(o*d+s)),h=-u*u+d*(d+2*a)+l;else d=-i,u=Math.max(0,-(o*d+s)),h=-u*u+d*(d+2*a)+l;else d<=-f?(u=Math.max(0,-(-o*i+s)),d=u>0?-i:Math.min(Math.max(-i,-a),i),h=-u*u+d*(d+2*a)+l):d<=f?(u=0,d=Math.min(Math.max(-i,-a),i),h=d*(d+2*a)+l):(u=Math.max(0,-(o*i+s)),d=u>0?i:Math.min(Math.max(-i,-a),i),h=-u*u+d*(d+2*a)+l);else d=o>0?-i:i,u=Math.max(0,-(o*d+s)),h=-u*u+d*(d+2*a)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(gr).addScaledVector(vr,d),h}intersectSphere(e,t){mr.subVectors(e.center,this.origin);const n=mr.dot(this.direction),r=mr.dot(mr)-n*n,i=e.radius*e.radius;if(r>i)return null;const o=Math.sqrt(i-r),s=n-o,a=n+o;return a<0?null:s<0?this.at(a,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;const n=e.normal.dot(this.direction);return n*t<0}intersectBox(e,t){let n,r,i,o,s,a;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,r=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,r=(e.min.x-d.x)*l),c>=0?(i=(e.min.y-d.y)*c,o=(e.max.y-d.y)*c):(i=(e.max.y-d.y)*c,o=(e.min.y-d.y)*c),n>o||i>r?null:((i>n||isNaN(n))&&(n=i),(o<r||isNaN(r))&&(r=o),u>=0?(s=(e.min.z-d.z)*u,a=(e.max.z-d.z)*u):(s=(e.max.z-d.z)*u,a=(e.min.z-d.z)*u),n>a||s>r?null:((s>n||n!==n)&&(n=s),(a<r||r!==r)&&(r=a),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,mr)}intersectTriangle(e,t,n,r,i){br.subVectors(t,e),_r.subVectors(n,e),wr.crossVectors(br,_r);let o,s=this.direction.dot(wr);if(s>0){if(r)return null;o=1}else{if(!(s<0))return null;o=-1,s=-s}yr.subVectors(this.origin,e);const a=o*this.direction.dot(_r.crossVectors(yr,_r));if(a<0)return null;const l=o*this.direction.dot(br.cross(yr));if(l<0)return null;if(a+l>s)return null;const c=-o*yr.dot(wr);return c<0?null:this.at(c/s,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Sr{constructor(e,t,n,r,i,o,s,a,l,c,u,d,h,f,p,m){Sr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,o,s,a,l,c,u,d,h,f,p,m)}set(e,t,n,r,i,o,s,a,l,c,u,d,h,f,p,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=s,g[13]=a,g[2]=l,g[6]=c,g[10]=u,g[14]=d,g[3]=h,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Sr).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Er.setFromMatrixColumn(e,0).length(),i=1/Er.setFromMatrixColumn(e,1).length(),o=1/Er.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),s=Math.sin(n),a=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){const e=o*c,n=o*u,r=s*c,i=s*u;t[0]=a*c,t[4]=-a*u,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-s*a,t[2]=i-e*l,t[6]=r+n*l,t[10]=o*a}else if("YXZ"===e.order){const e=a*c,n=a*u,r=l*c,i=l*u;t[0]=e+i*s,t[4]=r*s-n,t[8]=o*l,t[1]=o*u,t[5]=o*c,t[9]=-s,t[2]=n*s-r,t[6]=i+e*s,t[10]=o*a}else if("ZXY"===e.order){const e=a*c,n=a*u,r=l*c,i=l*u;t[0]=e-i*s,t[4]=-o*u,t[8]=r+n*s,t[1]=n+r*s,t[5]=o*c,t[9]=i-e*s,t[2]=-o*l,t[6]=s,t[10]=o*a}else if("ZYX"===e.order){const e=o*c,n=o*u,r=s*c,i=s*u;t[0]=a*c,t[4]=r*l-n,t[8]=e*l+i,t[1]=a*u,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=s*a,t[10]=o*a}else if("YZX"===e.order){const e=o*a,n=o*l,r=s*a,i=s*l;t[0]=a*c,t[4]=i-e*u,t[8]=r*u+n,t[1]=u,t[5]=o*c,t[9]=-s*c,t[2]=-l*c,t[6]=n*u+r,t[10]=e-i*u}else if("XZY"===e.order){const e=o*a,n=o*l,r=s*a,i=s*l;t[0]=a*c,t[4]=-u,t[8]=l*c,t[1]=e*u+i,t[5]=o*c,t[9]=n*u-r,t[2]=r*u-n,t[6]=s*c,t[10]=i*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Tr,e,Cr)}lookAt(e,t,n){const r=this.elements;return Or.subVectors(e,t),0===Or.lengthSq()&&(Or.z=1),Or.normalize(),Ar.crossVectors(n,Or),0===Ar.lengthSq()&&(1===Math.abs(n.z)?Or.x+=1e-4:Or.z+=1e-4,Or.normalize(),Ar.crossVectors(n,Or)),Ar.normalize(),kr.crossVectors(Or,Ar),r[0]=Ar.x,r[4]=kr.x,r[8]=Or.x,r[1]=Ar.y,r[5]=kr.y,r[9]=Or.y,r[2]=Ar.z,r[6]=kr.z,r[10]=Or.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],s=n[4],a=n[8],l=n[12],c=n[1],u=n[5],d=n[9],h=n[13],f=n[2],p=n[6],m=n[10],g=n[14],v=n[3],y=n[7],b=n[11],_=n[15],w=r[0],x=r[4],S=r[8],E=r[12],M=r[1],T=r[5],C=r[9],A=r[13],k=r[2],O=r[6],R=r[10],P=r[14],L=r[3],D=r[7],I=r[11],N=r[15];return i[0]=o*w+s*M+a*k+l*L,i[4]=o*x+s*T+a*O+l*D,i[8]=o*S+s*C+a*R+l*I,i[12]=o*E+s*A+a*P+l*N,i[1]=c*w+u*M+d*k+h*L,i[5]=c*x+u*T+d*O+h*D,i[9]=c*S+u*C+d*R+h*I,i[13]=c*E+u*A+d*P+h*N,i[2]=f*w+p*M+m*k+g*L,i[6]=f*x+p*T+m*O+g*D,i[10]=f*S+p*C+m*R+g*I,i[14]=f*E+p*A+m*P+g*N,i[3]=v*w+y*M+b*k+_*L,i[7]=v*x+y*T+b*O+_*D,i[11]=v*S+y*C+b*R+_*I,i[15]=v*E+y*A+b*P+_*N,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],s=e[5],a=e[9],l=e[13],c=e[2],u=e[6],d=e[10],h=e[14],f=e[3],p=e[7],m=e[11],g=e[15];return f*(+i*a*u-r*l*u-i*s*d+n*l*d+r*s*h-n*a*h)+p*(+t*a*h-t*l*d+i*o*d-r*o*h+r*l*c-i*a*c)+m*(+t*l*u-t*s*h-i*o*u+n*o*h+i*s*c-n*l*c)+g*(-r*s*c-t*a*u+t*s*d+r*o*u-n*o*d+n*a*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11],f=e[12],p=e[13],m=e[14],g=e[15],v=u*m*l-p*d*l+p*a*h-s*m*h-u*a*g+s*d*g,y=f*d*l-c*m*l-f*a*h+o*m*h+c*a*g-o*d*g,b=c*p*l-f*u*l+f*s*h-o*p*h-c*s*g+o*u*g,_=f*u*a-c*p*a-f*s*d+o*p*d+c*s*m-o*u*m,w=t*v+n*y+r*b+i*_;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const x=1/w;return e[0]=v*x,e[1]=(p*d*i-u*m*i-p*r*h+n*m*h+u*r*g-n*d*g)*x,e[2]=(s*m*i-p*a*i+p*r*l-n*m*l-s*r*g+n*a*g)*x,e[3]=(u*a*i-s*d*i-u*r*l+n*d*l+s*r*h-n*a*h)*x,e[4]=y*x,e[5]=(c*m*i-f*d*i+f*r*h-t*m*h-c*r*g+t*d*g)*x,e[6]=(f*a*i-o*m*i-f*r*l+t*m*l+o*r*g-t*a*g)*x,e[7]=(o*d*i-c*a*i+c*r*l-t*d*l-o*r*h+t*a*h)*x,e[8]=b*x,e[9]=(f*u*i-c*p*i-f*n*h+t*p*h+c*n*g-t*u*g)*x,e[10]=(o*p*i-f*s*i+f*n*l-t*p*l-o*n*g+t*s*g)*x,e[11]=(c*s*i-o*u*i-c*n*l+t*u*l+o*n*h-t*s*h)*x,e[12]=_*x,e[13]=(c*p*r-f*u*r+f*n*d-t*p*d-c*n*m+t*u*m)*x,e[14]=(f*s*r-o*p*r-f*n*a+t*p*a+o*n*m-t*s*m)*x,e[15]=(o*u*r-c*s*r+c*n*a-t*u*a-o*n*d+t*s*d)*x,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,s=e.y,a=e.z,l=i*o,c=i*s;return this.set(l*o+n,l*s-r*a,l*a+r*s,0,l*s+r*a,c*s+n,c*a-r*o,0,l*a-r*s,c*a+r*o,i*a*a+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,o){return this.set(1,n,i,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,o=t._y,s=t._z,a=t._w,l=i+i,c=o+o,u=s+s,d=i*l,h=i*c,f=i*u,p=o*c,m=o*u,g=s*u,v=a*l,y=a*c,b=a*u,_=n.x,w=n.y,x=n.z;return r[0]=(1-(p+g))*_,r[1]=(h+b)*_,r[2]=(f-y)*_,r[3]=0,r[4]=(h-b)*w,r[5]=(1-(d+g))*w,r[6]=(m+v)*w,r[7]=0,r[8]=(f+y)*x,r[9]=(m-v)*x,r[10]=(1-(d+p))*x,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=Er.set(r[0],r[1],r[2]).length();const o=Er.set(r[4],r[5],r[6]).length(),s=Er.set(r[8],r[9],r[10]).length(),a=this.determinant();a<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],Mr.copy(this);const l=1/i,c=1/o,u=1/s;return Mr.elements[0]*=l,Mr.elements[1]*=l,Mr.elements[2]*=l,Mr.elements[4]*=c,Mr.elements[5]*=c,Mr.elements[6]*=c,Mr.elements[8]*=u,Mr.elements[9]*=u,Mr.elements[10]*=u,t.setFromRotationMatrix(Mr),n.x=i,n.y=o,n.z=s,this}makePerspective(e,t,n,r,i,o,s=jt){const a=this.elements,l=2*i/(t-e),c=2*i/(n-r),u=(t+e)/(t-e),d=(n+r)/(n-r);let h,f;if(s===jt)h=-(o+i)/(o-i),f=-2*o*i/(o-i);else{if(s!==Ht)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);h=-o/(o-i),f=-o*i/(o-i)}return a[0]=l,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,r,i,o,s=jt){const a=this.elements,l=1/(t-e),c=1/(n-r),u=1/(o-i),d=(t+e)*l,h=(n+r)*c;let f,p;if(s===jt)f=(o+i)*u,p=-2*u;else{if(s!==Ht)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);f=i*u,p=-1*u}return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=p,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Er=new qn,Mr=new Sr,Tr=new qn(0,0,0),Cr=new qn(1,1,1),Ar=new qn,kr=new qn,Or=new qn,Rr=new Sr,Pr=new $n;class Lr{constructor(e=0,t=0,n=0,r=Lr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,i=r[0],o=r[4],s=r[8],a=r[1],l=r[5],c=r[9],u=r[2],d=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(Zt(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Zt(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,h),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin(Zt(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,h),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(a,i));break;case"ZYX":this._y=Math.asin(-Zt(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(a,i)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(Zt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(s,h));break;case"XZY":this._z=Math.asin(-Zt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(s,i)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Rr.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Rr,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Pr.setFromEuler(this),this.setFromQuaternion(Pr,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Lr.DEFAULT_ORDER="XYZ";class Dr{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return 0!==(this.mask&(1<<e|0))}}let Ir=0;const Nr=new qn,Ur=new $n,Fr=new Sr,Br=new qn,Vr=new qn,zr=new qn,jr=new $n,Hr=new qn(1,0,0),Wr=new qn(0,1,0),Gr=new qn(0,0,1),$r={type:"added"},qr={type:"removed"};class Yr extends Wt{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Ir++}),this.uuid=Xt(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Yr.DEFAULT_UP.clone();const e=new qn,t=new Lr,n=new $n,r=new qn(1,1,1);function i(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(i),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Sr},normalMatrix:{value:new _n}}),this.matrix=new Sr,this.matrixWorld=new Sr,this.matrixAutoUpdate=Yr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Yr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Dr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ur.setFromAxisAngle(e,t),this.quaternion.multiply(Ur),this}rotateOnWorldAxis(e,t){return Ur.setFromAxisAngle(e,t),this.quaternion.premultiply(Ur),this}rotateX(e){return this.rotateOnAxis(Hr,e)}rotateY(e){return this.rotateOnAxis(Wr,e)}rotateZ(e){return this.rotateOnAxis(Gr,e)}translateOnAxis(e,t){return Nr.copy(e).applyQuaternion(this.quaternion),this.position.add(Nr.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Hr,e)}translateY(e){return this.translateOnAxis(Wr,e)}translateZ(e){return this.translateOnAxis(Gr,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Fr.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Br.copy(e):Br.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Vr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Fr.lookAt(Vr,Br,this.up):Fr.lookAt(Br,Vr,this.up),this.quaternion.setFromRotationMatrix(Fr),r&&(Fr.extractRotation(r.matrixWorld),Ur.setFromRotationMatrix(Fr),this.quaternion.premultiply(Ur.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent($r)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(qr)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(qr)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Fr.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Fr.multiply(e.parent.matrixWorld)),e.applyMatrix4(Fr),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n],i=r.getObjectByProperty(e,t);if(void 0!==i)return i}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let r=0,i=this.children.length;r<i;r++){const i=this.children[r].getObjectsByProperty(e,t);i.length>0&&(n=n.concat(i))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Vr,e,zr),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Vr,jr,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++){const r=t[n];!0!==r.matrixWorldAutoUpdate&&!0!==e||r.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){const n=e[t];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=o(e.geometries),r=o(e.materials),i=o(e.textures),s=o(e.images),a=o(e.shapes),l=o(e.skeletons),c=o(e.animations),u=o(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),s.length>0&&(n.images=s),a.length>0&&(n.shapes=a),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=r,n;function o(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}}Yr.DEFAULT_UP=new qn(0,1,0),Yr.DEFAULT_MATRIX_AUTO_UPDATE=!0,Yr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Xr=new qn,Zr=new qn,Kr=new qn,Jr=new qn,Qr=new qn,ei=new qn,ti=new qn,ni=new qn,ri=new qn,ii=new qn;let oi=!1;class si{constructor(e=new qn,t=new qn,n=new qn){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),Xr.subVectors(e,t),r.cross(Xr);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){Xr.subVectors(r,t),Zr.subVectors(n,t),Kr.subVectors(e,t);const o=Xr.dot(Xr),s=Xr.dot(Zr),a=Xr.dot(Kr),l=Zr.dot(Zr),c=Zr.dot(Kr),u=o*l-s*s;if(0===u)return i.set(-2,-1,-1);const d=1/u,h=(l*a-s*c)*d,f=(o*c-s*a)*d;return i.set(1-h-f,f,h)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,Jr),Jr.x>=0&&Jr.y>=0&&Jr.x+Jr.y<=1}static getUV(e,t,n,r,i,o,s,a){return!1===oi&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),oi=!0),this.getInterpolation(e,t,n,r,i,o,s,a)}static getInterpolation(e,t,n,r,i,o,s,a){return this.getBarycoord(e,t,n,r,Jr),a.setScalar(0),a.addScaledVector(i,Jr.x),a.addScaledVector(o,Jr.y),a.addScaledVector(s,Jr.z),a}static isFrontFacing(e,t,n,r){return Xr.subVectors(n,t),Zr.subVectors(e,t),Xr.cross(Zr).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Xr.subVectors(this.c,this.b),Zr.subVectors(this.a,this.b),.5*Xr.cross(Zr).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return si.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return si.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return!1===oi&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),oi=!0),si.getInterpolation(e,this.a,this.b,this.c,t,n,r,i)}getInterpolation(e,t,n,r,i){return si.getInterpolation(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return si.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return si.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let o,s;Qr.subVectors(r,n),ei.subVectors(i,n),ni.subVectors(e,n);const a=Qr.dot(ni),l=ei.dot(ni);if(a<=0&&l<=0)return t.copy(n);ri.subVectors(e,r);const c=Qr.dot(ri),u=ei.dot(ri);if(c>=0&&u<=c)return t.copy(r);const d=a*u-c*l;if(d<=0&&a>=0&&c<=0)return o=a/(a-c),t.copy(n).addScaledVector(Qr,o);ii.subVectors(e,i);const h=Qr.dot(ii),f=ei.dot(ii);if(f>=0&&h<=f)return t.copy(i);const p=h*l-a*f;if(p<=0&&l>=0&&f<=0)return s=l/(l-f),t.copy(n).addScaledVector(ei,s);const m=c*f-h*u;if(m<=0&&u-c>=0&&h-f>=0)return ti.subVectors(i,r),s=(u-c)/(u-c+(h-f)),t.copy(r).addScaledVector(ti,s);const g=1/(m+p+d);return o=p*g,s=d*g,t.copy(n).addScaledVector(Qr,o).addScaledVector(ei,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let ai=0;class li extends Wt{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:ai++}),this.uuid=Xt(),this.name="",this.type="Material",this.blending=g,this.side=h,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=O,this.blendDst=R,this.blendEquation=w,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=V,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Ot,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=kt,this.stencilZFail=kt,this.stencilZPass=kt,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==g&&(n.blending=this.blending),this.side!==h&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(n.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}const ci={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ui={h:0,s:0,l:0},di={h:0,s:0,l:0};function hi(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class fi{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const t=e;t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Tt){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Dn.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=Dn.workingColorSpace){return this.r=e,this.g=t,this.b=n,Dn.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=Dn.workingColorSpace){if(e=Kt(e,1),t=Zt(t,0,1),n=Zt(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=hi(i,r,e+1/3),this.g=hi(i,r,e),this.b=hi(i,r,e-1/3)}return Dn.toWorkingColorSpace(this,r),this}setStyle(e,t=Tt){function n(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let i;const o=r[1],s=r[2];switch(o){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,t);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,t);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const n=r[1],i=n.length;if(3===i)return this.setRGB(parseInt(n.charAt(0),16)/15,parseInt(n.charAt(1),16)/15,parseInt(n.charAt(2),16)/15,t);if(6===i)return this.setHex(parseInt(n,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Tt){const n=ci[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Tn(e.r),this.g=Tn(e.g),this.b=Tn(e.b),this}copyLinearToSRGB(e){return this.r=Cn(e.r),this.g=Cn(e.g),this.b=Cn(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Tt){return Dn.fromWorkingColorSpace(pi.copy(this),e),65536*Math.round(Zt(255*pi.r,0,255))+256*Math.round(Zt(255*pi.g,0,255))+Math.round(Zt(255*pi.b,0,255))}getHexString(e=Tt){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Dn.workingColorSpace){Dn.fromWorkingColorSpace(pi.copy(this),t);const n=pi.r,r=pi.g,i=pi.b,o=Math.max(n,r,i),s=Math.min(n,r,i);let a,l;const c=(s+o)/2;if(s===o)a=0,l=0;else{const e=o-s;switch(l=c<=.5?e/(o+s):e/(2-o-s),o){case n:a=(r-i)/e+(r<i?6:0);break;case r:a=(i-n)/e+2;break;case i:a=(n-r)/e+4;break}a/=6}return e.h=a,e.s=l,e.l=c,e}getRGB(e,t=Dn.workingColorSpace){return Dn.fromWorkingColorSpace(pi.copy(this),t),e.r=pi.r,e.g=pi.g,e.b=pi.b,e}getStyle(e=Tt){Dn.fromWorkingColorSpace(pi.copy(this),e);const t=pi.r,n=pi.g,r=pi.b;return e!==Tt?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*n)},${Math.round(255*r)})`}offsetHSL(e,t,n){return this.getHSL(ui),ui.h+=e,ui.s+=t,ui.l+=n,this.setHSL(ui.h,ui.s,ui.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(ui),e.getHSL(di);const n=en(ui.h,di.h,t),r=en(ui.s,di.s,t),i=en(ui.l,di.l,t);return this.setHSL(n,r,i),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,i=e.elements;return this.r=i[0]*t+i[3]*n+i[6]*r,this.g=i[1]*t+i[4]*n+i[7]*r,this.b=i[2]*t+i[5]*n+i[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const pi=new fi;fi.NAMES=ci;class mi extends li{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new fi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=G,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const gi=new qn,vi=new bn;class yi{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=Bt,this.updateRange={offset:0,count:-1},this.gpuType=we,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)vi.fromBufferAttribute(this,t),vi.applyMatrix3(e),this.setXY(t,vi.x,vi.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)gi.fromBufferAttribute(this,t),gi.applyMatrix3(e),this.setXYZ(t,gi.x,gi.y,gi.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)gi.fromBufferAttribute(this,t),gi.applyMatrix4(e),this.setXYZ(t,gi.x,gi.y,gi.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)gi.fromBufferAttribute(this,t),gi.applyNormalMatrix(e),this.setXYZ(t,gi.x,gi.y,gi.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)gi.fromBufferAttribute(this,t),gi.transformDirection(e),this.setXYZ(t,gi.x,gi.y,gi.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=gn(t,this.array)),t}setX(e,t){return this.normalized&&(t=vn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=gn(t,this.array)),t}setY(e,t){return this.normalized&&(t=vn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=gn(t,this.array)),t}setZ(e,t){return this.normalized&&(t=vn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=gn(t,this.array)),t}setW(e,t){return this.normalized&&(t=vn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=vn(t,this.array),n=vn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=vn(t,this.array),n=vn(n,this.array),r=vn(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=vn(t,this.array),n=vn(n,this.array),r=vn(r,this.array),i=vn(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Bt&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class bi extends yi{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class _i extends yi{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class wi extends yi{constructor(e,t,n){super(new Float32Array(e),t,n)}}let xi=0;const Si=new Sr,Ei=new Yr,Mi=new qn,Ti=new Zn,Ci=new Zn,Ai=new qn;class ki extends Wt{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:xi++}),this.uuid=Xt(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(xn(e)?_i:bi)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new _n).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Si.makeRotationFromQuaternion(e),this.applyMatrix4(Si),this}rotateX(e){return Si.makeRotationX(e),this.applyMatrix4(Si),this}rotateY(e){return Si.makeRotationY(e),this.applyMatrix4(Si),this}rotateZ(e){return Si.makeRotationZ(e),this.applyMatrix4(Si),this}translate(e,t,n){return Si.makeTranslation(e,t,n),this.applyMatrix4(Si),this}scale(e,t,n){return Si.makeScale(e,t,n),this.applyMatrix4(Si),this}lookAt(e){return Ei.lookAt(e),Ei.updateMatrix(),this.applyMatrix4(Ei.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Mi).negate(),this.translate(Mi.x,Mi.y,Mi.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new wi(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Zn);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new qn(-1/0,-1/0,-1/0),new qn(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const e=t[n];Ti.setFromBufferAttribute(e),this.morphTargetsRelative?(Ai.addVectors(this.boundingBox.min,Ti.min),this.boundingBox.expandByPoint(Ai),Ai.addVectors(this.boundingBox.max,Ti.max),this.boundingBox.expandByPoint(Ai)):(this.boundingBox.expandByPoint(Ti.min),this.boundingBox.expandByPoint(Ti.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new pr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new qn,1/0);if(e){const n=this.boundingSphere.center;if(Ti.setFromBufferAttribute(e),t)for(let e=0,i=t.length;e<i;e++){const n=t[e];Ci.setFromBufferAttribute(n),this.morphTargetsRelative?(Ai.addVectors(Ti.min,Ci.min),Ti.expandByPoint(Ai),Ai.addVectors(Ti.max,Ci.max),Ti.expandByPoint(Ai)):(Ti.expandByPoint(Ci.min),Ti.expandByPoint(Ci.max))}Ti.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)Ai.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(Ai));if(t)for(let i=0,o=t.length;i<o;i++){const o=t[i],s=this.morphTargetsRelative;for(let t=0,i=o.count;t<i;t++)Ai.fromBufferAttribute(o,t),s&&(Mi.fromBufferAttribute(e,t),Ai.add(Mi)),r=Math.max(r,n.distanceToSquared(Ai))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,i=t.normal.array,o=t.uv.array,s=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new yi(new Float32Array(4*s),4));const a=this.getAttribute("tangent").array,l=[],c=[];for(let M=0;M<s;M++)l[M]=new qn,c[M]=new qn;const u=new qn,d=new qn,h=new qn,f=new bn,p=new bn,m=new bn,g=new qn,v=new qn;function y(e,t,n){u.fromArray(r,3*e),d.fromArray(r,3*t),h.fromArray(r,3*n),f.fromArray(o,2*e),p.fromArray(o,2*t),m.fromArray(o,2*n),d.sub(u),h.sub(u),p.sub(f),m.sub(f);const i=1/(p.x*m.y-m.x*p.y);isFinite(i)&&(g.copy(d).multiplyScalar(m.y).addScaledVector(h,-p.y).multiplyScalar(i),v.copy(h).multiplyScalar(p.x).addScaledVector(d,-m.x).multiplyScalar(i),l[e].add(g),l[t].add(g),l[n].add(g),c[e].add(v),c[t].add(v),c[n].add(v))}let b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(let M=0,T=b.length;M<T;++M){const e=b[M],t=e.start,r=e.count;for(let i=t,o=t+r;i<o;i+=3)y(n[i+0],n[i+1],n[i+2])}const _=new qn,w=new qn,x=new qn,S=new qn;function E(e){x.fromArray(i,3*e),S.copy(x);const t=l[e];_.copy(t),_.sub(x.multiplyScalar(x.dot(t))).normalize(),w.crossVectors(S,t);const n=w.dot(c[e]),r=n<0?-1:1;a[4*e]=_.x,a[4*e+1]=_.y,a[4*e+2]=_.z,a[4*e+3]=r}for(let M=0,T=b.length;M<T;++M){const e=b[M],t=e.start,r=e.count;for(let i=t,o=t+r;i<o;i+=3)E(n[i+0]),E(n[i+1]),E(n[i+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new yi(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new qn,i=new qn,o=new qn,s=new qn,a=new qn,l=new qn,c=new qn,u=new qn;if(e)for(let d=0,h=e.count;d<h;d+=3){const h=e.getX(d+0),f=e.getX(d+1),p=e.getX(d+2);r.fromBufferAttribute(t,h),i.fromBufferAttribute(t,f),o.fromBufferAttribute(t,p),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),s.fromBufferAttribute(n,h),a.fromBufferAttribute(n,f),l.fromBufferAttribute(n,p),s.add(c),a.add(c),l.add(c),n.setXYZ(h,s.x,s.y,s.z),n.setXYZ(f,a.x,a.y,a.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let e=0,d=t.count;e<d;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),o.fromBufferAttribute(t,e+2),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Ai.fromBufferAttribute(e,t),Ai.normalize(),e.setXYZ(t,Ai.x,Ai.y,Ai.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,o=new n.constructor(t.length*r);let s=0,a=0;for(let l=0,c=t.length;l<c;l++){s=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*r;for(let e=0;e<r;e++)o[a++]=n[s++]}return new yi(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new ki,n=this.index.array,r=this.attributes;for(const s in r){const i=r[s],o=e(i,n);t.setAttribute(s,o)}const i=this.morphAttributes;for(const s in i){const r=[],o=i[s];for(let t=0,i=o.length;t<i;t++){const i=o[t],s=e(i,n);r.push(s)}t.morphAttributes[s]=r}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let s=0,a=o.length;s<a;s++){const e=o[s];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const a in n){const t=n[a];e.data.attributes[a]=t.toJSON(e.data)}const r={};let i=!1;for(const a in this.morphAttributes){const t=this.morphAttributes[a],n=[];for(let r=0,i=t.length;r<i;r++){const i=t[r];n.push(i.toJSON(e.data))}n.length>0&&(r[a]=n,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const s=this.boundingSphere;return null!==s&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const l in r){const e=r[l];this.setAttribute(l,e.clone(t))}const i=e.morphAttributes;for(const l in i){const e=[],n=i[l];for(let r=0,i=n.length;r<i;r++)e.push(n[r].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,c=o.length;l<c;l++){const e=o[l];this.addGroup(e.start,e.count,e.materialIndex)}const s=e.boundingBox;null!==s&&(this.boundingBox=s.clone());const a=e.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Oi=new Sr,Ri=new xr,Pi=new pr,Li=new qn,Di=new qn,Ii=new qn,Ni=new qn,Ui=new qn,Fi=new qn,Bi=new bn,Vi=new bn,zi=new bn,ji=new qn,Hi=new qn,Wi=new qn,Gi=new qn,$i=new qn;class qi extends Yr{constructor(e=new ki,t=new mi){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry,t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const s=this.morphTargetInfluences;if(i&&s){Fi.set(0,0,0);for(let n=0,r=i.length;n<r;n++){const r=s[n],a=i[n];0!==r&&(Ui.fromBufferAttribute(a,e),o?Fi.addScaledVector(Ui,r):Fi.addScaledVector(Ui.sub(t),r))}t.add(Fi)}return t}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),Pi.copy(n.boundingSphere),Pi.applyMatrix4(i),Ri.copy(e.ray).recast(e.near),!1===Pi.containsPoint(Ri.origin)){if(null===Ri.intersectSphere(Pi,Li))return;if(Ri.origin.distanceToSquared(Li)>(e.far-e.near)**2)return}Oi.copy(i).invert(),Ri.copy(e.ray).applyMatrix4(Oi),null!==n.boundingBox&&!1===Ri.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,Ri)}}_computeIntersections(e,t,n){let r;const i=this.geometry,o=this.material,s=i.index,a=i.attributes.position,l=i.attributes.uv,c=i.attributes.uv1,u=i.attributes.normal,d=i.groups,h=i.drawRange;if(null!==s)if(Array.isArray(o))for(let f=0,p=d.length;f<p;f++){const i=d[f],a=o[i.materialIndex],p=Math.max(i.start,h.start),m=Math.min(s.count,Math.min(i.start+i.count,h.start+h.count));for(let o=p,d=m;o<d;o+=3){const d=s.getX(o),h=s.getX(o+1),f=s.getX(o+2);r=Xi(this,a,e,n,l,c,u,d,h,f),r&&(r.faceIndex=Math.floor(o/3),r.face.materialIndex=i.materialIndex,t.push(r))}}else{const i=Math.max(0,h.start),a=Math.min(s.count,h.start+h.count);for(let d=i,h=a;d<h;d+=3){const i=s.getX(d),a=s.getX(d+1),h=s.getX(d+2);r=Xi(this,o,e,n,l,c,u,i,a,h),r&&(r.faceIndex=Math.floor(d/3),t.push(r))}}else if(void 0!==a)if(Array.isArray(o))for(let f=0,p=d.length;f<p;f++){const i=d[f],s=o[i.materialIndex],p=Math.max(i.start,h.start),m=Math.min(a.count,Math.min(i.start+i.count,h.start+h.count));for(let o=p,a=m;o<a;o+=3){const a=o,d=o+1,h=o+2;r=Xi(this,s,e,n,l,c,u,a,d,h),r&&(r.faceIndex=Math.floor(o/3),r.face.materialIndex=i.materialIndex,t.push(r))}}else{const i=Math.max(0,h.start),s=Math.min(a.count,h.start+h.count);for(let a=i,d=s;a<d;a+=3){const i=a,s=a+1,d=a+2;r=Xi(this,o,e,n,l,c,u,i,s,d),r&&(r.faceIndex=Math.floor(a/3),t.push(r))}}}}function Yi(e,t,n,r,i,o,s,a){let l;if(l=t.side===f?r.intersectTriangle(s,o,i,!0,a):r.intersectTriangle(i,o,s,t.side===h,a),null===l)return null;$i.copy(a),$i.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo($i);return c<n.near||c>n.far?null:{distance:c,point:$i.clone(),object:e}}function Xi(e,t,n,r,i,o,s,a,l,c){e.getVertexPosition(a,Di),e.getVertexPosition(l,Ii),e.getVertexPosition(c,Ni);const u=Yi(e,t,n,r,Di,Ii,Ni,Gi);if(u){i&&(Bi.fromBufferAttribute(i,a),Vi.fromBufferAttribute(i,l),zi.fromBufferAttribute(i,c),u.uv=si.getInterpolation(Gi,Di,Ii,Ni,Bi,Vi,zi,new bn)),o&&(Bi.fromBufferAttribute(o,a),Vi.fromBufferAttribute(o,l),zi.fromBufferAttribute(o,c),u.uv1=si.getInterpolation(Gi,Di,Ii,Ni,Bi,Vi,zi,new bn),u.uv2=u.uv1),s&&(ji.fromBufferAttribute(s,a),Hi.fromBufferAttribute(s,l),Wi.fromBufferAttribute(s,c),u.normal=si.getInterpolation(Gi,Di,Ii,Ni,ji,Hi,Wi,new qn),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const e={a:a,b:l,c:c,normal:new qn,materialIndex:0};si.getNormal(Di,Ii,Ni,e.normal),u.face=e}return u}class Zi extends ki{constructor(e=1,t=1,n=1,r=1,i=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};const s=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);const a=[],l=[],c=[],u=[];let d=0,h=0;function f(e,t,n,r,i,o,f,p,m,g,v){const y=o/m,b=f/g,_=o/2,w=f/2,x=p/2,S=m+1,E=g+1;let M=0,T=0;const C=new qn;for(let s=0;s<E;s++){const o=s*b-w;for(let a=0;a<S;a++){const d=a*y-_;C[e]=d*r,C[t]=o*i,C[n]=x,l.push(C.x,C.y,C.z),C[e]=0,C[t]=0,C[n]=p>0?1:-1,c.push(C.x,C.y,C.z),u.push(a/m),u.push(1-s/g),M+=1}}for(let s=0;s<g;s++)for(let e=0;e<m;e++){const t=d+e+S*s,n=d+e+S*(s+1),r=d+(e+1)+S*(s+1),i=d+(e+1)+S*s;a.push(t,n,i),a.push(n,r,i),T+=6}s.addGroup(h,T,v),h+=T,d+=M}f("z","y","x",-1,-1,n,t,e,o,i,0),f("z","y","x",1,-1,n,t,-e,o,i,1),f("x","z","y",1,1,e,n,t,r,o,2),f("x","z","y",1,-1,e,n,-t,r,o,3),f("x","y","z",1,-1,e,t,n,r,i,4),f("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(a),this.setAttribute("position",new wi(l,3)),this.setAttribute("normal",new wi(c,3)),this.setAttribute("uv",new wi(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zi(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Ki(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][r]=null):t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function Ji(e){const t={};for(let n=0;n<e.length;n++){const r=Ki(e[n]);for(const e in r)t[e]=r[e]}return t}function Qi(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}function eo(e){return null===e.getRenderTarget()?e.outputColorSpace:Ct}const to={clone:Ki,merge:Ji};var no="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",ro="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";class io extends li{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=no,this.fragmentShader=ro,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ki(e.uniforms),this.uniformsGroups=Qi(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r],i=n.value;i&&i.isTexture?t.uniforms[r]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[r]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[r]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[r]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[r]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[r]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[r]={type:"m4",value:i.toArray()}:t.uniforms[r]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class oo extends Yr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Sr,this.projectionMatrix=new Sr,this.projectionMatrixInverse=new Sr,this.coordinateSystem=jt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class so extends oo{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Yt*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*qt*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Yt*Math.atan(Math.tan(.5*qt*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*qt*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const e=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/e,t-=o.offsetY*n/s,r*=o.width/e,n*=o.height/s}const s=this.filmOffset;0!==s&&(i+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const ao=-90,lo=1;class co extends Yr{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null;const r=new so(ao,lo,e,t);r.layers=this.layers,this.add(r);const i=new so(ao,lo,e,t);i.layers=this.layers,this.add(i);const o=new so(ao,lo,e,t);o.layers=this.layers,this.add(o);const s=new so(ao,lo,e,t);s.layers=this.layers,this.add(s);const a=new so(ao,lo,e,t);a.layers=this.layers,this.add(a);const l=new so(ao,lo,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,i,o,s,a]=t;for(const l of t)this.remove(l);if(e===jt)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),i.up.set(0,0,-1),i.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),a.up.set(0,1,0),a.lookAt(0,0,-1);else{if(e!==Ht)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),i.up.set(0,0,1),i.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),a.up.set(0,-1,0),a.lookAt(0,0,-1)}for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,i,o,s,a,l]=this.children,c=e.getRenderTarget(),u=e.toneMapping,d=e.xr.enabled;e.toneMapping=Y,e.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,s),e.setRenderTarget(n,4),e.render(t,a),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(c),e.toneMapping=u,e.xr.enabled=d,n.texture.needsPMREMUpdate=!0}}class uo extends zn{constructor(e,t,n,r,i,o,s,a,l,c){e=void 0!==e?e:[],t=void 0!==t?t:te,super(e,t,n,r,i,o,s,a,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class ho extends Hn{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];void 0!==t.encoding&&(Mn("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===_t?Tt:Mt),this.texture=new uo(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:he}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new Zi(5,5,5),i=new io({name:"CubemapFromEquirect",uniforms:Ki(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:f,blending:m});i.uniforms.tEquirect.value=t;const o=new qi(r,i),s=t.minFilter;t.minFilter===pe&&(t.minFilter=he);const a=new co(1,10,this);return a.update(e,o),t.minFilter=s,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(i)}}const fo=new qn,po=new qn,mo=new _n;class go{constructor(e=new qn(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=fo.subVectors(n,t).cross(po.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(fo),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(e.start).addScaledVector(n,i)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||mo.getNormalMatrix(e),r=this.coplanarPoint(fo).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const vo=new pr,yo=new qn;class bo{constructor(e=new go,t=new go,n=new go,r=new go,i=new go,o=new go){this.planes=[e,t,n,r,i,o]}set(e,t,n,r,i,o){const s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(r),s[4].copy(i),s[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=jt){const n=this.planes,r=e.elements,i=r[0],o=r[1],s=r[2],a=r[3],l=r[4],c=r[5],u=r[6],d=r[7],h=r[8],f=r[9],p=r[10],m=r[11],g=r[12],v=r[13],y=r[14],b=r[15];if(n[0].setComponents(a-i,d-l,m-h,b-g).normalize(),n[1].setComponents(a+i,d+l,m+h,b+g).normalize(),n[2].setComponents(a+o,d+c,m+f,b+v).normalize(),n[3].setComponents(a-o,d-c,m-f,b-v).normalize(),n[4].setComponents(a-s,d-u,m-p,b-y).normalize(),t===jt)n[5].setComponents(a+s,d+u,m+p,b+y).normalize();else{if(t!==Ht)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);n[5].setComponents(s,u,p,y).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),vo.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),vo.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(vo)}intersectsSprite(e){return vo.center.set(0,0,0),vo.radius=.7071067811865476,vo.applyMatrix4(e.matrixWorld),this.intersectsSphere(vo)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let i=0;i<6;i++){const e=t[i].distanceToPoint(n);if(e<r)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(yo.x=r.normal.x>0?e.max.x:e.min.x,yo.y=r.normal.y>0?e.max.y:e.min.y,yo.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(yo)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function _o(){let e=null,t=!1,n=null,r=null;function i(t,o){n(t,o),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function wo(e,t){const n=t.isWebGL2,r=new WeakMap;function i(t,r){const i=t.array,o=t.usage,s=e.createBuffer();let a;if(e.bindBuffer(r,s),e.bufferData(r,i,o),t.onUploadCallback(),i instanceof Float32Array)a=e.FLOAT;else if(i instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");a=e.HALF_FLOAT}else a=e.UNSIGNED_SHORT;else if(i instanceof Int16Array)a=e.SHORT;else if(i instanceof Uint32Array)a=e.UNSIGNED_INT;else if(i instanceof Int32Array)a=e.INT;else if(i instanceof Int8Array)a=e.BYTE;else if(i instanceof Uint8Array)a=e.UNSIGNED_BYTE;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);a=e.UNSIGNED_BYTE}return{buffer:s,type:a,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}function o(t,r,i){const o=r.array,s=r.updateRange;e.bindBuffer(i,t),-1===s.count?e.bufferSubData(i,0,o):(n?e.bufferSubData(i,s.offset*o.BYTES_PER_ELEMENT,o,s.offset,s.count):e.bufferSubData(i,s.offset*o.BYTES_PER_ELEMENT,o.subarray(s.offset,s.offset+s.count)),s.count=-1),r.onUploadCallback()}function s(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)}function a(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))}function l(e,t){if(e.isGLBufferAttribute){const t=r.get(e);return void((!t||t.version<e.version)&&r.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const n=r.get(e);void 0===n?r.set(e,i(e,t)):n.version<e.version&&(o(n.buffer,e,t),n.version=e.version)}return{get:s,remove:a,update:l}}class xo extends ki{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,o=t/2,s=Math.floor(n),a=Math.floor(r),l=s+1,c=a+1,u=e/s,d=t/a,h=[],f=[],p=[],m=[];for(let g=0;g<c;g++){const e=g*d-o;for(let t=0;t<l;t++){const n=t*u-i;f.push(n,-e,0),p.push(0,0,1),m.push(t/s),m.push(1-g/a)}}for(let g=0;g<a;g++)for(let e=0;e<s;e++){const t=e+l*g,n=e+l*(g+1),r=e+1+l*(g+1),i=e+1+l*g;h.push(t,n,i),h.push(n,r,i)}this.setIndex(h),this.setAttribute("position",new wi(f,3)),this.setAttribute("normal",new wi(p,3)),this.setAttribute("uv",new wi(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xo(e.width,e.height,e.widthSegments,e.heightSegments)}}var So="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",Eo="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",Mo="#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",To="#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",Co="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",Ao="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",ko="vec3 transformed = vec3( position );",Oo="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",Ro="float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",Po="#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",Lo="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",Do="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",Io="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",No="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",Uo="#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",Fo="#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",Bo="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",Vo="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",zo="#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",jo="#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",Ho="#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",Wo="vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",Go="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",$o="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",qo="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",Yo="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",Xo="gl_FragColor = linearToOutputTexel( gl_FragColor );",Zo="vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",Ko="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",Jo="#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",Qo="#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",es="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",ts="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",ns="#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",rs="#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",is="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",os="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",ss="#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",as="#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",ls="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",cs="LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",us="varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",ds="uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",hs="#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",fs="ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",ps="varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",ms="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",gs="varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",vs="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tanisotropyV /= material.anisotropy;\n\tmaterial.anisotropy = saturate( material.anisotropy );\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;\n#endif",ys="struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",bs="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",_s="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",ws="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",xs="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",Ss="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",Es="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",Ms="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",Ts="#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, vMapUv );\n#endif",Cs="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",As="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",ks="#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",Os="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",Rs="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",Ps="#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",Ls="#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",Ds="#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",Is="#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",Ns="float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 geometryNormal = normal;",Us="#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",Fs="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",Bs="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",Vs="#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",zs="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",js="#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",Hs="#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",Ws="#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",Gs="#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",$s="#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",qs="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",Ys="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",Xs="vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",Zs="#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",Ks="#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",Js="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",Qs="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",ea="#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",ta="#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",na="#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",ra="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",ia="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",oa="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",sa="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",aa="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",la="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",ca="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",ua="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",da="#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",ha="#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",fa="#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",pa="#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",ma="#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",ga="#ifdef USE_UV\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",va="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif";const ya="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",ba="uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",_a="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",wa="#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",xa="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",Sa="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",Ea="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",Ma="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",Ta="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",Ca="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",Aa="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",ka="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",Oa="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",Ra="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",Pa="#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",La="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Da="#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Ia="#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Na="#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",Ua="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Fa="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",Ba="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",Va="#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",za="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",ja="#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",Ha="#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Wa="#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Ga="#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",$a="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",qa="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",Ya="#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Xa="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",Za="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",Ka="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",Ja={alphamap_fragment:So,alphamap_pars_fragment:Eo,alphatest_fragment:Mo,alphatest_pars_fragment:To,aomap_fragment:Co,aomap_pars_fragment:Ao,begin_vertex:ko,beginnormal_vertex:Oo,bsdfs:Ro,iridescence_fragment:Po,bumpmap_pars_fragment:Lo,clipping_planes_fragment:Do,clipping_planes_pars_fragment:Io,clipping_planes_pars_vertex:No,clipping_planes_vertex:Uo,color_fragment:Fo,color_pars_fragment:Bo,color_pars_vertex:Vo,color_vertex:zo,common:jo,cube_uv_reflection_fragment:Ho,defaultnormal_vertex:Wo,displacementmap_pars_vertex:Go,displacementmap_vertex:$o,emissivemap_fragment:qo,emissivemap_pars_fragment:Yo,encodings_fragment:Xo,encodings_pars_fragment:Zo,envmap_fragment:Ko,envmap_common_pars_fragment:Jo,envmap_pars_fragment:Qo,envmap_pars_vertex:es,envmap_physical_pars_fragment:hs,envmap_vertex:ts,fog_vertex:ns,fog_pars_vertex:rs,fog_fragment:is,fog_pars_fragment:os,gradientmap_pars_fragment:ss,lightmap_fragment:as,lightmap_pars_fragment:ls,lights_lambert_fragment:cs,lights_lambert_pars_fragment:us,lights_pars_begin:ds,lights_toon_fragment:fs,lights_toon_pars_fragment:ps,lights_phong_fragment:ms,lights_phong_pars_fragment:gs,lights_physical_fragment:vs,lights_physical_pars_fragment:ys,lights_fragment_begin:bs,lights_fragment_maps:_s,lights_fragment_end:ws,logdepthbuf_fragment:xs,logdepthbuf_pars_fragment:Ss,logdepthbuf_pars_vertex:Es,logdepthbuf_vertex:Ms,map_fragment:Ts,map_pars_fragment:Cs,map_particle_fragment:As,map_particle_pars_fragment:ks,metalnessmap_fragment:Os,metalnessmap_pars_fragment:Rs,morphcolor_vertex:Ps,morphnormal_vertex:Ls,morphtarget_pars_vertex:Ds,morphtarget_vertex:Is,normal_fragment_begin:Ns,normal_fragment_maps:Us,normal_pars_fragment:Fs,normal_pars_vertex:Bs,normal_vertex:Vs,normalmap_pars_fragment:zs,clearcoat_normal_fragment_begin:js,clearcoat_normal_fragment_maps:Hs,clearcoat_pars_fragment:Ws,iridescence_pars_fragment:Gs,output_fragment:$s,packing:qs,premultiplied_alpha_fragment:Ys,project_vertex:Xs,dithering_fragment:Zs,dithering_pars_fragment:Ks,roughnessmap_fragment:Js,roughnessmap_pars_fragment:Qs,shadowmap_pars_fragment:ea,shadowmap_pars_vertex:ta,shadowmap_vertex:na,shadowmask_pars_fragment:ra,skinbase_vertex:ia,skinning_pars_vertex:oa,skinning_vertex:sa,skinnormal_vertex:aa,specularmap_fragment:la,specularmap_pars_fragment:ca,tonemapping_fragment:ua,tonemapping_pars_fragment:da,transmission_fragment:ha,transmission_pars_fragment:fa,uv_pars_fragment:pa,uv_pars_vertex:ma,uv_vertex:ga,worldpos_vertex:va,background_vert:ya,background_frag:ba,backgroundCube_vert:_a,backgroundCube_frag:wa,cube_vert:xa,cube_frag:Sa,depth_vert:Ea,depth_frag:Ma,distanceRGBA_vert:Ta,distanceRGBA_frag:Ca,equirect_vert:Aa,equirect_frag:ka,linedashed_vert:Oa,linedashed_frag:Ra,meshbasic_vert:Pa,meshbasic_frag:La,meshlambert_vert:Da,meshlambert_frag:Ia,meshmatcap_vert:Na,meshmatcap_frag:Ua,meshnormal_vert:Fa,meshnormal_frag:Ba,meshphong_vert:Va,meshphong_frag:za,meshphysical_vert:ja,meshphysical_frag:Ha,meshtoon_vert:Wa,meshtoon_frag:Ga,points_vert:$a,points_frag:qa,shadow_vert:Ya,shadow_frag:Xa,sprite_vert:Za,sprite_frag:Ka},Qa={common:{diffuse:{value:new fi(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new _n},alphaMap:{value:null},alphaMapTransform:{value:new _n},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new _n}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new _n}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new _n}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new _n},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new _n},normalScale:{value:new bn(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new _n},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new _n}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new _n}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new _n}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new fi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new fi(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new _n},alphaTest:{value:0},uvTransform:{value:new _n}},sprite:{diffuse:{value:new fi(16777215)},opacity:{value:1},center:{value:new bn(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new _n},alphaMap:{value:null},alphaMapTransform:{value:new _n},alphaTest:{value:0}}},el={basic:{uniforms:Ji([Qa.common,Qa.specularmap,Qa.envmap,Qa.aomap,Qa.lightmap,Qa.fog]),vertexShader:Ja.meshbasic_vert,fragmentShader:Ja.meshbasic_frag},lambert:{uniforms:Ji([Qa.common,Qa.specularmap,Qa.envmap,Qa.aomap,Qa.lightmap,Qa.emissivemap,Qa.bumpmap,Qa.normalmap,Qa.displacementmap,Qa.fog,Qa.lights,{emissive:{value:new fi(0)}}]),vertexShader:Ja.meshlambert_vert,fragmentShader:Ja.meshlambert_frag},phong:{uniforms:Ji([Qa.common,Qa.specularmap,Qa.envmap,Qa.aomap,Qa.lightmap,Qa.emissivemap,Qa.bumpmap,Qa.normalmap,Qa.displacementmap,Qa.fog,Qa.lights,{emissive:{value:new fi(0)},specular:{value:new fi(1118481)},shininess:{value:30}}]),vertexShader:Ja.meshphong_vert,fragmentShader:Ja.meshphong_frag},standard:{uniforms:Ji([Qa.common,Qa.envmap,Qa.aomap,Qa.lightmap,Qa.emissivemap,Qa.bumpmap,Qa.normalmap,Qa.displacementmap,Qa.roughnessmap,Qa.metalnessmap,Qa.fog,Qa.lights,{emissive:{value:new fi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ja.meshphysical_vert,fragmentShader:Ja.meshphysical_frag},toon:{uniforms:Ji([Qa.common,Qa.aomap,Qa.lightmap,Qa.emissivemap,Qa.bumpmap,Qa.normalmap,Qa.displacementmap,Qa.gradientmap,Qa.fog,Qa.lights,{emissive:{value:new fi(0)}}]),vertexShader:Ja.meshtoon_vert,fragmentShader:Ja.meshtoon_frag},matcap:{uniforms:Ji([Qa.common,Qa.bumpmap,Qa.normalmap,Qa.displacementmap,Qa.fog,{matcap:{value:null}}]),vertexShader:Ja.meshmatcap_vert,fragmentShader:Ja.meshmatcap_frag},points:{uniforms:Ji([Qa.points,Qa.fog]),vertexShader:Ja.points_vert,fragmentShader:Ja.points_frag},dashed:{uniforms:Ji([Qa.common,Qa.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ja.linedashed_vert,fragmentShader:Ja.linedashed_frag},depth:{uniforms:Ji([Qa.common,Qa.displacementmap]),vertexShader:Ja.depth_vert,fragmentShader:Ja.depth_frag},normal:{uniforms:Ji([Qa.common,Qa.bumpmap,Qa.normalmap,Qa.displacementmap,{opacity:{value:1}}]),vertexShader:Ja.meshnormal_vert,fragmentShader:Ja.meshnormal_frag},sprite:{uniforms:Ji([Qa.sprite,Qa.fog]),vertexShader:Ja.sprite_vert,fragmentShader:Ja.sprite_frag},background:{uniforms:{uvTransform:{value:new _n},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ja.background_vert,fragmentShader:Ja.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Ja.backgroundCube_vert,fragmentShader:Ja.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ja.cube_vert,fragmentShader:Ja.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ja.equirect_vert,fragmentShader:Ja.equirect_frag},distanceRGBA:{uniforms:Ji([Qa.common,Qa.displacementmap,{referencePosition:{value:new qn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ja.distanceRGBA_vert,fragmentShader:Ja.distanceRGBA_frag},shadow:{uniforms:Ji([Qa.lights,Qa.fog,{color:{value:new fi(0)},opacity:{value:1}}]),vertexShader:Ja.shadow_vert,fragmentShader:Ja.shadow_frag}};el.physical={uniforms:Ji([el.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new _n},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new _n},clearcoatNormalScale:{value:new bn(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new _n},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new _n},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new _n},sheen:{value:0},sheenColor:{value:new fi(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new _n},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new _n},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new _n},transmissionSamplerSize:{value:new bn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new _n},attenuationDistance:{value:0},attenuationColor:{value:new fi(0)},specularColor:{value:new fi(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new _n},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new _n},anisotropyVector:{value:new bn},anisotropyMap:{value:null},anisotropyMapTransform:{value:new _n}}]),vertexShader:Ja.meshphysical_vert,fragmentShader:Ja.meshphysical_frag};const tl={r:0,b:0,g:0};function nl(e,t,n,r,i,o,s){const a=new fi(0);let l,c,u=!0===o?0:1,d=null,p=0,m=null;function g(o,g){let y=!1,b=!0===g.isScene?g.background:null;if(b&&b.isTexture){const e=g.backgroundBlurriness>0;b=(e?n:t).get(b)}null===b?v(a,u):b&&b.isColor&&(v(b,1),y=!0);const _=e.xr,w=_.getEnvironmentBlendMode();switch(w){case"opaque":y=!0;break;case"additive":r.buffers.color.setClear(0,0,0,1,s),y=!0;break;case"alpha-blend":r.buffers.color.setClear(0,0,0,0,s),y=!0;break}(e.autoClear||y)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),b&&(b.isCubeTexture||b.mapping===oe)?(void 0===c&&(c=new qi(new Zi(1,1,1),new io({name:"BackgroundCubeMaterial",uniforms:Ki(el.backgroundCube.uniforms),vertexShader:el.backgroundCube.vertexShader,fragmentShader:el.backgroundCube.fragmentShader,side:f,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=b,c.material.uniforms.flipEnvMap.value=b.isCubeTexture&&!1===b.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,c.material.toneMapped=b.colorSpace!==Tt,d===b&&p===b.version&&m===e.toneMapping||(c.material.needsUpdate=!0,d=b,p=b.version,m=e.toneMapping),c.layers.enableAll(),o.unshift(c,c.geometry,c.material,0,0,null)):b&&b.isTexture&&(void 0===l&&(l=new qi(new xo(2,2),new io({name:"BackgroundMaterial",uniforms:Ki(el.background.uniforms),vertexShader:el.background.vertexShader,fragmentShader:el.background.fragmentShader,side:h,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=b,l.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,l.material.toneMapped=b.colorSpace!==Tt,!0===b.matrixAutoUpdate&&b.updateMatrix(),l.material.uniforms.uvTransform.value.copy(b.matrix),d===b&&p===b.version&&m===e.toneMapping||(l.material.needsUpdate=!0,d=b,p=b.version,m=e.toneMapping),l.layers.enableAll(),o.unshift(l,l.geometry,l.material,0,0,null))}function v(t,n){t.getRGB(tl,eo(e)),r.buffers.color.setClear(tl.r,tl.g,tl.b,n,s)}return{getClearColor:function(){return a},setClearColor:function(e,t=1){a.set(e),u=t,v(a,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,v(a,u)},render:g}}function rl(e,t,n,r){const i=e.getParameter(e.MAX_VERTEX_ATTRIBS),o=r.isWebGL2?null:t.get("OES_vertex_array_object"),s=r.isWebGL2||null!==o,a={},l=g(null);let c=l,u=!1;function d(t,r,i,o,a){let l=!1;if(s){const e=m(o,i,r);c!==e&&(c=e,f(c.object)),l=v(t,o,i,a),l&&y(t,o,i,a)}else{const e=!0===r.wireframe;c.geometry===o.id&&c.program===i.id&&c.wireframe===e||(c.geometry=o.id,c.program=i.id,c.wireframe=e,l=!0)}null!==a&&n.update(a,e.ELEMENT_ARRAY_BUFFER),(l||u)&&(u=!1,E(t,r,i,o),null!==a&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.get(a).buffer))}function h(){return r.isWebGL2?e.createVertexArray():o.createVertexArrayOES()}function f(t){return r.isWebGL2?e.bindVertexArray(t):o.bindVertexArrayOES(t)}function p(t){return r.isWebGL2?e.deleteVertexArray(t):o.deleteVertexArrayOES(t)}function m(e,t,n){const r=!0===n.wireframe;let i=a[e.id];void 0===i&&(i={},a[e.id]=i);let o=i[t.id];void 0===o&&(o={},i[t.id]=o);let s=o[r];return void 0===s&&(s=g(h()),o[r]=s),s}function g(e){const t=[],n=[],r=[];for(let o=0;o<i;o++)t[o]=0,n[o]=0,r[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function v(e,t,n,r){const i=c.attributes,o=t.attributes;let s=0;const a=n.getAttributes();for(const l in a){const t=a[l];if(t.location>=0){const t=i[l];let n=o[l];if(void 0===n&&("instanceMatrix"===l&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(n=e.instanceColor)),void 0===t)return!0;if(t.attribute!==n)return!0;if(n&&t.data!==n.data)return!0;s++}}return c.attributesNum!==s||c.index!==r}function y(e,t,n,r){const i={},o=t.attributes;let s=0;const a=n.getAttributes();for(const l in a){const t=a[l];if(t.location>=0){let t=o[l];void 0===t&&("instanceMatrix"===l&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(t=e.instanceColor));const n={};n.attribute=t,t&&t.data&&(n.data=t.data),i[l]=n,s++}}c.attributes=i,c.attributesNum=s,c.index=r}function b(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function _(e){w(e,0)}function w(n,i){const o=c.newAttributes,s=c.enabledAttributes,a=c.attributeDivisors;if(o[n]=1,0===s[n]&&(e.enableVertexAttribArray(n),s[n]=1),a[n]!==i){const o=r.isWebGL2?e:t.get("ANGLE_instanced_arrays");o[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),a[n]=i}}function x(){const t=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function S(t,n,r,i,o,s,a){!0===a?e.vertexAttribIPointer(t,n,r,o,s):e.vertexAttribPointer(t,n,r,i,o,s)}function E(i,o,s,a){if(!1===r.isWebGL2&&(i.isInstancedMesh||a.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;b();const l=a.attributes,c=s.getAttributes(),u=o.defaultAttributeValues;for(const t in c){const o=c[t];if(o.location>=0){let s=l[t];if(void 0===s&&("instanceMatrix"===t&&i.instanceMatrix&&(s=i.instanceMatrix),"instanceColor"===t&&i.instanceColor&&(s=i.instanceColor)),void 0!==s){const t=s.normalized,l=s.itemSize,c=n.get(s);if(void 0===c)continue;const u=c.buffer,d=c.type,h=c.bytesPerElement,f=!0===r.isWebGL2&&(d===e.INT||d===e.UNSIGNED_INT||s.gpuType===be);if(s.isInterleavedBufferAttribute){const n=s.data,r=n.stride,c=s.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<o.locationSize;e++)w(o.location+e,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<o.locationSize;e++)_(o.location+e);e.bindBuffer(e.ARRAY_BUFFER,u);for(let e=0;e<o.locationSize;e++)S(o.location+e,l/o.locationSize,d,t,r*h,(c+l/o.locationSize*e)*h,f)}else{if(s.isInstancedBufferAttribute){for(let e=0;e<o.locationSize;e++)w(o.location+e,s.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let e=0;e<o.locationSize;e++)_(o.location+e);e.bindBuffer(e.ARRAY_BUFFER,u);for(let e=0;e<o.locationSize;e++)S(o.location+e,l/o.locationSize,d,t,l*h,l/o.locationSize*e*h,f)}}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(o.location,n);break;case 3:e.vertexAttrib3fv(o.location,n);break;case 4:e.vertexAttrib4fv(o.location,n);break;default:e.vertexAttrib1fv(o.location,n)}}}}x()}function M(){A();for(const e in a){const t=a[e];for(const e in t){const n=t[e];for(const e in n)p(n[e].object),delete n[e];delete t[e]}delete a[e]}}function T(e){if(void 0===a[e.id])return;const t=a[e.id];for(const n in t){const e=t[n];for(const t in e)p(e[t].object),delete e[t];delete t[n]}delete a[e.id]}function C(e){for(const t in a){const n=a[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)p(r[e].object),delete r[e];delete n[e.id]}}function A(){k(),u=!0,c!==l&&(c=l,f(c.object))}function k(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:A,resetDefaultState:k,dispose:M,releaseStatesOfGeometry:T,releaseStatesOfProgram:C,initAttributes:b,enableAttribute:_,disableUnusedAttributes:x}}function il(e,t,n,r){const i=r.isWebGL2;let o;function s(e){o=e}function a(t,r){e.drawArrays(o,t,r),n.update(r,o,1)}function l(r,s,a){if(0===a)return;let l,c;if(i)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](o,r,s,a),n.update(s,o,a)}this.setMode=s,this.render=a,this.renderInstances=l}function ol(e,t,n){let r;function i(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const s="undefined"!==typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===e.constructor.name;let a=void 0!==n.precision?n.precision:"highp";const l=o(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=s||t.has("WEBGL_draw_buffers"),u=!0===n.logarithmicDepthBuffer,d=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f=e.getParameter(e.MAX_TEXTURE_SIZE),p=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),m=e.getParameter(e.MAX_VERTEX_ATTRIBS),g=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),v=e.getParameter(e.MAX_VARYING_VECTORS),y=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),b=h>0,_=s||t.has("OES_texture_float"),w=b&&_,x=s?e.getParameter(e.MAX_SAMPLES):0;return{isWebGL2:s,drawBuffers:c,getMaxAnisotropy:i,getMaxPrecision:o,precision:a,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:y,vertexTextures:b,floatFragmentTextures:_,floatVertexTextures:w,maxSamples:x}}function sl(e){const t=this;let n=null,r=0,i=!1,o=!1;const s=new go,a=new _n,l={value:null,needsUpdate:!1};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function u(e,n,r,i){const o=null!==e?e.length:0;let c=null;if(0!==o){if(c=l.value,!0!==i||null===c){const t=r+4*o,i=n.matrixWorldInverse;a.getNormalMatrix(i),(null===c||c.length<t)&&(c=new Float32Array(t));for(let n=0,l=r;n!==o;++n,l+=4)s.copy(e[n]).applyMatrix4(i,a),s.normal.toArray(c,l),c[l+3]=s.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==r||i;return i=t,r=e.length,n},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(e,t){n=u(e,t,0)},this.setState=function(t,s,a){const d=t.clippingPlanes,h=t.clipIntersection,f=t.clipShadows,p=e.get(t);if(!i||null===d||0===d.length||o&&!f)o?u(null):c();else{const e=o?0:r,t=4*e;let i=p.clippingState||null;l.value=i,i=u(d,s,t,a);for(let r=0;r!==t;++r)i[r]=n[r];p.clippingState=i,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}}}function al(e){let t=new WeakMap;function n(e,t){return t===re?e.mapping=te:t===ie&&(e.mapping=ne),e}function r(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){const o=r.mapping;if(o===re||o===ie){if(t.has(r)){const e=t.get(r).texture;return n(e,r.mapping)}{const o=r.image;if(o&&o.height>0){const s=new ho(o.height/2);return s.fromEquirectangularTexture(e,r),t.set(r,s),r.addEventListener("dispose",i),n(s.texture,r.mapping)}return null}}}return r}function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}function o(){t=new WeakMap}return{get:r,dispose:o}}class ll extends oo{constructor(e=-1,t=1,n=1,r=-1,i=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,o=n+e,s=r+t,a=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,o=i+e*this.view.width,s-=t*this.view.offsetY,a=s-t*this.view.height}this.projectionMatrix.makeOrthographic(i,o,s,a,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const cl=4,ul=[.125,.215,.35,.446,.526,.582],dl=20,hl=new ll,fl=new fi;let pl=null;const ml=(1+Math.sqrt(5))/2,gl=1/ml,vl=[new qn(1,1,1),new qn(-1,1,1),new qn(1,1,-1),new qn(-1,1,-1),new qn(0,ml,gl),new qn(0,ml,-gl),new qn(gl,0,ml),new qn(-gl,0,ml),new qn(ml,gl,0),new qn(-ml,gl,0)];class yl{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){pl=this._renderer.getRenderTarget(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=El(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Sl(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(pl),e.scissorTest=!1,wl(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===te||e.mapping===ne?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),pl=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:he,minFilter:he,generateMipmaps:!1,type:xe,format:Ce,colorSpace:Ct,depthBuffer:!1},r=_l(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=_l(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=bl(r)),this._blurMaterial=xl(r,e,t)}return r}_compileMaterial(e){const t=new qi(this._lodPlanes[0],e);this._renderer.compile(t,hl)}_sceneToCubeUV(e,t,n,r){const i=90,o=1,s=new so(i,o,t,n),a=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],c=this._renderer,u=c.autoClear,d=c.toneMapping;c.getClearColor(fl),c.toneMapping=Y,c.autoClear=!1;const h=new mi({name:"PMREM.Background",side:f,depthWrite:!1,depthTest:!1}),p=new qi(new Zi,h);let m=!1;const g=e.background;g?g.isColor&&(h.color.copy(g),e.background=null,m=!0):(h.color.copy(fl),m=!0);for(let f=0;f<6;f++){const t=f%3;0===t?(s.up.set(0,a[f],0),s.lookAt(l[f],0,0)):1===t?(s.up.set(0,0,a[f]),s.lookAt(0,l[f],0)):(s.up.set(0,a[f],0),s.lookAt(0,0,l[f]));const n=this._cubeSize;wl(r,t*n,f>2?n:0,n,n),c.setRenderTarget(r),m&&c.render(p,s),c.render(e,s)}p.geometry.dispose(),p.material.dispose(),c.toneMapping=d,c.autoClear=u,e.background=g}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===te||e.mapping===ne;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=El()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Sl());const i=r?this._cubemapMaterial:this._equirectMaterial,o=new qi(this._lodPlanes[0],i),s=i.uniforms;s["envMap"].value=e;const a=this._cubeSize;wl(t,0,0,3*a,2*a),n.setRenderTarget(t),n.render(o,hl)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const t=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),n=vl[(r-1)%vl.length];this._blur(e,r-1,r,t,n)}t.autoClear=n}_blur(e,t,n,r,i){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",i),this._halfBlur(o,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,o,s){const a=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,u=new qi(this._lodPlanes[r],l),d=l.uniforms,h=this._sizeLods[n]-1,f=isFinite(i)?Math.PI/(2*h):2*Math.PI/(2*dl-1),p=i/f,m=isFinite(i)?1+Math.floor(c*p):dl;m>dl&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${dl}`);const g=[];let v=0;for(let x=0;x<dl;++x){const e=x/p,t=Math.exp(-e*e/2);g.push(t),0===x?v+=t:x<m&&(v+=2*t)}for(let x=0;x<g.length;x++)g[x]=g[x]/v;d["envMap"].value=e.texture,d["samples"].value=m,d["weights"].value=g,d["latitudinal"].value="latitudinal"===o,s&&(d["poleAxis"].value=s);const{_lodMax:y}=this;d["dTheta"].value=f,d["mipInt"].value=y-n;const b=this._sizeLods[r],_=3*b*(r>y-cl?r-y+cl:0),w=4*(this._cubeSize-b);wl(t,_,w,3*b,2*b),a.setRenderTarget(t),a.render(u,hl)}}function bl(e){const t=[],n=[],r=[];let i=e;const o=e-cl+1+ul.length;for(let s=0;s<o;s++){const o=Math.pow(2,i);n.push(o);let a=1/o;s>e-cl?a=ul[s-e+cl-1]:0===s&&(a=0),r.push(a);const l=1/(o-2),c=-l,u=1+l,d=[c,c,u,c,u,u,c,c,u,u,c,u],h=6,f=6,p=3,m=2,g=1,v=new Float32Array(p*f*h),y=new Float32Array(m*f*h),b=new Float32Array(g*f*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(r,p*f*e),y.set(d,m*f*e);const i=[e,e,e,e,e,e];b.set(i,g*f*e)}const _=new ki;_.setAttribute("position",new yi(v,p)),_.setAttribute("uv",new yi(y,m)),_.setAttribute("faceIndex",new yi(b,g)),t.push(_),i>cl&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}function _l(e,t,n){const r=new Hn(e,t,n);return r.texture.mapping=oe,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function wl(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function xl(e,t,n){const r=new Float32Array(dl),i=new qn(0,1,0),o=new io({name:"SphericalGaussianBlur",defines:{n:dl,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Ml(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:m,depthTest:!1,depthWrite:!1});return o}function Sl(){return new io({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Ml(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:m,depthTest:!1,depthWrite:!1})}function El(){return new io({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Ml(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:m,depthTest:!1,depthWrite:!1})}function Ml(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Tl(e){let t=new WeakMap,n=null;function r(r){if(r&&r.isTexture){const s=r.mapping,a=s===re||s===ie,l=s===te||s===ne;if(a||l){if(r.isRenderTargetTexture&&!0===r.needsPMREMUpdate){r.needsPMREMUpdate=!1;let i=t.get(r);return null===n&&(n=new yl(e)),i=a?n.fromEquirectangular(r,i):n.fromCubemap(r,i),t.set(r,i),i.texture}if(t.has(r))return t.get(r).texture;{const s=r.image;if(a&&s&&s.height>0||l&&s&&i(s)){null===n&&(n=new yl(e));const i=a?n.fromEquirectangular(r):n.fromCubemap(r);return t.set(r,i),r.addEventListener("dispose",o),i.texture}return null}}}return r}function i(e){let t=0;const n=6;for(let r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}function o(e){const n=e.target;n.removeEventListener("dispose",o);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}function s(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}return{get:r,dispose:s}}function Cl(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function Al(e,t,n,r){const i={},o=new WeakMap;function s(e){const a=e.target;null!==a.index&&t.remove(a.index);for(const n in a.attributes)t.remove(a.attributes[n]);for(const n in a.morphAttributes){const e=a.morphAttributes[n];for(let n=0,r=e.length;n<r;n++)t.remove(e[n])}a.removeEventListener("dispose",s),delete i[a.id];const l=o.get(a);l&&(t.remove(l),o.delete(a)),r.releaseStatesOfGeometry(a),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,n.memory.geometries--}function a(e,t){return!0===i[t.id]||(t.addEventListener("dispose",s),i[t.id]=!0,n.memory.geometries++),t}function l(n){const r=n.attributes;for(const o in r)t.update(r[o],e.ARRAY_BUFFER);const i=n.morphAttributes;for(const o in i){const n=i[o];for(let r=0,i=n.length;r<i;r++)t.update(n[r],e.ARRAY_BUFFER)}}function c(e){const n=[],r=e.index,i=e.attributes.position;let s=0;if(null!==r){const e=r.array;s=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],o=e[t+2];n.push(r,i,i,o,o,r)}}else{const e=i.array;s=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}const a=new(xn(n)?_i:bi)(n,1);a.version=s;const l=o.get(e);l&&t.remove(l),o.set(e,a)}function u(e){const t=o.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&c(e)}else c(e);return o.get(e)}return{get:a,update:l,getWireframeAttribute:u}}function kl(e,t,n,r){const i=r.isWebGL2;let o,s,a;function l(e){o=e}function c(e){s=e.type,a=e.bytesPerElement}function u(t,r){e.drawElements(o,r,s,t*a),n.update(r,o,1)}function d(r,l,c){if(0===c)return;let u,d;if(i)u=e,d="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),d="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[d](o,l,s,r*a,c),n.update(l,o,c)}this.setMode=l,this.setIndex=c,this.render=u,this.renderInstances=d}function Ol(e){const t={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(t,r,i){switch(n.calls++,r){case e.TRIANGLES:n.triangles+=i*(t/3);break;case e.LINES:n.lines+=i*(t/2);break;case e.LINE_STRIP:n.lines+=i*(t-1);break;case e.LINE_LOOP:n.lines+=i*t;break;case e.POINTS:n.points+=i*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:t,render:n,programs:null,autoReset:!0,reset:i,update:r}}function Rl(e,t){return e[0]-t[0]}function Pl(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Ll(e,t,n){const r={},i=new Float32Array(8),o=new WeakMap,s=new jn,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(l,c,u){const d=l.morphTargetInfluences;if(!0===t.isWebGL2){const h=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,f=void 0!==h?h.length:0;let p=o.get(c);if(void 0===p||p.count!==f){void 0!==p&&p.texture.dispose();const v=void 0!==c.morphAttributes.position,y=void 0!==c.morphAttributes.normal,b=void 0!==c.morphAttributes.color,_=c.morphAttributes.position||[],w=c.morphAttributes.normal||[],x=c.morphAttributes.color||[];let S=0;!0===v&&(S=1),!0===y&&(S=2),!0===b&&(S=3);let E=c.attributes.position.count*S,M=1;E>t.maxTextureSize&&(M=Math.ceil(E/t.maxTextureSize),E=t.maxTextureSize);const T=new Float32Array(E*M*4*f),C=new Wn(T,E,M,f);C.type=we,C.needsUpdate=!0;const A=4*S;for(let O=0;O<f;O++){const R=_[O],P=w[O],L=x[O],D=E*M*4*O;for(let I=0;I<R.count;I++){const N=I*A;!0===v&&(s.fromBufferAttribute(R,I),T[D+N+0]=s.x,T[D+N+1]=s.y,T[D+N+2]=s.z,T[D+N+3]=0),!0===y&&(s.fromBufferAttribute(P,I),T[D+N+4]=s.x,T[D+N+5]=s.y,T[D+N+6]=s.z,T[D+N+7]=0),!0===b&&(s.fromBufferAttribute(L,I),T[D+N+8]=s.x,T[D+N+9]=s.y,T[D+N+10]=s.z,T[D+N+11]=4===L.itemSize?s.w:1)}}function k(){C.dispose(),o.delete(c),c.removeEventListener("dispose",k)}p={count:f,texture:C,size:new bn(E,M)},o.set(c,p),c.addEventListener("dispose",k)}let m=0;for(let U=0;U<d.length;U++)m+=d[U];const g=c.morphTargetsRelative?1:1-m;u.getUniforms().setValue(e,"morphTargetBaseInfluence",g),u.getUniforms().setValue(e,"morphTargetInfluences",d),u.getUniforms().setValue(e,"morphTargetsTexture",p.texture,n),u.getUniforms().setValue(e,"morphTargetsTextureSize",p.size)}else{const F=void 0===d?0:d.length;let B=r[c.id];if(void 0===B||B.length!==F){B=[];for(let W=0;W<F;W++)B[W]=[W,0];r[c.id]=B}for(let G=0;G<F;G++){const $=B[G];$[0]=G,$[1]=d[G]}B.sort(Pl);for(let q=0;q<8;q++)q<F&&B[q][1]?(a[q][0]=B[q][0],a[q][1]=B[q][1]):(a[q][0]=Number.MAX_SAFE_INTEGER,a[q][1]=0);a.sort(Rl);const V=c.morphAttributes.position,z=c.morphAttributes.normal;let j=0;for(let Y=0;Y<8;Y++){const X=a[Y],Z=X[0],K=X[1];Z!==Number.MAX_SAFE_INTEGER&&K?(V&&c.getAttribute("morphTarget"+Y)!==V[Z]&&c.setAttribute("morphTarget"+Y,V[Z]),z&&c.getAttribute("morphNormal"+Y)!==z[Z]&&c.setAttribute("morphNormal"+Y,z[Z]),i[Y]=K,j+=K):(V&&!0===c.hasAttribute("morphTarget"+Y)&&c.deleteAttribute("morphTarget"+Y),z&&!0===c.hasAttribute("morphNormal"+Y)&&c.deleteAttribute("morphNormal"+Y),i[Y]=0)}const H=c.morphTargetsRelative?1:1-j;u.getUniforms().setValue(e,"morphTargetBaseInfluence",H),u.getUniforms().setValue(e,"morphTargetInfluences",i)}}return{update:l}}function Dl(e,t,n,r){let i=new WeakMap;function o(o){const s=r.render.frame,l=o.geometry,c=t.get(o,l);return i.get(c)!==s&&(t.update(c),i.set(c,s)),o.isInstancedMesh&&(!1===o.hasEventListener("dispose",a)&&o.addEventListener("dispose",a),n.update(o.instanceMatrix,e.ARRAY_BUFFER),null!==o.instanceColor&&n.update(o.instanceColor,e.ARRAY_BUFFER)),c}function s(){i=new WeakMap}function a(e){const t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:o,dispose:s}}const Il=new zn,Nl=new Wn,Ul=new Gn,Fl=new uo,Bl=[],Vl=[],zl=new Float32Array(16),jl=new Float32Array(9),Hl=new Float32Array(4);function Wl(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let o=Bl[i];if(void 0===o&&(o=new Float32Array(i),Bl[i]=o),0!==t){r.toArray(o,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(o,i)}return o}function Gl(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function $l(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function ql(e,t){let n=Vl[t];void 0===n&&(n=new Int32Array(t),Vl[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Yl(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Xl(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Gl(n,t))return;e.uniform2fv(this.addr,t),$l(n,t)}}function Zl(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Gl(n,t))return;e.uniform3fv(this.addr,t),$l(n,t)}}function Kl(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Gl(n,t))return;e.uniform4fv(this.addr,t),$l(n,t)}}function Jl(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Gl(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),$l(n,t)}else{if(Gl(n,r))return;Hl.set(r),e.uniformMatrix2fv(this.addr,!1,Hl),$l(n,r)}}function Ql(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Gl(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),$l(n,t)}else{if(Gl(n,r))return;jl.set(r),e.uniformMatrix3fv(this.addr,!1,jl),$l(n,r)}}function ec(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Gl(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),$l(n,t)}else{if(Gl(n,r))return;zl.set(r),e.uniformMatrix4fv(this.addr,!1,zl),$l(n,r)}}function tc(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function nc(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Gl(n,t))return;e.uniform2iv(this.addr,t),$l(n,t)}}function rc(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Gl(n,t))return;e.uniform3iv(this.addr,t),$l(n,t)}}function ic(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Gl(n,t))return;e.uniform4iv(this.addr,t),$l(n,t)}}function oc(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function sc(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Gl(n,t))return;e.uniform2uiv(this.addr,t),$l(n,t)}}function ac(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Gl(n,t))return;e.uniform3uiv(this.addr,t),$l(n,t)}}function lc(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Gl(n,t))return;e.uniform4uiv(this.addr,t),$l(n,t)}}function cc(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||Il,i)}function uc(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Ul,i)}function dc(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||Fl,i)}function hc(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||Nl,i)}function fc(e){switch(e){case 5126:return Yl;case 35664:return Xl;case 35665:return Zl;case 35666:return Kl;case 35674:return Jl;case 35675:return Ql;case 35676:return ec;case 5124:case 35670:return tc;case 35667:case 35671:return nc;case 35668:case 35672:return rc;case 35669:case 35673:return ic;case 5125:return oc;case 36294:return sc;case 36295:return ac;case 36296:return lc;case 35678:case 36198:case 36298:case 36306:case 35682:return cc;case 35679:case 36299:case 36307:return uc;case 35680:case 36300:case 36308:case 36293:return dc;case 36289:case 36303:case 36311:case 36292:return hc}}function pc(e,t){e.uniform1fv(this.addr,t)}function mc(e,t){const n=Wl(t,this.size,2);e.uniform2fv(this.addr,n)}function gc(e,t){const n=Wl(t,this.size,3);e.uniform3fv(this.addr,n)}function vc(e,t){const n=Wl(t,this.size,4);e.uniform4fv(this.addr,n)}function yc(e,t){const n=Wl(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function bc(e,t){const n=Wl(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function _c(e,t){const n=Wl(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function wc(e,t){e.uniform1iv(this.addr,t)}function xc(e,t){e.uniform2iv(this.addr,t)}function Sc(e,t){e.uniform3iv(this.addr,t)}function Ec(e,t){e.uniform4iv(this.addr,t)}function Mc(e,t){e.uniform1uiv(this.addr,t)}function Tc(e,t){e.uniform2uiv(this.addr,t)}function Cc(e,t){e.uniform3uiv(this.addr,t)}function Ac(e,t){e.uniform4uiv(this.addr,t)}function kc(e,t,n){const r=this.cache,i=t.length,o=ql(n,i);Gl(r,o)||(e.uniform1iv(this.addr,o),$l(r,o));for(let s=0;s!==i;++s)n.setTexture2D(t[s]||Il,o[s])}function Oc(e,t,n){const r=this.cache,i=t.length,o=ql(n,i);Gl(r,o)||(e.uniform1iv(this.addr,o),$l(r,o));for(let s=0;s!==i;++s)n.setTexture3D(t[s]||Ul,o[s])}function Rc(e,t,n){const r=this.cache,i=t.length,o=ql(n,i);Gl(r,o)||(e.uniform1iv(this.addr,o),$l(r,o));for(let s=0;s!==i;++s)n.setTextureCube(t[s]||Fl,o[s])}function Pc(e,t,n){const r=this.cache,i=t.length,o=ql(n,i);Gl(r,o)||(e.uniform1iv(this.addr,o),$l(r,o));for(let s=0;s!==i;++s)n.setTexture2DArray(t[s]||Nl,o[s])}function Lc(e){switch(e){case 5126:return pc;case 35664:return mc;case 35665:return gc;case 35666:return vc;case 35674:return yc;case 35675:return bc;case 35676:return _c;case 5124:case 35670:return wc;case 35667:case 35671:return xc;case 35668:case 35672:return Sc;case 35669:case 35673:return Ec;case 5125:return Mc;case 36294:return Tc;case 36295:return Cc;case 36296:return Ac;case 35678:case 36198:case 36298:case 36306:case 35682:return kc;case 35679:case 36299:case 36307:return Oc;case 35680:case 36300:case 36308:case 36293:return Rc;case 36289:case 36303:case 36311:case 36292:return Pc}}class Dc{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=fc(t.type)}}class Ic{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=Lc(t.type)}}class Nc{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const o=r[i];o.setValue(e,t[o.id],n)}}}const Uc=/(\w+)(\])?(\[|\.)?/g;function Fc(e,t){e.seq.push(t),e.map[t.id]=t}function Bc(e,t,n){const r=e.name,i=r.length;Uc.lastIndex=0;while(1){const o=Uc.exec(r),s=Uc.lastIndex;let a=o[1];const l="]"===o[2],c=o[3];if(l&&(a|=0),void 0===c||"["===c&&s+2===i){Fc(n,void 0===c?new Dc(a,e,t):new Ic(a,e,t));break}{const e=n.map;let t=e[a];void 0===t&&(t=new Nc(a),Fc(n,t)),n=t}}}class Vc{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r),i=e.getUniformLocation(t,n.name);Bc(n,i,this)}}setValue(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,o=t.length;i!==o;++i){const o=t[i],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n}}function zc(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}let jc=0;function Hc(e,t){const n=e.split("\n"),r=[],i=Math.max(t-6,0),o=Math.min(t+6,n.length);for(let s=i;s<o;s++){const e=s+1;r.push(`${e===t?">":" "} ${e}: ${n[s]}`)}return r.join("\n")}function Wc(e){switch(e){case Ct:return["Linear","( value )"];case Tt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",e),["Linear","( value )"]}}function Gc(e,t,n){const r=e.getShaderParameter(t,e.COMPILE_STATUS),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const r=parseInt(o[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+Hc(e.getShaderSource(t),r)}return i}function $c(e,t){const n=Wc(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function qc(e,t){let n;switch(t){case X:n="Linear";break;case Z:n="Reinhard";break;case K:n="OptimizedCineon";break;case J:n="ACESFilmic";break;case Q:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Yc(e){const t=[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.normalMapTangentSpace||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return t.filter(Kc).join("\n")}function Xc(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}function Zc(e,t){const n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i),o=r.name;let s=1;r.type===e.FLOAT_MAT2&&(s=2),r.type===e.FLOAT_MAT3&&(s=3),r.type===e.FLOAT_MAT4&&(s=4),n[o]={type:r.type,location:e.getAttribLocation(t,o),locationSize:s}}return n}function Kc(e){return""!==e}function Jc(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Qc(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const eu=/^[ \t]*#include +<([\w\d./]+)>/gm;function tu(e){return e.replace(eu,nu)}function nu(e,t){const n=Ja[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return tu(n)}const ru=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function iu(e){return e.replace(ru,ou)}function ou(e,t,n,r){let i="";for(let o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function su(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function au(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===c?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===u?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===d&&(t="SHADOWMAP_TYPE_VSM"),t}function lu(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case te:case ne:t="ENVMAP_TYPE_CUBE";break;case oe:t="ENVMAP_TYPE_CUBE_UV";break}return t}function cu(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case ne:t="ENVMAP_MODE_REFRACTION";break}return t}function uu(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case G:t="ENVMAP_BLENDING_MULTIPLY";break;case $:t="ENVMAP_BLENDING_MIX";break;case q:t="ENVMAP_BLENDING_ADD";break}return t}function du(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,r=1/t,i=1/(3*Math.max(Math.pow(2,n),112));return{texelWidth:i,texelHeight:r,maxMip:n}}function hu(e,t,n,r){const i=e.getContext(),o=n.defines;let s=n.vertexShader,a=n.fragmentShader;const l=au(n),c=lu(n),u=cu(n),d=uu(n),h=du(n),f=n.isWebGL2?"":Yc(n),p=Xc(o),m=i.createProgram();let g,v,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter(Kc).join("\n"),g.length>0&&(g+="\n"),v=[f,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter(Kc).join("\n"),v.length>0&&(v+="\n")):(g=[su(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Kc).join("\n"),v=[f,su(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Y?"#define TONE_MAPPING":"",n.toneMapping!==Y?Ja["tonemapping_pars_fragment"]:"",n.toneMapping!==Y?qc("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Ja["encodings_pars_fragment"],$c("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Kc).join("\n")),s=tu(s),s=Jc(s,n),s=Qc(s,n),a=tu(a),a=Jc(a,n),a=Qc(a,n),s=iu(s),a=iu(a),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in",n.glslVersion===Vt?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Vt?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const b=y+g+s,_=y+v+a,w=zc(i,i.VERTEX_SHADER,b),x=zc(i,i.FRAGMENT_SHADER,_);if(i.attachShader(m,w),i.attachShader(m,x),void 0!==n.index0AttributeName?i.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),e.debug.checkShaderErrors){const t=i.getProgramInfoLog(m).trim(),n=i.getShaderInfoLog(w).trim(),r=i.getShaderInfoLog(x).trim();let o=!0,s=!0;if(!1===i.getProgramParameter(m,i.LINK_STATUS))if(o=!1,"function"===typeof e.debug.onShaderError)e.debug.onShaderError(i,m,w,x);else{const e=Gc(i,w,"vertex"),n=Gc(i,x,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,i.VALIDATE_STATUS)+"\n\nProgram Info Log: "+t+"\n"+e+"\n"+n)}else""!==t?console.warn("THREE.WebGLProgram: Program Info Log:",t):""!==n&&""!==r||(s=!1);s&&(this.diagnostics={runnable:o,programLog:t,vertexShader:{log:n,prefix:g},fragmentShader:{log:r,prefix:v}})}let S,E;return i.deleteShader(w),i.deleteShader(x),this.getUniforms=function(){return void 0===S&&(S=new Vc(i,m)),S},this.getAttributes=function(){return void 0===E&&(E=Zc(i,m)),E},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=jc++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=w,this.fragmentShader=x,this}let fu=0;class pu{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(i)&&(o.add(i),i.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new mu(e),t.set(e,n)),n}}class mu{constructor(e){this.id=fu++,this.code=e,this.usedTimes=0}}function gu(e,t,n,r,i,o,s){const a=new Dr,l=new pu,c=[],u=i.isWebGL2,d=i.logarithmicDepthBuffer,h=i.vertexTextures;let m=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(e){return 0===e?"uv":`uv${e}`}function b(o,a,c,b,_){const w=b.fog,x=_.geometry,S=o.isMeshStandardMaterial?b.environment:null,E=(o.isMeshStandardMaterial?n:t).get(o.envMap||S),M=E&&E.mapping===oe?E.image.height:null,T=v[o.type];null!==o.precision&&(m=i.getMaxPrecision(o.precision),m!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",m,"instead."));const C=x.morphAttributes.position||x.morphAttributes.normal||x.morphAttributes.color,A=void 0!==C?C.length:0;let k,O,R,P,L=0;if(void 0!==x.morphAttributes.position&&(L=1),void 0!==x.morphAttributes.normal&&(L=2),void 0!==x.morphAttributes.color&&(L=3),T){const e=el[T];k=e.vertexShader,O=e.fragmentShader}else k=o.vertexShader,O=o.fragmentShader,l.update(o),R=l.getVertexShaderID(o),P=l.getFragmentShaderID(o);const D=e.getRenderTarget(),I=!0===_.isInstancedMesh,N=!!o.map,U=!!o.matcap,F=!!E,B=!!o.aoMap,V=!!o.lightMap,z=!!o.bumpMap,j=!!o.normalMap,H=!!o.displacementMap,W=!!o.emissiveMap,G=!!o.metalnessMap,$=!!o.roughnessMap,q=o.anisotropy>0,X=o.clearcoat>0,Z=o.iridescence>0,K=o.sheen>0,J=o.transmission>0,Q=q&&!!o.anisotropyMap,ee=X&&!!o.clearcoatMap,te=X&&!!o.clearcoatNormalMap,ne=X&&!!o.clearcoatRoughnessMap,re=Z&&!!o.iridescenceMap,ie=Z&&!!o.iridescenceThicknessMap,se=K&&!!o.sheenColorMap,ae=K&&!!o.sheenRoughnessMap,le=!!o.specularMap,ce=!!o.specularColorMap,ue=!!o.specularIntensityMap,de=J&&!!o.transmissionMap,he=J&&!!o.thicknessMap,fe=!!o.gradientMap,pe=!!o.alphaMap,me=o.alphaTest>0,ge=!!o.extensions,ve=!!x.attributes.uv1,ye=!!x.attributes.uv2,be=!!x.attributes.uv3,_e={isWebGL2:u,shaderID:T,shaderType:o.type,shaderName:o.name,vertexShader:k,fragmentShader:O,defines:o.defines,customVertexShaderID:R,customFragmentShaderID:P,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:m,instancing:I,instancingColor:I&&null!==_.instanceColor,supportsVertexTextures:h,outputColorSpace:null===D?e.outputColorSpace:!0===D.isXRRenderTarget?D.texture.colorSpace:Ct,map:N,matcap:U,envMap:F,envMapMode:F&&E.mapping,envMapCubeUVHeight:M,aoMap:B,lightMap:V,bumpMap:z,normalMap:j,displacementMap:h&&H,emissiveMap:W,normalMapObjectSpace:j&&o.normalMapType===Et,normalMapTangentSpace:j&&o.normalMapType===St,metalnessMap:G,roughnessMap:$,anisotropy:q,anisotropyMap:Q,clearcoat:X,clearcoatMap:ee,clearcoatNormalMap:te,clearcoatRoughnessMap:ne,iridescence:Z,iridescenceMap:re,iridescenceThicknessMap:ie,sheen:K,sheenColorMap:se,sheenRoughnessMap:ae,specularMap:le,specularColorMap:ce,specularIntensityMap:ue,transmission:J,transmissionMap:de,thicknessMap:he,gradientMap:fe,opaque:!1===o.transparent&&o.blending===g,alphaMap:pe,alphaTest:me,combine:o.combine,mapUv:N&&y(o.map.channel),aoMapUv:B&&y(o.aoMap.channel),lightMapUv:V&&y(o.lightMap.channel),bumpMapUv:z&&y(o.bumpMap.channel),normalMapUv:j&&y(o.normalMap.channel),displacementMapUv:H&&y(o.displacementMap.channel),emissiveMapUv:W&&y(o.emissiveMap.channel),metalnessMapUv:G&&y(o.metalnessMap.channel),roughnessMapUv:$&&y(o.roughnessMap.channel),anisotropyMapUv:Q&&y(o.anisotropyMap.channel),clearcoatMapUv:ee&&y(o.clearcoatMap.channel),clearcoatNormalMapUv:te&&y(o.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ne&&y(o.clearcoatRoughnessMap.channel),iridescenceMapUv:re&&y(o.iridescenceMap.channel),iridescenceThicknessMapUv:ie&&y(o.iridescenceThicknessMap.channel),sheenColorMapUv:se&&y(o.sheenColorMap.channel),sheenRoughnessMapUv:ae&&y(o.sheenRoughnessMap.channel),specularMapUv:le&&y(o.specularMap.channel),specularColorMapUv:ce&&y(o.specularColorMap.channel),specularIntensityMapUv:ue&&y(o.specularIntensityMap.channel),transmissionMapUv:de&&y(o.transmissionMap.channel),thicknessMapUv:he&&y(o.thicknessMap.channel),alphaMapUv:pe&&y(o.alphaMap.channel),vertexTangents:!!x.attributes.tangent&&(j||q),vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!x.attributes.color&&4===x.attributes.color.itemSize,vertexUv1s:ve,vertexUv2s:ye,vertexUv3s:be,pointsUvs:!0===_.isPoints&&!!x.attributes.uv&&(N||pe),fog:!!w,useFog:!0===o.fog,fogExp2:w&&w.isFogExp2,flatShading:!0===o.flatShading,sizeAttenuation:!0===o.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===_.isSkinnedMesh,morphTargets:void 0!==x.morphAttributes.position,morphNormals:void 0!==x.morphAttributes.normal,morphColors:void 0!==x.morphAttributes.color,morphTargetsCount:A,morphTextureStride:L,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numSpotLightMaps:a.spotLightMap.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numSpotLightShadowsWithMaps:a.numSpotLightShadowsWithMaps,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:o.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:o.toneMapped?e.toneMapping:Y,useLegacyLights:e.useLegacyLights,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===p,flipSided:o.side===f,useDepthPacking:o.depthPacking>=0,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionDerivatives:ge&&!0===o.extensions.derivatives,extensionFragDepth:ge&&!0===o.extensions.fragDepth,extensionDrawBuffers:ge&&!0===o.extensions.drawBuffers,extensionShaderTextureLOD:ge&&!0===o.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:o.customProgramCacheKey()};return _e}function _(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(w(n,t),x(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()}function w(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}function x(e,t){a.disableAll(),t.isWebGL2&&a.enable(0),t.supportsVertexTextures&&a.enable(1),t.instancing&&a.enable(2),t.instancingColor&&a.enable(3),t.matcap&&a.enable(4),t.envMap&&a.enable(5),t.normalMapObjectSpace&&a.enable(6),t.normalMapTangentSpace&&a.enable(7),t.clearcoat&&a.enable(8),t.iridescence&&a.enable(9),t.alphaTest&&a.enable(10),t.vertexColors&&a.enable(11),t.vertexAlphas&&a.enable(12),t.vertexUv1s&&a.enable(13),t.vertexUv2s&&a.enable(14),t.vertexUv3s&&a.enable(15),t.vertexTangents&&a.enable(16),t.anisotropy&&a.enable(17),e.push(a.mask),a.disableAll(),t.fog&&a.enable(0),t.useFog&&a.enable(1),t.flatShading&&a.enable(2),t.logarithmicDepthBuffer&&a.enable(3),t.skinning&&a.enable(4),t.morphTargets&&a.enable(5),t.morphNormals&&a.enable(6),t.morphColors&&a.enable(7),t.premultipliedAlpha&&a.enable(8),t.shadowMapEnabled&&a.enable(9),t.useLegacyLights&&a.enable(10),t.doubleSided&&a.enable(11),t.flipSided&&a.enable(12),t.useDepthPacking&&a.enable(13),t.dithering&&a.enable(14),t.transmission&&a.enable(15),t.sheen&&a.enable(16),t.opaque&&a.enable(17),t.pointsUvs&&a.enable(18),e.push(a.mask)}function S(e){const t=v[e.type];let n;if(t){const e=el[t];n=to.clone(e.uniforms)}else n=e.uniforms;return n}function E(t,n){let r;for(let e=0,i=c.length;e<i;e++){const t=c[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new hu(e,n,t,o),c.push(r)),r}function M(e){if(0===--e.usedTimes){const t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}}function T(e){l.remove(e)}function C(){l.dispose()}return{getParameters:b,getProgramCacheKey:_,getUniforms:S,acquireProgram:E,releaseProgram:M,releaseShaderCache:T,programs:c,dispose:C}}function vu(){let e=new WeakMap;function t(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n}function n(t){e.delete(t)}function r(t,n,r){e.get(t)[n]=r}function i(){e=new WeakMap}return{get:t,remove:n,update:r,dispose:i}}function yu(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function bu(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function _u(){const e=[];let t=0;const n=[],r=[],i=[];function o(){t=0,n.length=0,r.length=0,i.length=0}function s(n,r,i,o,s,a){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:o,renderOrder:n.renderOrder,z:s,group:a},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=o,l.renderOrder=n.renderOrder,l.z=s,l.group=a),t++,l}function a(e,t,o,a,l,c){const u=s(e,t,o,a,l,c);o.transmission>0?r.push(u):!0===o.transparent?i.push(u):n.push(u)}function l(e,t,o,a,l,c){const u=s(e,t,o,a,l,c);o.transmission>0?r.unshift(u):!0===o.transparent?i.unshift(u):n.unshift(u)}function c(e,t){n.length>1&&n.sort(e||yu),r.length>1&&r.sort(t||bu),i.length>1&&i.sort(t||bu)}function u(){for(let n=t,r=e.length;n<r;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}}return{opaque:n,transmissive:r,transparent:i,init:o,push:a,unshift:l,finish:u,sort:c}}function wu(){let e=new WeakMap;function t(t,n){const r=e.get(t);let i;return void 0===r?(i=new _u,e.set(t,[i])):n>=r.length?(i=new _u,r.push(i)):i=r[n],i}function n(){e=new WeakMap}return{get:t,dispose:n}}function xu(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new qn,color:new fi};break;case"SpotLight":n={position:new qn,direction:new qn,color:new fi,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new qn,color:new fi,distance:0,decay:0};break;case"HemisphereLight":n={direction:new qn,skyColor:new fi,groundColor:new fi};break;case"RectAreaLight":n={color:new fi,position:new qn,halfWidth:new qn,halfHeight:new qn};break}return e[t.id]=n,n}}}function Su(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new bn};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new bn};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new bn,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[t.id]=n,n}}}let Eu=0;function Mu(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function Tu(e,t){const n=new xu,r=Su(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)i.probe.push(new qn);const o=new qn,s=new Sr,a=new Sr;function l(o,s){let a=0,l=0,c=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let u=0,d=0,h=0,f=0,p=0,m=0,g=0,v=0,y=0,b=0;o.sort(Mu);const _=!0===s?Math.PI:1;for(let e=0,t=o.length;e<t;e++){const t=o[e],s=t.color,w=t.intensity,x=t.distance,S=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)a+=s.r*w*_,l+=s.g*w*_,c+=s.b*w*_;else if(t.isLightProbe)for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],w);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*_),t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[u]=n,i.directionalShadowMap[u]=S,i.directionalShadowMatrix[u]=t.shadow.matrix,m++}i.directional[u]=e,u++}else if(t.isSpotLight){const e=n.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(s).multiplyScalar(w*_),e.distance=x,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,i.spot[h]=e;const o=t.shadow;if(t.map&&(i.spotLightMap[y]=t.map,y++,o.updateMatrices(t),t.castShadow&&b++),i.spotLightMatrix[h]=o.matrix,t.castShadow){const e=r.get(t);e.shadowBias=o.bias,e.shadowNormalBias=o.normalBias,e.shadowRadius=o.radius,e.shadowMapSize=o.mapSize,i.spotShadow[h]=e,i.spotShadowMap[h]=S,v++}h++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(s).multiplyScalar(w),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[f]=e,f++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*_),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[d]=n,i.pointShadowMap[d]=S,i.pointShadowMatrix[d]=t.shadow.matrix,g++}i.point[d]=e,d++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(w*_),e.groundColor.copy(t.groundColor).multiplyScalar(w*_),i.hemi[p]=e,p++}}f>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=Qa.LTC_FLOAT_1,i.rectAreaLTC2=Qa.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Qa.LTC_HALF_1,i.rectAreaLTC2=Qa.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=a,i.ambient[1]=l,i.ambient[2]=c;const w=i.hash;w.directionalLength===u&&w.pointLength===d&&w.spotLength===h&&w.rectAreaLength===f&&w.hemiLength===p&&w.numDirectionalShadows===m&&w.numPointShadows===g&&w.numSpotShadows===v&&w.numSpotMaps===y||(i.directional.length=u,i.spot.length=h,i.rectArea.length=f,i.point.length=d,i.hemi.length=p,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=v,i.spotShadowMap.length=v,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotLightMatrix.length=v+y-b,i.spotLightMap.length=y,i.numSpotLightShadowsWithMaps=b,w.directionalLength=u,w.pointLength=d,w.spotLength=h,w.rectAreaLength=f,w.hemiLength=p,w.numDirectionalShadows=m,w.numPointShadows=g,w.numSpotShadows=v,w.numSpotMaps=y,i.version=Eu++)}function c(e,t){let n=0,r=0,l=0,c=0,u=0;const d=t.matrixWorldInverse;for(let h=0,f=e.length;h<f;h++){const t=e[h];if(t.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),o.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(d),n++}else if(t.isSpotLight){const e=i.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),e.direction.setFromMatrixPosition(t.matrixWorld),o.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(d),l++}else if(t.isRectAreaLight){const e=i.rectArea[c];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),a.identity(),s.copy(t.matrixWorld),s.premultiply(d),a.extractRotation(s),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(a),e.halfHeight.applyMatrix4(a),c++}else if(t.isPointLight){const e=i.point[r];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),r++}else if(t.isHemisphereLight){const e=i.hemi[u];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(d),u++}}}return{setup:l,setupView:c,state:i}}function Cu(e,t){const n=new Tu(e,t),r=[],i=[];function o(){r.length=0,i.length=0}function s(e){r.push(e)}function a(e){i.push(e)}function l(e){n.setup(r,e)}function c(e){n.setupView(r,e)}const u={lightsArray:r,shadowsArray:i,lights:n};return{init:o,state:u,setupLights:l,setupLightsView:c,pushLight:s,pushShadow:a}}function Au(e,t){let n=new WeakMap;function r(r,i=0){const o=n.get(r);let s;return void 0===o?(s=new Cu(e,t),n.set(r,[s])):i>=o.length?(s=new Cu(e,t),o.push(s)):s=o[i],s}function i(){n=new WeakMap}return{get:r,dispose:i}}class ku extends li{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=wt,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Ou extends li{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Ru="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",Pu="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function Lu(e,t,n){let r=new bo;const i=new bn,o=new bn,s=new jn,a=new ku({depthPacking:xt}),l=new Ou,u={},g=n.maxTextureSize,v={[h]:f,[f]:h,[p]:p},y=new io({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new bn},radius:{value:4}},vertexShader:Ru,fragmentShader:Pu}),b=y.clone();b.defines.HORIZONTAL_PASS=1;const _=new ki;_.setAttribute("position",new yi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const w=new qi(_,y),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=c;let S=this.type;function E(n,r){const o=t.update(w);y.defines.VSM_SAMPLES!==n.blurSamples&&(y.defines.VSM_SAMPLES=n.blurSamples,b.defines.VSM_SAMPLES=n.blurSamples,y.needsUpdate=!0,b.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Hn(i.x,i.y)),y.uniforms.shadow_pass.value=n.map.texture,y.uniforms.resolution.value=n.mapSize,y.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,o,y,w,null),b.uniforms.shadow_pass.value=n.mapPass.texture,b.uniforms.resolution.value=n.mapSize,b.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,o,b,w,null)}function M(t,n,r,i){let o=null;const s=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==s)o=s;else if(o=!0===r.isPointLight?l:a,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const e=o.uuid,t=n.uuid;let r=u[e];void 0===r&&(r={},u[e]=r);let i=r[t];void 0===i&&(i=o.clone(),r[t]=i),o=i}if(o.visible=n.visible,o.wireframe=n.wireframe,o.side=i===d?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:v[n.side],o.alphaMap=n.alphaMap,o.alphaTest=n.alphaTest,o.map=n.map,o.clipShadows=n.clipShadows,o.clippingPlanes=n.clippingPlanes,o.clipIntersection=n.clipIntersection,o.displacementMap=n.displacementMap,o.displacementScale=n.displacementScale,o.displacementBias=n.displacementBias,o.wireframeLinewidth=n.wireframeLinewidth,o.linewidth=n.linewidth,!0===r.isPointLight&&!0===o.isMeshDistanceMaterial){const t=e.properties.get(o);t.light=r}return o}function T(n,i,o,s,a){if(!1===n.visible)return;const l=n.layers.test(i.layers);if(l&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&a===d)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const r=t.update(n),i=n.material;if(Array.isArray(i)){const t=r.groups;for(let l=0,c=t.length;l<c;l++){const c=t[l],u=i[c.materialIndex];if(u&&u.visible){const t=M(n,u,s,a);e.renderBufferDirect(o,null,r,t,n,c)}}}else if(i.visible){const t=M(n,i,s,a);e.renderBufferDirect(o,null,r,t,n,null)}}const c=n.children;for(let e=0,t=c.length;e<t;e++)T(c[e],i,o,s,a)}this.render=function(t,n,a){if(!1===x.enabled)return;if(!1===x.autoUpdate&&!1===x.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),u=e.getActiveMipmapLevel(),h=e.state;h.setBlending(m),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);const f=S!==d&&this.type===d,p=S===d&&this.type!==d;for(let m=0,v=t.length;m<v;m++){const l=t[m],c=l.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;i.copy(c.mapSize);const u=c.getFrameExtents();if(i.multiply(u),o.copy(c.mapSize),(i.x>g||i.y>g)&&(i.x>g&&(o.x=Math.floor(g/u.x),i.x=o.x*u.x,c.mapSize.x=o.x),i.y>g&&(o.y=Math.floor(g/u.y),i.y=o.y*u.y,c.mapSize.y=o.y)),null===c.map||!0===f||!0===p){const e=this.type!==d?{minFilter:ce,magFilter:ce}:{};null!==c.map&&c.map.dispose(),c.map=new Hn(i.x,i.y,e),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}e.setRenderTarget(c.map),e.clear();const v=c.getViewportCount();for(let e=0;e<v;e++){const t=c.getViewport(e);s.set(o.x*t.x,o.y*t.y,o.x*t.z,o.y*t.w),h.viewport(s),c.updateMatrices(l,e),r=c.getFrustum(),T(n,a,c.camera,l,this.type)}!0!==c.isPointLightShadow&&this.type===d&&E(c,a),c.needsUpdate=!1}S=this.type,x.needsUpdate=!1,e.setRenderTarget(l,c,u)}}function Du(e,t,n){const r=n.isWebGL2;function i(){let t=!1;const n=new jn;let r=null;const i=new jn(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,s,a){!0===a&&(t*=s,r*=s,o*=s),n.set(t,r,o,s),!1===i.equals(n)&&(e.clearColor(t,r,o,s),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}}function o(){let t=!1,n=null,r=null,i=null;return{setTest:function(t){t?Ee(e.DEPTH_TEST):Me(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){switch(t){case U:e.depthFunc(e.NEVER);break;case F:e.depthFunc(e.ALWAYS);break;case B:e.depthFunc(e.LESS);break;case V:e.depthFunc(e.LEQUAL);break;case z:e.depthFunc(e.EQUAL);break;case j:e.depthFunc(e.GEQUAL);break;case H:e.depthFunc(e.GREATER);break;case W:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}}function c(){let t=!1,n=null,r=null,i=null,o=null,s=null,a=null,l=null,c=null;return{setTest:function(n){t||(n?Ee(e.STENCIL_TEST):Me(e.STENCIL_TEST))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,s){r===t&&i===n&&o===s||(e.stencilFunc(t,n,s),r=t,i=n,o=s)},setOp:function(t,n,r){s===t&&a===n&&l===r||(e.stencilOp(t,n,r),s=t,a=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,s=null,a=null,l=null,c=null}}}const u=new i,d=new o,h=new c,G=new WeakMap,$=new WeakMap;let q={},Y={},X=new WeakMap,Z=[],K=null,J=!1,Q=null,ee=null,te=null,ne=null,re=null,ie=null,oe=null,se=!1,ae=null,le=null,ce=null,ue=null,de=null;const he=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let fe=!1,pe=0;const me=e.getParameter(e.VERSION);-1!==me.indexOf("WebGL")?(pe=parseFloat(/^WebGL (\d)/.exec(me)[1]),fe=pe>=1):-1!==me.indexOf("OpenGL ES")&&(pe=parseFloat(/^OpenGL ES (\d)/.exec(me)[1]),fe=pe>=2);let ge=null,ve={};const ye=e.getParameter(e.SCISSOR_BOX),be=e.getParameter(e.VIEWPORT),_e=(new jn).fromArray(ye),we=(new jn).fromArray(be);function xe(t,n,i,o){const s=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let l=0;l<i;l++)!r||t!==e.TEXTURE_3D&&t!==e.TEXTURE_2D_ARRAY?e.texImage2D(n+l,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,s):e.texImage3D(n,0,e.RGBA,1,1,o,0,e.RGBA,e.UNSIGNED_BYTE,s);return a}const Se={};function Ee(t){!0!==q[t]&&(e.enable(t),q[t]=!0)}function Me(t){!1!==q[t]&&(e.disable(t),q[t]=!1)}function Te(t,n){return Y[t]!==n&&(e.bindFramebuffer(t,n),Y[t]=n,r&&(t===e.DRAW_FRAMEBUFFER&&(Y[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(Y[e.DRAW_FRAMEBUFFER]=n)),!0)}function Ce(r,i){let o=Z,s=!1;if(r)if(o=X.get(i),void 0===o&&(o=[],X.set(i,o)),r.isWebGLMultipleRenderTargets){const t=r.texture;if(o.length!==t.length||o[0]!==e.COLOR_ATTACHMENT0){for(let n=0,r=t.length;n<r;n++)o[n]=e.COLOR_ATTACHMENT0+n;o.length=t.length,s=!0}}else o[0]!==e.COLOR_ATTACHMENT0&&(o[0]=e.COLOR_ATTACHMENT0,s=!0);else o[0]!==e.BACK&&(o[0]=e.BACK,s=!0);s&&(n.isWebGL2?e.drawBuffers(o):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(o))}function Ae(t){return K!==t&&(e.useProgram(t),K=t,!0)}Se[e.TEXTURE_2D]=xe(e.TEXTURE_2D,e.TEXTURE_2D,1),Se[e.TEXTURE_CUBE_MAP]=xe(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(Se[e.TEXTURE_2D_ARRAY]=xe(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),Se[e.TEXTURE_3D]=xe(e.TEXTURE_3D,e.TEXTURE_3D,1,1)),u.setClear(0,0,0,1),d.setClear(1),h.setClear(0),Ee(e.DEPTH_TEST),d.setFunc(V),Le(!1),De(a),Ee(e.CULL_FACE),Re(m);const ke={[w]:e.FUNC_ADD,[x]:e.FUNC_SUBTRACT,[S]:e.FUNC_REVERSE_SUBTRACT};if(r)ke[E]=e.MIN,ke[M]=e.MAX;else{const e=t.get("EXT_blend_minmax");null!==e&&(ke[E]=e.MIN_EXT,ke[M]=e.MAX_EXT)}const Oe={[T]:e.ZERO,[C]:e.ONE,[A]:e.SRC_COLOR,[O]:e.SRC_ALPHA,[N]:e.SRC_ALPHA_SATURATE,[D]:e.DST_COLOR,[P]:e.DST_ALPHA,[k]:e.ONE_MINUS_SRC_COLOR,[R]:e.ONE_MINUS_SRC_ALPHA,[I]:e.ONE_MINUS_DST_COLOR,[L]:e.ONE_MINUS_DST_ALPHA};function Re(t,n,r,i,o,s,a,l){if(t!==m){if(!1===J&&(Ee(e.BLEND),J=!0),t===_)o=o||n,s=s||r,a=a||i,n===ee&&o===re||(e.blendEquationSeparate(ke[n],ke[o]),ee=n,re=o),r===te&&i===ne&&s===ie&&a===oe||(e.blendFuncSeparate(Oe[r],Oe[i],Oe[s],Oe[a]),te=r,ne=i,ie=s,oe=a),Q=t,se=!1;else if(t!==Q||l!==se){if(ee===w&&re===w||(e.blendEquation(e.FUNC_ADD),ee=w,re=w),l)switch(t){case g:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case v:e.blendFunc(e.ONE,e.ONE);break;case y:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case b:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t);break}else switch(t){case g:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case v:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case y:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case b:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t);break}te=null,ne=null,ie=null,oe=null,Q=t,se=l}}else!0===J&&(Me(e.BLEND),J=!1)}function Pe(t,n){t.side===p?Me(e.CULL_FACE):Ee(e.CULL_FACE);let r=t.side===f;n&&(r=!r),Le(r),t.blending===g&&!1===t.transparent?Re(m):Re(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),d.setFunc(t.depthFunc),d.setTest(t.depthTest),d.setMask(t.depthWrite),u.setMask(t.colorWrite);const i=t.stencilWrite;h.setTest(i),i&&(h.setMask(t.stencilWriteMask),h.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),h.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),Ne(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?Ee(e.SAMPLE_ALPHA_TO_COVERAGE):Me(e.SAMPLE_ALPHA_TO_COVERAGE)}function Le(t){ae!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),ae=t)}function De(t){t!==s?(Ee(e.CULL_FACE),t!==le&&(t===a?e.cullFace(e.BACK):t===l?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):Me(e.CULL_FACE),le=t}function Ie(t){t!==ce&&(fe&&e.lineWidth(t),ce=t)}function Ne(t,n,r){t?(Ee(e.POLYGON_OFFSET_FILL),ue===n&&de===r||(e.polygonOffset(n,r),ue=n,de=r)):Me(e.POLYGON_OFFSET_FILL)}function Ue(t){t?Ee(e.SCISSOR_TEST):Me(e.SCISSOR_TEST)}function Fe(t){void 0===t&&(t=e.TEXTURE0+he-1),ge!==t&&(e.activeTexture(t),ge=t)}function Be(t,n,r){void 0===r&&(r=null===ge?e.TEXTURE0+he-1:ge);let i=ve[r];void 0===i&&(i={type:void 0,texture:void 0},ve[r]=i),i.type===t&&i.texture===n||(ge!==r&&(e.activeTexture(r),ge=r),e.bindTexture(t,n||Se[t]),i.type=t,i.texture=n)}function Ve(){const t=ve[ge];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)}function ze(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function je(){try{e.compressedTexImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function He(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function We(){try{e.texSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Ge(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function $e(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function qe(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Ye(){try{e.texStorage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Xe(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Ze(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Ke(t){!1===_e.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),_e.copy(t))}function Je(t){!1===we.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),we.copy(t))}function Qe(t,n){let r=$.get(n);void 0===r&&(r=new WeakMap,$.set(n,r));let i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))}function et(t,n){const r=$.get(n),i=r.get(t);G.get(n)!==i&&(e.uniformBlockBinding(n,i,t.__bindingPointIndex),G.set(n,i))}function tt(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),!0===r&&(e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),q={},ge=null,ve={},Y={},X=new WeakMap,Z=[],K=null,J=!1,Q=null,ee=null,te=null,ne=null,re=null,ie=null,oe=null,se=!1,ae=null,le=null,ce=null,ue=null,de=null,_e.set(0,0,e.canvas.width,e.canvas.height),we.set(0,0,e.canvas.width,e.canvas.height),u.reset(),d.reset(),h.reset()}return{buffers:{color:u,depth:d,stencil:h},enable:Ee,disable:Me,bindFramebuffer:Te,drawBuffers:Ce,useProgram:Ae,setBlending:Re,setMaterial:Pe,setFlipSided:Le,setCullFace:De,setLineWidth:Ie,setPolygonOffset:Ne,setScissorTest:Ue,activeTexture:Fe,bindTexture:Be,unbindTexture:Ve,compressedTexImage2D:ze,compressedTexImage3D:je,texImage2D:Xe,texImage3D:Ze,updateUBOMapping:Qe,uniformBlockBinding:et,texStorage2D:qe,texStorage3D:Ye,texSubImage2D:He,texSubImage3D:We,compressedTexSubImage2D:Ge,compressedTexSubImage3D:$e,scissor:Ke,viewport:Je,reset:tt}}function Iu(e,t,n,r,i,o,s){const a=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,d=i.maxSamples,h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,f="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let m;const g=new WeakMap;let v=!1;try{v="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(oe){}function y(e,t){return v?new OffscreenCanvas(e,t):Sn("canvas")}function b(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?pn:Math.floor,o=r(i*e.width),s=r(i*e.height);void 0===m&&(m=y(o,s));const a=n?y(o,s):m;a.width=o,a.height=s;const l=a.getContext("2d");return l.drawImage(e,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+s+")."),a}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function _(e){return hn(e.width)&&hn(e.height)}function w(e){return!a&&(e.wrapS!==ae||e.wrapT!==ae||e.minFilter!==ce&&e.minFilter!==he)}function x(e,t){return e.generateMipmaps&&t&&e.minFilter!==ce&&e.minFilter!==he}function S(t){e.generateMipmap(t)}function E(n,r,i,o,s=!1){if(!1===a)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=r;return r===e.RED&&(i===e.FLOAT&&(l=e.R32F),i===e.HALF_FLOAT&&(l=e.R16F),i===e.UNSIGNED_BYTE&&(l=e.R8)),r===e.RG&&(i===e.FLOAT&&(l=e.RG32F),i===e.HALF_FLOAT&&(l=e.RG16F),i===e.UNSIGNED_BYTE&&(l=e.RG8)),r===e.RGBA&&(i===e.FLOAT&&(l=e.RGBA32F),i===e.HALF_FLOAT&&(l=e.RGBA16F),i===e.UNSIGNED_BYTE&&(l=o===Tt&&!1===s?e.SRGB8_ALPHA8:e.RGBA8),i===e.UNSIGNED_SHORT_4_4_4_4&&(l=e.RGBA4),i===e.UNSIGNED_SHORT_5_5_5_1&&(l=e.RGB5_A1)),l!==e.R16F&&l!==e.R32F&&l!==e.RG16F&&l!==e.RG32F&&l!==e.RGBA16F&&l!==e.RGBA32F||t.get("EXT_color_buffer_float"),l}function M(e,t,n){return!0===x(e,n)||e.isFramebufferTexture&&e.minFilter!==ce&&e.minFilter!==he?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function T(t){return t===ce||t===ue||t===de?e.NEAREST:e.LINEAR}function C(e){const t=e.target;t.removeEventListener("dispose",C),k(t),t.isVideoTexture&&p.delete(t)}function A(e){const t=e.target;t.removeEventListener("dispose",A),R(t)}function k(e){const t=r.get(e);if(void 0===t.__webglInit)return;const n=e.source,i=g.get(n);if(i){const r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&O(e),0===Object.keys(i).length&&g.delete(n)}r.remove(e)}function O(t){const n=r.get(t);e.deleteTexture(n.__webglTexture);const i=t.source,o=g.get(i);delete o[n.__cacheKey],s.memory.textures--}function R(t){const n=t.texture,i=r.get(t),o=r.get(n);if(void 0!==o.__webglTexture&&(e.deleteTexture(o.__webglTexture),s.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let r=0;r<6;r++)e.deleteFramebuffer(i.__webglFramebuffer[r]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[r]);else{if(e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let t=0;t<i.__webglColorRenderbuffer.length;t++)i.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(i.__webglColorRenderbuffer[t]);i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let a=0,l=n.length;a<l;a++){const t=r.get(n[a]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),s.memory.textures--),r.remove(n[a])}r.remove(n),r.remove(t)}let P=0;function L(){P=0}function D(){const e=P;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),P+=1,e}function I(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}function N(t,i){const o=r.get(t);if(t.isVideoTexture&&re(t),!1===t.isRenderTargetTexture&&t.version>0&&o.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void G(o,t,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(e.TEXTURE_2D,o.__webglTexture,e.TEXTURE0+i)}function U(t,i){const o=r.get(t);t.version>0&&o.__version!==t.version?G(o,t,i):n.bindTexture(e.TEXTURE_2D_ARRAY,o.__webglTexture,e.TEXTURE0+i)}function F(t,i){const o=r.get(t);t.version>0&&o.__version!==t.version?G(o,t,i):n.bindTexture(e.TEXTURE_3D,o.__webglTexture,e.TEXTURE0+i)}function B(t,i){const o=r.get(t);t.version>0&&o.__version!==t.version?$(o,t,i):n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture,e.TEXTURE0+i)}const V={[se]:e.REPEAT,[ae]:e.CLAMP_TO_EDGE,[le]:e.MIRRORED_REPEAT},z={[ce]:e.NEAREST,[ue]:e.NEAREST_MIPMAP_NEAREST,[de]:e.NEAREST_MIPMAP_LINEAR,[he]:e.LINEAR,[fe]:e.LINEAR_MIPMAP_NEAREST,[pe]:e.LINEAR_MIPMAP_LINEAR},j={[Rt]:e.NEVER,[Ft]:e.ALWAYS,[Pt]:e.LESS,[Dt]:e.LEQUAL,[Lt]:e.EQUAL,[Ut]:e.GEQUAL,[It]:e.GREATER,[Nt]:e.NOTEQUAL};function H(n,o,s){if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,V[o.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,V[o.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,V[o.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,z[o.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,z[o.minFilter])):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),o.wrapS===ae&&o.wrapT===ae||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,e.TEXTURE_MAG_FILTER,T(o.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,T(o.minFilter)),o.minFilter!==ce&&o.minFilter!==he&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),o.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,j[o.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){const s=t.get("EXT_texture_filter_anisotropic");if(o.magFilter===ce)return;if(o.minFilter!==de&&o.minFilter!==pe)return;if(o.type===we&&!1===t.has("OES_texture_float_linear"))return;if(!1===a&&o.type===xe&&!1===t.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function W(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",C));const i=n.source;let o=g.get(i);void 0===o&&(o={},g.set(i,o));const a=I(n);if(a!==t.__cacheKey){void 0===o[a]&&(o[a]={texture:e.createTexture(),usedTimes:0},s.memory.textures++,r=!0),o[a].usedTimes++;const i=o[t.__cacheKey];void 0!==i&&(o[t.__cacheKey].usedTimes--,0===i.usedTimes&&O(n)),t.__cacheKey=a,t.__webglTexture=o[a].texture}return r}function G(t,i,s){let l=e.TEXTURE_2D;(i.isDataArrayTexture||i.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),i.isData3DTexture&&(l=e.TEXTURE_3D);const c=W(t,i),d=i.source;n.bindTexture(l,t.__webglTexture,e.TEXTURE0+s);const h=r.get(d);if(d.version!==h.__version||!0===c){n.activeTexture(e.TEXTURE0+s),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,i.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE);const t=w(i)&&!1===_(i.image);let r=b(i.image,t,!1,u);r=ie(i,r);const f=_(r)||a,p=o.convert(i.format,i.colorSpace);let m,g=o.convert(i.type),v=E(i.internalFormat,p,g,i.colorSpace);H(l,i,f);const y=i.mipmaps,T=a&&!0!==i.isVideoTexture,C=void 0===h.__version||!0===c,A=M(i,r,f);if(i.isDepthTexture)v=e.DEPTH_COMPONENT,a?v=i.type===we?e.DEPTH_COMPONENT32F:i.type===_e?e.DEPTH_COMPONENT24:i.type===Me?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT16:i.type===we&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===Oe&&v===e.DEPTH_COMPONENT&&i.type!==ye&&i.type!==_e&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=_e,g=o.convert(i.type)),i.format===Re&&v===e.DEPTH_COMPONENT&&(v=e.DEPTH_STENCIL,i.type!==Me&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=Me,g=o.convert(i.type))),C&&(T?n.texStorage2D(e.TEXTURE_2D,1,v,r.width,r.height):n.texImage2D(e.TEXTURE_2D,0,v,r.width,r.height,0,p,g,null));else if(i.isDataTexture)if(y.length>0&&f){T&&C&&n.texStorage2D(e.TEXTURE_2D,A,v,y[0].width,y[0].height);for(let t=0,r=y.length;t<r;t++)m=y[t],T?n.texSubImage2D(e.TEXTURE_2D,t,0,0,m.width,m.height,p,g,m.data):n.texImage2D(e.TEXTURE_2D,t,v,m.width,m.height,0,p,g,m.data);i.generateMipmaps=!1}else T?(C&&n.texStorage2D(e.TEXTURE_2D,A,v,r.width,r.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,r.width,r.height,p,g,r.data)):n.texImage2D(e.TEXTURE_2D,0,v,r.width,r.height,0,p,g,r.data);else if(i.isCompressedTexture)if(i.isCompressedArrayTexture){T&&C&&n.texStorage3D(e.TEXTURE_2D_ARRAY,A,v,y[0].width,y[0].height,r.depth);for(let t=0,o=y.length;t<o;t++)m=y[t],i.format!==Ce?null!==p?T?n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,m.width,m.height,r.depth,p,m.data,0,0):n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,v,m.width,m.height,r.depth,0,m.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):T?n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,m.width,m.height,r.depth,p,g,m.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,v,m.width,m.height,r.depth,0,p,g,m.data)}else{T&&C&&n.texStorage2D(e.TEXTURE_2D,A,v,y[0].width,y[0].height);for(let t=0,r=y.length;t<r;t++)m=y[t],i.format!==Ce?null!==p?T?n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,m.width,m.height,p,m.data):n.compressedTexImage2D(e.TEXTURE_2D,t,v,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):T?n.texSubImage2D(e.TEXTURE_2D,t,0,0,m.width,m.height,p,g,m.data):n.texImage2D(e.TEXTURE_2D,t,v,m.width,m.height,0,p,g,m.data)}else if(i.isDataArrayTexture)T?(C&&n.texStorage3D(e.TEXTURE_2D_ARRAY,A,v,r.width,r.height,r.depth),n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,r.width,r.height,r.depth,p,g,r.data)):n.texImage3D(e.TEXTURE_2D_ARRAY,0,v,r.width,r.height,r.depth,0,p,g,r.data);else if(i.isData3DTexture)T?(C&&n.texStorage3D(e.TEXTURE_3D,A,v,r.width,r.height,r.depth),n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,r.width,r.height,r.depth,p,g,r.data)):n.texImage3D(e.TEXTURE_3D,0,v,r.width,r.height,r.depth,0,p,g,r.data);else if(i.isFramebufferTexture){if(C)if(T)n.texStorage2D(e.TEXTURE_2D,A,v,r.width,r.height);else{let t=r.width,i=r.height;for(let r=0;r<A;r++)n.texImage2D(e.TEXTURE_2D,r,v,t,i,0,p,g,null),t>>=1,i>>=1}}else if(y.length>0&&f){T&&C&&n.texStorage2D(e.TEXTURE_2D,A,v,y[0].width,y[0].height);for(let t=0,r=y.length;t<r;t++)m=y[t],T?n.texSubImage2D(e.TEXTURE_2D,t,0,0,p,g,m):n.texImage2D(e.TEXTURE_2D,t,v,p,g,m);i.generateMipmaps=!1}else T?(C&&n.texStorage2D(e.TEXTURE_2D,A,v,r.width,r.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,p,g,r)):n.texImage2D(e.TEXTURE_2D,0,v,p,g,r);x(i,f)&&S(l),h.__version=d.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}function $(t,i,s){if(6!==i.image.length)return;const l=W(t,i),u=i.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+s);const d=r.get(u);if(u.version!==d.__version||!0===l){n.activeTexture(e.TEXTURE0+s),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,i.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE);const t=i.isCompressedTexture||i.image[0].isCompressedTexture,r=i.image[0]&&i.image[0].isDataTexture,h=[];for(let e=0;e<6;e++)h[e]=t||r?r?i.image[e].image:i.image[e]:b(i.image[e],!1,!0,c),h[e]=ie(i,h[e]);const f=h[0],p=_(f)||a,m=o.convert(i.format,i.colorSpace),g=o.convert(i.type),v=E(i.internalFormat,m,g,i.colorSpace),y=a&&!0!==i.isVideoTexture,w=void 0===d.__version||!0===l;let T,C=M(i,f,p);if(H(e.TEXTURE_CUBE_MAP,i,p),t){y&&w&&n.texStorage2D(e.TEXTURE_CUBE_MAP,C,v,f.width,f.height);for(let t=0;t<6;t++){T=h[t].mipmaps;for(let r=0;r<T.length;r++){const o=T[r];i.format!==Ce?null!==m?y?n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,o.width,o.height,m,o.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,v,o.width,o.height,0,o.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):y?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,o.width,o.height,m,g,o.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,v,o.width,o.height,0,m,g,o.data)}}}else{T=i.mipmaps,y&&w&&(T.length>0&&C++,n.texStorage2D(e.TEXTURE_CUBE_MAP,C,v,h[0].width,h[0].height));for(let t=0;t<6;t++)if(r){y?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,h[t].width,h[t].height,m,g,h[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,v,h[t].width,h[t].height,0,m,g,h[t].data);for(let r=0;r<T.length;r++){const i=T[r],o=i.image[t].image;y?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,o.width,o.height,m,g,o.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,v,o.width,o.height,0,m,g,o.data)}}else{y?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,m,g,h[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,v,m,g,h[t]);for(let r=0;r<T.length;r++){const i=T[r];y?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,m,g,i.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,v,m,g,i.image[t])}}}x(i,p)&&S(e.TEXTURE_CUBE_MAP),d.__version=u.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}function q(t,i,s,a,l){const c=o.convert(s.format,s.colorSpace),u=o.convert(s.type),d=E(s.internalFormat,c,u,s.colorSpace),f=r.get(i);f.__hasExternalTextures||(l===e.TEXTURE_3D||l===e.TEXTURE_2D_ARRAY?n.texImage3D(l,0,d,i.width,i.height,i.depth,0,c,u,null):n.texImage2D(l,0,d,i.width,i.height,0,c,u,null)),n.bindFramebuffer(e.FRAMEBUFFER,t),ne(i)?h.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,a,l,r.get(s).__webglTexture,0,te(i)):(l===e.TEXTURE_2D||l>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&l<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,a,l,r.get(s).__webglTexture,0),n.bindFramebuffer(e.FRAMEBUFFER,null)}function Y(t,n,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer){let i=e.DEPTH_COMPONENT16;if(r||ne(n)){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===we?i=e.DEPTH_COMPONENT32F:t.type===_e&&(i=e.DEPTH_COMPONENT24));const r=te(n);ne(n)?h.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,r,i,n.width,n.height):e.renderbufferStorageMultisample(e.RENDERBUFFER,r,i,n.width,n.height)}else e.renderbufferStorage(e.RENDERBUFFER,i,n.width,n.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else if(n.depthBuffer&&n.stencilBuffer){const i=te(n);r&&!1===ne(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,i,e.DEPTH24_STENCIL8,n.width,n.height):ne(n)?h.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,i,e.DEPTH24_STENCIL8,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let i=0;i<t.length;i++){const s=t[i],a=o.convert(s.format,s.colorSpace),l=o.convert(s.type),c=E(s.internalFormat,a,l,s.colorSpace),u=te(n);r&&!1===ne(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,u,c,n.width,n.height):ne(n)?h.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,u,c,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,c,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function X(t,i){const o=i&&i.isWebGLCubeRenderTarget;if(o)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),N(i.depthTexture,0);const s=r.get(i.depthTexture).__webglTexture,a=te(i);if(i.depthTexture.format===Oe)ne(i)?h.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0,a):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0);else{if(i.depthTexture.format!==Re)throw new Error("Unknown depthTexture format");ne(i)?h.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0,a):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0)}}function Z(t){const i=r.get(t),o=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");X(i.__webglFramebuffer,t)}else if(o){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=e.createRenderbuffer(),Y(i.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),Y(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(e.FRAMEBUFFER,null)}function K(t,n,i){const o=r.get(t);void 0!==n&&q(o.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),void 0!==i&&Z(t)}function J(t){const l=t.texture,c=r.get(t),u=r.get(l);t.addEventListener("dispose",A),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=l.version,s.memory.textures++);const d=!0===t.isWebGLCubeRenderTarget,h=!0===t.isWebGLMultipleRenderTargets,f=_(t)||a;if(d){c.__webglFramebuffer=[];for(let t=0;t<6;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else{if(c.__webglFramebuffer=e.createFramebuffer(),h)if(i.drawBuffers){const n=t.texture;for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&t.samples>0&&!1===ne(t)){const r=h?l:[l];c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer);for(let n=0;n<r.length;n++){const i=r[n];c.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,c.__webglColorRenderbuffer[n]);const s=o.convert(i.format,i.colorSpace),a=o.convert(i.type),l=E(i.internalFormat,s,a,i.colorSpace,!0===t.isXRRenderTarget),u=te(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,u,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,c.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),Y(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(d){n.bindTexture(e.TEXTURE_CUBE_MAP,u.__webglTexture),H(e.TEXTURE_CUBE_MAP,l,f);for(let n=0;n<6;n++)q(c.__webglFramebuffer[n],t,l,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n);x(l,f)&&S(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(h){const i=t.texture;for(let o=0,s=i.length;o<s;o++){const s=i[o],a=r.get(s);n.bindTexture(e.TEXTURE_2D,a.__webglTexture),H(e.TEXTURE_2D,s,f),q(c.__webglFramebuffer,t,s,e.COLOR_ATTACHMENT0+o,e.TEXTURE_2D),x(s,f)&&S(e.TEXTURE_2D)}n.unbindTexture()}else{let r=e.TEXTURE_2D;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(a?r=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(r,u.__webglTexture),H(r,l,f),q(c.__webglFramebuffer,t,l,e.COLOR_ATTACHMENT0,r),x(l,f)&&S(r),n.unbindTexture()}t.depthBuffer&&Z(t)}function Q(t){const i=_(t)||a,o=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let s=0,a=o.length;s<a;s++){const a=o[s];if(x(a,i)){const i=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,o=r.get(a).__webglTexture;n.bindTexture(i,o),S(i),n.unbindTexture()}}}function ee(t){if(a&&t.samples>0&&!1===ne(t)){const i=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],o=t.width,s=t.height;let a=e.COLOR_BUFFER_BIT;const l=[],c=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,u=r.get(t),d=!0===t.isWebGLMultipleRenderTargets;if(d)for(let t=0;t<i.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let n=0;n<i.length;n++){l.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&l.push(c);const h=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;if(!1===h&&(t.depthBuffer&&(a|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&(a|=e.STENCIL_BUFFER_BIT)),d&&e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,u.__webglColorRenderbuffer[n]),!0===h&&(e.invalidateFramebuffer(e.READ_FRAMEBUFFER,[c]),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[c])),d){const t=r.get(i[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,o,s,0,0,o,s,a,e.NEAREST),f&&e.invalidateFramebuffer(e.READ_FRAMEBUFFER,l)}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),d)for(let t=0;t<i.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,u.__webglColorRenderbuffer[t]);const o=r.get(i[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,o,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}}function te(e){return Math.min(d,e.samples)}function ne(e){const n=r.get(e);return a&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function re(e){const t=s.render.frame;p.get(e)!==t&&(p.set(e,t),e.update())}function ie(e,n){const r=e.colorSpace,i=e.format,o=e.type;return!0===e.isCompressedTexture||e.format===zt||r!==Ct&&r!==Mt&&(r===Tt?!1===a?!0===t.has("EXT_sRGB")&&i===Ce?(e.format=zt,e.minFilter=he,e.generateMipmaps=!1):n=Nn.sRGBToLinear(n):i===Ce&&o===me||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",r)),n}this.allocateTextureUnit=D,this.resetTextureUnits=L,this.setTexture2D=N,this.setTexture2DArray=U,this.setTexture3D=F,this.setTextureCube=B,this.rebindTextures=K,this.setupRenderTarget=J,this.updateRenderTargetMipmap=Q,this.updateMultisampleRenderTarget=ee,this.setupDepthRenderbuffer=Z,this.setupFrameBufferTexture=q,this.useMultisampledRTT=ne}function Nu(e,t,n){const r=n.isWebGL2;function i(n,i=Mt){let o;if(n===me)return e.UNSIGNED_BYTE;if(n===Se)return e.UNSIGNED_SHORT_4_4_4_4;if(n===Ee)return e.UNSIGNED_SHORT_5_5_5_1;if(n===ge)return e.BYTE;if(n===ve)return e.SHORT;if(n===ye)return e.UNSIGNED_SHORT;if(n===be)return e.INT;if(n===_e)return e.UNSIGNED_INT;if(n===we)return e.FLOAT;if(n===xe)return r?e.HALF_FLOAT:(o=t.get("OES_texture_half_float"),null!==o?o.HALF_FLOAT_OES:null);if(n===Te)return e.ALPHA;if(n===Ce)return e.RGBA;if(n===Ae)return e.LUMINANCE;if(n===ke)return e.LUMINANCE_ALPHA;if(n===Oe)return e.DEPTH_COMPONENT;if(n===Re)return e.DEPTH_STENCIL;if(n===zt)return o=t.get("EXT_sRGB"),null!==o?o.SRGB_ALPHA_EXT:null;if(n===Pe)return e.RED;if(n===Le)return e.RED_INTEGER;if(n===De)return e.RG;if(n===Ie)return e.RG_INTEGER;if(n===Ne)return e.RGBA_INTEGER;if(n===Ue||n===Fe||n===Be||n===Ve)if(i===Tt){if(o=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===o)return null;if(n===Ue)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Fe)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Be)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Ve)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(o=t.get("WEBGL_compressed_texture_s3tc"),null===o)return null;if(n===Ue)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Fe)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Be)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Ve)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===ze||n===je||n===He||n===We){if(o=t.get("WEBGL_compressed_texture_pvrtc"),null===o)return null;if(n===ze)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===je)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===He)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===We)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Ge)return o=t.get("WEBGL_compressed_texture_etc1"),null!==o?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===$e||n===qe){if(o=t.get("WEBGL_compressed_texture_etc"),null===o)return null;if(n===$e)return i===Tt?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(n===qe)return i===Tt?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}if(n===Ye||n===Xe||n===Ze||n===Ke||n===Je||n===Qe||n===et||n===tt||n===nt||n===rt||n===it||n===ot||n===st||n===at){if(o=t.get("WEBGL_compressed_texture_astc"),null===o)return null;if(n===Ye)return i===Tt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Xe)return i===Tt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Ze)return i===Tt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Ke)return i===Tt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Je)return i===Tt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Qe)return i===Tt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===et)return i===Tt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===tt)return i===Tt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===nt)return i===Tt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===rt)return i===Tt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===it)return i===Tt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===ot)return i===Tt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===st)return i===Tt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===at)return i===Tt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===lt){if(o=t.get("EXT_texture_compression_bptc"),null===o)return null;if(n===lt)return i===Tt?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(n===ct||n===ut||n===dt||n===ht){if(o=t.get("EXT_texture_compression_rgtc"),null===o)return null;if(n===lt)return o.COMPRESSED_RED_RGTC1_EXT;if(n===ut)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===dt)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===ht)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===Me?r?e.UNSIGNED_INT_24_8:(o=t.get("WEBGL_depth_texture"),null!==o?o.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}return{convert:i}}class Uu extends so{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Fu extends Yr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Bu={type:"move"};class Vu{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Fu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Fu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new qn,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new qn),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Fu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new qn,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new qn),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,o=null;const s=this._targetRay,a=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){o=!0;for(const o of e.hand.values()){const e=t.getJointPose(o,n),r=this._getHandJoint(l,o);null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.matrixWorldNeedsUpdate=!0,r.jointRadius=e.radius),r.visible=null!==e}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],s=r.position.distanceTo(i.position),a=.02,c=.005;l.inputState.pinching&&s>a+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&s<=a-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==a&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1));null!==s&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(Bu)))}return null!==s&&(s.visible=null!==r),null!==a&&(a.visible=null!==i),null!==l&&(l.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new Fu;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class zu extends zn{constructor(e,t,n,r,i,o,s,a,l,c){if(c=void 0!==c?c:Oe,c!==Oe&&c!==Re)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Oe&&(n=_e),void 0===n&&c===Re&&(n=Me),super(null,r,i,o,s,a,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==s?s:ce,this.minFilter=void 0!==a?a:ce,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class ju extends Wt{constructor(e,t){super();const n=this;let r=null,i=1,o=null,s="local-floor",a=1,l=null,c=null,u=null,d=null,h=null,f=null;const p=t.getContextAttributes();let m=null,g=null;const v=[],y=[];let b=null;const _=new so;_.layers.enable(1),_.viewport=new jn;const w=new so;w.layers.enable(2),w.viewport=new jn;const x=[_,w],S=new Uu;S.layers.enable(1),S.layers.enable(2);let E=null,M=null;function T(e){const t=y.indexOf(e.inputSource);if(-1===t)return;const n=v[t];void 0!==n&&(n.update(e.inputSource,e.frame,l||o),n.dispatchEvent({type:e.type,data:e.inputSource}))}function C(){r.removeEventListener("select",T),r.removeEventListener("selectstart",T),r.removeEventListener("selectend",T),r.removeEventListener("squeeze",T),r.removeEventListener("squeezestart",T),r.removeEventListener("squeezeend",T),r.removeEventListener("end",C),r.removeEventListener("inputsourceschange",A);for(let e=0;e<v.length;e++){const t=y[e];null!==t&&(y[e]=null,v[e].disconnect(t))}E=null,M=null,e.setRenderTarget(m),h=null,d=null,u=null,r=null,g=null,N.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function A(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=y.indexOf(n);r>=0&&(y[r]=null,v[r].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let r=y.indexOf(n);if(-1===r){for(let e=0;e<v.length;e++){if(e>=y.length){y.push(n),r=e;break}if(null===y[e]){y[e]=n,r=e;break}}if(-1===r)break}const i=v[r];i&&i.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getCamera=function(){},this.setUserCamera=function(e){b=e},this.getController=function(e){let t=v[e];return void 0===t&&(t=new Vu,v[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=v[e];return void 0===t&&(t=new Vu,v[e]=t),t.getGripSpace()},this.getHand=function(e){let t=v[e];return void 0===t&&(t=new Vu,v[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){s=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==d?d:h},this.getBinding=function(){return u},this.getFrame=function(){return f},this.getSession=function(){return r},this.setSession=async function(c){if(r=c,null!==r){if(m=e.getRenderTarget(),r.addEventListener("select",T),r.addEventListener("selectstart",T),r.addEventListener("selectend",T),r.addEventListener("squeeze",T),r.addEventListener("squeezestart",T),r.addEventListener("squeezeend",T),r.addEventListener("end",C),r.addEventListener("inputsourceschange",A),!0!==p.xrCompatible&&await t.makeXRCompatible(),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2){const n={antialias:void 0!==r.renderState.layers||p.antialias,alpha:!0,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:i};h=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:h}),g=new Hn(h.framebufferWidth,h.framebufferHeight,{format:Ce,type:me,colorSpace:e.outputColorSpace,stencilBuffer:p.stencil})}else{let n=null,o=null,s=null;p.depth&&(s=p.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=p.stencil?Re:Oe,o=p.stencil?Me:_e);const a={colorFormat:t.RGBA8,depthFormat:s,scaleFactor:i};u=new XRWebGLBinding(r,t),d=u.createProjectionLayer(a),r.updateRenderState({layers:[d]}),g=new Hn(d.textureWidth,d.textureHeight,{format:Ce,type:me,depthTexture:new zu(d.textureWidth,d.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:p.stencil,colorSpace:e.outputColorSpace,samples:p.antialias?4:0});const l=e.properties.get(g);l.__ignoreDepthValues=d.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(a),l=null,o=await r.requestReferenceSpace(s),N.setContext(r),N.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode};const k=new qn,O=new qn;function R(e,t,n){k.setFromMatrixPosition(t.matrixWorld),O.setFromMatrixPosition(n.matrixWorld);const r=k.distanceTo(O),i=t.projectionMatrix.elements,o=n.projectionMatrix.elements,s=i[14]/(i[10]-1),a=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],u=(i[8]-1)/i[0],d=(o[8]+1)/o[0],h=s*u,f=s*d,p=r/(-u+d),m=p*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=s+p,v=a+p,y=h-m,b=f+(r-m),_=l*a/v*g,w=c*a/v*g;e.projectionMatrix.makePerspective(y,b,_,w,g,v),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}function P(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}function L(e,t){const n=b;null===t?n.matrix.copy(e.matrixWorld):(n.matrix.copy(t.matrixWorld),n.matrix.invert(),n.matrix.multiply(e.matrixWorld)),n.matrix.decompose(n.position,n.quaternion,n.scale),n.updateMatrixWorld(!0);const r=n.children;for(let i=0,o=r.length;i<o;i++)r[i].updateMatrixWorld(!0);n.projectionMatrix.copy(e.projectionMatrix),n.projectionMatrixInverse.copy(e.projectionMatrixInverse),n.isPerspectiveCamera&&(n.fov=2*Yt*Math.atan(1/n.projectionMatrix.elements[5]),n.zoom=1)}this.updateCameraXR=function(e){if(null===r)return e;b&&(e=b),S.near=w.near=_.near=e.near,S.far=w.far=_.far=e.far,E===S.near&&M===S.far||(r.updateRenderState({depthNear:S.near,depthFar:S.far}),E=S.near,M=S.far);const t=e.parent,n=S.cameras;P(S,t);for(let r=0;r<n.length;r++)P(n[r],t);return 2===n.length?R(S,_,w):S.projectionMatrix.copy(_.projectionMatrix),b&&L(S,t),S},this.getFoveation=function(){if(null!==d||null!==h)return a},this.setFoveation=function(e){a=e,null!==d&&(d.fixedFoveation=e),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=e)};let D=null;function I(t,r){if(c=r.getViewerPose(l||o),f=r,null!==c){const t=c.views;null!==h&&(e.setRenderTargetFramebuffer(g,h.framebuffer),e.setRenderTarget(g));let n=!1;t.length!==S.cameras.length&&(S.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){const i=t[r];let o=null;if(null!==h)o=h.getViewport(i);else{const t=u.getViewSubImage(d,i);o=t.viewport,0===r&&(e.setRenderTargetTextures(g,t.colorTexture,d.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(g))}let s=x[r];void 0===s&&(s=new so,s.layers.enable(r),s.viewport=new jn,x[r]=s),s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.quaternion,s.scale),s.projectionMatrix.fromArray(i.projectionMatrix),s.projectionMatrixInverse.copy(s.projectionMatrix).invert(),s.viewport.set(o.x,o.y,o.width,o.height),0===r&&(S.matrix.copy(s.matrix),S.matrix.decompose(S.position,S.quaternion,S.scale)),!0===n&&S.cameras.push(s)}}for(let e=0;e<v.length;e++){const t=y[e],n=v[e];null!==t&&void 0!==n&&n.update(t,r,l||o)}D&&D(t,r),r.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:r}),f=null}const N=new _o;N.setAnimationLoop(I),this.setAnimationLoop=function(e){D=e},this.dispose=function(){}}}function Hu(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function r(t,n){n.color.getRGB(t.fogColor.value,eo(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)}function i(e,t,n,r,i){t.isMeshBasicMaterial||t.isMeshLambertMaterial?o(e,t):t.isMeshToonMaterial?(o(e,t),d(e,t)):t.isMeshPhongMaterial?(o(e,t),u(e,t)):t.isMeshStandardMaterial?(o(e,t),h(e,t),t.isMeshPhysicalMaterial&&p(e,t,i)):t.isMeshMatcapMaterial?(o(e,t),m(e,t)):t.isMeshDepthMaterial?o(e,t):t.isMeshDistanceMaterial?(o(e,t),g(e,t)):t.isMeshNormalMaterial?o(e,t):t.isLineBasicMaterial?(s(e,t),t.isLineDashedMaterial&&a(e,t)):t.isPointsMaterial?l(e,t,n,r):t.isSpriteMaterial?c(e,t):t.isShadowMaterial?(e.color.value.copy(t.color),e.opacity.value=t.opacity):t.isShaderMaterial&&(t.uniformsNeedUpdate=!1)}function o(r,i){r.opacity.value=i.opacity,i.color&&r.diffuse.value.copy(i.color),i.emissive&&r.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(r.map.value=i.map,n(i.map,r.mapTransform)),i.alphaMap&&(r.alphaMap.value=i.alphaMap,n(i.alphaMap,r.alphaMapTransform)),i.bumpMap&&(r.bumpMap.value=i.bumpMap,n(i.bumpMap,r.bumpMapTransform),r.bumpScale.value=i.bumpScale,i.side===f&&(r.bumpScale.value*=-1)),i.normalMap&&(r.normalMap.value=i.normalMap,n(i.normalMap,r.normalMapTransform),r.normalScale.value.copy(i.normalScale),i.side===f&&r.normalScale.value.negate()),i.displacementMap&&(r.displacementMap.value=i.displacementMap,n(i.displacementMap,r.displacementMapTransform),r.displacementScale.value=i.displacementScale,r.displacementBias.value=i.displacementBias),i.emissiveMap&&(r.emissiveMap.value=i.emissiveMap,n(i.emissiveMap,r.emissiveMapTransform)),i.specularMap&&(r.specularMap.value=i.specularMap,n(i.specularMap,r.specularMapTransform)),i.alphaTest>0&&(r.alphaTest.value=i.alphaTest);const o=t.get(i).envMap;if(o&&(r.envMap.value=o,r.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,r.reflectivity.value=i.reflectivity,r.ior.value=i.ior,r.refractionRatio.value=i.refractionRatio),i.lightMap){r.lightMap.value=i.lightMap;const t=!0===e.useLegacyLights?Math.PI:1;r.lightMapIntensity.value=i.lightMapIntensity*t,n(i.lightMap,r.lightMapTransform)}i.aoMap&&(r.aoMap.value=i.aoMap,r.aoMapIntensity.value=i.aoMapIntensity,n(i.aoMap,r.aoMapTransform))}function s(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}function a(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function l(e,t,r,i){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*r,e.scale.value=.5*i,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform)),t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform)),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}function c(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform)),t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform)),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}function u(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}function d(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}function h(e,r){e.metalness.value=r.metalness,r.metalnessMap&&(e.metalnessMap.value=r.metalnessMap,n(r.metalnessMap,e.metalnessMapTransform)),e.roughness.value=r.roughness,r.roughnessMap&&(e.roughnessMap.value=r.roughnessMap,n(r.roughnessMap,e.roughnessMapTransform));const i=t.get(r).envMap;i&&(e.envMapIntensity.value=r.envMapIntensity)}function p(e,t,r){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform))),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===f&&e.clearcoatNormalScale.value.negate())),t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform))),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)),t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform))),e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform)),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}function m(e,t){t.matcap&&(e.matcap.value=t.matcap)}function g(e,n){const r=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(r.matrixWorld),e.nearDistance.value=r.shadow.camera.near,e.farDistance.value=r.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function Wu(e,t,n,r){let i={},o={},s=[];const a=n.isWebGL2?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(e,t){const n=t.program;r.uniformBlockBinding(e,n)}function c(e,n){let s=i[e.id];void 0===s&&(p(e),s=u(e),i[e.id]=s,e.addEventListener("dispose",g));const a=n.program;r.updateUBOMapping(e,a);const l=t.render.frame;o[e.id]!==l&&(h(e),o[e.id]=l)}function u(t){const n=d();t.__bindingPointIndex=n;const r=e.createBuffer(),i=t.__size,o=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,r),e.bufferData(e.UNIFORM_BUFFER,i,o),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,r),r}function d(){for(let e=0;e<a;e++)if(-1===s.indexOf(e))return s.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(t){const n=i[t.id],r=t.uniforms,o=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let i=0,s=r.length;i<s;i++){const t=r[i];if(!0===f(t,i,o)){const n=t.__offset,r=Array.isArray(t.value)?t.value:[t.value];let i=0;for(let o=0;o<r.length;o++){const s=r[o],a=m(s);"number"===typeof s?(t.__data[0]=s,e.bufferSubData(e.UNIFORM_BUFFER,n+i,t.__data)):s.isMatrix3?(t.__data[0]=s.elements[0],t.__data[1]=s.elements[1],t.__data[2]=s.elements[2],t.__data[3]=s.elements[0],t.__data[4]=s.elements[3],t.__data[5]=s.elements[4],t.__data[6]=s.elements[5],t.__data[7]=s.elements[0],t.__data[8]=s.elements[6],t.__data[9]=s.elements[7],t.__data[10]=s.elements[8],t.__data[11]=s.elements[0]):(s.toArray(t.__data,i),i+=a.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,n,t.__data)}}e.bindBuffer(e.UNIFORM_BUFFER,null)}function f(e,t,n){const r=e.value;if(void 0===n[t]){if("number"===typeof r)n[t]=r;else{const e=Array.isArray(r)?r:[r],i=[];for(let t=0;t<e.length;t++)i.push(e[t].clone());n[t]=i}return!0}if("number"===typeof r){if(n[t]!==r)return n[t]=r,!0}else{const e=Array.isArray(n[t])?n[t]:[n[t]],i=Array.isArray(r)?r:[r];for(let t=0;t<e.length;t++){const n=e[t];if(!1===n.equals(i[t]))return n.copy(i[t]),!0}}return!1}function p(e){const t=e.uniforms;let n=0;const r=16;let i=0;for(let o=0,s=t.length;o<s;o++){const e=t[o],s={boundary:0,storage:0},a=Array.isArray(e.value)?e.value:[e.value];for(let t=0,n=a.length;t<n;t++){const e=a[t],n=m(e);s.boundary+=n.boundary,s.storage+=n.storage}if(e.__data=new Float32Array(s.storage/Float32Array.BYTES_PER_ELEMENT),e.__offset=n,o>0){i=n%r;const t=r-i;0!==i&&t-s.boundary<0&&(n+=r-i,e.__offset=n)}n+=s.storage}return i=n%r,i>0&&(n+=r-i),e.__size=n,e.__cache={},this}function m(e){const t={boundary:0,storage:0};return"number"===typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function g(t){const n=t.target;n.removeEventListener("dispose",g);const r=s.indexOf(n.__bindingPointIndex);s.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete o[n.id]}function v(){for(const t in i)e.deleteBuffer(i[t]);s=[],i={},o={}}return{bind:l,update:c,dispose:v}}function Gu(){const e=Sn("canvas");return e.style.display="block",e}class $u{constructor(e={}){const{canvas:t=Gu(),context:n=null,depth:i=!0,stencil:o=!0,alpha:s=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1}=e;let m;this.isWebGLRenderer=!0,m=null!==n?n.getContextAttributes().alpha:s;const g=new Uint32Array(4),v=new Int32Array(4);let y=null,b=null;const _=[],w=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=Tt,this.useLegacyLights=!0,this.toneMapping=Y,this.toneMappingExposure=1;const x=this;let S=!1,E=0,M=0,T=null,C=-1,A=null;const k=new jn,O=new jn;let R=null;const P=new fi(0);let L=0,D=t.width,I=t.height,N=1,U=null,F=null;const B=new jn(0,0,D,I),V=new jn(0,0,D,I);let z=!1;const j=new bo;let H=!1,W=!1,G=null;const $=new Sr,q=new bn,X=new qn,Z={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function K(){return null===T?N:1}let J,Q,ee,te,ne,re,ie,oe,se,ae,le,ce,ue,de,he,fe,ge,ve,be,Te,Ae,ke,Oe,Re,Pe=n;function De(e,n){for(let r=0;r<e.length;r++){const i=e[r],o=t.getContext(i,n);if(null!==o)return o}return null}try{const e={alpha:!0,depth:i,stencil:o,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${r}`),t.addEventListener("webglcontextlost",Be,!1),t.addEventListener("webglcontextrestored",Ve,!1),t.addEventListener("webglcontextcreationerror",ze,!1),null===Pe){const t=["webgl2","webgl","experimental-webgl"];if(!0===x.isWebGL1Renderer&&t.shift(),Pe=De(t,e),null===Pe)throw De(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Pe instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===Pe.getShaderPrecisionFormat&&(Pe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(st){throw console.error("THREE.WebGLRenderer: "+st.message),st}function Ue(){J=new Cl(Pe),Q=new ol(Pe,J,e),J.init(Q),ke=new Nu(Pe,J,Q),ee=new Du(Pe,J,Q),te=new Ol(Pe),ne=new vu,re=new Iu(Pe,J,ee,ne,Q,ke,te),ie=new al(x),oe=new Tl(x),se=new wo(Pe,Q),Oe=new rl(Pe,J,se,Q),ae=new Al(Pe,se,te,Oe),le=new Dl(Pe,ae,se,te),be=new Ll(Pe,Q,re),fe=new sl(ne),ce=new gu(x,ie,oe,J,Q,Oe,fe),ue=new Hu(x,ne),de=new wu,he=new Au(J,Q),ve=new nl(x,ie,oe,ee,le,m,l),ge=new Lu(x,le,Q),Re=new Wu(Pe,te,Q,ee),Te=new il(Pe,J,te,Q),Ae=new kl(Pe,J,te,Q),te.programs=ce.programs,x.capabilities=Q,x.extensions=J,x.properties=ne,x.renderLists=de,x.shadowMap=ge,x.state=ee,x.info=te}Ue();const Fe=new ju(x,Pe);function Be(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),S=!0}function Ve(){console.log("THREE.WebGLRenderer: Context Restored."),S=!1;const e=te.autoReset,t=ge.enabled,n=ge.autoUpdate,r=ge.needsUpdate,i=ge.type;Ue(),te.autoReset=e,ge.enabled=t,ge.autoUpdate=n,ge.needsUpdate=r,ge.type=i}function ze(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function je(e){const t=e.target;t.removeEventListener("dispose",je),He(t)}function He(e){We(e),ne.remove(e)}function We(e){const t=ne.get(e).programs;void 0!==t&&(t.forEach((function(e){ce.releaseProgram(e)})),e.isShaderMaterial&&ce.releaseShaderCache(e))}this.xr=Fe,this.getContext=function(){return Pe},this.getContextAttributes=function(){return Pe.getContextAttributes()},this.forceContextLoss=function(){const e=J.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=J.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return N},this.setPixelRatio=function(e){void 0!==e&&(N=e,this.setSize(D,I,!1))},this.getSize=function(e){return e.set(D,I)},this.setSize=function(e,n,r=!0){Fe.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(D=e,I=n,t.width=Math.floor(e*N),t.height=Math.floor(n*N),!0===r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(D*N,I*N).floor()},this.setDrawingBufferSize=function(e,n,r){D=e,I=n,N=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(k)},this.getViewport=function(e){return e.copy(B)},this.setViewport=function(e,t,n,r){e.isVector4?B.set(e.x,e.y,e.z,e.w):B.set(e,t,n,r),ee.viewport(k.copy(B).multiplyScalar(N).floor())},this.getScissor=function(e){return e.copy(V)},this.setScissor=function(e,t,n,r){e.isVector4?V.set(e.x,e.y,e.z,e.w):V.set(e,t,n,r),ee.scissor(O.copy(V).multiplyScalar(N).floor())},this.getScissorTest=function(){return z},this.setScissorTest=function(e){ee.setScissorTest(z=e)},this.setOpaqueSort=function(e){U=e},this.setTransparentSort=function(e){F=e},this.getClearColor=function(e){return e.copy(ve.getClearColor())},this.setClearColor=function(){ve.setClearColor.apply(ve,arguments)},this.getClearAlpha=function(){return ve.getClearAlpha()},this.setClearAlpha=function(){ve.setClearAlpha.apply(ve,arguments)},this.clear=function(e=!0,t=!0,n=!0){let r=0;if(e){let e=!1;if(null!==T){const t=T.texture.format;e=t===Ne||t===Ie||t===Le}if(e){const e=T.texture.type,t=e===me||e===_e||e===ye||e===Me||e===Se||e===Ee,n=ve.getClearColor(),r=ve.getClearAlpha(),i=n.r,o=n.g,s=n.b,a=ne.get(T).__webglFramebuffer;t?(g[0]=i,g[1]=o,g[2]=s,g[3]=r,Pe.clearBufferuiv(Pe.COLOR,a,g)):(v[0]=i,v[1]=o,v[2]=s,v[3]=r,Pe.clearBufferiv(Pe.COLOR,a,v))}else r|=Pe.COLOR_BUFFER_BIT}t&&(r|=Pe.DEPTH_BUFFER_BIT),n&&(r|=Pe.STENCIL_BUFFER_BIT),Pe.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Be,!1),t.removeEventListener("webglcontextrestored",Ve,!1),t.removeEventListener("webglcontextcreationerror",ze,!1),de.dispose(),he.dispose(),ne.dispose(),ie.dispose(),oe.dispose(),le.dispose(),Oe.dispose(),Re.dispose(),ce.dispose(),Fe.dispose(),Fe.removeEventListener("sessionstart",qe),Fe.removeEventListener("sessionend",Ye),G&&(G.dispose(),G=null),Xe.stop()},this.renderBufferDirect=function(e,t,n,r,i,o){null===t&&(t=Z);const s=i.isMesh&&i.matrixWorld.determinant()<0,a=rt(e,t,n,r,i);ee.setMaterial(r,s);let l=n.index,c=1;!0===r.wireframe&&(l=ae.getWireframeAttribute(n),c=2);const u=n.drawRange,d=n.attributes.position;let h=u.start*c,f=(u.start+u.count)*c;null!==o&&(h=Math.max(h,o.start*c),f=Math.min(f,(o.start+o.count)*c)),null!==l?(h=Math.max(h,0),f=Math.min(f,l.count)):void 0!==d&&null!==d&&(h=Math.max(h,0),f=Math.min(f,d.count));const p=f-h;if(p<0||p===1/0)return;let m;Oe.setup(i,r,a,n,l);let g=Te;if(null!==l&&(m=se.get(l),g=Ae,g.setIndex(m)),i.isMesh)!0===r.wireframe?(ee.setLineWidth(r.wireframeLinewidth*K()),g.setMode(Pe.LINES)):g.setMode(Pe.TRIANGLES);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),ee.setLineWidth(e*K()),i.isLineSegments?g.setMode(Pe.LINES):i.isLineLoop?g.setMode(Pe.LINE_LOOP):g.setMode(Pe.LINE_STRIP)}else i.isPoints?g.setMode(Pe.POINTS):i.isSprite&&g.setMode(Pe.TRIANGLES);if(i.isInstancedMesh)g.renderInstances(h,p,i.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);g.renderInstances(h,p,t)}else g.render(h,p)},this.compile=function(e,t){function n(e,t,n){!0===e.transparent&&e.side===p&&!1===e.forceSinglePass?(e.side=f,e.needsUpdate=!0,tt(e,t,n),e.side=h,e.needsUpdate=!0,tt(e,t,n),e.side=p):tt(e,t,n)}b=he.get(e),b.init(),w.push(b),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(b.pushLight(e),e.castShadow&&b.pushShadow(e))})),b.setupLights(x.useLegacyLights),e.traverse((function(t){const r=t.material;if(r)if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];n(o,e,t)}else n(r,e,t)})),w.pop(),b=null};let Ge=null;function $e(e){Ge&&Ge(e)}function qe(){Xe.stop()}function Ye(){Xe.start()}const Xe=new _o;function Ze(e,t,n,r){if(!1===e.visible)return;const i=e.layers.test(t.layers);if(i)if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)b.pushLight(e),e.castShadow&&b.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||j.intersectsSprite(e)){r&&X.setFromMatrixPosition(e.matrixWorld).applyMatrix4($);const t=le.update(e),i=e.material;i.visible&&y.push(e,t,i,n,X.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||j.intersectsObject(e))){e.isSkinnedMesh&&e.skeleton.frame!==te.render.frame&&(e.skeleton.update(),e.skeleton.frame=te.render.frame);const t=le.update(e),i=e.material;if(r&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),X.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),X.copy(t.boundingSphere.center)),X.applyMatrix4(e.matrixWorld).applyMatrix4($)),Array.isArray(i)){const r=t.groups;for(let o=0,s=r.length;o<s;o++){const s=r[o],a=i[s.materialIndex];a&&a.visible&&y.push(e,t,a,n,X.z,s)}}else i.visible&&y.push(e,t,i,n,X.z,null)}const o=e.children;for(let s=0,a=o.length;s<a;s++)Ze(o[s],t,n,r)}function Ke(e,t,n,r){const i=e.opaque,o=e.transmissive,s=e.transparent;b.setupLightsView(n),!0===H&&fe.setGlobalState(x.clippingPlanes,n),o.length>0&&Je(i,o,t,n),r&&ee.viewport(k.copy(r)),i.length>0&&Qe(i,t,n),o.length>0&&Qe(o,t,n),s.length>0&&Qe(s,t,n),ee.buffers.depth.setTest(!0),ee.buffers.depth.setMask(!0),ee.buffers.color.setMask(!0),ee.setPolygonOffset(!1)}function Je(e,t,n,r){const i=Q.isWebGL2;null===G&&(G=new Hn(1,1,{generateMipmaps:!0,type:J.has("EXT_color_buffer_half_float")?xe:me,minFilter:pe,samples:i&&!0===a?4:0})),x.getDrawingBufferSize(q),i?G.setSize(q.x,q.y):G.setSize(pn(q.x),pn(q.y));const o=x.getRenderTarget();x.setRenderTarget(G),x.getClearColor(P),L=x.getClearAlpha(),L<1&&x.setClearColor(16777215,.5),x.clear();const s=x.toneMapping;x.toneMapping=Y,Qe(e,n,r),re.updateMultisampleRenderTarget(G),re.updateRenderTargetMipmap(G);let l=!1;for(let a=0,c=t.length;a<c;a++){const e=t[a],i=e.object,o=e.geometry,s=e.material,c=e.group;if(s.side===p&&i.layers.test(r.layers)){const e=s.side;s.side=f,s.needsUpdate=!0,et(i,n,r,o,s,c),s.side=e,s.needsUpdate=!0,l=!0}}!0===l&&(re.updateMultisampleRenderTarget(G),re.updateRenderTargetMipmap(G)),x.setRenderTarget(o),x.setClearColor(P,L),x.toneMapping=s}function Qe(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,o=e.length;i<o;i++){const o=e[i],s=o.object,a=o.geometry,l=null===r?o.material:r,c=o.group;s.layers.test(n.layers)&&et(s,t,n,a,l,c)}}function et(e,t,n,r,i,o){e.onBeforeRender(x,t,n,r,i,o),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(x,t,n,r,e,o),!0===i.transparent&&i.side===p&&!1===i.forceSinglePass?(i.side=f,i.needsUpdate=!0,x.renderBufferDirect(n,t,r,i,e,o),i.side=h,i.needsUpdate=!0,x.renderBufferDirect(n,t,r,i,e,o),i.side=p):x.renderBufferDirect(n,t,r,i,e,o),e.onAfterRender(x,t,n,r,i,o)}function tt(e,t,n){!0!==t.isScene&&(t=Z);const r=ne.get(e),i=b.state.lights,o=b.state.shadowsArray,s=i.state.version,a=ce.getParameters(e,i.state,o,t,n),l=ce.getProgramCacheKey(a);let c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?oe:ie).get(e.envMap||r.environment),void 0===c&&(e.addEventListener("dispose",je),c=new Map,r.programs=c);let u=c.get(l);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===s)return nt(e,a),u}else a.uniforms=ce.getUniforms(e),e.onBuild(n,a,x),e.onBeforeCompile(a,x),u=ce.acquireProgram(a,l),c.set(l,u),r.uniforms=a.uniforms;const d=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(d.clippingPlanes=fe.uniform),nt(e,a),r.needsLights=ot(e),r.lightsStateVersion=s,r.needsLights&&(d.ambientLightColor.value=i.state.ambient,d.lightProbe.value=i.state.probe,d.directionalLights.value=i.state.directional,d.directionalLightShadows.value=i.state.directionalShadow,d.spotLights.value=i.state.spot,d.spotLightShadows.value=i.state.spotShadow,d.rectAreaLights.value=i.state.rectArea,d.ltc_1.value=i.state.rectAreaLTC1,d.ltc_2.value=i.state.rectAreaLTC2,d.pointLights.value=i.state.point,d.pointLightShadows.value=i.state.pointShadow,d.hemisphereLights.value=i.state.hemi,d.directionalShadowMap.value=i.state.directionalShadowMap,d.directionalShadowMatrix.value=i.state.directionalShadowMatrix,d.spotShadowMap.value=i.state.spotShadowMap,d.spotLightMatrix.value=i.state.spotLightMatrix,d.spotLightMap.value=i.state.spotLightMap,d.pointShadowMap.value=i.state.pointShadowMap,d.pointShadowMatrix.value=i.state.pointShadowMatrix);const h=u.getUniforms(),f=Vc.seqWithValue(h.seq,d);return r.currentProgram=u,r.uniformsList=f,u}function nt(e,t){const n=ne.get(e);n.outputColorSpace=t.outputColorSpace,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}function rt(e,t,n,r,i){!0!==t.isScene&&(t=Z),re.resetTextureUnits();const o=t.fog,s=r.isMeshStandardMaterial?t.environment:null,a=null===T?x.outputColorSpace:!0===T.isXRRenderTarget?T.texture.colorSpace:Ct,l=(r.isMeshStandardMaterial?oe:ie).get(r.envMap||s),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!n.attributes.tangent&&(!!r.normalMap||r.anisotropy>0),d=!!n.morphAttributes.position,h=!!n.morphAttributes.normal,f=!!n.morphAttributes.color,p=r.toneMapped?x.toneMapping:Y,m=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,g=void 0!==m?m.length:0,v=ne.get(r),y=b.state.lights;if(!0===H&&(!0===W||e!==A)){const t=e===A&&r.id===C;fe.setState(r,e,t)}let _=!1;r.version===v.__version?v.needsLights&&v.lightsStateVersion!==y.state.version||v.outputColorSpace!==a||i.isInstancedMesh&&!1===v.instancing?_=!0:i.isInstancedMesh||!0!==v.instancing?i.isSkinnedMesh&&!1===v.skinning?_=!0:i.isSkinnedMesh||!0!==v.skinning?v.envMap!==l||!0===r.fog&&v.fog!==o?_=!0:void 0===v.numClippingPlanes||v.numClippingPlanes===fe.numPlanes&&v.numIntersection===fe.numIntersection?(v.vertexAlphas!==c||v.vertexTangents!==u||v.morphTargets!==d||v.morphNormals!==h||v.morphColors!==f||v.toneMapping!==p||!0===Q.isWebGL2&&v.morphTargetsCount!==g)&&(_=!0):_=!0:_=!0:_=!0:(_=!0,v.__version=r.version);let w=v.currentProgram;!0===_&&(w=tt(r,t,i));let S=!1,E=!1,M=!1;const k=w.getUniforms(),O=v.uniforms;if(ee.useProgram(w.program)&&(S=!0,E=!0,M=!0),r.id!==C&&(C=r.id,E=!0),S||A!==e){if(k.setValue(Pe,"projectionMatrix",e.projectionMatrix),Q.logarithmicDepthBuffer&&k.setValue(Pe,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),A!==e&&(A=e,E=!0,M=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){const t=k.map.cameraPosition;void 0!==t&&t.setValue(Pe,X.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&k.setValue(Pe,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&k.setValue(Pe,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){k.setOptional(Pe,i,"bindMatrix"),k.setOptional(Pe,i,"bindMatrixInverse");const e=i.skeleton;e&&(Q.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),k.setValue(Pe,"boneTexture",e.boneTexture,re),k.setValue(Pe,"boneTextureSize",e.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const R=n.morphAttributes;if((void 0!==R.position||void 0!==R.normal||void 0!==R.color&&!0===Q.isWebGL2)&&be.update(i,n,w),(E||v.receiveShadow!==i.receiveShadow)&&(v.receiveShadow=i.receiveShadow,k.setValue(Pe,"receiveShadow",i.receiveShadow)),r.isMeshGouraudMaterial&&null!==r.envMap&&(O.envMap.value=l,O.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),E&&(k.setValue(Pe,"toneMappingExposure",x.toneMappingExposure),v.needsLights&&it(O,M),o&&!0===r.fog&&ue.refreshFogUniforms(O,o),ue.refreshMaterialUniforms(O,r,N,I,G),Vc.upload(Pe,v.uniformsList,O,re)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(Vc.upload(Pe,v.uniformsList,O,re),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&k.setValue(Pe,"center",i.center),k.setValue(Pe,"modelViewMatrix",i.modelViewMatrix),k.setValue(Pe,"normalMatrix",i.normalMatrix),k.setValue(Pe,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const e=r.uniformsGroups;for(let t=0,n=e.length;t<n;t++)if(Q.isWebGL2){const n=e[t];Re.update(n,w),Re.bind(n,w)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return w}function it(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function ot(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}Xe.setAnimationLoop($e),"undefined"!==typeof self&&Xe.setContext(self),this.setAnimationLoop=function(e){Ge=e,Fe.setAnimationLoop(e),null===e?Xe.stop():Xe.start()},Fe.addEventListener("sessionstart",qe),Fe.addEventListener("sessionend",Ye),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===S)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===Fe.enabled&&!0===Fe.isPresenting&&(t=Fe.updateCameraXR(t)),!0===e.isScene&&e.onBeforeRender(x,e,t,T),b=he.get(e,w.length),b.init(),w.push(b),$.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),j.setFromProjectionMatrix($),W=this.localClippingEnabled,H=fe.init(this.clippingPlanes,W),y=de.get(e,_.length),y.init(),_.push(y),Ze(e,t,0,x.sortObjects),y.finish(),!0===x.sortObjects&&y.sort(U,F),!0===H&&fe.beginShadows();const n=b.state.shadowsArray;if(ge.render(n,e,t),!0===H&&fe.endShadows(),!0===this.info.autoReset&&this.info.reset(),this.info.render.frame++,ve.render(y,e),b.setupLights(x.useLegacyLights),t.isArrayCamera){const n=t.cameras;for(let t=0,r=n.length;t<r;t++){const r=n[t];Ke(y,e,r,r.viewport)}}else Ke(y,e,t);null!==T&&(re.updateMultisampleRenderTarget(T),re.updateRenderTargetMipmap(T)),!0===e.isScene&&e.onAfterRender(x,e,t),Oe.resetDefaultState(),C=-1,A=null,w.pop(),b=w.length>0?w[w.length-1]:null,_.pop(),y=_.length>0?_[_.length-1]:null},this.getActiveCubeFace=function(){return E},this.getActiveMipmapLevel=function(){return M},this.getRenderTarget=function(){return T},this.setRenderTargetTextures=function(e,t,n){ne.get(e.texture).__webglTexture=t,ne.get(e.depthTexture).__webglTexture=n;const r=ne.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===J.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){const n=ne.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,n=0){T=e,E=t,M=n;let r=!0,i=null,o=!1,s=!1;if(e){const n=ne.get(e);void 0!==n.__useDefaultFramebuffer?(ee.bindFramebuffer(Pe.FRAMEBUFFER,null),r=!1):void 0===n.__webglFramebuffer?re.setupRenderTarget(e):n.__hasExternalTextures&&re.rebindTextures(e,ne.get(e.texture).__webglTexture,ne.get(e.depthTexture).__webglTexture);const a=e.texture;(a.isData3DTexture||a.isDataArrayTexture||a.isCompressedArrayTexture)&&(s=!0);const l=ne.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=l[t],o=!0):i=Q.isWebGL2&&e.samples>0&&!1===re.useMultisampledRTT(e)?ne.get(e).__webglMultisampledFramebuffer:l,k.copy(e.viewport),O.copy(e.scissor),R=e.scissorTest}else k.copy(B).multiplyScalar(N).floor(),O.copy(V).multiplyScalar(N).floor(),R=z;const a=ee.bindFramebuffer(Pe.FRAMEBUFFER,i);if(a&&Q.drawBuffers&&r&&ee.drawBuffers(e,i),ee.viewport(k),ee.scissor(O),ee.setScissorTest(R),o){const r=ne.get(e.texture);Pe.framebufferTexture2D(Pe.FRAMEBUFFER,Pe.COLOR_ATTACHMENT0,Pe.TEXTURE_CUBE_MAP_POSITIVE_X+t,r.__webglTexture,n)}else if(s){const r=ne.get(e.texture),i=t||0;Pe.framebufferTextureLayer(Pe.FRAMEBUFFER,Pe.COLOR_ATTACHMENT0,r.__webglTexture,n||0,i)}C=-1},this.readRenderTargetPixels=function(e,t,n,r,i,o,s){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let a=ne.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(a=a[s]),a){ee.bindFramebuffer(Pe.FRAMEBUFFER,a);try{const s=e.texture,a=s.format,l=s.type;if(a!==Ce&&ke.convert(a)!==Pe.getParameter(Pe.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===xe&&(J.has("EXT_color_buffer_half_float")||Q.isWebGL2&&J.has("EXT_color_buffer_float"));if(l!==me&&ke.convert(l)!==Pe.getParameter(Pe.IMPLEMENTATION_COLOR_READ_TYPE)&&(l!==we||!(Q.isWebGL2||J.has("OES_texture_float")||J.has("WEBGL_color_buffer_float")))&&!c)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&Pe.readPixels(t,n,r,i,ke.convert(a),ke.convert(l),o)}finally{const e=null!==T?ne.get(T).__webglFramebuffer:null;ee.bindFramebuffer(Pe.FRAMEBUFFER,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){const r=Math.pow(2,-n),i=Math.floor(t.image.width*r),o=Math.floor(t.image.height*r);re.setTexture2D(t,0),Pe.copyTexSubImage2D(Pe.TEXTURE_2D,n,0,0,e.x,e.y,i,o),ee.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r=0){const i=t.image.width,o=t.image.height,s=ke.convert(n.format),a=ke.convert(n.type);re.setTexture2D(n,0),Pe.pixelStorei(Pe.UNPACK_FLIP_Y_WEBGL,n.flipY),Pe.pixelStorei(Pe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),Pe.pixelStorei(Pe.UNPACK_ALIGNMENT,n.unpackAlignment),t.isDataTexture?Pe.texSubImage2D(Pe.TEXTURE_2D,r,e.x,e.y,i,o,s,a,t.image.data):t.isCompressedTexture?Pe.compressedTexSubImage2D(Pe.TEXTURE_2D,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,s,t.mipmaps[0].data):Pe.texSubImage2D(Pe.TEXTURE_2D,r,e.x,e.y,s,a,t.image),0===r&&n.generateMipmaps&&Pe.generateMipmap(Pe.TEXTURE_2D),ee.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r,i=0){if(x.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const o=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,a=e.max.z-e.min.z+1,l=ke.convert(r.format),c=ke.convert(r.type);let u;if(r.isData3DTexture)re.setTexture3D(r,0),u=Pe.TEXTURE_3D;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");re.setTexture2DArray(r,0),u=Pe.TEXTURE_2D_ARRAY}Pe.pixelStorei(Pe.UNPACK_FLIP_Y_WEBGL,r.flipY),Pe.pixelStorei(Pe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),Pe.pixelStorei(Pe.UNPACK_ALIGNMENT,r.unpackAlignment);const d=Pe.getParameter(Pe.UNPACK_ROW_LENGTH),h=Pe.getParameter(Pe.UNPACK_IMAGE_HEIGHT),f=Pe.getParameter(Pe.UNPACK_SKIP_PIXELS),p=Pe.getParameter(Pe.UNPACK_SKIP_ROWS),m=Pe.getParameter(Pe.UNPACK_SKIP_IMAGES),g=n.isCompressedTexture?n.mipmaps[0]:n.image;Pe.pixelStorei(Pe.UNPACK_ROW_LENGTH,g.width),Pe.pixelStorei(Pe.UNPACK_IMAGE_HEIGHT,g.height),Pe.pixelStorei(Pe.UNPACK_SKIP_PIXELS,e.min.x),Pe.pixelStorei(Pe.UNPACK_SKIP_ROWS,e.min.y),Pe.pixelStorei(Pe.UNPACK_SKIP_IMAGES,e.min.z),n.isDataTexture||n.isData3DTexture?Pe.texSubImage3D(u,i,t.x,t.y,t.z,o,s,a,l,c,g.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Pe.compressedTexSubImage3D(u,i,t.x,t.y,t.z,o,s,a,l,g.data)):Pe.texSubImage3D(u,i,t.x,t.y,t.z,o,s,a,l,c,g),Pe.pixelStorei(Pe.UNPACK_ROW_LENGTH,d),Pe.pixelStorei(Pe.UNPACK_IMAGE_HEIGHT,h),Pe.pixelStorei(Pe.UNPACK_SKIP_PIXELS,f),Pe.pixelStorei(Pe.UNPACK_SKIP_ROWS,p),Pe.pixelStorei(Pe.UNPACK_SKIP_IMAGES,m),0===i&&r.generateMipmaps&&Pe.generateMipmap(u),ee.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?re.setTextureCube(e,0):e.isData3DTexture?re.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?re.setTexture2DArray(e,0):re.setTexture2D(e,0),ee.unbindTexture()},this.resetState=function(){E=0,M=0,T=null,ee.reset(),Oe.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return jt}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Tt?_t:bt}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===_t?Tt:Ct}}class qu extends $u{}qu.prototype.isWebGL1Renderer=!0;class Yu extends Yr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class Xu extends li{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new fi(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Zu=new qn,Ku=new qn,Ju=new Sr,Qu=new xr,ed=new pr;class td extends Yr{constructor(e=new ki,t=new Xu){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)Zu.fromBufferAttribute(t,e-1),Ku.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=Zu.distanceTo(Ku);e.setAttribute("lineDistance",new wi(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),ed.copy(n.boundingSphere),ed.applyMatrix4(r),ed.radius+=i,!1===e.ray.intersectsSphere(ed))return;Ju.copy(r).invert(),Qu.copy(e.ray).applyMatrix4(Ju);const s=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=s*s,l=new qn,c=new qn,u=new qn,d=new qn,h=this.isLineSegments?2:1,f=n.index,p=n.attributes,m=p.position;if(null!==f){const n=Math.max(0,o.start),r=Math.min(f.count,o.start+o.count);for(let i=n,o=r-1;i<o;i+=h){const n=f.getX(i),r=f.getX(i+1);l.fromBufferAttribute(m,n),c.fromBufferAttribute(m,r);const o=Qu.distanceSqToSegment(l,c,d,u);if(o>a)continue;d.applyMatrix4(this.matrixWorld);const s=e.ray.origin.distanceTo(d);s<e.near||s>e.far||t.push({distance:s,point:u.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}else{const n=Math.max(0,o.start),r=Math.min(m.count,o.start+o.count);for(let i=n,o=r-1;i<o;i+=h){l.fromBufferAttribute(m,i),c.fromBufferAttribute(m,i+1);const n=Qu.distanceSqToSegment(l,c,d,u);if(n>a)continue;d.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(d);r<e.near||r>e.far||t.push({distance:r,point:u.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry,t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}}class nd{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const i=n.length;let o;o=t||e*n[i-1];let s,a=0,l=i-1;while(a<=l)if(r=Math.floor(a+(l-a)/2),s=n[r]-o,s<0)a=r+1;else{if(!(s>0)){l=r;break}l=r-1}if(r=l,n[r]===o)return r/(i-1);const c=n[r],u=n[r+1],d=u-c,h=(o-c)/d,f=(r+h)/(i-1);return f}getTangent(e,t){const n=1e-4;let r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);const o=this.getPoint(r),s=this.getPoint(i),a=t||(o.isVector2?new bn:new qn);return a.copy(s).sub(o).normalize(),a}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new qn,r=[],i=[],o=[],s=new qn,a=new Sr;for(let h=0;h<=e;h++){const t=h/e;r[h]=this.getTangentAt(t,new qn)}i[0]=new qn,o[0]=new qn;let l=Number.MAX_VALUE;const c=Math.abs(r[0].x),u=Math.abs(r[0].y),d=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),d<=l&&n.set(0,0,1),s.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],s),o[0].crossVectors(r[0],i[0]);for(let h=1;h<=e;h++){if(i[h]=i[h-1].clone(),o[h]=o[h-1].clone(),s.crossVectors(r[h-1],r[h]),s.length()>Number.EPSILON){s.normalize();const e=Math.acos(Zt(r[h-1].dot(r[h]),-1,1));i[h].applyMatrix4(a.makeRotationAxis(s,e))}o[h].crossVectors(r[h],i[h])}if(!0===t){let t=Math.acos(Zt(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(s.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(a.makeRotationAxis(r[n],t*n)),o[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class rd extends nd{constructor(e=0,t=0,n=1,r=1,i=0,o=2*Math.PI,s=!1,a=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=s,this.aRotation=a}getPoint(e,t){const n=t||new bn,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const o=Math.abs(i)<Number.EPSILON;while(i<0)i+=r;while(i>r)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);const s=this.aStartAngle+e*i;let a=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=a-this.aX,r=l-this.aY;a=n*e-r*t+this.aX,l=n*t+r*e+this.aY}return n.set(a,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class id extends rd{constructor(e,t,n,r,i,o){super(e,t,n,n,r,i,o),this.isArcCurve=!0,this.type="ArcCurve"}}function od(){let e=0,t=0,n=0,r=0;function i(i,o,s,a){e=i,t=s,n=-3*i+3*o-2*s-a,r=2*i-2*o+s+a}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,s,a){let l=(t-e)/o-(n-e)/(o+s)+(n-t)/s,c=(n-t)/s-(r-t)/(s+a)+(r-n)/a;l*=s,c*=s,i(t,n,l,c)},calc:function(i){const o=i*i,s=o*i;return e+t*i+n*o+r*s}}}const sd=new qn,ad=new od,ld=new od,cd=new od;class ud extends nd{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new qn){const n=t,r=this.points,i=r.length,o=(i-(this.closed?0:1))*e;let s,a,l=Math.floor(o),c=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/i)+1)*i:0===c&&l===i-1&&(l=i-2,c=1),this.closed||l>0?s=r[(l-1)%i]:(sd.subVectors(r[0],r[1]).add(r[0]),s=sd);const u=r[l%i],d=r[(l+1)%i];if(this.closed||l+2<i?a=r[(l+2)%i]:(sd.subVectors(r[i-1],r[i-2]).add(r[i-1]),a=sd),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(s.distanceToSquared(u),e),n=Math.pow(u.distanceToSquared(d),e),r=Math.pow(d.distanceToSquared(a),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),ad.initNonuniformCatmullRom(s.x,u.x,d.x,a.x,t,n,r),ld.initNonuniformCatmullRom(s.y,u.y,d.y,a.y,t,n,r),cd.initNonuniformCatmullRom(s.z,u.z,d.z,a.z,t,n,r)}else"catmullrom"===this.curveType&&(ad.initCatmullRom(s.x,u.x,d.x,a.x,this.tension),ld.initCatmullRom(s.y,u.y,d.y,a.y,this.tension),cd.initCatmullRom(s.z,u.z,d.z,a.z,this.tension));return n.set(ad.calc(c),ld.calc(c),cd.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new qn).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function dd(e,t,n,r,i){const o=.5*(r-t),s=.5*(i-n),a=e*e,l=e*a;return(2*n-2*r+o+s)*l+(-3*n+3*r-2*o-s)*a+o*e+n}function hd(e,t){const n=1-e;return n*n*t}function fd(e,t){return 2*(1-e)*e*t}function pd(e,t){return e*e*t}function md(e,t,n,r){return hd(e,t)+fd(e,n)+pd(e,r)}function gd(e,t){const n=1-e;return n*n*n*t}function vd(e,t){const n=1-e;return 3*n*n*e*t}function yd(e,t){return 3*(1-e)*e*e*t}function bd(e,t){return e*e*e*t}function _d(e,t,n,r,i){return gd(e,t)+vd(e,n)+yd(e,r)+bd(e,i)}class wd extends nd{constructor(e=new bn,t=new bn,n=new bn,r=new bn){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new bn){const n=t,r=this.v0,i=this.v1,o=this.v2,s=this.v3;return n.set(_d(e,r.x,i.x,o.x,s.x),_d(e,r.y,i.y,o.y,s.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class xd extends nd{constructor(e=new qn,t=new qn,n=new qn,r=new qn){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new qn){const n=t,r=this.v0,i=this.v1,o=this.v2,s=this.v3;return n.set(_d(e,r.x,i.x,o.x,s.x),_d(e,r.y,i.y,o.y,s.y),_d(e,r.z,i.z,o.z,s.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Sd extends nd{constructor(e=new bn,t=new bn){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new bn){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new bn){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ed extends nd{constructor(e=new qn,t=new qn){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new qn){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new qn){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Md extends nd{constructor(e=new bn,t=new bn,n=new bn){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new bn){const n=t,r=this.v0,i=this.v1,o=this.v2;return n.set(md(e,r.x,i.x,o.x),md(e,r.y,i.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Td extends nd{constructor(e=new qn,t=new qn,n=new qn){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new qn){const n=t,r=this.v0,i=this.v1,o=this.v2;return n.set(md(e,r.x,i.x,o.x),md(e,r.y,i.y,o.y),md(e,r.z,i.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Cd extends nd{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new bn){const n=t,r=this.points,i=(r.length-1)*e,o=Math.floor(i),s=i-o,a=r[0===o?o:o-1],l=r[o],c=r[o>r.length-2?r.length-1:o+1],u=r[o>r.length-3?r.length-1:o+2];return n.set(dd(s,a.x,l.x,c.x,u.x),dd(s,a.y,l.y,c.y,u.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new bn).fromArray(n))}return this}}var Ad=Object.freeze({__proto__:null,ArcCurve:id,CatmullRomCurve3:ud,CubicBezierCurve:wd,CubicBezierCurve3:xd,EllipseCurve:rd,LineCurve:Sd,LineCurve3:Ed,QuadraticBezierCurve:Md,QuadraticBezierCurve3:Td,SplineCurve:Cd});class kd extends ki{constructor(e=1,t=1,n=1,r=32,i=1,o=!1,s=0,a=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:s,thetaLength:a};const l=this;r=Math.floor(r),i=Math.floor(i);const c=[],u=[],d=[],h=[];let f=0;const p=[],m=n/2;let g=0;function v(){const o=new qn,v=new qn;let y=0;const b=(t-e)/n;for(let l=0;l<=i;l++){const c=[],g=l/i,y=g*(t-e)+e;for(let e=0;e<=r;e++){const t=e/r,i=t*a+s,l=Math.sin(i),p=Math.cos(i);v.x=y*l,v.y=-g*n+m,v.z=y*p,u.push(v.x,v.y,v.z),o.set(l,b,p).normalize(),d.push(o.x,o.y,o.z),h.push(t,1-g),c.push(f++)}p.push(c)}for(let e=0;e<r;e++)for(let t=0;t<i;t++){const n=p[t][e],r=p[t+1][e],i=p[t+1][e+1],o=p[t][e+1];c.push(n,r,o),c.push(r,i,o),y+=6}l.addGroup(g,y,0),g+=y}function y(n){const i=f,o=new bn,p=new qn;let v=0;const y=!0===n?e:t,b=!0===n?1:-1;for(let e=1;e<=r;e++)u.push(0,m*b,0),d.push(0,b,0),h.push(.5,.5),f++;const _=f;for(let e=0;e<=r;e++){const t=e/r,n=t*a+s,i=Math.cos(n),l=Math.sin(n);p.x=y*l,p.y=m*b,p.z=y*i,u.push(p.x,p.y,p.z),d.push(0,b,0),o.x=.5*i+.5,o.y=.5*l*b+.5,h.push(o.x,o.y),f++}for(let e=0;e<r;e++){const t=i+e,r=_+e;!0===n?c.push(r,r+1,t):c.push(r+1,r,t),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}v(),!1===o&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(c),this.setAttribute("position",new wi(u,3)),this.setAttribute("normal",new wi(d,3)),this.setAttribute("uv",new wi(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kd(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Od extends kd{constructor(e=1,t=1,n=32,r=1,i=!1,o=0,s=2*Math.PI){super(0,e,t,n,r,i,o,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:s}}static fromJSON(e){return new Od(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Rd extends ki{constructor(e=1,t=32,n=16,r=0,i=2*Math.PI,o=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:s},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const a=Math.min(o+s,Math.PI);let l=0;const c=[],u=new qn,d=new qn,h=[],f=[],p=[],m=[];for(let g=0;g<=n;g++){const h=[],v=g/n;let y=0;0===g&&0===o?y=.5/t:g===n&&a===Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){const a=n/t;u.x=-e*Math.cos(r+a*i)*Math.sin(o+v*s),u.y=e*Math.cos(o+v*s),u.z=e*Math.sin(r+a*i)*Math.sin(o+v*s),f.push(u.x,u.y,u.z),d.copy(u).normalize(),p.push(d.x,d.y,d.z),m.push(a+y,1-v),h.push(l++)}c.push(h)}for(let g=0;g<n;g++)for(let e=0;e<t;e++){const t=c[g][e+1],r=c[g][e],i=c[g+1][e],s=c[g+1][e+1];(0!==g||o>0)&&h.push(t,r,s),(g!==n-1||a<Math.PI)&&h.push(r,i,s)}this.setIndex(h),this.setAttribute("position",new wi(f,3)),this.setAttribute("normal",new wi(p,3)),this.setAttribute("uv",new wi(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rd(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Pd extends ki{constructor(e=new Td(new qn(-1,-1,0),new qn(-1,1,0),new qn(1,1,0)),t=64,n=1,r=8,i=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i};const o=e.computeFrenetFrames(t,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const s=new qn,a=new qn,l=new bn;let c=new qn;const u=[],d=[],h=[],f=[];function p(){for(let e=0;e<t;e++)m(e);m(!1===i?t:0),v(),g()}function m(i){c=e.getPointAt(i/t,c);const l=o.normals[i],h=o.binormals[i];for(let e=0;e<=r;e++){const t=e/r*Math.PI*2,i=Math.sin(t),o=-Math.cos(t);a.x=o*l.x+i*h.x,a.y=o*l.y+i*h.y,a.z=o*l.z+i*h.z,a.normalize(),d.push(a.x,a.y,a.z),s.x=c.x+n*a.x,s.y=c.y+n*a.y,s.z=c.z+n*a.z,u.push(s.x,s.y,s.z)}}function g(){for(let e=1;e<=t;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),o=(r+1)*e+t,s=(r+1)*(e-1)+t;f.push(n,i,s),f.push(i,o,s)}}function v(){for(let e=0;e<=t;e++)for(let n=0;n<=r;n++)l.x=e/t,l.y=n/r,h.push(l.x,l.y)}p(),this.setIndex(f),this.setAttribute("position",new wi(u,3)),this.setAttribute("normal",new wi(d,3)),this.setAttribute("uv",new wi(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Pd((new Ad[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Ld extends li{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new fi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new fi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=St,this.normalScale=new bn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=G,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function Dd(e,t,n){return Nd(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)}function Id(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function Nd(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}class Ud{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let o;n:{r:if(!(e<r)){for(let o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(i=r,r=t[++n],e<r)break t}o=t.length;break n}if(e>=i)break e;{const s=t[1];e<s&&(n=2,i=s);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===o)break;if(r=i,i=t[--n-1],e>=i)break t}o=n,n=0}}while(n<o){const r=n+o>>>1;e<t[r]?o=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let o=0;o!==r;++o)t[o]=n[i+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Fd extends Ud{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:gt,endingEnd:gt}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,o=e+1,s=r[i],a=r[o];if(void 0===s)switch(this.getSettings_().endingStart){case vt:i=e,s=2*t-n;break;case yt:i=r.length-2,s=t+r[i]-r[i+1];break;default:i=e,s=n}if(void 0===a)switch(this.getSettings_().endingEnd){case vt:o=e,a=2*n-t;break;case yt:o=1,a=n+r[1]-r[0];break;default:o=e-1,a=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(a-n),this._offsetPrev=i*c,this._offsetNext=o*c}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s,l=a-s,c=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,h=this._weightNext,f=(n-t)/(r-t),p=f*f,m=p*f,g=-d*m+2*d*p-d*f,v=(1+d)*m+(-1.5-2*d)*p+(-.5+d)*f+1,y=(-1-h)*m+(1.5+h)*p+.5*f,b=h*m-h*p;for(let _=0;_!==s;++_)i[_]=g*o[c+_]+v*o[l+_]+y*o[a+_]+b*o[u+_];return i}}class Bd extends Ud{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s,l=a-s,c=(n-t)/(r-t),u=1-c;for(let d=0;d!==s;++d)i[d]=o[l+d]*u+o[a+d]*c;return i}}class Vd extends Ud{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class zd{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Id(t,this.TimeBufferType),this.values=Id(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Id(e.times,Array),values:Id(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Vd(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Bd(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Fd(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case ft:t=this.InterpolantFactoryMethodDiscrete;break;case pt:t=this.InterpolantFactoryMethodLinear;break;case mt:t=this.InterpolantFactoryMethodSmooth;break}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ft;case this.InterpolantFactoryMethodLinear:return pt;case this.InterpolantFactoryMethodSmooth:return mt}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,o=r-1;while(i!==r&&n[i]<e)++i;while(-1!==o&&n[o]>t)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const e=this.getValueSize();this.times=Dd(n,i,o),this.values=Dd(this.values,i*e,o*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let s=0;s!==i;s++){const t=n[s];if("number"===typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,t),e=!1;break}if(null!==o&&o>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,t,o),e=!1;break}o=t}if(void 0!==r&&Nd(r))for(let s=0,a=r.length;s!==a;++s){const t=r[s];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,t),e=!1;break}}return e}optimize(){const e=Dd(this.times),t=Dd(this.values),n=this.getValueSize(),r=this.getInterpolation()===mt,i=e.length-1;let o=1;for(let s=1;s<i;++s){let i=!1;const a=e[s],l=e[s+1];if(a!==l&&(1!==s||a!==e[0]))if(r)i=!0;else{const e=s*n,r=e-n,o=e+n;for(let s=0;s!==n;++s){const n=t[e+s];if(n!==t[r+s]||n!==t[o+s]){i=!0;break}}}if(i){if(s!==o){e[o]=e[s];const r=s*n,i=o*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++o}}if(i>0){e[o]=e[i];for(let e=i*n,r=o*n,s=0;s!==n;++s)t[r+s]=t[e+s];++o}return o!==e.length?(this.times=Dd(e,0,o),this.values=Dd(t,0,o*n)):(this.times=e,this.values=t),this}clone(){const e=Dd(this.times,0),t=Dd(this.values,0),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}zd.prototype.TimeBufferType=Float32Array,zd.prototype.ValueBufferType=Float32Array,zd.prototype.DefaultInterpolation=pt;class jd extends zd{}jd.prototype.ValueTypeName="bool",jd.prototype.ValueBufferType=Array,jd.prototype.DefaultInterpolation=ft,jd.prototype.InterpolantFactoryMethodLinear=void 0,jd.prototype.InterpolantFactoryMethodSmooth=void 0;class Hd extends zd{}Hd.prototype.ValueTypeName="color";class Wd extends zd{}Wd.prototype.ValueTypeName="number";class Gd extends Ud{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=(n-t)/(r-t);let l=e*s;for(let c=l+s;l!==c;l+=4)$n.slerpFlat(i,0,o,l-s,o,l,a);return i}}class $d extends zd{InterpolantFactoryMethodLinear(e){return new Gd(this.times,this.values,this.getValueSize(),e)}}$d.prototype.ValueTypeName="quaternion",$d.prototype.DefaultInterpolation=pt,$d.prototype.InterpolantFactoryMethodSmooth=void 0;class qd extends zd{}qd.prototype.ValueTypeName="string",qd.prototype.ValueBufferType=Array,qd.prototype.DefaultInterpolation=ft,qd.prototype.InterpolantFactoryMethodLinear=void 0,qd.prototype.InterpolantFactoryMethodSmooth=void 0;class Yd extends zd{}Yd.prototype.ValueTypeName="vector";const Xd={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class Zd{constructor(e,t,n){const r=this;let i,o=!1,s=0,a=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===o&&void 0!==r.onStart&&r.onStart(e,s,a),o=!0},this.itemEnd=function(e){s++,void 0!==r.onProgress&&r.onProgress(e,s,a),s===a&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}const Kd=new Zd;class Jd{constructor(e){this.manager=void 0!==e?e:Kd,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}class Qd extends Jd{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=Xd.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;const s=Sn("img");function a(){c(),Xd.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){c(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function c(){s.removeEventListener("load",a,!1),s.removeEventListener("error",l,!1)}return s.addEventListener("load",a,!1),s.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),i.manager.itemStart(e),s.src=e,s}}class eh extends Jd{constructor(e){super(e)}load(e,t,n,r){const i=new zn,o=new Qd(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}class th extends Yr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new fi(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}const nh=new Sr,rh=new qn,ih=new qn;class oh{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new bn(512,512),this.map=null,this.mapPass=null,this.matrix=new Sr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new bo,this._frameExtents=new bn(1,1),this._viewportCount=1,this._viewports=[new jn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;rh.setFromMatrixPosition(e.matrixWorld),t.position.copy(rh),ih.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(ih),t.updateMatrixWorld(),nh.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(nh),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(nh)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class sh extends oh{constructor(){super(new ll(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class ah extends th{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Yr.DEFAULT_UP),this.updateMatrix(),this.target=new Yr,this.shadow=new sh}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class lh extends th{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class ch{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=uh(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=uh();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function uh(){return("undefined"===typeof performance?Date:performance).now()}const dh="\\[\\]\\.:\\/",hh=new RegExp("["+dh+"]","g"),fh="[^"+dh+"]",ph="[^"+dh.replace("\\.","")+"]",mh=/((?:WC+[\/:])*)/.source.replace("WC",fh),gh=/(WCOD+)?/.source.replace("WCOD",ph),vh=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",fh),yh=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",fh),bh=new RegExp("^"+mh+gh+vh+yh+"$"),_h=["material","materials","bones","map"];class wh{constructor(e,t,n){const r=n||xh.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class xh{constructor(e,t,n){this.path=t,this.parsedPath=n||xh.parseTrackName(t),this.node=xh.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new xh.Composite(e,t,n):new xh(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(hh,"")}static parseTrackName(e){const t=bh.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==_h.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const o=n(i.children);if(o)return o}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=xh.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const o=e[r];if(void 0===o){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let s=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}a=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(a=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}xh.Composite=wh,xh.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},xh.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},xh.prototype.GetterByBindingType=[xh.prototype._getValue_direct,xh.prototype._getValue_array,xh.prototype._getValue_arrayElement,xh.prototype._getValue_toArray],xh.prototype.SetterByBindingTypeAndVersioning=[[xh.prototype._setValue_direct,xh.prototype._setValue_direct_setNeedsUpdate,xh.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[xh.prototype._setValue_array,xh.prototype._setValue_array_setNeedsUpdate,xh.prototype._setValue_array_setMatrixWorldNeedsUpdate],[xh.prototype._setValue_arrayElement,xh.prototype._setValue_arrayElement_setNeedsUpdate,xh.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[xh.prototype._setValue_fromArray,xh.prototype._setValue_fromArray_setNeedsUpdate,xh.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];new Float32Array(1);class Sh{constructor(e,t,n=0,r=1/0){this.ray=new xr(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new Dr,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return Mh(e,this,n,t),n.sort(Eh),n}intersectObjects(e,t=!0,n=[]){for(let r=0,i=e.length;r<i;r++)Mh(e[r],this,n,t);return n.sort(Eh),n}}function Eh(e,t){return e.distance-t.distance}function Mh(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r){const r=e.children;for(let e=0,i=r.length;e<i;e++)Mh(r[e],t,n,!0)}}class Th{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Zt(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:r}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=r);const Ch=new go,Ah=new Sh,kh=new bn,Oh=new qn,Rh=new qn,Ph=new qn,Lh=new Sr;class Dh extends Wt{constructor(e,t,n){super(),n.style.touchAction="none";let r=null,i=null;const o=[],s=this;function a(){n.addEventListener("pointermove",h),n.addEventListener("pointerdown",f),n.addEventListener("pointerup",p),n.addEventListener("pointerleave",p)}function l(){n.removeEventListener("pointermove",h),n.removeEventListener("pointerdown",f),n.removeEventListener("pointerup",p),n.removeEventListener("pointerleave",p),n.style.cursor=""}function c(){l()}function u(){return e}function d(){return Ah}function h(a){if(!1!==s.enabled){if(m(a),Ah.setFromCamera(kh,t),r)return Ah.ray.intersectPlane(Ch,Rh)&&r.position.copy(Rh.sub(Oh).applyMatrix4(Lh)),void s.dispatchEvent({type:"drag",object:r});if("mouse"===a.pointerType||"pen"===a.pointerType)if(o.length=0,Ah.setFromCamera(kh,t),Ah.intersectObjects(e,!0,o),o.length>0){const e=o[0].object;Ch.setFromNormalAndCoplanarPoint(t.getWorldDirection(Ch.normal),Ph.setFromMatrixPosition(e.matrixWorld)),i!==e&&null!==i&&(s.dispatchEvent({type:"hoveroff",object:i}),n.style.cursor="auto",i=null),i!==e&&(s.dispatchEvent({type:"hoveron",object:e}),n.style.cursor="pointer",i=e)}else null!==i&&(s.dispatchEvent({type:"hoveroff",object:i}),n.style.cursor="auto",i=null)}}function f(i){!1!==s.enabled&&(m(i),o.length=0,Ah.setFromCamera(kh,t),Ah.intersectObjects(e,!0,o),o.length>0&&(r=!0===s.transformGroup?e[0]:o[0].object,Ch.setFromNormalAndCoplanarPoint(t.getWorldDirection(Ch.normal),Ph.setFromMatrixPosition(r.matrixWorld)),Ah.ray.intersectPlane(Ch,Rh)&&(Lh.copy(r.parent.matrixWorld).invert(),Oh.copy(Rh).sub(Ph.setFromMatrixPosition(r.matrixWorld))),n.style.cursor="move",s.dispatchEvent({type:"dragstart",object:r})))}function p(){!1!==s.enabled&&(r&&(s.dispatchEvent({type:"dragend",object:r}),r=null),n.style.cursor=i?"pointer":"auto")}function m(e){const t=n.getBoundingClientRect();kh.x=(e.clientX-t.left)/t.width*2-1,kh.y=-(e.clientY-t.top)/t.height*2+1}a(),this.enabled=!0,this.transformGroup=!1,this.activate=a,this.deactivate=l,this.dispose=c,this.getObjects=u,this.getRaycaster=d}}var Ih={value:()=>{}};function Nh(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new Uh(r)}function Uh(e){this._=e}function Fh(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function Bh(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function Vh(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Ih,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}Uh.prototype=Nh.prototype={constructor:Uh,on:function(e,t){var n,r=this._,i=Fh(e+"",r),o=-1,s=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);while(++o<s)if(n=(e=i[o]).type)r[n]=Vh(r[n],e.name,t);else if(null==t)for(n in r)r[n]=Vh(r[n],e.name,null);return this}while(++o<s)if((n=(e=i[o]).type)&&(n=Bh(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Uh(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],o=0,n=r.length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};var zh,jh,Hh=Nh,Wh=0,Gh=0,$h=0,qh=1e3,Yh=0,Xh=0,Zh=0,Kh="object"===typeof performance&&performance.now?performance:Date,Jh="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Qh(){return Xh||(Jh(ef),Xh=Kh.now()+Zh)}function ef(){Xh=0}function tf(){this._call=this._time=this._next=null}function nf(e,t,n){var r=new tf;return r.restart(e,t,n),r}function rf(){Qh(),++Wh;var e,t=zh;while(t)(e=Xh-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Wh}function of(){Xh=(Yh=Kh.now())+Zh,Wh=Gh=0;try{rf()}finally{Wh=0,af(),Xh=0}}function sf(){var e=Kh.now(),t=e-Yh;t>qh&&(Zh-=t,Yh=e)}function af(){var e,t,n=zh,r=1/0;while(n)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:zh=t);jh=e,lf(r)}function lf(e){if(!Wh){Gh&&(Gh=clearTimeout(Gh));var t=e-Xh;t>24?(e<1/0&&(Gh=setTimeout(of,e-Kh.now()-Zh)),$h&&($h=clearInterval($h))):($h||(Yh=Kh.now(),$h=setInterval(sf,qh)),Wh=1,Jh(of))}}tf.prototype=nf.prototype={constructor:tf,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?Qh():+n)+(null==t?0:+t),this._next||jh===this||(jh?jh._next=this:zh=this,jh=this),this._call=e,this._time=n,lf()},stop:function(){this._call&&(this._call=null,this._time=1/0,lf())}};const cf=1664525,uf=1013904223,df=4294967296;function hf(){let e=1;return()=>(e=(cf*e+uf)%df)/df}var ff=3;function pf(e){return e.x}function mf(e){return e.y}function gf(e){return e.z}var vf=10,yf=Math.PI*(3-Math.sqrt(5)),bf=20*Math.PI/(9+Math.sqrt(221));function _f(e,t){t=t||2;var n,r=Math.min(ff,Math.max(1,Math.round(t))),i=1,o=.001,s=1-Math.pow(o,1/300),a=0,l=.6,c=new Map,u=nf(f),d=Hh("tick","end"),h=hf();function f(){p(),d.call("tick",n),i<o&&(u.stop(),d.call("end",n))}function p(t){var o,u,d=e.length;void 0===t&&(t=1);for(var h=0;h<t;++h)for(i+=(a-i)*s,c.forEach((function(e){e(i)})),o=0;o<d;++o)u=e[o],null==u.fx?u.x+=u.vx*=l:(u.x=u.fx,u.vx=0),r>1&&(null==u.fy?u.y+=u.vy*=l:(u.y=u.fy,u.vy=0)),r>2&&(null==u.fz?u.z+=u.vz*=l:(u.z=u.fz,u.vz=0));return n}function m(){for(var t,n=0,i=e.length;n<i;++n){if(t=e[n],t.index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),null!=t.fz&&(t.z=t.fz),isNaN(t.x)||r>1&&isNaN(t.y)||r>2&&isNaN(t.z)){var o=vf*(r>2?Math.cbrt(.5+n):r>1?Math.sqrt(.5+n):n),s=n*yf,a=n*bf;1===r?t.x=o:2===r?(t.x=o*Math.cos(s),t.y=o*Math.sin(s)):(t.x=o*Math.sin(s)*Math.cos(a),t.y=o*Math.cos(s),t.z=o*Math.sin(s)*Math.sin(a))}(isNaN(t.vx)||r>1&&isNaN(t.vy)||r>2&&isNaN(t.vz))&&(t.vx=0,r>1&&(t.vy=0),r>2&&(t.vz=0))}}function g(t){return t.initialize&&t.initialize(e,h,r),t}return null==e&&(e=[]),m(),n={tick:p,restart:function(){return u.restart(f),n},stop:function(){return u.stop(),n},numDimensions:function(e){return arguments.length?(r=Math.min(ff,Math.max(1,Math.round(e))),c.forEach(g),n):r},nodes:function(t){return arguments.length?(e=t,m(),c.forEach(g),n):e},alpha:function(e){return arguments.length?(i=+e,n):i},alphaMin:function(e){return arguments.length?(o=+e,n):o},alphaDecay:function(e){return arguments.length?(s=+e,n):+s},alphaTarget:function(e){return arguments.length?(a=+e,n):a},velocityDecay:function(e){return arguments.length?(l=1-e,n):1-l},randomSource:function(e){return arguments.length?(h=e,c.forEach(g),n):h},force:function(e,t){return arguments.length>1?(null==t?c.delete(e):c.set(e,g(t)),n):c.get(e)},find:function(){var t,n,i,o,s,a,l=Array.prototype.slice.call(arguments),c=l.shift()||0,u=(r>1?l.shift():null)||0,d=(r>2?l.shift():null)||0,h=l.shift()||1/0,f=0,p=e.length;for(h*=h,f=0;f<p;++f)s=e[f],t=c-s.x,n=u-(s.y||0),i=d-(s.z||0),o=t*t+n*n+i*i,o<h&&(a=s,h=o);return a},on:function(e,t){return arguments.length>1?(d.on(e,t),n):d.on(e)}}}function wf(e){return function(){return e}}function xf(e){return 1e-6*(e()-.5)}function Sf(e){return e.index}function Ef(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Mf(e){var t,n,r,i,o,s,a,l=Sf,c=h,u=wf(30),d=1;function h(e){return 1/Math.min(o[e.source.index],o[e.target.index])}function f(r){for(var o=0,l=e.length;o<d;++o)for(var c,u,h,f,p,m=0,g=0,v=0,y=0;m<l;++m)c=e[m],u=c.source,h=c.target,g=h.x+h.vx-u.x-u.vx||xf(a),i>1&&(v=h.y+h.vy-u.y-u.vy||xf(a)),i>2&&(y=h.z+h.vz-u.z-u.vz||xf(a)),f=Math.sqrt(g*g+v*v+y*y),f=(f-n[m])/f*r*t[m],g*=f,v*=f,y*=f,h.vx-=g*(p=s[m]),i>1&&(h.vy-=v*p),i>2&&(h.vz-=y*p),u.vx+=g*(p=1-p),i>1&&(u.vy+=v*p),i>2&&(u.vz+=y*p)}function p(){if(r){var i,a,c=r.length,u=e.length,d=new Map(r.map(((e,t)=>[l(e,t,r),e])));for(i=0,o=new Array(c);i<u;++i)a=e[i],a.index=i,"object"!==typeof a.source&&(a.source=Ef(d,a.source)),"object"!==typeof a.target&&(a.target=Ef(d,a.target)),o[a.source.index]=(o[a.source.index]||0)+1,o[a.target.index]=(o[a.target.index]||0)+1;for(i=0,s=new Array(u);i<u;++i)a=e[i],s[i]=o[a.source.index]/(o[a.source.index]+o[a.target.index]);t=new Array(u),m(),n=new Array(u),g()}}function m(){if(r)for(var n=0,i=e.length;n<i;++n)t[n]=+c(e[n],n,e)}function g(){if(r)for(var t=0,i=e.length;t<i;++t)n[t]=+u(e[t],t,e)}return null==e&&(e=[]),f.initialize=function(e,...t){r=e,a=t.find((e=>"function"===typeof e))||Math.random,i=t.find((e=>[1,2,3].includes(e)))||2,p()},f.links=function(t){return arguments.length?(e=t,p(),f):e},f.id=function(e){return arguments.length?(l=e,f):l},f.iterations=function(e){return arguments.length?(d=+e,f):d},f.strength=function(e){return arguments.length?(c="function"===typeof e?e:wf(+e),m(),f):c},f.distance=function(e){return arguments.length?(u="function"===typeof e?e:wf(+e),g(),f):u},f}function Tf(e){const t=+this._x.call(null,e);return Cf(this.cover(t),t,e)}function Cf(e,t,n){if(isNaN(t))return e;var r,i,o,s,a,l,c=e._root,u={data:n},d=e._x0,h=e._x1;if(!c)return e._root=u,e;while(c.length)if((s=t>=(i=(d+h)/2))?d=i:h=i,r=c,!(c=c[a=+s]))return r[a]=u,e;if(o=+e._x.call(null,c.data),t===o)return u.next=c,r?r[a]=u:e._root=u,e;do{r=r?r[a]=new Array(2):e._root=new Array(2),(s=t>=(i=(d+h)/2))?d=i:h=i}while((a=+s)===(l=+(o>=i)));return r[l]=c,r[a]=u,e}function Af(e){Array.isArray(e)||(e=Array.from(e));const t=e.length,n=new Float64Array(t);let r=1/0,i=-1/0;for(let o,s=0;s<t;++s)isNaN(o=+this._x.call(null,e[s]))||(n[s]=o,o<r&&(r=o),o>i&&(i=o));if(r>i)return this;this.cover(r).cover(i);for(let o=0;o<t;++o)Cf(this,n[o],e[o]);return this}function kf(e){if(isNaN(e=+e))return this;var t=this._x0,n=this._x1;if(isNaN(t))n=(t=Math.floor(e))+1;else{var r,i,o=n-t||1,s=this._root;while(t>e||e>=n)switch(i=+(e<t),r=new Array(2),r[i]=s,s=r,o*=2,i){case 0:n=t+o;break;case 1:t=n-o;break}this._root&&this._root.length&&(this._root=s)}return this._x0=t,this._x1=n,this}function Of(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e}function Rf(e){return arguments.length?this.cover(+e[0][0]).cover(+e[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function Pf(e,t,n){this.node=e,this.x0=t,this.x1=n}function Lf(e,t){var n,r,i,o,s,a=this._x0,l=this._x1,c=[],u=this._root;u&&c.push(new Pf(u,a,l)),null==t?t=1/0:(a=e-t,l=e+t);while(o=c.pop())if(!(!(u=o.node)||(r=o.x0)>l||(i=o.x1)<a))if(u.length){var d=(r+i)/2;c.push(new Pf(u[1],d,i),new Pf(u[0],r,d)),(s=+(e>=d))&&(o=c[c.length-1],c[c.length-1]=c[c.length-1-s],c[c.length-1-s]=o)}else{var h=Math.abs(e-+this._x.call(null,u.data));h<t&&(t=h,a=e-h,l=e+h,n=u.data)}return n}function Df(e){if(isNaN(o=+this._x.call(null,e)))return this;var t,n,r,i,o,s,a,l,c,u=this._root,d=this._x0,h=this._x1;if(!u)return this;if(u.length)while(1){if((a=o>=(s=(d+h)/2))?d=s:h=s,t=u,!(u=u[l=+a]))return this;if(!u.length)break;t[l+1&1]&&(n=t,c=l)}while(u.data!==e)if(r=u,!(u=u.next))return this;return(i=u.next)&&delete u.next,r?(i?r.next=i:delete r.next,this):t?(i?t[l]=i:delete t[l],(u=t[0]||t[1])&&u===(t[1]||t[0])&&!u.length&&(n?n[c]=u:this._root=u),this):(this._root=i,this)}function If(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Nf(){return this._root}function Uf(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e}function Ff(e){var t,n,r,i,o=[],s=this._root;s&&o.push(new Pf(s,this._x0,this._x1));while(t=o.pop())if(!e(s=t.node,r=t.x0,i=t.x1)&&s.length){var a=(r+i)/2;(n=s[1])&&o.push(new Pf(n,a,i)),(n=s[0])&&o.push(new Pf(n,r,a))}return this}function Bf(e){var t,n=[],r=[];this._root&&n.push(new Pf(this._root,this._x0,this._x1));while(t=n.pop()){var i=t.node;if(i.length){var o,s=t.x0,a=t.x1,l=(s+a)/2;(o=i[0])&&n.push(new Pf(o,s,l)),(o=i[1])&&n.push(new Pf(o,l,a))}r.push(t)}while(t=r.pop())e(t.node,t.x0,t.x1);return this}function Vf(e){return e[0]}function zf(e){return arguments.length?(this._x=e,this):this._x}function jf(e,t){var n=new Hf(null==t?Vf:t,NaN,NaN);return null==e?n:n.addAll(e)}function Hf(e,t,n){this._x=e,this._x0=t,this._x1=n,this._root=void 0}function Wf(e){var t={data:e.data},n=t;while(e=e.next)n=n.next={data:e.data};return t}var Gf=jf.prototype=Hf.prototype;function $f(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return qf(this.cover(t,n),t,n,e)}function qf(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o,s,a,l,c,u,d,h,f=e._root,p={data:r},m=e._x0,g=e._y0,v=e._x1,y=e._y1;if(!f)return e._root=p,e;while(f.length)if((c=t>=(o=(m+v)/2))?m=o:v=o,(u=n>=(s=(g+y)/2))?g=s:y=s,i=f,!(f=f[d=u<<1|c]))return i[d]=p,e;if(a=+e._x.call(null,f.data),l=+e._y.call(null,f.data),t===a&&n===l)return p.next=f,i?i[d]=p:e._root=p,e;do{i=i?i[d]=new Array(4):e._root=new Array(4),(c=t>=(o=(m+v)/2))?m=o:v=o,(u=n>=(s=(g+y)/2))?g=s:y=s}while((d=u<<1|c)===(h=(l>=s)<<1|a>=o));return i[h]=f,i[d]=p,e}function Yf(e){var t,n,r,i,o=e.length,s=new Array(o),a=new Array(o),l=1/0,c=1/0,u=-1/0,d=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(s[n]=r,a[n]=i,r<l&&(l=r),r>u&&(u=r),i<c&&(c=i),i>d&&(d=i));if(l>u||c>d)return this;for(this.cover(l,c).cover(u,d),n=0;n<o;++n)qf(this,s[n],a[n],e[n]);return this}function Xf(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{var s,a,l=i-n||1,c=this._root;while(n>e||e>=i||r>t||t>=o)switch(a=(t<r)<<1|e<n,s=new Array(4),s[a]=c,c=s,l*=2,a){case 0:i=n+l,o=r+l;break;case 1:n=i-l,o=r+l;break;case 2:i=n+l,r=o-l;break;case 3:n=i-l,r=o-l;break}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function Zf(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e}function Kf(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Jf(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Qf(e,t,n){var r,i,o,s,a,l,c,u=this._x0,d=this._y0,h=this._x1,f=this._y1,p=[],m=this._root;m&&p.push(new Jf(m,u,d,h,f)),null==n?n=1/0:(u=e-n,d=t-n,h=e+n,f=t+n,n*=n);while(l=p.pop())if(!(!(m=l.node)||(i=l.x0)>h||(o=l.y0)>f||(s=l.x1)<u||(a=l.y1)<d))if(m.length){var g=(i+s)/2,v=(o+a)/2;p.push(new Jf(m[3],g,v,s,a),new Jf(m[2],i,v,g,a),new Jf(m[1],g,o,s,v),new Jf(m[0],i,o,g,v)),(c=(t>=v)<<1|e>=g)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=l)}else{var y=e-+this._x.call(null,m.data),b=t-+this._y.call(null,m.data),_=y*y+b*b;if(_<n){var w=Math.sqrt(n=_);u=e-w,d=t-w,h=e+w,f=t+w,r=m.data}}return r}function ep(e){if(isNaN(o=+this._x.call(null,e))||isNaN(s=+this._y.call(null,e)))return this;var t,n,r,i,o,s,a,l,c,u,d,h,f=this._root,p=this._x0,m=this._y0,g=this._x1,v=this._y1;if(!f)return this;if(f.length)while(1){if((c=o>=(a=(p+g)/2))?p=a:g=a,(u=s>=(l=(m+v)/2))?m=l:v=l,t=f,!(f=f[d=u<<1|c]))return this;if(!f.length)break;(t[d+1&3]||t[d+2&3]||t[d+3&3])&&(n=t,h=d)}while(f.data!==e)if(r=f,!(f=f.next))return this;return(i=f.next)&&delete f.next,r?(i?r.next=i:delete r.next,this):t?(i?t[d]=i:delete t[d],(f=t[0]||t[1]||t[2]||t[3])&&f===(t[3]||t[2]||t[1]||t[0])&&!f.length&&(n?n[h]=f:this._root=f),this):(this._root=i,this)}function tp(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function np(){return this._root}function rp(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e}function ip(e){var t,n,r,i,o,s,a=[],l=this._root;l&&a.push(new Jf(l,this._x0,this._y0,this._x1,this._y1));while(t=a.pop())if(!e(l=t.node,r=t.x0,i=t.y0,o=t.x1,s=t.y1)&&l.length){var c=(r+o)/2,u=(i+s)/2;(n=l[3])&&a.push(new Jf(n,c,u,o,s)),(n=l[2])&&a.push(new Jf(n,r,u,c,s)),(n=l[1])&&a.push(new Jf(n,c,i,o,u)),(n=l[0])&&a.push(new Jf(n,r,i,c,u))}return this}function op(e){var t,n=[],r=[];this._root&&n.push(new Jf(this._root,this._x0,this._y0,this._x1,this._y1));while(t=n.pop()){var i=t.node;if(i.length){var o,s=t.x0,a=t.y0,l=t.x1,c=t.y1,u=(s+l)/2,d=(a+c)/2;(o=i[0])&&n.push(new Jf(o,s,a,u,d)),(o=i[1])&&n.push(new Jf(o,u,a,l,d)),(o=i[2])&&n.push(new Jf(o,s,d,u,c)),(o=i[3])&&n.push(new Jf(o,u,d,l,c))}r.push(t)}while(t=r.pop())e(t.node,t.x0,t.y0,t.x1,t.y1);return this}function sp(e){return e[0]}function ap(e){return arguments.length?(this._x=e,this):this._x}function lp(e){return e[1]}function cp(e){return arguments.length?(this._y=e,this):this._y}function up(e,t,n){var r=new dp(null==t?sp:t,null==n?lp:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function dp(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function hp(e){var t={data:e.data},n=t;while(e=e.next)n=n.next={data:e.data};return t}Gf.copy=function(){var e,t,n=new Hf(this._x,this._x0,this._x1),r=this._root;if(!r)return n;if(!r.length)return n._root=Wf(r),n;e=[{source:r,target:n._root=new Array(2)}];while(r=e.pop())for(var i=0;i<2;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(2)}):r.target[i]=Wf(t));return n},Gf.add=Tf,Gf.addAll=Af,Gf.cover=kf,Gf.data=Of,Gf.extent=Rf,Gf.find=Lf,Gf.remove=Df,Gf.removeAll=If,Gf.root=Nf,Gf.size=Uf,Gf.visit=Ff,Gf.visitAfter=Bf,Gf.x=zf;var fp=up.prototype=dp.prototype;function pp(e){const t=+this._x.call(null,e),n=+this._y.call(null,e),r=+this._z.call(null,e);return mp(this.cover(t,n,r),t,n,r,e)}function mp(e,t,n,r,i){if(isNaN(t)||isNaN(n)||isNaN(r))return e;var o,s,a,l,c,u,d,h,f,p,m,g,v=e._root,y={data:i},b=e._x0,_=e._y0,w=e._z0,x=e._x1,S=e._y1,E=e._z1;if(!v)return e._root=y,e;while(v.length)if((h=t>=(s=(b+x)/2))?b=s:x=s,(f=n>=(a=(_+S)/2))?_=a:S=a,(p=r>=(l=(w+E)/2))?w=l:E=l,o=v,!(v=v[m=p<<2|f<<1|h]))return o[m]=y,e;if(c=+e._x.call(null,v.data),u=+e._y.call(null,v.data),d=+e._z.call(null,v.data),t===c&&n===u&&r===d)return y.next=v,o?o[m]=y:e._root=y,e;do{o=o?o[m]=new Array(8):e._root=new Array(8),(h=t>=(s=(b+x)/2))?b=s:x=s,(f=n>=(a=(_+S)/2))?_=a:S=a,(p=r>=(l=(w+E)/2))?w=l:E=l}while((m=p<<2|f<<1|h)===(g=(d>=l)<<2|(u>=a)<<1|c>=s));return o[g]=v,o[m]=y,e}function gp(e){Array.isArray(e)||(e=Array.from(e));const t=e.length,n=new Float64Array(t),r=new Float64Array(t),i=new Float64Array(t);let o=1/0,s=1/0,a=1/0,l=-1/0,c=-1/0,u=-1/0;for(let d,h,f,p,m=0;m<t;++m)isNaN(h=+this._x.call(null,d=e[m]))||isNaN(f=+this._y.call(null,d))||isNaN(p=+this._z.call(null,d))||(n[m]=h,r[m]=f,i[m]=p,h<o&&(o=h),h>l&&(l=h),f<s&&(s=f),f>c&&(c=f),p<a&&(a=p),p>u&&(u=p));if(o>l||s>c||a>u)return this;this.cover(o,s,a).cover(l,c,u);for(let d=0;d<t;++d)mp(this,n[d],r[d],i[d],e[d]);return this}function vp(e,t,n){if(isNaN(e=+e)||isNaN(t=+t)||isNaN(n=+n))return this;var r=this._x0,i=this._y0,o=this._z0,s=this._x1,a=this._y1,l=this._z1;if(isNaN(r))s=(r=Math.floor(e))+1,a=(i=Math.floor(t))+1,l=(o=Math.floor(n))+1;else{var c,u,d=s-r||1,h=this._root;while(r>e||e>=s||i>t||t>=a||o>n||n>=l)switch(u=(n<o)<<2|(t<i)<<1|e<r,c=new Array(8),c[u]=h,h=c,d*=2,u){case 0:s=r+d,a=i+d,l=o+d;break;case 1:r=s-d,a=i+d,l=o+d;break;case 2:s=r+d,i=a-d,l=o+d;break;case 3:r=s-d,i=a-d,l=o+d;break;case 4:s=r+d,a=i+d,o=l-d;break;case 5:r=s-d,a=i+d,o=l-d;break;case 6:s=r+d,i=a-d,o=l-d;break;case 7:r=s-d,i=a-d,o=l-d;break}this._root&&this._root.length&&(this._root=h)}return this._x0=r,this._y0=i,this._z0=o,this._x1=s,this._y1=a,this._z1=l,this}function yp(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e}function bp(e){return arguments.length?this.cover(+e[0][0],+e[0][1],+e[0][2]).cover(+e[1][0],+e[1][1],+e[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function _p(e,t,n,r,i,o,s){this.node=e,this.x0=t,this.y0=n,this.z0=r,this.x1=i,this.y1=o,this.z1=s}function wp(e,t,n,r){var i,o,s,a,l,c,u,d,h,f=this._x0,p=this._y0,m=this._z0,g=this._x1,v=this._y1,y=this._z1,b=[],_=this._root;_&&b.push(new _p(_,f,p,m,g,v,y)),null==r?r=1/0:(f=e-r,p=t-r,m=n-r,g=e+r,v=t+r,y=n+r,r*=r);while(d=b.pop())if(!(!(_=d.node)||(o=d.x0)>g||(s=d.y0)>v||(a=d.z0)>y||(l=d.x1)<f||(c=d.y1)<p||(u=d.z1)<m))if(_.length){var w=(o+l)/2,x=(s+c)/2,S=(a+u)/2;b.push(new _p(_[7],w,x,S,l,c,u),new _p(_[6],o,x,S,w,c,u),new _p(_[5],w,s,S,l,x,u),new _p(_[4],o,s,S,w,x,u),new _p(_[3],w,x,a,l,c,S),new _p(_[2],o,x,a,w,c,S),new _p(_[1],w,s,a,l,x,S),new _p(_[0],o,s,a,w,x,S)),(h=(n>=S)<<2|(t>=x)<<1|e>=w)&&(d=b[b.length-1],b[b.length-1]=b[b.length-1-h],b[b.length-1-h]=d)}else{var E=e-+this._x.call(null,_.data),M=t-+this._y.call(null,_.data),T=n-+this._z.call(null,_.data),C=E*E+M*M+T*T;if(C<r){var A=Math.sqrt(r=C);f=e-A,p=t-A,m=n-A,g=e+A,v=t+A,y=n+A,i=_.data}}return i}function xp(e){if(isNaN(o=+this._x.call(null,e))||isNaN(s=+this._y.call(null,e))||isNaN(a=+this._z.call(null,e)))return this;var t,n,r,i,o,s,a,l,c,u,d,h,f,p,m,g=this._root,v=this._x0,y=this._y0,b=this._z0,_=this._x1,w=this._y1,x=this._z1;if(!g)return this;if(g.length)while(1){if((d=o>=(l=(v+_)/2))?v=l:_=l,(h=s>=(c=(y+w)/2))?y=c:w=c,(f=a>=(u=(b+x)/2))?b=u:x=u,t=g,!(g=g[p=f<<2|h<<1|d]))return this;if(!g.length)break;(t[p+1&7]||t[p+2&7]||t[p+3&7]||t[p+4&7]||t[p+5&7]||t[p+6&7]||t[p+7&7])&&(n=t,m=p)}while(g.data!==e)if(r=g,!(g=g.next))return this;return(i=g.next)&&delete g.next,r?(i?r.next=i:delete r.next,this):t?(i?t[p]=i:delete t[p],(g=t[0]||t[1]||t[2]||t[3]||t[4]||t[5]||t[6]||t[7])&&g===(t[7]||t[6]||t[5]||t[4]||t[3]||t[2]||t[1]||t[0])&&!g.length&&(n?n[m]=g:this._root=g),this):(this._root=i,this)}function Sp(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Ep(){return this._root}function Mp(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e}function Tp(e){var t,n,r,i,o,s,a,l,c=[],u=this._root;u&&c.push(new _p(u,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));while(t=c.pop())if(!e(u=t.node,r=t.x0,i=t.y0,o=t.z0,s=t.x1,a=t.y1,l=t.z1)&&u.length){var d=(r+s)/2,h=(i+a)/2,f=(o+l)/2;(n=u[7])&&c.push(new _p(n,d,h,f,s,a,l)),(n=u[6])&&c.push(new _p(n,r,h,f,d,a,l)),(n=u[5])&&c.push(new _p(n,d,i,f,s,h,l)),(n=u[4])&&c.push(new _p(n,r,i,f,d,h,l)),(n=u[3])&&c.push(new _p(n,d,h,o,s,a,f)),(n=u[2])&&c.push(new _p(n,r,h,o,d,a,f)),(n=u[1])&&c.push(new _p(n,d,i,o,s,h,f)),(n=u[0])&&c.push(new _p(n,r,i,o,d,h,f))}return this}function Cp(e){var t,n=[],r=[];this._root&&n.push(new _p(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));while(t=n.pop()){var i=t.node;if(i.length){var o,s=t.x0,a=t.y0,l=t.z0,c=t.x1,u=t.y1,d=t.z1,h=(s+c)/2,f=(a+u)/2,p=(l+d)/2;(o=i[0])&&n.push(new _p(o,s,a,l,h,f,p)),(o=i[1])&&n.push(new _p(o,h,a,l,c,f,p)),(o=i[2])&&n.push(new _p(o,s,f,l,h,u,p)),(o=i[3])&&n.push(new _p(o,h,f,l,c,u,p)),(o=i[4])&&n.push(new _p(o,s,a,p,h,f,d)),(o=i[5])&&n.push(new _p(o,h,a,p,c,f,d)),(o=i[6])&&n.push(new _p(o,s,f,p,h,u,d)),(o=i[7])&&n.push(new _p(o,h,f,p,c,u,d))}r.push(t)}while(t=r.pop())e(t.node,t.x0,t.y0,t.z0,t.x1,t.y1,t.z1);return this}function Ap(e){return e[0]}function kp(e){return arguments.length?(this._x=e,this):this._x}function Op(e){return e[1]}function Rp(e){return arguments.length?(this._y=e,this):this._y}function Pp(e){return e[2]}function Lp(e){return arguments.length?(this._z=e,this):this._z}function Dp(e,t,n,r){var i=new Ip(null==t?Ap:t,null==n?Op:n,null==r?Pp:r,NaN,NaN,NaN,NaN,NaN,NaN);return null==e?i:i.addAll(e)}function Ip(e,t,n,r,i,o,s,a,l){this._x=e,this._y=t,this._z=n,this._x0=r,this._y0=i,this._z0=o,this._x1=s,this._y1=a,this._z1=l,this._root=void 0}function Np(e){var t={data:e.data},n=t;while(e=e.next)n=n.next={data:e.data};return t}fp.copy=function(){var e,t,n=new dp(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=hp(r),n;e=[{source:r,target:n._root=new Array(4)}];while(r=e.pop())for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=hp(t));return n},fp.add=$f,fp.addAll=Yf,fp.cover=Xf,fp.data=Zf,fp.extent=Kf,fp.find=Qf,fp.remove=ep,fp.removeAll=tp,fp.root=np,fp.size=rp,fp.visit=ip,fp.visitAfter=op,fp.x=ap,fp.y=cp;var Up=Dp.prototype=Ip.prototype;function Fp(){var e,t,n,r,i,o,s=wf(-30),a=1,l=1/0,c=.81;function u(r){var o,s=e.length,a=(1===t?jf(e,pf):2===t?up(e,pf,mf):3===t?Dp(e,pf,mf,gf):null).visitAfter(h);for(i=r,o=0;o<s;++o)n=e[o],a.visit(f)}function d(){if(e){var t,n,r=e.length;for(o=new Array(r),t=0;t<r;++t)n=e[t],o[n.index]=+s(n,t,e)}}function h(e){var n,r,i,s,a,l,c=0,u=0,d=e.length;if(d){for(i=s=a=l=0;l<d;++l)(n=e[l])&&(r=Math.abs(n.value))&&(c+=n.value,u+=r,i+=r*(n.x||0),s+=r*(n.y||0),a+=r*(n.z||0));c*=Math.sqrt(4/d),e.x=i/u,t>1&&(e.y=s/u),t>2&&(e.z=a/u)}else{n=e,n.x=n.data.x,t>1&&(n.y=n.data.y),t>2&&(n.z=n.data.z);do{c+=o[n.data.index]}while(n=n.next)}e.value=c}function f(e,s,u,d,h){if(!e.value)return!0;var f=[u,d,h][t-1],p=e.x-n.x,m=t>1?e.y-n.y:0,g=t>2?e.z-n.z:0,v=f-s,y=p*p+m*m+g*g;if(v*v/c<y)return y<l&&(0===p&&(p=xf(r),y+=p*p),t>1&&0===m&&(m=xf(r),y+=m*m),t>2&&0===g&&(g=xf(r),y+=g*g),y<a&&(y=Math.sqrt(a*y)),n.vx+=p*e.value*i/y,t>1&&(n.vy+=m*e.value*i/y),t>2&&(n.vz+=g*e.value*i/y)),!0;if(!(e.length||y>=l)){(e.data!==n||e.next)&&(0===p&&(p=xf(r),y+=p*p),t>1&&0===m&&(m=xf(r),y+=m*m),t>2&&0===g&&(g=xf(r),y+=g*g),y<a&&(y=Math.sqrt(a*y)));do{e.data!==n&&(v=o[e.data.index]*i/y,n.vx+=p*v,t>1&&(n.vy+=m*v),t>2&&(n.vz+=g*v))}while(e=e.next)}}return u.initialize=function(n,...i){e=n,r=i.find((e=>"function"===typeof e))||Math.random,t=i.find((e=>[1,2,3].includes(e)))||2,d()},u.strength=function(e){return arguments.length?(s="function"===typeof e?e:wf(+e),d(),u):s},u.distanceMin=function(e){return arguments.length?(a=e*e,u):Math.sqrt(a)},u.distanceMax=function(e){return arguments.length?(l=e*e,u):Math.sqrt(l)},u.theta=function(e){return arguments.length?(c=e*e,u):Math.sqrt(c)},u}function Bp(e,t,n){var r,i=1;function o(){var o,s,a=r.length,l=0,c=0,u=0;for(o=0;o<a;++o)s=r[o],l+=s.x||0,c+=s.y||0,u+=s.z||0;for(l=(l/a-e)*i,c=(c/a-t)*i,u=(u/a-n)*i,o=0;o<a;++o)s=r[o],l&&(s.x-=l),c&&(s.y-=c),u&&(s.z-=u)}return null==e&&(e=0),null==t&&(t=0),null==n&&(n=0),o.initialize=function(e){r=e},o.x=function(t){return arguments.length?(e=+t,o):e},o.y=function(e){return arguments.length?(t=+e,o):t},o.z=function(e){return arguments.length?(n=+e,o):n},o.strength=function(e){return arguments.length?(i=+e,o):i},o}function Vp(e,t,n,r){var i,o,s,a,l=wf(.1);function c(e){for(var l=0,c=i.length;l<c;++l){var u=i[l],d=u.x-t||1e-6,h=(u.y||0)-n||1e-6,f=(u.z||0)-r||1e-6,p=Math.sqrt(d*d+h*h+f*f),m=(a[l]-p)*s[l]*e/p;u.vx+=d*m,o>1&&(u.vy+=h*m),o>2&&(u.vz+=f*m)}}function u(){if(i){var t,n=i.length;for(s=new Array(n),a=new Array(n),t=0;t<n;++t)a[t]=+e(i[t],t,i),s[t]=isNaN(a[t])?0:+l(i[t],t,i)}}return"function"!==typeof e&&(e=wf(+e)),null==t&&(t=0),null==n&&(n=0),null==r&&(r=0),c.initialize=function(e,...t){i=e,o=t.find((e=>[1,2,3].includes(e)))||2,u()},c.strength=function(e){return arguments.length?(l="function"===typeof e?e:wf(+e),u(),c):l},c.radius=function(t){return arguments.length?(e="function"===typeof t?t:wf(+t),u(),c):e},c.x=function(e){return arguments.length?(t=+e,c):t},c.y=function(e){return arguments.length?(n=+e,c):n},c.z=function(e){return arguments.length?(r=+e,c):r},c}Up.copy=function(){var e,t,n=new Ip(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),r=this._root;if(!r)return n;if(!r.length)return n._root=Np(r),n;e=[{source:r,target:n._root=new Array(8)}];while(r=e.pop())for(var i=0;i<8;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(8)}):r.target[i]=Np(t));return n},Up.add=pp,Up.addAll=gp,Up.cover=vp,Up.data=yp,Up.extent=bp,Up.find=wp,Up.remove=xp,Up.removeAll=Sp,Up.root=Ep,Up.size=Mp,Up.visit=Tp,Up.visitAfter=Cp,Up.x=kp,Up.y=Rp,Up.z=Lp;var zp=n(2340),jp=n(6334);function Hp(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var Wp=Hp,Gp="object"==typeof global&&global&&global.Object===Object&&global,$p=Gp,qp="object"==typeof self&&self&&self.Object===Object&&self,Yp=$p||qp||Function("return this")(),Xp=Yp,Zp=function(){return Xp.Date.now()},Kp=Zp,Jp=/\s/;function Qp(e){var t=e.length;while(t--&&Jp.test(e.charAt(t)));return t}var em=Qp,tm=/^\s+/;function nm(e){return e?e.slice(0,em(e)+1).replace(tm,""):e}var rm=nm,im=Xp.Symbol,om=im,sm=Object.prototype,am=sm.hasOwnProperty,lm=sm.toString,cm=om?om.toStringTag:void 0;function um(e){var t=am.call(e,cm),n=e[cm];try{e[cm]=void 0;var r=!0}catch(o){}var i=lm.call(e);return r&&(t?e[cm]=n:delete e[cm]),i}var dm=um,hm=Object.prototype,fm=hm.toString;function pm(e){return fm.call(e)}var mm=pm,gm="[object Null]",vm="[object Undefined]",ym=om?om.toStringTag:void 0;function bm(e){return null==e?void 0===e?vm:gm:ym&&ym in Object(e)?dm(e):mm(e)}var _m=bm;function wm(e){return null!=e&&"object"==typeof e}var xm=wm,Sm="[object Symbol]";function Em(e){return"symbol"==typeof e||xm(e)&&_m(e)==Sm}var Mm=Em,Tm=NaN,Cm=/^[-+]0x[0-9a-f]+$/i,Am=/^0b[01]+$/i,km=/^0o[0-7]+$/i,Om=parseInt;function Rm(e){if("number"==typeof e)return e;if(Mm(e))return Tm;if(Wp(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Wp(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=rm(e);var n=Am.test(e);return n||km.test(e)?Om(e.slice(2),n?2:8):Cm.test(e)?Tm:+e}var Pm=Rm,Lm="Expected a function",Dm=Math.max,Im=Math.min;function Nm(e,t,n){var r,i,o,s,a,l,c=0,u=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError(Lm);function f(t){var n=r,o=i;return r=i=void 0,c=t,s=e.apply(o,n),s}function p(e){return c=e,a=setTimeout(v,t),u?f(e):s}function m(e){var n=e-l,r=e-c,i=t-n;return d?Im(i,o-r):i}function g(e){var n=e-l,r=e-c;return void 0===l||n>=t||n<0||d&&r>=o}function v(){var e=Kp();if(g(e))return y(e);a=setTimeout(v,m(e))}function y(e){return a=void 0,h&&r?f(e):(r=i=void 0,s)}function b(){void 0!==a&&clearTimeout(a),c=0,r=l=i=a=void 0}function _(){return void 0===a?s:y(Kp())}function w(){var e=Kp(),n=g(e);if(r=arguments,i=this,l=e,n){if(void 0===a)return p(l);if(d)return clearTimeout(a),a=setTimeout(v,t),f(l)}return void 0===a&&(a=setTimeout(v,t)),s}return t=Pm(t)||0,Wp(n)&&(u=!!n.leading,d="maxWait"in n,o=d?Dm(Pm(n.maxWait)||0,t):o,h="trailing"in n?!!n.trailing:h),w.cancel=b,w.flush=_,w}var Um=Nm;function Fm(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function Bm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ym(r.key),r)}}function zm(e,t,n){return t&&Vm(e.prototype,t),n&&Vm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function jm(e,t){return Hm(e)||Fm(e,t)||Wm(e,t)||$m()}function Hm(e){if(Array.isArray(e))return e}function Wm(e,t){if(e){if("string"===typeof e)return Gm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gm(e,t):void 0}}function Gm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $m(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qm(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function Ym(e){var t=qm(e,"string");return"symbol"===typeof t?t:String(t)}var Xm=zm((function e(t,n){var r=n["default"],i=void 0===r?null:r,o=n.triggerUpdate,s=void 0===o||o,a=n.onChange,l=void 0===a?function(e,t){}:a;Bm(this,e),this.name=t,this.defaultVal=i,this.triggerUpdate=s,this.onChange=l}));function Zm(e){var t=e.stateInit,n=void 0===t?function(){return{}}:t,r=e.props,i=void 0===r?{}:r,o=e.methods,s=void 0===o?{}:o,a=e.aliases,l=void 0===a?{}:a,c=e.init,u=void 0===c?function(){}:c,d=e.update,h=void 0===d?function(){}:d,f=Object.keys(i).map((function(e){return new Xm(e,i[e])}));return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},n instanceof Function?n(e):n,{initialised:!1}),r={};function i(t){return o(t,e),a(),i}var o=function(e,n){u.call(i,e,t,n),t.initialised=!0},a=Um((function(){t.initialised&&(h.call(i,t,r),r={})}),1);return f.forEach((function(e){function n(e){var n=e.name,o=e.triggerUpdate,s=void 0!==o&&o,l=e.onChange,c=void 0===l?function(e,t){}:l,u=e.defaultVal,d=void 0===u?null:u;return function(e){var o=t[n];if(!arguments.length)return o;var l=void 0===e?d:e;return t[n]=l,c.call(i,l,t,o),!r.hasOwnProperty(n)&&(r[n]=o),s&&a(),i}}i[e.name]=n(e)})),Object.keys(s).forEach((function(e){i[e]=function(){for(var n,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=s[e]).call.apply(n,[i,t].concat(o))}})),Object.entries(l).forEach((function(e){var t=jm(e,2),n=t[0],r=t[1];return i[n]=i[r]})),i.resetProps=function(){return f.forEach((function(e){i[e.name](e.defaultVal)})),i},i.resetProps(),t._rerender=a,i}}var Km=function(e){return e instanceof Function?e:"string"===typeof e?function(t){return t[e]}:function(t){return e}};function Jm(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function Qm(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function eg(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function tg(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function ng(e,t){if(null==e)return{};var n,r,i=tg(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function rg(e,t){return sg(e)||eg(e,t)||lg(e,t)||dg()}function ig(e){return og(e)||ag(e)||lg(e)||ug()}function og(e){if(Array.isArray(e))return cg(e)}function sg(e){if(Array.isArray(e))return e}function ag(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function lg(e,t){if(e){if("string"===typeof e)return cg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cg(e,t):void 0}}function cg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ug(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function dg(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hg(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function fg(e){var t=hg(e,"string");return"symbol"===typeof t?t:String(t)}var pg=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=(t instanceof Array?t.length?t:[void 0]:[t]).map((function(e){return{keyAccessor:e,isProp:!(e instanceof Function)}})),o=e.reduce((function(e,t){var r=e,o=t;return i.forEach((function(e,t){var s,a=e.keyAccessor,l=e.isProp;if(l){var c=o,u=c[a],d=ng(c,[a].map(fg));s=u,o=d}else s=a(o,t);t+1<i.length?(r.hasOwnProperty(s)||(r[s]={}),r=r[s]):n?(r.hasOwnProperty(s)||(r[s]=[]),r[s].push(o)):r[s]=o})),e}),{});n instanceof Function&&function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;r===i.length?Object.keys(t).forEach((function(e){return t[e]=n(t[e])})):Object.values(t).forEach((function(t){return e(t,r+1)}))}(o);var s=o;return r&&(s=[],function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];n.length===i.length?s.push({keys:n,vals:t}):Object.entries(t).forEach((function(t){var r=rg(t,2),i=r[0],o=r[1];return e(o,[].concat(ig(n),[i]))}))}(o),t instanceof Array&&0===t.length&&1===s.length&&(s[0].keys=[])),s};function mg(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function gg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gg(Object(n),!0).forEach((function(t){yg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yg(e,t,n){return t=Rg(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bg(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function _g(e,t){if(null==e)return{};var n,r,i=bg(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function wg(e,t){return Eg(e)||mg(e,t)||Tg(e,t)||kg()}function xg(e){return Sg(e)||Mg(e)||Tg(e)||Ag()}function Sg(e){if(Array.isArray(e))return Cg(e)}function Eg(e){if(Array.isArray(e))return e}function Mg(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Tg(e,t){if(e){if("string"===typeof e)return Cg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cg(e,t):void 0}}function Cg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ag(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function kg(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Og(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function Rg(e){var t=Og(e,"string");return"symbol"===typeof t?t:String(t)}var Pg=["createObj","updateObj","exitObj","objBindAttr","dataBindAttr"];function Lg(e,t,n){var r={enter:[],update:[],exit:[]};if(n){var i=pg(e,n,!1),o=pg(t,n,!1),s=Object.assign({},i,o);Object.entries(s).forEach((function(e){var t=wg(e,2),n=t[0],s=t[1],a=i.hasOwnProperty(n)?o.hasOwnProperty(n)?"update":"exit":"enter";r[a].push("update"===a?[i[n],o[n]]:s)}))}else{var a=new Set(e),l=new Set(t);new Set([].concat(xg(a),xg(l))).forEach((function(e){var t=a.has(e)?l.has(e)?"update":"exit":"enter";r[t].push("update"===t?[e,e]:e)}))}return r}function Dg(e,t,n){var r=n.objBindAttr,i=void 0===r?"__obj":r,o=n.dataBindAttr,s=void 0===o?"__data":o,a=n.idAccessor,l=n.purge,c=void 0!==l&&l,u=function(e){return e.hasOwnProperty(s)},d=t.filter((function(e){return!u(e)})),h=t.filter(u).map((function(e){return e[s]})),f=e,p=c?{enter:f,exit:h,update:[]}:Lg(h,f,a);return p.update=p.update.map((function(e){var t=wg(e,2),n=t[0],r=t[1];return n!==r&&(r[i]=n[i],r[i][s]=r),r})),p.exit=p.exit.concat(d.map((function(e){return yg({},i,e)}))),p}function Ig(e,t,n,r,i){var o=i.createObj,s=void 0===o?function(e){return{}}:o,a=i.updateObj,l=void 0===a?function(e,t){}:a,c=i.exitObj,u=void 0===c?function(e){}:c,d=i.objBindAttr,h=void 0===d?"__obj":d,f=i.dataBindAttr,p=void 0===f?"__data":f,m=_g(i,Pg),g=Dg(e,t,vg({objBindAttr:h,dataBindAttr:p},m)),v=g.enter,y=g.update,b=g.exit;b.forEach((function(e){var t=e[h];delete e[h],u(t),r(t)}));var _=x(v),w=[].concat(xg(v),xg(y));function x(e){var t=[];return e.forEach((function(e){var n=s(e);n&&(n[p]=e,e[h]=n,t.push(n))})),t}function S(e){e.forEach((function(e){var t=e[h];t&&(t[p]=e,l(t,e))}))}S(w),_.forEach(n)}class Ng extends Map{constructor(e,t=Vg){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[n,r]of e)this.set(n,r)}get(e){return super.get(Ug(this,e))}has(e){return super.has(Ug(this,e))}set(e,t){return super.set(Fg(this,e),t)}delete(e){return super.delete(Bg(this,e))}}function Ug({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Fg({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Bg({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Vg(e){return null!==e&&"object"===typeof e?e.valueOf():e}function zg(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const jg=Symbol("implicit");function Hg(){var e=new Ng,t=[],n=[],r=jg;function i(i){let o=e.get(i);if(void 0===o){if(r!==jg)return r;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Ng;for(const r of n)e.has(r)||e.set(r,t.push(r)-1);return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return Hg(t,n).unknown(r)},zg.apply(i,arguments),i}function Wg(e){var t=e.length/6|0,n=new Array(t),r=0;while(r<t)n[r]="#"+e.slice(6*r,6*++r);return n}var Gg=Wg("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function $g(e){return $g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$g(e)}var qg=/^\s+/,Yg=/\s+$/;function Xg(e,t){if(e=e||"",t=t||{},e instanceof Xg)return e;if(!(this instanceof Xg))return new Xg(e,t);var n=Zg(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}function Zg(e){var t={r:0,g:0,b:0},n=1,r=null,i=null,o=null,s=!1,a=!1;return"string"==typeof e&&(e=Pv(e)),"object"==$g(e)&&(Rv(e.r)&&Rv(e.g)&&Rv(e.b)?(t=Kg(e.r,e.g,e.b),s=!0,a="%"===String(e.r).substr(-1)?"prgb":"rgb"):Rv(e.h)&&Rv(e.s)&&Rv(e.v)?(r=Cv(e.s),i=Cv(e.v),t=tv(e.h,r,i),s=!0,a="hsv"):Rv(e.h)&&Rv(e.s)&&Rv(e.l)&&(r=Cv(e.s),o=Cv(e.l),t=Qg(e.h,r,o),s=!0,a="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=_v(n),{ok:s,format:e.format||a,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}function Kg(e,t,n){return{r:255*wv(e,255),g:255*wv(t,255),b:255*wv(n,255)}}function Jg(e,t,n){e=wv(e,255),t=wv(t,255),n=wv(n,255);var r,i,o=Math.max(e,t,n),s=Math.min(e,t,n),a=(o+s)/2;if(o==s)r=i=0;else{var l=o-s;switch(i=a>.5?l/(2-o-s):l/(o+s),o){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4;break}r/=6}return{h:r,s:i,l:a}}function Qg(e,t,n){var r,i,o;function s(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=wv(e,360),t=wv(t,100),n=wv(n,100),0===t)r=i=o=n;else{var a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;r=s(l,a,e+1/3),i=s(l,a,e),o=s(l,a,e-1/3)}return{r:255*r,g:255*i,b:255*o}}function ev(e,t,n){e=wv(e,255),t=wv(t,255),n=wv(n,255);var r,i,o=Math.max(e,t,n),s=Math.min(e,t,n),a=o,l=o-s;if(i=0===o?0:l/o,o==s)r=0;else{switch(o){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4;break}r/=6}return{h:r,s:i,v:a}}function tv(e,t,n){e=6*wv(e,360),t=wv(t,100),n=wv(n,100);var r=Math.floor(e),i=e-r,o=n*(1-t),s=n*(1-i*t),a=n*(1-(1-i)*t),l=r%6,c=[n,s,o,o,a,n][l],u=[a,n,n,s,o,o][l],d=[o,o,a,n,n,s][l];return{r:255*c,g:255*u,b:255*d}}function nv(e,t,n,r){var i=[Tv(Math.round(e).toString(16)),Tv(Math.round(t).toString(16)),Tv(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function rv(e,t,n,r,i){var o=[Tv(Math.round(e).toString(16)),Tv(Math.round(t).toString(16)),Tv(Math.round(n).toString(16)),Tv(Av(r))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function iv(e,t,n,r){var i=[Tv(Av(r)),Tv(Math.round(e).toString(16)),Tv(Math.round(t).toString(16)),Tv(Math.round(n).toString(16))];return i.join("")}function ov(e,t){t=0===t?0:t||10;var n=Xg(e).toHsl();return n.s-=t/100,n.s=xv(n.s),Xg(n)}function sv(e,t){t=0===t?0:t||10;var n=Xg(e).toHsl();return n.s+=t/100,n.s=xv(n.s),Xg(n)}function av(e){return Xg(e).desaturate(100)}function lv(e,t){t=0===t?0:t||10;var n=Xg(e).toHsl();return n.l+=t/100,n.l=xv(n.l),Xg(n)}function cv(e,t){t=0===t?0:t||10;var n=Xg(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),Xg(n)}function uv(e,t){t=0===t?0:t||10;var n=Xg(e).toHsl();return n.l-=t/100,n.l=xv(n.l),Xg(n)}function dv(e,t){var n=Xg(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,Xg(n)}function hv(e){var t=Xg(e).toHsl();return t.h=(t.h+180)%360,Xg(t)}function fv(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=Xg(e).toHsl(),r=[Xg(e)],i=360/t,o=1;o<t;o++)r.push(Xg({h:(n.h+o*i)%360,s:n.s,l:n.l}));return r}function pv(e){var t=Xg(e).toHsl(),n=t.h;return[Xg(e),Xg({h:(n+72)%360,s:t.s,l:t.l}),Xg({h:(n+216)%360,s:t.s,l:t.l})]}function mv(e,t,n){t=t||6,n=n||30;var r=Xg(e).toHsl(),i=360/n,o=[Xg(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(Xg(r));return o}function gv(e,t){t=t||6;var n=Xg(e).toHsv(),r=n.h,i=n.s,o=n.v,s=[],a=1/t;while(t--)s.push(Xg({h:r,s:i,v:o})),o=(o+a)%1;return s}Xg.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r,i,o,s=this.toRgb();return e=s.r/255,t=s.g/255,n=s.b/255,r=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4),i=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4),o=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4),.2126*r+.7152*i+.0722*o},setAlpha:function(e){return this._a=_v(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=ev(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=ev(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=Jg(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=Jg(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return nv(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return rv(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*wv(this._r,255))+"%",g:Math.round(100*wv(this._g,255))+"%",b:Math.round(100*wv(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*wv(this._r,255))+"%, "+Math.round(100*wv(this._g,255))+"%, "+Math.round(100*wv(this._b,255))+"%)":"rgba("+Math.round(100*wv(this._r,255))+"%, "+Math.round(100*wv(this._g,255))+"%, "+Math.round(100*wv(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(yv[nv(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+iv(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var i=Xg(e);n="#"+iv(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0,i=!t&&r&&("hex"===e||"hex6"===e||"hex3"===e||"hex4"===e||"hex8"===e||"name"===e);return i?"name"===e&&0===this._a?this.toName():this.toRgbString():("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return Xg(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(lv,arguments)},brighten:function(){return this._applyModification(cv,arguments)},darken:function(){return this._applyModification(uv,arguments)},desaturate:function(){return this._applyModification(ov,arguments)},saturate:function(){return this._applyModification(sv,arguments)},greyscale:function(){return this._applyModification(av,arguments)},spin:function(){return this._applyModification(dv,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(mv,arguments)},complement:function(){return this._applyCombination(hv,arguments)},monochromatic:function(){return this._applyCombination(gv,arguments)},splitcomplement:function(){return this._applyCombination(pv,arguments)},triad:function(){return this._applyCombination(fv,[3])},tetrad:function(){return this._applyCombination(fv,[4])}},Xg.fromRatio=function(e,t){if("object"==$g(e)){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:Cv(e[r]));e=n}return Xg(e,t)},Xg.equals=function(e,t){return!(!e||!t)&&Xg(e).toRgbString()==Xg(t).toRgbString()},Xg.random=function(){return Xg.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},Xg.mix=function(e,t,n){n=0===n?0:n||50;var r=Xg(e).toRgb(),i=Xg(t).toRgb(),o=n/100,s={r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a};return Xg(s)},Xg.readability=function(e,t){var n=Xg(e),r=Xg(t);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)},Xg.isReadable=function(e,t,n){var r,i,o=Xg.readability(e,t);switch(i=!1,r=Lv(n),r.level+r.size){case"AAsmall":case"AAAlarge":i=o>=4.5;break;case"AAlarge":i=o>=3;break;case"AAAsmall":i=o>=7;break}return i},Xg.mostReadable=function(e,t,n){var r,i,o,s,a=null,l=0;n=n||{},i=n.includeFallbackColors,o=n.level,s=n.size;for(var c=0;c<t.length;c++)r=Xg.readability(e,t[c]),r>l&&(l=r,a=Xg(t[c]));return Xg.isReadable(e,a,{level:o,size:s})||!i?a:(n.includeFallbackColors=!1,Xg.mostReadable(e,["#fff","#000"],n))};var vv=Xg.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},yv=Xg.hexNames=bv(vv);function bv(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function _v(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function wv(e,t){Ev(e)&&(e="100%");var n=Mv(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function xv(e){return Math.min(1,Math.max(0,e))}function Sv(e){return parseInt(e,16)}function Ev(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)}function Mv(e){return"string"===typeof e&&-1!=e.indexOf("%")}function Tv(e){return 1==e.length?"0"+e:""+e}function Cv(e){return e<=1&&(e=100*e+"%"),e}function Av(e){return Math.round(255*parseFloat(e)).toString(16)}function kv(e){return Sv(e)/255}var Ov=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",n="(?:"+t+")|(?:"+e+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Rv(e){return!!Ov.CSS_UNIT.exec(e)}function Pv(e){e=e.replace(qg,"").replace(Yg,"").toLowerCase();var t,n=!1;if(vv[e])e=vv[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=Ov.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=Ov.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=Ov.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=Ov.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=Ov.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=Ov.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=Ov.hex8.exec(e))?{r:Sv(t[1]),g:Sv(t[2]),b:Sv(t[3]),a:kv(t[4]),format:n?"name":"hex8"}:(t=Ov.hex6.exec(e))?{r:Sv(t[1]),g:Sv(t[2]),b:Sv(t[3]),format:n?"name":"hex"}:(t=Ov.hex4.exec(e))?{r:Sv(t[1]+""+t[1]),g:Sv(t[2]+""+t[2]),b:Sv(t[3]+""+t[3]),a:kv(t[4]+""+t[4]),format:n?"name":"hex8"}:!!(t=Ov.hex3.exec(e))&&{r:Sv(t[1]+""+t[1]),g:Sv(t[2]+""+t[2]),b:Sv(t[3]+""+t[3]),format:n?"name":"hex"}}function Lv(e){var t,n;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA"),"small"!==n&&"large"!==n&&(n="small"),{level:t,size:n}}function Dv(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function Iv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Iv(Object(n),!0).forEach((function(t){zv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Iv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Uv(e){return Uv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uv(e)}function Fv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ly(r.key),r)}}function Vv(e,t,n){return t&&Bv(e.prototype,t),n&&Bv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function zv(e,t,n){return t=ly(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jv(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wv(e,t)}function Hv(e){return Hv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Hv(e)}function Wv(e,t){return Wv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wv(e,t)}function Gv(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function $v(e,t,n){return $v=Gv()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=Function.bind.apply(e,r),o=new i;return n&&Wv(o,n.prototype),o},$v.apply(null,arguments)}function qv(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function Yv(e,t){if(null==e)return{};var n,r,i=qv(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Xv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zv(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Xv(e)}function Kv(e){var t=Gv();return function(){var n,r=Hv(e);if(t){var i=Hv(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Zv(this,n)}}function Jv(e,t){return ty(e)||Dv(e,t)||ry(e,t)||sy()}function Qv(e){return ey(e)||ny(e)||ry(e)||oy()}function ey(e){if(Array.isArray(e))return iy(e)}function ty(e){if(Array.isArray(e))return e}function ny(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function ry(e,t){if(e){if("string"===typeof e)return iy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iy(e,t):void 0}}function iy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oy(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function sy(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ay(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function ly(e){var t=ay(e,"string");return"symbol"===typeof t?t:String(t)}var cy=function e(t){t instanceof Array?t.forEach(e):(t.map&&t.map.dispose(),t.dispose())},uy=function e(t){t.geometry&&t.geometry.dispose(),t.material&&cy(t.material),t.texture&&t.texture.dispose(),t.children&&t.children.forEach(e)},dy=function(e){while(e.children.length){var t=e.children[0];e.remove(t),uy(t)}},hy=["objFilter"];function fy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.objFilter,i=void 0===r?function(){return!0}:r,o=Yv(n,hy);return Ig(e,t.children.filter(i),(function(e){return t.add(e)}),(function(e){t.remove(e),dy(e)}),Nv({objBindAttr:"__threeObj"},o))}var py=function(e){return isNaN(e)?parseInt(Xg(e).toHex(),16):e},my=function(e){return isNaN(e)?Xg(e).getAlpha():1},gy=Hg(Gg);function vy(e,t,n){t&&"string"===typeof n&&e.filter((function(e){return!e[n]})).forEach((function(e){e[n]=gy(t(e))}))}function yy(e,t){var n=e.nodes,r=e.links,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.nodeFilter,s=void 0===o?function(){return!0}:o,a=i.onLoopError,l=void 0===a?function(e){throw"Invalid DAG structure! Found cycle in node path: ".concat(e.join(" -> "),".")}:a,c={};n.forEach((function(e){return c[t(e)]={data:e,out:[],depth:-1,skip:!s(e)}})),r.forEach((function(e){var n=e.source,r=e.target,i=l(n),o=l(r);if(!c.hasOwnProperty(i))throw"Missing source node with id: ".concat(i);if(!c.hasOwnProperty(o))throw"Missing target node with id: ".concat(o);var s=c[i],a=c[o];function l(e){return"object"===Uv(e)?t(e):e}s.out.push(a)}));var u=[];h(Object.values(c));var d=Object.assign.apply(Object,[{}].concat(Qv(Object.entries(c).filter((function(e){var t=Jv(e,2),n=t[1];return!n.skip})).map((function(e){var t=Jv(e,2),n=t[0],r=t[1];return zv({},n,r.depth)})))));return d;function h(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=function(){var i=e[o];if(-1!==n.indexOf(i)){var s=[].concat(Qv(n.slice(n.indexOf(i))),[i]).map((function(e){return t(e.data)}));return u.some((function(e){return e.length===s.length&&e.every((function(e,t){return e===s[t]}))}))||(u.push(s),l(s)),"continue"}r>i.depth&&(i.depth=r,h(i.out,[].concat(Qv(n),[i]),r+(i.skip?0:1)))},o=0,s=e.length;o<s;o++)i()}}var by=window.THREE?window.THREE:{Group:Fu,Mesh:qi,MeshLambertMaterial:Ld,Color:fi,BufferGeometry:ki,BufferAttribute:yi,Matrix4:Sr,Vector3:qn,SphereGeometry:Rd,CylinderGeometry:kd,TubeGeometry:Pd,ConeGeometry:Od,Line:td,LineBasicMaterial:Xu,QuadraticBezierCurve3:Td,CubicBezierCurve3:xd,Box3:Zn},_y={graph:zp,forcelayout:jp},wy=2,xy=(new by.BufferGeometry).setAttribute?"setAttribute":"addAttribute",Sy=(new by.BufferGeometry).applyMatrix4?"applyMatrix4":"applyMatrix",Ey=Zm({props:{jsonUrl:{onChange:function(e,t){var n=this;e&&!t.fetchingJson&&(t.fetchingJson=!0,t.onLoading(),fetch(e).then((function(e){return e.json()})).then((function(e){t.fetchingJson=!1,t.onFinishLoading(e),n.graphData(e)})))},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,t){t.engineRunning=!1}},numDimensions:{default:3,onChange:function(e,t){var n=t.d3ForceLayout.force("charge");function r(e,t){e.forEach((function(e){delete e[t],delete e["v".concat(t)]}))}n&&n.strength(e>2?-60:-30),e<3&&r(t.graphData.nodes,"z"),e<2&&r(t.graphData.nodes,"y")}},dagMode:{onChange:function(e,t){!e&&"d3"===t.forceEngine&&(t.graphData.nodes||[]).forEach((function(e){return e.fx=e.fy=e.fz=void 0}))}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4},nodeId:{default:"id"},nodeVal:{default:"val"},nodeResolution:{default:8},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeVisibility:{default:!0},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},nodePositionUpdate:{triggerUpdate:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{},linkResolution:{default:6},linkCurvature:{default:0,triggerUpdate:!1},linkCurveRotation:{default:0,triggerUpdate:!1},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{triggerUpdate:!1},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},forceEngine:{default:"d3"},d3AlphaMin:{default:0},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,t){t.d3ForceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,t){t.d3ForceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,t){t.d3ForceLayout.velocityDecay(e)}},ngraphPhysics:{default:{timeStep:20,gravity:-1.2,theta:.8,springLength:30,springCoefficient:8e-4,dragCoefficient:.02}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onLoading:{default:function(){},triggerUpdate:!1},onFinishLoading:{default:function(){},triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1}},methods:{refresh:function(e){return e._flushObjects=!0,e._rerender(),this},d3Force:function(e,t,n){return void 0===n?e.d3ForceLayout.force(t):(e.d3ForceLayout.force(t,n),this)},d3ReheatSimulation:function(e){return e.d3ForceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},tickFrame:function(e){var t="ngraph"!==e.forceEngine;return e.engineRunning&&n(),r(),i(),this;function n(){++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||t&&e.d3AlphaMin>0&&e.d3ForceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.layout[t?"tick":"step"](),e.onEngineTick());var n=Km(e.nodeThreeObjectExtend);e.graphData.nodes.forEach((function(r){var i=r.__threeObj;if(i){var o=t?r:e.layout.getNodePosition(r[e.nodeId]),s=n(r);e.nodePositionUpdate&&e.nodePositionUpdate(s?i.children[0]:i,{x:o.x,y:o.y,z:o.z},r)&&!s||(i.position.x=o.x,i.position.y=o.y||0,i.position.z=o.z||0)}}));var r=Km(e.linkWidth),i=Km(e.linkCurvature),o=Km(e.linkCurveRotation),s=Km(e.linkThreeObjectExtend);function a(n){var r=t?n:e.layout.getLinkPosition(e.layout.graph.getLink(n.source,n.target).id),s=r[t?"source":"from"],a=r[t?"target":"to"];if(s&&a&&s.hasOwnProperty("x")&&a.hasOwnProperty("x")){var l=i(n);if(l){var c,u=new by.Vector3(s.x,s.y||0,s.z||0),d=new by.Vector3(a.x,a.y||0,a.z||0),h=u.distanceTo(d),f=o(n);if(h>0){var p=a.x-s.x,m=a.y-s.y||0,g=(new by.Vector3).subVectors(d,u),v=g.clone().multiplyScalar(l).cross(0!==p||0!==m?new by.Vector3(0,0,1):new by.Vector3(0,1,0)).applyAxisAngle(g.normalize(),f).add((new by.Vector3).addVectors(u,d).divideScalar(2));c=new by.QuadraticBezierCurve3(u,v,d)}else{var y=70*l,b=-f,_=b+Math.PI/2;c=new by.CubicBezierCurve3(u,new by.Vector3(y*Math.cos(_),y*Math.sin(_),0).add(u),new by.Vector3(y*Math.cos(b),y*Math.sin(b),0).add(u),d)}n.__curve=c}else n.__curve=null}}e.graphData.links.forEach((function(n){var i=n.__lineObj;if(i){var o=t?n:e.layout.getLinkPosition(e.layout.graph.getLink(n.source,n.target).id),l=o[t?"source":"from"],c=o[t?"target":"to"];if(l&&c&&l.hasOwnProperty("x")&&c.hasOwnProperty("x")){a(n);var u=s(n);if(!e.linkPositionUpdate||!e.linkPositionUpdate(u?i.children[1]:i,{start:{x:l.x,y:l.y,z:l.z},end:{x:c.x,y:c.y,z:c.z}},n)||u){var d=30,h=n.__curve,f=i.children.length?i.children[0]:i;if("Line"===f.type){if(h)f.geometry.setFromPoints(h.getPoints(d));else{var p=f.geometry.getAttribute("position");p&&p.array&&6===p.array.length||f.geometry[xy]("position",p=new by.BufferAttribute(new Float32Array(6),3)),p.array[0]=l.x,p.array[1]=l.y||0,p.array[2]=l.z||0,p.array[3]=c.x,p.array[4]=c.y||0,p.array[5]=c.z||0,p.needsUpdate=!0}f.geometry.computeBoundingSphere()}else if("Mesh"===f.type)if(h){f.geometry.type.match(/^Tube(Buffer)?Geometry$/)||(f.position.set(0,0,0),f.rotation.set(0,0,0),f.scale.set(1,1,1));var m=Math.ceil(10*r(n))/10,g=m/2,v=new by.TubeGeometry(h,d,g,e.linkResolution,!1);f.geometry.dispose(),f.geometry=v}else{if(!f.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)){var y=Math.ceil(10*r(n))/10,b=y/2,_=new by.CylinderGeometry(b,b,1,e.linkResolution,1,!1);_[Sy]((new by.Matrix4).makeTranslation(0,.5,0)),_[Sy]((new by.Matrix4).makeRotationX(Math.PI/2)),f.geometry.dispose(),f.geometry=_}var w=new by.Vector3(l.x,l.y||0,l.z||0),x=new by.Vector3(c.x,c.y||0,c.z||0),S=w.distanceTo(x);f.position.x=w.x,f.position.y=w.y,f.position.z=w.z,f.scale.z=S,f.parent.localToWorld(x),f.lookAt(x)}}}}}))}function r(){var n=Km(e.linkDirectionalArrowRelPos),r=Km(e.linkDirectionalArrowLength),i=Km(e.nodeVal);e.graphData.links.forEach((function(o){var s=o.__arrowObj;if(s){var a=t?o:e.layout.getLinkPosition(e.layout.graph.getLink(o.source,o.target).id),l=a[t?"source":"from"],c=a[t?"target":"to"];if(l&&c&&l.hasOwnProperty("x")&&c.hasOwnProperty("x")){var u=Math.cbrt(Math.max(0,i(l)||1))*e.nodeRelSize,d=Math.cbrt(Math.max(0,i(c)||1))*e.nodeRelSize,h=r(o),f=n(o),p=o.__curve?function(e){return o.__curve.getPoint(e)}:function(e){var t=function(e,t,n,r){return t[e]+(n[e]-t[e])*r||0};return{x:t("x",l,c,e),y:t("y",l,c,e),z:t("z",l,c,e)}},m=o.__curve?o.__curve.getLength():Math.sqrt(["x","y","z"].map((function(e){return Math.pow((c[e]||0)-(l[e]||0),2)})).reduce((function(e,t){return e+t}),0)),g=u+h+(m-u-d-h)*f,v=p(g/m),y=p((g-h)/m);["x","y","z"].forEach((function(e){return s.position[e]=y[e]}));var b=$v(by.Vector3,Qv(["x","y","z"].map((function(e){return v[e]}))));s.parent.localToWorld(b),s.lookAt(b)}}}))}function i(){var n=Km(e.linkDirectionalParticleSpeed);e.graphData.links.forEach((function(r){var i=r.__photonsObj&&r.__photonsObj.children,o=r.__singleHopPhotonsObj&&r.__singleHopPhotonsObj.children;if(o&&o.length||i&&i.length){var s=t?r:e.layout.getLinkPosition(e.layout.graph.getLink(r.source,r.target).id),a=s[t?"source":"from"],l=s[t?"target":"to"];if(a&&l&&a.hasOwnProperty("x")&&l.hasOwnProperty("x")){var c=n(r),u=r.__curve?function(e){return r.__curve.getPoint(e)}:function(e){var t=function(e,t,n,r){return t[e]+(n[e]-t[e])*r||0};return{x:t("x",a,l,e),y:t("y",a,l,e),z:t("z",a,l,e)}},d=[].concat(Qv(i||[]),Qv(o||[]));d.forEach((function(e,t){var n="singleHopPhotons"===e.parent.__linkThreeObjType;if(e.hasOwnProperty("__progressRatio")||(e.__progressRatio=n?0:t/i.length),e.__progressRatio+=c,e.__progressRatio>=1){if(n)return e.parent.remove(e),void dy(e);e.__progressRatio=e.__progressRatio%1}var r=e.__progressRatio,o=u(r);["x","y","z"].forEach((function(t){return e.position[t]=o[t]}))}))}}}))}},emitParticle:function(e,t){if(t&&e.graphData.links.includes(t)){if(!t.__singleHopPhotonsObj){var n=new by.Group;n.__linkThreeObjType="singleHopPhotons",t.__singleHopPhotonsObj=n,e.graphScene.add(n)}var r=Km(e.linkDirectionalParticleWidth),i=Math.ceil(10*r(t))/10/2,o=e.linkDirectionalParticleResolution,s=new by.SphereGeometry(i,o,o),a=Km(e.linkColor),l=Km(e.linkDirectionalParticleColor),c=l(t)||a(t)||"#f0f0f0",u=new by.Color(py(c)),d=3*e.linkOpacity,h=new by.MeshLambertMaterial({color:u,transparent:!0,opacity:d});t.__singleHopPhotonsObj.add(new by.Mesh(s,h))}return this},getGraphBbox:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};if(!e.initialised)return null;var n=function e(n){var r=[];if(n.geometry){n.geometry.computeBoundingBox();var i=new by.Box3;i.copy(n.geometry.boundingBox).applyMatrix4(n.matrixWorld),r.push(i)}return r.concat.apply(r,Qv((n.children||[]).filter((function(e){return!e.hasOwnProperty("__graphObjType")||"node"===e.__graphObjType&&t(e.__data)})).map(e)))}(e.graphScene);return n.length?Object.assign.apply(Object,Qv(["x","y","z"].map((function(e){return zv({},e,[Jm(n,(function(t){return t.min[e]})),Qm(n,(function(t){return t.max[e]}))])})))):null}},stateInit:function(){return{d3ForceLayout:_f().force("link",Mf()).force("charge",Fp()).force("center",Bp()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,t){t.graphScene=e},update:function(e,t){var n=function(e){return e.some((function(e){return t.hasOwnProperty(e)}))};if(e.engineRunning=!1,e.onUpdate(),null!==e.nodeAutoColorBy&&n(["nodeAutoColorBy","graphData","nodeColor"])&&vy(e.graphData.nodes,Km(e.nodeAutoColorBy),e.nodeColor),null!==e.linkAutoColorBy&&n(["linkAutoColorBy","graphData","linkColor"])&&vy(e.graphData.links,Km(e.linkAutoColorBy),e.linkColor),e._flushObjects||n(["graphData","nodeThreeObject","nodeThreeObjectExtend","nodeVal","nodeColor","nodeVisibility","nodeRelSize","nodeResolution","nodeOpacity"])){var r=Km(e.nodeThreeObject),i=Km(e.nodeThreeObjectExtend),o=Km(e.nodeVal),s=Km(e.nodeColor),a=Km(e.nodeVisibility),l={},c={};fy(e.graphData.nodes.filter(a),e.graphScene,{purge:e._flushObjects||n(["nodeThreeObject","nodeThreeObjectExtend"]),objFilter:function(e){return"node"===e.__graphObjType},createObj:function(t){var n,o=r(t),s=i(t);return o&&e.nodeThreeObject===o&&(o=o.clone()),o&&!s?n=o:(n=new by.Mesh,n.__graphDefaultObj=!0,o&&s&&n.add(o)),n.__graphObjType="node",n},updateObj:function(t,n){if(t.__graphDefaultObj){var r=o(n)||1,i=Math.cbrt(r)*e.nodeRelSize,a=e.nodeResolution;t.geometry.type.match(/^Sphere(Buffer)?Geometry$/)&&t.geometry.parameters.radius===i&&t.geometry.parameters.widthSegments===a||(l.hasOwnProperty(r)||(l[r]=new by.SphereGeometry(i,a,a)),t.geometry.dispose(),t.geometry=l[r]);var u=s(n),d=new by.Color(py(u||"#ffffaa")),h=e.nodeOpacity*my(u);"MeshLambertMaterial"===t.material.type&&t.material.color.equals(d)&&t.material.opacity===h||(c.hasOwnProperty(u)||(c[u]=new by.MeshLambertMaterial({color:d,transparent:!0,opacity:h})),t.material.dispose(),t.material=c[u])}}})}if(e._flushObjects||n(["graphData","linkThreeObject","linkThreeObjectExtend","linkMaterial","linkColor","linkWidth","linkVisibility","linkResolution","linkOpacity","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution"])){var u=Km(e.linkThreeObject),d=Km(e.linkThreeObjectExtend),h=Km(e.linkMaterial),f=Km(e.linkVisibility),p=Km(e.linkColor),m=Km(e.linkWidth),g={},v={},y={},b=e.graphData.links.filter(f);if(fy(b,e.graphScene,{objBindAttr:"__lineObj",purge:e._flushObjects||n(["linkThreeObject","linkThreeObjectExtend","linkWidth"]),objFilter:function(e){return"link"===e.__graphObjType},exitObj:function(e){var t=e.__data&&e.__data.__singleHopPhotonsObj;t&&(t.parent.remove(t),dy(t),delete e.__data.__singleHopPhotonsObj)},createObj:function(t){var n,r,i=u(t),o=d(t);if(i&&e.linkThreeObject===i&&(i=i.clone()),!i||o){var s=!!m(t);if(s)n=new by.Mesh;else{var a=new by.BufferGeometry;a[xy]("position",new by.BufferAttribute(new Float32Array(6),3)),n=new by.Line(a)}}return i?o?(r=new by.Group,r.__graphDefaultObj=!0,r.add(n),r.add(i)):r=i:(r=n,r.__graphDefaultObj=!0),r.renderOrder=10,r.__graphObjType="link",r},updateObj:function(t,n){if(t.__graphDefaultObj){var r=t.children.length?t.children[0]:t,i=Math.ceil(10*m(n))/10,o=!!i;if(o){var s=i/2,a=e.linkResolution;if(!r.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)||r.geometry.parameters.radiusTop!==s||r.geometry.parameters.radialSegments!==a){if(!g.hasOwnProperty(i)){var l=new by.CylinderGeometry(s,s,1,a,1,!1);l[Sy]((new by.Matrix4).makeTranslation(0,.5,0)),l[Sy]((new by.Matrix4).makeRotationX(Math.PI/2)),g[i]=l}r.geometry.dispose(),r.geometry=g[i]}}var c=h(n);if(c)r.material=c;else{var u=p(n),d=new by.Color(py(u||"#f0f0f0")),f=e.linkOpacity*my(u),b=o?"MeshLambertMaterial":"LineBasicMaterial";if(r.material.type!==b||!r.material.color.equals(d)||r.material.opacity!==f){var _=o?v:y;_.hasOwnProperty(u)||(_[u]=new by[b]({color:d,transparent:f<1,opacity:f,depthWrite:f>=1})),r.material.dispose(),r.material=_[u]}}}}}),e.linkDirectionalArrowLength||t.hasOwnProperty("linkDirectionalArrowLength")){var _=Km(e.linkDirectionalArrowLength),w=Km(e.linkDirectionalArrowColor);fy(b.filter(_),e.graphScene,{objBindAttr:"__arrowObj",objFilter:function(e){return"arrow"===e.__linkThreeObjType},createObj:function(){var e=new by.Mesh(void 0,new by.MeshLambertMaterial({transparent:!0}));return e.__linkThreeObjType="arrow",e},updateObj:function(t,n){var r=_(n),i=e.linkDirectionalArrowResolution;if(!t.geometry.type.match(/^Cone(Buffer)?Geometry$/)||t.geometry.parameters.height!==r||t.geometry.parameters.radialSegments!==i){var o=new by.ConeGeometry(.25*r,r,i);o.translate(0,r/2,0),o.rotateX(Math.PI/2),t.geometry.dispose(),t.geometry=o}var s=w(n)||p(n)||"#f0f0f0";t.material.color=new by.Color(py(s)),t.material.opacity=3*e.linkOpacity*my(s)}})}if(e.linkDirectionalParticles||t.hasOwnProperty("linkDirectionalParticles")){var x=Km(e.linkDirectionalParticles),S=Km(e.linkDirectionalParticleWidth),E=Km(e.linkDirectionalParticleColor),M={},T={};fy(b.filter(x),e.graphScene,{objBindAttr:"__photonsObj",objFilter:function(e){return"photons"===e.__linkThreeObjType},createObj:function(){var e=new by.Group;return e.__linkThreeObjType="photons",e},updateObj:function(t,n){var r,i=Math.round(Math.abs(x(n))),o=!!t.children.length&&t.children[0],s=Math.ceil(10*S(n))/10/2,a=e.linkDirectionalParticleResolution;o&&o.geometry.parameters.radius===s&&o.geometry.parameters.widthSegments===a?r=o.geometry:(T.hasOwnProperty(s)||(T[s]=new by.SphereGeometry(s,a,a)),r=T[s],o&&o.geometry.dispose());var l,c=E(n)||p(n)||"#f0f0f0",u=new by.Color(py(c)),d=3*e.linkOpacity;o&&o.material.color.equals(u)&&o.material.opacity===d?l=o.material:(M.hasOwnProperty(c)||(M[c]=new by.MeshLambertMaterial({color:u,transparent:!0,opacity:d})),l=M[c],o&&o.material.dispose()),fy(Qv(new Array(i)).map((function(e,t){return{idx:t}})),t,{idAccessor:function(e){return e.idx},createObj:function(){return new by.Mesh(r,l)},updateObj:function(e){e.geometry=r,e.material=l}})}})}}if(e._flushObjects=!1,n(["graphData","nodeId","linkSource","linkTarget","numDimensions","forceEngine","dagMode","dagNodeFilter","dagLevelDistance"])){e.engineRunning=!1,e.graphData.links.forEach((function(t){t.source=t[e.linkSource],t.target=t[e.linkTarget]}));var C,A="ngraph"!==e.forceEngine;if(A){(C=e.d3ForceLayout).stop().alpha(1).numDimensions(e.numDimensions).nodes(e.graphData.nodes);var k=e.d3ForceLayout.force("link");k&&k.id((function(t){return t[e.nodeId]})).links(e.graphData.links);var O=e.dagMode&&yy(e.graphData,(function(t){return t[e.nodeId]}),{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),R=Math.max.apply(Math,Qv(Object.values(O||[]))),P=e.dagLevelDistance||e.graphData.nodes.length/(R||1)*wy*(-1!==["radialin","radialout"].indexOf(e.dagMode)?.7:1);if(e.dagMode){var L=function(t,n){return function(r){return t?(O[r[e.nodeId]]-R/2)*P*(n?-1:1):void 0}},D=L(-1!==["lr","rl"].indexOf(e.dagMode),"rl"===e.dagMode),I=L(-1!==["td","bu"].indexOf(e.dagMode),"td"===e.dagMode),N=L(-1!==["zin","zout"].indexOf(e.dagMode),"zout"===e.dagMode);e.graphData.nodes.filter(e.dagNodeFilter).forEach((function(e){e.fx=D(e),e.fy=I(e),e.fz=N(e)}))}e.d3ForceLayout.force("dagRadial",-1!==["radialin","radialout"].indexOf(e.dagMode)?Vp((function(t){var n=O[t[e.nodeId]]||-1;return("radialin"===e.dagMode?R-n:n)*P})).strength((function(t){return e.dagNodeFilter(t)?1:0})):null)}else{var U=_y.graph();e.graphData.nodes.forEach((function(t){U.addNode(t[e.nodeId])})),e.graphData.links.forEach((function(e){U.addLink(e.source,e.target)})),C=_y.forcelayout(U,Nv({dimensions:e.numDimensions},e.ngraphPhysics)),C.graph=U}for(var F=0;F<e.warmupTicks&&!(A&&e.d3AlphaMin>0&&e.d3ForceLayout.alpha()<e.d3AlphaMin);F++)C[A?"tick":"step"]();e.layout=C,this.resetCountdown()}e.engineRunning=!0,e.onFinishUpdate()}});function My(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(t){jv(i,t);var r=Kv(i);function i(){var t;Fv(this,i);for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return t=r.call.apply(r,[this].concat(s)),t.__kapsuleInstance=e().apply(void 0,[].concat(Qv(n?[Xv(t)]:[]),s)),t}return Vv(i)}(t);return Object.keys(e()).forEach((function(e){return r.prototype[e]=function(){var t,n=(t=this.__kapsuleInstance)[e].apply(t,arguments);return n===this.__kapsuleInstance?this:n}})),r}var Ty=window.THREE?window.THREE:{Group:Fu},Cy=My(Ey,Ty.Group,!0);const Ay={type:"change"},ky={type:"start"},Oy={type:"end"};class Ry extends Wt{constructor(e,t){super();const n=this,r={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:i.ROTATE,MIDDLE:i.DOLLY,RIGHT:i.PAN},this.target=new qn;const o=1e-6,s=new qn;let a=1,l=r.NONE,c=r.NONE,u=0,d=0,h=0;const f=new qn,p=new bn,m=new bn,g=new qn,v=new bn,y=new bn,b=new bn,_=new bn,w=[],x={};this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,this.handleResize=function(){const e=n.domElement.getBoundingClientRect(),t=n.domElement.ownerDocument.documentElement;n.screen.left=e.left+window.pageXOffset-t.clientLeft,n.screen.top=e.top+window.pageYOffset-t.clientTop,n.screen.width=e.width,n.screen.height=e.height};const S=function(){const e=new bn;return function(t,r){return e.set((t-n.screen.left)/n.screen.width,(r-n.screen.top)/n.screen.height),e}}(),E=function(){const e=new bn;return function(t,r){return e.set((t-.5*n.screen.width-n.screen.left)/(.5*n.screen.width),(n.screen.height+2*(n.screen.top-r))/n.screen.width),e}}();function M(e){!1!==n.enabled&&(0===w.length&&(n.domElement.setPointerCapture(e.pointerId),n.domElement.addEventListener("pointermove",T),n.domElement.addEventListener("pointerup",C)),B(e),"touch"===e.pointerType?I(e):R(e))}function T(e){!1!==n.enabled&&("touch"===e.pointerType?N(e):P(e))}function C(e){!1!==n.enabled&&("touch"===e.pointerType?U(e):L(),V(e),0===w.length&&(n.domElement.releasePointerCapture(e.pointerId),n.domElement.removeEventListener("pointermove",T),n.domElement.removeEventListener("pointerup",C)))}function A(e){V(e)}function k(e){!1!==n.enabled&&(window.removeEventListener("keydown",k),c===r.NONE&&(e.code!==n.keys[r.ROTATE]||n.noRotate?e.code!==n.keys[r.ZOOM]||n.noZoom?e.code!==n.keys[r.PAN]||n.noPan||(c=r.PAN):c=r.ZOOM:c=r.ROTATE))}function O(){!1!==n.enabled&&(c=r.NONE,window.addEventListener("keydown",k))}function R(e){if(l===r.NONE)switch(e.button){case n.mouseButtons.LEFT:l=r.ROTATE;break;case n.mouseButtons.MIDDLE:l=r.ZOOM;break;case n.mouseButtons.RIGHT:l=r.PAN;break}const t=c!==r.NONE?c:l;t!==r.ROTATE||n.noRotate?t!==r.ZOOM||n.noZoom?t!==r.PAN||n.noPan||(b.copy(S(e.pageX,e.pageY)),_.copy(b)):(v.copy(S(e.pageX,e.pageY)),y.copy(v)):(m.copy(E(e.pageX,e.pageY)),p.copy(m)),n.dispatchEvent(ky)}function P(e){const t=c!==r.NONE?c:l;t!==r.ROTATE||n.noRotate?t!==r.ZOOM||n.noZoom?t!==r.PAN||n.noPan||_.copy(S(e.pageX,e.pageY)):y.copy(S(e.pageX,e.pageY)):(p.copy(m),m.copy(E(e.pageX,e.pageY)))}function L(){l=r.NONE,n.dispatchEvent(Oy)}function D(e){if(!1!==n.enabled&&!0!==n.noZoom){switch(e.preventDefault(),e.deltaMode){case 2:v.y-=.025*e.deltaY;break;case 1:v.y-=.01*e.deltaY;break;default:v.y-=25e-5*e.deltaY;break}n.dispatchEvent(ky),n.dispatchEvent(Oy)}}function I(e){switch(z(e),w.length){case 1:l=r.TOUCH_ROTATE,m.copy(E(w[0].pageX,w[0].pageY)),p.copy(m);break;default:l=r.TOUCH_ZOOM_PAN;const e=w[0].pageX-w[1].pageX,t=w[0].pageY-w[1].pageY;d=u=Math.sqrt(e*e+t*t);const n=(w[0].pageX+w[1].pageX)/2,i=(w[0].pageY+w[1].pageY)/2;b.copy(S(n,i)),_.copy(b);break}n.dispatchEvent(ky)}function N(e){switch(z(e),w.length){case 1:p.copy(m),m.copy(E(e.pageX,e.pageY));break;default:const t=j(e),n=e.pageX-t.x,r=e.pageY-t.y;d=Math.sqrt(n*n+r*r);const i=(e.pageX+t.x)/2,o=(e.pageY+t.y)/2;_.copy(S(i,o));break}}function U(e){switch(w.length){case 0:l=r.NONE;break;case 1:l=r.TOUCH_ROTATE,m.copy(E(e.pageX,e.pageY)),p.copy(m);break;case 2:l=r.TOUCH_ZOOM_PAN;for(let t=0;t<w.length;t++)if(w[t].pointerId!==e.pointerId){const e=x[w[t].pointerId];m.copy(E(e.x,e.y)),p.copy(m);break}break}n.dispatchEvent(Oy)}function F(e){!1!==n.enabled&&e.preventDefault()}function B(e){w.push(e)}function V(e){delete x[e.pointerId];for(let t=0;t<w.length;t++)if(w[t].pointerId==e.pointerId)return void w.splice(t,1)}function z(e){let t=x[e.pointerId];void 0===t&&(t=new bn,x[e.pointerId]=t),t.set(e.pageX,e.pageY)}function j(e){const t=e.pointerId===w[0].pointerId?w[1]:w[0];return x[t.pointerId]}this.rotateCamera=function(){const e=new qn,t=new $n,r=new qn,i=new qn,o=new qn,s=new qn;return function(){s.set(m.x-p.x,m.y-p.y,0);let a=s.length();a?(f.copy(n.object.position).sub(n.target),r.copy(f).normalize(),i.copy(n.object.up).normalize(),o.crossVectors(i,r).normalize(),i.setLength(m.y-p.y),o.setLength(m.x-p.x),s.copy(i.add(o)),e.crossVectors(s,f).normalize(),a*=n.rotateSpeed,t.setFromAxisAngle(e,a),f.applyQuaternion(t),n.object.up.applyQuaternion(t),g.copy(e),h=a):!n.staticMoving&&h&&(h*=Math.sqrt(1-n.dynamicDampingFactor),f.copy(n.object.position).sub(n.target),t.setFromAxisAngle(g,h),f.applyQuaternion(t),n.object.up.applyQuaternion(t)),p.copy(m)}}(),this.zoomCamera=function(){let e;l===r.TOUCH_ZOOM_PAN?(e=u/d,u=d,n.object.isPerspectiveCamera?f.multiplyScalar(e):n.object.isOrthographicCamera?(n.object.zoom=yn.clamp(n.object.zoom/e,n.minZoom,n.maxZoom),a!==n.object.zoom&&n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(e=1+(y.y-v.y)*n.zoomSpeed,1!==e&&e>0&&(n.object.isPerspectiveCamera?f.multiplyScalar(e):n.object.isOrthographicCamera?(n.object.zoom=yn.clamp(n.object.zoom/e,n.minZoom,n.maxZoom),a!==n.object.zoom&&n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),n.staticMoving?v.copy(y):v.y+=(y.y-v.y)*this.dynamicDampingFactor)},this.panCamera=function(){const e=new bn,t=new qn,r=new qn;return function(){if(e.copy(_).sub(b),e.lengthSq()){if(n.object.isOrthographicCamera){const t=(n.object.right-n.object.left)/n.object.zoom/n.domElement.clientWidth,r=(n.object.top-n.object.bottom)/n.object.zoom/n.domElement.clientWidth;e.x*=t,e.y*=r}e.multiplyScalar(f.length()*n.panSpeed),r.copy(f).cross(n.object.up).setLength(e.x),r.add(t.copy(n.object.up).setLength(e.y)),n.object.position.add(r),n.target.add(r),n.staticMoving?b.copy(_):b.add(e.subVectors(_,b).multiplyScalar(n.dynamicDampingFactor))}}}(),this.checkDistances=function(){n.noZoom&&n.noPan||(f.lengthSq()>n.maxDistance*n.maxDistance&&(n.object.position.addVectors(n.target,f.setLength(n.maxDistance)),v.copy(y)),f.lengthSq()<n.minDistance*n.minDistance&&(n.object.position.addVectors(n.target,f.setLength(n.minDistance)),v.copy(y)))},this.update=function(){f.subVectors(n.object.position,n.target),n.noRotate||n.rotateCamera(),n.noZoom||n.zoomCamera(),n.noPan||n.panCamera(),n.object.position.addVectors(n.target,f),n.object.isPerspectiveCamera?(n.checkDistances(),n.object.lookAt(n.target),s.distanceToSquared(n.object.position)>o&&(n.dispatchEvent(Ay),s.copy(n.object.position))):n.object.isOrthographicCamera?(n.object.lookAt(n.target),(s.distanceToSquared(n.object.position)>o||a!==n.object.zoom)&&(n.dispatchEvent(Ay),s.copy(n.object.position),a=n.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){l=r.NONE,c=r.NONE,n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.up.copy(n.up0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),f.subVectors(n.object.position,n.target),n.object.lookAt(n.target),n.dispatchEvent(Ay),s.copy(n.object.position),a=n.object.zoom},this.dispose=function(){n.domElement.removeEventListener("contextmenu",F),n.domElement.removeEventListener("pointerdown",M),n.domElement.removeEventListener("pointercancel",A),n.domElement.removeEventListener("wheel",D),n.domElement.removeEventListener("pointermove",T),n.domElement.removeEventListener("pointerup",C),window.removeEventListener("keydown",k),window.removeEventListener("keyup",O)},this.domElement.addEventListener("contextmenu",F),this.domElement.addEventListener("pointerdown",M),this.domElement.addEventListener("pointercancel",A),this.domElement.addEventListener("wheel",D,{passive:!1}),window.addEventListener("keydown",k),window.addEventListener("keyup",O),this.handleResize(),this.update()}}const Py={type:"change"},Ly={type:"start"},Dy={type:"end"};class Iy extends Wt{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new qn,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:i.ROTATE,MIDDLE:i.DOLLY,RIGHT:i.PAN},this.touches={ONE:o.ROTATE,TWO:o.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return l.phi},this.getAzimuthalAngle=function(){return l.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(e){e.addEventListener("keydown",re),this._domElementKeyEvents=e},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",re),this._domElementKeyEvents=null},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(Py),n.update(),s=r.NONE},this.update=function(){const t=new qn,i=(new $n).setFromUnitVectors(e.up,new qn(0,1,0)),o=i.clone().invert(),f=new qn,p=new $n,m=new qn,g=2*Math.PI;return function(){const e=n.object.position;t.copy(e).sub(n.target),t.applyQuaternion(i),l.setFromVector3(t),n.autoRotate&&s===r.NONE&&T(E()),n.enableDamping?(l.theta+=c.theta*n.dampingFactor,l.phi+=c.phi*n.dampingFactor):(l.theta+=c.theta,l.phi+=c.phi);let v=n.minAzimuthAngle,y=n.maxAzimuthAngle;return isFinite(v)&&isFinite(y)&&(v<-Math.PI?v+=g:v>Math.PI&&(v-=g),y<-Math.PI?y+=g:y>Math.PI&&(y-=g),l.theta=v<=y?Math.max(v,Math.min(y,l.theta)):l.theta>(v+y)/2?Math.max(v,l.theta):Math.min(y,l.theta)),l.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,l.phi)),l.makeSafe(),l.radius*=u,l.radius=Math.max(n.minDistance,Math.min(n.maxDistance,l.radius)),!0===n.enableDamping?n.target.addScaledVector(d,n.dampingFactor):n.target.add(d),t.setFromSpherical(l),t.applyQuaternion(o),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(c.theta*=1-n.dampingFactor,c.phi*=1-n.dampingFactor,d.multiplyScalar(1-n.dampingFactor)):(c.set(0,0,0),d.set(0,0,0)),u=1,!!(h||f.distanceToSquared(n.object.position)>a||8*(1-p.dot(n.object.quaternion))>a||m.distanceToSquared(n.target)>0)&&(n.dispatchEvent(Py),f.copy(n.object.position),p.copy(n.object.quaternion),m.copy(n.target),h=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",se),n.domElement.removeEventListener("pointerdown",K),n.domElement.removeEventListener("pointercancel",Q),n.domElement.removeEventListener("wheel",ne),n.domElement.removeEventListener("pointermove",J),n.domElement.removeEventListener("pointerup",Q),null!==n._domElementKeyEvents&&(n._domElementKeyEvents.removeEventListener("keydown",re),n._domElementKeyEvents=null)};const n=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=r.NONE;const a=1e-6,l=new Th,c=new Th;let u=1;const d=new qn;let h=!1;const f=new bn,p=new bn,m=new bn,g=new bn,v=new bn,y=new bn,b=new bn,_=new bn,w=new bn,x=[],S={};function E(){return 2*Math.PI/60/60*n.autoRotateSpeed}function M(){return Math.pow(.95,n.zoomSpeed)}function T(e){c.theta-=e}function C(e){c.phi-=e}const A=function(){const e=new qn;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),d.add(e)}}(),k=function(){const e=new qn;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),d.add(e)}}(),O=function(){const e=new qn;return function(t,r){const i=n.domElement;if(n.object.isPerspectiveCamera){const o=n.object.position;e.copy(o).sub(n.target);let s=e.length();s*=Math.tan(n.object.fov/2*Math.PI/180),A(2*t*s/i.clientHeight,n.object.matrix),k(2*r*s/i.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(A(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),k(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function R(e){n.object.isPerspectiveCamera?u/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),h=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function P(e){n.object.isPerspectiveCamera?u*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),h=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function L(e){f.set(e.clientX,e.clientY)}function D(e){b.set(e.clientX,e.clientY)}function I(e){g.set(e.clientX,e.clientY)}function N(e){p.set(e.clientX,e.clientY),m.subVectors(p,f).multiplyScalar(n.rotateSpeed);const t=n.domElement;T(2*Math.PI*m.x/t.clientHeight),C(2*Math.PI*m.y/t.clientHeight),f.copy(p),n.update()}function U(e){_.set(e.clientX,e.clientY),w.subVectors(_,b),w.y>0?R(M()):w.y<0&&P(M()),b.copy(_),n.update()}function F(e){v.set(e.clientX,e.clientY),y.subVectors(v,g).multiplyScalar(n.panSpeed),O(y.x,y.y),g.copy(v),n.update()}function B(e){e.deltaY<0?P(M()):e.deltaY>0&&R(M()),n.update()}function V(e){let t=!1;switch(e.code){case n.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?C(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):O(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?C(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):O(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?T(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):O(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?T(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):O(-n.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),n.update())}function z(){if(1===x.length)f.set(x[0].pageX,x[0].pageY);else{const e=.5*(x[0].pageX+x[1].pageX),t=.5*(x[0].pageY+x[1].pageY);f.set(e,t)}}function j(){if(1===x.length)g.set(x[0].pageX,x[0].pageY);else{const e=.5*(x[0].pageX+x[1].pageX),t=.5*(x[0].pageY+x[1].pageY);g.set(e,t)}}function H(){const e=x[0].pageX-x[1].pageX,t=x[0].pageY-x[1].pageY,n=Math.sqrt(e*e+t*t);b.set(0,n)}function W(){n.enableZoom&&H(),n.enablePan&&j()}function G(){n.enableZoom&&H(),n.enableRotate&&z()}function $(e){if(1==x.length)p.set(e.pageX,e.pageY);else{const t=ue(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);p.set(n,r)}m.subVectors(p,f).multiplyScalar(n.rotateSpeed);const t=n.domElement;T(2*Math.PI*m.x/t.clientHeight),C(2*Math.PI*m.y/t.clientHeight),f.copy(p)}function q(e){if(1===x.length)v.set(e.pageX,e.pageY);else{const t=ue(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);v.set(n,r)}y.subVectors(v,g).multiplyScalar(n.panSpeed),O(y.x,y.y),g.copy(v)}function Y(e){const t=ue(e),r=e.pageX-t.x,i=e.pageY-t.y,o=Math.sqrt(r*r+i*i);_.set(0,o),w.set(0,Math.pow(_.y/b.y,n.zoomSpeed)),R(w.y),b.copy(_)}function X(e){n.enableZoom&&Y(e),n.enablePan&&q(e)}function Z(e){n.enableZoom&&Y(e),n.enableRotate&&$(e)}function K(e){!1!==n.enabled&&(0===x.length&&(n.domElement.setPointerCapture(e.pointerId),n.domElement.addEventListener("pointermove",J),n.domElement.addEventListener("pointerup",Q)),ae(e),"touch"===e.pointerType?ie(e):ee(e))}function J(e){!1!==n.enabled&&("touch"===e.pointerType?oe(e):te(e))}function Q(e){le(e),0===x.length&&(n.domElement.releasePointerCapture(e.pointerId),n.domElement.removeEventListener("pointermove",J),n.domElement.removeEventListener("pointerup",Q)),n.dispatchEvent(Dy),s=r.NONE}function ee(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case i.DOLLY:if(!1===n.enableZoom)return;D(e),s=r.DOLLY;break;case i.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;I(e),s=r.PAN}else{if(!1===n.enableRotate)return;L(e),s=r.ROTATE}break;case i.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;L(e),s=r.ROTATE}else{if(!1===n.enablePan)return;I(e),s=r.PAN}break;default:s=r.NONE}s!==r.NONE&&n.dispatchEvent(Ly)}function te(e){switch(s){case r.ROTATE:if(!1===n.enableRotate)return;N(e);break;case r.DOLLY:if(!1===n.enableZoom)return;U(e);break;case r.PAN:if(!1===n.enablePan)return;F(e);break}}function ne(e){!1!==n.enabled&&!1!==n.enableZoom&&s===r.NONE&&(e.preventDefault(),n.dispatchEvent(Ly),B(e),n.dispatchEvent(Dy))}function re(e){!1!==n.enabled&&!1!==n.enablePan&&V(e)}function ie(e){switch(ce(e),x.length){case 1:switch(n.touches.ONE){case o.ROTATE:if(!1===n.enableRotate)return;z(),s=r.TOUCH_ROTATE;break;case o.PAN:if(!1===n.enablePan)return;j(),s=r.TOUCH_PAN;break;default:s=r.NONE}break;case 2:switch(n.touches.TWO){case o.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;W(),s=r.TOUCH_DOLLY_PAN;break;case o.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;G(),s=r.TOUCH_DOLLY_ROTATE;break;default:s=r.NONE}break;default:s=r.NONE}s!==r.NONE&&n.dispatchEvent(Ly)}function oe(e){switch(ce(e),s){case r.TOUCH_ROTATE:if(!1===n.enableRotate)return;$(e),n.update();break;case r.TOUCH_PAN:if(!1===n.enablePan)return;q(e),n.update();break;case r.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;X(e),n.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;Z(e),n.update();break;default:s=r.NONE}}function se(e){!1!==n.enabled&&e.preventDefault()}function ae(e){x.push(e)}function le(e){delete S[e.pointerId];for(let t=0;t<x.length;t++)if(x[t].pointerId==e.pointerId)return void x.splice(t,1)}function ce(e){let t=S[e.pointerId];void 0===t&&(t=new bn,S[e.pointerId]=t),t.set(e.pageX,e.pageY)}function ue(e){const t=e.pointerId===x[0].pointerId?x[1]:x[0];return S[t.pointerId]}n.domElement.addEventListener("contextmenu",se),n.domElement.addEventListener("pointerdown",K),n.domElement.addEventListener("pointercancel",Q),n.domElement.addEventListener("wheel",ne,{passive:!1}),this.update()}}const Ny={type:"change"};class Uy extends Wt{constructor(e,t){super(),this.object=e,this.domElement=t,this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1;const n=this,r=1e-6,i=new $n,o=new qn;this.tmpQuaternion=new $n,this.status=0,this.moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this.moveVector=new qn(0,0,0),this.rotationVector=new qn(0,0,0),this.keydown=function(e){if(!e.altKey){switch(e.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this.moveState.forward=1;break;case"KeyS":this.moveState.back=1;break;case"KeyA":this.moveState.left=1;break;case"KeyD":this.moveState.right=1;break;case"KeyR":this.moveState.up=1;break;case"KeyF":this.moveState.down=1;break;case"ArrowUp":this.moveState.pitchUp=1;break;case"ArrowDown":this.moveState.pitchDown=1;break;case"ArrowLeft":this.moveState.yawLeft=1;break;case"ArrowRight":this.moveState.yawRight=1;break;case"KeyQ":this.moveState.rollLeft=1;break;case"KeyE":this.moveState.rollRight=1;break}this.updateMovementVector(),this.updateRotationVector()}},this.keyup=function(e){switch(e.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this.moveState.forward=0;break;case"KeyS":this.moveState.back=0;break;case"KeyA":this.moveState.left=0;break;case"KeyD":this.moveState.right=0;break;case"KeyR":this.moveState.up=0;break;case"KeyF":this.moveState.down=0;break;case"ArrowUp":this.moveState.pitchUp=0;break;case"ArrowDown":this.moveState.pitchDown=0;break;case"ArrowLeft":this.moveState.yawLeft=0;break;case"ArrowRight":this.moveState.yawRight=0;break;case"KeyQ":this.moveState.rollLeft=0;break;case"KeyE":this.moveState.rollRight=0;break}this.updateMovementVector(),this.updateRotationVector()},this.pointerdown=function(e){if(this.dragToLook)this.status++;else{switch(e.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1;break}this.updateMovementVector()}},this.pointermove=function(e){if(!this.dragToLook||this.status>0){const t=this.getContainerDimensions(),n=t.size[0]/2,r=t.size[1]/2;this.moveState.yawLeft=-(e.pageX-t.offset[0]-n)/n,this.moveState.pitchDown=(e.pageY-t.offset[1]-r)/r,this.updateRotationVector()}},this.pointerup=function(e){if(this.dragToLook)this.status--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(e.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0;break}this.updateMovementVector()}this.updateRotationVector()},this.update=function(e){const t=e*n.movementSpeed,s=e*n.rollSpeed;n.object.translateX(n.moveVector.x*t),n.object.translateY(n.moveVector.y*t),n.object.translateZ(n.moveVector.z*t),n.tmpQuaternion.set(n.rotationVector.x*s,n.rotationVector.y*s,n.rotationVector.z*s,1).normalize(),n.object.quaternion.multiply(n.tmpQuaternion),(o.distanceToSquared(n.object.position)>r||8*(1-i.dot(n.object.quaternion))>r)&&(n.dispatchEvent(Ny),i.copy(n.object.quaternion),o.copy(n.object.position))},this.updateMovementVector=function(){const e=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-e+this.moveState.back},this.updateRotationVector=function(){this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft},this.getContainerDimensions=function(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}},this.dispose=function(){this.domElement.removeEventListener("contextmenu",Fy),this.domElement.removeEventListener("pointerdown",a),this.domElement.removeEventListener("pointermove",s),this.domElement.removeEventListener("pointerup",l),window.removeEventListener("keydown",c),window.removeEventListener("keyup",u)};const s=this.pointermove.bind(this),a=this.pointerdown.bind(this),l=this.pointerup.bind(this),c=this.keydown.bind(this),u=this.keyup.bind(this);this.domElement.addEventListener("contextmenu",Fy),this.domElement.addEventListener("pointerdown",a),this.domElement.addEventListener("pointermove",s),this.domElement.addEventListener("pointerup",l),window.addEventListener("keydown",c),window.addEventListener("keyup",u),this.updateMovementVector(),this.updateRotationVector()}}function Fy(e){e.preventDefault()}const By={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor.a *= opacity;\n\n\n\t\t}"};class Vy{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const zy=new ll(-1,1,1,-1,0,1),jy=new ki;jy.setAttribute("position",new wi([-1,3,0,-1,-1,0,3,-1,0],3)),jy.setAttribute("uv",new wi([0,2,0,0,2,0],2));class Hy{constructor(e){this._mesh=new qi(jy,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,zy)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class Wy extends Vy{constructor(e,t){super(),this.textureID=void 0!==t?t:"tDiffuse",e instanceof io?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=to.clone(e.uniforms),this.material=new io({name:void 0!==e.name?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new Hy(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class Gy extends Vy{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,n){const r=e.getContext(),i=e.state;let o,s;i.buffers.color.setMask(!1),i.buffers.depth.setMask(!1),i.buffers.color.setLocked(!0),i.buffers.depth.setLocked(!0),this.inverse?(o=0,s=1):(o=1,s=0),i.buffers.stencil.setTest(!0),i.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),i.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),i.buffers.stencil.setClear(s),i.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),i.buffers.color.setLocked(!1),i.buffers.depth.setLocked(!1),i.buffers.stencil.setLocked(!1),i.buffers.stencil.setFunc(r.EQUAL,1,4294967295),i.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),i.buffers.stencil.setLocked(!0)}}class $y extends Vy{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class qy{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),void 0===t){const n=e.getSize(new bn);this._width=n.width,this._height=n.height,t=new Hn(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:xe}),t.texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new Wy(By),this.clock=new ch}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){void 0===e&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let n=!1;for(let r=0,i=this.passes.length;r<i;r++){const t=this.passes[r];if(!1!==t.enabled){if(t.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),t.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),t.needsSwap){if(n){const t=this.renderer.getContext(),n=this.renderer.state.buffers.stencil;n.setFunc(t.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),n.setFunc(t.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==Gy&&(t instanceof Gy?n=!0:t instanceof $y&&(n=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(void 0===e){const t=this.renderer.getSize(new bn);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let i=0;i<this.passes.length;i++)this.passes[i].setSize(n,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class Yy extends Vy{constructor(e,t,n,r,i){super(),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=void 0!==i?i:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new fi}render(e,t,n){const r=e.autoClear;let i,o;e.autoClear=!1,void 0!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),i=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,i),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=o),e.autoClear=r}}function Xy(){return Xy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xy.apply(this,arguments)}function Zy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ky(e,t){return Ky=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ky(e,t)}function Jy(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Ky(e,t)}function Qy(e){return Qy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qy(e)}function eb(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function tb(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function nb(e,t,n){return nb=tb()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=Function.bind.apply(e,r),o=new i;return n&&Ky(o,n.prototype),o},nb.apply(null,arguments)}function rb(e){var t="function"===typeof Map?new Map:void 0;return rb=function(e){if(null===e||!eb(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return nb(e,arguments,Qy(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Ky(n,e)},rb(e)}var ib=function(e){function t(t){var n;return n=e.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+t+" for more information.")||this,Zy(n)}return Jy(t,e),t}(rb(Error));function ob(e){return Math.round(255*e)}function sb(e,t,n){return ob(e)+","+ob(t)+","+ob(n)}function ab(e,t,n,r){if(void 0===r&&(r=sb),0===t)return r(n,n,n);var i=(e%360+360)%360/60,o=(1-Math.abs(2*n-1))*t,s=o*(1-Math.abs(i%2-1)),a=0,l=0,c=0;i>=0&&i<1?(a=o,l=s):i>=1&&i<2?(a=s,l=o):i>=2&&i<3?(l=o,c=s):i>=3&&i<4?(l=s,c=o):i>=4&&i<5?(a=s,c=o):i>=5&&i<6&&(a=o,c=s);var u=n-o/2,d=a+u,h=l+u,f=c+u;return r(d,h,f)}var lb={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};function cb(e){if("string"!==typeof e)return e;var t=e.toLowerCase();return lb[t]?"#"+lb[t]:e}var ub=/^#[a-fA-F0-9]{6}$/,db=/^#[a-fA-F0-9]{8}$/,hb=/^#[a-fA-F0-9]{3}$/,fb=/^#[a-fA-F0-9]{4}$/,pb=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,mb=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,gb=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,vb=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i;function yb(e){if("string"!==typeof e)throw new ib(3);var t=cb(e);if(t.match(ub))return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16)};if(t.match(db)){var n=parseFloat((parseInt(""+t[7]+t[8],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16),alpha:n}}if(t.match(hb))return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16)};if(t.match(fb)){var r=parseFloat((parseInt(""+t[4]+t[4],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16),alpha:r}}var i=pb.exec(t);if(i)return{red:parseInt(""+i[1],10),green:parseInt(""+i[2],10),blue:parseInt(""+i[3],10)};var o=mb.exec(t.substring(0,50));if(o)return{red:parseInt(""+o[1],10),green:parseInt(""+o[2],10),blue:parseInt(""+o[3],10),alpha:parseFloat(""+o[4])>1?parseFloat(""+o[4])/100:parseFloat(""+o[4])};var s=gb.exec(t);if(s){var a=parseInt(""+s[1],10),l=parseInt(""+s[2],10)/100,c=parseInt(""+s[3],10)/100,u="rgb("+ab(a,l,c)+")",d=pb.exec(u);if(!d)throw new ib(4,t,u);return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10)}}var h=vb.exec(t.substring(0,50));if(h){var f=parseInt(""+h[1],10),p=parseInt(""+h[2],10)/100,m=parseInt(""+h[3],10)/100,g="rgb("+ab(f,p,m)+")",v=pb.exec(g);if(!v)throw new ib(4,t,g);return{red:parseInt(""+v[1],10),green:parseInt(""+v[2],10),blue:parseInt(""+v[3],10),alpha:parseFloat(""+h[4])>1?parseFloat(""+h[4])/100:parseFloat(""+h[4])}}throw new ib(5)}var bb=function(e){return 7===e.length&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e},_b=bb;function wb(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function xb(e,t,n){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n)return _b("#"+wb(e)+wb(t)+wb(n));if("object"===typeof e&&void 0===t&&void 0===n)return _b("#"+wb(e.red)+wb(e.green)+wb(e.blue));throw new ib(6)}function Sb(e,t,n,r){if("string"===typeof e&&"number"===typeof t){var i=yb(e);return"rgba("+i.red+","+i.green+","+i.blue+","+t+")"}if("number"===typeof e&&"number"===typeof t&&"number"===typeof n&&"number"===typeof r)return r>=1?xb(e,t,n):"rgba("+e+","+t+","+n+","+r+")";if("object"===typeof e&&void 0===t&&void 0===n&&void 0===r)return e.alpha>=1?xb(e.red,e.green,e.blue):"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")";throw new ib(7)}function Eb(e,t,n){return function(){var r=n.concat(Array.prototype.slice.call(arguments));return r.length>=t?e.apply(this,r):Eb(e,t,r)}}function Mb(e){return Eb(e,e.length,[])}function Tb(e,t,n){return Math.max(e,Math.min(t,n))}function Cb(e,t){if("transparent"===t)return t;var n=yb(t),r="number"===typeof n.alpha?n.alpha:1,i=Xy({},n,{alpha:Tb(0,1,(100*r+100*parseFloat(e))/100)});return Sb(i)}var Ab=Mb(Cb),kb=Ab;var Ob=Object.freeze({Linear:Object.freeze({None:function(e){return e},In:function(e){return this.None(e)},Out:function(e){return this.None(e)},InOut:function(e){return this.None(e)}}),Quadratic:Object.freeze({In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}}),Cubic:Object.freeze({In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}}),Quartic:Object.freeze({In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}}),Quintic:Object.freeze({In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}}),Sinusoidal:Object.freeze({In:function(e){return 1-Math.sin((1-e)*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.sin(Math.PI*(.5-e)))}}),Exponential:Object.freeze({In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}}),Circular:Object.freeze({In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}}),Elastic:Object.freeze({In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2,e<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1)}}),Back:Object.freeze({In:function(e){var t=1.70158;return 1===e?1:e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return 0===e?0:--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}}),Bounce:Object.freeze({In:function(e){return 1-Ob.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*Ob.Bounce.In(2*e):.5*Ob.Bounce.Out(2*e-1)+.5}}),generatePow:function(e){return void 0===e&&(e=4),e=e<Number.EPSILON?Number.EPSILON:e,e=e>1e4?1e4:e,{In:function(t){return Math.pow(t,e)},Out:function(t){return 1-Math.pow(1-t,e)},InOut:function(t){return t<.5?Math.pow(2*t,e)/2:(1-Math.pow(2-2*t,e))/2+.5}}}}),Rb=function(){return performance.now()},Pb=function(){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}return e.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map((function(t){return e._tweens[t]}))},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},e.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},e.prototype.update=function(e,t){void 0===e&&(e=Rb()),void 0===t&&(t=!1);var n=Object.keys(this._tweens);if(0===n.length)return!1;while(n.length>0){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var i=this._tweens[n[r]],o=!t;i&&!1===i.update(e,o)&&!t&&delete this._tweens[n[r]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},e}(),Lb={Linear:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),o=Lb.Utils.Linear;return t<0?o(e[0],e[1],r):t>1?o(e[n],e[n-1],n-r):o(e[i],e[i+1>n?n:i+1],r-i)},Bezier:function(e,t){for(var n=0,r=e.length-1,i=Math.pow,o=Lb.Utils.Bernstein,s=0;s<=r;s++)n+=i(1-t,r-s)*i(t,s)*e[s]*o(r,s);return n},CatmullRom:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),o=Lb.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(i=Math.floor(r=n*(1+t))),o(e[(i-1+n)%n],e[i],e[(i+1)%n],e[(i+2)%n],r-i)):t<0?e[0]-(o(e[0],e[0],e[1],e[1],-r)-e[0]):t>1?e[n]-(o(e[n],e[n],e[n-1],e[n-1],r-n)-e[n]):o(e[i?i-1:0],e[i],e[n<i+1?n:i+1],e[n<i+2?n:i+2],r-i)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=Lb.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:function(){var e=[1];return function(t){var n=1;if(e[t])return e[t];for(var r=t;r>1;r--)n*=r;return e[t]=n,n}}(),CatmullRom:function(e,t,n,r,i){var o=.5*(n-e),s=.5*(r-t),a=i*i,l=i*a;return(2*t-2*n+o+s)*l+(-3*t+3*n-2*o-s)*a+o*i+t}}},Db=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),Ib=new Pb,Nb=function(){function e(e,t){void 0===t&&(t=Ib),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Ob.Linear.None,this._interpolationFunction=Lb.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=Db.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.to=function(e,t){if(void 0===t&&(t=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=t,this},e.prototype.duration=function(e){return void 0===e&&(e=1e3),this._duration=e,this},e.prototype.dynamic=function(e){return void 0===e&&(e=!1),this._isDynamic=e,this},e.prototype.start=function(e,t){if(void 0===e&&(e=Rb()),void 0===t&&(t=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var n in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||t){if(this._propertiesAreSetUp=!0,!this._isDynamic){var r={};for(var i in this._valuesEnd)r[i]=this._valuesEnd[i];this._valuesEnd=r}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,t)}return this},e.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},e.prototype._setupProperties=function(e,t,n,r,i){for(var o in n){var s=e[o],a=Array.isArray(s),l=a?"array":typeof s,c=!a&&Array.isArray(n[o]);if("undefined"!==l&&"function"!==l){if(c){var u=n[o];if(0===u.length)continue;for(var d=[s],h=0,f=u.length;h<f;h+=1){var p=this._handleRelativeValue(s,u[h]);if(isNaN(p)){c=!1,console.warn("Found invalid interpolation list. Skipping.");break}d.push(p)}c&&(n[o]=d)}if("object"!==l&&!a||!s||c)("undefined"===typeof t[o]||i)&&(t[o]=s),a||(t[o]*=1),r[o]=c?n[o].slice().reverse():t[o]||0;else{t[o]=a?[]:{};var m=s;for(var g in m)t[o][g]=m[g];r[o]=a?[]:{};u=n[o];if(!this._isDynamic){var v={};for(var g in u)v[g]=u[g];n[o]=u=v}this._setupProperties(m,t[o],u,r[o],i)}}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},e.prototype.pause=function(e){return void 0===e&&(e=Rb()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this)),this},e.prototype.resume=function(e){return void 0===e&&(e=Rb()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},e.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},e.prototype.group=function(e){return void 0===e&&(e=Ib),this._group=e,this},e.prototype.delay=function(e){return void 0===e&&(e=0),this._delayTime=e,this},e.prototype.repeat=function(e){return void 0===e&&(e=0),this._initialRepeat=e,this._repeat=e,this},e.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},e.prototype.yoyo=function(e){return void 0===e&&(e=!1),this._yoyo=e,this},e.prototype.easing=function(e){return void 0===e&&(e=Ob.Linear.None),this._easingFunction=e,this},e.prototype.interpolation=function(e){return void 0===e&&(e=Lb.Linear),this._interpolationFunction=e,this},e.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},e.prototype.onStart=function(e){return this._onStartCallback=e,this},e.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},e.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},e.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},e.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},e.prototype.onStop=function(e){return this._onStopCallback=e,this},e.prototype.update=function(e,t){if(void 0===e&&(e=Rb()),void 0===t&&(t=!0),this._isPaused)return!0;var n,r,i=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>i)return!1;t&&this.start(e,!0)}if(this._goToEnd=!1,e<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),!1===this._onEveryStartCallbackFired&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0),r=(e-this._startTime)/this._duration,r=0===this._duration||r>1?1:r;var o=this._easingFunction(r);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,o),this._onUpdateCallback&&this._onUpdateCallback(this._object,r),1===r){if(this._repeat>0){for(n in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!==typeof this._valuesEnd[n]||(this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(this._valuesEnd[n])),this._yoyo&&this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,a=this._chainedTweens.length;s<a;s++)this._chainedTweens[s].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(e,t,n,r){for(var i in n)if(void 0!==t[i]){var o=t[i]||0,s=n[i],a=Array.isArray(e[i]),l=Array.isArray(s),c=!a&&l;c?e[i]=this._interpolationFunction(s,r):"object"===typeof s&&s?this._updateProperties(e[i],o,s,r):(s=this._handleRelativeValue(o,s),"number"===typeof s&&(e[i]=o+(s-o)*r))}},e.prototype._handleRelativeValue=function(e,t){return"string"!==typeof t?t:"+"===t.charAt(0)||"-"===t.charAt(0)?e+parseFloat(t):parseFloat(t)},e.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],n=this._valuesEnd[e];this._valuesStartRepeat[e]="string"===typeof n?this._valuesStartRepeat[e]+parseFloat(n):this._valuesEnd[e],this._valuesEnd[e]=t},e}(),Ub="20.0.3",Fb=Db.nextId,Bb=Ib,Vb=Bb.getAll.bind(Bb),zb=Bb.removeAll.bind(Bb),jb=Bb.add.bind(Bb),Hb=Bb.remove.bind(Bb),Wb=Bb.update.bind(Bb),Gb={Easing:Ob,Group:Pb,Interpolation:Lb,now:Rb,Sequence:Db,nextId:Fb,Tween:Nb,VERSION:Ub,getAll:Vb,removeAll:zb,add:jb,remove:Hb,update:Wb};function $b(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}var qb=".scene-nav-info {\n  bottom: 5px;\n  width: 100%;\n  text-align: center;\n  color: slategrey;\n  opacity: 0.7;\n  font-size: 10px;\n}\n\n.scene-tooltip {\n  top: 0;\n  color: lavender;\n  font-size: 15px;\n}\n\n.scene-nav-info, .scene-tooltip {\n  position: absolute;\n  font-family: sans-serif;\n  pointer-events: none;\n}\n\n.scene-container canvas:focus {\n  outline: none;\n}";function Yb(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function Xb(e,t,n){return t=s_(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zb(e,t){return Qb(e)||Yb(e,t)||t_(e,t)||i_()}function Kb(e){return Jb(e)||e_(e)||t_(e)||r_()}function Jb(e){if(Array.isArray(e))return n_(e)}function Qb(e){if(Array.isArray(e))return e}function e_(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function t_(e,t){if(e){if("string"===typeof e)return n_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?n_(e,t):void 0}}function n_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function r_(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i_(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o_(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function s_(e){var t=o_(e,"string");return"symbol"===typeof t?t:String(t)}$b(qb);var a_=window.THREE?window.THREE:{WebGLRenderer:$u,Scene:Yu,PerspectiveCamera:so,Raycaster:Sh,SRGBColorSpace:Tt,TextureLoader:eh,Vector2:bn,Vector3:qn,Box3:Zn,Color:fi,Mesh:qi,SphereGeometry:Rd,MeshBasicMaterial:mi,BackSide:f,EventDispatcher:Wt,MOUSE:i,Quaternion:$n,Spherical:Th,Clock:ch},l_=Zm({props:{width:{default:window.innerWidth,onChange:function(e,t,n){isNaN(e)&&(t.width=n)}},height:{default:window.innerHeight,onChange:function(e,t,n){isNaN(e)&&(t.height=n)}},backgroundColor:{default:"#000011"},backgroundImageUrl:{},onBackgroundImageLoaded:{},showNavInfo:{default:!0},skyRadius:{default:5e4},objects:{default:[]},enablePointerInteraction:{default:!0,onChange:function(e,t){t.hoverObj=null,t.toolTipElem&&(t.toolTipElem.innerHTML="")},triggerUpdate:!1},lineHoverPrecision:{default:1,triggerUpdate:!1},hoverOrderComparator:{default:function(){return-1},triggerUpdate:!1},hoverFilter:{default:function(){return!0},triggerUpdate:!1},tooltipContent:{triggerUpdate:!1},hoverDuringDrag:{default:!1,triggerUpdate:!1},clickAfterDrag:{default:!1,triggerUpdate:!1},onHover:{default:function(){},triggerUpdate:!1},onClick:{default:function(){},triggerUpdate:!1},onRightClick:{triggerUpdate:!1}},methods:{tick:function(e){if(e.initialised){if(e.controls.update&&e.controls.update(e.clock.getDelta()),e.postProcessingComposer?e.postProcessingComposer.render():e.renderer.render(e.scene,e.camera),e.extraRenderers.forEach((function(t){return t.render(e.scene,e.camera)})),e.enablePointerInteraction){var t=null;if(e.hoverDuringDrag||!e.isPointerDragging){var n=this.intersectingObjects(e.pointerPos.x,e.pointerPos.y).filter((function(t){return e.hoverFilter(t.object)})).sort((function(t,n){return e.hoverOrderComparator(t.object,n.object)})),r=n.length?n[0]:null;t=r?r.object:null,e.intersectionPoint=r?r.point:null}t!==e.hoverObj&&(e.onHover(t,e.hoverObj),e.toolTipElem.innerHTML=t&&Km(e.tooltipContent)(t)||"",e.hoverObj=t)}Gb.update()}return this},getPointerPos:function(e){var t=e.pointerPos,n=t.x,r=t.y;return{x:n,y:r}},cameraPosition:function(e,t,n,r){var i=e.camera;if(t&&e.initialised){var o=t,s=n||{x:0,y:0,z:0};if(r){var a=Object.assign({},i.position),l=d();new Gb.Tween(a).to(o,r).easing(Gb.Easing.Quadratic.Out).onUpdate(c).start(),new Gb.Tween(l).to(s,r/3).easing(Gb.Easing.Quadratic.Out).onUpdate(u).start()}else c(o),u(s);return this}return Object.assign({},i.position,{lookAt:d()});function c(e){var t=e.x,n=e.y,r=e.z;void 0!==t&&(i.position.x=t),void 0!==n&&(i.position.y=n),void 0!==r&&(i.position.z=r)}function u(t){var n=new a_.Vector3(t.x,t.y,t.z);e.controls.target?e.controls.target=n:i.lookAt(n)}function d(){return Object.assign(new a_.Vector3(0,0,-1e3).applyQuaternion(i.quaternion).add(i.position))}},zoomToFit:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];return this.fitToBbox(this.getBbox.apply(this,i),t,n)},fitToBbox:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,i=e.camera;if(t){var o=new a_.Vector3(0,0,0),s=2*Math.max.apply(Math,Kb(Object.entries(t).map((function(e){var t=Zb(e,2),n=t[0],r=t[1];return Math.max.apply(Math,Kb(r.map((function(e){return Math.abs(o[n]-e)}))))})))),a=(1-2*r/e.height)*i.fov,l=s/Math.atan(a*Math.PI/180),c=l/i.aspect,u=Math.max(l,c);if(u>0){var d=o.clone().sub(i.position).normalize().multiplyScalar(-u);this.cameraPosition(d,o,n)}}return this},getBbox:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},n=new a_.Box3(new a_.Vector3(0,0,0),new a_.Vector3(0,0,0)),r=e.objects.filter(t);return r.length?(r.forEach((function(e){return n.expandByObject(e)})),Object.assign.apply(Object,Kb(["x","y","z"].map((function(e){return Xb({},e,[n.min[e],n.max[e]])}))))):null},getScreenCoords:function(e,t,n,r){var i=new a_.Vector3(t,n,r);return i.project(this.camera()),{x:(i.x+1)*e.width/2,y:-(i.y-1)*e.height/2}},getSceneCoords:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=new a_.Vector2(t/e.width*2-1,-n/e.height*2+1),o=new a_.Raycaster;return o.setFromCamera(i,e.camera),Object.assign({},o.ray.at(r,new a_.Vector3))},intersectingObjects:function(e,t,n){var r=new a_.Vector2(t/e.width*2-1,-n/e.height*2+1),i=new a_.Raycaster;return i.params.Line.threshold=e.lineHoverPrecision,i.setFromCamera(r,e.camera),i.intersectObjects(e.objects,!0)},renderer:function(e){return e.renderer},scene:function(e){return e.scene},camera:function(e){return e.camera},postProcessingComposer:function(e){return e.postProcessingComposer},controls:function(e){return e.controls},tbControls:function(e){return e.controls}},stateInit:function(){return{scene:new a_.Scene,camera:new a_.PerspectiveCamera,clock:new a_.Clock}},init:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.controlType,i=void 0===r?"trackball":r,o=n.rendererConfig,s=void 0===o?{}:o,a=n.extraRenderers,l=void 0===a?[]:a,c=n.waitForLoadComplete,u=void 0===c||c;e.innerHTML="",e.appendChild(t.container=document.createElement("div")),t.container.className="scene-container",t.container.style.position="relative",t.container.appendChild(t.navInfo=document.createElement("div")),t.navInfo.className="scene-nav-info",t.navInfo.textContent={orbit:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",trackball:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",fly:"WASD: move, R|F: up | down, Q|E: roll, up|down: pitch, left|right: yaw"}[i]||"",t.navInfo.style.display=t.showNavInfo?null:"none",t.toolTipElem=document.createElement("div"),t.toolTipElem.classList.add("scene-tooltip"),t.container.appendChild(t.toolTipElem),t.pointerPos=new a_.Vector2,t.pointerPos.x=-2,t.pointerPos.y=-2,["pointermove","pointerdown"].forEach((function(e){return t.container.addEventListener(e,(function(n){if("pointerdown"===e&&(t.isPointerPressed=!0),!t.isPointerDragging&&"pointermove"===n.type&&(n.pressure>0||t.isPointerPressed)&&("touch"!==n.pointerType||void 0===n.movementX||[n.movementX,n.movementY].some((function(e){return Math.abs(e)>1})))&&(t.isPointerDragging=!0),t.enablePointerInteraction){var r=i(t.container);t.pointerPos.x=n.pageX-r.left,t.pointerPos.y=n.pageY-r.top,t.toolTipElem.style.top="".concat(t.pointerPos.y,"px"),t.toolTipElem.style.left="".concat(t.pointerPos.x,"px"),t.toolTipElem.style.transform="translate(-".concat(t.pointerPos.x/t.width*100,"%, ").concat(t.height-t.pointerPos.y<100?"calc(-100% - 8px)":"21px",")")}function i(e){var t=e.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop;return{top:t.top+r,left:t.left+n}}}),{passive:!0})})),t.container.addEventListener("pointerup",(function(e){t.isPointerPressed=!1,t.isPointerDragging&&(t.isPointerDragging=!1,!t.clickAfterDrag)||requestAnimationFrame((function(){0===e.button&&t.onClick(t.hoverObj||null,e,t.intersectionPoint),2===e.button&&t.onRightClick&&t.onRightClick(t.hoverObj||null,e,t.intersectionPoint)}))}),{passive:!0,capture:!0}),t.container.addEventListener("contextmenu",(function(e){t.onRightClick&&e.preventDefault()})),t.renderer=new a_.WebGLRenderer(Object.assign({antialias:!0,alpha:!0},s)),t.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio)),t.container.appendChild(t.renderer.domElement),t.extraRenderers=l,t.extraRenderers.forEach((function(e){e.domElement.style.position="absolute",e.domElement.style.top="0px",e.domElement.style.pointerEvents="none",t.container.appendChild(e.domElement)})),t.postProcessingComposer=new qy(t.renderer),t.postProcessingComposer.addPass(new Yy(t.scene,t.camera)),t.controls=new{trackball:Ry,orbit:Iy,fly:Uy}[i](t.camera,t.renderer.domElement),"fly"===i&&(t.controls.movementSpeed=300,t.controls.rollSpeed=Math.PI/6,t.controls.dragToLook=!0),"trackball"!==i&&"orbit"!==i||(t.controls.minDistance=.1,t.controls.maxDistance=t.skyRadius,t.controls.addEventListener("start",(function(){t.controlsEngaged=!0})),t.controls.addEventListener("change",(function(){t.controlsEngaged&&(t.controlsDragging=!0)})),t.controls.addEventListener("end",(function(){t.controlsEngaged=!1,t.controlsDragging=!1}))),[t.renderer,t.postProcessingComposer].concat(Kb(t.extraRenderers)).forEach((function(e){return e.setSize(t.width,t.height)})),t.camera.aspect=t.width/t.height,t.camera.updateProjectionMatrix(),t.camera.position.z=1e3,t.scene.add(t.skysphere=new a_.Mesh),t.skysphere.visible=!1,t.loadComplete=t.scene.visible=!u,window.scene=t.scene},update:function(e,t){if(e.width&&e.height&&(t.hasOwnProperty("width")||t.hasOwnProperty("height"))&&(e.container.style.width="".concat(e.width,"px"),e.container.style.height="".concat(e.height,"px"),[e.renderer,e.postProcessingComposer].concat(Kb(e.extraRenderers)).forEach((function(t){return t.setSize(e.width,e.height)})),e.camera.aspect=e.width/e.height,e.camera.updateProjectionMatrix()),t.hasOwnProperty("skyRadius")&&e.skyRadius&&(e.controls.hasOwnProperty("maxDistance")&&t.skyRadius&&(e.controls.maxDistance=Math.min(e.controls.maxDistance,e.skyRadius)),e.camera.far=2.5*e.skyRadius,e.camera.updateProjectionMatrix(),e.skysphere.geometry=new a_.SphereGeometry(e.skyRadius)),t.hasOwnProperty("backgroundColor")){var n=yb(e.backgroundColor).alpha;void 0===n&&(n=1),e.renderer.setClearColor(new a_.Color(kb(1,e.backgroundColor)),n)}function r(){e.loadComplete=e.scene.visible=!0}t.hasOwnProperty("backgroundImageUrl")&&(e.backgroundImageUrl?(new a_.TextureLoader).load(e.backgroundImageUrl,(function(t){t.colorSpace=a_.SRGBColorSpace,e.skysphere.material=new a_.MeshBasicMaterial({map:t,side:a_.BackSide}),e.skysphere.visible=!0,e.onBackgroundImageLoaded&&setTimeout(e.onBackgroundImageLoaded),!e.loadComplete&&r()})):(e.skysphere.visible=!1,e.skysphere.material.map=null,!e.loadComplete&&r())),t.hasOwnProperty("showNavInfo")&&(e.navInfo.style.display=e.showNavInfo?null:"none"),t.hasOwnProperty("objects")&&((t.objects||[]).forEach((function(t){return e.scene.remove(t)})),e.objects.forEach((function(t){return e.scene.add(t)})))}});function c_(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}var u_=".graph-info-msg {\n  top: 50%;\n  width: 100%;\n  text-align: center;\n  color: lavender;\n  opacity: 0.7;\n  font-size: 22px;\n  position: absolute;\n  font-family: Sans-serif;\n}\n\n.scene-container .clickable {\n  cursor: pointer;\n}\n\n.scene-container .grabbable {\n  cursor: move;\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n\n.scene-container .grabbable:active {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n}";function d_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d_(Object(n),!0).forEach((function(t){f_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f_(e,t,n){return t=w_(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p_(e){return m_(e)||g_(e)||v_(e)||b_()}function m_(e){if(Array.isArray(e))return y_(e)}function g_(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function v_(e,t){if(e){if("string"===typeof e)return y_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y_(e,t):void 0}}function y_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b_(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function __(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function w_(e){var t=__(e,"string");return"symbol"===typeof t?t:String(t)}function x_(e,t){var n=new t;return{linkProp:function(t){return{default:n[t](),onChange:function(n,r){r[e][t](n)},triggerUpdate:!1}},linkMethod:function(t){return function(n){for(var r=n[e],i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];var a=r[t].apply(r,o);return a===r?this:a}}}}c_(u_);var S_=window.THREE?window.THREE:{AmbientLight:lh,DirectionalLight:ah,Vector3:qn},E_=170,M_=x_("forceGraph",Cy),T_=Object.assign.apply(Object,p_(["jsonUrl","graphData","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeColor","nodeAutoColorBy","nodeOpacity","nodeVisibility","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","forceEngine","d3AlphaDecay","d3VelocityDecay","d3AlphaMin","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map((function(e){return f_({},e,M_.linkProp(e))})))),C_=Object.assign.apply(Object,p_(["refresh","getGraphBbox","d3Force","d3ReheatSimulation","emitParticle"].map((function(e){return f_({},e,M_.linkMethod(e))})))),A_=x_("renderObjs",l_),k_=Object.assign.apply(Object,p_(["width","height","backgroundColor","showNavInfo","enablePointerInteraction"].map((function(e){return f_({},e,A_.linkProp(e))})))),O_=Object.assign.apply(Object,p_(["cameraPosition","postProcessingComposer"].map((function(e){return f_({},e,A_.linkMethod(e))}))).concat([{graph2ScreenCoords:A_.linkMethod("getScreenCoords"),screen2GraphCoords:A_.linkMethod("getSceneCoords")}])),R_=Zm({props:h_(h_({nodeLabel:{default:"name",triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:1,onChange:function(e,t){return t.renderObjs.lineHoverPrecision(e)},triggerUpdate:!1},enableNavigationControls:{default:!0,onChange:function(e,t){var n=t.renderObjs.controls();n&&(n.enabled=e,e&&n.domElement&&n.domElement.dispatchEvent(new PointerEvent("pointerup")))},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1}},T_),k_),methods:h_(h_({zoomToFit:function(e,t,n){for(var r,i=arguments.length,o=new Array(i>3?i-3:0),s=3;s<i;s++)o[s-3]=arguments[s];return e.renderObjs.fitToBbox((r=e.forceGraph).getGraphBbox.apply(r,o),t,n),this},pauseAnimation:function(e){return null!==e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return null===e.animationFrameRequestId&&this._animationCycle(),this},_animationCycle:function(e){e.enablePointerInteraction&&(this.renderer().domElement.style.cursor=null),e.forceGraph.tickFrame(),e.renderObjs.tick(),e.animationFrameRequestId=requestAnimationFrame(this._animationCycle)},scene:function(e){return e.renderObjs.scene()},camera:function(e){return e.renderObjs.camera()},renderer:function(e){return e.renderObjs.renderer()},controls:function(e){return e.renderObjs.controls()},tbControls:function(e){return e.renderObjs.tbControls()},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},C_),O_),stateInit:function(e){var t=e.controlType,n=e.rendererConfig,r=e.extraRenderers;return{forceGraph:new Cy,renderObjs:l_({controlType:t,rendererConfig:n,extraRenderers:r})}},init:function(e,t){e.innerHTML="",e.appendChild(t.container=document.createElement("div")),t.container.style.position="relative";var n=document.createElement("div");t.container.appendChild(n),t.renderObjs(n);var r,i=t.renderObjs.camera(),o=t.renderObjs.renderer(),s=t.renderObjs.controls();s.enabled=!!t.enableNavigationControls,t.lastSetCameraZ=i.position.z,t.container.appendChild(r=document.createElement("div")),r.className="graph-info-msg",r.textContent="",t.forceGraph.onLoading((function(){r.textContent="Loading..."})).onFinishLoading((function(){r.textContent=""})).onUpdate((function(){t.graphData=t.forceGraph.graphData(),0===i.position.x&&0===i.position.y&&i.position.z===t.lastSetCameraZ&&t.graphData.nodes.length&&(i.lookAt(t.forceGraph.position),t.lastSetCameraZ=i.position.z=Math.cbrt(t.graphData.nodes.length)*E_)})).onFinishUpdate((function(){if(t._dragControls){var e=t.graphData.nodes.find((function(e){return e.__initialFixedPos&&!e.__disposeControlsAfterDrag}));e?e.__disposeControlsAfterDrag=!0:t._dragControls.dispose(),t._dragControls=void 0}if(t.enableNodeDrag&&t.enablePointerInteraction&&"d3"===t.forceEngine){var n=t._dragControls=new Dh(t.graphData.nodes.map((function(e){return e.__threeObj})).filter((function(e){return e})),i,o.domElement);n.addEventListener("dragstart",(function(e){s.enabled=!1,e.object.__initialPos=e.object.position.clone(),e.object.__prevPos=e.object.position.clone();var t=P_(e.object).__data;!t.__initialFixedPos&&(t.__initialFixedPos={fx:t.fx,fy:t.fy,fz:t.fz}),!t.__initialPos&&(t.__initialPos={x:t.x,y:t.y,z:t.z}),["x","y","z"].forEach((function(e){return t["f".concat(e)]=t[e]})),o.domElement.classList.add("grabbable")})),n.addEventListener("drag",(function(e){var n=P_(e.object);if(!e.object.hasOwnProperty("__graphObjType")){var r=e.object.__initialPos,i=e.object.__prevPos,o=e.object.position;n.position.add(o.clone().sub(i)),i.copy(o),o.copy(r)}var s=n.__data,a=n.position,l={x:a.x-s.x,y:a.y-s.y,z:a.z-s.z};["x","y","z"].forEach((function(e){return s["f".concat(e)]=s[e]=a[e]})),t.forceGraph.d3AlphaTarget(.3).resetCountdown(),s.__dragged=!0,t.onNodeDrag(s,l)})),n.addEventListener("dragend",(function(e){delete e.object.__initialPos,delete e.object.__prevPos;var r=P_(e.object).__data;r.__disposeControlsAfterDrag&&(n.dispose(),delete r.__disposeControlsAfterDrag);var i=r.__initialFixedPos,a=r.__initialPos,l={x:a.x-r.x,y:a.y-r.y,z:a.z-r.z};i&&(["x","y","z"].forEach((function(e){var t="f".concat(e);void 0===i[t]&&delete r[t]})),delete r.__initialFixedPos,delete r.__initialPos,r.__dragged&&(delete r.__dragged,t.onNodeDragEnd(r,l))),t.forceGraph.d3AlphaTarget(0).resetCountdown(),t.enableNavigationControls&&(s.enabled=!0,s.domElement&&s.domElement.ownerDocument&&s.domElement.ownerDocument.dispatchEvent(new PointerEvent("pointerup",{pointerType:"touch"}))),o.domElement.classList.remove("grabbable")}))}})),t.renderObjs.objects([new S_.AmbientLight(13421772),new S_.DirectionalLight(16777215,.6),t.forceGraph]).hoverOrderComparator((function(e,t){var n=P_(e);if(!n)return 1;var r=P_(t);if(!r)return-1;var i=function(e){return"node"===e.__graphObjType};return i(r)-i(n)})).tooltipContent((function(e){var n=P_(e);return n&&Km(t["".concat(n.__graphObjType,"Label")])(n.__data)||""})).hoverDuringDrag(!1).onHover((function(e){var n=P_(e);if(n!==t.hoverObj){var r=t.hoverObj?t.hoverObj.__graphObjType:null,i=t.hoverObj?t.hoverObj.__data:null,s=n?n.__graphObjType:null,a=n?n.__data:null;if(r&&r!==s){var l=t["on".concat("node"===r?"Node":"Link","Hover")];l&&l(null,i)}if(s){var c=t["on".concat("node"===s?"Node":"Link","Hover")];c&&c(a,r===s?i:null)}o.domElement.classList[n&&t["on".concat("node"===s?"Node":"Link","Click")]||!n&&t.onBackgroundClick?"add":"remove"]("clickable"),t.hoverObj=n}})).clickAfterDrag(!1).onClick((function(e,n){var r=P_(e);if(r){var i=t["on".concat("node"===r.__graphObjType?"Node":"Link","Click")];i&&i(r.__data,n)}else t.onBackgroundClick&&t.onBackgroundClick(n)})).onRightClick((function(e,n){var r=P_(e);if(r){var i=t["on".concat("node"===r.__graphObjType?"Node":"Link","RightClick")];i&&i(r.__data,n)}else t.onBackgroundRightClick&&t.onBackgroundRightClick(n)})),this._animationCycle()}});function P_(e){var t=e;while(t&&!t.hasOwnProperty("__graphObjType"))t=t.parent;return t}},1088:function(e,t,n){"use strict";n.d(t,{Ui:function(){return En}});n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315),n(7658),n(1703),n(2801);var r=n(7974);const i=e=>e.toLowerCase(),o=/^\s*/g,s=e=>e.replace(o,""),a=/([A-Z])/g,l=(e,t)=>s(e.replace(a,(e=>`${t}${i(e)}`))),c=e=>{const t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=t.codePointAt(i);return r},u="undefined"!==typeof TextEncoder?new TextEncoder:null,d=e=>u.encode(e),h=u?d:c;let f="undefined"===typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});f&&1===f.decode(new Uint8Array).length&&(f=null);const p=()=>new Map,m=e=>void 0===e?null:e;class g{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}}let v=new g,y=!0;try{"undefined"!==typeof localStorage&&(v=localStorage,y=!1)}catch(Mn){}const b=v,_=(e,t)=>t.includes(e),w="undefined"!==typeof process&&process.release&&/node|io\.js/.test(process.release.name);let x;"undefined"!==typeof navigator&&/Mac/.test(navigator.platform);const S=()=>{if(void 0===x)if(w){x=p();const e=process.argv;let t=null;for(let n=0;n<e.length;n++){const r=e[n];"-"===r[0]?(null!==t&&x.set(t,""),t=r):null!==t&&(x.set(t,r),t=null)}null!==t&&x.set(t,"")}else"object"===typeof location?(x=p(),(location.search||"?").slice(1).split("&").forEach((e=>{if(0!==e.length){const[t,n]=e.split("=");x.set(`--${l(t,"-")}`,n),x.set(`-${l(t,"-")}`,n)}}))):x=p();return x},E=e=>S().has(e),M=e=>m(w?{NODE_ENV:"production",BASE_URL:"/noosld/"}[e.toUpperCase()]:b.getItem(e)),T=e=>E("--"+e)||null!==M(e);T("production");const C=w&&_({NODE_ENV:"production",BASE_URL:"/noosld/"}.FORCE_COLOR,["true","1","2"]);!E("no-colors")&&(!w||process.stdout.isTTY||C)&&(!w||E("color")||C||null!==M("COLORTERM")||(M("TERM")||"").includes("color"));const A=128,k=127,O=Math.floor,R=(e,t)=>e<t?e:t,P=(e,t)=>e>t?e:t,L=Number.MAX_SAFE_INTEGER,D=e=>new Error(e),I=D("Unexpected end of array"),N=D("Integer out of Range"),U=(e,t)=>{const n=W(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n},F=e=>U(e,V(e)),B=e=>e.arr[e.pos++],V=e=>{let t=0,n=1;const r=e.arr.length;while(e.pos<r){const r=e.arr[e.pos++];if(t+=(r&k)*n,n*=128,r<A)return t;if(t>L)throw N}throw I},z=e=>{let t=V(e);if(0===t)return"";{let n=String.fromCodePoint(B(e));if(--t<100)while(t--)n+=String.fromCodePoint(B(e));else while(t>0){const r=t<1e4?t:1e4,i=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,i),t-=r}return decodeURIComponent(escape(n))}},j=e=>f.decode(F(e)),H=f?j:z,W=(e,t,n)=>new Uint8Array(e,t,n),G=(e,t)=>{const n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*n),e.cpos=0),e.cbuf[e.cpos++]=t},$=(e,t)=>{while(t>k)G(e,A|k&t),t=O(t/128);G(e,k&t)},q=new Uint8Array(3e4),Y=q.length/3,X=(e,t)=>{if(t.length<Y){const n=u.encodeInto(t,q).written||0;$(e,n);for(let t=0;t<n;t++)G(e,q[t])}else Q(e,h(t))},Z=(e,t)=>{const n=unescape(encodeURIComponent(t)),r=n.length;$(e,r);for(let i=0;i<r;i++)G(e,n.codePointAt(i))},K=u&&u.encodeInto?X:Z,J=(e,t)=>{const n=e.cbuf.length,r=e.cpos,i=R(n-r,t.length),o=t.length-i;e.cbuf.set(t.subarray(0,i),r),e.cpos+=i,o>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(P(2*n,o)),e.cbuf.set(t.subarray(i)),e.cpos=o)},Q=(e,t)=>{$(e,t.byteLength),J(e,t)};var ee;(function(e){e[e["Token"]=0]="Token",e[e["PermissionDenied"]=1]="PermissionDenied",e[e["Authenticated"]=2]="Authenticated"})(ee||(ee={}));const te=(e,t)=>{$(e,ee.Token),K(e,t)},ne=(e,t,n)=>{switch(V(e)){case ee.PermissionDenied:t(H(e));break;case ee.Authenticated:n(H(e));break}},re={code:1009,reason:"Message Too Big"},ie={code:4401,reason:"Unauthorized"},oe={code:4403,reason:"Forbidden"},se=e=>Array.from(e.entries()).map((([e,t])=>({clientId:e,...t})));var ae;function le(e){return e||(e={}),{delay:void 0===e.delay?200:e.delay,initialDelay:void 0===e.initialDelay?0:e.initialDelay,minDelay:void 0===e.minDelay?0:e.minDelay,maxDelay:void 0===e.maxDelay?0:e.maxDelay,factor:void 0===e.factor?0:e.factor,maxAttempts:void 0===e.maxAttempts?3:e.maxAttempts,timeout:void 0===e.timeout?0:e.timeout,jitter:!0===e.jitter,handleError:void 0===e.handleError?null:e.handleError,handleTimeout:void 0===e.handleTimeout?null:e.handleTimeout,beforeAttempt:void 0===e.beforeAttempt?null:e.beforeAttempt,calculateDelay:void 0===e.calculateDelay?null:e.calculateDelay}}async function ce(e){return new Promise(((t,n)=>{setTimeout(t,e)}))}function ue(e,t){let n=t.delay;if(0===n)return 0;if(t.factor&&(n*=Math.pow(t.factor,e.attemptNum-1),0!==t.maxDelay&&(n=Math.min(n,t.maxDelay))),t.jitter){const e=Math.ceil(t.minDelay),r=Math.floor(n);n=Math.floor(Math.random()*(r-e+1))+e}return Math.round(n)}async function de(e,t){const n=le(t);for(const a of["delay","initialDelay","minDelay","maxDelay","maxAttempts","timeout"]){const e=n[a];if(!Number.isInteger(e)||e<0)throw new Error(`Value for ${a} must be an integer greater than or equal to 0`)}if(n.factor.constructor!==Number||n.factor<0)throw new Error("Value for factor must be a number greater than or equal to 0");if(n.delay<n.minDelay)throw new Error(`delay cannot be less than minDelay (delay: ${n.delay}, minDelay: ${n.minDelay}`);const r={attemptNum:0,attemptsRemaining:n.maxAttempts?n.maxAttempts:-1,aborted:!1,abort(){r.aborted=!0}},i=n.calculateDelay||ue;async function o(){if(n.beforeAttempt&&n.beforeAttempt(r,n),r.aborted){const e=new Error("Attempt aborted");throw e.code="ATTEMPT_ABORTED",e}const t=async e=>{if(n.handleError&&await n.handleError(e,r,n),r.aborted||0===r.attemptsRemaining)throw e;r.attemptNum++;const t=i(r,n);return t&&await ce(t),o()};return r.attemptsRemaining>0&&r.attemptsRemaining--,n.timeout?new Promise(((i,o)=>{const s=setTimeout((()=>{if(n.handleTimeout)try{i(n.handleTimeout(r,n))}catch(Mn){o(Mn)}else{const e=new Error(`Retry timeout (attemptNum: ${r.attemptNum}, timeout: ${n.timeout})`);e.code="ATTEMPT_TIMEOUT",o(e)}}),n.timeout);e(r,n).then((e=>{clearTimeout(s),i(e)})).catch((e=>{clearTimeout(s),t(e).then(i).catch(o)}))})):e(r,n).catch(t)}const s=n.calculateDelay?n.calculateDelay(r,n):n.initialDelay;return s&&await ce(s),o()}(function(e){e[e["Connecting"]=0]="Connecting",e[e["Open"]=1]="Open",e[e["Closing"]=2]="Closing",e[e["Closed"]=3]="Closed"})(ae||(ae={}));const he=()=>new Map,fe=(e,t,n)=>{let r=e.get(t);return void 0===r&&e.set(t,r=n()),r},pe=()=>new Set,me=String.fromCharCode,ge=e=>e.toLowerCase(),ve=/^\s*/g,ye=e=>e.replace(ve,""),be=/([A-Z])/g,_e=(e,t)=>ye(e.replace(be,(e=>`${t}${ge(e)}`))),we=e=>{const t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=t.codePointAt(i);return r},xe="undefined"!==typeof TextEncoder?new TextEncoder:null,Se=e=>xe.encode(e),Ee=xe?Se:we;let Me="undefined"===typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Me&&1===Me.decode(new Uint8Array).length&&(Me=null);const Te=e=>void 0===e?null:e;class Ce{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}}let Ae=new Ce,ke=!0;try{"undefined"!==typeof localStorage&&(Ae=localStorage,ke=!1)}catch(Mn){}const Oe=Ae,Re=e=>ke||addEventListener("storage",e),Pe=e=>ke||removeEventListener("storage",e),Le=Array.from,De=Object.keys,Ie=(e,t)=>{const n=[];for(const r in e)n.push(t(e[r],r));return n},Ne=e=>De(e).length,Ue=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Fe=(e,t)=>e===t,Be=(e,t)=>{if(null==e||null==t)return Fe(e,t);if(e.constructor!==t.constructor)return!1;if(e===t)return!0;switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;break;case Set:if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;break;case Map:if(e.size!==t.size)return!1;for(const n of e.keys())if(!t.has(n)||!Be(e.get(n),t.get(n)))return!1;break;case Object:if(Ne(e)!==Ne(t))return!1;for(const n in e)if(!Ue(e,n)||!Be(e[n],t[n]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!Be(e[n],t[n]))return!1;break;default:return!1}return!0},Ve=(e,t)=>t.includes(e),ze="undefined"!==typeof process&&process.release&&/node|io\.js/.test(process.release.name),je="undefined"!==typeof window&&"undefined"!==typeof document&&!ze;let He;"undefined"!==typeof navigator&&/Mac/.test(navigator.platform);const We=()=>{if(void 0===He)if(ze){He=he();const e=process.argv;let t=null;for(let n=0;n<e.length;n++){const r=e[n];"-"===r[0]?(null!==t&&He.set(t,""),t=r):null!==t&&(He.set(t,r),t=null)}null!==t&&He.set(t,"")}else"object"===typeof location?(He=he(),(location.search||"?").slice(1).split("&").forEach((e=>{if(0!==e.length){const[t,n]=e.split("=");He.set(`--${_e(t,"-")}`,n),He.set(`-${_e(t,"-")}`,n)}}))):He=he();return He},Ge=e=>We().has(e),$e=e=>Te(ze?{NODE_ENV:"production",BASE_URL:"/noosld/"}[e.toUpperCase()]:Oe.getItem(e)),qe=e=>Ge("--"+e)||null!==$e(e);qe("production");const Ye=ze&&Ve({NODE_ENV:"production",BASE_URL:"/noosld/"}.FORCE_COLOR,["true","1","2"]);!Ge("no-colors")&&(!ze||process.stdout.isTTY||Ye)&&(!ze||Ge("color")||Ye||null!==$e("COLORTERM")||($e("TERM")||"").includes("color"));const Xe=Math.floor,Ze=(e,t)=>e<t?e:t,Ke=(e,t)=>e>t?e:t,Je=128,Qe=127,et=Number.MAX_SAFE_INTEGER;class tt{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const nt=()=>new tt,rt=e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t},it=e=>{const t=new Uint8Array(rt(e));let n=0;for(let r=0;r<e.bufs.length;r++){const i=e.bufs[r];t.set(i,n),n+=i.length}return t.set(Ct(e.cbuf.buffer,0,e.cpos),n),t},ot=(e,t)=>{const n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*n),e.cpos=0),e.cbuf[e.cpos++]=t},st=(e,t)=>{while(t>Qe)ot(e,Je|Qe&t),t=Xe(t/128);ot(e,Qe&t)},at=new Uint8Array(3e4),lt=at.length/3,ct=(e,t)=>{if(t.length<lt){const n=xe.encodeInto(t,at).written||0;st(e,n);for(let t=0;t<n;t++)ot(e,at[t])}else ft(e,Ee(t))},ut=(e,t)=>{const n=unescape(encodeURIComponent(t)),r=n.length;st(e,r);for(let i=0;i<r;i++)ot(e,n.codePointAt(i))},dt=xe&&xe.encodeInto?ct:ut,ht=(e,t)=>{const n=e.cbuf.length,r=e.cpos,i=Ze(n-r,t.length),o=t.length-i;e.cbuf.set(t.subarray(0,i),r),e.cpos+=i,o>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(Ke(2*n,o)),e.cbuf.set(t.subarray(i)),e.cpos=o)},ft=(e,t)=>{st(e,t.byteLength),ht(e,t)},pt=e=>new Error(e),mt=pt("Unexpected end of array"),gt=pt("Integer out of Range");class vt{constructor(e){this.arr=e,this.pos=0}}const yt=e=>new vt(e),bt=(e,t)=>{const n=Ct(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n},_t=e=>bt(e,xt(e)),wt=e=>e.arr[e.pos++],xt=e=>{let t=0,n=1;const r=e.arr.length;while(e.pos<r){const r=e.arr[e.pos++];if(t+=(r&Qe)*n,n*=128,r<Je)return t;if(t>et)throw gt}throw mt},St=e=>{let t=xt(e);if(0===t)return"";{let n=String.fromCodePoint(wt(e));if(--t<100)while(t--)n+=String.fromCodePoint(wt(e));else while(t>0){const r=t<1e4?t:1e4,i=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,i),t-=r}return decodeURIComponent(escape(n))}},Et=e=>Me.decode(_t(e)),Mt=Me?Et:St,Tt=e=>new Uint8Array(e),Ct=(e,t,n)=>new Uint8Array(e,t,n),At=e=>new Uint8Array(e),kt=e=>{let t="";for(let n=0;n<e.byteLength;n++)t+=me(e[n]);return btoa(t)},Ot=e=>Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("base64"),Rt=e=>{const t=atob(e),n=Tt(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n},Pt=e=>{const t=Buffer.from(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},Lt=je?kt:Ot,Dt=je?Rt:Pt,It=new Map;class Nt{constructor(e){this.room=e,this.onmessage=null,this._onChange=t=>t.key===e&&null!==this.onmessage&&this.onmessage({data:Dt(t.newValue||"")}),Re(this._onChange)}postMessage(e){Oe.setItem(this.room,Lt(At(e)))}close(){Pe(this._onChange)}}const Ut="undefined"===typeof BroadcastChannel?Nt:BroadcastChannel,Ft=e=>fe(It,e,(()=>{const t=pe(),n=new Ut(e);return n.onmessage=e=>t.forEach((t=>t(e.data,"broadcastchannel"))),{bc:n,subs:t}})),Bt=(e,t)=>(Ft(e).subs.add(t),t),Vt=(e,t)=>{const n=Ft(e),r=n.subs.delete(t);return r&&0===n.subs.size&&(n.bc.close(),It.delete(e)),r},zt=(e,t,n=null)=>{const r=Ft(e);r.bc.postMessage(t),r.subs.forEach((e=>e(t,n)))},jt=Date.now;class Ht{constructor(){this._observers=he()}on(e,t){fe(this._observers,e,pe).add(t)}once(e,t){const n=(...r)=>{this.off(e,n),t(...r)};this.on(e,n)}off(e,t){const n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}emit(e,t){return Le((this._observers.get(e)||he()).values()).forEach((e=>e(...t)))}destroy(){this._observers=he()}}const Wt=3e4;class Gt extends Ht{constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval((()=>{const e=jt();null!==this.getLocalState()&&Wt/2<=e-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const t=[];this.meta.forEach(((n,r)=>{r!==this.clientID&&Wt<=e-n.lastUpdated&&this.states.has(r)&&t.push(r)})),t.length>0&&$t(this,t,"timeout")}),Xe(Wt/10)),e.on("destroy",(()=>{this.destroy()})),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){const t=this.clientID,n=this.meta.get(t),r=void 0===n?0:n.clock+1,i=this.states.get(t);null===e?this.states.delete(t):this.states.set(t,e),this.meta.set(t,{clock:r,lastUpdated:jt()});const o=[],s=[],a=[],l=[];null===e?l.push(t):null==i?null!=e&&o.push(t):(s.push(t),Be(i,e)||a.push(t)),(o.length>0||a.length>0||l.length>0)&&this.emit("change",[{added:o,updated:a,removed:l},"local"]),this.emit("update",[{added:o,updated:s,removed:l},"local"])}setLocalStateField(e,t){const n=this.getLocalState();null!==n&&this.setLocalState({...n,[e]:t})}getStates(){return this.states}}const $t=(e,t,n)=>{const r=[];for(let i=0;i<t.length;i++){const n=t[i];if(e.states.has(n)){if(e.states.delete(n),n===e.clientID){const t=e.meta.get(n);e.meta.set(n,{clock:t.clock+1,lastUpdated:jt()})}r.push(n)}}r.length>0&&(e.emit("change",[{added:[],updated:[],removed:r},n]),e.emit("update",[{added:[],updated:[],removed:r},n]))},qt=(e,t,n=e.states)=>{const r=t.length,i=nt();st(i,r);for(let o=0;o<r;o++){const r=t[o],s=n.get(r)||null,a=e.meta.get(r).clock;st(i,r),st(i,a),dt(i,JSON.stringify(s))}return it(i)},Yt=(e,t,n)=>{const r=yt(t),i=jt(),o=[],s=[],a=[],l=[],c=xt(r);for(let u=0;u<c;u++){const t=xt(r);let n=xt(r);const c=JSON.parse(Mt(r)),u=e.meta.get(t),d=e.states.get(t),h=void 0===u?0:u.clock;(h<n||h===n&&null===c&&e.states.has(t))&&(null===c?t===e.clientID&&null!=e.getLocalState()?n++:e.states.delete(t):e.states.set(t,c),e.meta.set(t,{clock:n,lastUpdated:i}),void 0===u&&null!==c?o.push(t):void 0!==u&&null===c?l.push(t):null!==c&&(Be(c,d)||a.push(t),s.push(t)))}(o.length>0||a.length>0||l.length>0)&&e.emit("change",[{added:o,updated:a,removed:l},n]),(o.length>0||s.length>0||l.length>0)&&e.emit("update",[{added:o,updated:s,removed:l},n])},Xt=()=>{let e=!0;return(t,n)=>{if(e){e=!1;try{t()}finally{e=!0}}else void 0!==n&&n()}};class Zt{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach((e=>e.apply(this,t))),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter((e=>e!==t)):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}class Kt{constructor(e){this.data=e,this.encoder=nt(),this.decoder=yt(new Uint8Array(this.data))}readVarUint(){return xt(this.decoder)}readVarString(){return Mt(this.decoder)}readVarUint8Array(){return _t(this.decoder)}writeVarUint(e){return st(this.encoder,e)}writeVarString(e){return dt(this.encoder,e)}writeVarUint8Array(e){return ft(this.encoder,e)}length(){return rt(this.encoder)}}const Jt=0,Qt=1,en=2,tn=(e,t)=>{st(e,Jt);const n=r.gJ(t);ft(e,n)},nn=(e,t,n)=>{st(e,Qt),ft(e,r.D$(t,n))},rn=(e,t,n)=>nn(t,n,_t(e)),on=(e,t,n)=>{try{r.NG(t,_t(e),n)}catch(i){console.error("Caught error while handling a Yjs update",i)}},sn=(e,t)=>{st(e,en),ft(e,t)},an=on,ln=(e,t,n,r)=>{const i=xt(e);switch(i){case Jt:rn(e,t,n);break;case Qt:on(e,n,r);break;case en:an(e,n,r);break;default:throw new Error("Unknown message type")}return i};var cn,un;(function(e){e[e["Sync"]=0]="Sync",e[e["Awareness"]=1]="Awareness",e[e["Auth"]=2]="Auth",e[e["QueryAwareness"]=3]="QueryAwareness",e[e["Stateless"]=5]="Stateless",e[e["CLOSE"]=7]="CLOSE"})(cn||(cn={})),function(e){e["Connecting"]="connecting",e["Connected"]="connected",e["Disconnected"]="disconnected"}(un||(un={}));class dn{constructor(){this.encoder=nt()}get(e){return e.encoder}toUint8Array(){return it(this.encoder)}}class hn{constructor(e){this.broadcasted=!1,this.message=e}setBroadcasted(e){return this.broadcasted=e,this}apply(e,t=!0){const{message:n}=this,r=n.readVarUint(),i=n.length();switch(r){case cn.Sync:this.applySyncMessage(e,t);break;case cn.Awareness:this.applyAwarenessMessage(e);break;case cn.Auth:this.applyAuthMessage(e);break;case cn.QueryAwareness:this.applyQueryAwarenessMessage(e);break;case cn.Stateless:e.receiveStateless(Mt(n.decoder));break;default:throw new Error(`Can’t apply message of unknown type: ${r}`)}n.length()>i+1&&(this.broadcasted?e.broadcast(dn,{encoder:n.encoder}):e.send(dn,{encoder:n.encoder}))}applySyncMessage(e,t){const{message:n}=this;n.writeVarUint(cn.Sync);const r=ln(n.decoder,n.encoder,e.document,e);t&&r===Qt&&(e.synced=!0),r!==en&&r!==Qt||e.unsyncedChanges>0&&e.updateUnsyncedChanges(-1)}applyAwarenessMessage(e){const{message:t}=this;Yt(e.awareness,t.readVarUint8Array(),e)}applyAuthMessage(e){const{message:t}=this;ne(t.decoder,e.permissionDeniedHandler.bind(e),e.authenticatedHandler.bind(e))}applyQueryAwarenessMessage(e){const{message:t}=this;t.writeVarUint(cn.Awareness),t.writeVarUint8Array(qt(e.awareness,Array.from(e.awareness.getStates().keys())))}}class fn{constructor(e,t={}){this.message=new e,this.encoder=this.message.get(t)}create(){return it(this.encoder)}send(e){null===e||void 0===e||e.send(this.create())}broadcast(e){zt(e,this.create())}}class pn extends dn{constructor(){super(...arguments),this.type=cn.Sync,this.description="First sync step"}get(e){if("undefined"===typeof e.document)throw new Error("The sync step one message requires document as an argument");return dt(this.encoder,e.documentName),st(this.encoder,this.type),tn(this.encoder,e.document),this.encoder}}class mn extends dn{constructor(){super(...arguments),this.type=cn.Sync,this.description="Second sync step"}get(e){if("undefined"===typeof e.document)throw new Error("The sync step two message requires document as an argument");return dt(this.encoder,e.documentName),st(this.encoder,this.type),nn(this.encoder,e.document),this.encoder}}class gn extends dn{constructor(){super(...arguments),this.type=cn.QueryAwareness,this.description="Queries awareness states"}get(e){return console.log("queryAwareness: writing string docName",e.documentName),console.log(this.encoder.cpos),dt(this.encoder,e.documentName),st(this.encoder,this.type),this.encoder}}class vn extends dn{constructor(){super(...arguments),this.type=cn.Auth,this.description="Authentication"}get(e){if("undefined"===typeof e.token)throw new Error("The authentication message requires `token` as an argument.");return dt(this.encoder,e.documentName),st(this.encoder,this.type),te(this.encoder,e.token),this.encoder}}class yn extends dn{constructor(){super(...arguments),this.type=cn.Awareness,this.description="Awareness states update"}get(e){if("undefined"===typeof e.awareness)throw new Error("The awareness message requires awareness as an argument");if("undefined"===typeof e.clients)throw new Error("The awareness message requires clients as an argument");let t;return dt(this.encoder,e.documentName),st(this.encoder,this.type),t=void 0===e.states?qt(e.awareness,e.clients):qt(e.awareness,e.clients,e.states),ft(this.encoder,t),this.encoder}}class bn extends dn{constructor(){super(...arguments),this.type=cn.Sync,this.description="A document update"}get(e){return dt(this.encoder,e.documentName),st(this.encoder,this.type),sn(this.encoder,e.update),this.encoder}}const _n=e=>Ie(e,((e,t)=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`)).join("&");class wn extends Zt{constructor(e){super(),this.configuration={url:"",document:void 0,awareness:void 0,WebSocketPolyfill:void 0,parameters:{},connect:!0,broadcast:!0,forceSyncInterval:!1,messageReconnectTimeout:3e4,delay:1e3,initialDelay:0,factor:2,maxAttempts:0,minDelay:1e3,maxDelay:3e4,jitter:!0,timeout:0,onOpen:()=>null,onConnect:()=>null,onMessage:()=>null,onOutgoingMessage:()=>null,onStatus:()=>null,onDisconnect:()=>null,onClose:()=>null,onDestroy:()=>null,onAwarenessUpdate:()=>null,onAwarenessChange:()=>null,quiet:!1},this.subscribedToBroadcastChannel=!1,this.webSocket=null,this.shouldConnect=!0,this.status=un.Disconnected,this.lastMessageReceived=0,this.mux=Xt(),this.intervals={forceSync:null,connectionChecker:null},this.connectionAttempt=null,this.receivedOnOpenPayload=void 0,this.receivedOnStatusPayload=void 0,this.boundConnect=this.connect.bind(this),this.setConfiguration(e),this.configuration.WebSocketPolyfill=e.WebSocketPolyfill?e.WebSocketPolyfill:WebSocket,this.on("open",this.configuration.onOpen),this.on("open",this.onOpen.bind(this)),this.on("connect",this.configuration.onConnect),this.on("message",this.configuration.onMessage),this.on("outgoingMessage",this.configuration.onOutgoingMessage),this.on("status",this.configuration.onStatus),this.on("status",this.onStatus.bind(this)),this.on("disconnect",this.configuration.onDisconnect),this.on("close",this.configuration.onClose),this.on("destroy",this.configuration.onDestroy),this.on("awarenessUpdate",this.configuration.onAwarenessUpdate),this.on("awarenessChange",this.configuration.onAwarenessChange),this.on("close",this.onClose.bind(this)),this.on("message",this.onMessage.bind(this)),this.registerEventListeners(),this.intervals.connectionChecker=setInterval(this.checkConnection.bind(this),this.configuration.messageReconnectTimeout/10),"undefined"!==typeof e.connect&&(this.shouldConnect=e.connect),this.shouldConnect&&this.connect()}async onOpen(e){this.receivedOnOpenPayload=e}async onStatus(e){this.receivedOnStatusPayload=e}attach(e){this.receivedOnOpenPayload&&e.onOpen(this.receivedOnOpenPayload),this.receivedOnStatusPayload&&e.onStatus(this.receivedOnStatusPayload)}detach(e){}setConfiguration(e={}){this.configuration={...this.configuration,...e}}async connect(){if(this.status===un.Connected)return;this.cancelWebsocketRetry&&(this.cancelWebsocketRetry(),this.cancelWebsocketRetry=void 0),this.shouldConnect=!0;const e=()=>{let e=!1;const t=de(this.createWebSocketConnection.bind(this),{delay:this.configuration.delay,initialDelay:this.configuration.initialDelay,factor:this.configuration.factor,maxAttempts:this.configuration.maxAttempts,minDelay:this.configuration.minDelay,maxDelay:this.configuration.maxDelay,jitter:this.configuration.jitter,timeout:this.configuration.timeout,beforeAttempt:t=>{this.shouldConnect&&!e||t.abort()}}).catch((e=>{if(e&&"ATTEMPT_ABORTED"!==e.code)throw e}));return{retryPromise:t,cancelFunc:()=>{e=!0}}},{retryPromise:t,cancelFunc:n}=e();return this.cancelWebsocketRetry=n,t}createWebSocketConnection(){return new Promise(((e,t)=>{this.webSocket&&(this.webSocket.close(),this.webSocket=null);const n=new this.configuration.WebSocketPolyfill(this.url);n.binaryType="arraybuffer",n.onmessage=e=>this.emit("message",e),n.onclose=e=>this.emit("close",{event:e}),n.onopen=e=>this.emit("open",e),n.onerror=e=>{t(e)},this.webSocket=n,this.status=un.Connecting,this.emit("status",{status:un.Connecting}),this.connectionAttempt={resolve:e,reject:t}}))}onMessage(e){this.resolveConnectionAttempt()}resolveConnectionAttempt(){this.connectionAttempt&&(this.connectionAttempt.resolve(),this.connectionAttempt=null,this.status=un.Connected,this.emit("status",{status:un.Connected}),this.emit("connect"))}stopConnectionAttempt(){this.connectionAttempt=null}rejectConnectionAttempt(){var e;null===(e=this.connectionAttempt)||void 0===e||e.reject(),this.connectionAttempt=null}checkConnection(){var e;this.status===un.Connected&&this.lastMessageReceived&&(this.configuration.messageReconnectTimeout>=jt()-this.lastMessageReceived||null===(e=this.webSocket)||void 0===e||e.close())}registerEventListeners(){"undefined"!==typeof window&&window.addEventListener("online",this.boundConnect)}get serverUrl(){while("/"===this.configuration.url[this.configuration.url.length-1])return this.configuration.url.slice(0,this.configuration.url.length-1);return this.configuration.url}get url(){const e=_n(this.configuration.parameters);return`${this.serverUrl}${0===e.length?"":`?${e}`}`}disconnect(){if(this.shouldConnect=!1,null!==this.webSocket)try{this.webSocket.close()}catch{}}send(e){var t;(null===(t=this.webSocket)||void 0===t?void 0:t.readyState)===ae.Open&&this.webSocket.send(e)}onClose({event:e}){this.webSocket=null,this.status===un.Connected&&(this.status=un.Disconnected,this.emit("status",{status:un.Disconnected}),this.emit("disconnect",{event:e})),e.code===ie.code&&(e.reason===ie.reason?console.warn("[HocuspocusProvider] An authentication token is required, but you didn’t send one. Try adding a `token` to your HocuspocusProvider configuration. Won’t try again."):console.warn(`[HocuspocusProvider] Connection closed with status Unauthorized: ${e.reason}`),this.shouldConnect=!1),e.code!==oe.code||this.configuration.quiet?(e.code===re.code&&(console.warn(`[HocuspocusProvider] Connection closed with status MessageTooBig: ${e.reason}`),this.shouldConnect=!1),this.connectionAttempt?this.rejectConnectionAttempt():this.shouldConnect&&this.connect(),this.shouldConnect||this.status!==un.Disconnected&&(this.status=un.Disconnected,this.emit("status",{status:un.Disconnected}),this.emit("disconnect",{event:e}))):console.warn("[HocuspocusProvider] The provided authentication token isn’t allowed to connect to this server. Will try again.")}destroy(){this.emit("destroy"),this.intervals.forceSync&&clearInterval(this.intervals.forceSync),clearInterval(this.intervals.connectionChecker),this.stopConnectionAttempt(),this.disconnect(),this.removeAllListeners(),"undefined"!==typeof window&&window.removeEventListener("online",this.boundConnect)}}class xn extends dn{constructor(){super(...arguments),this.type=cn.Stateless,this.description="A stateless message"}get(e){var t;return dt(this.encoder,e.documentName),st(this.encoder,this.type),dt(this.encoder,null!==(t=e.payload)&&void 0!==t?t:""),this.encoder}}class Sn extends dn{constructor(){super(...arguments),this.type=cn.CLOSE,this.description="Ask the server to close the connection"}get(e){return dt(this.encoder,e.documentName),st(this.encoder,this.type),this.encoder}}class En extends Zt{constructor(e){super(),this.configuration={name:"",document:void 0,awareness:void 0,token:null,parameters:{},broadcast:!0,forceSyncInterval:!1,onAuthenticated:()=>null,onAuthenticationFailed:()=>null,onOpen:()=>null,onConnect:()=>null,onMessage:()=>null,onOutgoingMessage:()=>null,onStatus:()=>null,onSynced:()=>null,onDisconnect:()=>null,onClose:()=>null,onDestroy:()=>null,onAwarenessUpdate:()=>null,onAwarenessChange:()=>null,onStateless:()=>null,quiet:!1},this.subscribedToBroadcastChannel=!1,this.isSynced=!1,this.unsyncedChanges=0,this.status=un.Disconnected,this.isAuthenticated=!1,this.authorizedScope=void 0,this.mux=Xt(),this.intervals={forceSync:null},this.isConnected=!0,this.boundBeforeUnload=this.beforeUnload.bind(this),this.boundBroadcastChannelSubscriber=this.broadcastChannelSubscriber.bind(this),this.setConfiguration(e),this.configuration.document=e.document?e.document:new r.QW,this.configuration.awareness=e.awareness?e.awareness:new Gt(this.document),this.on("open",this.configuration.onOpen),this.on("message",this.configuration.onMessage),this.on("outgoingMessage",this.configuration.onOutgoingMessage),this.on("synced",this.configuration.onSynced),this.on("destroy",this.configuration.onDestroy),this.on("awarenessUpdate",this.configuration.onAwarenessUpdate),this.on("awarenessChange",this.configuration.onAwarenessChange),this.on("stateless",this.configuration.onStateless),this.on("authenticated",this.configuration.onAuthenticated),this.on("authenticationFailed",this.configuration.onAuthenticationFailed),this.configuration.websocketProvider.on("connect",this.configuration.onConnect),this.configuration.websocketProvider.on("connect",(e=>this.emit("connect",e))),this.configuration.websocketProvider.on("open",this.onOpen.bind(this)),this.configuration.websocketProvider.on("open",(e=>this.emit("open",e))),this.configuration.websocketProvider.on("message",this.onMessage.bind(this)),this.configuration.websocketProvider.on("close",this.onClose.bind(this)),this.configuration.websocketProvider.on("close",this.configuration.onClose),this.configuration.websocketProvider.on("close",(e=>this.emit("close",e))),this.configuration.websocketProvider.on("status",this.onStatus.bind(this)),this.configuration.websocketProvider.on("disconnect",this.configuration.onDisconnect),this.configuration.websocketProvider.on("disconnect",(e=>this.emit("disconnect",e))),this.configuration.websocketProvider.on("destroy",this.configuration.onDestroy),this.configuration.websocketProvider.on("destroy",(e=>this.emit("destroy",e))),this.awareness.on("update",(()=>{this.emit("awarenessUpdate",{states:se(this.awareness.getStates())})})),this.awareness.on("change",(()=>{this.emit("awarenessChange",{states:se(this.awareness.getStates())})})),this.document.on("update",this.documentUpdateHandler.bind(this)),this.awareness.on("update",this.awarenessUpdateHandler.bind(this)),this.registerEventListeners(),this.configuration.forceSyncInterval&&(this.intervals.forceSync=setInterval(this.forceSync.bind(this),this.configuration.forceSyncInterval)),this.configuration.websocketProvider.attach(this)}onStatus({status:e}){this.status=e,this.configuration.onStatus({status:e}),this.emit("status",{status:e})}setConfiguration(e={}){if(!e.websocketProvider&&e.url){const t=e;this.configuration.websocketProvider=new wn({url:t.url,parameters:t.parameters})}this.configuration={...this.configuration,...e}}get document(){return this.configuration.document}get awareness(){return this.configuration.awareness}get hasUnsyncedChanges(){return this.unsyncedChanges>0}updateUnsyncedChanges(e=0){this.unsyncedChanges+=e,this.emit("unsyncedChanges",this.unsyncedChanges)}forceSync(){this.send(pn,{document:this.document,documentName:this.configuration.name})}beforeUnload(){$t(this.awareness,[this.document.clientID],"window unload")}registerEventListeners(){"undefined"!==typeof window&&window.addEventListener("beforeunload",this.boundBeforeUnload)}sendStateless(e){this.send(xn,{documentName:this.configuration.name,payload:e})}documentUpdateHandler(e,t){t!==this&&(this.updateUnsyncedChanges(1),this.send(bn,{update:e,documentName:this.configuration.name},!0))}awarenessUpdateHandler({added:e,updated:t,removed:n},r){const i=e.concat(t).concat(n);this.send(yn,{awareness:this.awareness,clients:i,documentName:this.configuration.name},!0)}get synced(){return this.isSynced}set synced(e){this.isSynced!==e&&(e&&this.unsyncedChanges>0&&this.updateUnsyncedChanges(-1*this.unsyncedChanges),this.isSynced=e,this.emit("synced",{state:e}),this.emit("sync",{state:e}))}receiveStateless(e){this.emit("stateless",{payload:e})}get isAuthenticationRequired(){return!!this.configuration.token&&!this.isAuthenticated}async connect(){return this.configuration.websocketProvider.connect()}disconnect(){this.disconnectBroadcastChannel(),this.configuration.websocketProvider.detach(this)}async onOpen(e){this.isAuthenticated=!1,this.emit("open",{event:e}),this.isAuthenticationRequired&&this.send(vn,{token:await this.getToken(),documentName:this.configuration.name}),this.startSync()}async getToken(){if("function"===typeof this.configuration.token){const e=await this.configuration.token();return e}return this.configuration.token}startSync(){this.send(pn,{document:this.document,documentName:this.configuration.name}),null!==this.awareness.getLocalState()&&this.send(yn,{awareness:this.awareness,clients:[this.document.clientID],documentName:this.configuration.name})}send(e,t,n=!1){if(!this.isConnected)return;n&&this.mux((()=>{this.broadcast(e,t)}));const r=new fn(e,t);this.emit("outgoingMessage",{message:r.message}),r.send(this.configuration.websocketProvider)}onMessage(e){const t=new Kt(e.data),n=t.readVarString();n===this.configuration.name&&(t.writeVarString(n),this.emit("message",{event:e,message:new Kt(e.data)}),new hn(t).apply(this))}onClose(e){this.isAuthenticated=!1,this.synced=!1,$t(this.awareness,Array.from(this.awareness.getStates().keys()).filter((e=>e!==this.document.clientID)),this)}destroy(){this.emit("destroy"),this.intervals.forceSync&&clearInterval(this.intervals.forceSync),$t(this.awareness,[this.document.clientID],"provider destroy"),this.disconnect(),this.awareness.off("update",this.awarenessUpdateHandler),this.document.off("update",this.documentUpdateHandler),this.removeAllListeners(),this.send(Sn,{documentName:this.configuration.name}),this.isConnected=!1,"undefined"!==typeof window&&window.removeEventListener("beforeunload",this.boundBeforeUnload)}permissionDeniedHandler(e){this.emit("authenticationFailed",{reason:e}),this.isAuthenticated=!1,this.disconnect(),this.status=un.Disconnected}authenticatedHandler(e){this.isAuthenticated=!0,this.authorizedScope=e,this.emit("authenticated"),this.startSync()}get broadcastChannel(){return`${this.configuration.name}`}broadcastChannelSubscriber(e){this.mux((()=>{const t=new Kt(e),n=t.readVarString();t.writeVarString(n),new hn(t).setBroadcasted(!0).apply(this,!1)}))}subscribeToBroadcastChannel(){this.subscribedToBroadcastChannel||(Bt(this.broadcastChannel,this.boundBroadcastChannelSubscriber),this.subscribedToBroadcastChannel=!0),this.mux((()=>{this.broadcast(pn,{document:this.document}),this.broadcast(mn,{document:this.document}),this.broadcast(gn,{document:this.document}),this.broadcast(yn,{awareness:this.awareness,clients:[this.document.clientID],document:this.document})}))}disconnectBroadcastChannel(){this.send(yn,{awareness:this.awareness,clients:[this.document.clientID],states:new Map,documentName:this.configuration.name},!0),this.subscribedToBroadcastChannel&&(Vt(this.broadcastChannel,this.boundBroadcastChannelSubscriber),this.subscribedToBroadcastChannel=!1)}broadcast(e,t){this.configuration.broadcast&&this.subscribedToBroadcastChannel&&new fn(e,t).broadcast(this.broadcastChannel)}setAwarenessField(e,t){this.awareness.setLocalStateField(e,t)}}},2179:function(e,t,n){"use strict";n.d(t,{qF:function(){return Ce},QB:function(){return q},ms:function(){return Me},QT:function(){return Ee},wI:function(){return Ae}});var r={};n.r(r),n.d(r,{$reactive:function(){return A},$reactiveproxy:function(){return k},$skipreactive:function(){return C},Atom:function(){return B},Observer:function(){return d},Reaction:function(){return f},autorun:function(){return U},autorunAsync:function(){return F},createAtom:function(){return V},hasRunningReaction:function(){return p},isActionRunning:function(){return c},isReactive:function(){return O},isTrackingDisabled:function(){return y},markRaw:function(){return R},reaction:function(){return g},reactive:function(){return D},runInAction:function(){return u},runningReaction:function(){return m},untracked:function(){return b},untrackedCB:function(){return _}});n(1703),n(7658);function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,s(e,t)}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var l=0;function c(){return l>0}function u(e){l++;try{return e()}finally{l--,0===l&&x()}}var d=function(){function e(e){this.trigger=e,this.observing=new Map}var t=e.prototype;return t.registerConnection=function(e){var t=this.observing.get(e.observable);t||(t={byKey:new Set,iterate:!1},this.observing.set(e.observable,t)),"iterate"===e.type?t.iterate=!0:t.byKey.add(e.key)},t.removeObservers=function(){var e=this;this.observing.forEach((function(t,n){t.iterate&&n[A].connections.iterate.delete(e),t.byKey.forEach((function(t){n[A].connections.byKey.get(t).delete(e)}))})),this.observing.clear()},e}(),h=[],f=function(e){function t(t,n,r){var i;if(i=e.call(this,(function(){return i._trigger()}))||this,i.func=t,i.options=n,i.effect=r,i.isInitial=!0,i.reaction=function(){h.push(a(i));try{i.func()}finally{h.pop()}!i.effect||i.isInitial&&!i.options.fireImmediately||i.effect(),i.isInitial=!1},!r&&!i.options.fireImmediately)throw new Error("if no effect function passed, should always fireImmediately");return i.reaction(),i}o(t,e);var n=t.prototype;return n._trigger=function(){if(h.includes(this))throw new Error("already running reaction");this.removeObservers(),this.reaction()},t}(d);function p(){return!!h.length}function m(){return h.length?h[h.length-1]:void 0}function g(e,t,n){var r=i({name:"unnamed",fireImmediately:!0},n),o=new f(e,r,t);return o}var v=!1;function y(){return v}function b(e){v=!0;try{e()}finally{v=!1}}function _(e){return function(){return b(e)}}var w=[];function x(){var e=[].concat(w);w=[],S(e)}function S(e){var t=new Set;e.forEach((function(e){var n;"add"!==e.type&&"delete"!==e.type||e.observable[A].connections.iterate.forEach((function(e){t.add(e)})),null==(n=e.observable[A].connections.byKey.get(e.key))||n.forEach((function(e){t.add(e)}))})),t.forEach((function(e){e.trigger()}))}function E(e){c()?w.push(e):S([e])}function M(e,t){if("iterate"===e.type)e.observable[A].connections.iterate.add(t);else{var n=e.observable[A].connections.byKey.get(e.key);n||(n=new Set,e.observable[A].connections.byKey.set(e.key,n)),n.add(t)}}function T(e,t){if(!y()){var n=m();n&&(M(e,n),n.registerConnection(e)),t&&(M(e,t),t.registerConnection(e))}}var C=Symbol("$skipreactive"),A=Symbol("$reactive"),k=Symbol("$reactiveproxy");function O(e,t){return!(!e||!e[k]||e[k].implicitObserver!==t)}function R(e){return e[C]=!0,e}function P(e){return!(!e||O(e)||!e[A])}function L(e,t,n){if(void 0===n&&(n=!1),e[C])return e;if(O(e,t))return e;var r=I(e,n);if(!t)return r;var i=r[A].proxiesWithImplicitObserver.get(t);if(!i){var o={implicitObserver:t};Object.setPrototypeOf(o,N),i=new Proxy(r[A].raw,o),r[A].proxiesWithImplicitObserver.set(t,i)}return i}var D=L;function I(e,t){if(void 0===t&&(t=!1),O(e))return e;if(P(e))return e[A].proxy;if(e[A]||e[k])throw new Error("unexpected");var n={connections:{iterate:new Set,byKey:new Map},proxy:{},raw:e,proxiesWithImplicitObserver:new Map,shallow:t};Object.defineProperty(e,A,{enumerable:!1,writable:!0,configurable:!0,value:n});var r=new Proxy(e,N);return n.proxy=r,r}var N={has:function(e,t){var n=Reflect.has(e,t);return"symbol"===typeof t||T({observable:e,key:t,type:"has"},this.implicitObserver),n},get:function(e,t,n){if(t===k)return{implicitObserver:this.implicitObserver};var r=Reflect.get(e,t,n);if("symbol"===typeof t)return r;if("length"===t&&Array.isArray(e)?T({observable:e,type:"iterate"},this.implicitObserver):T({observable:e,key:t,type:"get"},this.implicitObserver),P(r))return L(r,this.implicitObserver);if(e[A].shallow)return r;if("object"===typeof r&&null!==r&&!O(r,this.implicitObserver)&&!Object.isFrozen(r)){var i=Reflect.getOwnPropertyDescriptor(e,t);if((!i||!1!==i.writable||!1!==i.configurable)&&(p()||this.implicitObserver))return L(r,this.implicitObserver)}return r},ownKeys:function(e){return T({observable:e,type:"iterate"},this.implicitObserver),Reflect.ownKeys(e)},set:function(e,t,n,r){return u((function(){if("symbol"===typeof t)return Reflect.set(e,t,n,r);var i=Object.hasOwnProperty.call(e,t),o=Reflect.get(e,t,r),s=Reflect.set(e,t,n,r);if(i){if(n!==o)if("length"===t&&Array.isArray(e))if(o<n);else for(var a=n+1;a<=o;a++)E({observable:e,key:""+(a-1),oldValue:void 0,type:"delete"});else E({observable:e,key:t,value:n,oldValue:o,type:"update"})}else E({observable:e,key:t,value:n,type:"add"});return s}))},deleteProperty:function(e,t){return u((function(){if("symbol"===typeof t)return Reflect.deleteProperty(e,t);var n=Object.hasOwnProperty.call(e,t),r=Reflect.get(e,t),i=Reflect.deleteProperty(e,t);return n&&E({observable:e,key:t,oldValue:r,type:"delete"}),i}))},preventExtensions:function(e){throw new Error("Dynamic observable objects cannot be frozen")}};function U(e,t){var n=i({name:"unnamed",fireImmediately:!0},t),r=new f(e,n);return r}function F(e,t,n){var r=i({name:"unnamed",fireImmediately:!0},n),o=new f((function(){e(t)}),r);return t=D(t,o),t.bla=4,r.fireImmediately&&o.trigger(),o}var B=function(){function e(){this._observable=D({_key:1})}var t=e.prototype;return t.reportObserved=function(e){return D(this._observable,e)._key},t.reportChanged=function(){this._observable._key++},e}();function V(e,t,n){return new B}var z=n(7974);let j,H,W=e=>e();function G(e,t){return H?H(e,t):void W(e)}function $(e,t,n){if(j)return j.apply(null,arguments);throw new Error("observable implementation not provided. Call enableReactiveBindings, enableVueBindings or enableMobxBindings.")}function q(e){j=function(t,n){let r=0;const i=e.reactive({data:r}),o={reportObserved(){return i.data},reportChanged(){i.data=++r}};return n&&n(),o},H=void 0}function Y(e){j=function(t,n,r){const i=e.createAtom(t);return n&&n(),i},H=(t,n)=>e.reaction(t,n,{fireImmediately:!1})}const X=new WeakSet;function Z(e){if(X.has(e))return e;let t;X.add(e);const n=new Map;function r(){if(!t){const n=e=>{(e.changes.added.size||e.changes.deleted.size||e.changes.keys.size||e.changes.delta.length)&&t.reportChanged()};t=$("map",(()=>{e.observe(n)}),(()=>{e.unobserve(n)}))}t.reportObserved(e._implicitObserver)}function i(t){let r=n.get(t);if(!r){const i=e=>{r.reportChanged()};r=$(t+"",(()=>{e.observe(i)}),(()=>{e.unobserve(i)})),n.set(t,r)}r.reportObserved(e._implicitObserver)}const o=e.get;function s(t){const n=e[t];e[t]=function(){r();const e=Reflect.apply(n,this,arguments);return e}}function a(t){let n=e,i=Object.getOwnPropertyDescriptor(n,t);if(i||(n=Object.getPrototypeOf(n),i=Object.getOwnPropertyDescriptor(n,t)),i||(n=Object.getPrototypeOf(n),i=Object.getOwnPropertyDescriptor(n,t)),!i)throw new Error("property not found");const o=i.get;i.get=function(){this._disableTracking||r();const e=Reflect.apply(o,this,arguments);return e},Object.defineProperty(e,t,i)}function l(t,n){let r=e,i=Object.getOwnPropertyDescriptor(r,t);if(i||(r=Object.getPrototypeOf(r),i=Object.getOwnPropertyDescriptor(r,t)),i||(r=Object.getPrototypeOf(r),i=Object.getOwnPropertyDescriptor(r,t)),!i)throw new Error("property not found");Object.defineProperty(e,n,i)}e.get=function(e){if("number"!==typeof e)throw new Error("unexpected");i(e);const t=Reflect.apply(o,this,arguments);return t},s("forEach"),s("toJSON"),s("toArray"),s("slice"),s("map"),l("length","lengthUntracked"),a("length");const c=e.push;e.push=function(e){this._disableTracking=!0;const t=c.call(this,e);return this._disableTracking=!1,t};const u=e.slice;return e.slice=function(e,t){this._disableTracking=!0;const n=u.call(this,e,t);return this._disableTracking=!1,n},e}const K=new WeakSet;function J(e){if(K.has(e))return e;let t;function n(){if(!t){let n=Array.from(e.share.keys());const r=r=>{const i=Array.from(e.share.keys());JSON.stringify(n)!==JSON.stringify(i)&&(n=i,t.reportChanged())};t=$("map",(()=>{e.on("beforeObserverCalls",r)}),(()=>{e.off("beforeObserverCalls",r)}))}t.reportObserved(e._implicitObserver)}K.add(e);const r=e.get;function i(r){const i=e[r];let o;e[r]=function(){let r,s=arguments;return n(),o&&o.removeObservers(),o=G((()=>(r=Reflect.apply(i,e,s),r)),(()=>t.reportChanged())),r}}return e.get=function(e){if("string"!==typeof e)throw new Error("unexpected");const t=Reflect.apply(r,this,arguments);return oe(t),t},i("toJSON"),Object.defineProperty(e,"keys",{get:()=>(n(),Object.keys(e.share))}),e}const Q=new WeakSet;function ee(e){if(Q.has(e))return e;let t;Q.add(e);const n=new Map;function r(){if(!t){const n=e=>{(e.changes.added.size||e.changes.deleted.size||e.changes.keys.size||e.changes.delta.length)&&t.reportChanged()};t=$("map",(()=>{e.observe(n)}),(()=>{e.unobserve(n)}))}t.reportObserved(e._implicitObserver)}function i(t){let r=n.get(t);if(!r){const i=e=>{e.keysChanged.has(t)&&(e.changes.added.size||e.changes.deleted.size||e.changes.keys.size||e.changes.delta.length)&&r.reportChanged()};r=$(t,(()=>{e.observe(i)}),(()=>{e.unobserve(i)})),n.set(t,r)}r.reportObserved(e._implicitObserver)}const o=e.get;function s(t){const n=e[t];e[t]=function(){r();const e=Reflect.apply(n,this,arguments);return e}}return e.get=function(e){if("string"!==typeof e)throw new Error("unexpected");i(e);const t=Reflect.apply(o,this,arguments);return t},s("values"),s("entries"),s("keys"),s("forEach"),s("toJSON"),e}const te=new WeakSet;function ne(e){if(te.has(e))return e;let t;te.add(e);const n=e=>{t.reportChanged()};function r(n){const r=e[n];e[n]=function(){t.reportObserved(this._implicitObserver);const e=Reflect.apply(r,this,arguments);return e}}return t=$("text",(()=>{e.observe(n)}),(()=>{e.unobserve(n)})),r("toString"),r("toJSON"),e}const re=new WeakSet;function ie(e){if(re.has(e))return e;let t;re.add(e);const n=e=>{(e.changes.added.size||e.changes.deleted.size||e.changes.keys.size||e.changes.delta.length)&&t.reportChanged()};function r(n){const r=e[n];e[n]=function(){t.reportObserved(this._implicitObserver);const e=Reflect.apply(r,this,arguments);return e}}function i(n){let r=e,i=Object.getOwnPropertyDescriptor(r,n);if(i||(r=Object.getPrototypeOf(r),i=Object.getOwnPropertyDescriptor(r,n)),i||(r=Object.getPrototypeOf(r),i=Object.getOwnPropertyDescriptor(r,n)),!i)throw new Error("property not found");const o=i.get;i.get=function(){t.reportObserved(this._implicitObserver);const e=Reflect.apply(o,this,arguments);return e},Object.defineProperty(e,n,i)}return t=$("xml",(()=>{e.observe(n)}),(()=>{e.unobserve(n)})),r("toString"),r("toDOM"),r("toArray"),r("getAttribute"),i("firstChild"),e}function oe(e){return e instanceof z.eI||e instanceof z.xv?ne(e):e instanceof z.mJ?Z(e):e instanceof z.D5?ee(e):e instanceof z.QW||Object.prototype.hasOwnProperty.call(e,"autoLoad")?J(e):e instanceof z.sI||e instanceof z.lt?ie(e):e}function se(e){e.share.forEach((e=>{e.constructor!==z.QP&&oe(e)}))}function ae(e,t){for(let r=e.length-1;r>=t;r--){let t=e[r];if(!t.deleted){var n;if(t instanceof z.GC)continue;null==(n=t.content)||n.getContent().forEach((e=>{e instanceof z.QP&&oe(e)}))}}}const le=new WeakSet;function ce(e){le.has(e)||(le.add(e),oe(e),e.store.clients.forEach((e=>{e&&ae(e,0)})),se(e),e.on("beforeObserverCalls",(t=>{se(e),t.afterState.forEach(((e,n)=>{const r=t.beforeState.get(n)||0;if(r!==e){const e=t.doc.store.clients.get(n);if(!e)return;const i=z.g4(e,r);ae(e,i)}}))})))}class ue{constructor(e){this.value=void 0,this.value=e}}function de(e){return ArrayBuffer.isView(e)?new ue(e):new ue(Object.freeze(e))}function he(e){const t=function(){var t;let n=null==(t=this[k])?void 0:t.implicitObserver;e._implicitObserver=n;const r=e.slice.bind(e).apply(e,arguments);return r.map((e=>{const t=ye(e,n);return n&&"object"===typeof t?D(t,n):t}))},n=function(e){return e.map((e=>{const t=be(e);let n=Te(t)||t;if(n instanceof ue&&(n=n.value),n instanceof z.QP&&n.parent)throw new Error("Not supported: reassigning object that already occurs in the tree.");return n}))},r=function(){return[].findIndex.apply(t.apply(this),arguments)},i={slice:t,unshift:(...t)=>(e.unshift(n(t)),e.lengthUntracked),push:(...t)=>(e.push(n(t)),e.lengthUntracked),insert:e.insert.bind(e),toJSON:e.toJSON.bind(e),forEach:function(){return[].forEach.apply(t.apply(this),arguments)},every:function(){return[].every.apply(t.apply(this),arguments)},filter:function(){return[].filter.apply(t.apply(this),arguments)},find:function(){return[].find.apply(t.apply(this),arguments)},findIndex:r,some:function(){return[].some.apply(t.apply(this),arguments)},includes:function(){return[].includes.apply(t.apply(this),arguments)},map:function(){return[].map.apply(t.apply(this),arguments)},indexOf:function(){const e=arguments[0];return r.call(this,(t=>Ce(t,e)))},splice:function(){let r=arguments[0]<0?e.length-Math.abs(arguments[0]):arguments[0],i=arguments[1],o=Array.from(Array.from(arguments).slice(2)),s=t.apply(this,[r,Number.isInteger(i)?r+i:void 0]);return e.doc?e.doc.transact((()=>{e.delete(r,i),e.insert(r,n(o))})):(e.delete(r,i),e.insert(r,n(o))),s}},o=[];for(let s in i)o[s]=i[s];return o}function fe(e){if("string"===typeof e&&e.trim().length){const t=Number(e);if(Number.isInteger(t))return t}return e}function pe(e,t=new z.mJ){if(t[A])throw new Error("unexpected");const n=he(t),r=new Proxy(n,{set:(e,t,n)=>{const r=fe(t);if("number"!==typeof r)throw new Error;throw new Error("array assignment is not implemented / supported")},get:(e,n,r)=>{const i=fe(n);if(i===Se)return t;if("number"===typeof i){let e;var o;if(r&&r[k])e=null==(o=r[k])?void 0:o.implicitObserver,t._implicitObserver=e;let n=t.get(i);return n=ye(n,e),n}if(i===Symbol.toStringTag)return"Array";if(i===Symbol.iterator){const e=t.slice();return Reflect.get(e,i)}if("length"===i)return t.length;const s=Reflect.get(e,i,r);return s},deleteProperty:(e,n)=>{const r=fe(n);if("number"!==typeof r)throw new Error;return r<t.lengthUntracked&&r>=0&&(t.delete(r),!0)},has:(e,n)=>{const r=fe(n);return"number"!==typeof r?Reflect.has(e,r):r<t.lengthUntracked&&r>=0},getOwnPropertyDescriptor(e,n){const r=fe(n);return"length"===r?{enumerable:!1,configurable:!1,writable:!0}:"number"===typeof r&&r>=0&&r<t.lengthUntracked?{enumerable:!0,configurable:!0,writable:!0}:void 0},ownKeys:e=>{const n=[];for(let r=0;r<t.length;r++)n.push(r+"");return n.push("length"),n}});return n.push.apply(r,e),r}function me(e,t=new z.D5){if(t[A])throw new Error("unexpected");const n=new Proxy({},{set:(e,n,r)=>{if("string"!==typeof n)throw new Error;const i=be(r);let o=Te(i)||i;if(o instanceof ue&&(o=o.value),o instanceof z.QP&&o.parent)throw new Error("Not supported: reassigning object that already occurs in the tree.");return t.set(n,o),!0},get:(e,n,r)=>{if(n===Se)return t;if("string"!==typeof n)return Reflect.get(e,n);let i;var o;r&&r[k]&&(i=null==(o=r[k])?void 0:o.implicitObserver,t._implicitObserver=i);let s=t.get(n);return s=ye(s,i),s},deleteProperty:(e,n)=>{if("string"!==typeof n)throw new Error;return!!t.has(n)&&(t.delete(n),!0)},has:(e,n)=>!("string"!==typeof n||!t.has(n)),getOwnPropertyDescriptor(e,n){if("string"===typeof n&&t.has(n))return{enumerable:!0,configurable:!0}},ownKeys:e=>Array.from(t.keys())});ve.set(t,n);for(let r in e)n[r]=e[r];return n}function ge(e){return e instanceof z.QP}const ve=new WeakMap;function ye(e,t){if(ge(e)){if(e._implicitObserver=t,e instanceof z.mJ||e instanceof z.D5){if(!ve.has(e)){const t=be(e);ve.set(e,t)}e=ve.get(e)}else{if(!(e instanceof z.lt||e instanceof z.sI||e instanceof z.eI||e instanceof z.yP||e instanceof z.xv))throw new Error("unknown YType");R(e),e.__v_skip=!0}return e}return null===e?null:"object"===typeof e?de(e):e}function be(e){if(null===e||void 0===e)return e;if(e=Te(e)||e,e instanceof z.mJ)return pe([],e);if(e instanceof z.D5)return me({},e);if("string"===typeof e)return e;if(Array.isArray(e))return pe(e);if(e instanceof z.lt||e instanceof z.sI||e instanceof z.eI||e instanceof z.yP)return e;if(e instanceof z.xv)return e;if("object"===typeof e)return e instanceof ue?e:me(e);if("number"===typeof e||"boolean"===typeof e)return e;throw new Error("invalid")}function _e(e){for(let[t,n]of Object.entries(e))if(Array.isArray(n)){if(0!==n.length)throw new Error("Root Array initializer must always be empty array")}else if(n&&"object"===typeof n){if(0!==Object.keys(n).length||Object.getPrototypeOf(n)!==Object.prototype)throw new Error("Root Object initializer must always be {}")}else if("xml"!==n&&"text"!==n)throw new Error("unknown Root initializer")}function we(e,t,n){let r=t[n];if(r)return"xml"===r?e.getXmlFragment(n):"text"===r?e.getText(n):Array.isArray(r)?e.getArray(n):e.getMap(n);"__v_raw"!==n&&"__v_isRef"!==n&&"__v_isReadonly"!==n&&console.warn("property not found on root doc",n)}function xe(e,t){if(e[A])throw new Error("unexpected");_e(t);const n=new Proxy({},{set:(e,t,n)=>{if("string"!==typeof t)throw new Error;throw new Error("cannot set new elements on root doc")},get:(n,r,i)=>{if(r===Se)return e;if("string"!==typeof r)return Reflect.get(n,r);let o;var s;i&&i[k]&&(o=null==(s=i[k])?void 0:s.implicitObserver,e._implicitObserver=o);if("toJSON"===r){for(let r of Object.keys(t))we(e,t,r);const n=Reflect.get(e,r);return n}let a=we(e,t,r);return a=ye(a,o),a},deleteProperty:(e,t)=>{throw new Error("deleteProperty not available for doc")},has:(t,n)=>!("string"!==typeof n||!e.share.has(n)),getOwnPropertyDescriptor(t,n){if("string"===typeof n&&e.share.has(n)||"toJSON"===n)return{enumerable:!0,configurable:!0}},ownKeys:t=>Array.from(e.share.keys())});return ve.set(e,n),n}Y(r);const Se=Symbol("INTERNAL_SYMBOL");function Ee(e,t){const n=Te(e)||e;if(!n)throw new Error("not a valid synced object");return n instanceof z.QW?(n.on("update",t),()=>{n.off("update",t)}):(n.observeDeep(t),()=>{n.unobserveDeep(t)})}function Me(e){const t=Te(e);if(!(t instanceof z.QW))throw new Error("store is not a valid syncedStore that maps to a Y.Doc");return t}function Te(e){if("object"!==typeof e||null===e)return;const t=e[Se];return t&&(R(t),t.__v_skip=!0),t}function Ce(e,t){if(e===t)return!0;if("object"===typeof e&&"object"===typeof t){const n=Te(e),r=Te(t);return!(!n||!r)&&n===r}return!1}function Ae(e,t=new z.QW){return ce(t),xe(t,e)}},292:function(e,t,n){"use strict";n.d(t,{ML:function(){return Tn},hj:function(){return Ae},vc:function(){return Rn},NB:function(){return Pn},nU:function(){return ie},Nl:function(){return K},Jo:function(){return Ut},EG:function(){return $t},xh:function(){return Ze},Cf:function(){return Cn},K9:function(){return Ln},P1:function(){return te},x2:function(){return An},pr:function(){return qt},zK:function(){return kn},S0:function(){return On}});n(7658),n(1703);var r=n(1418),i=n(1617),o=n(7329),s=n(8443),a=n(4040);const l=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function c(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const u=(e,t,n)=>{let i=c(e,n);if(!i)return!1;let o=f(i);if(!o){let n=i.blockRange(),r=n&&(0,a.k9)(n);return null!=r&&(t&&t(e.tr.lift(n,r).scrollIntoView()),!0)}let l=o.nodeBefore;if(!l.type.spec.isolating&&R(e,o,t))return!0;if(0==i.parent.content.size&&(d(l,"end")||r.qv.isSelectable(l))){let n=(0,a.dR)(e.doc,i.before(),i.after(),s.p2.empty);if(n&&n.slice.size<n.to-n.from){if(t){let i=e.tr.step(n);i.setSelection(d(l,"end")?r.Y1.findFrom(i.doc.resolve(i.mapping.map(o.pos,-1)),-1):r.qv.create(i.doc,o.pos-l.nodeSize)),t(i.scrollIntoView())}return!0}}return!(!l.isAtom||o.depth!=i.depth-1)&&(t&&t(e.tr.delete(o.pos-l.nodeSize,o.pos).scrollIntoView()),!0)};function d(e,t,n=!1){for(let r=e;r;r="start"==t?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)return!1}return!1}const h=(e,t,n)=>{let{$head:i,empty:o}=e.selection,s=i;if(!o)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):i.parentOffset>0)return!1;s=f(i)}let a=s&&s.nodeBefore;return!(!a||!r.qv.isSelectable(a))&&(t&&t(e.tr.setSelection(r.qv.create(e.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)};function f(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function p(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const m=(e,t,n)=>{let i=p(e,n);if(!i)return!1;let o=v(i);if(!o)return!1;let l=o.nodeAfter;if(R(e,o,t))return!0;if(0==i.parent.content.size&&(d(l,"start")||r.qv.isSelectable(l))){let n=(0,a.dR)(e.doc,i.before(),i.after(),s.p2.empty);if(n&&n.slice.size<n.to-n.from){if(t){let i=e.tr.step(n);i.setSelection(d(l,"start")?r.Y1.findFrom(i.doc.resolve(i.mapping.map(o.pos)),1):r.qv.create(i.doc,i.mapping.map(o.pos))),t(i.scrollIntoView())}return!0}}return!(!l.isAtom||o.depth!=i.depth-1)&&(t&&t(e.tr.delete(o.pos,o.pos+l.nodeSize).scrollIntoView()),!0)},g=(e,t,n)=>{let{$head:i,empty:o}=e.selection,s=i;if(!o)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):i.parentOffset<i.parent.content.size)return!1;s=v(i)}let a=s&&s.nodeAfter;return!(!a||!r.qv.isSelectable(a))&&(t&&t(e.tr.setSelection(r.qv.create(e.doc,s.pos)).scrollIntoView()),!0)};function v(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const y=(e,t)=>{let n,i=e.selection,o=i instanceof r.qv;if(o){if(i.node.isTextblock||!(0,a.Mn)(e.doc,i.from))return!1;n=i.from}else if(n=(0,a.GJ)(e.doc,i.from,-1),null==n)return!1;if(t){let i=e.tr.join(n);o&&i.setSelection(r.qv.create(i.doc,n-e.doc.resolve(n).nodeBefore.nodeSize)),t(i.scrollIntoView())}return!0},b=(e,t)=>{let n,i=e.selection;if(i instanceof r.qv){if(i.node.isTextblock||!(0,a.Mn)(e.doc,i.to))return!1;n=i.to}else if(n=(0,a.GJ)(e.doc,i.to,1),null==n)return!1;return t&&t(e.tr.join(n).scrollIntoView()),!0},_=(e,t)=>{let{$from:n,$to:r}=e.selection,i=n.blockRange(r),o=i&&(0,a.k9)(i);return null!=o&&(t&&t(e.tr.lift(i,o).scrollIntoView()),!0)},w=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!(!n.parent.type.spec.code||!n.sameParent(r))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)};function x(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const S=(e,t)=>{let{$head:n,$anchor:i}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(i))return!1;let o=n.node(-1),s=n.indexAfter(-1),a=x(o.contentMatchAt(s));if(!a||!o.canReplaceWith(s,s,a))return!1;if(t){let i=n.after(),o=e.tr.replaceWith(i,i,a.createAndFill());o.setSelection(r.Y1.near(o.doc.resolve(i),1)),t(o.scrollIntoView())}return!0},E=(e,t)=>{let n=e.selection,{$from:i,$to:o}=n;if(n instanceof r.C1||i.parent.inlineContent||o.parent.inlineContent)return!1;let s=x(o.parent.contentMatchAt(o.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let n=(!i.parentOffset&&o.index()<o.parent.childCount?i:o).pos,a=e.tr.insert(n,s.createAndFill());a.setSelection(r.Bs.create(a.doc,n+1)),t(a.scrollIntoView())}return!0},M=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let r=n.before();if((0,a.Ax)(e.doc,r))return t&&t(e.tr.split(r).scrollIntoView()),!0}let r=n.blockRange(),i=r&&(0,a.k9)(r);return null!=i&&(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)};function T(e){return(t,n)=>{let{$from:i,$to:o}=t.selection;if(t.selection instanceof r.qv&&t.selection.node.isBlock)return!(!i.parentOffset||!(0,a.Ax)(t.doc,i.pos))&&(n&&n(t.tr.split(i.pos).scrollIntoView()),!0);if(!i.parent.isBlock)return!1;if(n){let s=o.parentOffset==o.parent.content.size,l=t.tr;(t.selection instanceof r.Bs||t.selection instanceof r.C1)&&l.deleteSelection();let c=0==i.depth?null:x(i.node(-1).contentMatchAt(i.indexAfter(-1))),u=e&&e(o.parent,s),d=u?[u]:s&&c?[{type:c}]:void 0,h=(0,a.Ax)(l.doc,l.mapping.map(i.pos),1,d);if(d||h||!(0,a.Ax)(l.doc,l.mapping.map(i.pos),1,c?[{type:c}]:void 0)||(c&&(d=[{type:c}]),h=!0),h&&(l.split(l.mapping.map(i.pos),1,d),!s&&!i.parentOffset&&i.parent.type!=c)){let e=l.mapping.map(i.before()),t=l.doc.resolve(e);c&&i.node(-1).canReplaceWith(t.index(),t.index()+1,c)&&l.setNodeMarkup(l.mapping.map(i.before()),c)}n(l.scrollIntoView())}return!0}}const C=T(),A=(e,t)=>{let n,{$from:i,to:o}=e.selection,s=i.sharedDepth(o);return 0!=s&&(n=i.before(s),t&&t(e.tr.setSelection(r.qv.create(e.doc,n))),!0)},k=(e,t)=>(t&&t(e.tr.setSelection(new r.C1(e.doc))),!0);function O(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,o=t.index();return!!(r&&i&&r.type.compatibleContent(i.type))&&(!r.content.size&&t.parent.canReplace(o-1,o)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!(!t.parent.canReplace(o,o+1)||!i.isTextblock&&!(0,a.Mn)(e.doc,t.pos))&&(n&&n(e.tr.clearIncompatible(t.pos,r.type,r.contentMatchAt(r.childCount)).join(t.pos).scrollIntoView()),!0))}function R(e,t,n){let i,o,l=t.nodeBefore,c=t.nodeAfter;if(l.type.spec.isolating||c.type.spec.isolating)return!1;if(O(e,t,n))return!0;let u=t.parent.canReplace(t.index(),t.index()+1);if(u&&(i=(o=l.contentMatchAt(l.childCount)).findWrapping(c.type))&&o.matchType(i[0]||c.type).validEnd){if(n){let r=t.pos+c.nodeSize,o=s.HY.empty;for(let e=i.length-1;e>=0;e--)o=s.HY.from(i[e].create(null,o));o=s.HY.from(l.copy(o));let u=e.tr.step(new a.FC(t.pos-1,r,t.pos,r,new s.p2(o,1,0),i.length,!0)),d=r+2*i.length;(0,a.Mn)(u.doc,d)&&u.join(d),n(u.scrollIntoView())}return!0}let h=r.Y1.findFrom(t,1),f=h&&h.$from.blockRange(h.$to),p=f&&(0,a.k9)(f);if(null!=p&&p>=t.depth)return n&&n(e.tr.lift(f,p).scrollIntoView()),!0;if(u&&d(c,"start",!0)&&d(l,"end")){let r=l,i=[];for(;;){if(i.push(r),r.isTextblock)break;r=r.lastChild}let o=c,u=1;for(;!o.isTextblock;o=o.firstChild)u++;if(r.canReplace(r.childCount,r.childCount,o.content)){if(n){let r=s.HY.empty;for(let e=i.length-1;e>=0;e--)r=s.HY.from(i[e].copy(r));let o=e.tr.step(new a.FC(t.pos-i.length,t.pos+c.nodeSize,t.pos+u,t.pos+c.nodeSize-u,new s.p2(r,i.length,0),0,!0));n(o.scrollIntoView())}return!0}}return!1}function P(e){return function(t,n){let i=t.selection,o=e<0?i.$from:i.$to,s=o.depth;while(o.node(s).isInline){if(!s)return!1;s--}return!!o.node(s).isTextblock&&(n&&n(t.tr.setSelection(r.Bs.create(t.doc,e<0?o.start(s):o.end(s)))),!0)}}const L=P(-1),D=P(1);function I(e,t=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),l=s&&(0,a.nd)(s,e,t);return!!l&&(r&&r(n.tr.wrap(s,l).scrollIntoView()),!0)}}function N(e,t=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:r},$to:{pos:s}}=n.selection.ranges[o];n.doc.nodesBetween(r,s,((r,o)=>{if(i)return!1;if(r.isTextblock&&!r.hasMarkup(e,t))if(r.type==e)i=!0;else{let t=n.doc.resolve(o),r=t.index();i=t.parent.canReplaceWith(r,r+1,e)}}))}if(!i)return!1;if(r){let i=n.tr;for(let r=0;r<n.selection.ranges.length;r++){let{$from:{pos:o},$to:{pos:s}}=n.selection.ranges[r];i.setBlockType(o,s,e,t)}r(i.scrollIntoView())}return!0}}function U(...e){return function(t,n,r){for(let i=0;i<e.length;i++)if(e[i](t,n,r))return!0;return!1}}let F=U(l,u,h),B=U(l,m,g);const V={Enter:U(w,E,M,C),"Mod-Enter":S,Backspace:F,"Mod-Backspace":F,"Shift-Backspace":F,Delete:B,"Mod-Delete":B,"Mod-a":k},z={"Ctrl-h":V["Backspace"],"Alt-Backspace":V["Mod-Backspace"],"Ctrl-d":V["Delete"],"Ctrl-Alt-Backspace":V["Mod-Delete"],"Alt-Delete":V["Mod-Delete"],"Alt-d":V["Mod-Delete"],"Ctrl-a":L,"Ctrl-e":D};for(let Dn in V)z[Dn]=V[Dn];"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!("undefined"==typeof os||!os.platform)&&os.platform();function j(e,t=null){return function(n,r){let{$from:i,$to:o}=n.selection,l=i.blockRange(o),c=!1,u=l;if(!l)return!1;if(l.depth>=2&&i.node(l.depth-1).type.compatibleContent(e)&&0==l.startIndex){if(0==i.index(l.depth-1))return!1;let e=n.doc.resolve(l.start-2);u=new s.Ts(e,e,l.depth),l.endIndex<l.parent.childCount&&(l=new s.Ts(i,n.doc.resolve(o.end(l.depth)),l.depth)),c=!0}let d=(0,a.nd)(u,e,t,l);return!!d&&(r&&r(H(n.tr,l,d,c,e).scrollIntoView()),!0)}}function H(e,t,n,r,i){let o=s.HY.empty;for(let a=n.length-1;a>=0;a--)o=s.HY.from(n[a].type.create(n[a].attrs,o));e.step(new a.FC(t.start-(r?2:0),t.end,t.start,t.end,new s.p2(o,0,0),n.length,!0));let l=0;for(let s=0;s<n.length;s++)n[s].type==i&&(l=s+1);let c=n.length-l,u=t.start+n.length-(r?2:0),d=t.parent;for(let s=t.startIndex,h=t.endIndex,f=!0;s<h;s++,f=!1)!f&&(0,a.Ax)(e.doc,u,c)&&(e.split(u,c),u+=2*c),u+=d.child(s).nodeSize;return e}function W(e){return function(t,n){let{$from:r,$to:i}=t.selection,o=r.blockRange(i,(t=>t.childCount>0&&t.firstChild.type==e));return!!o&&(!n||(r.node(o.depth-1).type==e?G(t,n,e,o):$(t,n,o)))}}function G(e,t,n,r){let i=e.tr,o=r.end,l=r.$to.end(r.depth);o<l&&(i.step(new a.FC(o-1,l,o,l,new s.p2(s.HY.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new s.Ts(i.doc.resolve(r.$from.pos),i.doc.resolve(l),r.depth));const c=(0,a.k9)(r);if(null==c)return!1;i.lift(r,c);let u=i.mapping.map(o,-1)-1;return(0,a.Mn)(i.doc,u)&&i.join(u),t(i.scrollIntoView()),!0}function $(e,t,n){let r=e.tr,i=n.parent;for(let s=n.end,a=n.endIndex-1,m=n.startIndex;a>m;a--)s-=i.child(a).nodeSize,r.delete(s-1,s+1);let o=r.doc.resolve(n.start),l=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let c=0==n.startIndex,u=n.endIndex==i.childCount,d=o.node(-1),h=o.index(-1);if(!d.canReplace(h+(c?0:1),h+1,l.content.append(u?s.HY.empty:s.HY.from(i))))return!1;let f=o.pos,p=f+l.nodeSize;return r.step(new a.FC(f-(c?1:0),p+(u?1:0),f+1,p-1,new s.p2((c?s.HY.empty:s.HY.from(i.copy(s.HY.empty))).append(u?s.HY.empty:s.HY.from(i.copy(s.HY.empty))),c?0:1,u?0:1),c?0:1)),t(r.scrollIntoView()),!0}function q(e){return function(t,n){let{$from:r,$to:i}=t.selection,o=r.blockRange(i,(t=>t.childCount>0&&t.firstChild.type==e));if(!o)return!1;let l=o.startIndex;if(0==l)return!1;let c=o.parent,u=c.child(l-1);if(u.type!=e)return!1;if(n){let r=u.lastChild&&u.lastChild.type==c.type,i=s.HY.from(r?e.create():null),l=new s.p2(s.HY.from(e.create(null,s.HY.from(c.type.create(null,i)))),r?3:1,0),d=o.start,h=o.end;n(t.tr.step(new a.FC(d-(r?3:1),h,d,h,l,1,!0)).scrollIntoView())}return!0}}function Y(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),filterTransaction:t.filterTransaction,plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}class X{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:i}=n,o=this.buildProps(i);return Object.fromEntries(Object.entries(e).map((([e,t])=>{const n=(...e)=>{const n=t(...e)(o);return i.getMeta("preventDispatch")||this.hasCustomState||r.dispatch(i),n};return[e,n]})))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:o}=r,s=[],a=!!e,l=e||i.tr,c=()=>(a||!t||l.getMeta("preventDispatch")||this.hasCustomState||o.dispatch(l),s.every((e=>!0===e))),u={...Object.fromEntries(Object.entries(n).map((([e,n])=>{const r=(...e)=>{const r=this.buildProps(l,t),i=n(...e)(r);return s.push(i),u};return[e,r]}))),run:c};return u}createCan(e){const{rawCommands:t,state:n}=this,r=!1,i=e||n.tr,o=this.buildProps(i,r),s=Object.fromEntries(Object.entries(t).map((([e,t])=>[e,(...e)=>t(...e)({...o,dispatch:void 0})])));return{...s,chain:()=>this.createChain(i,r)}}buildProps(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:o}=r;i.storedMarks&&e.setStoredMarks(i.storedMarks);const s={tr:e,editor:r,view:o,state:Y({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map((([e,t])=>[e,(...e)=>t(...e)(s)])))}};return s}}class Z{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach((e=>e.apply(this,t))),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter((e=>e!==t)):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function K(e,t,n){if(void 0===e.config[t]&&e.parent)return K(e.parent,t,n);if("function"===typeof e.config[t]){const r=e.config[t].bind({...n,parent:e.parent?K(e.parent,t,n):null});return r}return e.config[t]}function J(e){const t=e.filter((e=>"extension"===e.type)),n=e.filter((e=>"node"===e.type)),r=e.filter((e=>"mark"===e.type));return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function Q(e){const t=[],{nodeExtensions:n,markExtensions:r}=J(e),i=[...n,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach((e=>{const n={name:e.name,options:e.options,storage:e.storage},r=K(e,"addGlobalAttributes",n);if(!r)return;const i=r();i.forEach((e=>{e.types.forEach((n=>{Object.entries(e.attributes).forEach((([e,r])=>{t.push({type:n,name:e,attribute:{...o,...r}})}))}))}))})),i.forEach((e=>{const n={name:e.name,options:e.options,storage:e.storage},r=K(e,"addAttributes",n);if(!r)return;const i=r();Object.entries(i).forEach((([n,r])=>{const i={...o,...r};"function"===typeof(null===i||void 0===i?void 0:i.default)&&(i.default=i.default()),(null===i||void 0===i?void 0:i.isRequired)&&void 0===(null===i||void 0===i?void 0:i.default)&&delete i.default,t.push({type:e.name,name:n,attribute:i})}))})),t}function ee(e,t){if("string"===typeof e){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function te(...e){return e.filter((e=>!!e)).reduce(((e,t)=>{const n={...e};return Object.entries(t).forEach((([e,t])=>{const r=n[e];n[e]=r?"class"===e?[n[e],t].join(" "):"style"===e?[n[e],t].join("; "):t:t})),n}),{})}function ne(e,t){return t.filter((e=>e.attribute.rendered)).map((t=>t.attribute.renderHTML?t.attribute.renderHTML(e.attrs)||{}:{[t.name]:e.attrs[t.name]})).reduce(((e,t)=>te(e,t)),{})}function re(e){return"function"===typeof e}function ie(e,t=void 0,...n){return re(e)?t?e.bind(t)(...n):e(...n):e}function oe(e={}){return 0===Object.keys(e).length&&e.constructor===Object}function se(e){return"string"!==typeof e?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):"true"===e||"false"!==e&&e}function ae(e,t){return e.style?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(!1===r)return!1;const i=t.reduce(((e,t)=>{const r=t.attribute.parseHTML?t.attribute.parseHTML(n):se(n.getAttribute(t.name));return null===r||void 0===r?e:{...e,[t.name]:r}}),{});return{...r,...i}}}}function le(e){return Object.fromEntries(Object.entries(e).filter((([e,t])=>("attrs"!==e||!oe(t))&&(null!==t&&void 0!==t))))}function ce(e,t){var n;const r=Q(e),{nodeExtensions:i,markExtensions:o}=J(e),a=null===(n=i.find((e=>K(e,"topNode"))))||void 0===n?void 0:n.name,l=Object.fromEntries(i.map((n=>{const i=r.filter((e=>e.type===n.name)),o={name:n.name,options:n.options,storage:n.storage,editor:t},s=e.reduce(((e,t)=>{const r=K(t,"extendNodeSchema",o);return{...e,...r?r(n):{}}}),{}),a=le({...s,content:ie(K(n,"content",o)),marks:ie(K(n,"marks",o)),group:ie(K(n,"group",o)),inline:ie(K(n,"inline",o)),atom:ie(K(n,"atom",o)),selectable:ie(K(n,"selectable",o)),draggable:ie(K(n,"draggable",o)),code:ie(K(n,"code",o)),defining:ie(K(n,"defining",o)),isolating:ie(K(n,"isolating",o)),attrs:Object.fromEntries(i.map((e=>{var t;return[e.name,{default:null===(t=null===e||void 0===e?void 0:e.attribute)||void 0===t?void 0:t.default}]})))}),l=ie(K(n,"parseHTML",o));l&&(a.parseDOM=l.map((e=>ae(e,i))));const c=K(n,"renderHTML",o);c&&(a.toDOM=e=>c({node:e,HTMLAttributes:ne(e,i)}));const u=K(n,"renderText",o);return u&&(a.toText=u),[n.name,a]}))),c=Object.fromEntries(o.map((n=>{const i=r.filter((e=>e.type===n.name)),o={name:n.name,options:n.options,storage:n.storage,editor:t},s=e.reduce(((e,t)=>{const r=K(t,"extendMarkSchema",o);return{...e,...r?r(n):{}}}),{}),a=le({...s,inclusive:ie(K(n,"inclusive",o)),excludes:ie(K(n,"excludes",o)),group:ie(K(n,"group",o)),spanning:ie(K(n,"spanning",o)),code:ie(K(n,"code",o)),attrs:Object.fromEntries(i.map((e=>{var t;return[e.name,{default:null===(t=null===e||void 0===e?void 0:e.attribute)||void 0===t?void 0:t.default}]})))}),l=ie(K(n,"parseHTML",o));l&&(a.parseDOM=l.map((e=>ae(e,i))));const c=K(n,"renderHTML",o);return c&&(a.toDOM=e=>c({mark:e,HTMLAttributes:ne(e,i)})),[n.name,a]})));return new s.V_({topNode:a,nodes:l,marks:c})}function ue(e,t){return t.nodes[e]||t.marks[e]||null}function de(e,t){return Array.isArray(t)?t.some((t=>{const n="string"===typeof t?t:t.name;return n===e.name})):t}const he=(e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,((e,t,i,o)=>{var s,a;const l=(null===(a=(s=e.type.spec).toText)||void 0===a?void 0:a.call(s,{node:e,pos:t,parent:i,index:o}))||e.textContent||"%leaf%";n+=l.slice(0,Math.max(0,r-t))})),n};function fe(e){return"[object RegExp]"===Object.prototype.toString.call(e)}class pe{constructor(e){this.find=e.find,this.handler=e.handler}}const me=(e,t)=>{if(fe(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function ge(e){var t;const{editor:n,from:r,to:i,text:o,rules:s,plugin:a}=e,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||(null===(t=c.nodeBefore||c.nodeAfter)||void 0===t?void 0:t.marks.find((e=>e.type.spec.code))))return!1;let u=!1;const d=he(c)+o;return s.forEach((e=>{if(u)return;const t=me(d,e.find);if(!t)return;const s=l.state.tr,c=Y({state:l.state,transaction:s}),h={from:r-(t[0].length-o.length),to:i},{commands:f,chain:p,can:m}=new X({editor:n,state:c}),g=e.handler({state:c,range:h,match:t,commands:f,chain:p,can:m});null!==g&&s.steps.length&&(s.setMeta(a,{transform:s,from:r,to:i,text:o}),l.dispatch(s),u=!0)})),u}function ve(e){const{editor:t,rules:n}=e,i=new r.Sy({state:{init(){return null},apply(e,t){const n=e.getMeta(i);return n||(e.selectionSet||e.docChanged?null:t)}},props:{handleTextInput(e,r,o,s){return ge({editor:t,from:r,to:o,text:s,rules:n,plugin:i})},handleDOMEvents:{compositionend:e=>(setTimeout((()=>{const{$cursor:r}=e.state.selection;r&&ge({editor:t,from:r.pos,to:r.pos,text:"",rules:n,plugin:i})})),!1)},handleKeyDown(e,r){if("Enter"!==r.key)return!1;const{$cursor:o}=e.state.selection;return!!o&&ge({editor:t,from:o.pos,to:o.pos,text:"\n",rules:n,plugin:i})}},isInputRules:!0});return i}function ye(e){return"number"===typeof e}class be{constructor(e){this.find=e.find,this.handler=e.handler}}const _e=(e,t)=>{if(fe(t))return[...e.matchAll(t)];const n=t(e);return n?n.map((t=>{const n=[t.text];return n.index=t.index,n.input=e,n.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),n.push(t.replaceWith)),n})):[]};function we(e){const{editor:t,state:n,from:r,to:i,rule:o}=e,{commands:s,chain:a,can:l}=new X({editor:t,state:n}),c=[];n.doc.nodesBetween(r,i,((e,t)=>{if(!e.isTextblock||e.type.spec.code)return;const u=Math.max(r,t),d=Math.min(i,t+e.content.size),h=e.textBetween(u-t,d-t,void 0,"￼"),f=_e(h,o.find);f.forEach((e=>{if(void 0===e.index)return;const t=u+e.index+1,r=t+e[0].length,i={from:n.tr.mapping.map(t),to:n.tr.mapping.map(r)},d=o.handler({state:n,range:i,match:e,commands:s,chain:a,can:l});c.push(d)}))}));const u=c.every((e=>null!==e));return u}function xe(e){const{editor:t,rules:n}=e;let i=null,o=!1,s=!1;const a=n.map((e=>new r.Sy({view(e){const t=t=>{var n;i=(null===(n=e.dom.parentElement)||void 0===n?void 0:n.contains(t.target))?e.dom.parentElement:null};return window.addEventListener("dragstart",t),{destroy(){window.removeEventListener("dragstart",t)}}},props:{handleDOMEvents:{drop:e=>(s=i===e.dom.parentElement,!1),paste:(e,t)=>{var n;const r=null===(n=t.clipboardData)||void 0===n?void 0:n.getData("text/html");return o=!!(null===r||void 0===r?void 0:r.includes("data-pm-slice")),!1}}},appendTransaction:(n,r,i)=>{const a=n[0],l="paste"===a.getMeta("uiEvent")&&!o,c="drop"===a.getMeta("uiEvent")&&!s;if(!l&&!c)return;const u=r.doc.content.findDiffStart(i.doc.content),d=r.doc.content.findDiffEnd(i.doc.content);if(!ye(u)||!d||u===d.b)return;const h=i.tr,f=Y({state:i,transaction:h}),p=we({editor:t,state:f,from:Math.max(u-1,0),to:d.b-1,rule:e});return p&&h.steps.length?h:void 0}})));return a}function Se(e){const t=e.filter(((t,n)=>e.indexOf(t)!==n));return[...new Set(t)]}class Ee{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Ee.resolve(e),this.schema=ce(this.extensions,t),this.extensions.forEach((e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const n={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:ue(e.name,this.schema)};if("mark"===e.type){const r=null===(t=ie(K(e,"keepOnSplit",n)))||void 0===t||t;r&&this.splittableMarks.push(e.name)}const r=K(e,"onBeforeCreate",n);r&&this.editor.on("beforeCreate",r);const i=K(e,"onCreate",n);i&&this.editor.on("create",i);const o=K(e,"onUpdate",n);o&&this.editor.on("update",o);const s=K(e,"onSelectionUpdate",n);s&&this.editor.on("selectionUpdate",s);const a=K(e,"onTransaction",n);a&&this.editor.on("transaction",a);const l=K(e,"onFocus",n);l&&this.editor.on("focus",l);const c=K(e,"onBlur",n);c&&this.editor.on("blur",c);const u=K(e,"onDestroy",n);u&&this.editor.on("destroy",u)}))}static resolve(e){const t=Ee.sort(Ee.flatten(e)),n=Se(t.map((e=>e.name)));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map((e=>`'${e}'`)).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map((e=>{const t={name:e.name,options:e.options,storage:e.storage},n=K(e,"addExtensions",t);return n?[e,...this.flatten(n())]:e})).flat(10)}static sort(e){const t=100;return e.sort(((e,n)=>{const r=K(e,"priority")||t,i=K(n,"priority")||t;return r>i?-1:r<i?1:0}))}get commands(){return this.extensions.reduce(((e,t)=>{const n={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:ue(t.name,this.schema)},r=K(t,"addCommands",n);return r?{...e,...r()}:e}),{})}get plugins(){const{editor:e}=this,t=Ee.sort([...this.extensions].reverse()),n=[],r=[],i=t.map((t=>{const i={name:t.name,options:t.options,storage:t.storage,editor:e,type:ue(t.name,this.schema)},s=[],a=K(t,"addKeyboardShortcuts",i);let l={};if("mark"===t.type&&t.config.exitable&&(l.ArrowRight=()=>Rn.handleExit({editor:e,mark:t})),a){const t=Object.fromEntries(Object.entries(a()).map((([t,n])=>[t,()=>n({editor:e})])));l={...l,...t}}const c=(0,o.h)(l);s.push(c);const u=K(t,"addInputRules",i);de(t,e.options.enableInputRules)&&u&&n.push(...u());const d=K(t,"addPasteRules",i);de(t,e.options.enablePasteRules)&&d&&r.push(...d());const h=K(t,"addProseMirrorPlugins",i);if(h){const e=h();s.push(...e)}return s})).flat();return[ve({editor:e,rules:n}),...xe({editor:e,rules:r}),...i]}get attributes(){return Q(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=J(this.extensions);return Object.fromEntries(t.filter((e=>!!K(e,"addNodeView"))).map((t=>{const n=this.attributes.filter((e=>e.type===t.name)),r={name:t.name,options:t.options,storage:t.storage,editor:e,type:ee(t.name,this.schema)},i=K(t,"addNodeView",r);if(!i)return[];const o=(r,o,s,a)=>{const l=ne(r,n);return i()({editor:e,node:r,getPos:s,decorations:a,HTMLAttributes:l,extension:t})};return[t.name,o]})))}}function Me(e){return Object.prototype.toString.call(e).slice(8,-1)}function Te(e){return"Object"===Me(e)&&(e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype)}function Ce(e,t){const n={...e};return Te(e)&&Te(t)&&Object.keys(t).forEach((r=>{Te(t[r])?r in e?n[r]=Ce(e[r],t[r]):Object.assign(n,{[r]:t[r]}):Object.assign(n,{[r]:t[r]})})),n}class Ae{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ie(K(this,"addOptions",{name:this.name}))),this.storage=ie(K(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ae(e)}configure(e={}){const t=this.extend();return t.options=Ce(this.options,e),t.storage=ie(K(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new Ae(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ie(K(t,"addOptions",{name:t.name})),t.storage=ie(K(t,"addStorage",{name:t.name,options:t.options})),t}}function ke(e,t,n){const{from:r,to:i}=t,{blockSeparator:o="\n\n",textSerializers:s={}}=n||{};let a="",l=!0;return e.nodesBetween(r,i,((e,n,c,u)=>{var d;const h=null===s||void 0===s?void 0:s[e.type.name];h?(e.isBlock&&!l&&(a+=o,l=!0),c&&(a+=h({node:e,pos:n,parent:c,index:u,range:t}))):e.isText?(a+=null===(d=null===e||void 0===e?void 0:e.text)||void 0===d?void 0:d.slice(Math.max(r,n)-n,i-n),l=!1):e.isBlock&&!l&&(a+=o,l=!0)})),a}function Oe(e){return Object.fromEntries(Object.entries(e.nodes).filter((([,e])=>e.spec.toText)).map((([e,t])=>[e,t.spec.toText])))}const Re=Ae.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new r.Sy({key:new r.H$("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:i}=t,{ranges:o}=i,s=Math.min(...o.map((e=>e.$from.pos))),a=Math.max(...o.map((e=>e.$to.pos))),l=Oe(n),c={from:s,to:a};return ke(r,c,{textSerializers:l})}}})]}}),Pe=()=>({editor:e,view:t})=>(requestAnimationFrame((()=>{var n;e.isDestroyed||(t.dom.blur(),null===(n=null===window||void 0===window?void 0:window.getSelection())||void 0===n||n.removeAllRanges())})),!0),Le=(e=!1)=>({commands:t})=>t.setContent("",e),De=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:i}=r;return!n||(i.forEach((({$from:n,$to:r})=>{e.doc.nodesBetween(n.pos,r.pos,((e,n)=>{if(e.type.isText)return;const{doc:r,mapping:i}=t,o=r.resolve(i.map(n)),s=r.resolve(i.map(n+e.nodeSize)),l=o.blockRange(s);if(!l)return;const c=(0,a.k9)(l);if(e.type.isTextblock){const{defaultType:e}=o.parent.contentMatchAt(o.index());t.setNodeMarkup(l.start,e)}(c||0===c)&&t.lift(l,c)}))})),!0)},Ie=e=>t=>e(t),Ne=()=>({state:e,dispatch:t})=>E(e,t),Ue=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const i=e.selection.$anchor;for(let o=i.depth;o>0;o-=1){const n=i.node(o);if(n.type===r.type){if(t){const t=i.before(o),n=i.after(o);e.delete(t,n).scrollIntoView()}return!0}}return!1},Fe=e=>({tr:t,state:n,dispatch:r})=>{const i=ee(e,n.schema),o=t.selection.$anchor;for(let e=o.depth;e>0;e-=1){const n=o.node(e);if(n.type===i){if(r){const n=o.before(e),r=o.after(e);t.delete(n,r).scrollIntoView()}return!0}}return!1},Be=e=>({tr:t,dispatch:n})=>{const{from:r,to:i}=e;return n&&t.delete(r,i),!0},Ve=()=>({state:e,dispatch:t})=>l(e,t),ze=()=>({commands:e})=>e.keyboardShortcut("Enter"),je=()=>({state:e,dispatch:t})=>S(e,t);function He(e,t,n={strict:!0}){const r=Object.keys(t);return!r.length||r.every((r=>n.strict?t[r]===e[r]:fe(t[r])?t[r].test(e[r]):t[r]===e[r]))}function We(e,t,n={}){return e.find((e=>e.type===t&&He(e.attrs,n)))}function Ge(e,t,n={}){return!!We(e,t,n)}function $e(e,t,n={}){if(!e||!t)return;let r=e.parent.childAfter(e.parentOffset);if(e.parentOffset===r.offset&&0!==r.offset&&(r=e.parent.childBefore(e.parentOffset)),!r.node)return;const i=We([...r.node.marks],t,n);if(!i)return;let o=r.index,s=e.start()+r.offset,a=o+1,l=s+r.node.nodeSize;We([...r.node.marks],t,n);while(o>0&&i.isInSet(e.parent.child(o-1).marks))o-=1,s-=e.parent.child(o).nodeSize;while(a<e.parent.childCount&&Ge([...e.parent.child(a).marks],t,n))l+=e.parent.child(a).nodeSize,a+=1;return{from:s,to:l}}function qe(e,t){if("string"===typeof e){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}const Ye=(e,t={})=>({tr:n,state:i,dispatch:o})=>{const s=qe(e,i.schema),{doc:a,selection:l}=n,{$from:c,from:u,to:d}=l;if(o){const e=$e(c,s,t);if(e&&e.from<=u&&e.to>=d){const t=r.Bs.create(a,e.from,e.to);n.setSelection(t)}}return!0},Xe=e=>t=>{const n="function"===typeof e?e(t):e;for(let e=0;e<n.length;e+=1)if(n[e](t))return!0;return!1};function Ze(e){return e instanceof r.Bs}function Ke(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function Je(e,t=null){if(!t)return null;const n=r.Y1.atStart(e),i=r.Y1.atEnd(e);if("start"===t||!0===t)return n;if("end"===t)return i;const o=n.from,s=i.to;return"all"===t?r.Bs.create(e,Ke(0,o,s),Ke(e.content.size,o,s)):r.Bs.create(e,Ke(t,o,s),Ke(t,o,s))}function Qe(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const et=(e=null,t={})=>({editor:n,view:r,tr:i,dispatch:o})=>{t={scrollIntoView:!0,...t};const s=()=>{Qe()&&r.dom.focus(),requestAnimationFrame((()=>{n.isDestroyed||(r.focus(),(null===t||void 0===t?void 0:t.scrollIntoView)&&n.commands.scrollIntoView())}))};if(r.hasFocus()&&null===e||!1===e)return!0;if(o&&null===e&&!Ze(n.state.selection))return s(),!0;const a=Je(i.doc,e)||n.state.selection,l=n.state.selection.eq(a);return o&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},tt=(e,t)=>n=>e.every(((e,r)=>t(e,{...n,index:r}))),nt=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t);function rt(e){const t=`<body>${e}</body>`;return(new window.DOMParser).parseFromString(t,"text/html").body}function it(e,t,n){if(n={slice:!0,parseOptions:{},...n},"object"===typeof e&&null!==e)try{return Array.isArray(e)&&e.length>0?s.HY.fromArray(e.map((e=>t.nodeFromJSON(e)))):t.nodeFromJSON(e)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",r),it("",t,n)}if("string"===typeof e){const r=s.aw.fromSchema(t);return n.slice?r.parseSlice(rt(e),n.parseOptions).content:r.parse(rt(e),n.parseOptions)}return it("",t,n)}function ot(e,t,n){const i=e.steps.length-1;if(i<t)return;const o=e.steps[i];if(!(o instanceof a.Pu||o instanceof a.FC))return;const s=e.mapping.maps[i];let l=0;s.forEach(((e,t,n,r)=>{0===l&&(l=r)})),e.setSelection(r.Y1.near(e.doc.resolve(l),n))}const st=e=>e.toString().startsWith("<"),at=(e,t,n)=>({tr:r,dispatch:i,editor:o})=>{if(i){n={parseOptions:{},updateSelection:!0,...n};const i=it(t,o.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions}});if("<>"===i.toString())return!0;let{from:s,to:a}="number"===typeof e?{from:e,to:e}:e,l=!0,c=!0;const u=st(i)?i:[i];if(u.forEach((e=>{e.check(),l=!!l&&(e.isText&&0===e.marks.length),c=!!c&&e.isBlock})),s===a&&c){const{parent:e}=r.doc.resolve(s),t=e.isTextblock&&!e.type.spec.code&&!e.childCount;t&&(s-=1,a+=1)}l?Array.isArray(t)?r.insertText(t.map((e=>e.text||"")).join(""),s,a):"object"===typeof t&&t&&t.text?r.insertText(t.text,s,a):r.insertText(t,s,a):r.replaceWith(s,a,i),n.updateSelection&&ot(r,r.steps.length-1,-1)}return!0},lt=()=>({state:e,dispatch:t})=>y(e,t),ct=()=>({state:e,dispatch:t})=>b(e,t),ut=()=>({state:e,dispatch:t})=>u(e,t),dt=()=>({state:e,dispatch:t})=>m(e,t);function ht(){return"undefined"!==typeof navigator&&/Mac/.test(navigator.platform)}function ft(e){const t=e.split(/-(?!$)/);let n,r,i,o,s=t[t.length-1];"Space"===s&&(s=" ");for(let a=0;a<t.length-1;a+=1){const e=t[a];if(/^(cmd|meta|m)$/i.test(e))o=!0;else if(/^a(lt)?$/i.test(e))n=!0;else if(/^(c|ctrl|control)$/i.test(e))r=!0;else if(/^s(hift)?$/i.test(e))i=!0;else{if(!/^mod$/i.test(e))throw new Error(`Unrecognized modifier name: ${e}`);Qe()||ht()?o=!0:r=!0}}return n&&(s=`Alt-${s}`),r&&(s=`Ctrl-${s}`),o&&(s=`Meta-${s}`),i&&(s=`Shift-${s}`),s}const pt=e=>({editor:t,view:n,tr:r,dispatch:i})=>{const o=ft(e).split(/-(?!$)/),s=o.find((e=>!["Alt","Ctrl","Meta","Shift"].includes(e))),a=new KeyboardEvent("keydown",{key:"Space"===s?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction((()=>{n.someProp("handleKeyDown",(e=>e(n,a)))}));return null===l||void 0===l||l.steps.forEach((e=>{const t=e.map(r.mapping);t&&i&&r.maybeStep(t)})),!0};function mt(e,t,n={}){const{from:r,to:i,empty:o}=e.selection,s=t?ee(t,e.schema):null,a=[];e.doc.nodesBetween(r,i,((e,t)=>{if(e.isText)return;const n=Math.max(r,t),o=Math.min(i,t+e.nodeSize);a.push({node:e,from:n,to:o})}));const l=i-r,c=a.filter((e=>!s||s.name===e.node.type.name)).filter((e=>He(e.node.attrs,n,{strict:!1})));if(o)return!!c.length;const u=c.reduce(((e,t)=>e+t.to-t.from),0);return u>=l}const gt=(e,t={})=>({state:n,dispatch:r})=>{const i=ee(e,n.schema),o=mt(n,i,t);return!!o&&_(n,r)},vt=()=>({state:e,dispatch:t})=>M(e,t),yt=e=>({state:t,dispatch:n})=>{const r=ee(e,t.schema);return W(r)(t,n)},bt=()=>({state:e,dispatch:t})=>w(e,t);function _t(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function wt(e,t){const n="string"===typeof t?[t]:t;return Object.keys(e).reduce(((t,r)=>(n.includes(r)||(t[r]=e[r]),t)),{})}const xt=(e,t)=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const a=_t("string"===typeof e?e:e.name,r.schema);return!!a&&("node"===a&&(o=ee(e,r.schema)),"mark"===a&&(s=qe(e,r.schema)),i&&n.selection.ranges.forEach((e=>{r.doc.nodesBetween(e.$from.pos,e.$to.pos,((e,r)=>{o&&o===e.type&&n.setNodeMarkup(r,void 0,wt(e.attrs,t)),s&&e.marks.length&&e.marks.forEach((i=>{s===i.type&&n.addMark(r,r+e.nodeSize,s.create(wt(i.attrs,t)))}))}))})),!0)},St=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),Et=()=>({tr:e,commands:t})=>t.setTextSelection({from:0,to:e.doc.content.size}),Mt=()=>({state:e,dispatch:t})=>h(e,t),Tt=()=>({state:e,dispatch:t})=>g(e,t),Ct=()=>({state:e,dispatch:t})=>A(e,t),At=()=>({state:e,dispatch:t})=>D(e,t),kt=()=>({state:e,dispatch:t})=>L(e,t);function Ot(e,t,n={}){return it(e,t,{slice:!1,parseOptions:n})}const Rt=(e,t=!1,n={})=>({tr:r,editor:i,dispatch:o})=>{const{doc:s}=r,a=Ot(e,i.schema,n);return o&&r.replaceWith(0,s.content.size,a).setMeta("preventUpdate",!t),!0};function Pt(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Lt(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function Dt(e){return t=>Lt(t.$from,e)}function It(e,t){const n=s.PW.fromSchema(t).serializeFragment(e),r=document.implementation.createHTMLDocument(),i=r.createElement("div");return i.appendChild(n),i.innerHTML}function Nt(e,t){const n={from:0,to:e.content.size};return ke(e,n,t)}function Ut(e,t){const n=qe(t,e.schema),{from:r,to:i,empty:o}=e.selection,s=[];o?(e.storedMarks&&s.push(...e.storedMarks),s.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,i,(e=>{s.push(...e.marks)}));const a=s.find((e=>e.type.name===n.name));return a?{...a.attrs}:{}}function Ft(e,t){const n=ee(t,e.schema),{from:r,to:i}=e.selection,o=[];e.doc.nodesBetween(r,i,(e=>{o.push(e)}));const s=o.reverse().find((e=>e.type.name===n.name));return s?{...s.attrs}:{}}function Bt(e,t){const n=_t("string"===typeof t?t:t.name,e.schema);return"node"===n?Ft(e,t):"mark"===n?Ut(e,t):{}}function Vt(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach((t=>{const i=n.resolve(e-1),o=$e(i,t.type);o&&r.push({mark:t,...o})})):n.nodesBetween(e,t,((e,t)=>{r.push(...e.marks.map((n=>({from:t,to:t+e.nodeSize,mark:n}))))})),r}function zt(e,t,n){return Object.fromEntries(Object.entries(n).filter((([n])=>{const r=e.find((e=>e.type===t&&e.name===n));return!!r&&r.attribute.keepOnSplit})))}function jt(e,t,n={}){const{empty:r,ranges:i}=e.selection,o=t?qe(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter((e=>!o||o.name===e.type.name)).find((e=>He(e.attrs,n,{strict:!1})));let s=0;const a=[];if(i.forEach((({$from:t,$to:n})=>{const r=t.pos,i=n.pos;e.doc.nodesBetween(r,i,((e,t)=>{if(!e.isText&&!e.marks.length)return;const n=Math.max(r,t),o=Math.min(i,t+e.nodeSize),l=o-n;s+=l,a.push(...e.marks.map((e=>({mark:e,from:n,to:o}))))}))})),0===s)return!1;const l=a.filter((e=>!o||o.name===e.mark.type.name)).filter((e=>He(e.mark.attrs,n,{strict:!1}))).reduce(((e,t)=>e+t.to-t.from),0),c=a.filter((e=>!o||e.mark.type!==o&&e.mark.type.excludes(o))).reduce(((e,t)=>e+t.to-t.from),0),u=l>0?l+c:l;return u>=s}function Ht(e,t,n={}){if(!t)return mt(e,null,n)||jt(e,null,n);const r=_t(t,e.schema);return"node"===r?mt(e,t,n):"mark"===r&&jt(e,t,n)}function Wt(e,t){const{nodeExtensions:n}=J(t),r=n.find((t=>t.name===e));if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=ie(K(r,"group",i));return"string"===typeof o&&o.split(" ").includes("list")}function Gt(e){var t;const n=null===(t=e.type.createAndFill())||void 0===t?void 0:t.toJSON(),r=e.toJSON();return JSON.stringify(n)===JSON.stringify(r)}function $t(e){return e instanceof r.qv}function qt(e,t,n){const r=0,i=e.state.doc.content.size,o=Ke(t,r,i),s=Ke(n,r,i),a=e.coordsAtPos(o),l=e.coordsAtPos(s,-1),c=Math.min(a.top,l.top),u=Math.max(a.bottom,l.bottom),d=Math.min(a.left,l.left),h=Math.max(a.right,l.right),f=h-d,p=u-c,m=d,g=c,v={top:c,bottom:u,left:d,right:h,width:f,height:p,x:m,y:g};return{...v,toJSON:()=>v}}function Yt(e,t,n){var r;const{selection:i}=t;let o=null;if(Ze(i)&&(o=i.$cursor),o){const t=null!==(r=e.storedMarks)&&void 0!==r?r:o.marks();return!!n.isInSet(t)||!t.some((e=>e.type.excludes(n)))}const{ranges:s}=i;return s.some((({$from:t,$to:r})=>{let i=0===t.depth&&(e.doc.inlineContent&&e.doc.type.allowsMarkType(n));return e.doc.nodesBetween(t.pos,r.pos,((e,t,r)=>{if(i)return!1;if(e.isInline){const t=!r||r.type.allowsMarkType(n),o=!!n.isInSet(e.marks)||!e.marks.some((e=>e.type.excludes(n)));i=t&&o}return!i})),i}))}const Xt=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:s,ranges:a}=o,l=qe(e,r.schema);if(i)if(s){const e=Ut(r,l);n.addStoredMark(l.create({...e,...t}))}else a.forEach((e=>{const i=e.$from.pos,o=e.$to.pos;r.doc.nodesBetween(i,o,((e,r)=>{const s=Math.max(r,i),a=Math.min(r+e.nodeSize,o),c=e.marks.find((e=>e.type===l));c?e.marks.forEach((e=>{l===e.type&&n.addMark(s,a,l.create({...e.attrs,...t}))})):n.addMark(s,a,l.create(t))}))}));return Yt(r,n,l)},Zt=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),Kt=(e,t={})=>({state:n,dispatch:r,chain:i})=>{const o=ee(e,n.schema);return o.isTextblock?i().command((({commands:e})=>{const r=N(o,t)(n);return!!r||e.clearNodes()})).command((({state:e})=>N(o,t)(e,r))).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Jt=e=>({tr:t,dispatch:n})=>{if(n){const{doc:n}=t,i=Ke(e,0,n.content.size),o=r.qv.create(n,i);t.setSelection(o)}return!0},Qt=e=>({tr:t,dispatch:n})=>{if(n){const{doc:n}=t,{from:i,to:o}="number"===typeof e?{from:e,to:e}:e,s=r.Bs.atStart(n).from,a=r.Bs.atEnd(n).to,l=Ke(i,s,a),c=Ke(o,s,a),u=r.Bs.create(n,l,c);t.setSelection(u)}return!0},en=e=>({state:t,dispatch:n})=>{const r=ee(e,t.schema);return q(r)(t,n)};function tn(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter((e=>null===t||void 0===t?void 0:t.includes(e.type.name)));e.tr.ensureMarks(r)}}const nn=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:i,editor:o})=>{const{selection:s,doc:l}=t,{$from:c,$to:u}=s,d=o.extensionManager.attributes,h=zt(d,c.node().type.name,c.node().attrs);if(s instanceof r.qv&&s.node.isBlock)return!(!c.parentOffset||!(0,a.Ax)(l,c.pos))&&(i&&(e&&tn(n,o.extensionManager.splittableMarks),t.split(c.pos).scrollIntoView()),!0);if(!c.parent.isBlock)return!1;if(i){const i=u.parentOffset===u.parent.content.size;s instanceof r.Bs&&t.deleteSelection();const l=0===c.depth?void 0:Pt(c.node(-1).contentMatchAt(c.indexAfter(-1)));let d=i&&l?[{type:l,attrs:h}]:void 0,f=(0,a.Ax)(t.doc,t.mapping.map(c.pos),1,d);if(d||f||!(0,a.Ax)(t.doc,t.mapping.map(c.pos),1,l?[{type:l}]:void 0)||(f=!0,d=l?[{type:l,attrs:h}]:void 0),f&&(t.split(t.mapping.map(c.pos),1,d),l&&!i&&!c.parentOffset&&c.parent.type!==l)){const e=t.mapping.map(c.before()),n=t.doc.resolve(e);c.node(-1).canReplaceWith(n.index(),n.index()+1,l)&&t.setNodeMarkup(t.mapping.map(c.before()),l)}e&&tn(n,o.extensionManager.splittableMarks),t.scrollIntoView()}return!0},rn=e=>({tr:t,state:n,dispatch:i,editor:o})=>{var l;const c=ee(e,n.schema),{$from:u,$to:d}=n.selection,h=n.selection.node;if(h&&h.isBlock||u.depth<2||!u.sameParent(d))return!1;const f=u.node(-1);if(f.type!==c)return!1;const p=o.extensionManager.attributes;if(0===u.parent.content.size&&u.node(-1).childCount===u.indexAfter(-1)){if(2===u.depth||u.node(-3).type!==c||u.index(-2)!==u.node(-2).childCount-1)return!1;if(i){let e=s.HY.empty;const n=u.index(-1)?1:u.index(-2)?2:3;for(let t=u.depth-n;t>=u.depth-3;t-=1)e=s.HY.from(u.node(t).copy(e));const i=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3,o=zt(p,u.node().type.name,u.node().attrs),a=(null===(l=c.contentMatch.defaultType)||void 0===l?void 0:l.createAndFill(o))||void 0;e=e.append(s.HY.from(c.createAndFill(null,a)||void 0));const d=u.before(u.depth-(n-1));t.replace(d,u.after(-i),new s.p2(e,4-n,0));let h=-1;t.doc.nodesBetween(d,t.doc.content.size,((e,t)=>{if(h>-1)return!1;e.isTextblock&&0===e.content.size&&(h=t+1)})),h>-1&&t.setSelection(r.Bs.near(t.doc.resolve(h))),t.scrollIntoView()}return!0}const m=d.pos===u.end()?f.contentMatchAt(0).defaultType:null,g=zt(p,f.type.name,f.attrs),v=zt(p,u.node().type.name,u.node().attrs);t.delete(u.pos,d.pos);const y=m?[{type:c,attrs:g},{type:m,attrs:v}]:[{type:c,attrs:g}];if(!(0,a.Ax)(t.doc,u.pos,2))return!1;if(i){const{selection:e,storedMarks:r}=n,{splittableMarks:s}=o.extensionManager,a=r||e.$to.parentOffset&&e.$from.marks();if(t.split(u.pos,2,y).scrollIntoView(),!a||!i)return!0;const l=a.filter((e=>s.includes(e.type.name)));t.ensureMarks(l)}return!0},on=(e,t)=>{const n=Dt((e=>e.type===t))(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===r)return!0;const i=e.doc.nodeAt(r),o=n.node.type===(null===i||void 0===i?void 0:i.type)&&(0,a.Mn)(e.doc,n.pos);return!o||(e.join(n.pos),!0)},sn=(e,t)=>{const n=Dt((e=>e.type===t))(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(void 0===r)return!0;const i=e.doc.nodeAt(r),o=n.node.type===(null===i||void 0===i?void 0:i.type)&&(0,a.Mn)(e.doc,r);return!o||(e.join(r),!0)},an=(e,t,n,r={})=>({editor:i,tr:o,state:s,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:h}=i.extensionManager,f=ee(e,s.schema),p=ee(t,s.schema),{selection:m,storedMarks:g}=s,{$from:v,$to:y}=m,b=v.blockRange(y),_=g||m.$to.parentOffset&&m.$from.marks();if(!b)return!1;const w=Dt((e=>Wt(e.type.name,d)))(m);if(b.depth>=1&&w&&b.depth-w.depth<=1){if(w.node.type===f)return c.liftListItem(p);if(Wt(w.node.type.name,d)&&f.validContent(w.node.content)&&a)return l().command((()=>(o.setNodeMarkup(w.pos,f),!0))).command((()=>on(o,f))).command((()=>sn(o,f))).run()}return n&&_&&a?l().command((()=>{const e=u().wrapInList(f,r),t=_.filter((e=>h.includes(e.type.name)));return o.ensureMarks(t),!!e||c.clearNodes()})).wrapInList(f,r).command((()=>on(o,f))).command((()=>sn(o,f))).run():l().command((()=>{const e=u().wrapInList(f,r);return!!e||c.clearNodes()})).wrapInList(f,r).command((()=>on(o,f))).command((()=>sn(o,f))).run()},ln=(e,t={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,s=qe(e,r.schema),a=jt(r,s,t);return a?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,t)},cn=(e,t,n={})=>({state:r,commands:i})=>{const o=ee(e,r.schema),s=ee(t,r.schema),a=mt(r,o,n);return a?i.setNode(s):i.setNode(o,n)},un=(e,t={})=>({state:n,commands:r})=>{const i=ee(e,n.schema),o=mt(n,i,t);return o?r.lift(i):r.wrapIn(i,t)},dn=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(e))){if(t){const t=e.tr,n=o.transform;for(let e=n.steps.length-1;e>=0;e-=1)t.step(n.steps[e].invert(n.docs[e]));if(o.text){const n=t.doc.resolve(o.from).marks();t.replaceWith(o.from,o.to,e.schema.text(o.text,n))}else t.delete(o.from,o.to)}return!0}}return!1},hn=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:i}=n;return r||t&&i.forEach((t=>{e.removeMark(t.$from.pos,t.$to.pos)})),!0},fn=(e,t={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:s=!1}=t,{selection:a}=n,l=qe(e,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&s){let{from:e,to:t}=a;const r=null===(o=c.marks().find((e=>e.type===l)))||void 0===o?void 0:o.attrs,i=$e(c,l,r);i&&(e=i.from,t=i.to),n.removeMark(e,t,l)}else d.forEach((e=>{n.removeMark(e.$from.pos,e.$to.pos,l)}));return n.removeStoredMark(l),!0},pn=(e,t={})=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const a=_t("string"===typeof e?e:e.name,r.schema);return!!a&&("node"===a&&(o=ee(e,r.schema)),"mark"===a&&(s=qe(e,r.schema)),i&&n.selection.ranges.forEach((e=>{const i=e.$from.pos,a=e.$to.pos;r.doc.nodesBetween(i,a,((e,r)=>{o&&o===e.type&&n.setNodeMarkup(r,void 0,{...e.attrs,...t}),s&&e.marks.length&&e.marks.forEach((o=>{if(s===o.type){const l=Math.max(r,i),c=Math.min(r+e.nodeSize,a);n.addMark(l,c,s.create({...o.attrs,...t}))}}))}))})),!0)},mn=(e,t={})=>({state:n,dispatch:r})=>{const i=ee(e,n.schema);return I(i,t)(n,r)},gn=(e,t={})=>({state:n,dispatch:r})=>{const i=ee(e,n.schema);return j(i,t)(n,r)};var vn=Object.freeze({__proto__:null,blur:Pe,clearContent:Le,clearNodes:De,command:Ie,createParagraphNear:Ne,deleteCurrentNode:Ue,deleteNode:Fe,deleteRange:Be,deleteSelection:Ve,enter:ze,exitCode:je,extendMarkRange:Ye,first:Xe,focus:et,forEach:tt,insertContent:nt,insertContentAt:at,joinUp:lt,joinDown:ct,joinBackward:ut,joinForward:dt,keyboardShortcut:pt,lift:gt,liftEmptyBlock:vt,liftListItem:yt,newlineInCode:bt,resetAttributes:xt,scrollIntoView:St,selectAll:Et,selectNodeBackward:Mt,selectNodeForward:Tt,selectParentNode:Ct,selectTextblockEnd:At,selectTextblockStart:kt,setContent:Rt,setMark:Xt,setMeta:Zt,setNode:Kt,setNodeSelection:Jt,setTextSelection:Qt,sinkListItem:en,splitBlock:nn,splitListItem:rn,toggleList:an,toggleMark:ln,toggleNode:cn,toggleWrap:un,undoInputRule:dn,unsetAllMarks:hn,unsetMark:fn,updateAttributes:pn,wrapIn:mn,wrapInList:gn});const yn=Ae.create({name:"commands",addCommands(){return{...vn}}}),bn=Ae.create({name:"editable",addProseMirrorPlugins(){return[new r.Sy({key:new r.H$("editable"),props:{editable:()=>this.editor.options.editable}})]}}),_n=Ae.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new r.Sy({key:new r.H$("focusEvents"),props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),wn=Ae.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first((({commands:e})=>[()=>e.undoInputRule(),()=>e.command((({tr:t})=>{const{selection:n,doc:i}=t,{empty:o,$anchor:s}=n,{pos:a,parent:l}=s,c=r.Y1.atStart(i).from===a;return!(!(o&&c&&l.type.isTextblock)||l.textContent.length)&&e.clearNodes()})),()=>e.deleteSelection(),()=>e.joinBackward(),()=>e.selectNodeBackward()])),t=()=>this.editor.commands.first((({commands:e})=>[()=>e.deleteSelection(),()=>e.deleteCurrentNode(),()=>e.joinForward(),()=>e.selectNodeForward()])),n=()=>this.editor.commands.first((({commands:e})=>[()=>e.newlineInCode(),()=>e.createParagraphNear(),()=>e.liftEmptyBlock(),()=>e.splitBlock()])),i={Enter:n,"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},o={...i},s={...i,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Qe()||ht()?s:o},addProseMirrorPlugins(){return[new r.Sy({key:new r.H$("clearDocument"),appendTransaction:(e,t,n)=>{const i=e.some((e=>e.docChanged))&&!t.doc.eq(n.doc);if(!i)return;const{empty:o,from:s,to:a}=t.selection,l=r.Y1.atStart(t.doc).from,c=r.Y1.atEnd(t.doc).to,u=s===l&&a===c;if(o||!u)return;const d=0===n.doc.textBetween(0,n.doc.content.size," "," ").length;if(!d)return;const h=n.tr,f=Y({state:n,transaction:h}),{commands:p}=new X({editor:this.editor,state:f});return p.clearNodes(),h.steps.length?h:void 0}})]}}),xn=Ae.create({name:"tabindex",addProseMirrorPlugins(){return[new r.Sy({key:new r.H$("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var Sn=Object.freeze({__proto__:null,ClipboardTextSerializer:Re,Commands:yn,Editable:bn,FocusEvents:_n,Keymap:wn,Tabindex:xn});const En='.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 1px !important;\n  height: 1px !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}';function Mn(e,t){const n=document.querySelector("style[data-tiptap-style]");if(null!==n)return n;const r=document.createElement("style");return t&&r.setAttribute("nonce",t),r.setAttribute("data-tiptap-style",""),r.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(r),r}class Tn extends Z{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout((()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))}),0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=Mn(En,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const n=re(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});this.view.updateState(r)}unregisterPlugin(e){if(this.isDestroyed)return;const t="string"===typeof e?`${e}$`:e.key,n=this.state.reconfigure({plugins:this.state.plugins.filter((e=>!e.key.startsWith(t)))});this.view.updateState(n)}createExtensionManager(){const e=this.options.enableCoreExtensions?Object.values(Sn):[],t=[...e,...this.options.extensions].filter((e=>["extension","node","mark"].includes(null===e||void 0===e?void 0:e.type)));this.extensionManager=new Ee(t,this)}createCommandManager(){this.commandManager=new X({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const e=Ot(this.options.content,this.schema,this.options.parseOptions),t=Je(e,this.options.autofocus);this.view=new i.tk(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:r.yy.create({doc:e,selection:t||void 0})});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.createNodeViews();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction)return this.capturedTransaction?void e.steps.forEach((e=>{var t;return null===(t=this.capturedTransaction)||void 0===t?void 0:t.step(e)})):void(this.capturedTransaction=e);const t=this.state.apply(e),n=!this.state.selection.eq(t.selection);this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),n&&this.emit("selectionUpdate",{editor:this,transaction:e});const r=e.getMeta("focus"),i=e.getMeta("blur");r&&this.emit("focus",{editor:this,event:r.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),e.docChanged&&!e.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return Bt(this.state,e)}isActive(e,t){const n="string"===typeof e?e:null,r="string"===typeof e?t:e;return Ht(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return It(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t="\n\n",textSerializers:n={}}=e||{};return Nt(this.state.doc,{blockSeparator:t,textSerializers:{...Oe(this.schema),...n}})}get isEmpty(){return Gt(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(null===(e=this.view)||void 0===e?void 0:e.docView)}}function Cn(e){return new pe({find:e.find,handler:({state:t,range:n,match:r})=>{const i=ie(e.getAttributes,void 0,r);if(!1===i||null===i)return null;const{tr:o}=t,s=r[r.length-1],a=r[0];let l=n.to;if(s){const r=a.search(/\S/),c=n.from+a.indexOf(s),u=c+s.length,d=Vt(n.from,n.to,t.doc).filter((t=>{const n=t.mark.type.excluded;return n.find((n=>n===e.type&&n!==t.mark.type))})).filter((e=>e.to>c));if(d.length)return null;u<n.to&&o.delete(u,n.to),c>n.from&&o.delete(n.from+r,c),l=n.from+r+s.length,o.addMark(n.from+r,l,e.type.create(i||{})),o.removeStoredMark(e.type)}}})}function An(e){return new pe({find:e.find,handler:({state:t,range:n,match:r})=>{const i=ie(e.getAttributes,void 0,r)||{},{tr:o}=t,s=n.from;let a=n.to;if(r[1]){const t=r[0].lastIndexOf(r[1]);let n=s+t;n>a?n=a:a=n+r[1].length;const l=r[0][r[0].length-1];o.insertText(l,s+r[0].length-1),o.replaceWith(n,a,e.type.create(i))}else r[0]&&o.replaceWith(s,a,e.type.create(i))}})}function kn(e){return new pe({find:e.find,handler:({state:t,range:n,match:r})=>{const i=t.doc.resolve(n.from),o=ie(e.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,o)}})}function On(e){return new pe({find:e.find,handler:({state:t,range:n,match:r,chain:i})=>{const o=ie(e.getAttributes,void 0,r)||{},s=t.tr.delete(n.from,n.to),l=s.doc.resolve(n.from),c=l.blockRange(),u=c&&(0,a.nd)(c,e.type,o);if(!u)return null;if(s.wrap(c,u),e.keepMarks&&e.editor){const{selection:n,storedMarks:r}=t,{splittableMarks:i}=e.editor.extensionManager,o=r||n.$to.parentOffset&&n.$from.marks();if(o){const e=o.filter((e=>i.includes(e.type.name)));s.ensureMarks(e)}}if(e.keepAttributes){const t="bulletList"===e.type.name||"orderedList"===e.type.name?"listItem":"taskList";i().updateAttributes(t,o).run()}const d=s.doc.resolve(n.from-1).nodeBefore;d&&d.type===e.type&&(0,a.Mn)(s.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,d))&&s.join(n.from-1)}})}class Rn{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ie(K(this,"addOptions",{name:this.name}))),this.storage=ie(K(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Rn(e)}configure(e={}){const t=this.extend();return t.options=Ce(this.options,e),t.storage=ie(K(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new Rn(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ie(K(t,"addOptions",{name:t.name})),t.storage=ie(K(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:n}=e.state,r=e.state.selection.$from,i=r.pos===r.end();if(i){const i=r.marks(),o=!!i.find((e=>(null===e||void 0===e?void 0:e.type.name)===t.name));if(!o)return!1;const s=i.find((e=>(null===e||void 0===e?void 0:e.type.name)===t.name));return s&&n.removeStoredMark(s),n.insertText(" ",r.pos),e.view.dispatch(n),!0}return!1}}class Pn{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ie(K(this,"addOptions",{name:this.name}))),this.storage=ie(K(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Pn(e)}configure(e={}){const t=this.extend();return t.options=Ce(this.options,e),t.storage=ie(K(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new Pn(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ie(K(t,"addOptions",{name:t.name})),t.storage=ie(K(t,"addStorage",{name:t.name,options:t.options})),t}}function Ln(e){return new be({find:e.find,handler:({state:t,range:n,match:r})=>{const i=ie(e.getAttributes,void 0,r);if(!1===i||null===i)return null;const{tr:o}=t,s=r[r.length-1],a=r[0];let l=n.to;if(s){const r=a.search(/\S/),c=n.from+a.indexOf(s),u=c+s.length,d=Vt(n.from,n.to,t.doc).filter((t=>{const n=t.mark.type.excluded;return n.find((n=>n===e.type&&n!==t.mark.type))})).filter((e=>e.to>c));if(d.length)return null;u<n.to&&o.delete(u,n.to),c>n.from&&o.delete(n.from+r,c),l=n.from+r+s.length,o.addMark(n.from+r,l,e.type.create(i||{})),o.removeStoredMark(e.type)}}})}},1872:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(292),i=n(1418);const o=r.hj.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize"}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=(null===e||void 0===e?void 0:e.node)||this.editor.state.doc,n=(null===e||void 0===e?void 0:e.mode)||this.options.mode;if("textSize"===n){const e=t.textBetween(0,t.content.size,void 0," ");return e.length}return t.nodeSize},this.storage.words=e=>{const t=(null===e||void 0===e?void 0:e.node)||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," "),r=n.split(" ").filter((e=>""!==e));return r.length}},addProseMirrorPlugins(){return[new i.Sy({key:new i.H$("characterCount"),filterTransaction:(e,t)=>{const n=this.options.limit;if(!e.docChanged||0===n||null===n||void 0===n)return!0;const r=this.storage.characters({node:t.doc}),i=this.storage.characters({node:e.doc});if(i<=n)return!0;if(r>n&&i>n&&i<=r)return!0;if(r>n&&i>n&&i>r)return!1;const o=e.getMeta("paste");if(!o)return!1;const s=e.selection.$head.pos,a=i-n,l=s-a,c=s;e.deleteRange(l,c);const u=this.storage.characters({node:e.doc});return!(u>n)}})]}})},6602:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(292),i=(n(7658),n(7974)),o=n(1617),s=n(1418),a=(n(2405),n(9087)),l=n(4714),c=n(3035);const u=e=>{const t=document.createElement("span");t.classList.add("ProseMirror-yjs-cursor"),t.setAttribute("style",`border-color: ${e.color}`);const n=document.createElement("div");n.setAttribute("style",`background-color: ${e.color}`),n.insertBefore(document.createTextNode(e.name),null);const r=document.createTextNode("⁠"),i=document.createTextNode("⁠");return t.insertBefore(r,null),t.insertBefore(n,null),t.insertBefore(i,null),t},d=e=>({style:`background-color: ${e.color}70`,class:"ProseMirror-yjs-selection"}),h=/^#[0-9a-fA-F]{6}$/,f=(e,t,n,r)=>{const s=l.Gt.getState(e),u=s.doc,d=[];return null!=s.snapshot||null!=s.prevSnapshot||null===s.binding?o.EH.create(e.doc,[]):(t.getStates().forEach(((t,l)=>{if(l!==u.clientID&&null!=t.cursor){const f=t.user||{};null==f.color?f.color="#ffa500":h.test(f.color)||console.warn("A user uses an unsupported color format",f),null==f.name&&(f.name=`User: ${l}`);let p=(0,a.SF)(u,s.type,i.og(t.cursor.anchor),s.binding.mapping),m=(0,a.SF)(u,s.type,i.og(t.cursor.head),s.binding.mapping);if(null!==p&&null!==m){const t=c.Fp(e.doc.content.size-1,0);p=c.VV(p,t),m=c.VV(m,t),d.push(o.p.widget(m,(()=>n(f)),{key:l+"",side:10}));const i=c.VV(p,m),s=c.Fp(p,m);d.push(o.p.inline(i,s,r(f),{inclusiveEnd:!0,inclusiveStart:!1}))}}})),o.EH.create(e.doc,d))},p=(e,{cursorBuilder:t=u,selectionBuilder:n=d,getSelection:r=(e=>e.selection)}={},o="cursor")=>new s.Sy({key:l.uJ,state:{init(r,i){return f(i,e,t,n)},apply(r,i,o,s){const a=l.Gt.getState(s),c=r.getMeta(l.uJ);return a&&a.isChangeOrigin||c&&c.awarenessUpdated?f(s,e,t,n):i.map(r.mapping,r.doc)}},props:{decorations:e=>l.uJ.getState(e)},view:t=>{const n=()=>{t.docView&&(0,a.US)(t,l.uJ,{awarenessUpdated:!0})},s=()=>{const n=l.Gt.getState(t.state),s=e.getLocalState()||{};if(null!=n.binding)if(t.hasFocus()){const l=r(t.state),c=(0,a.JR)(l.anchor,n.type,n.binding.mapping),u=(0,a.JR)(l.head,n.type,n.binding.mapping);null!=s.cursor&&i.Uq(i.og(s.cursor.anchor),c)&&i.Uq(i.og(s.cursor.head),u)||e.setLocalStateField(o,{anchor:c,head:u})}else null!=s.cursor&&null!==(0,a.SF)(n.doc,n.type,i.og(s.cursor.anchor),n.binding.mapping)&&e.setLocalStateField(o,null)};return e.on("change",n),t.dom.addEventListener("focusin",s),t.dom.addEventListener("focusout",s),{update:s,destroy:()=>{t.dom.removeEventListener("focusin",s),t.dom.removeEventListener("focusout",s),e.off("change",n),e.setLocalStateField(o,null)}}}}),m=e=>Array.from(e.entries()).map((([e,t])=>({clientId:e,...t.user}))),g=()=>null,v=r.hj.create({name:"collaborationCursor",addOptions(){return{provider:null,user:{name:null,color:null},render:e=>{const t=document.createElement("span");t.classList.add("collaboration-cursor__caret"),t.setAttribute("style",`border-color: ${e.color}`);const n=document.createElement("div");return n.classList.add("collaboration-cursor__label"),n.setAttribute("style",`background-color: ${e.color}`),n.insertBefore(document.createTextNode(e.name),null),t.insertBefore(n,null),t},onUpdate:g}},onCreate(){this.options.onUpdate!==g&&console.warn('[tiptap warn]: DEPRECATED: The "onUpdate" option is deprecated. Please use `editor.storage.collaborationCursor.users` instead. Read more: https://tiptap.dev/api/extensions/collaboration-cursor')},addStorage(){return{users:[]}},addCommands(){return{updateUser:e=>()=>(this.options.user=e,this.options.provider.awareness.setLocalStateField("user",this.options.user),!0),user:e=>({editor:t})=>(console.warn('[tiptap warn]: DEPRECATED: The "user" command is deprecated. Please use "updateUser" instead. Read more: https://tiptap.dev/api/extensions/collaboration-cursor'),t.commands.updateUser(e))}},addProseMirrorPlugins(){return[p((()=>(this.options.provider.awareness.setLocalStateField("user",this.options.user),this.storage.users=m(this.options.provider.awareness.states),this.options.provider.awareness.on("update",(()=>{this.storage.users=m(this.options.provider.awareness.states)})),this.options.provider.awareness))(),{cursorBuilder:this.options.render})]}})},4917:function(e,t,n){"use strict";n.d(t,{ZP:function(){return J}});var r=n(292),i=n(4714),o=n(1418),s=(n(7658),n(1703),n(5611)),a=n(8443),l=n(3035),c=n(3913),u=n(8674);const d=/[\uD800-\uDBFF]/,h=/[\uDC00-\uDFFF]/,f=(e,t)=>{let n=0,r=0;while(n<e.length&&n<t.length&&e[n]===t[n])n++;n>0&&d.test(e[n-1])&&n--;while(r+n<e.length&&r+n<t.length&&e[e.length-r-1]===t[t.length-r-1])r++;return r>0&&h.test(e[e.length-r])&&r--,{index:n,remove:e.length-n-r,insert:t.slice(n,t.length-r)}},p=f;var m=n(1755),g=n(7974),v=n(9087),y=n(3751),b=n(2269),_=n(5329),w=n(9765);const x=(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&t.sv.get(e.id.client)>e.id.clock&&!g.uY(t.ds,e.id),S=[{light:"#ecd44433",dark:"#ecd444"}],E=(e,t,n)=>{if(!e.has(n)){if(e.size<t.length){const n=u.Ue();e.forEach((e=>n.add(e))),t=t.filter((e=>!n.has(e)))}e.set(n,y.kw(t))}return e.get(n)},M=(e,{colors:t=S,colorMapping:n=new Map,permanentUserData:r=null,onFirstRender:s=(()=>{})}={})=>{let a,l=!1;const c=new o.Sy({props:{editable:e=>{const t=i.Gt.getState(e);return null==t.snapshot&&null==t.prevSnapshot}},key:i.Gt,state:{init:(i,o)=>({type:e,doc:e.doc,binding:null,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,colors:t,colorMapping:n,permanentUserData:r}),apply:(e,t)=>{const n=e.getMeta(i.Gt);if(void 0!==n){t=Object.assign({},t);for(const e in n)t[e]=n[e]}return t.isChangeOrigin=void 0!==n&&!!n.isChangeOrigin,null!==t.binding&&(void 0===n||null==n.snapshot&&null==n.prevSnapshot||w.Vs(0,(()=>{null==t.binding||t.binding.isDestroyed||(null==n.restore?t.binding._renderSnapshot(n.snapshot,n.prevSnapshot,t):(t.binding._renderSnapshot(n.snapshot,n.snapshot,t),delete t.restore,delete t.snapshot,delete t.prevSnapshot,t.binding._prosemirrorChanged(t.binding.prosemirrorView.state.doc)))}))),t}},view:t=>{const n=new A(e,t);return null!=a&&clearTimeout(a),a=w.Vs(0,(()=>{n._forceRerender(),t.dispatch(t.state.tr.setMeta(i.Gt,{binding:n})),s()})),{update:()=>{const e=c.getState(t.state);null==e.snapshot&&null==e.prevSnapshot&&(l||null!==t.state.doc.content.findDiffStart(t.state.doc.type.createAndFill().content))&&(l=!0,n._prosemirrorChanged(t.state.doc))},destroy:()=>{clearTimeout(a),n.destroy()}}}});return c},T=(e,t,n)=>{if(null!==t&&null!==t.anchor&&null!==t.head){const r=(0,v.SF)(n.doc,n.type,t.anchor,n.mapping),i=(0,v.SF)(n.doc,n.type,t.head,n.mapping);null!==r&&null!==i&&(e=e.setSelection(o.Bs.create(e.doc,r,i)))}},C=(e,t)=>({anchor:(0,v.JR)(t.selection.anchor,e.type,e.mapping),head:(0,v.JR)(t.selection.head,e.type,e.mapping)});class A{constructor(e,t){this.type=e,this.prosemirrorView=t,this.mux=(0,s.M)(),this.isDestroyed=!1,this.mapping=new Map,this._observeFunction=this._typeChanged.bind(this),this.doc=e.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{null===this.beforeTransactionSelection&&(this.beforeTransactionSelection=C(this,t.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),e.observeDeep(this._observeFunction),this._domSelectionInView=null}get _tr(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}_isLocalCursorInView(){return!!this.prosemirrorView.hasFocus()&&(b.jU&&null===this._domSelectionInView&&(w.Vs(0,(()=>{this._domSelectionInView=null})),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView)}_isDomSelectionInView(){const e=this.prosemirrorView._root.getSelection(),t=this.prosemirrorView._root.createRange();t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset);const n=t.getClientRects();0===n.length&&t.startContainer&&t.collapsed&&t.selectNodeContents(t.startContainer);const r=t.getBoundingClientRect(),i=_.JU.documentElement;return r.bottom>=0&&r.right>=0&&r.left<=(window.innerWidth||i.clientWidth||0)&&r.top<=(window.innerHeight||i.clientHeight||0)}renderSnapshot(e,t){t||(t=g.Ox(g.VG(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(i.Gt,{snapshot:e,prevSnapshot:t}))}unrenderSnapshot(){this.mapping=new Map,this.mux((()=>{const e=this.type.toArray().map((e=>O(e,this.prosemirrorView.state.schema,this.mapping))).filter((e=>null!==e)),t=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new a.p2(new a.HY(e),0,0));t.setMeta(i.Gt,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(t)}))}_forceRerender(){this.mapping=new Map,this.mux((()=>{const e=this.type.toArray().map((e=>O(e,this.prosemirrorView.state.schema,this.mapping))).filter((e=>null!==e)),t=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new a.p2(new a.HY(e),0,0));this.prosemirrorView.dispatch(t.setMeta(i.Gt,{isChangeOrigin:!0}))}))}_renderSnapshot(e,t,n){e||(e=g.CO(this.doc)),this.mapping=new Map,this.mux((()=>{this.doc.transact((r=>{const o=n.permanentUserData;o&&o.dss.forEach((e=>{g.UQ(r,e,(e=>{}))}));const s=(e,t)=>{const r="added"===e?o.getUserByClientId(t.client):o.getUserByDeletedId(t);return{user:r,type:e,color:E(n.colorMapping,n.colors,r)}},l=g.ud(this.type,new g.aC(t.ds,e.sv)).map((n=>!n._item.deleted||x(n._item,e)||x(n._item,t)?O(n,this.prosemirrorView.state.schema,new Map,e,t,s):null)).filter((e=>null!==e)),c=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new a.p2(new a.HY(l),0,0));this.prosemirrorView.dispatch(c.setMeta(i.Gt,{isChangeOrigin:!0}))}),i.Gt)}))}_typeChanged(e,t){const n=i.Gt.getState(this.prosemirrorView.state);0!==e.length&&null==n.snapshot&&null==n.prevSnapshot?this.mux((()=>{const e=(e,t)=>this.mapping.delete(t);g.UQ(t,t.deleteSet,(e=>e.constructor===g.ck&&this.mapping.delete(e.content.type))),t.changed.forEach(e),t.changedParentTypes.forEach(e);const n=this.type.toArray().map((e=>k(e,this.prosemirrorView.state.schema,this.mapping))).filter((e=>null!==e));let r=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new a.p2(new a.HY(n),0,0));T(r,this.beforeTransactionSelection,this),r=r.setMeta(i.Gt,{isChangeOrigin:!0}),null!==this.beforeTransactionSelection&&this._isLocalCursorInView()&&r.scrollIntoView(),this.prosemirrorView.dispatch(r)})):this.renderSnapshot(n.snapshot,n.prevSnapshot)}_prosemirrorChanged(e){this.mux((()=>{this.doc.transact((()=>{G(this.doc,this.type,e,this.mapping),this.beforeTransactionSelection=C(this,this.prosemirrorView.state)}),i.Gt)}))}destroy(){this.isDestroyed=!0,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions)}}const k=(e,t,n,r,i,o)=>{const s=n.get(e);if(void 0===s){if(e instanceof g.lt)return O(e,t,n,r,i,o);throw m.Nw()}return s},O=(e,t,n,r,o,s)=>{const a=[],l=e=>{if(e.constructor===g.lt){const i=k(e,t,n,r,o,s);null!==i&&a.push(i)}else{const i=R(e,t,n,r,o,s);null!==i&&i.forEach((e=>{null!==e&&a.push(e)}))}};void 0===r||void 0===o?e.toArray().forEach(l):g.ud(e,new g.aC(o.ds,r.sv)).forEach(l);try{const i=e.getAttributes(r);void 0!==r&&(x(e._item,r)?x(e._item,o)||(i.ychange=s?s("added",e._item.id):{type:"added"}):i.ychange=s?s("removed",e._item.id):{type:"removed"});const l=t.node(e.nodeName,i,a);return n.set(e,l),l}catch(c){return e.doc.transact((t=>{e._item.delete(t)}),i.Gt),n.delete(e),null}},R=(e,t,n,r,o,s)=>{const a=[],l=e.toDelta(r,o,s);try{for(let e=0;e<l.length;e++){const n=l[e],r=[];for(const e in n.attributes)r.push(t.mark(e,n.attributes[e]));a.push(t.text(n.insert,r))}}catch(c){return e.doc.transact((t=>{e._item.delete(t)}),i.Gt),null}return a},P=(e,t)=>{const n=new g.eI,r=e.map((e=>({insert:e.text,attributes:W(e.marks)})));return n.applyDelta(r),t.set(n,e),n},L=(e,t)=>{const n=new g.lt(e.type.name);for(const r in e.attrs){const t=e.attrs[r];null!==t&&"ychange"!==r&&n.setAttribute(r,t)}return n.insert(0,U(e).map((e=>D(e,t)))),t.set(n,e),n},D=(e,t)=>e instanceof Array?P(e,t):L(e,t),I=e=>"object"===typeof e&&null!==e,N=(e,t)=>{const n=Object.keys(e).filter((t=>null!==e[t]));let r=n.length===Object.keys(t).filter((e=>null!==t[e])).length;for(let i=0;i<n.length&&r;i++){const o=n[i],s=e[o],a=t[o];r="ychange"===o||s===a||I(s)&&I(a)&&N(s,a)}return r},U=e=>{const t=e.content.content,n=[];for(let r=0;r<t.length;r++){const e=t[r];if(e.isText){const e=[];for(let n=t[r];r<t.length&&n.isText;n=t[++r])e.push(n);r--,n.push(e)}else n.push(e)}return n},F=(e,t)=>{const n=e.toDelta();return n.length===t.length&&n.every(((e,n)=>e.insert===t[n].text&&c.XP(e.attributes||{}).length===t[n].marks.length&&t[n].marks.every((t=>N(e.attributes[t.type.name]||{},t.attrs)))))},B=(e,t)=>{if(e instanceof g.lt&&!(t instanceof Array)&&$(e,t)){const n=U(t);return e._length===n.length&&N(e.getAttributes(),t.attrs)&&e.toArray().every(((e,t)=>B(e,n[t])))}return e instanceof g.eI&&t instanceof Array&&F(e,t)},V=(e,t)=>e===t||e instanceof Array&&t instanceof Array&&e.length===t.length&&e.every(((e,n)=>t[n]===e)),z=(e,t,n)=>{const r=e.toArray(),i=U(t),o=i.length,s=r.length,a=l.VV(s,o);let c=0,u=0,d=!1;for(;c<a;c++){const e=r[c],t=i[c];if(V(n.get(e),t))d=!0;else if(!B(e,t))break}for(;c+u<a;u++){const e=r[s-u-1],t=i[o-u-1];if(V(n.get(e),t))d=!0;else if(!B(e,t))break}return{equalityFactor:c+u,foundMappedChild:d}},j=e=>{let t="",n=e._start;const r={};while(null!==n)n.deleted||(n.countable&&n.content instanceof g.$_?t+=n.content.str:n.content instanceof g.MM&&(r[n.content.key]=null)),n=n.right;return{str:t,nAttrs:r}},H=(e,t,n)=>{n.set(e,t);const{nAttrs:r,str:i}=j(e),o=t.map((e=>({insert:e.text,attributes:Object.assign({},r,W(e.marks))}))),{insert:s,remove:a,index:l}=p(i,o.map((e=>e.insert)).join(""));e.delete(l,a),e.insert(l,s),e.applyDelta(o.map((e=>({retain:e.insert.length,attributes:e.attributes}))))},W=e=>{const t={};return e.forEach((e=>{"ychange"!==e.type.name&&(t[e.type.name]=e.attrs)})),t},G=(e,t,n,r)=>{if(t instanceof g.lt&&t.nodeName!==n.type.name)throw new Error("node name mismatch!");if(r.set(t,n),t instanceof g.lt){const e=t.getAttributes(),r=n.attrs;for(const n in r)null!==r[n]?e[n]!==r[n]&&"ychange"!==n&&t.setAttribute(n,r[n]):t.removeAttribute(n);for(const n in e)void 0===r[n]&&t.removeAttribute(n)}const o=U(n),s=o.length,a=t.toArray(),c=a.length,u=l.VV(s,c);let d=0,h=0;for(;d<u;d++){const e=a[d],t=o[d];if(!V(r.get(e),t)){if(!B(e,t))break;r.set(e,t)}}for(;h+d+1<u;h++){const e=a[c-h-1],t=o[s-h-1];if(!V(r.get(e),t)){if(!B(e,t))break;r.set(e,t)}}e.transact((()=>{while(c-d-h>0&&s-d-h>0){const n=a[d],i=o[d],l=a[c-h-1],u=o[s-h-1];if(n instanceof g.eI&&i instanceof Array)F(n,i)||H(n,i,r),d+=1;else{let o=n instanceof g.lt&&$(n,i),s=l instanceof g.lt&&$(l,u);if(o&&s){const e=z(n,i,r),t=z(l,u,r);e.foundMappedChild&&!t.foundMappedChild?s=!1:!e.foundMappedChild&&t.foundMappedChild||e.equalityFactor<t.equalityFactor?o=!1:s=!1}o?(G(e,n,i,r),d+=1):s?(G(e,l,u,r),h+=1):(t.delete(d,1),t.insert(d,[D(i,r)]),d+=1)}}const n=c-d-h;if(1===c&&0===s&&a[0]instanceof g.eI?a[0].delete(0,a[0].length):n>0&&t.delete(d,n),d+h<s){const e=[];for(let t=d;t<s-h;t++)e.push(D(o[t],r));t.insert(d,e)}}),i.Gt)},$=(e,t)=>!(t instanceof Array)&&e.nodeName===t.type.name,q=e=>{const t=i.Gk.getState(e).undoManager;if(null!=t)return t.undo(),!0},Y=e=>{const t=i.Gk.getState(e).undoManager;if(null!=t)return t.redo(),!0},X=new Set(["paragraph"]),Z=(e,t)=>!(e instanceof g.ck)||!(e.content instanceof g.zc)||!(e.content.type instanceof g.xv||e.content.type instanceof g.lt&&t.has(e.content.type.nodeName))||0===e.content.type._length,K=({protectedNodes:e=X,trackedOrigins:t=[],undoManager:n=null}={})=>new o.Sy({key:i.Gk,state:{init:(r,o)=>{const s=i.Gt.getState(o),a=n||new g.H6(s.type,{trackedOrigins:new Set([i.Gt].concat(t)),deleteFilter:t=>Z(t,e)});return{undoManager:a,prevSel:null,hasUndoOps:a.undoStack.length>0,hasRedoOps:a.redoStack.length>0}},apply:(e,t,n,r)=>{const o=i.Gt.getState(r).binding,s=t.undoManager,a=s.undoStack.length>0,l=s.redoStack.length>0;return o?{undoManager:s,prevSel:C(o,n),hasUndoOps:a,hasRedoOps:l}:a!==t.hasUndoOps||l!==t.hasRedoOps?Object.assign({},t,{hasUndoOps:s.undoStack.length>0,hasRedoOps:s.redoStack.length>0}):t}},view:e=>{const t=i.Gt.getState(e.state),n=i.Gk.getState(e.state).undoManager;return n.on("stack-item-added",(({stackItem:n})=>{const r=t.binding;r&&n.meta.set(r,i.Gk.getState(e.state).prevSel)})),n.on("stack-item-popped",(({stackItem:e})=>{const n=t.binding;n&&(n.beforeTransactionSelection=e.meta.get(n)||n.beforeTransactionSelection)})),{destroy:()=>{n.destroy()}}}}),J=r.hj.create({name:"collaboration",priority:1e3,addOptions(){return{document:null,field:"default",fragment:null}},onCreate(){this.editor.extensionManager.extensions.find((e=>"history"===e.name))&&console.warn('[tiptap warn]: "@tiptap/extension-collaboration" comes with its own history support and is not compatible with "@tiptap/extension-history".')},addCommands(){return{undo:()=>({tr:e,state:t,dispatch:n})=>{e.setMeta("preventDispatch",!0);const r=i.Gk.getState(t).undoManager;return 0!==r.undoStack.length&&(!n||q(t))},redo:()=>({tr:e,state:t,dispatch:n})=>{e.setMeta("preventDispatch",!0);const r=i.Gk.getState(t).undoManager;return 0!==r.redoStack.length&&(!n||Y(t))}}},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo()}},addProseMirrorPlugins(){const e=this.options.fragment?this.options.fragment:this.options.document.getXmlFragment(this.options.field),t=K(),n=t.spec.view;return t.spec.view=e=>{const{undoManager:t}=i.Gk.getState(e.state);t.restore&&(t.restore(),t.restore=()=>{});const r=n(e);return{destroy:()=>{const e=t.trackedOrigins.has(t),n=t._observers;t.restore=()=>{e&&t.trackedOrigins.add(t),t.doc.on("afterTransaction",t.afterTransactionHandler),t._observers=n},r.destroy()}}},[M(e),t]}})},1537:function(e,t,n){"use strict";n.d(t,{ZP:function(){return s}});var r=n(292);const i=/(?:^|\s)((?:==)((?:[^~=]+))(?:==))$/,o=/(?:^|\s)((?:==)((?:[^~=]+))(?:==))/g,s=r.vc.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:e=>e.getAttribute("data-color")||e.style.backgroundColor,renderHTML:e=>e.color?{"data-color":e.color,style:`background-color: ${e.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:e}){return["mark",(0,r.P1)(this.options.HTMLAttributes,e),0]},addCommands(){return{setHighlight:e=>({commands:t})=>t.setMark(this.name,e),toggleHighlight:e=>({commands:t})=>t.toggleMark(this.name,e),unsetHighlight:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[(0,r.Cf)({find:i,type:this.type})]},addPasteRules(){return[(0,r.K9)({find:o,type:this.type})]}})},599:function(e,t,n){"use strict";n.d(t,{ZP:function(){return o}});var r=n(292);const i=/^\s*(\[([( |x])?\])\s$/,o=r.NB.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{}}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>"true"===e.getAttribute("data-checked"),renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",(0,r.P1)(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:r})=>{const i=document.createElement("li"),o=document.createElement("label"),s=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div");return o.contentEditable="false",a.type="checkbox",a.addEventListener("change",(t=>{if(!r.isEditable&&!this.options.onReadOnlyChecked)return void(a.checked=!a.checked);const{checked:i}=t.target;r.isEditable&&"function"===typeof n&&r.chain().focus(void 0,{scrollIntoView:!1}).command((({tr:e})=>{const t=n(),r=e.doc.nodeAt(t);return e.setNodeMarkup(t,void 0,{...null===r||void 0===r?void 0:r.attrs,checked:i}),!0})).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,i)||(a.checked=!a.checked))})),Object.entries(this.options.HTMLAttributes).forEach((([e,t])=>{i.setAttribute(e,t)})),i.dataset.checked=e.attrs.checked,e.attrs.checked&&a.setAttribute("checked","checked"),o.append(a,s),i.append(o,l),Object.entries(t).forEach((([e,t])=>{i.setAttribute(e,t)})),{dom:i,contentDOM:l,update:e=>e.type===this.type&&(i.dataset.checked=e.attrs.checked,e.attrs.checked?a.setAttribute("checked","checked"):a.removeAttribute("checked"),!0)}}},addInputRules(){return[(0,r.S0)({find:i,type:this.type,getAttributes:e=>({checked:"x"===e[e.length-1]})})]}})},7828:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(292);const i=r.NB.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",(0,r.P1)(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}})},9972:function(e,t,n){"use strict";n.d(t,{Z:function(){return Oe}});n(7658);var r=n(292);const i=/^\s*>\s$/,o=r.NB.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return["blockquote",(0,r.P1)(this.options.HTMLAttributes,e),0]},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[(0,r.S0)({find:i,type:this.type})]}}),s=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,a=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,l=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,c=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,u=r.vc.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!==e.style.fontWeight&&null},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return["strong",(0,r.P1)(this.options.HTMLAttributes,e),0]},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[(0,r.Cf)({find:s,type:this.type}),(0,r.Cf)({find:l,type:this.type})]},addPasteRules(){return[(0,r.K9)({find:a,type:this.type}),(0,r.K9)({find:c,type:this.type})]}}),d=r.NB.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",(0,r.P1)(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),h=r.vc.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:e=>{const t=e.hasAttribute("style");return!!t&&{}}}]},renderHTML({HTMLAttributes:e}){return["span",(0,r.P1)(this.options.HTMLAttributes,e),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:e,commands:t})=>{const n=(0,r.Jo)(e,this.type),i=Object.entries(n).some((([,e])=>!!e));return!!i||t.unsetMark(this.name)}}}}),f=/^\s*([-+*])\s$/,p=r.NB.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",(0,r.P1)(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(d.name,this.editor.getAttributes(h.name)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=(0,r.S0)({find:f,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=(0,r.S0)({find:f,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(h.name),editor:this.editor})),[e]}}),m=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,g=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,v=r.vc.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",(0,r.P1)(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[(0,r.Cf)({find:m,type:this.type})]},addPasteRules(){return[(0,r.K9)({find:g,type:this.type})]}});var y=n(1418);const b=/^```([a-z]+)?[\s\n]$/,_=/^~~~([a-z]+)?[\s\n]$/,w=r.NB.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options,r=[...(null===(t=e.firstElementChild)||void 0===t?void 0:t.classList)||[]],i=r.filter((e=>e.startsWith(n))).map((e=>e.replace(n,""))),o=i[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",(0,r.P1)(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=1===t.pos;return!(!e||t.parent.type.name!==this.name)&&(!(!n&&t.parent.textContent.length)&&this.editor.commands.clearNodes())},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith("\n\n");return!(!o||!s)&&e.chain().command((({tr:e})=>(e.delete(r.pos-2,r.pos),!0))).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type)return!1;const s=i.parentOffset===i.parent.nodeSize-2;if(!s)return!1;const a=i.after();if(void 0===a)return!1;const l=r.nodeAt(a);return!l&&e.commands.exitCode()}}},addInputRules(){return[(0,r.zK)({find:b,type:this.type,getAttributes:e=>({language:e[1]})}),(0,r.zK)({find:_,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new y.Sy({key:new y.H$("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData)return!1;if(this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=null===i||void 0===i?void 0:i.mode;if(!n||!o)return!1;const{tr:s}=e.state;return s.replaceSelectionWith(this.type.create({language:o})),s.setSelection(y.Bs.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.insertText(n.replace(/\r\n?/g,"\n")),s.setMeta("paste",!0),e.dispatch(s),!0}}})]}}),x=r.NB.create({name:"doc",topNode:!0,content:"block+"});var S=n(4040);function E(e={}){return new y.Sy({view(t){return new M(t,e)}})}class M{constructor(e,t){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(n=t.width)&&void 0!==n?n:1,this.color=!1===t.color?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map((t=>{let n=e=>{this[t](e)};return e.dom.addEventListener(t,n),{name:t,handler:n}}))}destroy(){this.handlers.forEach((({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t)))}update(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e,t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent;if(n){let n=t.nodeBefore,r=t.nodeAfter;if(n||r){let t=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0));if(t){let i=t.getBoundingClientRect(),o=n?i.bottom:i.top;n&&r&&(o=(o+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),e={left:i.left,right:i.right,top:o-this.width/2,bottom:o+this.width/2}}}}if(!e){let t=this.editorView.coordsAtPos(this.cursorPos);e={left:t.left-this.width/2,right:t.left+this.width/2,top:t.top,bottom:t.bottom}}let r,i,o=this.editorView.dom.offsetParent;if(this.element||(this.element=o.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n),!o||o==document.body&&"static"==getComputedStyle(o).position)r=-pageXOffset,i=-pageYOffset;else{let e=o.getBoundingClientRect();r=e.left-o.scrollLeft,i=e.top-o.scrollTop}this.element.style.left=e.left-r+"px",this.element.style.top=e.top-i+"px",this.element.style.width=e.right-e.left+"px",this.element.style.height=e.bottom-e.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout((()=>this.setCursor(null)),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),r=n&&n.type.spec.disableDropCursor,i="function"==typeof r?r(this.editorView,t,e):r;if(t&&!i){let e=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let t=(0,S.nj)(this.editorView.state.doc,e,this.editorView.dragging.slice);null!=t&&(e=t)}this.setCursor(e),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){e.target!=this.editorView.dom&&this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const T=r.hj.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[E(this.options)]}});n(1703);var C=n(7329),A=n(8443),k=n(1617);class O extends y.Y1{constructor(e){super(e,e)}map(e,t){let n=e.resolve(t.map(this.head));return O.valid(n)?new O(n):y.Y1.near(n)}content(){return A.p2.empty}eq(e){return e instanceof O&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new O(e.resolve(t.pos))}getBookmark(){return new R(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!P(e)||!L(e))return!1;let n=t.type.spec.allowGapCursor;if(null!=n)return n;let r=t.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(e,t,n=!1){e:for(;;){if(!n&&O.valid(e))return e;let r=e.pos,i=null;for(let n=e.depth;;n--){let o=e.node(n);if(t>0?e.indexAfter(n)<o.childCount:e.index(n)>0){i=o.child(t>0?e.indexAfter(n):e.index(n)-1);break}if(0==n)return null;r+=t;let s=e.doc.resolve(r);if(O.valid(s))return s}for(;;){let o=t>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!y.qv.isSelectable(i)){e=e.doc.resolve(r+i.nodeSize*t),n=!1;continue e}break}i=o,r+=t;let s=e.doc.resolve(r);if(O.valid(s))return s}return null}}}O.prototype.visible=!1,O.findFrom=O.findGapCursorFrom,y.Y1.jsonID("gapcursor",O);class R{constructor(e){this.pos=e}map(e){return new R(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return O.valid(t)?new O(t):y.Y1.near(t)}}function P(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(0!=n)for(let e=r.child(n-1);;e=e.lastChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}function L(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n!=r.childCount)for(let e=r.child(n);;e=e.firstChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}function D(){return new y.Sy({props:{decorations:B,createSelectionBetween(e,t,n){return t.pos==n.pos&&O.valid(n)?new O(n):null},handleClick:U,handleKeyDown:I,handleDOMEvents:{beforeinput:F}}})}const I=(0,C.$)({ArrowLeft:N("horiz",-1),ArrowRight:N("horiz",1),ArrowUp:N("vert",-1),ArrowDown:N("vert",1)});function N(e,t){const n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,r,i){let o=e.selection,s=t>0?o.$to:o.$from,a=o.empty;if(o instanceof y.Bs){if(!i.endOfTextblock(n)||0==s.depth)return!1;a=!1,s=e.doc.resolve(t>0?s.after():s.before())}let l=O.findGapCursorFrom(s,t,a);return!!l&&(r&&r(e.tr.setSelection(new O(l))),!0)}}function U(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!O.valid(r))return!1;let i=e.posAtCoords({left:n.clientX,top:n.clientY});return!(i&&i.inside>-1&&y.qv.isSelectable(e.state.doc.nodeAt(i.inside)))&&(e.dispatch(e.state.tr.setSelection(new O(r))),!0)}function F(e,t){if("insertCompositionText"!=t.inputType||!(e.state.selection instanceof O))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let i=A.HY.empty;for(let s=r.length-1;s>=0;s--)i=A.HY.from(r[s].createAndFill(null,i));let o=e.state.tr.replace(n.pos,n.pos,new A.p2(i,0,0));return o.setSelection(y.Bs.near(o.doc.resolve(n.pos+1))),e.dispatch(o),!1}function B(e){if(!(e.selection instanceof O))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",k.EH.create(e.doc,[k.p.widget(e.selection.head,t,{key:"gapcursor"})])}const V=r.hj.create({name:"gapCursor",addProseMirrorPlugins(){return[D()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:null!==(t=(0,r.nU)((0,r.Nl)(e,"allowGapCursor",n)))&&void 0!==t?t:null}}}),z=r.NB.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",(0,r.P1)(this.options.HTMLAttributes,e)]},renderText(){return"\n"},addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command((()=>{const{selection:e,storedMarks:i}=n;if(e.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:s}=r.extensionManager,a=i||e.$to.parentOffset&&e.$from.marks();return t().insertContent({type:this.name}).command((({tr:e,dispatch:t})=>{if(t&&a&&o){const t=a.filter((e=>s.includes(e.type.name)));e.ensureMarks(t)}return!0})).run()}))])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),j=r.NB.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map((e=>({tag:`h${e}`,attrs:{level:e}})))},renderHTML({node:e,HTMLAttributes:t}){const n=this.options.levels.includes(e.attrs.level),i=n?e.attrs.level:this.options.levels[0];return[`h${i}`,(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.setNode(this.name,e),toggleHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return this.options.levels.reduce(((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})})),{})},addInputRules(){return this.options.levels.map((e=>(0,r.zK)({find:new RegExp(`^(#{1,${e}})\\s$`),type:this.type,getAttributes:{level:e}})))}});var H=200,W=function(){};W.prototype.append=function(e){return e.length?(e=W.from(e),!this.length&&e||e.length<H&&this.leafAppend(e)||this.length<H&&e.leafPrepend(this)||this.appendInner(e)):this},W.prototype.prepend=function(e){return e.length?W.from(e).append(this):this},W.prototype.appendInner=function(e){return new $(this,e)},W.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?W.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},W.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},W.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},W.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(t,n){return r.push(e(t,n))}),t,n),r},W.from=function(e){return e instanceof W?e:e&&e.length?new G(e):W.empty};var G=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var i=t;i<n;i++)if(!1===e(this.values[i],r+i))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var i=t-1;i>=n;i--)if(!1===e(this.values[i],r+i))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=H)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=H)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(W);W.empty=new G([]);var $=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var i=this.left.length;return!(t<i&&!1===this.left.forEachInner(e,t,Math.min(n,i),r))&&(!(n>i&&!1===this.right.forEachInner(e,Math.max(t-i,0),Math.min(this.length,n)-i,r+i))&&void 0)},t.prototype.forEachInvertedInner=function(e,t,n,r){var i=this.left.length;return!(t>i&&!1===this.right.forEachInvertedInner(e,t-i,Math.max(n,i)-i,r+i))&&(!(n<i&&!1===this.left.forEachInvertedInner(e,Math.min(t,i),n,r))&&void 0)},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(W),q=W;const Y=500;class X{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(0==this.eventCount)return null;let n,r,i=this.items.length;for(;;i--){let e=this.items.get(i-1);if(e.selection){--i;break}}t&&(n=this.remapping(i,this.items.length),r=n.maps.length);let o,s,a=e.tr,l=[],c=[];return this.items.forEach(((e,t)=>{if(!e.step)return n||(n=this.remapping(i,t+1),r=n.maps.length),r--,void c.push(e);if(n){c.push(new K(e.map));let t,i=e.step.map(n.slice(r));i&&a.maybeStep(i).doc&&(t=a.mapping.maps[a.mapping.maps.length-1],l.push(new K(t,void 0,void 0,l.length+c.length))),r--,t&&n.appendMap(t,r)}else a.maybeStep(e.step);return e.selection?(o=n?e.selection.map(n.slice(r)):e.selection,s=new X(this.items.slice(0,i).append(c.reverse().concat(l)),this.eventCount-1),!1):void 0}),this.items.length,0),{remaining:s,transform:a,selection:o}}addTransform(e,t,n,r){let i=[],o=this.eventCount,s=this.items,a=!r&&s.length?s.get(s.length-1):null;for(let c=0;c<e.steps.length;c++){let n,l=e.steps[c].invert(e.docs[c]),u=new K(e.mapping.maps[c],l,t);(n=a&&a.merge(u))&&(u=n,c?i.pop():s=s.slice(0,s.length-1)),i.push(u),t&&(o++,t=void 0),r||(a=u)}let l=o-n.depth;return l>Q&&(s=Z(s,l),o-=l),new X(s.append(i),o)}remapping(e,t){let n=new S.vs;return this.items.forEach(((t,r)=>{let i=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:void 0;n.appendMap(t.map,i)}),e,t),n}addMaps(e){return 0==this.eventCount?this:new X(this.items.append(e.map((e=>new K(e)))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],r=Math.max(0,this.items.length-t),i=e.mapping,o=e.steps.length,s=this.eventCount;this.items.forEach((e=>{e.selection&&s--}),r);let a=t;this.items.forEach((t=>{let r=i.getMirror(--a);if(null==r)return;o=Math.min(o,r);let l=i.maps[r];if(t.step){let o=e.steps[r].invert(e.docs[r]),c=t.selection&&t.selection.map(i.slice(a+1,r));c&&s++,n.push(new K(l,o,c))}else n.push(new K(l))}),r);let l=[];for(let d=t;d<o;d++)l.push(new K(i.maps[d]));let c=this.items.slice(0,r).append(l).append(n),u=new X(c,s);return u.emptyItemCount()>Y&&(u=u.compress(this.items.length-n.length)),u}emptyItemCount(){let e=0;return this.items.forEach((t=>{t.step||e++})),e}compress(e=this.items.length){let t=this.remapping(0,e),n=t.maps.length,r=[],i=0;return this.items.forEach(((o,s)=>{if(s>=e)r.push(o),o.selection&&i++;else if(o.step){let e=o.step.map(t.slice(n)),s=e&&e.getMap();if(n--,s&&t.appendMap(s,n),e){let a=o.selection&&o.selection.map(t.slice(n));a&&i++;let l,c=new K(s.invert(),e,a),u=r.length-1;(l=r.length&&r[u].merge(c))?r[u]=l:r.push(c)}}else o.map&&n--}),this.items.length,0),new X(q.from(r.reverse()),i)}}function Z(e,t){let n;return e.forEach(((e,r)=>{if(e.selection&&0==t--)return n=r,!1})),e.slice(n)}X.empty=new X(q.empty,0);class K{constructor(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new K(t.getMap().invert(),t,this.selection)}}}class J{constructor(e,t,n,r,i){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r,this.prevComposition=i}}const Q=20;function ee(e,t,n,r){let i,o=n.getMeta(le);if(o)return o.historyState;n.getMeta(ce)&&(e=new J(e.done,e.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(s&&s.getMeta(le))return s.getMeta(le).redo?new J(e.done.addTransform(n,void 0,r,ae(t)),e.undone,ne(n.mapping.maps[n.steps.length-1]),e.prevTime,e.prevComposition):new J(e.done,e.undone.addTransform(n,void 0,r,ae(t)),null,e.prevTime,e.prevComposition);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(i=n.getMeta("rebased"))?new J(e.done.rebased(n,i),e.undone.rebased(n,i),re(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new J(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),re(e.prevRanges,n.mapping),e.prevTime,e.prevComposition);{let i=n.getMeta("composition"),o=0==e.prevTime||!s&&e.prevComposition!=i&&(e.prevTime<(n.time||0)-r.newGroupDelay||!te(n,e.prevRanges)),a=s?re(e.prevRanges,n.mapping):ne(n.mapping.maps[n.steps.length-1]);return new J(e.done.addTransform(n,o?t.selection.getBookmark():void 0,r,ae(t)),X.empty,a,n.time,null==i?e.prevComposition:i)}}function te(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach(((e,r)=>{for(let i=0;i<t.length;i+=2)e<=t[i+1]&&r>=t[i]&&(n=!0)})),n}function ne(e){let t=[];return e.forEach(((e,n,r,i)=>t.push(r,i))),t}function re(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let i=t.map(e[r],1),o=t.map(e[r+1],-1);i<=o&&n.push(i,o)}return n}function ie(e,t,n,r){let i=ae(t),o=le.get(t).spec.config,s=(r?e.undone:e.done).popEvent(t,i);if(!s)return;let a=s.selection.resolve(s.transform.doc),l=(r?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),o,i),c=new J(r?l:s.remaining,r?s.remaining:l,null,0,-1);n(s.transform.setSelection(a).setMeta(le,{redo:r,historyState:c}).scrollIntoView())}let oe=!1,se=null;function ae(e){let t=e.plugins;if(se!=t){oe=!1,se=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){oe=!0;break}}return oe}const le=new y.H$("history"),ce=new y.H$("closeHistory");function ue(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new y.Sy({key:le,state:{init(){return new J(X.empty,X.empty,null,0,-1)},apply(t,n,r){return ee(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(e,t){let n=t.inputType,r="historyUndo"==n?de:"historyRedo"==n?he:null;return!!r&&(t.preventDefault(),r(e.state,e.dispatch))}}}})}const de=(e,t)=>{let n=le.getState(e);return!(!n||0==n.done.eventCount)&&(t&&ie(n,e,t,!1),!0)},he=(e,t)=>{let n=le.getState(e);return!(!n||0==n.undone.eventCount)&&(t&&ie(n,e,t,!0),!0)};const fe=r.hj.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>de(e,t),redo:()=>({state:e,dispatch:t})=>he(e,t)}},addProseMirrorPlugins(){return[ue(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),pe=r.NB.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",(0,r.P1)(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e})=>e().insertContent({type:this.name}).command((({tr:e,dispatch:t})=>{var n;if(t){const{$to:t}=e.selection,r=t.end();if(t.nodeAfter)e.setSelection(y.Bs.create(e.doc,t.pos));else{const i=null===(n=t.parent.type.contentMatch.defaultType)||void 0===n?void 0:n.create();i&&(e.insert(r,i),e.setSelection(y.Bs.create(e.doc,r)))}e.scrollIntoView()}return!0})).run()}},addInputRules(){return[(0,r.x2)({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),me=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,ge=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,ve=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,ye=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,be=r.vc.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>"normal"!==e.style.fontStyle&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",(0,r.P1)(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[(0,r.Cf)({find:me,type:this.type}),(0,r.Cf)({find:ve,type:this.type})]},addPasteRules(){return[(0,r.K9)({find:ge,type:this.type}),(0,r.K9)({find:ye,type:this.type})]}}),_e=r.NB.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",(0,r.P1)(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),we=r.NB.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",(0,r.P1)(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),xe=r.vc.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:e=>{const t=e.hasAttribute("style");return!!t&&{}}}]},renderHTML({HTMLAttributes:e}){return["span",(0,r.P1)(this.options.HTMLAttributes,e),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:e,commands:t})=>{const n=(0,r.Jo)(e,this.type),i=Object.entries(n).some((([,e])=>!!e));return!!i||t.unsetMark(this.name)}}}}),Se=/^(\d+)\.\s$/,Ee=r.NB.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return 1===t?["ol",(0,r.P1)(this.options.HTMLAttributes,n),0]:["ol",(0,r.P1)(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(we.name,this.editor.getAttributes(xe.name)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=(0,r.S0)({find:Se,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=(0,r.S0)({find:Se,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(xe.name)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[e]}}),Me=r.NB.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",(0,r.P1)(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Te=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,Ce=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,Ae=r.vc.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("line-through")&&{}}]},renderHTML({HTMLAttributes:e}){return["s",(0,r.P1)(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[(0,r.Cf)({find:Te,type:this.type})]},addPasteRules(){return[(0,r.K9)({find:Ce,type:this.type})]}}),ke=r.NB.create({name:"text",group:"inline"}),Oe=r.hj.create({name:"starterKit",addExtensions(){var e,t,n,r,i,s,a,l,c,d,h,f,m,g,y,b,_,S;const E=[];return!1!==this.options.blockquote&&E.push(o.configure(null===(e=this.options)||void 0===e?void 0:e.blockquote)),!1!==this.options.bold&&E.push(u.configure(null===(t=this.options)||void 0===t?void 0:t.bold)),!1!==this.options.bulletList&&E.push(p.configure(null===(n=this.options)||void 0===n?void 0:n.bulletList)),!1!==this.options.code&&E.push(v.configure(null===(r=this.options)||void 0===r?void 0:r.code)),!1!==this.options.codeBlock&&E.push(w.configure(null===(i=this.options)||void 0===i?void 0:i.codeBlock)),!1!==this.options.document&&E.push(x.configure(null===(s=this.options)||void 0===s?void 0:s.document)),!1!==this.options.dropcursor&&E.push(T.configure(null===(a=this.options)||void 0===a?void 0:a.dropcursor)),!1!==this.options.gapcursor&&E.push(V.configure(null===(l=this.options)||void 0===l?void 0:l.gapcursor)),!1!==this.options.hardBreak&&E.push(z.configure(null===(c=this.options)||void 0===c?void 0:c.hardBreak)),!1!==this.options.heading&&E.push(j.configure(null===(d=this.options)||void 0===d?void 0:d.heading)),!1!==this.options.history&&E.push(fe.configure(null===(h=this.options)||void 0===h?void 0:h.history)),!1!==this.options.horizontalRule&&E.push(pe.configure(null===(f=this.options)||void 0===f?void 0:f.horizontalRule)),!1!==this.options.italic&&E.push(be.configure(null===(m=this.options)||void 0===m?void 0:m.italic)),!1!==this.options.listItem&&E.push(_e.configure(null===(g=this.options)||void 0===g?void 0:g.listItem)),!1!==this.options.orderedList&&E.push(Ee.configure(null===(y=this.options)||void 0===y?void 0:y.orderedList)),!1!==this.options.paragraph&&E.push(Me.configure(null===(b=this.options)||void 0===b?void 0:b.paragraph)),!1!==this.options.strike&&E.push(Ae.configure(null===(_=this.options)||void 0===_?void 0:_.strike)),!1!==this.options.text&&E.push(ke.configure(null===(S=this.options)||void 0===S?void 0:S.text)),E}})},6764:function(e,t,n){"use strict";n.d(t,{ML:function(){return ye},kg:function(){return be}});n(7658),n(1703);var r=n(292),i=n(1418),o=n(1320),s=n(94),a="tippy-box",l="tippy-content",c="tippy-backdrop",u="tippy-arrow",d="tippy-svg-arrow",h={passive:!0,capture:!0},f=function(){return document.body};function p(e,t,n){if(Array.isArray(e)){var r=e[t];return null==r?Array.isArray(n)?n[t]:n:r}return e}function m(e,t){var n={}.toString.call(e);return 0===n.indexOf("[object")&&n.indexOf(t+"]")>-1}function g(e,t){return"function"===typeof e?e.apply(void 0,t):e}function v(e,t){return 0===t?e:function(r){clearTimeout(n),n=setTimeout((function(){e(r)}),t)};var n}function y(e){return e.split(/\s+/).filter(Boolean)}function b(e){return[].concat(e)}function _(e,t){-1===e.indexOf(t)&&e.push(t)}function w(e){return e.filter((function(t,n){return e.indexOf(t)===n}))}function x(e){return e.split("-")[0]}function S(e){return[].slice.call(e)}function E(e){return Object.keys(e).reduce((function(t,n){return void 0!==e[n]&&(t[n]=e[n]),t}),{})}function M(){return document.createElement("div")}function T(e){return["Element","Fragment"].some((function(t){return m(e,t)}))}function C(e){return m(e,"NodeList")}function A(e){return m(e,"MouseEvent")}function k(e){return!(!e||!e._tippy||e._tippy.reference!==e)}function O(e){return T(e)?[e]:C(e)?S(e):Array.isArray(e)?e:S(document.querySelectorAll(e))}function R(e,t){e.forEach((function(e){e&&(e.style.transitionDuration=t+"ms")}))}function P(e,t){e.forEach((function(e){e&&e.setAttribute("data-state",t)}))}function L(e){var t,n=b(e),r=n[0];return null!=r&&null!=(t=r.ownerDocument)&&t.body?r.ownerDocument:document}function D(e,t){var n=t.clientX,r=t.clientY;return e.every((function(e){var t=e.popperRect,i=e.popperState,o=e.props,s=o.interactiveBorder,a=x(i.placement),l=i.modifiersData.offset;if(!l)return!0;var c="bottom"===a?l.top.y:0,u="top"===a?l.bottom.y:0,d="right"===a?l.left.x:0,h="left"===a?l.right.x:0,f=t.top-r+c>s,p=r-t.bottom-u>s,m=t.left-n+d>s,g=n-t.right-h>s;return f||p||m||g}))}function I(e,t,n){var r=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(t){e[r](t,n)}))}function N(e,t){var n=t;while(n){var r;if(e.contains(n))return!0;n=null==n.getRootNode||null==(r=n.getRootNode())?void 0:r.host}return!1}var U={isTouch:!1},F=0;function B(){U.isTouch||(U.isTouch=!0,window.performance&&document.addEventListener("mousemove",V))}function V(){var e=performance.now();e-F<20&&(U.isTouch=!1,document.removeEventListener("mousemove",V)),F=e}function z(){var e=document.activeElement;if(k(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function j(){document.addEventListener("touchstart",B,h),window.addEventListener("blur",z)}var H="undefined"!==typeof window&&"undefined"!==typeof document,W=!!H&&!!window.msCrypto;var G={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},$={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},q=Object.assign({appendTo:f,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},G,$),Y=Object.keys(q),X=function(e){var t=Object.keys(e);t.forEach((function(t){q[t]=e[t]}))};function Z(e){var t=e.plugins||[],n=t.reduce((function(t,n){var r,i=n.name,o=n.defaultValue;i&&(t[i]=void 0!==e[i]?e[i]:null!=(r=q[i])?r:o);return t}),{});return Object.assign({},e,n)}function K(e,t){var n=t?Object.keys(Z(Object.assign({},q,{plugins:t}))):Y,r=n.reduce((function(t,n){var r=(e.getAttribute("data-tippy-"+n)||"").trim();if(!r)return t;if("content"===n)t[n]=r;else try{t[n]=JSON.parse(r)}catch(i){t[n]=r}return t}),{});return r}function J(e,t){var n=Object.assign({},t,{content:g(t.content,[e])},t.ignoreAttributes?{}:K(e,t.plugins));return n.aria=Object.assign({},q.aria,n.aria),n.aria={expanded:"auto"===n.aria.expanded?t.interactive:n.aria.expanded,content:"auto"===n.aria.content?t.interactive?null:"describedby":n.aria.content},n}var Q=function(){return"innerHTML"};function ee(e,t){e[Q()]=t}function te(e){var t=M();return!0===e?t.className=u:(t.className=d,T(e)?t.appendChild(e):ee(t,e)),t}function ne(e,t){T(t.content)?(ee(e,""),e.appendChild(t.content)):"function"!==typeof t.content&&(t.allowHTML?ee(e,t.content):e.textContent=t.content)}function re(e){var t=e.firstElementChild,n=S(t.children);return{box:t,content:n.find((function(e){return e.classList.contains(l)})),arrow:n.find((function(e){return e.classList.contains(u)||e.classList.contains(d)})),backdrop:n.find((function(e){return e.classList.contains(c)}))}}function ie(e){var t=M(),n=M();n.className=a,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=M();function i(n,r){var i=re(t),o=i.box,s=i.content,a=i.arrow;r.theme?o.setAttribute("data-theme",r.theme):o.removeAttribute("data-theme"),"string"===typeof r.animation?o.setAttribute("data-animation",r.animation):o.removeAttribute("data-animation"),r.inertia?o.setAttribute("data-inertia",""):o.removeAttribute("data-inertia"),o.style.maxWidth="number"===typeof r.maxWidth?r.maxWidth+"px":r.maxWidth,r.role?o.setAttribute("role",r.role):o.removeAttribute("role"),n.content===r.content&&n.allowHTML===r.allowHTML||ne(s,e.props),r.arrow?a?n.arrow!==r.arrow&&(o.removeChild(a),o.appendChild(te(r.arrow))):o.appendChild(te(r.arrow)):a&&o.removeChild(a)}return r.className=l,r.setAttribute("data-state","hidden"),ne(r,e.props),t.appendChild(n),n.appendChild(r),i(e.props,e.props),{popper:t,onUpdate:i}}ie.$$tippy=!0;var oe=1,se=[],ae=[];function le(e,t){var n,r,i,s,a,l,c,u=J(e,Object.assign({},q,Z(E(t)))),d=!1,m=!1,x=!1,T=!1,C=[],k=v(Me,u.interactiveDebounce),O=oe++,F=null,B=w(u.plugins),V={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},z={id:O,reference:e,popper:M(),popperInstance:F,props:u,state:V,plugins:B,clearDelayTimeouts:Ue,setProps:Fe,setContent:Be,show:Ve,hide:ze,hideWithInteractivity:je,enable:Ie,disable:Ne,unmount:He,destroy:We};if(!u.render)return z;var j=u.render(z),H=j.popper,G=j.onUpdate;H.setAttribute("data-tippy-root",""),H.id="tippy-"+z.id,z.popper=H,e._tippy=z,H._tippy=z;var $=B.map((function(e){return e.fn(z)})),Y=e.hasAttribute("aria-expanded");return xe(),de(),le(),ce("onCreate",[z]),u.showOnCreate&&Le(),H.addEventListener("mouseenter",(function(){z.props.interactive&&z.state.isVisible&&z.clearDelayTimeouts()})),H.addEventListener("mouseleave",(function(){z.props.interactive&&z.props.trigger.indexOf("mouseenter")>=0&&te().addEventListener("mousemove",k)})),z;function X(){var e=z.props.touch;return Array.isArray(e)?e:[e,0]}function K(){return"hold"===X()[0]}function Q(){var e;return!(null==(e=z.props.render)||!e.$$tippy)}function ee(){return c||e}function te(){var e=ee().parentNode;return e?L(e):document}function ne(){return re(H)}function ie(e){return z.state.isMounted&&!z.state.isVisible||U.isTouch||s&&"focus"===s.type?0:p(z.props.delay,e?0:1,q.delay)}function le(e){void 0===e&&(e=!1),H.style.pointerEvents=z.props.interactive&&!e?"":"none",H.style.zIndex=""+z.props.zIndex}function ce(e,t,n){var r;(void 0===n&&(n=!0),$.forEach((function(n){n[e]&&n[e].apply(n,t)})),n)&&(r=z.props)[e].apply(r,t)}function ue(){var t=z.props.aria;if(t.content){var n="aria-"+t.content,r=H.id,i=b(z.props.triggerTarget||e);i.forEach((function(e){var t=e.getAttribute(n);if(z.state.isVisible)e.setAttribute(n,t?t+" "+r:r);else{var i=t&&t.replace(r,"").trim();i?e.setAttribute(n,i):e.removeAttribute(n)}}))}}function de(){if(!Y&&z.props.aria.expanded){var t=b(z.props.triggerTarget||e);t.forEach((function(e){z.props.interactive?e.setAttribute("aria-expanded",z.state.isVisible&&e===ee()?"true":"false"):e.removeAttribute("aria-expanded")}))}}function he(){te().removeEventListener("mousemove",k),se=se.filter((function(e){return e!==k}))}function fe(t){if(!U.isTouch||!x&&"mousedown"!==t.type){var n=t.composedPath&&t.composedPath()[0]||t.target;if(!z.props.interactive||!N(H,n)){if(b(z.props.triggerTarget||e).some((function(e){return N(e,n)}))){if(U.isTouch)return;if(z.state.isVisible&&z.props.trigger.indexOf("click")>=0)return}else ce("onClickOutside",[z,t]);!0===z.props.hideOnClick&&(z.clearDelayTimeouts(),z.hide(),m=!0,setTimeout((function(){m=!1})),z.state.isMounted||ve())}}}function pe(){x=!0}function me(){x=!1}function ge(){var e=te();e.addEventListener("mousedown",fe,!0),e.addEventListener("touchend",fe,h),e.addEventListener("touchstart",me,h),e.addEventListener("touchmove",pe,h)}function ve(){var e=te();e.removeEventListener("mousedown",fe,!0),e.removeEventListener("touchend",fe,h),e.removeEventListener("touchstart",me,h),e.removeEventListener("touchmove",pe,h)}function ye(e,t){_e(e,(function(){!z.state.isVisible&&H.parentNode&&H.parentNode.contains(H)&&t()}))}function be(e,t){_e(e,t)}function _e(e,t){var n=ne().box;function r(e){e.target===n&&(I(n,"remove",r),t())}if(0===e)return t();I(n,"remove",a),I(n,"add",r),a=r}function we(t,n,r){void 0===r&&(r=!1);var i=b(z.props.triggerTarget||e);i.forEach((function(e){e.addEventListener(t,n,r),C.push({node:e,eventType:t,handler:n,options:r})}))}function xe(){K()&&(we("touchstart",Ee,{passive:!0}),we("touchend",Te,{passive:!0})),y(z.props.trigger).forEach((function(e){if("manual"!==e)switch(we(e,Ee),e){case"mouseenter":we("mouseleave",Te);break;case"focus":we(W?"focusout":"blur",Ce);break;case"focusin":we("focusout",Ce);break}}))}function Se(){C.forEach((function(e){var t=e.node,n=e.eventType,r=e.handler,i=e.options;t.removeEventListener(n,r,i)})),C=[]}function Ee(e){var t,n=!1;if(z.state.isEnabled&&!Ae(e)&&!m){var r="focus"===(null==(t=s)?void 0:t.type);s=e,c=e.currentTarget,de(),!z.state.isVisible&&A(e)&&se.forEach((function(t){return t(e)})),"click"===e.type&&(z.props.trigger.indexOf("mouseenter")<0||d)&&!1!==z.props.hideOnClick&&z.state.isVisible?n=!0:Le(e),"click"===e.type&&(d=!n),n&&!r&&De(e)}}function Me(e){var t=e.target,n=ee().contains(t)||H.contains(t);if("mousemove"!==e.type||!n){var r=Pe().concat(H).map((function(e){var t,n=e._tippy,r=null==(t=n.popperInstance)?void 0:t.state;return r?{popperRect:e.getBoundingClientRect(),popperState:r,props:u}:null})).filter(Boolean);D(r,e)&&(he(),De(e))}}function Te(e){var t=Ae(e)||z.props.trigger.indexOf("click")>=0&&d;t||(z.props.interactive?z.hideWithInteractivity(e):De(e))}function Ce(e){z.props.trigger.indexOf("focusin")<0&&e.target!==ee()||z.props.interactive&&e.relatedTarget&&H.contains(e.relatedTarget)||De(e)}function Ae(e){return!!U.isTouch&&K()!==e.type.indexOf("touch")>=0}function ke(){Oe();var t=z.props,n=t.popperOptions,r=t.placement,i=t.offset,s=t.getReferenceClientRect,a=t.moveTransition,c=Q()?re(H).arrow:null,u=s?{getBoundingClientRect:s,contextElement:s.contextElement||ee()}:e,d={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;if(Q()){var n=ne(),r=n.box;["placement","reference-hidden","escaped"].forEach((function(e){"placement"===e?r.setAttribute("data-placement",t.placement):t.attributes.popper["data-popper-"+e]?r.setAttribute("data-"+e,""):r.removeAttribute("data-"+e)})),t.attributes.popper={}}}},h=[{name:"offset",options:{offset:i}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!a}},d];Q()&&c&&h.push({name:"arrow",options:{element:c,padding:3}}),h.push.apply(h,(null==n?void 0:n.modifiers)||[]),z.popperInstance=(0,o.fi)(u,H,Object.assign({},n,{placement:r,onFirstUpdate:l,modifiers:h}))}function Oe(){z.popperInstance&&(z.popperInstance.destroy(),z.popperInstance=null)}function Re(){var e,t=z.props.appendTo,n=ee();e=z.props.interactive&&t===f||"parent"===t?n.parentNode:g(t,[n]),e.contains(H)||e.appendChild(H),z.state.isMounted=!0,ke()}function Pe(){return S(H.querySelectorAll("[data-tippy-root]"))}function Le(e){z.clearDelayTimeouts(),e&&ce("onTrigger",[z,e]),ge();var t=ie(!0),r=X(),i=r[0],o=r[1];U.isTouch&&"hold"===i&&o&&(t=o),t?n=setTimeout((function(){z.show()}),t):z.show()}function De(e){if(z.clearDelayTimeouts(),ce("onUntrigger",[z,e]),z.state.isVisible){if(!(z.props.trigger.indexOf("mouseenter")>=0&&z.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(e.type)>=0&&d)){var t=ie(!1);t?r=setTimeout((function(){z.state.isVisible&&z.hide()}),t):i=requestAnimationFrame((function(){z.hide()}))}}else ve()}function Ie(){z.state.isEnabled=!0}function Ne(){z.hide(),z.state.isEnabled=!1}function Ue(){clearTimeout(n),clearTimeout(r),cancelAnimationFrame(i)}function Fe(t){if(!z.state.isDestroyed){ce("onBeforeUpdate",[z,t]),Se();var n=z.props,r=J(e,Object.assign({},n,E(t),{ignoreAttributes:!0}));z.props=r,xe(),n.interactiveDebounce!==r.interactiveDebounce&&(he(),k=v(Me,r.interactiveDebounce)),n.triggerTarget&&!r.triggerTarget?b(n.triggerTarget).forEach((function(e){e.removeAttribute("aria-expanded")})):r.triggerTarget&&e.removeAttribute("aria-expanded"),de(),le(),G&&G(n,r),z.popperInstance&&(ke(),Pe().forEach((function(e){requestAnimationFrame(e._tippy.popperInstance.forceUpdate)}))),ce("onAfterUpdate",[z,t])}}function Be(e){z.setProps({content:e})}function Ve(){var e=z.state.isVisible,t=z.state.isDestroyed,n=!z.state.isEnabled,r=U.isTouch&&!z.props.touch,i=p(z.props.duration,0,q.duration);if(!(e||t||n||r)&&!ee().hasAttribute("disabled")&&(ce("onShow",[z],!1),!1!==z.props.onShow(z))){if(z.state.isVisible=!0,Q()&&(H.style.visibility="visible"),le(),ge(),z.state.isMounted||(H.style.transition="none"),Q()){var o=ne(),s=o.box,a=o.content;R([s,a],0)}l=function(){var e;if(z.state.isVisible&&!T){if(T=!0,H.offsetHeight,H.style.transition=z.props.moveTransition,Q()&&z.props.animation){var t=ne(),n=t.box,r=t.content;R([n,r],i),P([n,r],"visible")}ue(),de(),_(ae,z),null==(e=z.popperInstance)||e.forceUpdate(),ce("onMount",[z]),z.props.animation&&Q()&&be(i,(function(){z.state.isShown=!0,ce("onShown",[z])}))}},Re()}}function ze(){var e=!z.state.isVisible,t=z.state.isDestroyed,n=!z.state.isEnabled,r=p(z.props.duration,1,q.duration);if(!(e||t||n)&&(ce("onHide",[z],!1),!1!==z.props.onHide(z))){if(z.state.isVisible=!1,z.state.isShown=!1,T=!1,d=!1,Q()&&(H.style.visibility="hidden"),he(),ve(),le(!0),Q()){var i=ne(),o=i.box,s=i.content;z.props.animation&&(R([o,s],r),P([o,s],"hidden"))}ue(),de(),z.props.animation?Q()&&ye(r,z.unmount):z.unmount()}}function je(e){te().addEventListener("mousemove",k),_(se,k),k(e)}function He(){z.state.isVisible&&z.hide(),z.state.isMounted&&(Oe(),Pe().forEach((function(e){e._tippy.unmount()})),H.parentNode&&H.parentNode.removeChild(H),ae=ae.filter((function(e){return e!==z})),z.state.isMounted=!1,ce("onHidden",[z]))}function We(){z.state.isDestroyed||(z.clearDelayTimeouts(),z.unmount(),Se(),delete e._tippy,z.state.isDestroyed=!0,ce("onDestroy",[z]))}}function ce(e,t){void 0===t&&(t={});var n=q.plugins.concat(t.plugins||[]);j();var r=Object.assign({},t,{plugins:n}),i=O(e),o=i.reduce((function(e,t){var n=t&&le(t,r);return n&&e.push(n),e}),[]);return T(e)?o[0]:o}ce.defaultProps=q,ce.setDefaultProps=X,ce.currentInput=U;Object.assign({},s.Z,{effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow)}});ce.setDefaultProps({render:ie});var ue=ce;class de{constructor({editor:e,element:t,view:n,tippyOptions:i={},updateDelay:o=250,shouldShow:s}){this.preventHide=!1,this.shouldShow=({view:e,state:t,from:n,to:i})=>{const{doc:o,selection:s}=t,{empty:a}=s,l=!o.textBetween(n,i).length&&(0,r.xh)(t.selection),c=this.element.contains(document.activeElement),u=e.hasFocus()||c;return!(!u||a||l||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout((()=>this.update(this.editor.view)))},this.blurHandler=({event:e})=>{var t;this.preventHide?this.preventHide=!1:(null===e||void 0===e?void 0:e.relatedTarget)&&(null===(t=this.element.parentNode)||void 0===t?void 0:t.contains(e.relatedTarget))||this.hide()},this.tippyBlurHandler=e=>{this.blurHandler({event:e})},this.handleDebouncedUpdate=(e,t)=>{const n=!(null===t||void 0===t?void 0:t.selection.eq(e.state.selection)),r=!(null===t||void 0===t?void 0:t.doc.eq(e.state.doc));(n||r)&&(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout((()=>{this.updateHandler(e,n,r,t)}),this.updateDelay))},this.updateHandler=(e,t,n,i)=>{var o,s,a;const{state:l,composing:c}=e,{selection:u}=l,d=!t&&!n;if(c||d)return;this.createTooltip();const{ranges:h}=u,f=Math.min(...h.map((e=>e.$from.pos))),p=Math.max(...h.map((e=>e.$to.pos))),m=null===(o=this.shouldShow)||void 0===o?void 0:o.call(this,{editor:this.editor,view:e,state:l,oldState:i,from:f,to:p});m?(null===(s=this.tippy)||void 0===s||s.setProps({getReferenceClientRect:(null===(a=this.tippyOptions)||void 0===a?void 0:a.getReferenceClientRect)||(()=>{if((0,r.EG)(l.selection)){let t=e.nodeDOM(f);const n=t.dataset.nodeViewWrapper?t:t.querySelector("[data-node-view-wrapper]");if(n&&(t=n.firstChild),t)return t.getBoundingClientRect()}return(0,r.pr)(e,f,p)})}),this.show()):this.hide()},this.editor=e,this.element=t,this.view=n,this.updateDelay=o,s&&(this.shouldShow=s),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,t=!!e.parentElement;!this.tippy&&t&&(this.tippy=ue(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,t){const{state:n}=e,r=n.selection.$from.pos!==n.selection.$to.pos;if(this.updateDelay>0&&r)return void this.handleDebouncedUpdate(e,t);const i=!(null===t||void 0===t?void 0:t.selection.eq(e.state.selection)),o=!(null===t||void 0===t?void 0:t.doc.eq(e.state.doc));this.updateHandler(e,i,o,t)}show(){var e;null===(e=this.tippy)||void 0===e||e.show()}hide(){var e;null===(e=this.tippy)||void 0===e||e.hide()}destroy(){var e,t;(null===(e=this.tippy)||void 0===e?void 0:e.popper.firstChild)&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),null===(t=this.tippy)||void 0===t||t.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const he=e=>new i.Sy({key:"string"===typeof e.pluginKey?new i.H$(e.pluginKey):e.pluginKey,view:t=>new de({view:t,...e})});r.hj.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[he({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});var fe=n(8473),pe=n(4188);class me{constructor({editor:e,element:t,view:n,tippyOptions:r={},shouldShow:i}){this.preventHide=!1,this.shouldShow=({view:e,state:t})=>{const{selection:n}=t,{$anchor:r,empty:i}=n,o=1===r.depth,s=r.parent.isTextblock&&!r.parent.type.spec.code&&!r.parent.textContent;return!!(e.hasFocus()&&i&&o&&s&&this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout((()=>this.update(this.editor.view)))},this.blurHandler=({event:e})=>{var t;this.preventHide?this.preventHide=!1:(null===e||void 0===e?void 0:e.relatedTarget)&&(null===(t=this.element.parentNode)||void 0===t?void 0:t.contains(e.relatedTarget))||this.hide()},this.tippyBlurHandler=e=>{this.blurHandler({event:e})},this.editor=e,this.element=t,this.view=n,i&&(this.shouldShow=i),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=r,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,t=!!e.parentElement;!this.tippy&&t&&(this.tippy=ue(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,t){var n,i,o;const{state:s}=e,{doc:a,selection:l}=s,{from:c,to:u}=l,d=t&&t.doc.eq(a)&&t.selection.eq(l);if(d)return;this.createTooltip();const h=null===(n=this.shouldShow)||void 0===n?void 0:n.call(this,{editor:this.editor,view:e,state:s,oldState:t});h?(null===(i=this.tippy)||void 0===i||i.setProps({getReferenceClientRect:(null===(o=this.tippyOptions)||void 0===o?void 0:o.getReferenceClientRect)||(()=>(0,r.pr)(e,c,u))}),this.show()):this.hide()}show(){var e;null===(e=this.tippy)||void 0===e||e.show()}hide(){var e;null===(e=this.tippy)||void 0===e||e.hide()}destroy(){var e,t;(null===(e=this.tippy)||void 0===e?void 0:e.popper.firstChild)&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),null===(t=this.tippy)||void 0===t||t.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const ge=e=>new i.Sy({key:"string"===typeof e.pluginKey?new i.H$(e.pluginKey):e.pluginKey,view:t=>new me({view:t,...e})});r.hj.create({name:"floatingMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"floatingMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[ge({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow})]:[]}}),(0,fe.aZ)({name:"BubbleMenu",props:{pluginKey:{type:[String,Object],default:"bubbleMenu"},editor:{type:Object,required:!0},updateDelay:{type:Number,default:void 0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(e,{slots:t}){const n=(0,pe.iH)(null);return(0,fe.bv)((()=>{const{updateDelay:t,editor:r,pluginKey:i,shouldShow:o,tippyOptions:s}=e;r.registerPlugin(he({updateDelay:t,editor:r,element:n.value,pluginKey:i,shouldShow:o,tippyOptions:s}))})),(0,fe.Jd)((()=>{const{pluginKey:t,editor:n}=e;n.unregisterPlugin(t)})),()=>{var e;return(0,fe.h)("div",{ref:n},null===(e=t.default)||void 0===e?void 0:e.call(t))}}});function ve(e){return(0,pe.ZM)(((t,n)=>({get(){return t(),e},set(t){e=t,requestAnimationFrame((()=>{requestAnimationFrame((()=>{n()}))}))}})))}class ye extends r.ML{constructor(e={}){return super(e),this.vueRenderers=(0,pe.qj)(new Map),this.contentComponent=null,this.reactiveState=ve(this.view.state),this.reactiveExtensionStorage=ve(this.extensionStorage),this.on("transaction",(()=>{this.reactiveState.value=this.view.state,this.reactiveExtensionStorage.value=this.extensionStorage})),(0,pe.Xl)(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(e,t){super.registerPlugin(e,t),this.reactiveState.value=this.view.state}unregisterPlugin(e){super.unregisterPlugin(e),this.reactiveState.value=this.view.state}}const be=(0,fe.aZ)({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(e){const t=(0,pe.iH)(),n=(0,fe.FN)();return(0,fe.m0)((()=>{const r=e.editor;r&&r.options.element&&t.value&&(0,fe.Y3)((()=>{if(!t.value||!r.options.element.firstChild)return;const e=(0,pe.SU)(t.value);t.value.append(...r.options.element.childNodes),r.contentComponent=n.ctx._,r.setOptions({element:e}),r.createNodeViews()}))})),(0,fe.Jd)((()=>{const t=e.editor;if(!t)return;if(t.isDestroyed||t.view.setProps({nodeViews:{}}),t.contentComponent=null,!t.options.element.firstChild)return;const n=document.createElement("div");n.append(...t.options.element.childNodes),t.setOptions({element:n})})),{rootEl:t}},render(){const e=[];return this.editor&&this.editor.vueRenderers.forEach((t=>{const n=(0,fe.h)(fe.lR,{to:t.teleportElement,key:t.id},(0,fe.h)(t.component,{ref:t.id,...t.props}));e.push(n)})),(0,fe.h)("div",{ref:e=>{this.rootEl=e}},...e)}});(0,fe.aZ)({name:"FloatingMenu",props:{pluginKey:{type:null,default:"floatingMenu"},editor:{type:Object,required:!0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(e,{slots:t}){const n=(0,pe.iH)(null);return(0,fe.bv)((()=>{const{pluginKey:t,editor:r,tippyOptions:i,shouldShow:o}=e;r.registerPlugin(ge({pluginKey:t,editor:r,element:n.value,tippyOptions:i,shouldShow:o}))})),(0,fe.Jd)((()=>{const{pluginKey:t,editor:n}=e;n.unregisterPlugin(t)})),()=>{var e;return(0,fe.h)("div",{ref:n},null===(e=t.default)||void 0===e?void 0:e.call(t))}}}),(0,fe.aZ)({props:{as:{type:String,default:"div"}},render(){return(0,fe.h)(this.as,{style:{whiteSpace:"pre-wrap"},"data-node-view-content":""})}}),(0,fe.aZ)({props:{as:{type:String,default:"div"}},inject:["onDragStart","decorationClasses"],render(){var e,t;return(0,fe.h)(this.as,{class:this.decorationClasses,style:{whiteSpace:"normal"},"data-node-view-wrapper":"",onDragstart:this.onDragStart},null===(t=(e=this.$slots).default)||void 0===t?void 0:t.call(e))}});Boolean},9471:function(e,t,n){"use strict";n.d(t,{Dp:function(){return o},G:function(){return s},Z$:function(){return r},kJ:function(){return a},s7:function(){return i}});n(7658);const r=e=>e[e.length-1],i=(e,t)=>{for(let n=0;n<t.length;n++)e.push(t[n])},o=Array.from,s=(e,t)=>{for(let n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1},a=Array.isArray},547:function(e,t,n){"use strict";n.d(t,{$2:function(){return d},CY:function(){return o},Ko:function(){return s},Qn:function(){return i},RP:function(){return f},Tg:function(){return p},Vw:function(){return r},cq:function(){return a},jS:function(){return h},kr:function(){return u},rc:function(){return l},x1:function(){return c}});const r=1,i=2,o=4,s=8,a=32,l=64,c=128,u=31,d=63,h=127,f=2147483647,p=4294967295},2428:function(e,t,n){"use strict";n.d(t,{Ld:function(){return d},nY:function(){return f},r1:function(){return h}});var r=n(7793),i=n(8674),o=n(4606),s=n(3259);const a=new Map;class l{constructor(e){this.room=e,this.onmessage=null,this._onChange=t=>t.key===e&&null!==this.onmessage&&this.onmessage({data:o.Gh(t.newValue||"")}),s.z2(this._onChange)}postMessage(e){s.XN.setItem(this.room,o.s3(o.eh(e)))}close(){s.F(this._onChange)}}const c="undefined"===typeof BroadcastChannel?l:BroadcastChannel,u=e=>r.Yu(a,e,(()=>{const t=i.Ue(),n=new c(e);return n.onmessage=e=>t.forEach((t=>t(e.data,"broadcastchannel"))),{bc:n,subs:t}})),d=(e,t)=>(u(e).subs.add(t),t),h=(e,t)=>{const n=u(e),r=n.subs.delete(t);return r&&0===n.subs.size&&(n.bc.close(),a.delete(e)),r},f=(e,t,n=null)=>{const r=u(e);r.bc.postMessage(t),r.subs.forEach((e=>e(t,n)))}},4606:function(e,t,n){"use strict";n.d(t,{Gh:function(){return f},Te:function(){return s},eh:function(){return a},f9:function(){return p},s3:function(){return h}});n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315),n(2801);var r=n(6003),i=n(2269);const o=e=>new Uint8Array(e),s=(e,t,n)=>new Uint8Array(e,t,n),a=e=>new Uint8Array(e),l=e=>{let t="";for(let n=0;n<e.byteLength;n++)t+=r.IK(e[n]);return btoa(t)},c=e=>Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("base64"),u=e=>{const t=atob(e),n=o(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n},d=e=>{const t=Buffer.from(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},h=i.jU?l:c,f=i.jU?u:d,p=e=>{const t=o(e.byteLength);return t.set(e),t}},4805:function(e,t,n){"use strict";n.d(t,{HN:function(){return m},UF:function(){return k},XW:function(){return A},dD:function(){return O},kf:function(){return w},kj:function(){return g},l1:function(){return h},sO:function(){return R},v_:function(){return C},yg:function(){return v}});n(7658);var r=n(4606),i=n(547),o=n(3035),s=n(5953),a=n(6003),l=n(1755);const c=l.Ue("Unexpected end of array"),u=l.Ue("Integer out of Range");class d{constructor(e){this.arr=e,this.pos=0}}const h=e=>new d(e),f=e=>e.pos!==e.arr.length,p=(e,t)=>{const n=r.Te(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n},m=e=>p(e,v(e)),g=e=>e.arr[e.pos++],v=e=>{let t=0,n=1;const r=e.arr.length;while(e.pos<r){const r=e.arr[e.pos++];if(t+=(r&i.jS)*n,n*=128,r<i.x1)return t;if(t>s.YM)throw u}throw c},y=e=>{let t=e.arr[e.pos++],n=t&i.$2,r=64;const o=(t&i.rc)>0?-1:1;if(0===(t&i.x1))return o*n;const a=e.arr.length;while(e.pos<a){if(t=e.arr[e.pos++],n+=(t&i.jS)*r,r*=128,t<i.x1)return o*n;if(n>s.YM)throw u}throw c},b=e=>{let t=v(e);if(0===t)return"";{let n=String.fromCodePoint(g(e));if(--t<100)while(t--)n+=String.fromCodePoint(g(e));else while(t>0){const r=t<1e4?t:1e4,i=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,i),t-=r}return decodeURIComponent(escape(n))}},_=e=>a.CO.decode(m(e)),w=a.CO?_:b,x=(e,t)=>{const n=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,n},S=e=>x(e,4).getFloat32(0,!1),E=e=>x(e,8).getFloat64(0,!1),M=e=>x(e,8).getBigInt64(0,!1),T=[e=>{},e=>null,y,S,E,M,e=>!1,e=>!0,w,e=>{const t=v(e),n={};for(let r=0;r<t;r++){const t=w(e);n[t]=C(e)}return n},e=>{const t=v(e),n=[];for(let r=0;r<t;r++)n.push(C(e));return n},m],C=e=>T[127-g(e)](e);class A extends d{constructor(e,t){super(e),this.reader=t,this.s=null,this.count=0}read(){return 0===this.count&&(this.s=this.reader(this),f(this)?this.count=v(this)+1:this.count=-1),this.count--,this.s}}class k extends d{constructor(e){super(e),this.s=0,this.count=0}read(){if(0===this.count){this.s=y(this);const e=o.GR(this.s);this.count=1,e&&(this.s=-this.s,this.count=v(this)+2)}return this.count--,this.s}}class O extends d{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(0===this.count){const e=y(this),t=1&e;this.diff=o.GW(e/2),this.count=1,t&&(this.count=v(this)+2)}return this.s+=this.diff,this.count--,this.s}}class R{constructor(e){this.decoder=new k(e),this.str=w(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),t=this.str.slice(this.spos,e);return this.spos=e,t}}},5329:function(e,t,n){"use strict";n.d(t,{JU:function(){return i},x0:function(){return o}});var r=n(7793);const i="undefined"!==typeof document?document:{},o=("undefined"!==typeof DOMParser&&new DOMParser,e=>r.UI(e,((e,t)=>`${t}:${e};`)).join(""));i.ELEMENT_NODE,i.TEXT_NODE,i.CDATA_SECTION_NODE,i.COMMENT_NODE,i.DOCUMENT_NODE,i.DOCUMENT_TYPE_NODE,i.DOCUMENT_FRAGMENT_NODE},4251:function(e,t,n){"use strict";n.d(t,{$F:function(){return m},EM:function(){return R},GF:function(){return P},HE:function(){return D},HK:function(){return S},Mf:function(){return u},TS:function(){return U},_f:function(){return h},kE:function(){return d},mP:function(){return E},sX:function(){return N},uE:function(){return g},uw:function(){return x}});n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315),n(7658);var r=n(4606),i=n(3035),o=n(5953),s=n(547),a=n(6003),l=n(9471);class c{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const u=()=>new c,d=e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t},h=e=>{const t=new Uint8Array(d(e));let n=0;for(let r=0;r<e.bufs.length;r++){const i=e.bufs[r];t.set(i,n),n+=i.length}return t.set(r.Te(e.cbuf.buffer,0,e.cpos),n),t},f=(e,t)=>{const n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(r.Te(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(2*i.Fp(n,t)),e.cpos=0)},p=(e,t)=>{const n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*n),e.cpos=0),e.cbuf[e.cpos++]=t},m=p,g=(e,t)=>{while(t>s.jS)p(e,s.x1|s.jS&t),t=i.GW(t/128);p(e,s.jS&t)},v=(e,t)=>{const n=i.GR(t);n&&(t=-t),p(e,(t>s.$2?s.x1:0)|(n?s.rc:0)|s.$2&t),t=i.GW(t/64);while(t>0)p(e,(t>s.jS?s.x1:0)|s.jS&t),t=i.GW(t/128)},y=new Uint8Array(3e4),b=y.length/3,_=(e,t)=>{if(t.length<b){const n=a.YZ.encodeInto(t,y).written||0;g(e,n);for(let t=0;t<n;t++)p(e,y[t])}else E(e,a.lz(t))},w=(e,t)=>{const n=unescape(encodeURIComponent(t)),r=n.length;g(e,r);for(let i=0;i<r;i++)p(e,n.codePointAt(i))},x=a.YZ&&a.YZ.encodeInto?_:w,S=(e,t)=>{const n=e.cbuf.length,r=e.cpos,o=i.VV(n-r,t.length),s=t.length-o;e.cbuf.set(t.subarray(0,o),r),e.cpos+=o,s>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(i.Fp(2*n,s)),e.cbuf.set(t.subarray(o)),e.cpos=s)},E=(e,t)=>{g(e,t.byteLength),S(e,t)},M=(e,t)=>{f(e,t);const n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},T=(e,t)=>M(e,4).setFloat32(0,t,!1),C=(e,t)=>M(e,8).setFloat64(0,t,!1),A=(e,t)=>M(e,8).setBigInt64(0,t,!1),k=new DataView(new ArrayBuffer(4)),O=e=>(k.setFloat32(0,e),k.getFloat32(0)===e),R=(e,t)=>{switch(typeof t){case"string":p(e,119),x(e,t);break;case"number":o.U(t)&&i.Wn(t)<=s.RP?(p(e,125),v(e,t)):O(t)?(p(e,124),T(e,t)):(p(e,123),C(e,t));break;case"bigint":p(e,122),A(e,t);break;case"object":if(null===t)p(e,126);else if(l.kJ(t)){p(e,117),g(e,t.length);for(let n=0;n<t.length;n++)R(e,t[n])}else if(t instanceof Uint8Array)p(e,116),E(e,t);else{p(e,118);const n=Object.keys(t);g(e,n.length);for(let r=0;r<n.length;r++){const i=n[r];x(e,i),R(e,t[i])}}break;case"boolean":p(e,t?120:121);break;default:p(e,127)}};class P extends c{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&g(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const L=e=>{e.count>0&&(v(e.encoder,1===e.count?e.s:-e.s),e.count>1&&g(e.encoder,e.count-2))};class D{constructor(){this.encoder=new c,this.s=0,this.count=0}write(e){this.s===e?this.count++:(L(this),this.count=1,this.s=e)}toUint8Array(){return L(this),h(this.encoder)}}const I=e=>{if(e.count>0){const t=2*e.diff+(1===e.count?0:1);v(e.encoder,t),e.count>1&&g(e.encoder,e.count-2)}};class N{constructor(){this.encoder=new c,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(I(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return I(this),h(this.encoder)}}class U{constructor(){this.sarr=[],this.s="",this.lensE=new D}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new c;return this.sarr.push(this.s),this.s="",x(e,this.sarr.join("")),S(e,this.lensE.toUint8Array()),h(e)}}},2269:function(e,t,n){"use strict";n.d(t,{E0:function(){return p},jU:function(){return c},hH:function(){return v}});n(7658);var r=n(7793),i=n(6003);const o=e=>void 0===e?null:e;var s=n(3259),a=n(3918);const l="undefined"!==typeof process&&process.release&&/node|io\.js/.test(process.release.name),c="undefined"!==typeof window&&"undefined"!==typeof document&&!l;"undefined"!==typeof navigator&&/Mac/.test(navigator.platform);let u;const d=[],h=()=>{if(void 0===u)if(l){u=r.Ue();const e=process.argv;let t=null;for(let n=0;n<e.length;n++){const r=e[n];"-"===r[0]?(null!==t&&u.set(t,""),t=r):null!==t?(u.set(t,r),t=null):d.push(r)}null!==t&&u.set(t,"")}else"object"===typeof location?(u=r.Ue(),(location.search||"?").slice(1).split("&").forEach((e=>{if(0!==e.length){const[t,n]=e.split("=");u.set(`--${i.NF(t,"-")}`,n),u.set(`-${i.NF(t,"-")}`,n)}}))):u=r.Ue();return u},f=e=>h().has(e),p=e=>o(l?{NODE_ENV:"production",BASE_URL:"/noosld/"}[e.toUpperCase()]:s.XN.getItem(e)),m=e=>f("--"+e)||null!==p(e),g=(m("production"),l&&a.gB({NODE_ENV:"production",BASE_URL:"/noosld/"}.FORCE_COLOR,["true","1","2"])),v=!f("no-colors")&&(!l||process.stdout.isTTY||g)&&(!l||f("color")||g||null!==p("COLORTERM")||(p("TERM")||"").includes("color"))},1755:function(e,t,n){"use strict";n.d(t,{Nw:function(){return i},Ue:function(){return r},zR:function(){return o}});n(1703);const r=e=>new Error(e),i=()=>{throw r("Method unimplemented")},o=()=>{throw r("Unexpected case")}},9765:function(e,t,n){"use strict";n.d(t,{Vs:function(){return o}});n(7658);const r=e=>class{constructor(e){this._=e}destroy(){e(this._)}},i=r(clearTimeout),o=(e,t)=>new i(setTimeout(t,e));r(clearInterval),r((e=>"undefined"!==typeof requestAnimationFrame&&cancelAnimationFrame(e))),r((e=>"undefined"!==typeof cancelIdleCallback&&cancelIdleCallback(e)))},3918:function(e,t,n){"use strict";n.d(t,{Hi:function(){return c},PP:function(){return o},WY:function(){return s},gB:function(){return u},id:function(){return a}});n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315);var r=n(9471),i=n(3913);const o=(e,t,n=0)=>{try{for(;n<e.length;n++)e[n](...t)}finally{n<e.length&&o(e,t,n+1)}},s=()=>{},a=e=>e,l=(e,t)=>e===t,c=(e,t)=>{if(null==e||null==t)return l(e,t);if(e.constructor!==t.constructor)return!1;if(e===t)return!0;switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;break;case Set:if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;break;case Map:if(e.size!==t.size)return!1;for(const n of e.keys())if(!t.has(n)||!c(e.get(n),t.get(n)))return!1;break;case Object:if(i.kE(e)!==i.kE(t))return!1;for(const n in e)if(!i.l$(e,n)||!c(e[n],t[n]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!c(e[n],t[n]))return!1;break;default:return!1}return!0},u=(e,t)=>t.includes(e);r.kJ},1886:function(e,t,n){"use strict";n.d(t,{Ej:function(){return c},Pl:function(){return a},ZA:function(){return d},s7:function(){return u},ud:function(){return p},Wd:function(){return f},hM:function(){return h},YW:function(){return l},WO:function(){return m},_X:function(){return g},YX:function(){return _}});n(7658);const r=Symbol;var i=n(9514),o=n(2269),s=n(3918);const a=r(),l=r(),c=r(),u=r(),d=r(),h=r(),f=r(),p=r(),m=r(),g=e=>{const t=[],n=[];let r=0;for(;r<e.length;r++){const i=e[r];i.constructor===String||i.constructor===Number?t.push(i):i.constructor===Object&&n.push(JSON.stringify(i))}return n},v=[d,f,p,c];let y=0,b=i.ZG();const _=(e,t)=>{const n=v[y],r=o.E0("log"),a=null!==r&&("*"===r||"true"===r||new RegExp(r,"gi").test(t));return y=(y+1)%v.length,t+=": ",a?(...r)=>{const o=i.ZG(),s=o-b;b=o,e(n,t,m,...r.map((e=>"string"===typeof e||"symbol"===typeof e?e:JSON.stringify(e))),n," +"+s+"ms")}:s.WY}},311:function(e,t,n){"use strict";n.d(t,{YX:function(){return m},S0:function(){return f}});n(7658);var r=n(2269),i=n(8674);class o{constructor(e,t){this.left=e,this.right=t}}const s=(e,t)=>new o(e,t);var a=n(5329),l=n(7793),c=n(1886);const u={[c.Pl]:s("font-weight","bold"),[c.YW]:s("font-weight","normal"),[c.Ej]:s("color","blue"),[c.ZA]:s("color","green"),[c.s7]:s("color","grey"),[c.hM]:s("color","red"),[c.Wd]:s("color","purple"),[c.ud]:s("color","orange"),[c.WO]:s("color","black")},d=e=>{const t=[],n=[],r=l.Ue();let i=[],o=0;for(;o<e.length;o++){const i=e[o],s=u[i];if(void 0!==s)r.set(s.left,s.right);else{if(i.constructor!==String&&i.constructor!==Number)break;{const e=a.x0(r);o>0||e.length>0?(t.push("%c"+i),n.push(e)):t.push(i)}}}for(o>0&&(i=n,i.unshift(t.join("")));o<e.length;o++){const t=e[o];t instanceof Symbol||i.push(t)}return i},h=r.hH?d:c._X,f=(...e)=>{console.log(...h(e)),p.forEach((t=>t.print(e)))},p=i.Ue();const m=e=>c.YX(f,e)},7793:function(e,t,n){"use strict";n.d(t,{JG:function(){return i},UI:function(){return s},Ue:function(){return r},Yj:function(){return a},Yu:function(){return o}});n(7658);const r=()=>new Map,i=e=>{const t=r();return e.forEach(((e,n)=>{t.set(n,e)})),t},o=(e,t,n)=>{let r=e.get(t);return void 0===r&&e.set(t,r=n()),r},s=(e,t)=>{const n=[];for(const[r,i]of e)n.push(t(i,r));return n},a=(e,t)=>{for(const[n,r]of e)if(t(r,n))return!0;return!1}},3035:function(e,t,n){"use strict";n.d(t,{Fp:function(){return a},GR:function(){return c},GW:function(){return r},VV:function(){return s},Wn:function(){return i},mv:function(){return o},sQ:function(){return l}});const r=Math.floor,i=(Math.ceil,Math.abs),o=(Math.imul,Math.round,Math.log10),s=(Math.log2,Math.log,Math.sqrt,(e,t)=>e<t?e:t),a=(e,t)=>e>t?e:t,l=(Number.isNaN,Math.pow),c=(Math.sign,e=>0!==e?e<0:1/e<0)},5611:function(e,t,n){"use strict";n.d(t,{M:function(){return r}});const r=()=>{let e=!0;return(t,n)=>{if(e){e=!1;try{t()}finally{e=!0}}else void 0!==n&&n()}}},5953:function(e,t,n){"use strict";n.d(t,{U:function(){return s},YM:function(){return o}});var r=n(3035),i=n(547);const o=Number.MAX_SAFE_INTEGER,s=(Number.MIN_SAFE_INTEGER,i.RP,i.Tg,Number.isInteger||(e=>"number"===typeof e&&isFinite(e)&&r.GW(e)===e));Number.isNaN,Number.parseInt},3913:function(e,t,n){"use strict";n.d(t,{$m:function(){return d},Ed:function(){return o},UI:function(){return s},XP:function(){return i},f0:function(){return r},kE:function(){return a},l$:function(){return u},xb:function(){return l}});n(7658);const r=Object.assign,i=Object.keys,o=(e,t)=>{for(const n in e)t(e[n],n)},s=(e,t)=>{const n=[];for(const r in e)n.push(t(e[r],r));return n},a=e=>i(e).length,l=e=>{for(const t in e)return!1;return!0},c=(e,t)=>{for(const n in e)if(!t(e[n],n))return!1;return!0},u=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),d=(e,t)=>e===t||a(e)===a(t)&&c(e,((e,n)=>(void 0!==e||u(t,n))&&t[n]===e))},3837:function(e,t,n){"use strict";n.d(t,{y:function(){return s}});var r=n(7793),i=n(8674),o=n(9471);class s{constructor(){this._observers=r.Ue()}on(e,t){r.Yu(this._observers,e,i.Ue).add(t)}once(e,t){const n=(...r)=>{this.off(e,n),t(...r)};this.on(e,n)}off(e,t){const n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}emit(e,t){return o.Dp((this._observers.get(e)||r.Ue()).values()).forEach((e=>e(...t)))}destroy(){this._observers=r.Ue()}}},2296:function(e,t,n){"use strict";n.d(t,{DB:function(){return o},Ue:function(){return r},d1:function(){return i}});n(1703);const r=e=>new Promise(e),i=(Promise.all.bind(Promise),e=>Promise.reject(e)),o=e=>Promise.resolve(e)},3751:function(e,t,n){"use strict";n.d(t,{kw:function(){return a},TN:function(){return o},U7:function(){return s},k$:function(){return c}});n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315);var r=n(3035);crypto.subtle;const i=crypto.getRandomValues.bind(crypto),o=Math.random,s=()=>i(new Uint32Array(1))[0],a=e=>e[r.GW(o()*e.length)],l=[1e7]+-1e3+-4e3+-8e3+-1e11,c=()=>l.replace(/[018]/g,(e=>(e^s()&15>>e/4).toString(16)))},8674:function(e,t,n){"use strict";n.d(t,{Ue:function(){return r}});const r=()=>new Set},3259:function(e,t,n){"use strict";n.d(t,{F:function(){return l},XN:function(){return s},z2:function(){return a}});class r{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}}let i=new r,o=!0;try{"undefined"!==typeof localStorage&&(i=localStorage,o=!1)}catch(c){}const s=i,a=e=>o||addEventListener("storage",e),l=e=>o||removeEventListener("storage",e)},6003:function(e,t,n){"use strict";n.d(t,{CO:function(){return f},IK:function(){return r},NF:function(){return l},YZ:function(){return u},lz:function(){return h}});n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315);const r=String.fromCharCode,i=(String.fromCodePoint,r(65535),e=>e.toLowerCase()),o=/^\s*/g,s=e=>e.replace(o,""),a=/([A-Z])/g,l=(e,t)=>s(e.replace(a,(e=>`${t}${i(e)}`))),c=e=>{const t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=t.codePointAt(i);return r},u="undefined"!==typeof TextEncoder?new TextEncoder:null,d=e=>u.encode(e),h=u?d:c;let f="undefined"===typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});f&&1===f.decode(new Uint8Array).length&&(f=null)},9514:function(e,t,n){"use strict";n.d(t,{ZG:function(){return r}});const r=Date.now},7329:function(e,t,n){"use strict";n.d(t,{$:function(){return g},h:function(){return m}});n(1703);for(var r={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},i={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},o="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),s="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),a=0;a<10;a++)r[48+a]=r[96+a]=String(a);for(a=1;a<=24;a++)r[a+111]="F"+a;for(a=65;a<=90;a++)r[a]=String.fromCharCode(a+32),i[a]=String.fromCharCode(a);for(var l in r)i.hasOwnProperty(l)||(i[l]=r[l]);function c(e){var t=o&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||s&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key,n=!t&&e.key||(e.shiftKey?i:r)[e.keyCode]||e.key||"Unidentified";return"Esc"==n&&(n="Escape"),"Del"==n&&(n="Delete"),"Left"==n&&(n="ArrowLeft"),"Up"==n&&(n="ArrowUp"),"Right"==n&&(n="ArrowRight"),"Down"==n&&(n="ArrowDown"),n}var u=n(1418);const d="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function h(e){let t,n,r,i,o=e.split(/-(?!$)/),s=o[o.length-1];"Space"==s&&(s=" ");for(let a=0;a<o.length-1;a++){let e=o[a];if(/^(cmd|meta|m)$/i.test(e))i=!0;else if(/^a(lt)?$/i.test(e))t=!0;else if(/^(c|ctrl|control)$/i.test(e))n=!0;else if(/^s(hift)?$/i.test(e))r=!0;else{if(!/^mod$/i.test(e))throw new Error("Unrecognized modifier name: "+e);d?i=!0:n=!0}}return t&&(s="Alt-"+s),n&&(s="Ctrl-"+s),i&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function f(e){let t=Object.create(null);for(let n in e)t[h(n)]=e[n];return t}function p(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function m(e){return new u.Sy({props:{handleKeyDown:g(e)}})}function g(e){let t=f(e);return function(e,n){let i,o=c(n),s=t[p(o,n)];if(s&&s(e.state,e.dispatch,e))return!0;if(1==o.length&&" "!=o){if(n.shiftKey){let r=t[p(o,n,!1)];if(r&&r(e.state,e.dispatch,e))return!0}if((n.shiftKey||n.altKey||n.metaKey||o.charCodeAt(0)>127)&&(i=r[n.keyCode])&&i!=o){let r=t[p(i,n)];if(r&&r(e.state,e.dispatch,e))return!0}}return!1}}},8443:function(e,t,n){"use strict";n.d(t,{aw:function(){return re},PW:function(){return be},HY:function(){return a},vc:function(){return d},ZU:function(){return ee},NB:function(){return P},Ts:function(){return O},e4:function(){return h},V_:function(){return te},p2:function(){return f}});n(7658),n(1703);function r(e){this.content=e}r.prototype={constructor:r,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var i=n&&n!=e?this.remove(n):this,o=i.find(e),s=i.content.slice();return-1==o?s.push(n||e,t):(s[o+1]=t,n&&(s[o]=n)),new r(s)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new r(n)},addToStart:function(e,t){return new r([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new r(n)},addBefore:function(e,t,n){var i=this.remove(t),o=i.content.slice(),s=i.find(e);return o.splice(-1==s?o.length:s,0,t,n),new r(o)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=r.from(e),e.size?new r(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=r.from(e),e.size?new r(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=r.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach((function(t,n){e[t]=n})),e},get size(){return this.content.length>>1}},r.from=function(e){if(e instanceof r)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new r(t)};var i=r;function o(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let i=e.child(r),s=t.child(r);if(i!=s){if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let e=0;i.text[e]==s.text[e];e++)n++;return n}if(i.content.size||s.content.size){let e=o(i.content,s.content,n+1);if(null!=e)return e}n+=i.nodeSize}else n+=i.nodeSize}}function s(e,t,n,r){for(let i=e.childCount,o=t.childCount;;){if(0==i||0==o)return i==o?null:{a:n,b:r};let a=e.child(--i),l=t.child(--o),c=a.nodeSize;if(a!=l){if(!a.sameMarkup(l))return{a:n,b:r};if(a.isText&&a.text!=l.text){let e=0,t=Math.min(a.text.length,l.text.length);while(e<t&&a.text[a.text.length-e-1]==l.text[l.text.length-e-1])e++,n--,r--;return{a:n,b:r}}if(a.content.size||l.content.size){let e=s(a.content,l.content,n-1,r-1);if(e)return e}n-=c,r-=c}else n-=c,r-=c}}class a{constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,t,n,r=0,i){for(let o=0,s=0;s<t;o++){let a=this.content[o],l=s+a.nodeSize;if(l>e&&!1!==n(a,r+s,i||null,o)&&a.content.size){let i=s+1;a.nodesBetween(Math.max(0,e-i),Math.min(a.content.size,t-i),n,r+i)}s=l}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,r){let i="",o=!0;return this.nodesBetween(e,t,((s,a)=>{s.isText?(i+=s.text.slice(Math.max(e,a)-a,t-a),o=!n):s.isLeaf?(r?i+="function"===typeof r?r(s):r:s.type.spec.leafText&&(i+=s.type.spec.leafText(s)),o=!n):!o&&s.isBlock&&(i+=n,o=!0)}),0),i}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,r=this.content.slice(),i=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),i=1);i<e.content.length;i++)r.push(e.content[i]);return new a(r,this.size+e.size)}cut(e,t=this.size){if(0==e&&t==this.size)return this;let n=[],r=0;if(t>e)for(let i=0,o=0;o<t;i++){let s=this.content[i],a=o+s.nodeSize;a>e&&((o<e||a>t)&&(s=s.isText?s.cut(Math.max(0,e-o),Math.min(s.text.length,t-o)):s.cut(Math.max(0,e-o-1),Math.min(s.content.size,t-o-1))),n.push(s),r+=s.nodeSize),o=a}return new a(n,r)}cutByIndex(e,t){return e==t?a.empty:0==e&&t==this.content.length?this:new a(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let r=this.content.slice(),i=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new a(r,i)}addToStart(e){return new a([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new a(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let r=this.content[t];e(r,n,t),n+=r.nodeSize}}findDiffStart(e,t=0){return o(this,e,t)}findDiffEnd(e,t=this.size,n=e.size){return s(this,e,t,n)}findIndex(e,t=-1){if(0==e)return c(0,e);if(e==this.size)return c(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),o=r+i.nodeSize;if(o>=e)return o==e||t>0?c(n+1,o):c(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map((e=>e.toJSON())):null}static fromJSON(e,t){if(!t)return a.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new a(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return a.empty;let t,n=0;for(let r=0;r<e.length;r++){let i=e[r];n+=i.nodeSize,r&&i.isText&&e[r-1].sameMarkup(i)?(t||(t=e.slice(0,r)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new a(t||e,n)}static from(e){if(!e)return a.empty;if(e instanceof a)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new a([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}a.empty=new a([],0);const l={index:0,offset:0};function c(e,t){return l.index=e,l.offset=t,l}function u(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!u(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!u(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}class d{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let r=0;r<e.length;r++){let i=e[r];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,r));else{if(i.type.excludes(this.type))return e;!n&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(i)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&u(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw new RangeError(`There is no mark type ${t.type} in this schema`);return n.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return d.none;if(e instanceof d)return[e];let t=e.slice();return t.sort(((e,t)=>e.type.rank-t.type.rank)),t}}d.none=[];class h extends Error{}class f{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=m(this.content,e+this.openStart,t);return n&&new f(n,this.openStart,this.openEnd)}removeBetween(e,t){return new f(p(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return f.empty;let n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new f(a.fromJSON(e,t.content),n,r)}static maxOpen(e,t=!0){let n=0,r=0;for(let i=e.firstChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.firstChild)n++;for(let i=e.lastChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.lastChild)r++;return new f(e,n,r)}}function p(e,t,n){let{index:r,offset:i}=e.findIndex(t),o=e.maybeChild(r),{index:s,offset:a}=e.findIndex(n);if(i==t||o.isText){if(a!=n&&!e.child(s).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return e.replaceChild(r,o.copy(p(o.content,t-i-1,n-i-1)))}function m(e,t,n,r){let{index:i,offset:o}=e.findIndex(t),s=e.maybeChild(i);if(o==t||s.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));let a=m(s.content,t-o-1,n);return a&&e.replaceChild(i,s.copy(a))}function g(e,t,n){if(n.openStart>e.depth)throw new h("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new h("Inconsistent open depths");return v(e,t,n,0)}function v(e,t,n,r){let i=e.index(r),o=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){let s=v(e,t,n,r+1);return o.copy(o.content.replaceChild(i,s))}if(n.content.size){if(n.openStart||n.openEnd||e.depth!=r||t.depth!=r){let{start:i,end:s}=M(n,e);return x(o,S(e,i,s,t,r))}{let r=e.parent,i=r.content;return x(r,i.cut(0,e.parentOffset).append(n.content).append(i.cut(t.parentOffset)))}}return x(o,E(e,t,r))}function y(e,t){if(!t.type.compatibleContent(e.type))throw new h("Cannot join "+t.type.name+" onto "+e.type.name)}function b(e,t,n){let r=e.node(n);return y(r,t.node(n)),r}function _(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function w(e,t,n,r){let i=(t||e).node(n),o=0,s=t?t.index(n):i.childCount;e&&(o=e.index(n),e.depth>n?o++:e.textOffset&&(_(e.nodeAfter,r),o++));for(let a=o;a<s;a++)_(i.child(a),r);t&&t.depth==n&&t.textOffset&&_(t.nodeBefore,r)}function x(e,t){return e.type.checkContent(t),e.copy(t)}function S(e,t,n,r,i){let o=e.depth>i&&b(e,t,i+1),s=r.depth>i&&b(n,r,i+1),l=[];return w(null,e,i,l),o&&s&&t.index(i)==n.index(i)?(y(o,s),_(x(o,S(e,t,n,r,i+1)),l)):(o&&_(x(o,E(e,t,i+1)),l),w(t,n,i,l),s&&_(x(s,E(n,r,i+1)),l)),w(r,null,i,l),new a(l)}function E(e,t,n){let r=[];if(w(null,e,n,r),e.depth>n){let i=b(e,t,n+1);_(x(i,E(e,t,n+1)),r)}return w(t,null,n,r),new a(r)}function M(e,t){let n=t.depth-e.openStart,r=t.node(n),i=r.copy(e.content);for(let o=n-1;o>=0;o--)i=t.node(o).copy(a.from(i));return{start:i.resolveNoCache(e.openStart+n),end:i.resolveNoCache(i.content.size-e.openEnd-n)}}f.empty=new f(a.empty,0,0);class T{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return e=this.resolveDepth(e),0==e?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1;for(let i=0;i<e;i++)r+=n.child(i).nodeSize;return r}marks(){let e=this.parent,t=this.index();if(0==e.content.size)return d.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){let e=n;n=r,r=e}let i=n.marks;for(var o=0;o<i.length;o++)!1!==i[o].type.spec.inclusive||r&&i[o].isInSet(r.marks)||(i=i[o--].removeFromSet(i));return i}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,r=e.parent.maybeChild(e.index());for(var i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new O(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let n=[],r=0,i=t;for(let o=e;;){let{index:e,offset:t}=o.content.findIndex(i),s=i-t;if(n.push(o,e,r+t),!s)break;if(o=o.child(e),o.isText)break;i=s-1,r+=t+1}return new T(t,n,i)}static resolveCached(e,t){for(let r=0;r<C.length;r++){let n=C[r];if(n.pos==t&&n.doc==e)return n}let n=C[A]=T.resolve(e,t);return A=(A+1)%k,n}}let C=[],A=0,k=12;class O{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const R=Object.create(null);class P{constructor(e,t,n,r=d.none){this.type=e,this.attrs=t,this.marks=r,this.content=n||a.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n,r=0){this.content.nodesBetween(e,t,n,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,r){return this.content.textBetween(e,t,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&u(this.attrs,t||e.defaultAttrs||R)&&d.sameSet(this.marks,n||d.none)}copy(e=null){return e==this.content?this:new P(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new P(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,n=!1){if(e==t)return f.empty;let r=this.resolve(e),i=this.resolve(t),o=n?0:r.sharedDepth(t),s=r.start(o),a=r.node(o),l=a.content.cut(r.pos-s,i.pos-s);return new f(l,r.depth-o,i.depth-o)}replace(e,t,n){return g(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:r}=t.content.findIndex(e);if(t=t.maybeChild(n),!t)return null;if(r==e||t.isText)return t;e-=r+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let r=this.content.child(t-1);return{node:r,index:t-1,offset:n-r.nodeSize}}resolve(e){return T.resolveCached(this,e)}resolveNoCache(e){return T.resolve(this,e)}rangeHasMark(e,t,n){let r=!1;return t>e&&this.nodesBetween(e,t,(e=>(n.isInSet(e.marks)&&(r=!0),!r))),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),D(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,n=a.empty,r=0,i=n.childCount){let o=this.contentMatchAt(e).matchFragment(n,r,i),s=o&&o.matchFragment(this.content,t);if(!s||!s.validEnd)return!1;for(let a=r;a<i;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0}canReplaceWith(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;let i=this.contentMatchAt(e).matchType(n),o=i&&i.matchFragment(this.content,t);return!!o&&o.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=d.none;for(let t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!d.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map((e=>e.type.name))}`);this.content.forEach((e=>e.check()))}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((e=>e.toJSON()))),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}let r=a.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,r,n)}}P.prototype.text=void 0;class L extends P{constructor(e,t,n,r){if(super(e,t,null,r),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):D(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new L(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new L(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function D(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class I{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let n=new N(e,t);if(null==n.next)return I.empty;let r=U(n);n.next&&n.err("Unexpected trailing text");let i=q(W(r));return Y(i,n),i}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,n=e.childCount){let r=this;for(let i=t;r&&i<n;i++)r=r.matchType(e.child(i).type);return r}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e,t=!1,n=0){let r=[this];function i(o,s){let l=o.matchFragment(e,n);if(l&&(!t||l.validEnd))return a.from(s.map((e=>e.createAndFill())));for(let e=0;e<o.next.length;e++){let{type:t,next:n}=o.next[e];if(!t.isText&&!t.hasRequiredAttrs()&&-1==r.indexOf(n)){r.push(n);let e=i(n,s.concat(t));if(e)return e}}return null}return i(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];while(n.length){let r=n.shift(),i=r.match;if(i.matchType(e)){let e=[];for(let t=r;t.type;t=t.via)e.push(t.type);return e.reverse()}for(let e=0;e<i.next.length;e++){let{type:o,next:s}=i.next[e];o.isLeaf||o.hasRequiredAttrs()||o.name in t||r.type&&!s.validEnd||(n.push({match:o.contentMatch,type:o,via:r}),t[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(n){e.push(n);for(let r=0;r<n.next.length;r++)-1==e.indexOf(n.next[r].next)&&t(n.next[r].next)}return t(this),e.map(((t,n)=>{let r=n+(t.validEnd?"*":" ")+" ";for(let i=0;i<t.next.length;i++)r+=(i?", ":"")+t.next[i].type.name+"->"+e.indexOf(t.next[i].next);return r})).join("\n")}}I.empty=new I(!0);class N{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function U(e){let t=[];do{t.push(F(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function F(e){let t=[];do{t.push(B(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function B(e){let t=H(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=z(e,t)}return t}function V(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function z(e,t){let n=V(e),r=n;return e.eat(",")&&(r="}"!=e.next?V(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function j(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let o in n){let e=n[o];e.groups.indexOf(t)>-1&&i.push(e)}return 0==i.length&&e.err("No node type or group '"+t+"' found"),i}function H(e){if(e.eat("(")){let t=U(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){let t=j(e,e.next).map((t=>(null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t})));return e.pos++,1==t.length?t[0]:{type:"choice",exprs:t}}e.err("Unexpected token '"+e.next+"'")}function W(e){let t=[[]];return i(o(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){let i={term:r,to:n};return t[e].push(i),i}function i(e,t){e.forEach((e=>e.to=t))}function o(e,t){if("choice"==e.type)return e.exprs.reduce(((e,n)=>e.concat(o(n,t))),[]);if("seq"!=e.type){if("star"==e.type){let s=n();return r(t,s),i(o(e.expr,s),s),[r(s)]}if("plus"==e.type){let s=n();return i(o(e.expr,t),s),i(o(e.expr,s),s),[r(s)]}if("opt"==e.type)return[r(t)].concat(o(e.expr,t));if("range"==e.type){let s=t;for(let t=0;t<e.min;t++){let t=n();i(o(e.expr,s),t),s=t}if(-1==e.max)i(o(e.expr,s),s);else for(let t=e.min;t<e.max;t++){let t=n();r(s,t),i(o(e.expr,s),t),s=t}return[r(s)]}if("name"==e.type)return[r(t,void 0,e.value)];throw new Error("Unknown expr type")}for(let r=0;;r++){let s=o(e.exprs[r],t);if(r==e.exprs.length-1)return s;i(s,t=n())}}}function G(e,t){return t-e}function $(e,t){let n=[];return r(t),n.sort(G);function r(t){let i=e[t];if(1==i.length&&!i[0].term)return r(i[0].to);n.push(t);for(let e=0;e<i.length;e++){let{term:t,to:o}=i[e];t||-1!=n.indexOf(o)||r(o)}}}function q(e){let t=Object.create(null);return n($(e,0));function n(r){let i=[];r.forEach((t=>{e[t].forEach((({term:t,to:n})=>{if(!t)return;let r;for(let e=0;e<i.length;e++)i[e][0]==t&&(r=i[e][1]);$(e,n).forEach((e=>{r||i.push([t,r=[]]),-1==r.indexOf(e)&&r.push(e)}))}))}));let o=t[r.join(",")]=new I(r.indexOf(e.length-1)>-1);for(let e=0;e<i.length;e++){let r=i[e][1].sort(G);o.next.push({type:i[e][0],next:t[r.join(",")]||n(r)})}return o}}function Y(e,t){for(let n=0,r=[e];n<r.length;n++){let e=r[n],i=!e.validEnd,o=[];for(let t=0;t<e.next.length;t++){let{type:n,next:s}=e.next[t];o.push(n.name),!i||n.isText||n.hasRequiredAttrs()||(i=!1),-1==r.indexOf(s)&&r.push(s)}i&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function X(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function Z(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(void 0===i){let t=e[r];if(!t.hasDefault)throw new RangeError("No value supplied for attribute "+r);i=t.default}n[r]=i}return n}function K(e){let t=Object.create(null);if(e)for(let n in e)t[n]=new Q(e[n]);return t}class J{constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=K(n.attrs),this.defaultAttrs=X(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==I.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Z(this.attrs,e)}create(e=null,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new P(this,this.computeAttrs(e),a.from(t),d.setFrom(n))}createChecked(e=null,t,n){return t=a.from(t),this.checkContent(t),new P(this,this.computeAttrs(e),t,d.setFrom(n))}createAndFill(e=null,t,n){if(e=this.computeAttrs(e),t=a.from(t),t.size){let e=this.contentMatch.fillBefore(t);if(!e)return null;t=e.append(t)}let r=this.contentMatch.matchFragment(t),i=r&&r.fillBefore(a.empty,!0);return i?new P(this,e,t.append(i),d.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1}allowsMarks(e){if(null==this.markSet)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(null==this.markSet)return e;let t;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:d.none:e}static compile(e,t){let n=Object.create(null);e.forEach(((e,r)=>n[e]=new J(e,t,r)));let r=t.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let i in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}}class Q{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class ee{constructor(e,t,n,r){this.name=e,this.rank=t,this.schema=n,this.spec=r,this.attrs=K(r.attrs),this.excluded=null;let i=X(this.attrs);this.instance=i?new d(this,i):null}create(e=null){return!e&&this.instance?this.instance:new d(this,Z(this.attrs,e))}static compile(e,t){let n=Object.create(null),r=0;return e.forEach(((e,i)=>n[e]=new ee(e,r++,t,i))),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}excludes(e){return this.excluded.indexOf(e)>-1}}class te{constructor(e){this.cached=Object.create(null);let t=this.spec={};for(let r in e)t[r]=e[r];t.nodes=i.from(e.nodes),t.marks=i.from(e.marks||{}),this.nodes=J.compile(this.spec.nodes,this),this.marks=ee.compile(this.spec.marks,this);let n=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let e=this.nodes[r],t=e.spec.content||"",i=e.spec.marks;e.contentMatch=n[t]||(n[t]=I.parse(t,this.nodes)),e.inlineContent=e.contentMatch.inlineContent,e.markSet="_"==i?null:i?ne(this,i.split(" ")):""!=i&&e.inlineContent?null:[]}for(let r in this.marks){let e=this.marks[r],t=e.spec.excludes;e.excluded=null==t?[e]:""==t?[]:ne(this,t.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,n,r){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof J))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)}text(e,t){let n=this.nodes.text;return new L(n,n.defaultAttrs,e,d.setFrom(t))}mark(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return P.fromJSON(this,e)}markFromJSON(e){return d.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function ne(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],o=e.marks[i],s=o;if(o)n.push(o);else for(let t in e.marks){let r=e.marks[t];("_"==i||r.spec.group&&r.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=r)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}class re{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach((e=>{e.tag?this.tags.push(e):e.style&&this.styles.push(e)})),this.normalizeLists=!this.tags.some((t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let n=e.nodes[t.node];return n.contentMatch.matchType(n)}))}parse(e,t={}){let n=new he(this,t,!1);return n.addAll(e,t.from,t.to),n.finish()}parseSlice(e,t={}){let n=new he(this,t,!0);return n.addAll(e,t.from,t.to),f.maxOpen(n.finish())}matchTag(e,t,n){for(let r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){let n=this.tags[r];if(pe(e,n.tag)&&(void 0===n.namespace||e.namespaceURI==n.namespace)&&(!n.context||t.matchesContext(n.context))){if(n.getAttrs){let t=n.getAttrs(e);if(!1===t)continue;n.attrs=t||void 0}return n}}}matchStyle(e,t,n,r){for(let i=r?this.styles.indexOf(r)+1:0;i<this.styles.length;i++){let r=this.styles[i],o=r.style;if(!(0!=o.indexOf(e)||r.context&&!n.matchesContext(r.context)||o.length>e.length&&(61!=o.charCodeAt(e.length)||o.slice(e.length+1)!=t))){if(r.getAttrs){let e=r.getAttrs(t);if(!1===e)continue;r.attrs=e||void 0}return r}}}static schemaRules(e){let t=[];function n(e){let n=null==e.priority?50:e.priority,r=0;for(;r<t.length;r++){let e=t[r],i=null==e.priority?50:e.priority;if(i<n)break}t.splice(r,0,e)}for(let r in e.marks){let t=e.marks[r].spec.parseDOM;t&&t.forEach((e=>{n(e=ge(e)),e.mark||e.ignore||e.clearMark||(e.mark=r)}))}for(let r in e.nodes){let t=e.nodes[r].spec.parseDOM;t&&t.forEach((e=>{n(e=ge(e)),e.node||e.ignore||e.mark||(e.node=r)}))}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new re(e,re.schemaRules(e)))}}const ie={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},oe={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},se={ol:!0,ul:!0},ae=1,le=2,ce=4;function ue(e,t,n){return null!=t?(t?ae:0)|("full"===t?le:0):e&&"pre"==e.whitespace?ae|le:n&~ce}class de{constructor(e,t,n,r,i,o,s){this.type=e,this.attrs=t,this.marks=n,this.pendingMarks=r,this.solid=i,this.options=s,this.content=[],this.activeMarks=d.none,this.stashMarks=[],this.match=o||(s&ce?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(a.from(e));if(!t){let t,n=this.type.contentMatch;return(t=n.findWrapping(e.type))?(this.match=n,t):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&ae)){let e,t=this.content[this.content.length-1];if(t&&t.isText&&(e=/[ \t\r\n\u000c]+$/.exec(t.text))){let n=t;t.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length))}}let t=a.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(a.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,n=this.pendingMarks;t<n.length;t++){let r=n[t];(this.type?this.type.allowsMarkType(r.type):ve(r.type,e))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!ie.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class he{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0;let r,i=t.topNode,o=ue(null,t.preserveWhitespace,0)|(n?ce:0);r=i?new de(i.type,i.attrs,d.none,d.none,!0,t.topMatch||i.type.contentMatch,o):new de(n?null:e.schema.topNodeType,null,d.none,d.none,!0,null,o),this.nodes=[r],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){let t=e.getAttribute("style");if(t){let n=this.readStyles(me(t));if(!n)return;let[r,i]=n,o=this.top;for(let e=0;e<i.length;e++)this.removePendingMark(i[e],o);for(let e=0;e<r.length;e++)this.addPendingMark(r[e]);this.addElement(e);for(let e=0;e<r.length;e++)this.removePendingMark(r[e],o);for(let e=0;e<i.length;e++)this.addPendingMark(i[e])}else this.addElement(e)}}addTextNode(e){let t=e.nodeValue,n=this.top;if(n.options&le||n.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(n.options&ae)t=n.options&le?t.replace(/\r\n?/g,"\n"):t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let r=n.content[n.content.length-1],i=e.previousSibling;(!r||i&&"BR"==i.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let n,r=e.nodeName.toLowerCase();se.hasOwnProperty(r)&&this.parser.normalizeLists&&fe(e);let i=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(n=this.parser.matchTag(e,this,t));if(i?i.ignore:oe.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!i||i.skip||i.closeParent){i&&i.closeParent?this.open=Math.max(0,this.open-1):i&&i.skip.nodeType&&(e=i.skip);let t,n=this.top,o=this.needsBlock;if(ie.hasOwnProperty(r))n.content.length&&n.content[0].isInline&&this.open&&(this.open--,n=this.top),t=!0,n.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);this.addAll(e),t&&this.sync(n),this.needsBlock=o}else this.addElementByRule(e,i,!1===i.consuming?n:void 0)}leafFallback(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))}ignoreFallback(e){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=d.none,n=d.none;for(let r=0;r<e.length;r+=2)for(let i;;){let o=this.parser.matchStyle(e[r],e[r+1],this,i);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach((e=>{o.clearMark(e)&&(n=e.addToSet(n))})):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),!1!==o.consuming)break;i=o}return[t,n]}addElementByRule(e,t,n){let r,i,o;if(t.node)i=this.parser.schema.nodes[t.node],i.isLeaf?this.insertNode(i.create(t.attrs))||this.leafFallback(e):r=this.enter(i,t.attrs||null,t.preserveWhitespace);else{let e=this.parser.schema.marks[t.mark];o=e.create(t.attrs),this.addPendingMark(o)}let s=this.top;if(i&&i.isLeaf)this.findInside(e);else if(n)this.addElement(e,n);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((e=>this.insertNode(e)));else{let n=e;"string"==typeof t.contentElement?n=e.querySelector(t.contentElement):"function"==typeof t.contentElement?n=t.contentElement(e):t.contentElement&&(n=t.contentElement),this.findAround(e,n,!0),this.addAll(n)}r&&this.sync(s)&&this.open--,o&&this.removePendingMark(o,s)}addAll(e,t,n){let r=t||0;for(let i=t?e.childNodes[t]:e.firstChild,o=null==n?null:e.childNodes[n];i!=o;i=i.nextSibling,++r)this.findAtPoint(e,r),this.addDOM(i);this.findAtPoint(e,r)}findPlace(e){let t,n;for(let r=this.open;r>=0;r--){let i=this.nodes[r],o=i.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,n=i,!o.length))break;if(i.solid)break}if(!t)return!1;this.sync(n);for(let r=0;r<t.length;r++)this.enterInner(t[r],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let n=t.activeMarks;for(let r=0;r<e.marks.length;r++)t.type&&!t.type.allowsMarkType(e.marks[r].type)||(n=e.marks[r].addToSet(n));return t.content.push(e.mark(n)),!0}return!1}enter(e,t,n){let r=this.findPlace(e.create(t));return r&&this.enterInner(e,t,!0,n),r}enterInner(e,t=null,n=!1,r){this.closeExtra();let i=this.top;i.applyPending(e),i.match=i.match&&i.match.matchType(e);let o=ue(e,r,i.options);i.options&ce&&0==i.content.length&&(o|=ce),this.nodes.push(new de(e,t,i.activeMarks,i.pendingMarks,n,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let t=n.length-1;t>=0;t--)e+=n[t].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)){let e=t.compareDocumentPosition(this.find[r].node);e&(n?2:4)&&(this.find[r].pos=this.currentPos)}}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,r=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),i=-(n?n.depth+1:0)+(r?0:1),o=(e,s)=>{for(;e>=0;e--){let a=t[e];if(""==a){if(e==t.length-1||0==e)continue;for(;s>=i;s--)if(o(e-1,s))return!0;return!1}{let e=s>0||0==s&&r?this.nodes[s].type:n&&s>=i?n.node(s-i).type:null;if(!e||e.name!=a&&-1==e.groups.indexOf(a))return!1;s--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let t in this.parser.schema.nodes){let e=this.parser.schema.nodes[t];if(e.isTextblock&&e.defaultAttrs)return e}}addPendingMark(e){let t=ye(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let n=this.open;n>=0;n--){let r=this.nodes[n],i=r.pendingMarks.lastIndexOf(e);if(i>-1)r.pendingMarks=e.removeFromSet(r.pendingMarks);else{r.activeMarks=e.removeFromSet(r.activeMarks);let t=r.popFromStashMark(e);t&&r.type&&r.type.allowsMarkType(t.type)&&(r.activeMarks=t.addToSet(r.activeMarks))}if(r==t)break}}}function fe(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let e=1==t.nodeType?t.nodeName.toLowerCase():null;e&&se.hasOwnProperty(e)&&n?(n.appendChild(t),t=n):"li"==e?n=t:e&&(n=null)}}function pe(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function me(e){let t,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];while(t=n.exec(e))r.push(t[1],t[2].trim());return r}function ge(e){let t={};for(let n in e)t[n]=e[n];return t}function ve(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let o=[],s=e=>{o.push(e);for(let n=0;n<e.edgeCount;n++){let{type:r,next:i}=e.edge(n);if(r==t)return!0;if(o.indexOf(i)<0&&s(i))return!0}};if(s(i.contentMatch))return!0}}function ye(e,t){for(let n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}class be{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},n){n||(n=we(t).createDocumentFragment());let r=n,i=[];return e.forEach((e=>{if(i.length||e.marks.length){let n=0,o=0;while(n<i.length&&o<e.marks.length){let t=e.marks[o];if(this.marks[t.type.name]){if(!t.eq(i[n][0])||!1===t.type.spec.spanning)break;n++,o++}else o++}while(n<i.length)r=i.pop()[1];while(o<e.marks.length){let n=e.marks[o++],s=this.serializeMark(n,e.isInline,t);s&&(i.push([n,r]),r.appendChild(s.dom),r=s.contentDOM||s.dom)}}r.appendChild(this.serializeNodeInner(e,t))})),n}serializeNodeInner(e,t){let{dom:n,contentDOM:r}=be.renderSpec(we(t),this.nodes[e.type.name](e));if(r){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,r)}return n}serializeNode(e,t={}){let n=this.serializeNodeInner(e,t);for(let r=e.marks.length-1;r>=0;r--){let i=this.serializeMark(e.marks[r],e.isInline,t);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n}serializeMark(e,t,n={}){let r=this.marks[e.type.name];return r&&be.renderSpec(we(n),r(e,t))}static renderSpec(e,t,n=null){if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let r,i=t[0],o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let s=n?e.createElementNS(n,i):e.createElement(i),a=t[1],l=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a)){l=2;for(let e in a)if(null!=a[e]){let t=e.indexOf(" ");t>0?s.setAttributeNS(e.slice(0,t),e.slice(t+1),a[e]):s.setAttribute(e,a[e])}}for(let c=l;c<t.length;c++){let i=t[c];if(0===i){if(c<t.length-1||c>l)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}{let{dom:t,contentDOM:o}=be.renderSpec(e,i,n);if(s.appendChild(t),o){if(r)throw new RangeError("Multiple content holes");r=o}}}return{dom:s,contentDOM:r}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new be(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=_e(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return _e(e.marks)}}function _e(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function we(e){return e.document||window.document}},1418:function(e,t,n){"use strict";n.d(t,{Bs:function(){return u},C1:function(){return p},H$:function(){return R},Sy:function(){return A},Y1:function(){return s},qv:function(){return h},yy:function(){return T}});n(1703),n(7658);var r=n(8443),i=n(4040);const o=Object.create(null);class s{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new a(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=r.p2.empty){let n=t.content.lastChild,i=null;for(let r=0;r<t.openEnd;r++)i=n,n=n.lastChild;let o=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:c}=s[a],u=e.mapping.slice(o);e.replaceRange(u.map(l.pos),u.map(c.pos),a?r.p2.empty:t),0==a&&v(e,o,(n?n.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,r=this.ranges;for(let i=0;i<r.length;i++){let{$from:o,$to:s}=r[i],a=e.mapping.slice(n),l=a.map(o.pos),c=a.map(s.pos);i?e.deleteRange(l,c):(e.replaceRangeWith(l,c,t),v(e,n,t.isInline?-1:1))}}static findFrom(e,t,n=!1){let r=e.parent.inlineContent?new u(e):g(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(let i=e.depth-1;i>=0;i--){let r=t<0?g(e.node(0),e.node(i),e.before(i+1),e.index(i),t,n):g(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,t,n);if(r)return r}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new p(e.node(0))}static atStart(e){return g(e,e,0,0,1)||new p(e)}static atEnd(e){return g(e,e,e.content.size,e.childCount,-1)||new p(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=o[t.type];if(!n)throw new RangeError(`No selection type ${t.type} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in o)throw new RangeError("Duplicate use of selection JSON ID "+e);return o[e]=t,t.prototype.jsonID=e,t}getBookmark(){return u.between(this.$anchor,this.$head).getBookmark()}}s.prototype.visible=!0;class a{constructor(e,t){this.$from=e,this.$to=t}}let l=!1;function c(e){l||e.parent.inlineContent||(l=!0,console["warn"]("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class u extends s{constructor(e,t=e){c(e),c(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return s.near(n);let r=e.resolve(t.map(this.anchor));return new u(r.parent.inlineContent?r:n,n)}replace(e,t=r.p2.empty){if(super.replace(e,t),t==r.p2.empty){let t=this.$from.marksAcross(this.$to);t&&e.ensureMarks(t)}}eq(e){return e instanceof u&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new d(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new u(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,n=t){let r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}static between(e,t,n){let r=e.pos-t.pos;if(n&&!r||(n=r>=0?1:-1),!t.parent.inlineContent){let e=s.findFrom(t,n,!0)||s.findFrom(t,-n,!0);if(!e)return s.near(t,n);t=e.$head}return e.parent.inlineContent||(0==r?e=t:(e=(s.findFrom(e,-n,!0)||s.findFrom(e,n,!0)).$anchor,e.pos<t.pos!=r<0&&(e=t))),new u(e,t)}}s.jsonID("text",u);class d{constructor(e,t){this.anchor=e,this.head=t}map(e){return new d(e.map(this.anchor),e.map(this.head))}resolve(e){return u.between(e.resolve(this.anchor),e.resolve(this.head))}}class h extends s{constructor(e){let t=e.nodeAfter,n=e.node(0).resolve(e.pos+t.nodeSize);super(e,n),this.node=t}map(e,t){let{deleted:n,pos:r}=t.mapResult(this.anchor),i=e.resolve(r);return n?s.near(i):new h(i)}content(){return new r.p2(r.HY.from(this.node),0,0)}eq(e){return e instanceof h&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new f(this.anchor)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new h(e.resolve(t.anchor))}static create(e,t){return new h(e.resolve(t))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}}h.prototype.visible=!1,s.jsonID("node",h);class f{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new d(n,n):new f(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&h.isSelectable(n)?new h(t):s.near(t)}}class p extends s{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=r.p2.empty){if(t==r.p2.empty){e.delete(0,e.doc.content.size);let t=s.atStart(e.doc);t.eq(e.selection)||e.setSelection(t)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new p(e)}map(e){return new p(e)}eq(e){return e instanceof p}getBookmark(){return m}}s.jsonID("all",p);const m={map(){return this},resolve(e){return new p(e)}};function g(e,t,n,r,i,o=!1){if(t.inlineContent)return u.create(e,n);for(let s=r-(i>0?0:1);i>0?s<t.childCount:s>=0;s+=i){let r=t.child(s);if(r.isAtom){if(!o&&h.isSelectable(r))return h.create(e,n-(i<0?r.nodeSize:0))}else{let t=g(e,r,n+i,i<0?r.childCount:0,i,o);if(t)return t}n+=r.nodeSize*i}return null}function v(e,t,n){let r=e.steps.length-1;if(r<t)return;let o=e.steps[r];if(!(o instanceof i.Pu||o instanceof i.FC))return;let a,l=e.mapping.maps[r];l.forEach(((e,t,n,r)=>{null==a&&(a=r)})),e.setSelection(s.near(e.doc.resolve(a),n))}const y=1,b=2,_=4;class w extends i.wx{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|y)&~b,this.storedMarks=null,this}get selectionSet(){return(this.updated&y)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=b,this}ensureMarks(e){return r.vc.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&b)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~b,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||r.vc.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){let r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();{if(null==n&&(n=t),n=null==n?t:n,!e)return this.deleteRange(t,n);let i=this.storedMarks;if(!i){let e=this.doc.resolve(t);i=n==t?e.marks():e.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,i)),this.selection.empty||this.setSelection(s.near(this.selection.$to)),this}}setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=_,this}get scrolledIntoView(){return(this.updated&_)>0}}function x(e,t){return t&&e?e.bind(t):e}class S{constructor(e,t,n){this.name=e,this.init=x(t.init,n),this.apply=x(t.apply,n)}}const E=[new S("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new S("selection",{init(e,t){return e.selection||s.atStart(t.doc)},apply(e){return e.selection}}),new S("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new S("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class M{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=E.slice(),t&&t.forEach((e=>{if(this.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");this.plugins.push(e),this.pluginsByKey[e.key]=e,e.spec.state&&this.fields.push(new S(e.key,e.spec.state,e))}))}}class T{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let t=this.config.plugins[n];if(t.spec.filterTransaction&&!t.spec.filterTransaction.call(t,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),r=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let s=this.config.plugins[o];if(s.spec.appendTransaction){let a=r?r[o].n:0,l=r?r[o].state:this,c=a<t.length&&s.spec.appendTransaction.call(s,a?t.slice(a):t,l,n);if(c&&n.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",e),!r){r=[];for(let e=0;e<this.config.plugins.length;e++)r.push(e<o?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),i=!0}r&&(r[o]={state:n,n:t.length})}}if(!i)return{state:n,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new T(this.config),n=this.config.fields;for(let r=0;r<n.length;r++){let i=n[r];t[i.name]=i.apply(e,this[i.name],this,t)}return t}get tr(){return new w(this)}static create(e){let t=new M(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new T(t);for(let r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n}reconfigure(e){let t=new M(this.schema,e.plugins),n=t.fields,r=new T(t);for(let i=0;i<n.length;i++){let t=n[i].name;r[t]=this.hasOwnProperty(t)?this[t]:n[i].init(e,r)}return r}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((e=>e.toJSON()))),e&&"object"==typeof e)for(let n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=e[n],i=r.spec.state;i&&i.toJSON&&(t[n]=i.toJSON.call(r,this[r.key]))}return t}static fromJSON(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new M(e.schema,e.plugins),o=new T(i);return i.fields.forEach((i=>{if("doc"==i.name)o.doc=r.NB.fromJSON(e.schema,t.doc);else if("selection"==i.name)o.selection=s.fromJSON(o.doc,t.selection);else if("storedMarks"==i.name)t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let r in n){let s=n[r],a=s.spec.state;if(s.key==i.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(t,r))return void(o[i.name]=a.fromJSON.call(s,e,t[r],o))}o[i.name]=i.init(e,o)}})),o}}function C(e,t,n){for(let r in e){let i=e[r];i instanceof Function?i=i.bind(t):"handleDOMEvents"==r&&(i=C(i,t,{})),n[r]=i}return n}class A{constructor(e){this.spec=e,this.props={},e.props&&C(e.props,this,this.props),this.key=e.key?e.key.key:O("plugin")}getState(e){return e[this.key]}}const k=Object.create(null);function O(e){return e in k?e+"$"+ ++k[e]:(k[e]=0,e+"$")}class R{constructor(e="key"){this.key=O(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}},4040:function(e,t,n){"use strict";n.d(t,{Ax:function(){return z},FC:function(){return M},GJ:function(){return G},Mn:function(){return H},Pu:function(){return E},dR:function(){return X},k9:function(){return R},nd:function(){return L},nj:function(){return Y},vs:function(){return m},wx:function(){return he}});n(7658),n(1703);var r=n(8443);const i=65535,o=Math.pow(2,16);function s(e,t){return e+t*o}function a(e){return e&i}function l(e){return(e-(e&i))/o}const c=1,u=2,d=4,h=8;class f{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(this.delInfo&h)>0}get deletedBefore(){return(this.delInfo&(c|d))>0}get deletedAfter(){return(this.delInfo&(u|d))>0}get deletedAcross(){return(this.delInfo&d)>0}}class p{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&p.empty)return p.empty}recover(e){let t=0,n=a(e);if(!this.inverted)for(let r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+l(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,n){let r=0,i=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let p=this.ranges[a+i],m=this.ranges[a+o],g=l+p;if(e<=g){let i=p?e==l?-1:e==g?1:t:t,o=l+r+(i<0?0:m);if(n)return o;let v=e==(t<0?l:g)?null:s(a/3,e-l),y=e==l?u:e==g?c:d;return(t<0?e!=l:e!=g)&&(y|=h),new f(o,y,v)}r+=m-p}return n?e+r:new f(e+r,0,null)}touches(e,t){let n=0,r=a(t),i=this.inverted?2:1,o=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let t=this.ranges[s]-(this.inverted?n:0);if(t>e)break;let a=this.ranges[s+i],l=t+a;if(e<=l&&s==3*r)return!0;n+=this.ranges[s+o]-a}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,i=0;r<this.ranges.length;r+=3){let o=this.ranges[r],s=o-(this.inverted?i:0),a=o+(this.inverted?0:i),l=this.ranges[r+t],c=this.ranges[r+n];e(s,s+l,a,a+c),i+=c-l}}invert(){return new p(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?p.empty:new p(e<0?[0,-e,0]:[0,0,e])}}p.empty=new p([]);class m{constructor(e=[],t,n=0,r=e.length){this.maps=e,this.mirror=t,this.from=n,this.to=r}slice(e=0,t=this.maps.length){return new m(this.maps,this.mirror,e,t)}copy(){return new m(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,n=this.maps.length;t<e.maps.length;t++){let r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:void 0)}}getMirror(e){if(this.mirror)for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){let r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&r>t?n-r-1:void 0)}}invert(){let e=new m;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,n){let r=0;for(let i=this.from;i<this.to;i++){let n=this.maps[i],o=n.mapResult(e,t);if(null!=o.recover){let t=this.getMirror(i);if(null!=t&&t>i&&t<this.to){i=t,e=this.maps[t].recover(o.recover);continue}}r|=o.delInfo,e=o.pos}return n?e:new f(e,r,null)}}const g=Object.create(null);class v{getMap(){return p.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=g[t.stepType];if(!n)throw new RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in g)throw new RangeError("Duplicate use of step JSON ID "+e);return g[e]=t,t.prototype.jsonID=e,t}}class y{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new y(e,null)}static fail(e){return new y(null,e)}static fromReplace(e,t,n,i){try{return y.ok(e.replace(t,n,i))}catch(o){if(o instanceof r.e4)return y.fail(o.message);throw o}}}function b(e,t,n){let i=[];for(let r=0;r<e.childCount;r++){let o=e.child(r);o.content.size&&(o=o.copy(b(o.content,t,o))),o.isInline&&(o=t(o,n,r)),i.push(o)}return r.HY.fromArray(i)}class _ extends v{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),i=n.node(n.sharedDepth(this.to)),o=new r.p2(b(t.content,((e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e),i),t.openStart,t.openEnd);return y.fromReplace(e,this.from,this.to,o)}invert(){return new w(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new _(t.pos,n.pos,this.mark)}merge(e){return e instanceof _&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new _(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new _(t.from,t.to,e.markFromJSON(t.mark))}}v.jsonID("addMark",_);class w extends v{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new r.p2(b(t.content,(e=>e.mark(this.mark.removeFromSet(e.marks))),e),t.openStart,t.openEnd);return y.fromReplace(e,this.from,this.to,n)}invert(){return new _(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new w(t.pos,n.pos,this.mark)}merge(e){return e instanceof w&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new w(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new w(t.from,t.to,e.markFromJSON(t.mark))}}v.jsonID("removeMark",w);class x extends v{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return y.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return y.fromReplace(e,this.pos,this.pos+1,new r.p2(r.HY.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let e=this.mark.addToSet(t.marks);if(e.length==t.marks.length){for(let n=0;n<t.marks.length;n++)if(!t.marks[n].isInSet(e))return new x(this.pos,t.marks[n]);return new x(this.pos,this.mark)}}return new S(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new x(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new x(t.pos,e.markFromJSON(t.mark))}}v.jsonID("addNodeMark",x);class S extends v{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return y.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return y.fromReplace(e,this.pos,this.pos+1,new r.p2(r.HY.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new x(this.pos,this.mark):this}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new S(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new S(t.pos,e.markFromJSON(t.mark))}}v.jsonID("removeNodeMark",S);class E extends v{constructor(e,t,n,r=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=r}apply(e){return this.structure&&T(e,this.from,this.to)?y.fail("Structure replace would overwrite content"):y.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new p([this.from,this.to-this.from,this.slice.size])}invert(e){return new E(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new E(t.pos,Math.max(t.pos,n.pos),this.slice)}merge(e){if(!(e instanceof E)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;{let t=this.slice.size+e.slice.size==0?r.p2.empty:new r.p2(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new E(e.from,this.to,t,this.structure)}}{let t=this.slice.size+e.slice.size==0?r.p2.empty:new r.p2(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new E(this.from,this.to+(e.to-e.from),t,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new E(t.from,t.to,r.p2.fromJSON(e,t.slice),!!t.structure)}}v.jsonID("replace",E);class M extends v{constructor(e,t,n,r,i,o,s=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=r,this.slice=i,this.insert=o,this.structure=s}apply(e){if(this.structure&&(T(e,this.from,this.gapFrom)||T(e,this.gapTo,this.to)))return y.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return y.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?y.fromReplace(e,this.from,this.to,n):y.fail("Content does not fit in gap")}getMap(){return new p([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new M(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),r=e.map(this.gapFrom,-1),i=e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||r<t.pos||i>n.pos?null:new M(t.pos,n.pos,r,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new M(t.from,t.to,t.gapFrom,t.gapTo,r.p2.fromJSON(e,t.slice),t.insert,!!t.structure)}}function T(e,t,n){let r=e.resolve(t),i=n-t,o=r.depth;while(i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount)o--,i--;if(i>0){let e=r.node(o).maybeChild(r.indexAfter(o));while(i>0){if(!e||e.isLeaf)return!0;e=e.firstChild,i--}}return!1}function C(e,t,n,r){let i,o,s=[],a=[];e.doc.nodesBetween(t,n,((e,l,c)=>{if(!e.isInline)return;let u=e.marks;if(!r.isInSet(u)&&c.type.allowsMarkType(r.type)){let c=Math.max(l,t),d=Math.min(l+e.nodeSize,n),h=r.addToSet(u);for(let e=0;e<u.length;e++)u[e].isInSet(h)||(i&&i.to==c&&i.mark.eq(u[e])?i.to=d:s.push(i=new w(c,d,u[e])));o&&o.to==c?o.to=d:a.push(o=new _(c,d,r))}})),s.forEach((t=>e.step(t))),a.forEach((t=>e.step(t)))}function A(e,t,n,i){let o=[],s=0;e.doc.nodesBetween(t,n,((e,a)=>{if(!e.isInline)return;s++;let l=null;if(i instanceof r.ZU){let t,n=e.marks;while(t=i.isInSet(n))(l||(l=[])).push(t),n=t.removeFromSet(n)}else i?i.isInSet(e.marks)&&(l=[i]):l=e.marks;if(l&&l.length){let r=Math.min(a+e.nodeSize,n);for(let e=0;e<l.length;e++){let n,i=l[e];for(let e=0;e<o.length;e++){let t=o[e];t.step==s-1&&i.eq(o[e].style)&&(n=t)}n?(n.to=r,n.step=s):o.push({style:i,from:Math.max(a,t),to:r,step:s})}}})),o.forEach((t=>e.step(new w(t.from,t.to,t.style))))}function k(e,t,n,i=n.contentMatch){let o=e.doc.nodeAt(t),s=[],a=t+1;for(let l=0;l<o.childCount;l++){let t=o.child(l),c=a+t.nodeSize,u=i.matchType(t.type);if(u){i=u;for(let r=0;r<t.marks.length;r++)n.allowsMarkType(t.marks[r].type)||e.step(new w(a,c,t.marks[r]))}else s.push(new E(a,c,r.p2.empty));a=c}if(!i.validEnd){let t=i.fillBefore(r.HY.empty,!0);e.replace(a,a,new r.p2(t,0,0))}for(let r=s.length-1;r>=0;r--)e.step(s[r])}function O(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function R(e){let t=e.parent,n=t.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth;;--r){let t=e.$from.node(r),i=e.$from.index(r),o=e.$to.indexAfter(r);if(r<e.depth&&t.canReplace(i,o,n))return r;if(0==r||t.type.spec.isolating||!O(t,i,o))break}return null}function P(e,t,n){let{$from:i,$to:o,depth:s}=t,a=i.before(s+1),l=o.after(s+1),c=a,u=l,d=r.HY.empty,h=0;for(let m=s,g=!1;m>n;m--)g||i.index(m)>0?(g=!0,d=r.HY.from(i.node(m).copy(d)),h++):c--;let f=r.HY.empty,p=0;for(let m=s,g=!1;m>n;m--)g||o.after(m+1)<o.end(m)?(g=!0,f=r.HY.from(o.node(m).copy(f)),p++):u++;e.step(new M(c,u,a,l,new r.p2(d.append(f),h,p),d.size-h,!0))}function L(e,t,n=null,r=e){let i=I(e,t),o=i&&N(r,t);return o?i.map(D).concat({type:t,attrs:n}).concat(o.map(D)):null}function D(e){return{type:e,attrs:null}}function I(e,t){let{parent:n,startIndex:r,endIndex:i}=e,o=n.contentMatchAt(r).findWrapping(t);if(!o)return null;let s=o.length?o[0]:t;return n.canReplaceWith(r,i,s)?o:null}function N(e,t){let{parent:n,startIndex:r,endIndex:i}=e,o=n.child(r),s=t.contentMatch.findWrapping(o.type);if(!s)return null;let a=s.length?s[s.length-1]:t,l=a.contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(n.child(c).type);return l&&l.validEnd?s:null}function U(e,t,n){let i=r.HY.empty;for(let a=n.length-1;a>=0;a--){if(i.size){let e=n[a].type.contentMatch.matchFragment(i);if(!e||!e.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=r.HY.from(n[a].type.create(n[a].attrs,i))}let o=t.start,s=t.end;e.step(new M(o,s,o,s,new r.p2(i,0,0),n.length,!0))}function F(e,t,n,i,o){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=e.steps.length;e.doc.nodesBetween(t,n,((t,n)=>{if(t.isTextblock&&!t.hasMarkup(i,o)&&B(e.doc,e.mapping.slice(s).map(n),i)){e.clearIncompatible(e.mapping.slice(s).map(n,1),i);let a=e.mapping.slice(s),l=a.map(n,1),c=a.map(n+t.nodeSize,1);return e.step(new M(l,c,l+1,c-1,new r.p2(r.HY.from(i.create(o,null,t.marks)),0,0),1,!0)),!1}}))}function B(e,t,n){let r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function V(e,t,n,i,o){let s=e.doc.nodeAt(t);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let a=n.create(i,null,o||s.marks);if(s.isLeaf)return e.replaceWith(t,t+s.nodeSize,a);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new M(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new r.p2(r.HY.from(a),0,0),1,!0))}function z(e,t,n=1,r){let i=e.resolve(t),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>o;c--,u--){let e=i.node(c),t=i.index(c);if(e.type.spec.isolating)return!1;let n=e.content.cutByIndex(t,e.childCount),o=r&&r[u+1];o&&(n=n.replaceChild(0,o.type.create(o.attrs)));let s=r&&r[u]||e;if(!e.canReplace(t+1,e.childCount)||!s.type.validContent(n))return!1}let a=i.indexAfter(o),l=r&&r[0];return i.node(o).canReplaceWith(a,a,l?l.type:i.node(o+1).type)}function j(e,t,n=1,i){let o=e.doc.resolve(t),s=r.HY.empty,a=r.HY.empty;for(let l=o.depth,c=o.depth-n,u=n-1;l>c;l--,u--){s=r.HY.from(o.node(l).copy(s));let e=i&&i[u];a=r.HY.from(e?e.type.create(e.attrs,a):o.node(l).copy(a))}e.step(new E(t,t,new r.p2(s.append(a),n,n),!0))}function H(e,t){let n=e.resolve(t),r=n.index();return W(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function W(e,t){return!(!e||!t||e.isLeaf||!e.canAppend(t))}function G(e,t,n=-1){let r=e.resolve(t);for(let i=r.depth;;i--){let e,o,s=r.index(i);if(i==r.depth?(e=r.nodeBefore,o=r.nodeAfter):n>0?(e=r.node(i+1),s++,o=r.node(i).maybeChild(s)):(e=r.node(i).maybeChild(s-1),o=r.node(i+1)),e&&!e.isTextblock&&W(e,o)&&r.node(i).canReplace(s,s+1))return t;if(0==i)break;t=n<0?r.before(i):r.after(i)}}function $(e,t,n){let i=new E(t-n,t+n,r.p2.empty,!0);e.step(i)}function q(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(let i=r.depth-1;i>=0;i--){let e=r.index(i);if(r.node(i).canReplaceWith(e,e,n))return r.before(i+1);if(e>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let e=r.indexAfter(i);if(r.node(i).canReplaceWith(e,e,n))return r.after(i+1);if(e<r.node(i).childCount)return null}return null}function Y(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(0==n.openStart&&n.size?2:1);o++)for(let e=r.depth;e>=0;e--){let t=e==r.depth?0:r.pos<=(r.start(e+1)+r.end(e+1))/2?-1:1,n=r.index(e)+(t>0?1:0),s=r.node(e),a=!1;if(1==o)a=s.canReplace(n,n,i);else{let e=s.contentMatchAt(n).findWrapping(i.firstChild.type);a=e&&s.canReplaceWith(n,n,e[0])}if(a)return 0==t?r.pos:t<0?r.before(e+1):r.after(e+1)}return null}function X(e,t,n=t,i=r.p2.empty){if(t==n&&!i.size)return null;let o=e.resolve(t),s=e.resolve(n);return Z(o,s,i)?new E(t,n,i):new K(o,s,i).fit()}function Z(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}v.jsonID("replaceAround",M);class K{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=r.HY.empty;for(let r=0;r<=e.depth;r++){let t=e.node(r);this.frontier.push({type:t.type,match:t.contentMatchAt(e.indexAfter(r))})}for(let i=e.depth;i>0;i--)this.placed=r.HY.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){while(this.unplaced.size){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(e<0?this.$to:n.doc.resolve(e));if(!i)return null;let o=this.placed,s=n.depth,a=i.depth;while(s&&a&&1==o.childCount)o=o.firstChild.content,s--,a--;let l=new r.p2(o,s,a);return e>-1?new M(n.pos,e,this.$to.pos,this.$to.end(),l,t):l.size||n.pos!=this.$to.pos?new E(n.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<e;n++){let i=t.firstChild;if(t.childCount>1&&(r=0),i.type.spec.isolating&&r<=n){e=n;break}t=i.content}for(let t=1;t<=2;t++)for(let n=1==t?e:this.unplaced.openStart;n>=0;n--){let e,i=null;n?(i=ee(this.unplaced.content,n-1).firstChild,e=i.content):e=this.unplaced.content;let o=e.firstChild;for(let s=this.depth;s>=0;s--){let e,{type:a,match:l}=this.frontier[s],c=null;if(1==t&&(o?l.matchType(o.type)||(c=l.fillBefore(r.HY.from(o),!1)):i&&a.compatibleContent(i.type)))return{sliceDepth:n,frontierDepth:s,parent:i,inject:c};if(2==t&&o&&(e=l.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:s,parent:i,wrap:e};if(i&&l.matchType(i.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,i=ee(e,t);return!(!i.childCount||i.firstChild.isLeaf)&&(this.unplaced=new r.p2(e,t+1,Math.max(n,i.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,i=ee(e,t);if(i.childCount<=1&&t>0){let o=e.size-t<=t+i.size;this.unplaced=new r.p2(J(e,t-1,1),t-1,o?t-1:n)}else this.unplaced=new r.p2(J(e,t,1),t,n)}placeNodes({sliceDepth:e,frontierDepth:t,parent:n,inject:i,wrap:o}){while(this.depth>t)this.closeFrontierNode();if(o)for(let r=0;r<o.length;r++)this.openFrontierNode(o[r]);let s=this.unplaced,a=n?n.content:s.content,l=s.openStart-e,c=0,u=[],{match:d,type:h}=this.frontier[t];if(i){for(let e=0;e<i.childCount;e++)u.push(i.child(e));d=d.matchFragment(i)}let f=a.size+e-(s.content.size-s.openEnd);while(c<a.childCount){let e=a.child(c),t=d.matchType(e.type);if(!t)break;c++,(c>1||0==l||e.content.size)&&(d=t,u.push(te(e.mark(h.allowedMarks(e.marks)),1==c?l:0,c==a.childCount?f:-1)))}let p=c==a.childCount;p||(f=-1),this.placed=Q(this.placed,t,r.HY.from(u)),this.frontier[t].match=d,p&&f<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let r=0,m=a;r<f;r++){let e=m.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),m=e.content}this.unplaced=p?0==e?r.p2.empty:new r.p2(J(s.content,e-1,1),e-1,f<0?s.openEnd:e-1):new r.p2(J(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e,t=this.frontier[this.depth];if(!t.type.isTextblock||!ne(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:n}=this.$to,r=this.$to.after(n);while(n>1&&r==this.$to.end(--n))++r;return r}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:r}=this.frontier[t],i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=ne(e,t,r,n,i);if(o){for(let n=t-1;n>=0;n--){let{match:t,type:r}=this.frontier[n],i=ne(e,n,r,t,!0);if(!i||i.childCount)continue e}return{depth:t,fit:o,move:i?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;while(this.depth>t.depth)this.closeFrontierNode();t.fit.childCount&&(this.placed=Q(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let t=e.node(n),r=t.type.contentMatch.fillBefore(t.content,!0,e.index(n));this.openFrontierNode(t.type,t.attrs,r)}return e}openFrontierNode(e,t=null,n){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Q(this.placed,this.depth,r.HY.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop(),t=e.match.fillBefore(r.HY.empty,!0);t.childCount&&(this.placed=Q(this.placed,this.frontier.length,t))}}function J(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(J(e.firstChild.content,t-1,n)))}function Q(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(Q(e.lastChild.content,t-1,n)))}function ee(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function te(e,t,n){if(t<=0)return e;let i=e.content;return t>1&&(i=i.replaceChild(0,te(i.firstChild,t-1,1==i.childCount?n-1:0))),t>0&&(i=e.type.contentMatch.fillBefore(i).append(i),n<=0&&(i=i.append(e.type.contentMatch.matchFragment(i).fillBefore(r.HY.empty,!0)))),e.copy(i)}function ne(e,t,n,r,i){let o=e.node(t),s=i?e.indexAfter(t):e.index(t);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,s);return a&&!re(n,o.content,s)?a:null}function re(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function ie(e){return e.spec.defining||e.spec.definingForContent}function oe(e,t,n,i){if(!i.size)return e.deleteRange(t,n);let o=e.doc.resolve(t),s=e.doc.resolve(n);if(Z(o,s,i))return e.step(new E(t,n,i));let a=ce(o,e.doc.resolve(n));0==a[a.length-1]&&a.pop();let l=-(o.depth+1);a.unshift(l);for(let r=o.depth,f=o.pos-1;r>0;r--,f--){let e=o.node(r).type.spec;if(e.defining||e.definingAsContext||e.isolating)break;a.indexOf(r)>-1?l=r:o.before(r)==f&&a.splice(1,0,-r)}let c=a.indexOf(l),u=[],d=i.openStart;for(let r=i.content,f=0;;f++){let e=r.firstChild;if(u.push(e),f==i.openStart)break;r=e.content}for(let r=d-1;r>=0;r--){let e=u[r].type,t=ie(e);if(t&&o.node(c).type!=e)d=r;else if(t||!e.isTextblock)break}for(let f=i.openStart;f>=0;f--){let t=(f+d+1)%(i.openStart+1),l=u[t];if(l)for(let u=0;u<a.length;u++){let d=a[(u+c)%a.length],h=!0;d<0&&(h=!1,d=-d);let f=o.node(d-1),p=o.index(d-1);if(f.canReplaceWith(p,p,l.type,l.marks))return e.replace(o.before(d),h?s.after(d):n,new r.p2(se(i.content,0,i.openStart,t),t,i.openEnd))}}let h=e.steps.length;for(let r=a.length-1;r>=0;r--){if(e.replace(t,n,i),e.steps.length>h)break;let l=a[r];l<0||(t=o.before(l),n=s.after(l))}}function se(e,t,n,i,o){if(t<n){let r=e.firstChild;e=e.replaceChild(0,r.copy(se(r.content,t+1,n,i,r)))}if(t>i){let t=o.contentMatchAt(0),n=t.fillBefore(e).append(e);e=n.append(t.matchFragment(n).fillBefore(r.HY.empty,!0))}return e}function ae(e,t,n,i){if(!i.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let r=q(e.doc,t,i.type);null!=r&&(t=n=r)}e.replaceRange(t,n,new r.p2(r.HY.from(i),0,0))}function le(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),o=ce(r,i);for(let s=0;s<o.length;s++){let t=o[s],n=s==o.length-1;if(n&&0==t||r.node(t).type.contentMatch.validEnd)return e.delete(r.start(t),i.end(t));if(t>0&&(n||r.node(t-1).canReplace(r.index(t-1),i.indexAfter(t-1))))return e.delete(r.before(t),i.after(t))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(t-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s)return e.delete(r.before(s),n);e.delete(t,n)}function ce(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let i=r;i>=0;i--){let r=e.start(i);if(r<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(r==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==r-1)&&n.push(i)}return n}class ue extends v{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return y.fail("No node at attribute step's position");let n=Object.create(null);for(let r in t.attrs)n[r]=t.attrs[r];n[this.attr]=this.value;let i=t.type.create(n,null,t.marks);return y.fromReplace(e,this.pos,this.pos+1,new r.p2(r.HY.from(i),0,t.isLeaf?0:1))}getMap(){return p.empty}invert(e){return new ue(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ue(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new ue(t.pos,t.attr,t.value)}}v.jsonID("attr",ue);let de=class extends Error{};de=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n},de.prototype=Object.create(Error.prototype),de.prototype.constructor=de,de.prototype.name="TransformError";class he{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new m}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new de(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,n=r.p2.empty){let i=X(this.doc,e,t,n);return i&&this.step(i),this}replaceWith(e,t,n){return this.replace(e,t,new r.p2(r.HY.from(n),0,0))}delete(e,t){return this.replace(e,t,r.p2.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return oe(this,e,t,n),this}replaceRangeWith(e,t,n){return ae(this,e,t,n),this}deleteRange(e,t){return le(this,e,t),this}lift(e,t){return P(this,e,t),this}join(e,t=1){return $(this,e,t),this}wrap(e,t){return U(this,e,t),this}setBlockType(e,t=e,n,r=null){return F(this,e,t,n,r),this}setNodeMarkup(e,t,n=null,r){return V(this,e,t,n,r),this}setNodeAttribute(e,t,n){return this.step(new ue(e,t,n)),this}addNodeMark(e,t){return this.step(new x(e,t)),this}removeNodeMark(e,t){if(!(t instanceof r.vc)){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(t=t.isInSet(n.marks),!t)return this}return this.step(new S(e,t)),this}split(e,t=1,n){return j(this,e,t,n),this}addMark(e,t,n){return C(this,e,t,n),this}removeMark(e,t,n){return A(this,e,t,n),this}clearIncompatible(e,t,n){return k(this,e,t,n),this}}},1617:function(e,t,n){"use strict";n.d(t,{EH:function(){return Rn},p:function(){return An},tk:function(){return ar}});n(7658),n(1703);var r=n(1418),i=n(8443),o=n(4040);const s=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},a=function(e){let t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t};let l=null;const c=function(e,t,n){let r=l||(l=document.createRange());return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},u=function(e,t,n,r){return n&&(h(e,t,n,r,-1)||h(e,t,n,r,1))},d=/^(img|br|input|textarea|hr)$/i;function h(e,t,n,r,i){for(;;){if(e==n&&t==r)return!0;if(t==(i<0?0:f(e))){let n=e.parentNode;if(!n||1!=n.nodeType||m(e)||d.test(e.nodeName)||"false"==e.contentEditable)return!1;t=s(e)+(i<0?0:1),e=n}else{if(1!=e.nodeType)return!1;if(e=e.childNodes[t+(i<0?-1:0)],"false"==e.contentEditable)return!1;t=i<0?f(e):0}}}function f(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function p(e,t,n){for(let r=0==t,i=t==f(e);r||i;){if(e==n)return!0;let t=s(e);if(e=e.parentNode,!e)return!1;r=r&&0==t,i=i&&t==f(e)}}function m(e){let t;for(let n=e;n;n=n.parentNode)if(t=n.pmViewDesc)break;return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const g=function(e){return e.focusNode&&u(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function v(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function y(e){let t=e.activeElement;while(t&&t.shadowRoot)t=t.shadowRoot.activeElement;return t}function b(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:r.offset}}catch(r){}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:r.startOffset}}}const _="undefined"!=typeof navigator?navigator:null,w="undefined"!=typeof document?document:null,x=_&&_.userAgent||"",S=/Edge\/(\d+)/.exec(x),E=/MSIE \d/.exec(x),M=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(x),T=!!(E||M||S),C=E?document.documentMode:M?+M[1]:S?+S[1]:0,A=!T&&/gecko\/(\d+)/i.test(x);A&&(/Firefox\/(\d+)/.exec(x)||[0,0])[1];const k=!T&&/Chrome\/(\d+)/.exec(x),O=!!k,R=k?+k[1]:0,P=!T&&!!_&&/Apple Computer/.test(_.vendor),L=P&&(/Mobile\/\w+/.test(x)||!!_&&_.maxTouchPoints>2),D=L||!!_&&/Mac/.test(_.platform),I=!!_&&/Win/.test(_.platform),N=/Android \d/.test(x),U=!!w&&"webkitFontSmoothing"in w.documentElement.style,F=U?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function B(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function V(e,t){return"number"==typeof e?e:e[t]}function z(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function j(e,t,n){let r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,o=e.dom.ownerDocument;for(let s=n||e.dom;;s=a(s)){if(!s)break;if(1!=s.nodeType)continue;let e=s,n=e==o.body,a=n?B(o):z(e),l=0,c=0;if(t.top<a.top+V(r,"top")?c=-(a.top-t.top+V(i,"top")):t.bottom>a.bottom-V(r,"bottom")&&(c=t.bottom-a.bottom+V(i,"bottom")),t.left<a.left+V(r,"left")?l=-(a.left-t.left+V(i,"left")):t.right>a.right-V(r,"right")&&(l=t.right-a.right+V(i,"right")),l||c)if(n)o.defaultView.scrollBy(l,c);else{let n=e.scrollLeft,r=e.scrollTop;c&&(e.scrollTop+=c),l&&(e.scrollLeft+=l);let i=e.scrollLeft-n,o=e.scrollTop-r;t={left:t.left-i,top:t.top-o,right:t.right-i,bottom:t.bottom-o}}if(n)break}}function H(e){let t,n,r=e.dom.getBoundingClientRect(),i=Math.max(0,r.top);for(let o=(r.left+r.right)/2,s=i+1;s<Math.min(innerHeight,r.bottom);s+=5){let r=e.root.elementFromPoint(o,s);if(!r||r==e.dom||!e.dom.contains(r))continue;let a=r.getBoundingClientRect();if(a.top>=i-20){t=r,n=a.top;break}}return{refDOM:t,refTop:n,stack:W(e.dom)}}function W(e){let t=[],n=e.ownerDocument;for(let r=e;r;r=a(r))if(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e==n)break;return t}function G({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;$(n,0==r?0:r-t)}function $(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:i,left:o}=e[n];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=o&&(r.scrollLeft=o)}}let q=null;function Y(e){if(e.setActive)return e.setActive();if(q)return e.focus(q);let t=W(e);e.focus(null==q?{get preventScroll(){return q={preventScroll:!0},!0}}:void 0),q||(q=!1,$(t,0))}function X(e,t){let n,r,i,o,s=2e8,a=0,l=t.top,u=t.top;for(let d=e.firstChild,h=0;d;d=d.nextSibling,h++){let e;if(1==d.nodeType)e=d.getClientRects();else{if(3!=d.nodeType)continue;e=c(d).getClientRects()}for(let c=0;c<e.length;c++){let f=e[c];if(f.top<=l&&f.bottom>=u){l=Math.max(f.bottom,l),u=Math.min(f.top,u);let e=f.left>t.left?f.left-t.left:f.right<t.left?t.left-f.right:0;if(e<s){n=d,s=e,r=e&&3==n.nodeType?{left:f.right<t.left?f.right:f.left,top:t.top}:t,1==d.nodeType&&e&&(a=h+(t.left>=(f.left+f.right)/2?1:0));continue}}else f.top>t.top&&!i&&f.left<=t.left&&f.right>=t.left&&(i=d,o={left:Math.max(f.left,Math.min(f.right,t.left)),top:f.top});!n&&(t.left>=f.right&&t.top>=f.top||t.left>=f.left&&t.top>=f.bottom)&&(a=h+1)}}return!n&&i&&(n=i,r=o,s=0),n&&3==n.nodeType?Z(n,r):!n||s&&1==n.nodeType?{node:e,offset:a}:X(n,r)}function Z(e,t){let n=e.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);let n=ie(r,1);if(n.top!=n.bottom&&K(t,n))return{node:e,offset:i+(t.left>=(n.left+n.right)/2?1:0)}}return{node:e,offset:0}}function K(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function J(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function Q(e,t,n){let{node:r,offset:i}=X(t,n),o=-1;if(1==r.nodeType&&!r.firstChild){let e=r.getBoundingClientRect();o=e.left!=e.right&&n.left>(e.left+e.right)/2?1:-1}return e.docView.posFromDOM(r,i,o)}function ee(e,t,n,r){let i=-1;for(let o=t,s=!1;;){if(o==e.dom)break;let t=e.docView.nearestDesc(o,!0);if(!t)return null;if(1==t.dom.nodeType&&(t.node.isBlock&&t.parent&&!s||!t.contentDOM)){let e=t.dom.getBoundingClientRect();if(t.node.isBlock&&t.parent&&!s&&(s=!0,e.left>r.left||e.top>r.top?i=t.posBefore:(e.right<r.left||e.bottom<r.top)&&(i=t.posAfter)),!t.contentDOM&&i<0){let n=t.node.isBlock?r.top<(e.top+e.bottom)/2:r.left<(e.left+e.right)/2;return n?t.posBefore:t.posAfter}}o=t.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,-1)}function te(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let n=e.childNodes[o];if(1==n.nodeType){let e=n.getClientRects();for(let r=0;r<e.length;r++){let i=e[r];if(K(t,i))return te(n,t,i)}}if((o=(o+1)%r)==i)break}return e}function ne(e,t){let n,r=e.dom.ownerDocument,i=0,o=b(r,t.left,t.top);o&&({node:n,offset:i}=o);let s,l=(e.root.elementFromPoint?e.root:r).elementFromPoint(t.left,t.top);if(!l||!e.dom.contains(1!=l.nodeType?l.parentNode:l)){let n=e.dom.getBoundingClientRect();if(!K(t,n))return null;if(l=te(e.dom,t,n),!l)return null}if(P)for(let u=l;n&&u;u=a(u))u.draggable&&(n=void 0);if(l=J(l,t),n){if(A&&1==n.nodeType&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){let e,r=n.childNodes[i];"IMG"==r.nodeName&&(e=r.getBoundingClientRect()).right<=t.left&&e.bottom>t.top&&i++}n==e.dom&&i==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?s=e.state.doc.content.size:0!=i&&1==n.nodeType&&"BR"==n.childNodes[i-1].nodeName||(s=ee(e,n,i,t))}null==s&&(s=Q(e,l,t));let c=e.docView.nearestDesc(l,!0);return{pos:s,inside:c?c.posAtStart-c.border:-1}}function re(e){return e.top<e.bottom||e.left<e.right}function ie(e,t){let n=e.getClientRects();if(n.length){let e=n[t<0?0:n.length-1];if(re(e))return e}return Array.prototype.find.call(n,re)||e.getBoundingClientRect()}const oe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function se(e,t,n){let{node:r,offset:i,atom:o}=e.docView.domFromPos(t,n<0?-1:1),s=U||A;if(3==r.nodeType){if(!s||!oe.test(r.nodeValue)&&(n<0?i:i!=r.nodeValue.length)){let e=i,t=i,o=n<0?1:-1;return n<0&&!i?(t++,o=-1):n>=0&&i==r.nodeValue.length?(e--,o=1):n<0?e--:t++,ae(ie(c(r,e,t),o),o<0)}{let e=ie(c(r,i,i),n);if(A&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let t=ie(c(r,i-1,i-1),-1);if(t.top==e.top){let n=ie(c(r,i,i+1),-1);if(n.top!=e.top)return ae(n,n.left<t.left)}}return e}}let a=e.state.doc.resolve(t-(o||0));if(!a.parent.inlineContent){if(null==o&&i&&(n<0||i==f(r))){let e=r.childNodes[i-1];if(1==e.nodeType)return le(e.getBoundingClientRect(),!1)}if(null==o&&i<f(r)){let e=r.childNodes[i];if(1==e.nodeType)return le(e.getBoundingClientRect(),!0)}return le(r.getBoundingClientRect(),n>=0)}if(null==o&&i&&(n<0||i==f(r))){let e=r.childNodes[i-1],t=3==e.nodeType?c(e,f(e)-(s?0:1)):1!=e.nodeType||"BR"==e.nodeName&&e.nextSibling?null:e;if(t)return ae(ie(t,1),!1)}if(null==o&&i<f(r)){let e=r.childNodes[i];while(e.pmViewDesc&&e.pmViewDesc.ignoreForCoords)e=e.nextSibling;let t=e?3==e.nodeType?c(e,0,s?0:1):1==e.nodeType?e:null:null;if(t)return ae(ie(t,-1),!0)}return ae(ie(3==r.nodeType?c(r):r,-n),n>=0)}function ae(e,t){if(0==e.width)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function le(e,t){if(0==e.height)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function ce(e,t,n){let r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}function ue(e,t,n){let r=t.selection,i="up"==n?r.$from:r.$to;return ce(e,t,(()=>{let{node:t}=e.docView.domFromPos(i.pos,"up"==n?-1:1);for(;;){let n=e.docView.nearestDesc(t,!0);if(!n)break;if(n.node.isBlock){t=n.contentDOM||n.dom;break}t=n.dom.parentNode}let r=se(e,i.pos,1);for(let e=t.firstChild;e;e=e.nextSibling){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=c(e,0,e.nodeValue.length).getClientRects()}for(let e=0;e<t.length;e++){let i=t[e];if(i.bottom>i.top+1&&("up"==n?r.top-i.top>2*(i.bottom-r.top):i.bottom-r.bottom>2*(r.bottom-i.top)))return!1}}return!0}))}const de=/[\u0590-\u08ac]/;function he(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,a=e.domSelection();return de.test(r.parent.textContent)&&a.modify?ce(e,t,(()=>{let{focusNode:t,focusOffset:i,anchorNode:o,anchorOffset:s}=e.domSelectionRange(),l=a.caretBidiLevel;a.modify("move",n,"character");let c=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:u,focusOffset:d}=e.domSelectionRange(),h=u&&!c.contains(1==u.nodeType?u:u.parentNode)||t==u&&i==d;try{a.collapse(o,s),t&&(t!=o||i!=s)&&a.extend&&a.extend(t,i)}catch(f){}return null!=l&&(a.caretBidiLevel=l),h})):"left"==n||"backward"==n?o:s}let fe=null,pe=null,me=!1;function ge(e,t,n){return fe==t&&pe==n?me:(fe=t,pe=n,me="up"==n||"down"==n?ue(e,t,n):he(e,t,n))}const ve=0,ye=1,be=2,_e=3;class we{constructor(e,t,n,r){this.parent=e,this.children=t,this.dom=n,this.contentDOM=r,this.dirty=ve,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){let r=this.children[t];if(r==e)return n;n+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){let n,r;if(e==this.contentDOM)n=e.childNodes[t-1];else{while(e.parentNode!=this.contentDOM)e=e.parentNode;n=e.previousSibling}while(n&&(!(r=n.pmViewDesc)||r.parent!=this))n=n.previousSibling;return n?this.posBeforeChild(r)+r.size:this.posAtStart}{let n,r;if(e==this.contentDOM)n=e.childNodes[t];else{while(e.parentNode!=this.contentDOM)e=e.parentNode;n=e.nextSibling}while(n&&(!(r=n.pmViewDesc)||r.parent!=this))n=n.nextSibling;return n?this.posBeforeChild(r):this.posAtEnd}}let r;if(e==this.dom&&this.contentDOM)r=t>s(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!1;break}if(t.previousSibling)break}if(null==r&&t==e.childNodes.length)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!0;break}if(t.nextSibling)break}}return(null==r?n>0:r)?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let n=!0,r=e;r;r=r.parentNode){let i,o=this.getDesc(r);if(o&&(!t||o.node)){if(!n||!(i=o.nodeDOM)||(1==i.nodeType?i.contains(1==e.nodeType?e:e.parentNode):i==e))return o;n=!1}}}getDesc(e){let t=e.pmViewDesc;for(let n=t;n;n=n.parent)if(n==this)return t}posFromDOM(e,t,n){for(let r=e;r;r=r.parentNode){let i=this.getDesc(r);if(i)return i.localPosFromDOM(e,t,n)}return-1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let r=this.children[t],i=n+r.size;if(n==e&&i!=n){while(!r.border&&r.children.length)r=r.children[0];return r}if(e<i)return r.descAt(e-n-r.border);n=i}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,r=0;for(let i=0;n<this.children.length;n++){let t=this.children[n],o=i+t.size;if(o>e||t instanceof Ae){r=e-i;break}i=o}if(r)return this.children[n].domFromPos(r-this.children[n].border,t);for(let i;n&&!(i=this.children[n-1]).size&&i instanceof xe&&i.side>=0;n--);if(t<=0){let e,r=!0;for(;;n--,r=!1)if(e=n?this.children[n-1]:null,!e||e.dom.parentNode==this.contentDOM)break;return e&&t&&r&&!e.border&&!e.domAtom?e.domFromPos(e.size,t):{node:this.contentDOM,offset:e?s(e.dom)+1:0}}{let e,r=!0;for(;;n++,r=!1)if(e=n<this.children.length?this.children[n]:null,!e||e.dom.parentNode==this.contentDOM)break;return e&&r&&!e.border&&!e.domAtom?e.domFromPos(0,t):{node:this.contentDOM,offset:e?s(e.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,n=0){if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,i=-1;for(let o=n,a=0;;a++){let n=this.children[a],l=o+n.size;if(-1==r&&e<=l){let i=o+n.border;if(e>=i&&t<=l-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(e,t,i);e=o;for(let t=a;t>0;t--){let n=this.children[t-1];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(1)){r=s(n.dom)+1;break}e-=n.size}-1==r&&(r=0)}if(r>-1&&(l>t||a==this.children.length-1)){t=l;for(let e=a+1;e<this.children.length;e++){let n=this.children[e];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(-1)){i=s(n.dom);break}t+=n.size}-1==i&&(i=this.contentDOM.childNodes.length);break}o=l}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:n}=this.domFromPos(e,0);if(1!=t.nodeType||n==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n,r=!1){let i=Math.min(e,t),o=Math.max(e,t);for(let u=0,f=0;u<this.children.length;u++){let s=this.children[u],a=f+s.size;if(i>f&&o<a)return s.setSelection(e-f-s.border,t-f-s.border,n,r);f=a}let s=this.domFromPos(e,e?-1:1),a=t==e?s:this.domFromPos(t,t?-1:1),l=n.getSelection(),c=!1;if((A||P)&&e==t){let{node:e,offset:t}=s;if(3==e.nodeType)c=!(!t||"\n"!=e.nodeValue[t-1]);else{let n=e.childNodes[t-1];c=n&&("BR"==n.nodeName||"false"==n.contentEditable)}}if(A&&l.focusNode&&l.focusNode!=a.node&&1==l.focusNode.nodeType){let e=l.focusNode.childNodes[l.focusOffset];e&&"false"==e.contentEditable&&(r=!0)}if(!(r||c&&P)&&u(s.node,s.offset,l.anchorNode,l.anchorOffset)&&u(a.node,a.offset,l.focusNode,l.focusOffset))return;let d=!1;if((l.extend||e==t)&&!c){l.collapse(s.node,s.offset);try{e!=t&&l.extend(a.node,a.offset),d=!0}catch(h){}}if(!d){if(e>t){let e=s;s=a,a=e}let n=document.createRange();n.setEnd(a.node,a.offset),n.setStart(s.node,s.offset),l.removeAllRanges(),l.addRange(n)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,r=0;r<this.children.length;r++){let i=this.children[r],o=n+i.size;if(n==o?e<=o&&t>=n:e<o&&t>n){let r=n+i.border,s=o-i.border;if(e>=r&&t<=s)return this.dirty=e==n||t==o?be:ye,void(e!=r||t!=s||!i.contentLost&&i.dom.parentNode==this.contentDOM?i.markDirty(e-r,t-r):i.dirty=_e);i.dirty=i.dom!=i.contentDOM||i.dom.parentNode!=this.contentDOM||i.children.length?_e:be}n=o}this.dirty=be}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let n=1==e?be:ye;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class xe extends we{constructor(e,t,n,r){let i,o=t.type.toDOM;if("function"==typeof o&&(o=o(n,(()=>i?i.parent?i.parent.posBeforeChild(i):void 0:r))),!t.type.spec.raw){if(1!=o.nodeType){let e=document.createElement("span");e.appendChild(o),o=e}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=t,this.widget=t,i=this}matchesWidget(e){return this.dirty==ve&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return!!t&&t(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class Se extends we{constructor(e,t,n,r){super(e,[],t,null),this.textDOM=n,this.text=r}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}class Ee extends we{constructor(e,t,n,r){super(e,[],n,r),this.mark=t}static create(e,t,n,r){let o=r.nodeViews[t.type.name],s=o&&o(t,r,n);return s&&s.dom||(s=i.PW.renderSpec(document,t.type.spec.toDOM(t,n))),new Ee(e,t,s.dom,s.contentDOM||s.dom)}parseRule(){return this.dirty&_e||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(e){return this.dirty!=_e&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=ve){let e=this.parent;while(!e.node)e=e.parent;e.dirty<this.dirty&&(e.dirty=this.dirty),this.dirty=ve}}slice(e,t,n){let r=Ee.create(this.parent,this.mark,!0,n),i=this.children,o=this.size;t<o&&(i=$e(i,t,o,n)),e>0&&(i=$e(i,0,e,n));for(let s=0;s<i.length;s++)i[s].parent=r;return r.children=i,r}}class Me extends we{constructor(e,t,n,r,i,o,s,a,l){super(e,[],i,o),this.node=t,this.outerDeco=n,this.innerDeco=r,this.nodeDOM=s}static create(e,t,n,r,o,s){let a,l=o.nodeViews[t.type.name],c=l&&l(t,o,(()=>a?a.parent?a.parent.posBeforeChild(a):void 0:s),n,r),u=c&&c.dom,d=c&&c.contentDOM;if(t.isText)if(u){if(3!=u.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else u=document.createTextNode(t.text);else u||({dom:u,contentDOM:d}=i.PW.renderSpec(document,t.type.spec.toDOM(t)));d||t.isText||"BR"==u.nodeName||(u.hasAttribute("contenteditable")||(u.contentEditable="false"),t.type.spec.draggable&&(u.draggable=!0));let h=u;return u=Ne(u,n,t),c?a=new ke(e,t,n,r,u,d||null,h,c,o,s+1):t.isText?new Ce(e,t,n,r,u,h,o):new Me(e,t,n,r,u,d||null,h,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let t=this.children.length-1;t>=0;t--){let n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>i.HY.empty)}else e.contentElement=this.contentDOM;else e.getContent=()=>this.node.content;return e}matchesNode(e,t,n){return this.dirty==ve&&e.eq(this.node)&&Ue(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let n=this.node.inlineContent,r=t,o=e.composing?this.localCompositionInfo(e,t):null,s=o&&o.pos>-1?o:null,a=o&&o.pos<0,l=new Be(this,s&&s.node,e);je(this.node,this.innerDeco,((t,o,s)=>{t.spec.marks?l.syncToMarks(t.spec.marks,n,e):t.type.side>=0&&!s&&l.syncToMarks(o==this.node.childCount?i.vc.none:this.node.child(o).marks,n,e),l.placeWidget(t,e,r)}),((t,i,s,c)=>{let u;l.syncToMarks(t.marks,n,e),l.findNodeMatch(t,i,s,c)||a&&e.state.selection.from>r&&e.state.selection.to<r+t.nodeSize&&(u=l.findIndexWithChild(o.node))>-1&&l.updateNodeAt(t,i,s,u,e)||l.updateNextNode(t,i,s,e,c,r)||l.addNode(t,i,s,e,r),r+=t.nodeSize})),l.syncToMarks([],n,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==be)&&(s&&this.protectLocalComposition(e,s),Oe(this.contentDOM,this.children,e),L&&He(this.dom))}localCompositionInfo(e,t){let{from:n,to:i}=e.state.selection;if(!(e.state.selection instanceof r.Bs)||n<t||i>t+this.node.content.size)return null;let o=e.domSelectionRange(),s=We(o.focusNode,o.focusOffset);if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let e=s.nodeValue,r=Ge(this.node.content,e,n-t,i-t);return r<0?null:{node:s,pos:r,text:e}}return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:n,text:r}){if(this.getDesc(t))return;let i=t;for(;;i=i.parentNode){if(i.parentNode==this.contentDOM)break;while(i.previousSibling)i.parentNode.removeChild(i.previousSibling);while(i.nextSibling)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let o=new Se(this,i,t,r);e.input.compositionNodes.push(o),this.children=$e(this.children,n,n+r.length,e,o)}update(e,t,n,r){return!(this.dirty==_e||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,r),!0)}updateInner(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=ve}updateOuterDeco(e){if(Ue(e,this.outerDeco))return;let t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=De(this.dom,this.nodeDOM,Le(this.outerDeco,this.node,t),Le(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function Te(e,t,n,r,i){Ne(r,t,e);let o=new Me(void 0,e,t,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class Ce extends Me{constructor(e,t,n,r,i,o,s){super(e,t,n,r,i,null,o,s,0)}parseRule(){let e=this.nodeDOM.parentNode;while(e&&e!=this.dom&&!e.pmIsDeco)e=e.parentNode;return{skip:e||!0}}update(e,t,n,r){return!(this.dirty==_e||this.dirty!=ve&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),this.dirty==ve&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=ve,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,t,n){let r=this.node.cut(e,t),i=document.createTextNode(r.text);return new Ce(this.parent,r,this.outerDeco,this.innerDeco,i,i,n)}markDirty(e,t){super.markDirty(e,t),this.dom==this.nodeDOM||0!=e&&t!=this.nodeDOM.nodeValue.length||(this.dirty=_e)}get domAtom(){return!1}}class Ae extends we{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==ve&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class ke extends Me{constructor(e,t,n,r,i,o,s,a,l,c){super(e,t,n,r,i,o,s,l,c),this.spec=a}update(e,t,n,r){if(this.dirty==_e)return!1;if(this.spec.update){let i=this.spec.update(e,t,n);return i&&this.updateInner(e,t,n,r),i}return!(!this.contentDOM&&!e.isLeaf)&&super.update(e,t,n,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,r){this.spec.setSelection?this.spec.setSelection(e,t,n):super.setSelection(e,t,n,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Oe(e,t,n){let r=e.firstChild,i=!1;for(let o=0;o<t.length;o++){let s=t[o],a=s.dom;if(a.parentNode==e){while(a!=r)r=Fe(r),i=!0;r=r.nextSibling}else i=!0,e.insertBefore(a,r);if(s instanceof Ee){let t=r?r.previousSibling:e.lastChild;Oe(s.contentDOM,s.children,n),r=t?t.nextSibling:e.firstChild}}while(r)r=Fe(r),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}const Re=function(e){e&&(this.nodeName=e)};Re.prototype=Object.create(null);const Pe=[new Re];function Le(e,t,n){if(0==e.length)return Pe;let r=n?Pe[0]:new Re,i=[r];for(let o=0;o<e.length;o++){let s=e[o].type.attrs;if(s){s.nodeName&&i.push(r=new Re(s.nodeName));for(let e in s){let o=s[e];null!=o&&(n&&1==i.length&&i.push(r=new Re(t.isInline?"span":"div")),"class"==e?r.class=(r.class?r.class+" ":"")+o:"style"==e?r.style=(r.style?r.style+";":"")+o:"nodeName"!=e&&(r[e]=o))}}}return i}function De(e,t,n,r){if(n==Pe&&r==Pe)return t;let i=t;for(let o=0;o<r.length;o++){let t=r[o],s=n[o];if(o){let n;s&&s.nodeName==t.nodeName&&i!=e&&(n=i.parentNode)&&n.nodeName.toLowerCase()==t.nodeName||(n=document.createElement(t.nodeName),n.pmIsDeco=!0,n.appendChild(i),s=Pe[0]),i=n}Ie(i,s||Pe[0],t)}return i}function Ie(e,t,n){for(let r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(let r in n)"class"!=r&&"style"!=r&&"nodeName"!=r&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let t=0;t<r.length;t++)-1==i.indexOf(r[t])&&e.classList.remove(r[t]);for(let t=0;t<i.length;t++)-1==r.indexOf(i[t])&&e.classList.add(i[t]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let n,r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;while(n=r.exec(t.style))e.style.removeProperty(n[1])}n.style&&(e.style.cssText+=n.style)}}function Ne(e,t,n){return De(e,e,Pe,Le(t,n,1!=e.nodeType))}function Ue(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function Fe(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class Be{constructor(e,t,n){this.lock=t,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=Ve(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n){let r=0,i=this.stack.length>>1,o=Math.min(i,e.length);while(r<o&&(r==i-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning)r++;while(r<i)this.destroyRest(),this.top.dirty=ve,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;while(i<e.length){this.stack.push(this.top,this.index+1);let r=-1;for(let t=this.index;t<Math.min(this.index+3,this.top.children.length);t++){let n=this.top.children[t];if(n.matchesMark(e[i])&&!this.isLocked(n.dom)){r=t;break}}if(r>-1)r>this.index&&(this.changed=!0,this.destroyBetween(this.index,r)),this.top=this.top.children[this.index];else{let r=Ee.create(this.top,e[i],t,n);this.top.children.splice(this.index,0,r),this.top=r,this.changed=!0}this.index=0,i++}}findNodeMatch(e,t,n,r){let i,o=-1;if(r>=this.preMatch.index&&(i=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&i.matchesNode(e,t,n))o=this.top.children.indexOf(i,this.index);else for(let s=this.index,a=Math.min(this.top.children.length,s+5);s<a;s++){let r=this.top.children[s];if(r.matchesNode(e,t,n)&&!this.preMatch.matched.has(r)){o=s;break}}return!(o<0)&&(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,t,n,r,i){let o=this.top.children[r];return o.dirty==_e&&o.dom==o.contentDOM&&(o.dirty=be),!!o.update(e,t,n,i)&&(this.destroyBetween(this.index,r),this.index++,!0)}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let t=e.pmViewDesc;if(t)for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==t)return e;return-1}e=t}}updateNextNode(e,t,n,r,i,o){for(let s=this.index;s<this.top.children.length;s++){let a=this.top.children[s];if(a instanceof Me){let l=this.preMatch.matched.get(a);if(null!=l&&l!=i)return!1;let c,u=a.dom,d=this.isLocked(u)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=_e&&Ue(t,a.outerDeco));if(!d&&a.update(e,t,n,r))return this.destroyBetween(this.index,s),a.dom!=u&&(this.changed=!0),this.index++,!0;if(!d&&(c=this.recreateWrapper(a,e,t,n,r,o)))return this.top.children[this.index]=c,c.dirty=be,c.updateChildren(r,o+1),c.dirty=ve,this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,n,r,i,o){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content))return null;let s=Me.create(this.top,t,n,r,i,o);if(!s.contentDOM)return null;s.children=e.children,e.children=[],e.destroy();for(let a of s.children)a.parent=s;return s}addNode(e,t,n,r,i){let o=Me.create(this.top,e,t,n,r,i);o.contentDOM&&o.updateChildren(r,i+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,t,n){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(e)||e!=r.widget&&r.widget.type.toDOM.parentNode){let r=new xe(this.top,e,t,n);this.top.children.splice(this.index++,0,r),this.changed=!0}else this.index++}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;while(e instanceof Ee)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Ce)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((P||O)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);"IMG"==e&&(n.className="ProseMirror-separator",n.alt=""),"BR"==e&&(n.className="ProseMirror-trailingBreak");let r=new Ae(this.top,[],n,null);t!=this.top?t.children.push(r):t.children.splice(this.index++,0,r),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}function Ve(e,t){let n=t,r=n.children.length,i=e.childCount,o=new Map,s=[];e:while(i>0){let a;for(;;)if(r){let e=n.children[r-1];if(!(e instanceof Ee)){a=e,r--;break}n=e,r=e.children.length}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=e.child(i-1))break;--i,o.set(a,i),s.push(a)}}return{index:i,matched:o,matches:s.reverse()}}function ze(e,t){return e.type.side-t.type.side}function je(e,t,n,r){let i=t.locals(e),o=0;if(0==i.length){for(let n=0;n<e.childCount;n++){let s=e.child(n);r(s,i,t.forChild(o,s),n),o+=s.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){if(s<i.length&&i[s].to==o){let e,t=i[s++];while(s<i.length&&i[s].to==o)(e||(e=[t])).push(i[s++]);if(e){e.sort(ze);for(let t=0;t<e.length;t++)n(e[t],c,!!l)}else n(t,c,!!l)}let u,d;if(l)d=-1,u=l,l=null;else{if(!(c<e.childCount))break;d=c,u=e.child(c++)}for(let e=0;e<a.length;e++)a[e].to<=o&&a.splice(e--,1);while(s<i.length&&i[s].from<=o&&i[s].to>o)a.push(i[s++]);let h=o+u.nodeSize;if(u.isText){let e=h;s<i.length&&i[s].from<e&&(e=i[s].from);for(let t=0;t<a.length;t++)a[t].to<e&&(e=a[t].to);e<h&&(l=u.cut(e-o),u=u.cut(0,e-o),h=e,d=-1)}let f=u.isInline&&!u.isLeaf?a.filter((e=>!e.inline)):a.slice();r(u,f,t.forChild(o,u),d),o=h}}function He(e){if("UL"==e.nodeName||"OL"==e.nodeName){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function We(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];e=e.childNodes[t-1],t=f(e)}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}function Ge(e,t,n,r){for(let i=0,o=0;i<e.childCount&&o<=r;){let s=e.child(i++),a=o;if(o+=s.nodeSize,!s.isText)continue;let l=s.text;while(i<e.childCount){let t=e.child(i++);if(o+=t.nodeSize,!t.isText)break;l+=t.text}if(o>=n){let e=a<r?l.lastIndexOf(t,r-a-1):-1;if(e>=0&&e+t.length+a>=n)return a+e;if(n==r&&l.length>=r+t.length-a&&l.slice(r-a,r-a+t.length)==t)return r}}return-1}function $e(e,t,n,r,i){let o=[];for(let s=0,a=0;s<e.length;s++){let l=e[s],c=a,u=a+=l.size;c>=n||u<=t?o.push(l):(c<t&&o.push(l.slice(0,t-c,r)),i&&(o.push(i),i=void 0),u>n&&o.push(l.slice(n-c,l.size,r)))}return o}function qe(e,t=null){let n=e.domSelectionRange(),i=e.state.doc;if(!n.focusNode)return null;let o=e.docView.nearestDesc(n.focusNode),s=o&&0==o.size,a=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(a<0)return null;let l,c,u=i.resolve(a);if(g(n)){l=u;while(o&&!o.node)o=o.parent;let e=o.node;if(o&&e.isAtom&&r.qv.isSelectable(e)&&o.parent&&(!e.isInline||!p(n.focusNode,n.focusOffset,o.dom))){let e=o.posBefore;c=new r.qv(a==e?u:i.resolve(e))}}else{let t=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(t<0)return null;l=i.resolve(t)}if(!c){let n="pointer"==t||e.state.selection.head<u.pos&&!s?1:-1;c=it(e,l,u,n)}return c}function Ye(e){return e.editable?e.hasFocus():st(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Xe(e,t=!1){let n=e.state.selection;if(nt(e,n),Ye(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&O){let t=e.domSelectionRange(),n=e.domObserver.currentSelection;if(t.anchorNode&&n.anchorNode&&u(t.anchorNode,t.anchorOffset,n.anchorNode,n.anchorOffset))return e.input.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}if(e.domObserver.disconnectSelection(),e.cursorWrapper)tt(e);else{let i,o,{anchor:s,head:a}=n;!Ze||n instanceof r.Bs||(n.$from.parent.inlineContent||(i=Ke(e,n.from)),n.empty||n.$from.parent.inlineContent||(o=Ke(e,n.to))),e.docView.setSelection(s,a,e.root,t),Ze&&(i&&Qe(i),o&&Qe(o)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&et(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const Ze=P||O&&R<63;function Ke(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(P&&i&&"false"==i.contentEditable)return Je(i);if((!i||"false"==i.contentEditable)&&(!o||"false"==o.contentEditable)){if(i)return Je(i);if(o)return Je(o)}}function Je(e){return e.contentEditable="true",P&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function Qe(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function et(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{n.anchorNode==r&&n.anchorOffset==i||(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout((()=>{Ye(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")}),20))})}function tt(e){let t=e.domSelection(),n=document.createRange(),r=e.cursorWrapper.dom,i="IMG"==r.nodeName;i?n.setEnd(r.parentNode,s(r)+1):n.setEnd(r,0),n.collapse(!1),t.removeAllRanges(),t.addRange(n),!i&&!e.state.selection.visible&&T&&C<=11&&(r.disabled=!0,r.disabled=!1)}function nt(e,t){if(t instanceof r.qv){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(rt(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else rt(e)}function rt(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function it(e,t,n,i){return e.someProp("createSelectionBetween",(r=>r(e,t,n)))||r.Bs.between(t,n,i)}function ot(e){return!(e.editable&&!e.hasFocus())&&st(e)}function st(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(n){return!1}}function at(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return u(t.node,t.offset,n.anchorNode,n.anchorOffset)}function lt(e,t){let{$anchor:n,$head:i}=e.selection,o=t>0?n.max(i):n.min(i),s=o.parent.inlineContent?o.depth?e.doc.resolve(t>0?o.after():o.before()):null:o;return s&&r.Y1.findFrom(s,t)}function ct(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function ut(e,t,n){let i=e.state.selection;if(!(i instanceof r.Bs)){if(i instanceof r.qv&&i.node.isInline)return ct(e,new r.Bs(t>0?i.$to:i.$from));{let n=lt(e.state,t);return!!n&&ct(e,n)}}if(!i.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"forward":"backward")){let n=lt(e.state,t);return!!(n&&n instanceof r.qv)&&ct(e,n)}if(!(D&&n.indexOf("m")>-1)){let n,o=i.$head,s=o.textOffset?null:t<0?o.nodeBefore:o.nodeAfter;if(!s||s.isText)return!1;let a=t<0?o.pos-s.nodeSize:o.pos;return!!(s.isAtom||(n=e.docView.descAt(a))&&!n.contentDOM)&&(r.qv.isSelectable(s)?ct(e,new r.qv(t<0?e.state.doc.resolve(o.pos-s.nodeSize):o)):!!U&&ct(e,new r.Bs(e.state.doc.resolve(t<0?a:a+s.nodeSize))))}}function dt(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function ht(e){let t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function ft(e,t){return t<0?pt(e):mt(e)}function pt(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,o,a=!1;for(A&&1==n.nodeType&&r<dt(n)&&ht(n.childNodes[r])&&(a=!0);;)if(r>0){if(1!=n.nodeType)break;{let e=n.childNodes[r-1];if(ht(e))i=n,o=--r;else{if(3!=e.nodeType)break;n=e,r=n.nodeValue.length}}}else{if(gt(n))break;{let t=n.previousSibling;while(t&&ht(t))i=n.parentNode,o=s(t),t=t.previousSibling;if(t)n=t,r=dt(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}a?vt(e,n,r):i&&vt(e,i,o)}function mt(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,o,a=dt(n);for(;;)if(r<a){if(1!=n.nodeType)break;let e=n.childNodes[r];if(!ht(e))break;i=n,o=++r}else{if(gt(n))break;{let t=n.nextSibling;while(t&&ht(t))i=t.parentNode,o=s(t)+1,t=t.nextSibling;if(t)n=t,r=0,a=dt(n);else{if(n=n.parentNode,n==e.dom)break;r=a=0}}}i&&vt(e,i,o)}function gt(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function vt(e,t,n){let r=e.domSelection();if(g(r)){let e=document.createRange();e.setEnd(t,n),e.setStart(t,n),r.removeAllRanges(),r.addRange(e)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:i}=e;setTimeout((()=>{e.state==i&&Xe(e)}),50)}function yt(e,t){let n=e.state.doc.resolve(t);if(!O&&!I&&n.parent.inlineContent){let r=e.coordsAtPos(t);if(t>n.start()){let n=e.coordsAtPos(t-1),i=(n.top+n.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(n.left-r.left)>1)return n.left<r.left?"ltr":"rtl"}if(t<n.end()){let n=e.coordsAtPos(t+1),i=(n.top+n.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(n.left-r.left)>1)return n.left>r.left?"ltr":"rtl"}}let r=getComputedStyle(e.dom).direction;return"rtl"==r?"rtl":"ltr"}function bt(e,t,n){let i=e.state.selection;if(i instanceof r.Bs&&!i.empty||n.indexOf("s")>-1)return!1;if(D&&n.indexOf("m")>-1)return!1;let{$from:o,$to:s}=i;if(!o.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let n=lt(e.state,t);if(n&&n instanceof r.qv)return ct(e,n)}if(!o.parent.inlineContent){let n=t<0?o:s,a=i instanceof r.C1?r.Y1.near(n,t):r.Y1.findFrom(n,t);return!!a&&ct(e,a)}return!1}function _t(e,t){if(!(e.state.selection instanceof r.Bs))return!0;let{$head:n,$anchor:i,empty:o}=e.state.selection;if(!n.sameParent(i))return!0;if(!o)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let r=e.state.tr;return t<0?r.delete(n.pos-s.nodeSize,n.pos):r.delete(n.pos,n.pos+s.nodeSize),e.dispatch(r),!0}return!1}function wt(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function xt(e){if(!P||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&1==t.nodeType&&0==n&&t.firstChild&&"false"==t.firstChild.contentEditable){let n=t.firstChild;wt(e,n,"true"),setTimeout((()=>wt(e,n,"false")),20)}return!1}function St(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function Et(e,t){let n=t.keyCode,r=St(t);if(8==n||D&&72==n&&"c"==r)return _t(e,-1)||ft(e,-1);if(46==n||D&&68==n&&"c"==r)return _t(e,1)||ft(e,1);if(13==n||27==n)return!0;if(37==n||D&&66==n&&"c"==r){let t=37==n?"ltr"==yt(e,e.state.selection.from)?-1:1:-1;return ut(e,t,r)||ft(e,t)}if(39==n||D&&70==n&&"c"==r){let t=39==n?"ltr"==yt(e,e.state.selection.from)?1:-1:1;return ut(e,t,r)||ft(e,t)}return 38==n||D&&80==n&&"c"==r?bt(e,-1,r)||ft(e,-1):40==n||D&&78==n&&"c"==r?xt(e)||bt(e,1,r)||mt(e):r==(D?"m":"c")&&(66==n||73==n||89==n||90==n)}function Mt(e,t){e.someProp("transformCopied",(n=>{t=n(t,e)}));let n=[],{content:r,openStart:o,openEnd:s}=t;while(o>1&&s>1&&1==r.childCount&&1==r.firstChild.childCount){o--,s--;let e=r.firstChild;n.push(e.type.name,e.attrs!=e.type.defaultAttrs?e.attrs:null),r=e.content}let a=e.someProp("clipboardSerializer")||i.PW.fromSchema(e.state.schema),l=Nt(),c=l.createElement("div");c.appendChild(a.serializeFragment(r,{document:l}));let u,d=c.firstChild,h=0;while(d&&1==d.nodeType&&(u=Dt[d.nodeName.toLowerCase()])){for(let e=u.length-1;e>=0;e--){let t=l.createElement(u[e]);while(c.firstChild)t.appendChild(c.firstChild);c.appendChild(t),h++}d=c.firstChild}d&&1==d.nodeType&&d.setAttribute("data-pm-slice",`${o} ${s}${h?` -${h}`:""} ${JSON.stringify(n)}`);let f=e.someProp("clipboardTextSerializer",(n=>n(t,e)))||t.content.textBetween(0,t.content.size,"\n\n");return{dom:c,text:f}}function Tt(e,t,n,r,o){let s,a,l=o.parent.type.spec.code;if(!n&&!t)return null;let c=t&&(r||l||!n);if(c){if(e.someProp("transformPastedText",(n=>{t=n(t,l||r,e)})),l)return t?new i.p2(i.HY.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):i.p2.empty;let n=e.someProp("clipboardTextParser",(n=>n(t,o,r,e)));if(n)a=n;else{let n=o.marks(),{schema:r}=e.state,a=i.PW.fromSchema(r);s=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach((e=>{let t=s.appendChild(document.createElement("p"));e&&t.appendChild(a.serializeNode(r.text(e,n)))}))}}else e.someProp("transformPastedHTML",(t=>{n=t(n,e)})),s=Ut(n),U&&Ft(s);let u=s&&s.querySelector("[data-pm-slice]"),d=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let i=+d[3];i>0;i--){let e=s.firstChild;while(e&&1!=e.nodeType)e=e.nextSibling;if(!e)break;s=e}if(!a){let t=e.someProp("clipboardParser")||e.someProp("domParser")||i.aw.fromSchema(e.state.schema);a=t.parseSlice(s,{preserveWhitespace:!(!c&&!d),context:o,ruleFromNode(e){return"BR"!=e.nodeName||e.nextSibling||!e.parentNode||Ct.test(e.parentNode.nodeName)?null:{ignore:!0}}})}if(d)a=Bt(Lt(a,+d[1],+d[2]),d[4]);else if(a=i.p2.maxOpen(At(a.content,o),!0),a.openStart||a.openEnd){let e=0,t=0;for(let n=a.content.firstChild;e<a.openStart&&!n.type.spec.isolating;e++,n=n.firstChild);for(let n=a.content.lastChild;t<a.openEnd&&!n.type.spec.isolating;t++,n=n.lastChild);a=Lt(a,e,t)}return e.someProp("transformPasted",(t=>{a=t(a,e)})),a}const Ct=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function At(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let r,o=t.node(n),s=o.contentMatchAt(t.index(n)),a=[];if(e.forEach((e=>{if(!a)return;let t,n=s.findWrapping(e.type);if(!n)return a=null;if(t=a.length&&r.length&&Ot(n,r,e,a[a.length-1],0))a[a.length-1]=t;else{a.length&&(a[a.length-1]=Rt(a[a.length-1],r.length));let t=kt(e,n);a.push(t),s=s.matchType(t.type),r=n}})),a)return i.HY.from(a)}return e}function kt(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,i.HY.from(e));return e}function Ot(e,t,n,r,o){if(o<e.length&&o<t.length&&e[o]==t[o]){let s=Ot(e,t,n,r.lastChild,o+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));let a=r.contentMatchAt(r.childCount);if(a.matchType(o==e.length-1?n.type:e[o+1]))return r.copy(r.content.append(i.HY.from(kt(n,e,o+1))))}}function Rt(e,t){if(0==t)return e;let n=e.content.replaceChild(e.childCount-1,Rt(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(i.HY.empty,!0);return e.copy(n.append(r))}function Pt(e,t,n,r,o,s){let a=t<0?e.firstChild:e.lastChild,l=a.content;return e.childCount>1&&(s=0),o<r-1&&(l=Pt(l,t,n,r,o+1,s)),o>=n&&(l=t<0?a.contentMatchAt(0).fillBefore(l,s<=o).append(l):l.append(a.contentMatchAt(a.childCount).fillBefore(i.HY.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(l))}function Lt(e,t,n){return t<e.openStart&&(e=new i.p2(Pt(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new i.p2(Pt(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const Dt={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let It=null;function Nt(){return It||(It=document.implementation.createHTMLDocument("title"))}function Ut(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n,r=Nt().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(e);if((n=i&&Dt[i[1].toLowerCase()])&&(e=n.map((e=>"<"+e+">")).join("")+e+n.map((e=>"</"+e+">")).reverse().join("")),r.innerHTML=e,n)for(let o=0;o<n.length;o++)r=r.querySelector(n[o])||r;return r}function Ft(e){let t=e.querySelectorAll(O?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];1==r.childNodes.length&&" "==r.textContent&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function Bt(e,t){if(!e.size)return e;let n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(l){return e}let{content:o,openStart:s,openEnd:a}=e;for(let c=n.length-2;c>=0;c-=2){let e=r.nodes[n[c]];if(!e||e.hasRequiredAttrs())break;o=i.HY.from(e.create(n[c+1],o)),s++,a++}return new i.p2(o,s,a)}const Vt={},zt={},jt={touchstart:!0,touchmove:!0};class Ht{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Wt(e){for(let t in Vt){let n=Vt[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=t=>{!Xt(e,t)||Yt(e,t)||!e.editable&&t.type in zt||n(e,t)},jt[t]?{passive:!0}:void 0)}P&&e.dom.addEventListener("input",(()=>null)),qt(e)}function Gt(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function $t(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function qt(e){e.someProp("handleDOMEvents",(t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=t=>Yt(e,t))}))}function Yt(e,t){return e.someProp("handleDOMEvents",(n=>{let r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)}))}function Xt(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function Zt(e,t){Yt(e,t)||!Vt[t.type]||!e.editable&&t.type in zt||Vt[t.type](e,t)}function Kt(e){return{left:e.clientX,top:e.clientY}}function Jt(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function Qt(e,t,n,r,i){if(-1==r)return!1;let o=e.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(e.someProp(t,(t=>s>o.depth?t(e,n,o.nodeAfter,o.before(s),i,!0):t(e,n,o.node(s),o.before(s),i,!1))))return!0;return!1}function en(e,t,n){e.focused||e.focus();let r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function tn(e,t){if(-1==t)return!1;let n=e.state.doc.resolve(t),i=n.nodeAfter;return!!(i&&i.isAtom&&r.qv.isSelectable(i))&&(en(e,new r.qv(n),"pointer"),!0)}function nn(e,t){if(-1==t)return!1;let n,i,o=e.state.selection;o instanceof r.qv&&(n=o.node);let s=e.state.doc.resolve(t);for(let a=s.depth+1;a>0;a--){let e=a>s.depth?s.nodeAfter:s.node(a);if(r.qv.isSelectable(e)){i=n&&o.$from.depth>0&&a>=o.$from.depth&&s.before(o.$from.depth+1)==o.$from.pos?s.before(o.$from.depth):s.before(a);break}}return null!=i&&(en(e,r.qv.create(e.state.doc,i),"pointer"),!0)}function rn(e,t,n,r,i){return Qt(e,"handleClickOn",t,n,r)||e.someProp("handleClick",(n=>n(e,t,r)))||(i?nn(e,n):tn(e,n))}function on(e,t,n,r){return Qt(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",(n=>n(e,t,r)))}function sn(e,t,n,r){return Qt(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",(n=>n(e,t,r)))||an(e,n,r)}function an(e,t,n){if(0!=n.button)return!1;let i=e.state.doc;if(-1==t)return!!i.inlineContent&&(en(e,r.Bs.create(i,0,i.content.size),"pointer"),!0);let o=i.resolve(t);for(let s=o.depth+1;s>0;s--){let t=s>o.depth?o.nodeAfter:o.node(s),n=o.before(s);if(t.inlineContent)en(e,r.Bs.create(i,n+1,n+1+t.content.size),"pointer");else{if(!r.qv.isSelectable(t))continue;en(e,r.qv.create(i,n),"pointer")}return!0}}function ln(e){return gn(e)}zt.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=16==n.keyCode||n.shiftKey,!dn(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!N||!O||13!=n.keyCode))if(229!=n.keyCode&&e.domObserver.forceFlush(),!L||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)e.someProp("handleKeyDown",(t=>t(e,n)))||Et(e,n)?n.preventDefault():Gt(e,"key");else{let t=Date.now();e.input.lastIOSEnter=t,e.input.lastIOSEnterFallbackTimeout=setTimeout((()=>{e.input.lastIOSEnter==t&&(e.someProp("handleKeyDown",(t=>t(e,v(13,"Enter")))),e.input.lastIOSEnter=0)}),200)}},zt.keyup=(e,t)=>{16==t.keyCode&&(e.input.shiftKey=!1)},zt.keypress=(e,t)=>{let n=t;if(dn(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||D&&n.metaKey)return;if(e.someProp("handleKeyPress",(t=>t(e,n))))return void n.preventDefault();let i=e.state.selection;if(!(i instanceof r.Bs)||!i.$from.sameParent(i.$to)){let t=String.fromCharCode(n.charCode);/[\r\n]/.test(t)||e.someProp("handleTextInput",(n=>n(e,i.$from.pos,i.$to.pos,t)))||e.dispatch(e.state.tr.insertText(t).scrollIntoView()),n.preventDefault()}};const cn=D?"metaKey":"ctrlKey";Vt.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=ln(e),i=Date.now(),o="singleClick";i-e.input.lastClick.time<500&&Jt(n,e.input.lastClick)&&!n[cn]&&("singleClick"==e.input.lastClick.type?o="doubleClick":"doubleClick"==e.input.lastClick.type&&(o="tripleClick")),e.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o};let s=e.posAtCoords(Kt(n));s&&("singleClick"==o?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new un(e,s,n,!!r)):("doubleClick"==o?on:sn)(e,s.pos,s.inside,n)?n.preventDefault():Gt(e,"pointer"))};class un{constructor(e,t,n,i){let o,s;if(this.view=e,this.pos=t,this.event=n,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[cn],this.allowDefault=n.shiftKey,t.inside>-1)o=e.state.doc.nodeAt(t.inside),s=t.inside;else{let n=e.state.doc.resolve(t.pos);o=n.parent,s=n.depth?n.before():0}const a=i?null:n.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:c}=e.state;(0==n.button&&o.type.spec.draggable&&!1!==o.type.spec.selectable||c instanceof r.qv&&c.from<=s&&c.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!A||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Gt(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((()=>Xe(this.view))),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Kt(e))),this.updateAllowDefault(e),this.allowDefault||!t?Gt(this.view,"pointer"):rn(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||P&&this.mightDrag&&!this.mightDrag.node.isAtom||O&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(en(this.view,r.Y1.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):Gt(this.view,"pointer")}move(e){this.updateAllowDefault(e),Gt(this.view,"pointer"),0==e.buttons&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}function dn(e,t){return!!e.composing||!!(P&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500)&&(e.input.compositionEndedAt=-2e8,!0)}Vt.touchstart=e=>{e.input.lastTouch=Date.now(),ln(e),Gt(e,"pointer")},Vt.touchmove=e=>{e.input.lastTouch=Date.now(),Gt(e,"pointer")},Vt.contextmenu=e=>ln(e);const hn=N?5e3:-1;function fn(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout((()=>gn(e)),t))}function pn(e){e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=mn());while(e.input.compositionNodes.length>0)e.input.compositionNodes.pop().markParentsDirty()}function mn(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function gn(e,t=!1){if(!(N&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),pn(e),t||e.docView&&e.docView.dirty){let t=qe(e);return t&&!t.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(t)):e.updateState(e.state),!0}return!1}}function vn(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout((()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()}),50)}zt.compositionstart=zt.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((e=>!1===e.type.spec.inclusive))))e.markCursor=e.state.storedMarks||n.marks(),gn(e,!0),e.markCursor=null;else if(gn(e),A&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let t=e.domSelectionRange();for(let n=t.focusNode,r=t.focusOffset;n&&1==n.nodeType&&0!=r;){let t=r<0?n.lastChild:n.childNodes[r-1];if(!t)break;if(3==t.nodeType){e.domSelection().collapse(t,t.nodeValue.length);break}n=t,r=-1}}e.input.composing=!0}fn(e,hn)},zt.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionID++,fn(e,20))};const yn=T&&C<15||L&&F<604;function bn(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}function _n(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?wn(e,r.value,null,e.input.shiftKey,t):wn(e,r.textContent,r.innerHTML,e.input.shiftKey,t)}),50)}function wn(e,t,n,r,o){let s=Tt(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",(t=>t(e,o,s||i.p2.empty))))return!0;if(!s)return!1;let a=bn(s),l=a?e.state.tr.replaceSelectionWith(a,e.input.shiftKey):e.state.tr.replaceSelection(s);return e.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Vt.copy=zt.cut=(e,t)=>{let n=t,r=e.state.selection,i="cut"==n.type;if(r.empty)return;let o=yn?null:n.clipboardData,s=r.content(),{dom:a,text:l}=Mt(e,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):vn(e,a),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},zt.paste=(e,t)=>{let n=t;if(e.composing&&!N)return;let r=yn?null:n.clipboardData;r&&wn(e,r.getData("text/plain"),r.getData("text/html"),e.input.shiftKey,n)?n.preventDefault():_n(e,n)};class xn{constructor(e,t){this.slice=e,this.move=t}}const Sn=D?"altKey":"ctrlKey";Vt.dragstart=(e,t)=>{let n=t,i=e.input.mouseDown;if(i&&i.done(),!n.dataTransfer)return;let o=e.state.selection,s=o.empty?null:e.posAtCoords(Kt(n));if(s&&s.pos>=o.from&&s.pos<=(o instanceof r.qv?o.to-1:o.to));else if(i&&i.mightDrag)e.dispatch(e.state.tr.setSelection(r.qv.create(e.state.doc,i.mightDrag.pos)));else if(n.target&&1==n.target.nodeType){let t=e.docView.nearestDesc(n.target,!0);t&&t.node.type.spec.draggable&&t!=e.docView&&e.dispatch(e.state.tr.setSelection(r.qv.create(e.state.doc,t.posBefore)))}let a=e.state.selection.content(),{dom:l,text:c}=Mt(e,a);n.dataTransfer.clearData(),n.dataTransfer.setData(yn?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",yn||n.dataTransfer.setData("text/plain",c),e.dragging=new xn(a,!n[Sn])},Vt.dragend=e=>{let t=e.dragging;window.setTimeout((()=>{e.dragging==t&&(e.dragging=null)}),50)},zt.dragover=zt.dragenter=(e,t)=>t.preventDefault(),zt.drop=(e,t)=>{let n=t,s=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let a=e.posAtCoords(Kt(n));if(!a)return;let l=e.state.doc.resolve(a.pos),c=s&&s.slice;c?e.someProp("transformPasted",(t=>{c=t(c,e)})):c=Tt(e,n.dataTransfer.getData(yn?"Text":"text/plain"),yn?null:n.dataTransfer.getData("text/html"),!1,l);let u=!(!s||n[Sn]);if(e.someProp("handleDrop",(t=>t(e,n,c||i.p2.empty,u))))return void n.preventDefault();if(!c)return;n.preventDefault();let d=c?(0,o.nj)(e.state.doc,l.pos,c):l.pos;null==d&&(d=l.pos);let h=e.state.tr;u&&h.deleteSelection();let f=h.mapping.map(d),p=0==c.openStart&&0==c.openEnd&&1==c.content.childCount,m=h.doc;if(p?h.replaceRangeWith(f,f,c.content.firstChild):h.replaceRange(f,f,c),h.doc.eq(m))return;let g=h.doc.resolve(f);if(p&&r.qv.isSelectable(c.content.firstChild)&&g.nodeAfter&&g.nodeAfter.sameMarkup(c.content.firstChild))h.setSelection(new r.qv(g));else{let t=h.mapping.map(d);h.mapping.maps[h.mapping.maps.length-1].forEach(((e,n,r,i)=>t=i)),h.setSelection(it(e,g,h.doc.resolve(t)))}e.focus(),e.dispatch(h.setMeta("uiEvent","drop"))},Vt.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&Xe(e)}),20))},Vt.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},Vt.beforeinput=(e,t)=>{let n=t;if(O&&N&&"deleteContentBackward"==n.inputType){e.domObserver.flushSoon();let{domChangeCount:t}=e.input;setTimeout((()=>{if(e.input.domChangeCount!=t)return;if(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",(t=>t(e,v(8,"Backspace")))))return;let{$cursor:n}=e.state.selection;n&&n.pos>0&&e.dispatch(e.state.tr.delete(n.pos-1,n.pos).scrollIntoView())}),50)}};for(let mr in zt)Vt[mr]=zt[mr];function En(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class Mn{constructor(e,t){this.toDOM=e,this.spec=t||On,this.side=this.spec.side||0}map(e,t,n,r){let{pos:i,deleted:o}=e.mapResult(t.from+r,this.side<0?-1:1);return o?null:new An(i-n,i-n,this)}valid(){return!0}eq(e){return this==e||e instanceof Mn&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&En(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Tn{constructor(e,t){this.attrs=e,this.spec=t||On}map(e,t,n,r){let i=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,o=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return i>=o?null:new An(i,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Tn&&En(this.attrs,e.attrs)&&En(this.spec,e.spec)}static is(e){return e.type instanceof Tn}destroy(){}}class Cn{constructor(e,t){this.attrs=e,this.spec=t||On}map(e,t,n,r){let i=e.mapResult(t.from+r,1);if(i.deleted)return null;let o=e.mapResult(t.to+r,-1);return o.deleted||o.pos<=i.pos?null:new An(i.pos-n,o.pos-n,this)}valid(e,t){let n,{index:r,offset:i}=e.content.findIndex(t.from);return i==t.from&&!(n=e.child(r)).isText&&i+n.nodeSize==t.to}eq(e){return this==e||e instanceof Cn&&En(this.attrs,e.attrs)&&En(this.spec,e.spec)}destroy(){}}class An{constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new An(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new An(e,e,new Mn(t,n))}static inline(e,t,n,r){return new An(e,t,new Tn(n,r))}static node(e,t,n,r){return new An(e,t,new Cn(n,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof Tn}}const kn=[],On={};class Rn{constructor(e,t){this.local=e.length?e:kn,this.children=t.length?t:kn}static create(e,t){return t.length?Bn(t,e,0,On):Pn}find(e,t,n){let r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r}findInner(e,t,n,r,i){for(let o=0;o<this.local.length;o++){let s=this.local[o];s.from<=t&&s.to>=e&&(!i||i(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let s=this.children[o]+1;this.children[o+2].findInner(e-s,t-s,n,r+s,i)}}map(e,t,n){return this==Pn||0==e.maps.length?this:this.mapInner(e,t,0,0,n||On)}mapInner(e,t,n,r,i){let o;for(let s=0;s<this.local.length;s++){let a=this.local[s].map(e,n,r);a&&a.type.valid(t,a)?(o||(o=[])).push(a):i.onRemove&&i.onRemove(this.local[s].spec)}return this.children.length?Dn(this.children,o||[],e,t,n,r,i):o?new Rn(o.sort(Vn),kn):Pn}add(e,t){return t.length?this==Pn?Rn.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let r,i=0;e.forEach(((e,o)=>{let s,a=o+n;if(s=Un(t,e,a)){r||(r=this.children.slice());while(i<r.length&&r[i]<o)i+=3;r[i]==o?r[i+2]=r[i+2].addInner(e,s,a+1):r.splice(i,0,o,o+e.nodeSize,Bn(s,e,a+1,On)),i+=3}}));let o=In(i?Fn(t):t,-n);for(let s=0;s<o.length;s++)o[s].type.valid(e,o[s])||o.splice(s--,1);return new Rn(o.length?this.local.concat(o).sort(Vn):this.local,r||this.children)}remove(e){return 0==e.length||this==Pn?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,r=this.local;for(let i=0;i<n.length;i+=3){let r,o=n[i]+t,s=n[i+1]+t;for(let t,n=0;n<e.length;n++)(t=e[n])&&t.from>o&&t.to<s&&(e[n]=null,(r||(r=[])).push(t));if(!r)continue;n==this.children&&(n=this.children.slice());let a=n[i+2].removeInner(r,o+1);a!=Pn?n[i+2]=a:(n.splice(i,3),i-=3)}if(r.length)for(let i,o=0;o<e.length;o++)if(i=e[o])for(let e=0;e<r.length;e++)r[e].eq(i,t)&&(r==this.local&&(r=this.local.slice()),r.splice(e--,1));return n==this.children&&r==this.local?this:r.length||n.length?new Rn(r,n):Pn}forChild(e,t){if(this==Pn)return this;if(t.isLeaf)return Rn.empty;let n,r;for(let s=0;s<this.children.length;s+=3)if(this.children[s]>=e){this.children[s]==e&&(n=this.children[s+2]);break}let i=e+1,o=i+t.content.size;for(let s=0;s<this.local.length;s++){let e=this.local[s];if(e.from<o&&e.to>i&&e.type instanceof Tn){let t=Math.max(i,e.from)-i,n=Math.min(o,e.to)-i;t<n&&(r||(r=[])).push(e.copy(t,n))}}if(r){let e=new Rn(r.sort(Vn),kn);return n?new Ln([e,n]):e}return n||Pn}eq(e){if(this==e)return!0;if(!(e instanceof Rn)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return zn(this.localsInner(e))}localsInner(e){if(this==Pn)return kn;if(e.inlineContent||!this.local.some(Tn.is))return this.local;let t=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof Tn||t.push(this.local[n]);return t}}Rn.empty=new Rn([],[]),Rn.removeOverlap=zn;const Pn=Rn.empty;class Ln{constructor(e){this.members=e}map(e,t){const n=this.members.map((n=>n.map(e,t,On)));return Ln.from(n)}forChild(e,t){if(t.isLeaf)return Rn.empty;let n=[];for(let r=0;r<this.members.length;r++){let i=this.members[r].forChild(e,t);i!=Pn&&(i instanceof Ln?n=n.concat(i.members):n.push(i))}return Ln.from(n)}eq(e){if(!(e instanceof Ln)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let r=0;r<this.members.length;r++){let i=this.members[r].localsInner(e);if(i.length)if(t){n&&(t=t.slice(),n=!1);for(let e=0;e<i.length;e++)t.push(i[e])}else t=i}return t?zn(n?t:t.sort(Vn)):kn}static from(e){switch(e.length){case 0:return Pn;case 1:return e[0];default:return new Ln(e.every((e=>e instanceof Rn))?e:e.reduce(((e,t)=>e.concat(t instanceof Rn?t:t.members)),[]))}}}function Dn(e,t,n,r,i,o,s){let a=e.slice();for(let c=0,u=o;c<n.maps.length;c++){let e=0;n.maps[c].forEach(((t,n,r,o)=>{let s=o-r-(n-t);for(let l=0;l<a.length;l+=3){let o=a[l+1];if(o<0||t>o+u-e)continue;let c=a[l]+u-e;n>=c?a[l+1]=t<=c?-2:-1:r>=i&&s&&(a[l]+=s,a[l+1]+=s)}e+=s})),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(-2==a[c+1]){l=!0,a[c+1]=-1;continue}let t=n.map(e[c]+o),u=t-i;if(u<0||u>=r.content.size){l=!0;continue}let d=n.map(e[c+1]+o,-1),h=d-i,{index:f,offset:p}=r.content.findIndex(u),m=r.maybeChild(f);if(m&&p==u&&p+m.nodeSize==h){let r=a[c+2].mapInner(n,m,t+1,e[c]+o+1,s);r!=Pn?(a[c]=u,a[c+1]=h,a[c+2]=r):(a[c+1]=-2,l=!0)}else l=!0}if(l){let l=Nn(a,e,t,n,i,o,s),c=Bn(l,r,0,s);t=c.local;for(let e=0;e<a.length;e+=3)a[e+1]<0&&(a.splice(e,3),e-=3);for(let e=0,t=0;e<c.children.length;e+=3){let n=c.children[e];while(t<a.length&&a[t]<n)t+=3;a.splice(t,0,c.children[e],c.children[e+1],c.children[e+2])}}return new Rn(t.sort(Vn),a)}function In(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let i=e[r];n.push(new An(i.from+t,i.to+t,i.type))}return n}function Nn(e,t,n,r,i,o,s){function a(e,t){for(let o=0;o<e.local.length;o++){let a=e.local[o].map(r,i,t);a?n.push(a):s.onRemove&&s.onRemove(e.local[o].spec)}for(let n=0;n<e.children.length;n+=3)a(e.children[n+2],e.children[n]+t+1)}for(let l=0;l<e.length;l+=3)-1==e[l+1]&&a(e[l+2],t[l]+o+1);return n}function Un(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,i=null;for(let o,s=0;s<e.length;s++)(o=e[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),e[s]=null);return i}function Fn(e){let t=[];for(let n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function Bn(e,t,n,r){let i=[],o=!1;t.forEach(((t,s)=>{let a=Un(e,t,s+n);if(a){o=!0;let e=Bn(a,t,n+s+1,r);e!=Pn&&i.push(s,s+t.nodeSize,e)}}));let s=In(o?Fn(e):e,-n).sort(Vn);for(let a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new Rn(s,i):Pn}function Vn(e,t){return e.from-t.from||e.to-t.to}function zn(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let i=n+1;i<t.length;i++){let o=t[i];if(o.from!=r.from){o.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,o.from),jn(t,i,r.copy(o.from,r.to)));break}o.to!=r.to&&(t==e&&(t=e.slice()),t[i]=o.copy(o.from,r.to),jn(t,i+1,o.copy(r.to,o.to)))}}return t}function jn(e,t,n){while(t<e.length&&Vn(n,e[t])>0)t++;e.splice(t,0,n)}function Hn(e){let t=[];return e.someProp("decorations",(n=>{let r=n(e.state);r&&r!=Pn&&t.push(r)})),e.cursorWrapper&&t.push(Rn.create(e.state.doc,[e.cursorWrapper.deco])),Ln.from(t)}const Wn={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Gn=T&&C<=11;class $n{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class qn{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new $n,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver((e=>{for(let t=0;t<e.length;t++)this.queue.push(e[t]);T&&C<=11&&e.some((e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length))?this.flushSoon():this.flush()})),Gn&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((()=>{this.flushingSoon=-1,this.flush()}),20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Wn)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout((()=>this.flush()),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout((()=>this.suppressingSelectionUpdates=!1),50)}onSelectionChange(){if(ot(this.view)){if(this.suppressingSelectionUpdates)return Xe(this.view);if(T&&C<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&u(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t,n=new Set;for(let i=e.focusNode;i;i=a(i))n.add(i);for(let i=e.anchorNode;i;i=a(i))if(n.has(i)){t=i;break}let r=t&&this.view.docView.nearestDesc(t);return r&&r.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.observer?this.observer.takeRecords():[];this.queue.length&&(t=this.queue.concat(t),this.queue.length=0);let n=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&ot(e)&&!this.ignoreSelectionChange(n),o=-1,s=-1,a=!1,l=[];if(e.editable)for(let r=0;r<t.length;r++){let e=this.registerMutation(t[r],l);e&&(o=o<0?e.from:Math.min(e.from,o),s=s<0?e.to:Math.max(e.to,s),e.typeOver&&(a=!0))}if(A&&l.length>1){let e=l.filter((e=>"BR"==e.nodeName));if(2==e.length){let t=e[0],n=e[1];t.parentNode&&t.parentNode.parentNode==n.parentNode?n.remove():t.remove()}}let c=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&g(n)&&(c=qe(e))&&c.eq(r.Y1.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Xe(e),this.currentSelection.set(n),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,s),Zn(e)),this.handleDOMChange(o,s,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||Xe(e),this.currentSelection.set(n))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(let n=0;n<e.addedNodes.length;n++)t.push(e.addedNodes[n]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let r=e.previousSibling,i=e.nextSibling;if(T&&C<=11&&e.addedNodes.length)for(let t=0;t<e.addedNodes.length;t++){let{previousSibling:n,nextSibling:o}=e.addedNodes[t];(!n||Array.prototype.indexOf.call(e.addedNodes,n)<0)&&(r=n),(!o||Array.prototype.indexOf.call(e.addedNodes,o)<0)&&(i=o)}let o=r&&r.parentNode==e.target?s(r)+1:0,a=n.localPosFromDOM(e.target,o,-1),l=i&&i.parentNode==e.target?s(i):e.target.childNodes.length,c=n.localPosFromDOM(e.target,l,1);return{from:a,to:c}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let Yn=new WeakMap,Xn=!1;function Zn(e){if(!Yn.has(e)&&(Yn.set(e,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace))){if(e.requiresGeckoHackNode=A,Xn)return;console["warn"]("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Xn=!0}}function Kn(e){let t;function n(e){e.preventDefault(),e.stopImmediatePropagation(),t=e.getTargetRanges()[0]}e.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",n,!0);let r=t.startContainer,i=t.startOffset,o=t.endContainer,s=t.endOffset,a=e.domAtPos(e.state.selection.anchor);return u(a.node,a.offset,o,s)&&([r,i,o,s]=[o,s,r,i]),{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:s}}function Jn(e,t,n){let r,{node:o,fromOffset:s,toOffset:a,from:l,to:c}=e.docView.parseRange(t,n),u=e.domSelectionRange(),d=u.anchorNode;if(d&&e.dom.contains(1==d.nodeType?d:d.parentNode)&&(r=[{node:d,offset:u.anchorOffset}],g(u)||r.push({node:u.focusNode,offset:u.focusOffset})),O&&8===e.input.lastKeyCode)for(let i=a;i>s;i--){let e=o.childNodes[i-1],t=e.pmViewDesc;if("BR"==e.nodeName&&!t){a=i;break}if(!t||t.size)break}let h=e.state.doc,f=e.someProp("domParser")||i.aw.fromSchema(e.state.schema),p=h.resolve(l),m=null,v=f.parse(o,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:s,to:a,preserveWhitespace:"pre"!=p.parent.type.whitespace||"full",findPositions:r,ruleFromNode:Qn,context:p});if(r&&null!=r[0].pos){let e=r[0].pos,t=r[1]&&r[1].pos;null==t&&(t=e),m={anchor:e+l,head:t+l}}return{doc:v,sel:m,from:l,to:c}}function Qn(e){let t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(P&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}if(e.parentNode.lastChild==e||P&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const er=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function tr(e,t,n,i,o){if(t<0){let t=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,n=qe(e,t);if(n&&!e.state.selection.eq(n)){if(O&&N&&13===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",(t=>t(e,v(13,"Enter")))))return;let r=e.state.tr.setSelection(n);"pointer"==t?r.setMeta("pointer",!0):"key"==t&&r.scrollIntoView(),e.composing&&r.setMeta("composition",e.input.compositionID),e.dispatch(r)}return}let s=e.state.doc.resolve(t),a=s.sharedDepth(n);t=s.before(a+1),n=e.state.doc.resolve(n).after(a+1);let l,c,u=e.state.selection,d=Jn(e,t,n),h=e.state.doc,f=h.slice(d.from,d.to);8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(l=e.state.selection.to,c="end"):(l=e.state.selection.from,c="start"),e.input.lastKeyCode=null;let p=sr(f.content,d.doc.content,d.from,l,c);if((L&&e.input.lastIOSEnter>Date.now()-225||N)&&o.some((e=>1==e.nodeType&&!er.test(e.nodeName)))&&(!p||p.endA>=p.endB)&&e.someProp("handleKeyDown",(t=>t(e,v(13,"Enter")))))return void(e.input.lastIOSEnter=0);if(!p){if(!(i&&u instanceof r.Bs&&!u.empty&&u.$head.sameParent(u.$anchor))||e.composing||d.sel&&d.sel.anchor!=d.sel.head){if(d.sel){let t=nr(e,e.state.doc,d.sel);if(t&&!t.eq(e.state.selection)){let n=e.state.tr.setSelection(t);e.composing&&n.setMeta("composition",e.input.compositionID),e.dispatch(n)}}return}p={start:u.from,endA:u.to,endB:u.to}}if(O&&e.cursorWrapper&&d.sel&&d.sel.anchor==e.cursorWrapper.deco.from&&d.sel.head==d.sel.anchor){let e=p.endB-p.start;d.sel={anchor:d.sel.anchor+e,head:d.sel.anchor+e}}e.input.domChangeCount++,e.state.selection.from<e.state.selection.to&&p.start==p.endB&&e.state.selection instanceof r.Bs&&(p.start>e.state.selection.from&&p.start<=e.state.selection.from+2&&e.state.selection.from>=d.from?p.start=e.state.selection.from:p.endA<e.state.selection.to&&p.endA>=e.state.selection.to-2&&e.state.selection.to<=d.to&&(p.endB+=e.state.selection.to-p.endA,p.endA=e.state.selection.to)),T&&C<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>d.from&&"  "==d.doc.textBetween(p.start-d.from-1,p.start-d.from+1)&&(p.start--,p.endA--,p.endB--);let m,g=d.doc.resolveNoCache(p.start-d.from),y=d.doc.resolveNoCache(p.endB-d.from),b=h.resolve(p.start),_=g.sameParent(y)&&g.parent.inlineContent&&b.end()>=p.endA;if((L&&e.input.lastIOSEnter>Date.now()-225&&(!_||o.some((e=>"DIV"==e.nodeName||"P"==e.nodeName)))||!_&&g.pos<d.doc.content.size&&(m=r.Y1.findFrom(d.doc.resolve(g.pos+1),1,!0))&&m.head==y.pos)&&e.someProp("handleKeyDown",(t=>t(e,v(13,"Enter")))))return void(e.input.lastIOSEnter=0);if(e.state.selection.anchor>p.start&&ir(h,p.start,p.endA,g,y)&&e.someProp("handleKeyDown",(t=>t(e,v(8,"Backspace")))))return void(N&&O&&e.domObserver.suppressSelectionUpdates());O&&N&&p.endB==p.start&&(e.input.lastAndroidDelete=Date.now()),N&&!_&&g.start()!=y.start()&&0==y.parentOffset&&g.depth==y.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==p.endA&&(p.endB-=2,y=d.doc.resolveNoCache(p.endB-d.from),setTimeout((()=>{e.someProp("handleKeyDown",(function(t){return t(e,v(13,"Enter"))}))}),20));let w,x,S,E=p.start,M=p.endA;if(_)if(g.pos==y.pos)T&&C<=11&&0==g.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((()=>Xe(e)),20)),w=e.state.tr.delete(E,M),x=h.resolve(p.start).marksAcross(h.resolve(p.endA));else if(p.endA==p.endB&&(S=rr(g.parent.content.cut(g.parentOffset,y.parentOffset),b.parent.content.cut(b.parentOffset,p.endA-b.start()))))w=e.state.tr,"add"==S.type?w.addMark(E,M,S.mark):w.removeMark(E,M,S.mark);else if(g.parent.child(g.index()).isText&&g.index()==y.index()-(y.textOffset?0:1)){let t=g.parent.textBetween(g.parentOffset,y.parentOffset);if(e.someProp("handleTextInput",(n=>n(e,E,M,t))))return;w=e.state.tr.insertText(t,E,M)}if(w||(w=e.state.tr.replace(E,M,d.doc.slice(p.start-d.from,p.endB-d.from))),d.sel){let t=nr(e,w.doc,d.sel);t&&!(O&&N&&e.composing&&t.empty&&(p.start!=p.endB||e.input.lastAndroidDelete<Date.now()-100)&&(t.head==E||t.head==w.mapping.map(M)-1)||T&&t.empty&&t.head==E)&&w.setSelection(t)}x&&w.ensureMarks(x),e.composing&&w.setMeta("composition",e.input.compositionID),e.dispatch(w.scrollIntoView())}function nr(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:it(e,t.resolve(n.anchor),t.resolve(n.head))}function rr(e,t){let n,r,o,s=e.firstChild.marks,a=t.firstChild.marks,l=s,c=a;for(let i=0;i<a.length;i++)l=a[i].removeFromSet(l);for(let i=0;i<s.length;i++)c=s[i].removeFromSet(c);if(1==l.length&&0==c.length)r=l[0],n="add",o=e=>e.mark(r.addToSet(e.marks));else{if(0!=l.length||1!=c.length)return null;r=c[0],n="remove",o=e=>e.mark(r.removeFromSet(e.marks))}let u=[];for(let i=0;i<t.childCount;i++)u.push(o(t.child(i)));if(i.HY.from(u).eq(e))return{mark:r,type:n}}function ir(e,t,n,r,i){if(!r.parent.isTextblock||n-t<=i.pos-r.pos||or(r,!0,!1)<i.pos)return!1;let o=e.resolve(t);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=e.resolve(or(o,!0,!0));return!(!s.parent.isTextblock||s.pos>n||or(s,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function or(e,t,n){let r=e.depth,i=t?e.end():e.pos;while(r>0&&(t||e.indexAfter(r)==e.node(r).childCount))r--,i++,t=!1;if(n){let t=e.node(r).maybeChild(e.indexAfter(r));while(t&&!t.isLeaf)t=t.firstChild,i++}return i}function sr(e,t,n,r,i){let o=e.findDiffStart(t,n);if(null==o)return null;let{a:s,b:a}=e.findDiffEnd(t,n+e.size,n+t.size);if("end"==i){let e=Math.max(0,o-Math.min(s,a));r-=s+e-o}if(s<o&&e.size<t.size){let e=r<=o&&r>=s?o-r:0;o-=e,a=o+(a-s),s=o}else if(a<o){let e=r<=o&&r>=a?o-r:0;o-=e,s=o+(s-a),a=o}return{start:o,endA:s,endB:a}}class ar{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Ht,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(pr),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=ur(this),cr(this),this.nodeViews=hr(this),this.docView=Te(this.state.doc,lr(this),Hn(this),this.dom,this),this.domObserver=new qn(this,((e,t,n,r)=>tr(this,e,t,n,r))),this.domObserver.start(),Wt(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&qt(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(pr),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let n in this._props)t[n]=this._props[n];t.state=this.state;for(let n in e)t[n]=e[n];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){let n=this.state,r=!1,i=!1;e.storedMarks&&this.composing&&(pn(this),i=!0),this.state=e;let o=n.plugins!=e.plugins||this._props.plugins!=t.plugins;if(o||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let e=hr(this);fr(e,this.nodeViews)&&(this.nodeViews=e,r=!0)}(o||t.handleDOMEvents!=this._props.handleDOMEvents)&&qt(this),this.editable=ur(this),cr(this);let s=Hn(this),a=lr(this),l=n.plugins==e.plugins||n.doc.eq(e.doc)?e.scrollToSelection>n.scrollToSelection?"to selection":"preserve":"reset",c=r||!this.docView.matchesNode(e.doc,a,s);!c&&e.selection.eq(n.selection)||(i=!0);let u="preserve"==l&&i&&null==this.dom.style.overflowAnchor&&H(this);if(i){this.domObserver.stop();let t=c&&(T||O)&&!this.composing&&!n.selection.empty&&!e.selection.empty&&dr(n.selection,e.selection);if(c){let n=O?this.trackWrites=this.domSelectionRange().focusNode:null;!r&&this.docView.update(e.doc,a,s,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=Te(e.doc,a,s,this.dom,this)),n&&!this.trackWrites&&(t=!0)}t||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&at(this))?Xe(this,t):(nt(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(n),"reset"==l?this.dom.scrollTop=0:"to selection"==l?this.scrollToSelection():u&&G(u)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(this.someProp("handleScrollToSelection",(e=>e(this))));else if(this.state.selection instanceof r.qv){let t=this.docView.domAfterPos(this.state.selection.from);1==t.nodeType&&j(this,t.getBoundingClientRect(),e)}else j(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;while(e=this.pluginViews.pop())e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let t=0;t<this.pluginViews.length;t++){let n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let t=this.directPlugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let t=this.state.plugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}}}someProp(e,t){let n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;for(let o=0;o<this.directPlugins.length;o++){let r=this.directPlugins[o].props[e];if(null!=r&&(n=t?t(r):r))return n}let i=this.state.plugins;if(i)for(let o=0;o<i.length;o++){let r=i[o].props[e];if(null!=r&&(n=t?t(r):r))return n}}hasFocus(){if(T){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;while(e&&this.dom!=e&&this.dom.contains(e)){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Y(this.dom),Xe(this),this.domObserver.start()}get root(){let e=this._root;if(null==e)for(let t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t;return e||document}posAtCoords(e){return ne(this,e)}coordsAtPos(e,t=1){return se(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,n=-1){let r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(e,t){return ge(this,t||this.state,e)}pasteHTML(e,t){return wn(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return wn(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){this.docView&&($t(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Hn(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return null==this.docView}dispatchEvent(e){return Zt(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){return P&&11===this.root.nodeType&&y(this.dom.ownerDocument)==this.dom?Kn(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function lr(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",(n=>{if("function"==typeof n&&(n=n(e.state)),n)for(let e in n)"class"==e?t.class+=" "+n[e]:"style"==e?t.style=(t.style?t.style+";":"")+n[e]:t[e]||"contenteditable"==e||"nodeName"==e||(t[e]=String(n[e]))})),t.translate||(t.translate="no"),[An.node(0,e.state.doc.content.size,t)]}function cr(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:An.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function ur(e){return!e.someProp("editable",(t=>!1===t(e.state)))}function dr(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function hr(e){let t=Object.create(null);function n(e){for(let n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function fr(e,t){let n=0,r=0;for(let i in e){if(e[i]!=t[i])return!0;n++}for(let i in t)r++;return n!=r}function pr(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}},4731:function(e,t,n){"use strict";n.d(t,{PO:function(){return B},p7:function(){return tt}});n(7658),n(1703);var r=n(8473),i=n(4188);
/*!
  * vue-router v4.2.2
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */
const o="undefined"!==typeof window;function s(e){return e.__esModule||"Module"===e[Symbol.toStringTag]}const a=Object.assign;function l(e,t){const n={};for(const r in t){const i=t[r];n[r]=u(i)?i.map(e):e(i)}return n}const c=()=>{},u=Array.isArray;const d=/\/$/,h=e=>e.replace(d,"");function f(e,t,n="/"){let r,i={},o="",s="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=t.slice(0,l),o=t.slice(l+1,a>-1?a:t.length),i=e(o)),a>-1&&(r=r||t.slice(0,a),s=t.slice(a,t.length)),r=w(null!=r?r:t,n),{fullPath:r+(o&&"?")+o+s,path:r,query:i,hash:s}}function p(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function m(e,t){return t&&e.toLowerCase().startsWith(t.toLowerCase())?e.slice(t.length)||"/":e}function g(e,t,n){const r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&v(t.matched[r],n.matched[i])&&y(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function v(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function y(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!b(e[n],t[n]))return!1;return!0}function b(e,t){return u(e)?_(e,t):u(t)?_(t,e):e===t}function _(e,t){return u(t)?e.length===t.length&&e.every(((e,n)=>e===t[n])):1===e.length&&e[0]===t}function w(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),i=r[r.length-1];".."!==i&&"."!==i||r.push("");let o,s,a=n.length-1;for(o=0;o<r.length;o++)if(s=r[o],"."!==s){if(".."!==s)break;a>1&&a--}return n.slice(0,a).join("/")+"/"+r.slice(o-(o===r.length?1:0)).join("/")}var x,S;(function(e){e["pop"]="pop",e["push"]="push"})(x||(x={})),function(e){e["back"]="back",e["forward"]="forward",e["unknown"]=""}(S||(S={}));function E(e){if(!e)if(o){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return"/"!==e[0]&&"#"!==e[0]&&(e="/"+e),h(e)}const M=/^[^#]+#/;function T(e,t){return e.replace(M,"#")+t}function C(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const A=()=>({left:window.pageXOffset,top:window.pageYOffset});function k(e){let t;if("el"in e){const n=e.el,r="string"===typeof n&&n.startsWith("#");0;const i="string"===typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=C(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(null!=t.left?t.left:window.pageXOffset,null!=t.top?t.top:window.pageYOffset)}function O(e,t){const n=history.state?history.state.position-t:-1;return n+e}const R=new Map;function P(e,t){R.set(e,t)}function L(e){const t=R.get(e);return R.delete(e),t}let D=()=>location.protocol+"//"+location.host;function I(e,t){const{pathname:n,search:r,hash:i}=t,o=e.indexOf("#");if(o>-1){let t=i.includes(e.slice(o))?e.slice(o).length:1,n=i.slice(t);return"/"!==n[0]&&(n="/"+n),m(n,"")}const s=m(n,e);return s+r+i}function N(e,t,n,r){let i=[],o=[],s=null;const l=({state:o})=>{const a=I(e,location),l=n.value,c=t.value;let u=0;if(o){if(n.value=a,t.value=o,s&&s===l)return void(s=null);u=c?o.position-c.position:0}else r(a);i.forEach((e=>{e(n.value,l,{delta:u,type:x.pop,direction:u?u>0?S.forward:S.back:S.unknown})}))};function c(){s=n.value}function u(e){i.push(e);const t=()=>{const t=i.indexOf(e);t>-1&&i.splice(t,1)};return o.push(t),t}function d(){const{history:e}=window;e.state&&e.replaceState(a({},e.state,{scroll:A()}),"")}function h(){for(const e of o)e();o=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:c,listen:u,destroy:h}}function U(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?A():null}}function F(e){const{history:t,location:n}=window,r={value:I(e,n)},i={value:t.state};function o(r,o,s){const a=e.indexOf("#"),l=a>-1?(n.host&&document.querySelector("base")?e:e.slice(a))+r:D()+e+r;try{t[s?"replaceState":"pushState"](o,"",l),i.value=o}catch(c){console.error(c),n[s?"replace":"assign"](l)}}function s(e,n){const s=a({},t.state,U(i.value.back,e,i.value.forward,!0),n,{position:i.value.position});o(e,s,!0),r.value=e}function l(e,n){const s=a({},i.value,t.state,{forward:e,scroll:A()});o(s.current,s,!0);const l=a({},U(r.value,e,null),{position:s.position+1},n);o(e,l,!1),r.value=e}return i.value||o(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0),{location:r,state:i,push:l,replace:s}}function B(e){e=E(e);const t=F(e),n=N(e,t.state,t.location,t.replace);function r(e,t=!0){t||n.pauseListeners(),history.go(e)}const i=a({location:"",base:e,go:r,createHref:T.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function V(e){return"string"===typeof e||e&&"object"===typeof e}function z(e){return"string"===typeof e||"symbol"===typeof e}const j={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},H=Symbol("");var W;(function(e){e[e["aborted"]=4]="aborted",e[e["cancelled"]=8]="cancelled",e[e["duplicated"]=16]="duplicated"})(W||(W={}));function G(e,t){return a(new Error,{type:e,[H]:!0},t)}function $(e,t){return e instanceof Error&&H in e&&(null==t||!!(e.type&t))}const q="[^/]+?",Y={sensitive:!1,strict:!1,start:!0,end:!0},X=/[.+*?^${}()[\]/\\]/g;function Z(e,t){const n=a({},Y,t),r=[];let i=n.start?"^":"";const o=[];for(const a of e){const e=a.length?[]:[90];n.strict&&!a.length&&(i+="/");for(let t=0;t<a.length;t++){const r=a[t];let s=40+(n.sensitive?.25:0);if(0===r.type)t||(i+="/"),i+=r.value.replace(X,"\\$&"),s+=40;else if(1===r.type){const{value:e,repeatable:n,optional:l,regexp:c}=r;o.push({name:e,repeatable:n,optional:l});const u=c||q;if(u!==q){s+=10;try{new RegExp(`(${u})`)}catch(d){throw new Error(`Invalid custom RegExp for param "${e}" (${u}): `+d.message)}}let h=n?`((?:${u})(?:/(?:${u}))*)`:`(${u})`;t||(h=l&&a.length<2?`(?:/${h})`:"/"+h),l&&(h+="?"),i+=h,s+=20,l&&(s+=-8),n&&(s+=-20),".*"===u&&(s+=-50)}e.push(s)}r.push(e)}if(n.strict&&n.end){const e=r.length-1;r[e][r[e].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const s=new RegExp(i,n.sensitive?"":"i");function l(e){const t=e.match(s),n={};if(!t)return null;for(let r=1;r<t.length;r++){const e=t[r]||"",i=o[r-1];n[i.name]=e&&i.repeatable?e.split("/"):e}return n}function c(t){let n="",r=!1;for(const i of e){r&&n.endsWith("/")||(n+="/"),r=!1;for(const e of i)if(0===e.type)n+=e.value;else if(1===e.type){const{value:o,repeatable:s,optional:a}=e,l=o in t?t[o]:"";if(u(l)&&!s)throw new Error(`Provided param "${o}" is an array but it is not repeatable (* or + modifiers)`);const c=u(l)?l.join("/"):l;if(!c){if(!a)throw new Error(`Missing required param "${o}"`);i.length<2&&(n.endsWith("/")?n=n.slice(0,-1):r=!0)}n+=c}}return n||"/"}return{re:s,score:r,keys:o,parse:l,stringify:c}}function K(e,t){let n=0;while(n<e.length&&n<t.length){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?1===e.length&&80===e[0]?-1:1:e.length>t.length?1===t.length&&80===t[0]?1:-1:0}function J(e,t){let n=0;const r=e.score,i=t.score;while(n<r.length&&n<i.length){const e=K(r[n],i[n]);if(e)return e;n++}if(1===Math.abs(i.length-r.length)){if(Q(r))return 1;if(Q(i))return-1}return i.length-r.length}function Q(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const ee={type:0,value:""},te=/[a-zA-Z0-9_]/;function ne(e){if(!e)return[[]];if("/"===e)return[[ee]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(e){throw new Error(`ERR (${n})/"${c}": ${e}`)}let n=0,r=n;const i=[];let o;function s(){o&&i.push(o),o=[]}let a,l=0,c="",u="";function d(){c&&(0===n?o.push({type:0,value:c}):1===n||2===n||3===n?(o.length>1&&("*"===a||"+"===a)&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:c,regexp:u,repeatable:"*"===a||"+"===a,optional:"*"===a||"?"===a})):t("Invalid state to consume buffer"),c="")}function h(){c+=a}while(l<e.length)if(a=e[l++],"\\"!==a||2===n)switch(n){case 0:"/"===a?(c&&d(),s()):":"===a?(d(),n=1):h();break;case 4:h(),n=r;break;case 1:"("===a?n=2:te.test(a)?h():(d(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&l--);break;case 2:")"===a?"\\"==u[u.length-1]?u=u.slice(0,-1)+a:n=3:u+=a;break;case 3:d(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&l--,u="";break;default:t("Unknown state");break}else r=n,n=4;return 2===n&&t(`Unfinished custom RegExp for param "${c}"`),d(),s(),i}function re(e,t,n){const r=Z(ne(e.path),n);const i=a(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf===!t.record.aliasOf&&t.children.push(i),i}function ie(e,t){const n=[],r=new Map;function i(e){return r.get(e)}function o(e,n,r){const i=!r,l=se(e);l.aliasOf=r&&r.record;const d=ue(t,e),h=[l];if("alias"in e){const t="string"===typeof e.alias?[e.alias]:e.alias;for(const e of t)h.push(a({},l,{components:r?r.record.components:l.components,path:e,aliasOf:r?r.record:l}))}let f,p;for(const t of h){const{path:a}=t;if(n&&"/"!==a[0]){const e=n.record.path,r="/"===e[e.length-1]?"":"/";t.path=n.record.path+(a&&r+a)}if(f=re(t,n,d),r?r.alias.push(f):(p=p||f,p!==f&&p.alias.push(f),i&&e.name&&!le(f)&&s(e.name)),l.children){const e=l.children;for(let t=0;t<e.length;t++)o(e[t],f,r&&r.children[t])}r=r||f,(f.record.components&&Object.keys(f.record.components).length||f.record.name||f.record.redirect)&&u(f)}return p?()=>{s(p)}:c}function s(e){if(z(e)){const t=r.get(e);t&&(r.delete(e),n.splice(n.indexOf(t),1),t.children.forEach(s),t.alias.forEach(s))}else{const t=n.indexOf(e);t>-1&&(n.splice(t,1),e.record.name&&r.delete(e.record.name),e.children.forEach(s),e.alias.forEach(s))}}function l(){return n}function u(e){let t=0;while(t<n.length&&J(e,n[t])>=0&&(e.record.path!==n[t].record.path||!de(e,n[t])))t++;n.splice(t,0,e),e.record.name&&!le(e)&&r.set(e.record.name,e)}function d(e,t){let i,o,s,l={};if("name"in e&&e.name){if(i=r.get(e.name),!i)throw G(1,{location:e});0,s=i.record.name,l=a(oe(t.params,i.keys.filter((e=>!e.optional)).map((e=>e.name))),e.params&&oe(e.params,i.keys.map((e=>e.name)))),o=i.stringify(l)}else if("path"in e)o=e.path,i=n.find((e=>e.re.test(o))),i&&(l=i.parse(o),s=i.record.name);else{if(i=t.name?r.get(t.name):n.find((e=>e.re.test(t.path))),!i)throw G(1,{location:e,currentLocation:t});s=i.record.name,l=a({},t.params,e.params),o=i.stringify(l)}const c=[];let u=i;while(u)c.unshift(u.record),u=u.parent;return{name:s,path:o,params:l,matched:c,meta:ce(c)}}return t=ue({strict:!1,end:!0,sensitive:!1},t),e.forEach((e=>o(e))),{addRoute:o,resolve:d,removeRoute:s,getRoutes:l,getRecordMatcher:i}}function oe(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function se(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:ae(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function ae(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]="boolean"===typeof n?n:n[r];return t}function le(e){while(e){if(e.record.aliasOf)return!0;e=e.parent}return!1}function ce(e){return e.reduce(((e,t)=>a(e,t.meta)),{})}function ue(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function de(e,t){return t.children.some((t=>t===e||de(e,t)))}const he=/#/g,fe=/&/g,pe=/\//g,me=/=/g,ge=/\?/g,ve=/\+/g,ye=/%5B/g,be=/%5D/g,_e=/%5E/g,we=/%60/g,xe=/%7B/g,Se=/%7C/g,Ee=/%7D/g,Me=/%20/g;function Te(e){return encodeURI(""+e).replace(Se,"|").replace(ye,"[").replace(be,"]")}function Ce(e){return Te(e).replace(xe,"{").replace(Ee,"}").replace(_e,"^")}function Ae(e){return Te(e).replace(ve,"%2B").replace(Me,"+").replace(he,"%23").replace(fe,"%26").replace(we,"`").replace(xe,"{").replace(Ee,"}").replace(_e,"^")}function ke(e){return Ae(e).replace(me,"%3D")}function Oe(e){return Te(e).replace(he,"%23").replace(ge,"%3F")}function Re(e){return null==e?"":Oe(e).replace(pe,"%2F")}function Pe(e){try{return decodeURIComponent(""+e)}catch(t){}return""+e}function Le(e){const t={};if(""===e||"?"===e)return t;const n="?"===e[0],r=(n?e.slice(1):e).split("&");for(let i=0;i<r.length;++i){const e=r[i].replace(ve," "),n=e.indexOf("="),o=Pe(n<0?e:e.slice(0,n)),s=n<0?null:Pe(e.slice(n+1));if(o in t){let e=t[o];u(e)||(e=t[o]=[e]),e.push(s)}else t[o]=s}return t}function De(e){let t="";for(let n in e){const r=e[n];if(n=ke(n),null==r){void 0!==r&&(t+=(t.length?"&":"")+n);continue}const i=u(r)?r.map((e=>e&&Ae(e))):[r&&Ae(r)];i.forEach((e=>{void 0!==e&&(t+=(t.length?"&":"")+n,null!=e&&(t+="="+e))}))}return t}function Ie(e){const t={};for(const n in e){const r=e[n];void 0!==r&&(t[n]=u(r)?r.map((e=>null==e?null:""+e)):null==r?r:""+r)}return t}const Ne=Symbol(""),Ue=Symbol(""),Fe=Symbol(""),Be=Symbol(""),Ve=Symbol("");function ze(){let e=[];function t(t){return e.push(t),()=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function je(e,t,n,r,i){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise(((s,a)=>{const l=e=>{!1===e?a(G(4,{from:n,to:t})):e instanceof Error?a(e):V(e)?a(G(2,{from:t,to:e})):(o&&r.enterCallbacks[i]===o&&"function"===typeof e&&o.push(e),s())},c=e.call(r&&r.instances[i],t,n,l);let u=Promise.resolve(c);e.length<3&&(u=u.then(l)),u.catch((e=>a(e)))}))}function He(e,t,n,r){const i=[];for(const o of e){0;for(const e in o.components){let a=o.components[e];if("beforeRouteEnter"===t||o.instances[e])if(We(a)){const s=a.__vccOpts||a,l=s[t];l&&i.push(je(l,n,r,o,e))}else{let l=a();0,i.push((()=>l.then((i=>{if(!i)return Promise.reject(new Error(`Couldn't resolve component "${e}" at "${o.path}"`));const a=s(i)?i.default:i;o.components[e]=a;const l=a.__vccOpts||a,c=l[t];return c&&je(c,n,r,o,e)()}))))}}}return i}function We(e){return"object"===typeof e||"displayName"in e||"props"in e||"__vccOpts"in e}function Ge(e){const t=(0,r.f3)(Fe),n=(0,r.f3)(Be),o=(0,r.Fl)((()=>t.resolve((0,i.SU)(e.to)))),s=(0,r.Fl)((()=>{const{matched:e}=o.value,{length:t}=e,r=e[t-1],i=n.matched;if(!r||!i.length)return-1;const s=i.findIndex(v.bind(null,r));if(s>-1)return s;const a=Ze(e[t-2]);return t>1&&Ze(r)===a&&i[i.length-1].path!==a?i.findIndex(v.bind(null,e[t-2])):s})),a=(0,r.Fl)((()=>s.value>-1&&Xe(n.params,o.value.params))),l=(0,r.Fl)((()=>s.value>-1&&s.value===n.matched.length-1&&y(n.params,o.value.params)));function u(n={}){return Ye(n)?t[(0,i.SU)(e.replace)?"replace":"push"]((0,i.SU)(e.to)).catch(c):Promise.resolve()}return{route:o,href:(0,r.Fl)((()=>o.value.href)),isActive:a,isExactActive:l,navigate:u}}const $e=(0,r.aZ)({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Ge,setup(e,{slots:t}){const n=(0,i.qj)(Ge(e)),{options:o}=(0,r.f3)(Fe),s=(0,r.Fl)((()=>({[Ke(e.activeClass,o.linkActiveClass,"router-link-active")]:n.isActive,[Ke(e.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{const i=t.default&&t.default(n);return e.custom?i:(0,r.h)("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),qe=$e;function Ye(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&(void 0===e.button||0===e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Xe(e,t){for(const n in t){const r=t[n],i=e[n];if("string"===typeof r){if(r!==i)return!1}else if(!u(i)||i.length!==r.length||r.some(((e,t)=>e!==i[t])))return!1}return!0}function Ze(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Ke=(e,t,n)=>null!=e?e:null!=t?t:n,Je=(0,r.aZ)({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const o=(0,r.f3)(Ve),s=(0,r.Fl)((()=>e.route||o.value)),l=(0,r.f3)(Ue,0),c=(0,r.Fl)((()=>{let e=(0,i.SU)(l);const{matched:t}=s.value;let n;while((n=t[e])&&!n.components)e++;return e})),u=(0,r.Fl)((()=>s.value.matched[c.value]));(0,r.JJ)(Ue,(0,r.Fl)((()=>c.value+1))),(0,r.JJ)(Ne,u),(0,r.JJ)(Ve,s);const d=(0,i.iH)();return(0,r.YP)((()=>[d.value,u.value,e.name]),(([e,t,n],[r,i,o])=>{t&&(t.instances[n]=e,i&&i!==t&&e&&e===r&&(t.leaveGuards.size||(t.leaveGuards=i.leaveGuards),t.updateGuards.size||(t.updateGuards=i.updateGuards))),!e||!t||i&&v(t,i)&&r||(t.enterCallbacks[n]||[]).forEach((t=>t(e)))}),{flush:"post"}),()=>{const i=s.value,o=e.name,l=u.value,c=l&&l.components[o];if(!c)return Qe(n.default,{Component:c,route:i});const h=l.props[o],f=h?!0===h?i.params:"function"===typeof h?h(i):h:null,p=e=>{e.component.isUnmounted&&(l.instances[o]=null)},m=(0,r.h)(c,a({},f,t,{onVnodeUnmounted:p,ref:d}));return Qe(n.default,{Component:m,route:i})||m}}});function Qe(e,t){if(!e)return null;const n=e(t);return 1===n.length?n[0]:n}const et=Je;function tt(e){const t=ie(e.routes,e),n=e.parseQuery||Le,s=e.stringifyQuery||De,d=e.history;const h=ze(),m=ze(),v=ze(),y=(0,i.XI)(j);let b=j;o&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const _=l.bind(null,(e=>""+e)),w=l.bind(null,Re),S=l.bind(null,Pe);function E(e,n){let r,i;return z(e)?(r=t.getRecordMatcher(e),i=n):i=e,t.addRoute(i,r)}function M(e){const n=t.getRecordMatcher(e);n&&t.removeRoute(n)}function T(){return t.getRoutes().map((e=>e.record))}function C(e){return!!t.getRecordMatcher(e)}function R(e,r){if(r=a({},r||y.value),"string"===typeof e){const i=f(n,e,r.path),o=t.resolve({path:i.path},r),s=d.createHref(i.fullPath);return a(i,o,{params:S(o.params),hash:Pe(i.hash),redirectedFrom:void 0,href:s})}let i;if("path"in e)i=a({},e,{path:f(n,e.path,r.path).path});else{const t=a({},e.params);for(const e in t)null==t[e]&&delete t[e];i=a({},e,{params:w(t)}),r.params=w(r.params)}const o=t.resolve(i,r),l=e.hash||"";o.params=_(S(o.params));const c=p(s,a({},e,{hash:Ce(l),path:o.path})),u=d.createHref(c);return a({fullPath:c,hash:l,query:s===De?Ie(e.query):e.query||{}},o,{redirectedFrom:void 0,href:u})}function D(e){return"string"===typeof e?f(n,e,y.value.path):a({},e)}function I(e,t){if(b!==e)return G(8,{from:t,to:e})}function N(e){return B(e)}function U(e){return N(a(D(e),{replace:!0}))}function F(e){const t=e.matched[e.matched.length-1];if(t&&t.redirect){const{redirect:n}=t;let r="function"===typeof n?n(e):n;return"string"===typeof r&&(r=r.includes("?")||r.includes("#")?r=D(r):{path:r},r.params={}),a({query:e.query,hash:e.hash,params:"path"in r?{}:e.params},r)}}function B(e,t){const n=b=R(e),r=y.value,i=e.state,o=e.force,l=!0===e.replace,c=F(n);if(c)return B(a(D(c),{state:"object"===typeof c?a({},i,c.state):i,force:o,replace:l}),t||n);const u=n;let d;return u.redirectedFrom=t,!o&&g(s,r,n)&&(d=G(16,{to:u,from:r}),re(r,r,!0,!1)),(d?Promise.resolve(d):W(u,r)).catch((e=>$(e)?$(e,2)?e:ne(e):ee(e,u,r))).then((e=>{if(e){if($(e,2))return B(a({replace:l},D(e.to),{state:"object"===typeof e.to?a({},i,e.to.state):i,force:o}),t||u)}else e=Y(u,r,!0,l,i);return q(u,r,e),e}))}function V(e,t){const n=I(e,t);return n?Promise.reject(n):Promise.resolve()}function H(e){const t=ae.values().next().value;return t&&"function"===typeof t.runWithContext?t.runWithContext(e):e()}function W(e,t){let n;const[r,i,o]=nt(e,t);n=He(r.reverse(),"beforeRouteLeave",e,t);for(const a of r)a.leaveGuards.forEach((r=>{n.push(je(r,e,t))}));const s=V.bind(null,e,t);return n.push(s),ce(n).then((()=>{n=[];for(const r of h.list())n.push(je(r,e,t));return n.push(s),ce(n)})).then((()=>{n=He(i,"beforeRouteUpdate",e,t);for(const r of i)r.updateGuards.forEach((r=>{n.push(je(r,e,t))}));return n.push(s),ce(n)})).then((()=>{n=[];for(const r of e.matched)if(r.beforeEnter&&!t.matched.includes(r))if(u(r.beforeEnter))for(const i of r.beforeEnter)n.push(je(i,e,t));else n.push(je(r.beforeEnter,e,t));return n.push(s),ce(n)})).then((()=>(e.matched.forEach((e=>e.enterCallbacks={})),n=He(o,"beforeRouteEnter",e,t),n.push(s),ce(n)))).then((()=>{n=[];for(const r of m.list())n.push(je(r,e,t));return n.push(s),ce(n)})).catch((e=>$(e,8)?e:Promise.reject(e)))}function q(e,t,n){for(const r of v.list())H((()=>r(e,t,n)))}function Y(e,t,n,r,i){const s=I(e,t);if(s)return s;const l=t===j,c=o?history.state:{};n&&(r||l?d.replace(e.fullPath,a({scroll:l&&c&&c.scroll},i)):d.push(e.fullPath,i)),y.value=e,re(e,t,n,l),ne()}let X;function Z(){X||(X=d.listen(((e,t,n)=>{if(!le.listening)return;const r=R(e),i=F(r);if(i)return void B(a(i,{replace:!0}),r).catch(c);b=r;const s=y.value;o&&P(O(s.fullPath,n.delta),A()),W(r,s).catch((e=>$(e,12)?e:$(e,2)?(B(e.to,r).then((e=>{$(e,20)&&!n.delta&&n.type===x.pop&&d.go(-1,!1)})).catch(c),Promise.reject()):(n.delta&&d.go(-n.delta,!1),ee(e,r,s)))).then((e=>{e=e||Y(r,s,!1),e&&(n.delta&&!$(e,8)?d.go(-n.delta,!1):n.type===x.pop&&$(e,20)&&d.go(-1,!1)),q(r,s,e)})).catch(c)})))}let K,J=ze(),Q=ze();function ee(e,t,n){ne(e);const r=Q.list();return r.length?r.forEach((r=>r(e,t,n))):console.error(e),Promise.reject(e)}function te(){return K&&y.value!==j?Promise.resolve():new Promise(((e,t)=>{J.add([e,t])}))}function ne(e){return K||(K=!e,Z(),J.list().forEach((([t,n])=>e?n(e):t())),J.reset()),e}function re(t,n,i,s){const{scrollBehavior:a}=e;if(!o||!a)return Promise.resolve();const l=!i&&L(O(t.fullPath,0))||(s||!i)&&history.state&&history.state.scroll||null;return(0,r.Y3)().then((()=>a(t,n,l))).then((e=>e&&k(e))).catch((e=>ee(e,t,n)))}const oe=e=>d.go(e);let se;const ae=new Set,le={currentRoute:y,listening:!0,addRoute:E,removeRoute:M,hasRoute:C,getRoutes:T,resolve:R,options:e,push:N,replace:U,go:oe,back:()=>oe(-1),forward:()=>oe(1),beforeEach:h.add,beforeResolve:m.add,afterEach:v.add,onError:Q.add,isReady:te,install(e){const t=this;e.component("RouterLink",qe),e.component("RouterView",et),e.config.globalProperties.$router=t,Object.defineProperty(e.config.globalProperties,"$route",{enumerable:!0,get:()=>(0,i.SU)(y)}),o&&!se&&y.value===j&&(se=!0,N(d.location).catch((e=>{0})));const n={};for(const i in j)n[i]=(0,r.Fl)((()=>y.value[i]));e.provide(Fe,t),e.provide(Be,(0,i.qj)(n)),e.provide(Ve,y);const s=e.unmount;ae.add(e),e.unmount=function(){ae.delete(e),ae.size<1&&(b=j,X&&X(),X=null,y.value=j,se=!1,K=!1),s()}}};function ce(e){return e.reduce(((e,t)=>e.then((()=>H(t)))),Promise.resolve())}return le}function nt(e,t){const n=[],r=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let s=0;s<o;s++){const o=t.matched[s];o&&(e.matched.find((e=>v(e,o)))?r.push(o):n.push(o));const a=e.matched[s];a&&(t.matched.find((e=>v(e,a)))||i.push(a))}return[n,r,i]}},3696:function(e,t,n){"use strict";n.d(t,{H7:function(){return O}});var r=n(7974),i=(n(1703),n(2296)),o=n(1755);const s=e=>i.Ue(((t,n)=>{e.onerror=e=>n(new Error(e.target.error)),e.onsuccess=e=>t(e.target.result)})),a=(e,t)=>i.Ue(((n,r)=>{const i=indexedDB.open(e);i.onupgradeneeded=e=>t(e.target.result),i.onerror=e=>r(o.Ue(e.target.error)),i.onsuccess=e=>{const t=e.target.result;t.onversionchange=()=>{t.close()},"undefined"!==typeof addEventListener&&addEventListener("unload",(()=>t.close())),n(t)}})),l=e=>s(indexedDB.deleteDatabase(e)),c=(e,t)=>t.forEach((t=>e.createObjectStore.apply(e,t))),u=(e,t,n="readwrite")=>{const r=e.transaction(t,n);return t.map((e=>w(r,e)))},d=(e,t)=>s(e.count(t)),h=(e,t)=>s(e.get(t)),f=(e,t)=>s(e.delete(t)),p=(e,t,n)=>s(e.put(t,n)),m=(e,t)=>s(e.add(t)),g=(e,t,n)=>s(e.getAll(t,n)),v=(e,t,n)=>{let r=null;return _(e,t,(e=>(r=e,!1)),n).then((()=>r))},y=(e,t=null)=>v(e,t,"prev"),b=(e,t)=>i.Ue(((n,r)=>{e.onerror=r,e.onsuccess=async e=>{const r=e.target.result;if(null===r||!1===await t(r))return n();r.continue()}})),_=(e,t,n,r="next")=>b(e.openKeyCursor(t,r),(e=>n(e.key))),w=(e,t)=>e.objectStore(t),x=(e,t)=>IDBKeyRange.upperBound(e,t),S=(e,t)=>IDBKeyRange.lowerBound(e,t);var E=n(3837);const M="custom",T="updates",C=500,A=(e,t=(()=>{}),n=(()=>{}))=>{const[i]=u(e.db,[T]);return g(i,S(e._dbref,!1)).then((o=>{e._destroyed||(t(i),r.ay(e.doc,(()=>{o.forEach((t=>r.NG(e.doc,t)))}),e,!1),n(i))})).then((()=>y(i).then((t=>{e._dbref=t+1})))).then((()=>d(i).then((t=>{e._dbsize=t})))).then((()=>i))},k=(e,t=!0)=>A(e).then((n=>{(t||e._dbsize>=C)&&m(n,r.D$(e.doc)).then((()=>f(n,x(e._dbref,!0)))).then((()=>d(n).then((t=>{e._dbsize=t}))))}));class O extends E.y{constructor(e,t){super(),this.doc=t,this.name=e,this._dbref=0,this._dbsize=0,this._destroyed=!1,this.db=null,this.synced=!1,this._db=a(e,(e=>c(e,[["updates",{autoIncrement:!0}],["custom"]]))),this.whenSynced=i.Ue((e=>this.on("synced",(()=>e(this))))),this._db.then((e=>{this.db=e;const n=e=>m(e,r.D$(t)),i=()=>{if(this._destroyed)return this;this.synced=!0,this.emit("synced",[this])};A(this,n,i)})),this._storeTimeout=1e3,this._storeTimeoutId=null,this._storeUpdate=(e,t)=>{if(this.db&&t!==this){const[t]=u(this.db,[T]);m(t,e),++this._dbsize>=C&&(null!==this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this._storeTimeoutId=setTimeout((()=>{k(this,!1),this._storeTimeoutId=null}),this._storeTimeout))}},t.on("update",this._storeUpdate),this.destroy=this.destroy.bind(this),t.on("destroy",this.destroy)}destroy(){return this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this.doc.off("update",this._storeUpdate),this.doc.off("destroy",this.destroy),this._destroyed=!0,this._db.then((e=>{e.close()}))}clearData(){return this.destroy().then((()=>{l(this.name)}))}get(e){return this._db.then((t=>{const[n]=u(t,[M],"readonly");return h(n,e)}))}set(e,t){return this._db.then((n=>{const[r]=u(n,[M]);return p(r,t,e)}))}del(e){return this._db.then((t=>{const[n]=u(t,[M]);return f(n,e)}))}}},9087:function(e,t,n){"use strict";n.d(t,{JR:function(){return d},SF:function(){return f},US:function(){return u}});var r=n(4714),i=n(7974),o=n(1755),s=n(7793),a=n(9765);let l=null;const c=()=>{const e=l;l=null,e.forEach(((e,t)=>{const n=t.state.tr,i=r.Gt.getState(t.state);i&&i.binding&&!i.binding.isDestroyed&&(e.forEach(((e,t)=>{n.setMeta(t,e)})),t.dispatch(n))}))},u=(e,t,n)=>{l||(l=new Map,a.Vs(0,c)),s.Yu(l,e,s.Ue).set(t,n)},d=(e,t,n)=>{if(0===e)return i.w$(t,0);let r=null===t._first?null:t._first.content.type;while(null!==r&&t!==r){if(r instanceof i.eI){if(r._length>=e)return i.w$(r,e);if(e-=r._length,null!==r._item&&null!==r._item.next)r=r._item.next.content.type;else{do{r=null===r._item?null:r._item.parent,e--}while(r!==t&&null!==r&&null!==r._item&&null===r._item.next);null!==r&&r!==t&&(r=null===r._item?null:r._item.next.content.type)}}else{const o=(n.get(r)||{nodeSize:0}).nodeSize;if(null!==r._first&&e<o)r=r._first.content.type,e--;else{if(1===e&&0===r._length&&o>1)return new i.Zi(null===r._item?null:r._item.id,null===r._item?i.BW(r):null,null);if(e-=o,null!==r._item&&null!==r._item.next)r=r._item.next.content.type;else{if(0===e)return r=null===r._item?r:r._item.parent,new i.Zi(null===r._item?null:r._item.id,null===r._item?i.BW(r):null,null);do{r=r._item.parent,e--}while(r!==t&&null===r._item.next);r!==t&&(r=r._item.next.content.type)}}}if(null===r)throw o.zR();if(0===e&&r.constructor!==i.eI&&r!==t)return h(r._item.parent,r._item)}return i.w$(t,t._length)},h=(e,t)=>{let n=null,r=null;return null===e._item?r=i.BW(e):n=i.at(e._item.id.client,e._item.id.clock),new i.Zi(n,r,t.id)},f=(e,t,n,r)=>{const o=i.or(n,e);if(null===o||o.type!==t&&!i.$4(t,o.type._item))return null;let s=o.type,a=0;if(s.constructor===i.eI)a=o.index;else if(null===s._item||!s._item.deleted){let e=s._first,t=0;while(t<s._length&&t<o.index&&null!==e){if(!e.deleted){const n=e.content.type;t++,n instanceof i.eI?a+=n._length:a+=r.get(n).nodeSize}e=e.right}a+=1}while(s!==t&&null!==s._item){const e=s._item.parent;if(null===e._item||!e._item.deleted){a+=1;let t=e._first;while(null!==t){const e=t.content.type;if(e===s)break;t.deleted||(e instanceof i.eI?a+=e._length:a+=r.get(e).nodeSize),t=t.right}}s=e}return a-1}},4714:function(e,t,n){"use strict";n.d(t,{Gk:function(){return o},Gt:function(){return i},uJ:function(){return s}});var r=n(1418);const i=new r.H$("y-sync"),o=new r.H$("y-undo"),s=new r.H$("yjs-cursor")},2405:function(e,t,n){"use strict";n.d(t,{Ag:function(){return d},GL:function(){return u},oy:function(){return f},xq:function(){return h}});n(7658);var r=n(4251),i=n(4805),o=n(9514),s=n(3035),a=n(3837),l=n(3918);const c=3e4;class u extends a.y{constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval((()=>{const e=o.ZG();null!==this.getLocalState()&&c/2<=e-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const t=[];this.meta.forEach(((n,r)=>{r!==this.clientID&&c<=e-n.lastUpdated&&this.states.has(r)&&t.push(r)})),t.length>0&&d(this,t,"timeout")}),s.GW(c/10)),e.on("destroy",(()=>{this.destroy()})),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){const t=this.clientID,n=this.meta.get(t),r=void 0===n?0:n.clock+1,i=this.states.get(t);null===e?this.states.delete(t):this.states.set(t,e),this.meta.set(t,{clock:r,lastUpdated:o.ZG()});const s=[],a=[],c=[],u=[];null===e?u.push(t):null==i?null!=e&&s.push(t):(a.push(t),l.Hi(i,e)||c.push(t)),(s.length>0||c.length>0||u.length>0)&&this.emit("change",[{added:s,updated:c,removed:u},"local"]),this.emit("update",[{added:s,updated:a,removed:u},"local"])}setLocalStateField(e,t){const n=this.getLocalState();null!==n&&this.setLocalState({...n,[e]:t})}getStates(){return this.states}}const d=(e,t,n)=>{const r=[];for(let i=0;i<t.length;i++){const n=t[i];if(e.states.has(n)){if(e.states.delete(n),n===e.clientID){const t=e.meta.get(n);e.meta.set(n,{clock:t.clock+1,lastUpdated:o.ZG()})}r.push(n)}}r.length>0&&(e.emit("change",[{added:[],updated:[],removed:r},n]),e.emit("update",[{added:[],updated:[],removed:r},n]))},h=(e,t,n=e.states)=>{const i=t.length,o=r.Mf();r.uE(o,i);for(let s=0;s<i;s++){const i=t[s],a=n.get(i)||null,l=e.meta.get(i).clock;r.uE(o,i),r.uE(o,l),r.uw(o,JSON.stringify(a))}return r._f(o)},f=(e,t,n)=>{const r=i.l1(t),s=o.ZG(),a=[],c=[],u=[],d=[],h=i.yg(r);for(let o=0;o<h;o++){const t=i.yg(r);let n=i.yg(r);const o=JSON.parse(i.kf(r)),h=e.meta.get(t),f=e.states.get(t),p=void 0===h?0:h.clock;(p<n||p===n&&null===o&&e.states.has(t))&&(null===o?t===e.clientID&&null!=e.getLocalState()?n++:e.states.delete(t):e.states.set(t,o),e.meta.set(t,{clock:n,lastUpdated:s}),void 0===h&&null!==o?a.push(t):void 0!==h&&null===o?d.push(t):null!==o&&(l.Hi(o,f)||u.push(t),c.push(t)))}(a.length>0||u.length>0||d.length>0)&&e.emit("change",[{added:a,updated:u,removed:d},n]),(a.length>0||c.length>0||d.length>0)&&e.emit("update",[{added:a,updated:c,removed:d},n])}},3428:function(e,t,n){"use strict";n.d(t,{K0:function(){return u},Px:function(){return a},Wh:function(){return s},_J:function(){return c},lr:function(){return f},zu:function(){return m}});n(1703);var r=n(4251),i=n(4805),o=n(7974);const s=0,a=1,l=2,c=(e,t)=>{r.uE(e,s);const n=o.gJ(t);r.mP(e,n)},u=(e,t,n)=>{r.uE(e,a),r.mP(e,o.D$(t,n))},d=(e,t,n)=>u(t,n,i.HN(e)),h=(e,t,n)=>{try{o.NG(t,i.HN(e),n)}catch(r){console.error("Caught error while handling a Yjs update",r)}},f=(e,t)=>{r.uE(e,l),r.mP(e,t)},p=h,m=(e,t,n,r)=>{const o=i.yg(e);switch(o){case s:d(e,t,n);break;case a:h(e,n,r);break;case l:p(e,n,r);break;default:throw new Error("Unknown message type")}return o}},8363:function(e,t,n){"use strict";n.d(t,{x$:function(){return J}});n(7658),n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315);var r=n(3837),i=n(9514),o=n(3035);const s=1200,a=2500,l=3e4,c=e=>{if(e.shouldConnect&&null===e.ws){const t=new WebSocket(e.url),n=e.binaryType;let r=null;n&&(t.binaryType=n),e.ws=t,e.connecting=!0,e.connected=!1,t.onmessage=t=>{e.lastMessageReceived=i.ZG();const n=t.data,o="string"===typeof n?JSON.parse(n):n;o&&"pong"===o.type&&(clearTimeout(r),r=setTimeout(d,l/2)),e.emit("message",[o,e])};const u=t=>{null!==e.ws&&(e.ws=null,e.connecting=!1,e.connected?(e.connected=!1,e.emit("disconnect",[{type:"disconnect",error:t},e])):e.unsuccessfulReconnects++,setTimeout(c,o.VV(o.mv(e.unsuccessfulReconnects+1)*s,a),e)),clearTimeout(r)},d=()=>{e.ws===t&&e.send({type:"ping"})};t.onclose=()=>u(null),t.onerror=e=>u(e),t.onopen=()=>{e.lastMessageReceived=i.ZG(),e.connecting=!1,e.connected=!0,e.unsuccessfulReconnects=0,e.emit("connect",[{type:"connect"},e]),r=setTimeout(d,l/2)}}};class u extends r.y{constructor(e,{binaryType:t}={}){super(),this.url=e,this.ws=null,this.binaryType=t||null,this.connected=!1,this.connecting=!1,this.unsuccessfulReconnects=0,this.lastMessageReceived=0,this.shouldConnect=!0,this._checkInterval=setInterval((()=>{this.connected&&l<i.ZG()-this.lastMessageReceived&&this.ws.close()}),l/2),c(this)}send(e){this.ws&&this.ws.send(JSON.stringify(e))}destroy(){clearInterval(this._checkInterval),this.disconnect(),super.destroy()}disconnect(){this.shouldConnect=!1,null!==this.ws&&this.ws.close()}connect(){this.shouldConnect=!0,this.connected||null!==this.ws||c(this)}}var d=n(7793),h=n(1755),f=n(3751),p=n(4251),m=n(4805),g=n(311),v=n(1886),y=n(2296),b=n(2428),_=n(4606),w=n(5611),x=n(8305),S=n(3428),E=n(2405),M=n(6003);const T=(e,t)=>{const n=M.lz(e).buffer,r=M.lz(t).buffer;return crypto.subtle.importKey("raw",n,"PBKDF2",!1,["deriveKey"]).then((e=>crypto.subtle.deriveKey({name:"PBKDF2",salt:r,iterations:1e5,hash:"SHA-256"},e,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])))},C=(e,t)=>{if(!t)return y.DB(e);const n=crypto.getRandomValues(new Uint8Array(12));return crypto.subtle.encrypt({name:"AES-GCM",iv:n},t,e).then((e=>{const t=p.Mf();return p.uw(t,"AES-GCM"),p.mP(t,n),p.mP(t,new Uint8Array(e)),p._f(t)}))},A=(e,t)=>{const n=p.Mf();return p.EM(n,e),C(p._f(n),t)},k=(e,t)=>{if(!t)return y.DB(e);const n=m.l1(e),r=m.kf(n);"AES-GCM"!==r&&y.d1(h.Ue("Unknown encryption algorithm"));const i=m.HN(n),o=m.HN(n);return crypto.subtle.decrypt({name:"AES-GCM",iv:i},t,o).then((e=>new Uint8Array(e)))},O=(e,t)=>k(e,t).then((e=>m.v_(m.l1(new Uint8Array(e))))),R=g.YX("y-webrtc"),P=0,L=3,D=1,I=4,N=new Map,U=new Map,F=e=>{let t=!0;e.webrtcConns.forEach((e=>{e.synced||(t=!1)})),(!t&&e.synced||t&&!e.synced)&&(e.synced=t,e.provider.emit("synced",[{synced:t}]),R("synced ",v.Pl,e.name,v.YW," with all peers"))},B=(e,t,n)=>{const r=m.l1(t),i=p.Mf(),o=m.yg(r);if(void 0===e)return null;const s=e.awareness,a=e.doc;let l=!1;switch(o){case P:{p.uE(i,P);const t=S.zu(r,i,a,e);t!==S.Px||e.synced||n(),t===S.Wh&&(l=!0);break}case L:p.uE(i,D),p.mP(i,E.xq(s,Array.from(s.getStates().keys()))),l=!0;break;case D:E.oy(s,m.HN(r),e);break;case I:{const t=1===m.kj(r),n=m.kf(r);if(n!==e.peerId&&(e.bcConns.has(n)&&!t||!e.bcConns.has(n)&&t)){const r=[],i=[];t?(e.bcConns.add(n),i.push(n)):(e.bcConns.delete(n),r.push(n)),e.provider.emit("peers",[{added:i,removed:r,webrtcPeers:Array.from(e.webrtcConns.keys()),bcPeers:Array.from(e.bcConns)}]),q(e)}break}default:return console.error("Unable to compute message"),i}return l?i:null},V=(e,t)=>{const n=e.room;return R("received message from ",v.Pl,e.remotePeerId,v.s7," (",n.name,")",v.YW,v.WO),B(n,t,(()=>{e.synced=!0,R("synced ",v.Pl,n.name,v.YW," with ",v.Pl,e.remotePeerId),F(n)}))},z=(e,t)=>{R("send message to ",v.Pl,e.remotePeerId,v.YW,v.s7," (",e.room.name,")",v.WO);try{e.peer.send(p._f(t))}catch(n){}},j=(e,t)=>{R("broadcast message in ",v.Pl,e.name,v.YW),e.webrtcConns.forEach((e=>{try{e.peer.send(t)}catch(n){}}))};class H{constructor(e,t,n,r){R("establishing connection to ",v.Pl,n),this.room=r,this.remotePeerId=n,this.closed=!1,this.connected=!1,this.synced=!1,this.peer=new x({initiator:t,...r.provider.peerOpts}),this.peer.on("signal",(t=>{Z(e,r,{to:n,from:r.peerId,type:"signal",signal:t})})),this.peer.on("connect",(()=>{R("connected to ",v.Pl,n),this.connected=!0;const e=r.provider,t=e.doc,i=r.awareness,o=p.Mf();p.uE(o,P),S._J(o,t),z(this,o);const s=i.getStates();if(s.size>0){const e=p.Mf();p.uE(e,D),p.mP(e,E.xq(i,Array.from(s.keys()))),z(this,e)}})),this.peer.on("close",(()=>{this.connected=!1,this.closed=!0,r.webrtcConns.has(this.remotePeerId)&&(r.webrtcConns.delete(this.remotePeerId),r.provider.emit("peers",[{removed:[this.remotePeerId],added:[],webrtcPeers:Array.from(r.webrtcConns.keys()),bcPeers:Array.from(r.bcConns)}])),F(r),this.peer.destroy(),R("closed connection to ",v.Pl,n),$(r)})),this.peer.on("error",(e=>{R("Error in connection to ",v.Pl,n,": ",e),$(r)})),this.peer.on("data",(e=>{const t=V(this,e);null!==t&&z(this,t)}))}destroy(){this.peer.destroy()}}const W=(e,t)=>C(t,e.key).then((t=>e.mux((()=>b.nY(e.name,t))))),G=(e,t)=>{e.bcconnected&&W(e,t),j(e,t)},$=e=>{N.forEach((t=>{t.connected&&(t.send({type:"subscribe",topics:[e.name]}),e.webrtcConns.size<e.provider.maxConns&&Z(t,e,{type:"announce",from:e.peerId}))}))},q=e=>{if(e.provider.filterBcConns){const t=p.Mf();p.uE(t,I),p.$F(t,1),p.uw(t,e.peerId),W(e,p._f(t))}};class Y{constructor(e,t,n,r){this.peerId=f.k$(),this.doc=e,this.awareness=t.awareness,this.provider=t,this.synced=!1,this.name=n,this.key=r,this.webrtcConns=new Map,this.bcConns=new Set,this.mux=(0,w.M)(),this.bcconnected=!1,this._bcSubscriber=e=>k(new Uint8Array(e),r).then((e=>this.mux((()=>{const t=B(this,e,(()=>{}));t&&W(this,p._f(t))})))),this._docUpdateHandler=(e,t)=>{const n=p.Mf();p.uE(n,P),S.lr(n,e),G(this,p._f(n))},this._awarenessUpdateHandler=({added:e,updated:t,removed:n},r)=>{const i=e.concat(t).concat(n),o=p.Mf();p.uE(o,D),p.mP(o,E.xq(this.awareness,i)),G(this,p._f(o))},this._beforeUnloadHandler=()=>{E.Ag(this.awareness,[e.clientID],"window unload"),U.forEach((e=>{e.disconnect()}))},"undefined"!==typeof window?window.addEventListener("beforeunload",this._beforeUnloadHandler):"undefined"!==typeof process&&process.on("exit",this._beforeUnloadHandler)}connect(){this.doc.on("update",this._docUpdateHandler),this.awareness.on("update",this._awarenessUpdateHandler),$(this);const e=this.name;b.Ld(e,this._bcSubscriber),this.bcconnected=!0,q(this);const t=p.Mf();p.uE(t,P),S._J(t,this.doc),W(this,p._f(t));const n=p.Mf();p.uE(n,P),S.K0(n,this.doc),W(this,p._f(n));const r=p.Mf();p.uE(r,L),W(this,p._f(r));const i=p.Mf();p.uE(i,D),p.mP(i,E.xq(this.awareness,[this.doc.clientID])),W(this,p._f(i))}disconnect(){N.forEach((e=>{e.connected&&e.send({type:"unsubscribe",topics:[this.name]})})),E.Ag(this.awareness,[this.doc.clientID],"disconnect");const e=p.Mf();p.uE(e,I),p.$F(e,0),p.uw(e,this.peerId),W(this,p._f(e)),b.r1(this.name,this._bcSubscriber),this.bcconnected=!1,this.doc.off("update",this._docUpdateHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.webrtcConns.forEach((e=>e.destroy()))}destroy(){this.disconnect(),"undefined"!==typeof window?window.removeEventListener("beforeunload",this._beforeUnloadHandler):"undefined"!==typeof process&&process.off("exit",this._beforeUnloadHandler)}}const X=(e,t,n,r)=>{if(U.has(n))throw h.Ue(`A Yjs Doc connected to room "${n}" already exists!`);const i=new Y(e,t,n,r);return U.set(n,i),i},Z=(e,t,n)=>{t.key?A(n,t.key).then((n=>{e.send({type:"publish",topic:t.name,data:_.s3(n)})})):e.send({type:"publish",topic:t.name,data:n})};class K extends u{constructor(e){super(e),this.providers=new Set,this.on("connect",(()=>{R(`connected (${e})`);const t=Array.from(U.keys());this.send({type:"subscribe",topics:t}),U.forEach((e=>Z(this,e,{type:"announce",from:e.peerId})))})),this.on("message",(e=>{switch(e.type){case"publish":{const t=e.topic,n=U.get(t);if(null==n||"string"!==typeof t)return;const r=e=>{const t=n.webrtcConns,r=n.peerId;if(null==e||e.from===r||void 0!==e.to&&e.to!==r||n.bcConns.has(e.from))return;const i=t.has(e.from)?()=>{}:()=>n.provider.emit("peers",[{removed:[],added:[e.from],webrtcPeers:Array.from(n.webrtcConns.keys()),bcPeers:Array.from(n.bcConns)}]);switch(e.type){case"announce":t.size<n.provider.maxConns&&(d.Yu(t,e.from,(()=>new H(this,!0,e.from,n))),i());break;case"signal":e.to===r&&(d.Yu(t,e.from,(()=>new H(this,!1,e.from,n))).peer.signal(e.signal),i());break}};n.key?"string"===typeof e.data&&O(_.Gh(e.data),n.key).then(r):r(e.data)}}})),this.on("disconnect",(()=>R(`disconnect (${e})`)))}}class J extends r.y{constructor(e,t,{signaling:n=["wss://y-webrtc-eu.fly.dev"],password:r=null,awareness:i=new E.GL(t),maxConns:s=20+o.GW(15*f.TN()),filterBcConns:a=!0,peerOpts:l={}}={}){super(),this.roomName=e,this.doc=t,this.filterBcConns=a,this.awareness=i,this.shouldConnect=!1,this.signalingUrls=n,this.signalingConns=[],this.maxConns=s,this.peerOpts=l,this.key=r?T(r,e):y.DB(null),this.room=null,this.key.then((n=>{this.room=X(t,this,e,n),this.shouldConnect?this.room.connect():this.room.disconnect()})),this.connect(),this.destroy=this.destroy.bind(this),t.on("destroy",this.destroy)}get connected(){return null!==this.room&&this.shouldConnect}connect(){this.shouldConnect=!0,this.signalingUrls.forEach((e=>{const t=d.Yu(N,e,(()=>new K(e)));this.signalingConns.push(t),t.providers.add(this)})),this.room&&this.room.connect()}disconnect(){this.shouldConnect=!1,this.signalingConns.forEach((e=>{e.providers.delete(this),0===e.providers.size&&(e.destroy(),N.delete(e.url))})),this.room&&this.room.disconnect()}destroy(){this.doc.off("destroy",this.destroy),this.key.then((()=>{this.room.destroy(),U.delete(this.roomName)})),super.destroy()}}},7974:function(e,t,n){"use strict";n.d(t,{QP:function(){return Mt},mJ:function(){return Gt},MM:function(){return Un},$_:function(){return Hn},zc:function(){return Qn},QW:function(){return U},GC:function(){return Cn},ck:function(){return sr},D5:function(){return Yt},Zi:function(){return be},aC:function(){return Ce},xv:function(){return fn},H6:function(){return tt},lt:function(){return yn},sI:function(){return gn},yP:function(){return wn},eI:function(){return Sn},NG:function(){return Q},Uq:function(){return Te},or:function(){return Me},VG:function(){return R},at:function(){return ge},og:function(){return _e},w$:function(){return Ee},Ox:function(){return Ae},D$:function(){return ne},gJ:function(){return le},g4:function(){return Ne},BW:function(){return ve},uY:function(){return C},$4:function(){return ye},UQ:function(){return M},CO:function(){return ke},ay:function(){return Ke},ud:function(){return At}});n(7658),n(1703),n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315);var r=n(3837),i=n(9471),o=n(3035),s=n(7793),a=n(4251),l=n(4805),c=n(3751),u=n(2296),d=n(4606),h=n(1755),f=n(547),p=n(3918),m=n(8674),g=n(311),v=n(1886),y=n(9514);const b=e=>({[Symbol.iterator](){return this},next:e}),_=(e,t)=>b((()=>{let n;do{n=e.next()}while(!n.done&&!t(n.value));return n})),w=(e,t)=>b((()=>{const{done:n,value:r}=e.next();return{done:n,value:n?void 0:t(r)}}));var x=n(3913);class S{constructor(e,t){this.clock=e,this.len=t}}class E{constructor(){this.clients=new Map}}const M=(e,t,n)=>t.clients.forEach(((t,r)=>{const i=e.doc.store.clients.get(r);for(let o=0;o<t.length;o++){const r=t[o];He(e,i,r.clock,r.len,n)}})),T=(e,t)=>{let n=0,r=e.length-1;while(n<=r){const i=o.GW((n+r)/2),s=e[i],a=s.clock;if(a<=t){if(t<a+s.len)return i;n=i+1}else r=i-1}return null},C=(e,t)=>{const n=e.clients.get(t.client);return void 0!==n&&null!==T(n,t.clock)},A=e=>{e.clients.forEach((e=>{let t,n;for(e.sort(((e,t)=>e.clock-t.clock)),t=1,n=1;t<e.length;t++){const r=e[n-1],i=e[t];r.clock+r.len>=i.clock?r.len=o.Fp(r.len,i.clock+i.len-r.clock):(n<t&&(e[n]=i),n++)}e.length=n}))},k=e=>{const t=new E;for(let n=0;n<e.length;n++)e[n].clients.forEach(((r,o)=>{if(!t.clients.has(o)){const s=r.slice();for(let t=n+1;t<e.length;t++)i.s7(s,e[t].clients.get(o)||[]);t.clients.set(o,s)}}));return A(t),t},O=(e,t,n,r)=>{s.Yu(e.clients,t,(()=>[])).push(new S(n,r))},R=()=>new E,P=e=>{const t=R();return e.clients.forEach(((e,n)=>{const r=[];for(let t=0;t<e.length;t++){const n=e[t];if(n.deleted){const i=n.id.clock;let o=n.length;if(t+1<e.length)for(let n=e[t+1];t+1<e.length&&n.deleted;n=e[1+ ++t])o+=n.length;r.push(new S(i,o))}}r.length>0&&t.clients.set(n,r)})),t},L=(e,t)=>{a.uE(e.restEncoder,t.clients.size),i.Dp(t.clients.entries()).sort(((e,t)=>t[0]-e[0])).forEach((([t,n])=>{e.resetDsCurVal(),a.uE(e.restEncoder,t);const r=n.length;a.uE(e.restEncoder,r);for(let i=0;i<r;i++){const t=n[i];e.writeDsClock(t.clock),e.writeDsLen(t.len)}}))},D=e=>{const t=new E,n=l.yg(e.restDecoder);for(let r=0;r<n;r++){e.resetDsCurVal();const n=l.yg(e.restDecoder),r=l.yg(e.restDecoder);if(r>0){const i=s.Yu(t.clients,n,(()=>[]));for(let t=0;t<r;t++)i.push(new S(e.readDsClock(),e.readDsLen()))}}return t},I=(e,t,n)=>{const r=new E,i=l.yg(e.restDecoder);for(let o=0;o<i;o++){e.resetDsCurVal();const i=l.yg(e.restDecoder),o=l.yg(e.restDecoder),s=n.clients.get(i)||[],a=De(n,i);for(let n=0;n<o;n++){const n=e.readDsClock(),o=n+e.readDsLen();if(n<a){a<o&&O(r,i,a,o-a);let e=Ne(s,n),l=s[e];!l.deleted&&l.id.clock<n&&(s.splice(e+1,0,rr(t,l,n-l.id.clock)),e++);while(e<s.length){if(l=s[e++],!(l.id.clock<o))break;l.deleted||(o<l.id.clock+l.length&&s.splice(e,0,rr(t,l,o-l.id.clock)),l.delete(t))}}else O(r,i,n,o-n)}}if(r.clients.size>0){const e=new G;return a.uE(e.restEncoder,0),L(e,r),e.toUint8Array()}return null},N=c.U7;class U extends r.y{constructor({guid:e=c.k$(),collectionid:t=null,gc:n=!0,gcFilter:r=(()=>!0),meta:i=null,autoLoad:o=!1,shouldLoad:s=!0}={}){super(),this.gc=n,this.gcFilter=r,this.clientID=N(),this.guid=e,this.collectionid=t,this.share=new Map,this.store=new Pe,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=s,this.autoLoad=o,this.meta=i,this.isLoaded=!1,this.isSynced=!1,this.whenLoaded=u.Ue((e=>{this.on("load",(()=>{this.isLoaded=!0,e(this)}))}));const a=()=>u.Ue((e=>{const t=n=>{void 0!==n&&!0!==n||(this.off("sync",t),e())};this.on("sync",t)}));this.on("sync",(e=>{!1===e&&this.isSynced&&(this.whenSynced=a()),this.isSynced=void 0===e||!0===e,this.isLoaded||this.emit("load",[])})),this.whenSynced=a()}load(){const e=this._item;null===e||this.shouldLoad||Ke(e.parent.doc,(e=>{e.subdocsLoaded.add(this)}),null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(i.Dp(this.subdocs).map((e=>e.guid)))}transact(e,t=null){return Ke(this,e,t)}get(e,t=Mt){const n=s.Yu(this.share,e,(()=>{const e=new t;return e._integrate(this,null),e})),r=n.constructor;if(t!==Mt&&r!==t){if(r===Mt){const r=new t;r._map=n._map,n._map.forEach((e=>{for(;null!==e;e=e.left)e.parent=r})),r._start=n._start;for(let e=r._start;null!==e;e=e.right)e.parent=r;return r._length=n._length,this.share.set(e,r),r._integrate(this,null),r}throw new Error(`Type with the name ${e} has already been defined with a different constructor`)}return n}getArray(e=""){return this.get(e,Gt)}getText(e=""){return this.get(e,fn)}getMap(e=""){return this.get(e,Yt)}getXmlFragment(e=""){return this.get(e,gn)}toJSON(){const e={};return this.share.forEach(((t,n)=>{e[n]=t.toJSON()})),e}destroy(){i.Dp(this.subdocs).forEach((e=>e.destroy()));const e=this._item;if(null!==e){this._item=null;const t=e.content;t.doc=new U({guid:this.guid,...t.opts,shouldLoad:!1}),t.doc._item=e,Ke(e.parent.doc,(n=>{const r=t.doc;e.deleted||n.subdocsAdded.add(r),n.subdocsRemoved.add(this)}),null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}on(e,t){super.on(e,t)}off(e,t){super.off(e,t)}}class F{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return l.yg(this.restDecoder)}readDsLen(){return l.yg(this.restDecoder)}}class B extends F{readLeftID(){return ge(l.yg(this.restDecoder),l.yg(this.restDecoder))}readRightID(){return ge(l.yg(this.restDecoder),l.yg(this.restDecoder))}readClient(){return l.yg(this.restDecoder)}readInfo(){return l.kj(this.restDecoder)}readString(){return l.kf(this.restDecoder)}readParentInfo(){return 1===l.yg(this.restDecoder)}readTypeRef(){return l.yg(this.restDecoder)}readLen(){return l.yg(this.restDecoder)}readAny(){return l.v_(this.restDecoder)}readBuf(){return d.f9(l.HN(this.restDecoder))}readJSON(){return JSON.parse(l.kf(this.restDecoder))}readKey(){return l.kf(this.restDecoder)}}class V{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=l.yg(this.restDecoder),this.dsCurrVal}readDsLen(){const e=l.yg(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class z extends V{constructor(e){super(e),this.keys=[],l.yg(e),this.keyClockDecoder=new l.dD(l.HN(e)),this.clientDecoder=new l.UF(l.HN(e)),this.leftClockDecoder=new l.dD(l.HN(e)),this.rightClockDecoder=new l.dD(l.HN(e)),this.infoDecoder=new l.XW(l.HN(e),l.kj),this.stringDecoder=new l.sO(l.HN(e)),this.parentInfoDecoder=new l.XW(l.HN(e),l.kj),this.typeRefDecoder=new l.UF(l.HN(e)),this.lenDecoder=new l.UF(l.HN(e))}readLeftID(){return new pe(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new pe(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return 1===this.parentInfoDecoder.read()}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return l.v_(this.restDecoder)}readBuf(){return l.HN(this.restDecoder)}readJSON(){return l.v_(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const e=this.stringDecoder.read();return this.keys.push(e),e}}}class j{constructor(){this.restEncoder=a.Mf()}toUint8Array(){return a._f(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){a.uE(this.restEncoder,e)}writeDsLen(e){a.uE(this.restEncoder,e)}}class H extends j{writeLeftID(e){a.uE(this.restEncoder,e.client),a.uE(this.restEncoder,e.clock)}writeRightID(e){a.uE(this.restEncoder,e.client),a.uE(this.restEncoder,e.clock)}writeClient(e){a.uE(this.restEncoder,e)}writeInfo(e){a.$F(this.restEncoder,e)}writeString(e){a.uw(this.restEncoder,e)}writeParentInfo(e){a.uE(this.restEncoder,e?1:0)}writeTypeRef(e){a.uE(this.restEncoder,e)}writeLen(e){a.uE(this.restEncoder,e)}writeAny(e){a.EM(this.restEncoder,e)}writeBuf(e){a.mP(this.restEncoder,e)}writeJSON(e){a.uw(this.restEncoder,JSON.stringify(e))}writeKey(e){a.uw(this.restEncoder,e)}}class W{constructor(){this.restEncoder=a.Mf(),this.dsCurrVal=0}toUint8Array(){return a._f(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const t=e-this.dsCurrVal;this.dsCurrVal=e,a.uE(this.restEncoder,t)}writeDsLen(e){0===e&&h.zR(),a.uE(this.restEncoder,e-1),this.dsCurrVal+=e}}class G extends W{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new a.sX,this.clientEncoder=new a.HE,this.leftClockEncoder=new a.sX,this.rightClockEncoder=new a.sX,this.infoEncoder=new a.GF(a.$F),this.stringEncoder=new a.TS,this.parentInfoEncoder=new a.GF(a.$F),this.typeRefEncoder=new a.HE,this.lenEncoder=new a.HE}toUint8Array(){const e=a.Mf();return a.uE(e,0),a.mP(e,this.keyClockEncoder.toUint8Array()),a.mP(e,this.clientEncoder.toUint8Array()),a.mP(e,this.leftClockEncoder.toUint8Array()),a.mP(e,this.rightClockEncoder.toUint8Array()),a.mP(e,a._f(this.infoEncoder)),a.mP(e,this.stringEncoder.toUint8Array()),a.mP(e,a._f(this.parentInfoEncoder)),a.mP(e,this.typeRefEncoder.toUint8Array()),a.mP(e,this.lenEncoder.toUint8Array()),a.HK(e,a._f(this.restEncoder)),a._f(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){a.EM(this.restEncoder,e)}writeBuf(e){a.mP(this.restEncoder,e)}writeJSON(e){a.EM(this.restEncoder,e)}writeKey(e){const t=this.keyMap.get(e);void 0===t?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}}const $=(e,t,n,r)=>{r=o.Fp(r,t[0].id.clock);const i=Ne(t,r);a.uE(e.restEncoder,t.length-i),e.writeClient(n),a.uE(e.restEncoder,r);const s=t[i];s.write(e,r-s.id.clock);for(let o=i+1;o<t.length;o++)t[o].write(e,0)},q=(e,t,n)=>{const r=new Map;n.forEach(((e,n)=>{De(t,n)>e&&r.set(n,e)})),Le(t).forEach(((e,t)=>{n.has(t)||r.set(t,0)})),a.uE(e.restEncoder,r.size),i.Dp(r.entries()).sort(((e,t)=>t[0]-e[0])).forEach((([n,r])=>{$(e,t.clients.get(n),n,r)}))},Y=(e,t)=>{const n=s.Ue(),r=l.yg(e.restDecoder);for(let i=0;i<r;i++){const r=l.yg(e.restDecoder),i=new Array(r),o=e.readClient();let s=l.yg(e.restDecoder);n.set(o,{i:0,refs:i});for(let n=0;n<r;n++){const r=e.readInfo();switch(f.kr&r){case 0:{const t=e.readLen();i[n]=new Cn(ge(o,s),t),s+=t;break}case 10:{const t=l.yg(e.restDecoder);i[n]=new ur(ge(o,s),t),s+=t;break}default:{const a=0===(r&(f.rc|f.x1)),l=new sr(ge(o,s),null,(r&f.x1)===f.x1?e.readLeftID():null,null,(r&f.rc)===f.rc?e.readRightID():null,a?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,a&&(r&f.cq)===f.cq?e.readString():null,ar(e,r));i[n]=l,s+=l.length}}}}return n},X=(e,t,n)=>{const r=[];let o=i.Dp(n.keys()).sort(((e,t)=>e-t));if(0===o.length)return null;const l=()=>{if(0===o.length)return null;let e=n.get(o[o.length-1]);while(e.refs.length===e.i){if(o.pop(),!(o.length>0))return null;e=n.get(o[o.length-1])}return e};let c=l();if(null===c&&0===r.length)return null;const u=new Pe,d=new Map,h=(e,t)=>{const n=d.get(e);(null==n||n>t)&&d.set(e,t)};let f=c.refs[c.i++];const p=new Map,m=()=>{for(const e of r){const t=e.id.client,r=n.get(t);r?(r.i--,u.clients.set(t,r.refs.slice(r.i)),n.delete(t),r.i=0,r.refs=[]):u.clients.set(t,[e]),o=o.filter((e=>e!==t))}r.length=0};while(1){if(f.constructor!==ur){const i=s.Yu(p,f.id.client,(()=>De(t,f.id.client))),o=i-f.id.clock;if(o<0)r.push(f),h(f.id.client,f.id.clock-1),m();else{const i=f.getMissing(e,t);if(null!==i){r.push(f);const e=n.get(i)||{refs:[],i:0};if(e.refs.length!==e.i){f=e.refs[e.i++];continue}h(i,De(t,i)),m()}else(0===o||o<f.length)&&(f.integrate(e,o),p.set(f.id.client,f.id.clock+f.length))}}if(r.length>0)f=r.pop();else if(null!==c&&c.i<c.refs.length)f=c.refs[c.i++];else{if(c=l(),null===c)break;f=c.refs[c.i++]}}if(u.clients.size>0){const e=new G;return q(e,u,new Map),a.uE(e.restEncoder,0),{missing:d,update:e.toUint8Array()}}return null},Z=(e,t)=>q(e,t.doc.store,t.beforeState),K=(e,t,n,r=new z(e))=>Ke(t,(e=>{e.local=!1;let t=!1;const n=e.doc,i=n.store,o=Y(r,n),s=X(e,i,o),a=i.pendingStructs;if(a){for(const[e,n]of a.missing)if(n<De(i,e)){t=!0;break}if(s){for(const[e,t]of s.missing){const n=a.missing.get(e);(null==n||n>t)&&a.missing.set(e,t)}a.update=at([a.update,s.update])}}else i.pendingStructs=s;const c=I(r,e,i);if(i.pendingDs){const t=new z(l.l1(i.pendingDs));l.yg(t.restDecoder);const n=I(t,e,i);i.pendingDs=c&&n?at([c,n]):c||n}else i.pendingDs=c;if(t){const t=i.pendingStructs.update;i.pendingStructs=null,J(e.doc,t)}}),n,!1),J=(e,t,n,r=z)=>{const i=l.l1(t);K(i,e,n,new r(i))},Q=(e,t,n)=>J(e,t,n,B),ee=(e,t,n=new Map)=>{q(e,t.store,n),L(e,P(t.store))},te=(e,t=new Uint8Array([0]),n=new G)=>{const r=ie(t);ee(n,e,r);const i=[n.toUint8Array()];if(e.store.pendingDs&&i.push(e.store.pendingDs),e.store.pendingStructs&&i.push(lt(e.store.pendingStructs.update,t)),i.length>1){if(n.constructor===H)return ot(i.map(((e,t)=>0===t?e:ft(e))));if(n.constructor===G)return at(i)}return i[0]},ne=(e,t)=>te(e,t,new H),re=e=>{const t=new Map,n=l.yg(e.restDecoder);for(let r=0;r<n;r++){const n=l.yg(e.restDecoder),r=l.yg(e.restDecoder);t.set(n,r)}return t},ie=e=>re(new F(l.l1(e))),oe=(e,t)=>(a.uE(e.restEncoder,t.size),i.Dp(t.entries()).sort(((e,t)=>t[0]-e[0])).forEach((([t,n])=>{a.uE(e.restEncoder,t),a.uE(e.restEncoder,n)})),e),se=(e,t)=>oe(e,Le(t.store)),ae=(e,t=new W)=>(e instanceof Map?oe(t,e):se(t,e),t.toUint8Array()),le=e=>ae(e,new j);class ce{constructor(){this.l=[]}}const ue=()=>new ce,de=(e,t)=>e.l.push(t),he=(e,t)=>{const n=e.l,r=n.length;e.l=n.filter((e=>t!==e)),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},fe=(e,t,n)=>p.PP(e.l,[t,n]);class pe{constructor(e,t){this.client=e,this.clock=t}}const me=(e,t)=>e===t||null!==e&&null!==t&&e.client===t.client&&e.clock===t.clock,ge=(e,t)=>new pe(e,t),ve=e=>{for(const[t,n]of e.doc.share.entries())if(n===e)return t;throw h.zR()},ye=(e,t)=>{while(null!==t){if(t.parent===e)return!0;t=t.parent._item}return!1};class be{constructor(e,t,n,r=0){this.type=e,this.tname=t,this.item=n,this.assoc=r}}const _e=e=>new be(null==e.type?null:ge(e.type.client,e.type.clock),e.tname||null,null==e.item?null:ge(e.item.client,e.item.clock),null==e.assoc?0:e.assoc);class we{constructor(e,t,n=0){this.type=e,this.index=t,this.assoc=n}}const xe=(e,t,n=0)=>new we(e,t,n),Se=(e,t,n)=>{let r=null,i=null;return null===e._item?i=ve(e):r=ge(e._item.id.client,e._item.id.clock),new be(r,i,t,n)},Ee=(e,t,n=0)=>{let r=e._start;if(n<0){if(0===t)return Se(e,null,n);t--}while(null!==r){if(!r.deleted&&r.countable){if(r.length>t)return Se(e,ge(r.id.client,r.id.clock+t),n);t-=r.length}if(null===r.right&&n<0)return Se(e,r.lastId,n);r=r.right}return Se(e,null,n)},Me=(e,t)=>{const n=t.store,r=e.item,i=e.type,o=e.tname,s=e.assoc;let a=null,l=0;if(null!==r){if(De(n,r.client)<=r.clock)return null;const e=tr(n,r),t=e.item;if(!(t instanceof sr))return null;if(a=t.parent,null===a._item||!a._item.deleted){l=t.deleted||!t.countable?0:e.diff+(s>=0?0:1);let n=t.left;while(null!==n)!n.deleted&&n.countable&&(l+=n.length),n=n.left}}else{if(null!==o)a=t.get(o);else{if(null===i)throw h.zR();{if(De(n,i.client)<=i.clock)return null;const{item:e}=tr(n,i);if(!(e instanceof sr&&e.content instanceof Qn))return null;a=e.content.type}}l=s>=0?a._length:0}return xe(a,l,e.assoc)},Te=(e,t)=>e===t||null!==e&&null!==t&&e.tname===t.tname&&me(e.item,t.item)&&me(e.type,t.type)&&e.assoc===t.assoc;class Ce{constructor(e,t){this.ds=e,this.sv=t}}const Ae=(e,t)=>new Ce(e,t),ke=(Ae(R(),new Map),e=>Ae(P(e.store),Le(e.store))),Oe=(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!C(t.ds,e.id),Re=(e,t)=>{const n=s.Yu(e.meta,Re,m.Ue),r=e.doc.store;n.has(t)||(t.sv.forEach(((t,n)=>{t<De(r,n)&&Ve(e,ge(n,t))})),M(e,t.ds,(e=>{})),n.add(t))};class Pe{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Le=e=>{const t=new Map;return e.clients.forEach(((e,n)=>{const r=e[e.length-1];t.set(n,r.id.clock+r.length)})),t},De=(e,t)=>{const n=e.clients.get(t);if(void 0===n)return 0;const r=n[n.length-1];return r.id.clock+r.length},Ie=(e,t)=>{let n=e.clients.get(t.id.client);if(void 0===n)n=[],e.clients.set(t.id.client,n);else{const e=n[n.length-1];if(e.id.clock+e.length!==t.id.clock)throw h.zR()}n.push(t)},Ne=(e,t)=>{let n=0,r=e.length-1,i=e[r],s=i.id.clock;if(s===t)return r;let a=o.GW(t/(s+i.length-1)*r);while(n<=r){if(i=e[a],s=i.id.clock,s<=t){if(t<s+i.length)return a;n=a+1}else r=a-1;a=o.GW((n+r)/2)}throw h.zR()},Ue=(e,t)=>{const n=e.clients.get(t.client);return n[Ne(n,t.clock)]},Fe=Ue,Be=(e,t,n)=>{const r=Ne(t,n),i=t[r];return i.id.clock<n&&i instanceof sr?(t.splice(r+1,0,rr(e,i,n-i.id.clock)),r+1):r},Ve=(e,t)=>{const n=e.doc.store.clients.get(t.client);return n[Be(e,n,t.clock)]},ze=(e,t,n)=>{const r=t.clients.get(n.client),i=Ne(r,n.clock),o=r[i];return n.clock!==o.id.clock+o.length-1&&o.constructor!==Cn&&r.splice(i+1,0,rr(e,o,n.clock-o.id.clock+1)),o},je=(e,t,n)=>{const r=e.clients.get(t.id.client);r[Ne(r,t.id.clock)]=n},He=(e,t,n,r,i)=>{if(0===r)return;const o=n+r;let s,a=Be(e,t,n);do{s=t[a++],o<s.id.clock+s.length&&Be(e,t,o),i(s)}while(a<t.length&&t[a].id.clock<o)};class We{constructor(e,t,n){this.doc=e,this.deleteSet=new E,this.beforeState=Le(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const Ge=(e,t)=>!(0===t.deleteSet.clients.size&&!s.Yj(t.afterState,((e,n)=>t.beforeState.get(n)!==e)))&&(A(t.deleteSet),Z(e,t),L(e,t.deleteSet),!0),$e=(e,t,n)=>{const r=t._item;(null===r||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&s.Yu(e.changed,t,m.Ue).add(n)},qe=(e,t)=>{const n=e[t-1],r=e[t];n.deleted===r.deleted&&n.constructor===r.constructor&&n.mergeWith(r)&&(e.splice(t,1),r instanceof sr&&null!==r.parentSub&&r.parent._map.get(r.parentSub)===r&&r.parent._map.set(r.parentSub,n))},Ye=(e,t,n)=>{for(const[r,i]of e.clients.entries()){const e=t.clients.get(r);for(let r=i.length-1;r>=0;r--){const o=i[r],s=o.clock+o.len;for(let r=Ne(e,o.clock),i=e[r];r<e.length&&i.id.clock<s;i=e[++r]){const i=e[r];if(o.clock+o.len<=i.id.clock)break;i instanceof sr&&i.deleted&&!i.keep&&n(i)&&i.gc(t,!1)}}}},Xe=(e,t)=>{e.clients.forEach(((e,n)=>{const r=t.clients.get(n);for(let t=e.length-1;t>=0;t--){const n=e[t],i=o.VV(r.length-1,1+Ne(r,n.clock+n.len-1));for(let e=i,t=r[e];e>0&&t.id.clock>=n.clock;t=r[--e])qe(r,e)}}))},Ze=(e,t)=>{if(t<e.length){const n=e[t],r=n.doc,i=r.store,s=n.deleteSet,a=n._mergeStructs;try{A(s),n.afterState=Le(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const e=[];n.changed.forEach(((t,r)=>e.push((()=>{null!==r._item&&r._item.deleted||r._callObserver(n,t)})))),e.push((()=>{n.changedParentTypes.forEach(((t,r)=>e.push((()=>{null!==r._item&&r._item.deleted||(t=t.filter((e=>null===e.target._item||!e.target._item.deleted)),t.forEach((e=>{e.currentTarget=r})),t.sort(((e,t)=>e.path.length-t.path.length)),fe(r._dEH,t,n))})))),e.push((()=>r.emit("afterTransaction",[n,r])))})),(0,p.PP)(e,[]),n._needFormattingCleanup&&un(n)}finally{r.gc&&Ye(s,i,r.gcFilter),Xe(s,i),n.afterState.forEach(((e,t)=>{const r=n.beforeState.get(t)||0;if(r!==e){const e=i.clients.get(t),n=o.Fp(Ne(e,r),1);for(let t=e.length-1;t>=n;t--)qe(e,t)}}));for(let e=0;e<a.length;e++){const{client:t,clock:n}=a[e].id,r=i.clients.get(t),o=Ne(r,n);o+1<r.length&&qe(r,o+1),o>0&&qe(r,o)}if(n.local||n.afterState.get(r.clientID)===n.beforeState.get(r.clientID)||(g.S0(v.ud,v.Pl,"[yjs] ",v.YW,v.hM,"Changed the client-id because another client seems to be using it."),r.clientID=N()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const e=new H,t=Ge(e,n);t&&r.emit("update",[e.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const e=new G,t=Ge(e,n);t&&r.emit("updateV2",[e.toUint8Array(),n.origin,r,n])}const{subdocsAdded:l,subdocsLoaded:c,subdocsRemoved:u}=n;(l.size>0||u.size>0||c.size>0)&&(l.forEach((e=>{e.clientID=r.clientID,null==e.collectionid&&(e.collectionid=r.collectionid),r.subdocs.add(e)})),u.forEach((e=>r.subdocs.delete(e))),r.emit("subdocs",[{loaded:c,added:l,removed:u},r,n]),u.forEach((e=>e.destroy()))),e.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,e])):Ze(e,t+1)}}},Ke=(e,t,n=null,r=!0)=>{const i=e._transactionCleanups;let o=!1,s=null;null===e._transaction&&(o=!0,e._transaction=new We(e,n,r),i.push(e._transaction),1===i.length&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{s=t(e._transaction)}finally{if(o){const t=e._transaction===i[0];e._transaction=null,t&&Ze(i,0)}}return s};class Je{constructor(e,t){this.insertions=t,this.deletions=e,this.meta=new Map}}const Qe=(e,t,n)=>{M(e,n.deletions,(e=>{e instanceof sr&&t.scope.some((t=>ye(t,e)))&&nr(e,!1)}))},et=(e,t,n)=>{let r=null,i=null;const o=e.doc,s=e.scope;if(Ke(o,(n=>{while(t.length>0&&null===r){const i=o.store,a=t.pop(),l=new Set,c=[];let u=!1;M(n,a.insertions,(e=>{if(e instanceof sr){if(null!==e.redone){let{item:t,diff:r}=tr(i,e.id);r>0&&(t=Ve(n,ge(t.id.client,t.id.clock+r))),e=t}!e.deleted&&s.some((t=>ye(t,e)))&&c.push(e)}})),M(n,a.deletions,(e=>{e instanceof sr&&s.some((t=>ye(t,e)))&&!C(a.insertions,e.id)&&l.add(e)})),l.forEach((t=>{u=null!==or(n,t,l,a.insertions,e.ignoreRemoteMapChanges,e)||u}));for(let t=c.length-1;t>=0;t--){const r=c[t];e.deleteFilter(r)&&(r.delete(n),u=!0)}r=u?a:null}n.changed.forEach(((e,t)=>{e.has(null)&&t._searchMarker&&(t._searchMarker.length=0)})),i=n}),e),null!=r){const t=i.changedParentTypes;e.emit("stack-item-popped",[{stackItem:r,type:n,changedParentTypes:t},e])}return r};class tt extends r.y{constructor(e,{captureTimeout:t=500,captureTransaction:n=(e=>!0),deleteFilter:r=(()=>!0),trackedOrigins:o=new Set([null]),ignoreRemoteMapChanges:s=!1,doc:a=(i.kJ(e)?e[0].doc:e.doc)}={}){super(),this.scope=[],this.addToScope(e),this.deleteFilter=r,o.add(this),this.trackedOrigins=o,this.captureTransaction=n,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.doc=a,this.lastChange=0,this.ignoreRemoteMapChanges=s,this.captureTimeout=t,this.afterTransactionHandler=e=>{if(!this.captureTransaction(e)||!this.scope.some((t=>e.changedParentTypes.has(t)))||!this.trackedOrigins.has(e.origin)&&(!e.origin||!this.trackedOrigins.has(e.origin.constructor)))return;const t=this.undoing,n=this.redoing,r=t?this.redoStack:this.undoStack;t?this.stopCapturing():n||this.clear(!1,!0);const i=new E;e.afterState.forEach(((t,n)=>{const r=e.beforeState.get(n)||0,o=t-r;o>0&&O(i,n,r,o)}));const o=y.ZG();let s=!1;if(this.lastChange>0&&o-this.lastChange<this.captureTimeout&&r.length>0&&!t&&!n){const t=r[r.length-1];t.deletions=k([t.deletions,e.deleteSet]),t.insertions=k([t.insertions,i])}else r.push(new Je(e.deleteSet,i)),s=!0;t||n||(this.lastChange=o),M(e,e.deleteSet,(e=>{e instanceof sr&&this.scope.some((t=>ye(t,e)))&&nr(e,!0)}));const a=[{stackItem:r[r.length-1],origin:e.origin,type:t?"redo":"undo",changedParentTypes:e.changedParentTypes},this];s?this.emit("stack-item-added",a):this.emit("stack-item-updated",a)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",(()=>{this.destroy()}))}addToScope(e){e=i.kJ(e)?e:[e],e.forEach((e=>{this.scope.every((t=>t!==e))&&this.scope.push(e)}))}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,t=!0){(e&&this.canUndo()||t&&this.canRedo())&&this.doc.transact((n=>{e&&(this.undoStack.forEach((e=>Qe(n,this,e))),this.undoStack=[]),t&&(this.redoStack.forEach((e=>Qe(n,this,e))),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:t}])}))}stopCapturing(){this.lastChange=0}undo(){let e;this.undoing=!0;try{e=et(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){let e;this.redoing=!0;try{e=et(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}function*nt(e){const t=l.yg(e.restDecoder);for(let n=0;n<t;n++){const t=l.yg(e.restDecoder),n=e.readClient();let r=l.yg(e.restDecoder);for(let i=0;i<t;i++){const t=e.readInfo();if(10===t){const t=l.yg(e.restDecoder);yield new ur(ge(n,r),t),r+=t}else if(0!==(f.kr&t)){const i=0===(t&(f.rc|f.x1)),o=new sr(ge(n,r),null,(t&f.x1)===f.x1?e.readLeftID():null,null,(t&f.rc)===f.rc?e.readRightID():null,i?e.readParentInfo()?e.readString():e.readLeftID():null,i&&(t&f.cq)===f.cq?e.readString():null,ar(e,t));yield o,r+=o.length}else{const t=e.readLen();yield new Cn(ge(n,r),t),r+=t}}}}class rt{constructor(e,t){this.gen=nt(e),this.curr=null,this.done=!1,this.filterSkips=t,this.next()}next(){do{this.curr=this.gen.next().value||null}while(this.filterSkips&&null!==this.curr&&this.curr.constructor===ur);return this.curr}}class it{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const ot=e=>at(e,B,H),st=(e,t)=>{if(e.constructor===Cn){const{client:n,clock:r}=e.id;return new Cn(ge(n,r+t),e.length-t)}if(e.constructor===ur){const{client:n,clock:r}=e.id;return new ur(ge(n,r+t),e.length-t)}{const n=e,{client:r,clock:i}=n.id;return new sr(ge(r,i+t),null,ge(r,i+t-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(t))}},at=(e,t=z,n=G)=>{if(1===e.length)return e[0];const r=e.map((e=>new t(l.l1(e))));let i=r.map((e=>new rt(e,!0))),o=null;const s=new n,a=new it(s);while(1){if(i=i.filter((e=>null!==e.curr)),i.sort(((e,t)=>{if(e.curr.id.client===t.curr.id.client){const n=e.curr.id.clock-t.curr.id.clock;return 0===n?e.curr.constructor===t.curr.constructor?0:e.curr.constructor===ur?1:-1:n}return t.curr.id.client-e.curr.id.client})),0===i.length)break;const e=i[0],t=e.curr.id.client;if(null!==o){let n=e.curr,r=!1;while(null!==n&&n.id.clock+n.length<=o.struct.id.clock+o.struct.length&&n.id.client>=o.struct.id.client)n=e.next(),r=!0;if(null===n||n.id.client!==t||r&&n.id.clock>o.struct.id.clock+o.struct.length)continue;if(t!==o.struct.id.client)ut(a,o.struct,o.offset),o={struct:n,offset:0},e.next();else if(o.struct.id.clock+o.struct.length<n.id.clock)if(o.struct.constructor===ur)o.struct.length=n.id.clock+n.length-o.struct.id.clock;else{ut(a,o.struct,o.offset);const e=n.id.clock-o.struct.id.clock-o.struct.length,r=new ur(ge(t,o.struct.id.clock+o.struct.length),e);o={struct:r,offset:0}}else{const t=o.struct.id.clock+o.struct.length-n.id.clock;t>0&&(o.struct.constructor===ur?o.struct.length-=t:n=st(n,t)),o.struct.mergeWith(n)||(ut(a,o.struct,o.offset),o={struct:n,offset:0},e.next())}}else o={struct:e.curr,offset:0},e.next();for(let n=e.curr;null!==n&&n.id.client===t&&n.id.clock===o.struct.id.clock+o.struct.length&&n.constructor!==ur;n=e.next())ut(a,o.struct,o.offset),o={struct:n,offset:0}}null!==o&&(ut(a,o.struct,o.offset),o=null),dt(a);const c=r.map((e=>D(e))),u=k(c);return L(s,u),s.toUint8Array()},lt=(e,t,n=z,r=G)=>{const i=ie(t),s=new r,a=new it(s),c=new n(l.l1(e)),u=new rt(c,!1);while(u.curr){const e=u.curr,t=e.id.client,n=i.get(t)||0;if(u.curr.constructor!==ur)if(e.id.clock+e.length>n){ut(a,e,o.Fp(n-e.id.clock,0)),u.next();while(u.curr&&u.curr.id.client===t)ut(a,u.curr,0),u.next()}else while(u.curr&&u.curr.id.client===t&&u.curr.id.clock+u.curr.length<=n)u.next();else u.next()}dt(a);const d=D(c);return L(s,d),s.toUint8Array()},ct=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:a._f(e.encoder.restEncoder)}),e.encoder.restEncoder=a.Mf(),e.written=0)},ut=(e,t,n)=>{e.written>0&&e.currClient!==t.id.client&&ct(e),0===e.written&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),a.uE(e.encoder.restEncoder,t.id.clock+n)),t.write(e.encoder,n),e.written++},dt=e=>{ct(e);const t=e.encoder.restEncoder;a.uE(t,e.clientStructs.length);for(let n=0;n<e.clientStructs.length;n++){const r=e.clientStructs[n];a.uE(t,r.written),a.HK(t,r.restEncoder)}},ht=(e,t,n,r)=>{const i=new n(l.l1(e)),o=new rt(i,!1),s=new r,a=new it(s);for(let l=o.curr;null!==l;l=o.next())ut(a,t(l),0);dt(a);const c=D(i);return L(s,c),s.toUint8Array()},ft=e=>ht(e,p.id,z,H);class pt{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=mt(this.currentTarget,this.target))}deletes(e){return C(this.transaction.deleteSet,e.id)}get keys(){if(null===this._keys){const e=new Map,t=this.target,n=this.transaction.changed.get(t);n.forEach((n=>{if(null!==n){const r=t._map.get(n);let o,s;if(this.adds(r)){let e=r.left;while(null!==e&&this.adds(e))e=e.left;if(this.deletes(r)){if(null===e||!this.deletes(e))return;o="delete",s=i.Z$(e.content.getContent())}else null!==e&&this.deletes(e)?(o="update",s=i.Z$(e.content.getContent())):(o="add",s=void 0)}else{if(!this.deletes(r))return;o="delete",s=i.Z$(r.content.getContent())}e.set(n,{action:o,oldValue:s})}})),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(null===e){const t=this.target,n=m.Ue(),r=m.Ue(),i=[];e={added:n,deleted:r,delta:i,keys:this.keys};const o=this.transaction.changed.get(t);if(o.has(null)){let e=null;const o=()=>{e&&i.push(e)};for(let i=t._start;null!==i;i=i.right)i.deleted?this.deletes(i)&&!this.adds(i)&&(null!==e&&void 0!==e.delete||(o(),e={delete:0}),e.delete+=i.length,r.add(i)):this.adds(i)?(null!==e&&void 0!==e.insert||(o(),e={insert:[]}),e.insert=e.insert.concat(i.content.getContent()),n.add(i)):(null!==e&&void 0!==e.retain||(o(),e={retain:0}),e.retain+=i.length);null!==e&&void 0===e.retain&&o()}this._changes=e}return e}}const mt=(e,t)=>{const n=[];while(null!==t._item&&t!==e){if(null!==t._item.parentSub)n.unshift(t._item.parentSub);else{let e=0,r=t._item.parent._start;while(r!==t._item&&null!==r)r.deleted||e++,r=r.right;n.unshift(e)}t=t._item.parent}return n},gt=80;let vt=0;class yt{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=vt++}}const bt=e=>{e.timestamp=vt++},_t=(e,t,n)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=vt++},wt=(e,t,n)=>{if(e.length>=gt){const r=e.reduce(((e,t)=>e.timestamp<t.timestamp?e:t));return _t(r,t,n),r}{const r=new yt(t,n);return e.push(r),r}},xt=(e,t)=>{if(null===e._start||0===t||null===e._searchMarker)return null;const n=0===e._searchMarker.length?null:e._searchMarker.reduce(((e,n)=>o.Wn(t-e.index)<o.Wn(t-n.index)?e:n));let r=e._start,i=0;null!==n&&(r=n.p,i=n.index,bt(n));while(null!==r.right&&i<t){if(!r.deleted&&r.countable){if(t<i+r.length)break;i+=r.length}r=r.right}while(null!==r.left&&i>t)r=r.left,!r.deleted&&r.countable&&(i-=r.length);while(null!==r.left&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return null!==n&&o.Wn(n.index-i)<r.parent.length/gt?(_t(n,r,i),n):wt(e._searchMarker,r,i)},St=(e,t,n)=>{for(let r=e.length-1;r>=0;r--){const i=e[r];if(n>0){let t=i.p;t.marker=!1;while(t&&(t.deleted||!t.countable))t=t.left,t&&!t.deleted&&t.countable&&(i.index-=t.length);if(null===t||!0===t.marker){e.splice(r,1);continue}i.p=t,t.marker=!0}(t<i.index||n>0&&t===i.index)&&(i.index=o.Fp(t,i.index+n))}},Et=(e,t,n)=>{const r=e,i=t.changedParentTypes;while(1){if(s.Yu(i,e,(()=>[])).push(n),null===e._item)break;e=e._item.parent}fe(r._eH,n,t)};class Mt{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=ue(),this._dEH=ue(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw h.Nw()}clone(){throw h.Nw()}_write(e){}get _first(){let e=this._start;while(null!==e&&e.deleted)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){de(this._eH,e)}observeDeep(e){de(this._dEH,e)}unobserve(e){he(this._eH,e)}unobserveDeep(e){he(this._dEH,e)}toJSON(){}}const Tt=(e,t,n)=>{t<0&&(t=e._length+t),n<0&&(n=e._length+n);let r=n-t;const i=[];let o=e._start;while(null!==o&&r>0){if(o.countable&&!o.deleted){const e=o.content.getContent();if(e.length<=t)t-=e.length;else{for(let n=t;n<e.length&&r>0;n++)i.push(e[n]),r--;t=0}}o=o.right}return i},Ct=e=>{const t=[];let n=e._start;while(null!==n){if(n.countable&&!n.deleted){const e=n.content.getContent();for(let n=0;n<e.length;n++)t.push(e[n])}n=n.right}return t},At=(e,t)=>{const n=[];let r=e._start;while(null!==r){if(r.countable&&Oe(r,t)){const e=r.content.getContent();for(let t=0;t<e.length;t++)n.push(e[t])}r=r.right}return n},kt=(e,t)=>{let n=0,r=e._start;while(null!==r){if(r.countable&&!r.deleted){const i=r.content.getContent();for(let r=0;r<i.length;r++)t(i[r],n++,e)}r=r.right}},Ot=(e,t)=>{const n=[];return kt(e,((r,i)=>{n.push(t(r,i,e))})),n},Rt=e=>{let t=e._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(null===n){while(null!==t&&t.deleted)t=t.right;if(null===t)return{done:!0,value:void 0};n=t.content.getContent(),r=0,t=t.right}const e=n[r++];return n.length<=r&&(n=null),{done:!1,value:e}}}},Pt=(e,t)=>{const n=xt(e,t);let r=e._start;for(null!==n&&(r=n.p,t-=n.index);null!==r;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},Lt=(e,t,n,r)=>{let i=n;const o=e.doc,s=o.clientID,a=o.store,l=null===n?t._start:n.right;let c=[];const u=()=>{c.length>0&&(i=new sr(ge(s,De(a,s)),i,i&&i.lastId,l,l&&l.id,t,null,new zn(c)),i.integrate(e,0),c=[])};r.forEach((n=>{if(null===n)c.push(n);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(n);break;default:switch(u(),n.constructor){case Uint8Array:case ArrayBuffer:i=new sr(ge(s,De(a,s)),i,i&&i.lastId,l,l&&l.id,t,null,new An(new Uint8Array(n))),i.integrate(e,0);break;case U:i=new sr(ge(s,De(a,s)),i,i&&i.lastId,l,l&&l.id,t,null,new Ln(n)),i.integrate(e,0);break;default:if(!(n instanceof Mt))throw new Error("Unexpected content type in insert operation");i=new sr(ge(s,De(a,s)),i,i&&i.lastId,l,l&&l.id,t,null,new Qn(n)),i.integrate(e,0)}}})),u()},Dt=h.Ue("Length exceeded!"),It=(e,t,n,r)=>{if(n>t._length)throw Dt;if(0===n)return t._searchMarker&&St(t._searchMarker,n,r.length),Lt(e,t,null,r);const i=n,o=xt(t,n);let s=t._start;for(null!==o&&(s=o.p,n-=o.index,0===n&&(s=s.prev,n+=s&&s.countable&&!s.deleted?s.length:0));null!==s;s=s.right)if(!s.deleted&&s.countable){if(n<=s.length){n<s.length&&Ve(e,ge(s.id.client,s.id.clock+n));break}n-=s.length}return t._searchMarker&&St(t._searchMarker,i,r.length),Lt(e,t,s,r)},Nt=(e,t,n)=>{const r=(t._searchMarker||[]).reduce(((e,t)=>t.index>e.index?t:e),{index:0,p:t._start});let i=r.p;if(i)while(i.right)i=i.right;return Lt(e,t,i,n)},Ut=(e,t,n,r)=>{if(0===r)return;const i=n,o=r,s=xt(t,n);let a=t._start;for(null!==s&&(a=s.p,n-=s.index);null!==a&&n>0;a=a.right)!a.deleted&&a.countable&&(n<a.length&&Ve(e,ge(a.id.client,a.id.clock+n)),n-=a.length);while(r>0&&null!==a)a.deleted||(r<a.length&&Ve(e,ge(a.id.client,a.id.clock+r)),a.delete(e),r-=a.length),a=a.right;if(r>0)throw Dt;t._searchMarker&&St(t._searchMarker,i,-o+r)},Ft=(e,t,n)=>{const r=t._map.get(n);void 0!==r&&r.delete(e)},Bt=(e,t,n,r)=>{const i=t._map.get(n)||null,o=e.doc,s=o.clientID;let a;if(null==r)a=new zn([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:a=new zn([r]);break;case Uint8Array:a=new An(r);break;case U:a=new Ln(r);break;default:if(!(r instanceof Mt))throw new Error("Unexpected content type");a=new Qn(r)}new sr(ge(s,De(o.store,s)),i,i&&i.lastId,null,null,t,n,a).integrate(e,0)},Vt=(e,t)=>{const n=e._map.get(t);return void 0===n||n.deleted?void 0:n.content.getContent()[n.length-1]},zt=e=>{const t={};return e._map.forEach(((e,n)=>{e.deleted||(t[n]=e.content.getContent()[e.length-1])})),t},jt=(e,t)=>{const n=e._map.get(t);return void 0!==n&&!n.deleted},Ht=e=>_(e.entries(),(e=>!e[1].deleted));class Wt extends pt{constructor(e,t){super(e,t),this._transaction=t}}class Gt extends Mt{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const t=new Gt;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Gt}clone(){const e=new Gt;return e.insert(0,this.toArray().map((e=>e instanceof Mt?e.clone():e))),e}get length(){return null===this._prelimContent?this._length:this._prelimContent.length}_callObserver(e,t){super._callObserver(e,t),Et(this,e,new Wt(this,e))}insert(e,t){null!==this.doc?Ke(this.doc,(n=>{It(n,this,e,t)})):this._prelimContent.splice(e,0,...t)}push(e){null!==this.doc?Ke(this.doc,(t=>{Nt(t,this,e)})):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,t=1){null!==this.doc?Ke(this.doc,(n=>{Ut(n,this,e,t)})):this._prelimContent.splice(e,t)}get(e){return Pt(this,e)}toArray(){return Ct(this)}slice(e=0,t=this.length){return Tt(this,e,t)}toJSON(){return this.map((e=>e instanceof Mt?e.toJSON():e))}map(e){return Ot(this,e)}forEach(e){kt(this,e)}[Symbol.iterator](){return Rt(this)}_write(e){e.writeTypeRef($n)}}const $t=e=>new Gt;class qt extends pt{constructor(e,t,n){super(e,t),this.keysChanged=n}}class Yt extends Mt{constructor(e){super(),this._prelimContent=null,this._prelimContent=void 0===e?new Map:new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach(((e,t)=>{this.set(t,e)})),this._prelimContent=null}_copy(){return new Yt}clone(){const e=new Yt;return this.forEach(((t,n)=>{e.set(n,t instanceof Mt?t.clone():t)})),e}_callObserver(e,t){Et(this,e,new qt(this,e,t))}toJSON(){const e={};return this._map.forEach(((t,n)=>{if(!t.deleted){const r=t.content.getContent()[t.length-1];e[n]=r instanceof Mt?r.toJSON():r}})),e}get size(){return[...Ht(this._map)].length}keys(){return w(Ht(this._map),(e=>e[0]))}values(){return w(Ht(this._map),(e=>e[1].content.getContent()[e[1].length-1]))}entries(){return w(Ht(this._map),(e=>[e[0],e[1].content.getContent()[e[1].length-1]]))}forEach(e){this._map.forEach(((t,n)=>{t.deleted||e(t.content.getContent()[t.length-1],n,this)}))}[Symbol.iterator](){return this.entries()}delete(e){null!==this.doc?Ke(this.doc,(t=>{Ft(t,this,e)})):this._prelimContent.delete(e)}set(e,t){return null!==this.doc?Ke(this.doc,(n=>{Bt(n,this,e,t)})):this._prelimContent.set(e,t),t}get(e){return Vt(this,e)}has(e){return jt(this,e)}clear(){null!==this.doc?Ke(this.doc,(e=>{this.forEach((function(t,n,r){Ft(e,r,n)}))})):this._prelimContent.clear()}_write(e){e.writeTypeRef(qn)}}const Xt=e=>new Yt,Zt=(e,t)=>e===t||"object"===typeof e&&"object"===typeof t&&e&&t&&x.$m(e,t);class Kt{constructor(e,t,n,r){this.left=e,this.right=t,this.index=n,this.currentAttributes=r}forward(){switch(null===this.right&&h.zR(),this.right.content.constructor){case Un:this.right.deleted||tn(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const Jt=(e,t,n)=>{while(null!==t.right&&n>0){switch(t.right.content.constructor){case Un:t.right.deleted||tn(t.currentAttributes,t.right.content);break;default:t.right.deleted||(n<t.right.length&&Ve(e,ge(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length);break}t.left=t.right,t.right=t.right.right}return t},Qt=(e,t,n)=>{const r=new Map,i=xt(t,n);if(i){const t=new Kt(i.p.left,i.p,i.index,r);return Jt(e,t,n-i.index)}{const i=new Kt(null,t._start,0,r);return Jt(e,i,n)}},en=(e,t,n,r)=>{while(null!==n.right&&(!0===n.right.deleted||n.right.content.constructor===Un&&Zt(r.get(n.right.content.key),n.right.content.value)))n.right.deleted||r.delete(n.right.content.key),n.forward();const i=e.doc,o=i.clientID;r.forEach(((r,s)=>{const a=n.left,l=n.right,c=new sr(ge(o,De(i.store,o)),a,a&&a.lastId,l,l&&l.id,t,null,new Un(s,r));c.integrate(e,0),n.right=c,n.forward()}))},tn=(e,t)=>{const{key:n,value:r}=t;null===r?e.delete(n):e.set(n,r)},nn=(e,t)=>{while(1){if(null===e.right)break;if(!(e.right.deleted||e.right.content.constructor===Un&&Zt(t[e.right.content.key]||null,e.right.content.value)))break;e.forward()}},rn=(e,t,n,r)=>{const i=e.doc,o=i.clientID,s=new Map;for(const a in r){const l=r[a],c=n.currentAttributes.get(a)||null;if(!Zt(c,l)){s.set(a,c);const{left:r,right:u}=n;n.right=new sr(ge(o,De(i.store,o)),r,r&&r.lastId,u,u&&u.id,t,null,new Un(a,l)),n.right.integrate(e,0),n.forward()}}return s},on=(e,t,n,r,i)=>{n.currentAttributes.forEach(((e,t)=>{void 0===i[t]&&(i[t]=null)}));const o=e.doc,s=o.clientID;nn(n,i);const a=rn(e,t,n,i),l=r.constructor===String?new Hn(r):r instanceof Mt?new Qn(r):new In(r);let{left:c,right:u,index:d}=n;t._searchMarker&&St(t._searchMarker,n.index,l.getLength()),u=new sr(ge(s,De(o.store,s)),c,c&&c.lastId,u,u&&u.id,t,null,l),u.integrate(e,0),n.right=u,n.index=d,n.forward(),en(e,t,n,a)},sn=(e,t,n,r,i)=>{const o=e.doc,s=o.clientID;nn(n,i);const a=rn(e,t,n,i);e:while(null!==n.right&&(r>0||a.size>0&&(n.right.deleted||n.right.content.constructor===Un))){if(!n.right.deleted)switch(n.right.content.constructor){case Un:{const{key:t,value:o}=n.right.content,s=i[t];if(void 0!==s){if(Zt(s,o))a.delete(t);else{if(0===r)break e;a.set(t,o)}n.right.delete(e)}else n.currentAttributes.set(t,o);break}default:r<n.right.length&&Ve(e,ge(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let i="";for(;r>0;r--)i+="\n";n.right=new sr(ge(s,De(o.store,s)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new Hn(i)),n.right.integrate(e,0),n.forward()}en(e,t,n,a)},an=(e,t,n,r,i)=>{let o=t;const a=s.Ue();while(o&&(!o.countable||o.deleted)){if(!o.deleted&&o.content.constructor===Un){const e=o.content;a.set(e.key,e)}o=o.right}let l=0,c=!1;while(t!==o){if(n===t&&(c=!0),!t.deleted){const n=t.content;switch(n.constructor){case Un:{const{key:o,value:s}=n,u=r.get(o)||null;a.get(o)===n&&u!==s||(t.delete(e),l++,c||(i.get(o)||null)!==s||u===s||(null===u?i.delete(o):i.set(o,u))),c||t.deleted||tn(i,n);break}}}t=t.right}return l},ln=(e,t)=>{while(t&&t.right&&(t.right.deleted||!t.right.countable))t=t.right;const n=new Set;while(t&&(t.deleted||!t.countable)){if(!t.deleted&&t.content.constructor===Un){const r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}},cn=e=>{let t=0;return Ke(e.doc,(n=>{let r=e._start,i=e._start,o=s.Ue();const a=s.JG(o);while(i){if(!1===i.deleted)switch(i.content.constructor){case Un:tn(a,i.content);break;default:t+=an(n,r,i,o,a),o=s.JG(a),r=i;break}i=i.right}})),t},un=e=>{const t=new Set,n=e.doc;for(const[r,i]of e.afterState.entries()){const o=e.beforeState.get(r)||0;i!==o&&He(e,n.store.clients.get(r),o,i,(e=>{e.deleted||e.content.constructor!==Un||e.constructor===Cn||t.add(e.parent)}))}Ke(n,(n=>{M(e,e.deleteSet,(e=>{if(e instanceof Cn||t.has(e.parent))return;const r=e.parent;e.content.constructor===Un?t.add(r):ln(n,e)}));for(const e of t)cn(e)}))},dn=(e,t,n)=>{const r=n,i=s.JG(t.currentAttributes),o=t.right;while(n>0&&null!==t.right){if(!1===t.right.deleted)switch(t.right.content.constructor){case Qn:case In:case Hn:n<t.right.length&&Ve(e,ge(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e);break}t.forward()}o&&an(e,o,t.right,i,t.currentAttributes);const a=(t.left||t.right).parent;return a._searchMarker&&St(a._searchMarker,t.index,-r+n),t};class hn extends pt{constructor(e,t,n){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,n.forEach((e=>{null===e?this.childListChanged=!0:this.keysChanged.add(e)}))}get changes(){if(null===this._changes){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(null===this._delta){const e=this.target.doc,t=[];Ke(e,(e=>{const n=new Map,r=new Map;let i=this.target._start,o=null;const s={};let a="",l=0,c=0;const u=()=>{if(null!==o){let e=null;switch(o){case"delete":c>0&&(e={delete:c}),c=0;break;case"insert":("object"===typeof a||a.length>0)&&(e={insert:a},n.size>0&&(e.attributes={},n.forEach(((t,n)=>{null!==t&&(e.attributes[n]=t)})))),a="";break;case"retain":l>0&&(e={retain:l},x.xb(s)||(e.attributes=x.f0({},s))),l=0;break}e&&t.push(e),o=null}};while(null!==i){switch(i.content.constructor){case Qn:case In:this.adds(i)?this.deletes(i)||(u(),o="insert",a=i.content.getContent()[0],u()):this.deletes(i)?("delete"!==o&&(u(),o="delete"),c+=1):i.deleted||("retain"!==o&&(u(),o="retain"),l+=1);break;case Hn:this.adds(i)?this.deletes(i)||("insert"!==o&&(u(),o="insert"),a+=i.content.str):this.deletes(i)?("delete"!==o&&(u(),o="delete"),c+=i.length):i.deleted||("retain"!==o&&(u(),o="retain"),l+=i.length);break;case Un:{const{key:t,value:a}=i.content;if(this.adds(i)){if(!this.deletes(i)){const l=n.get(t)||null;Zt(l,a)?null!==a&&i.delete(e):("retain"===o&&u(),Zt(a,r.get(t)||null)?delete s[t]:s[t]=a)}}else if(this.deletes(i)){r.set(t,a);const e=n.get(t)||null;Zt(e,a)||("retain"===o&&u(),s[t]=e)}else if(!i.deleted){r.set(t,a);const n=s[t];void 0!==n&&(Zt(n,a)?null!==n&&i.delete(e):("retain"===o&&u(),null===a?delete s[t]:s[t]=a))}i.deleted||("insert"===o&&u(),tn(n,i.content));break}}i=i.right}u();while(t.length>0){const e=t[t.length-1];if(void 0===e.retain||void 0!==e.attributes)break;t.pop()}})),this._delta=t}return this._delta}}class fn extends Mt{constructor(e){super(),this._pending=void 0!==e?[()=>this.insert(0,e)]:[],this._searchMarker=[]}get length(){return this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach((e=>e()))}catch(n){console.error(n)}this._pending=null}_copy(){return new fn}clone(){const e=new fn;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);const n=new hn(this,e,t);Et(this,e,n),e.local||(e._needFormattingCleanup=!0)}toString(){let e="",t=this._start;while(null!==t)!t.deleted&&t.countable&&t.content.constructor===Hn&&(e+=t.content.str),t=t.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:t=!0}={}){null!==this.doc?Ke(this.doc,(n=>{const r=new Kt(null,this._start,0,new Map);for(let i=0;i<e.length;i++){const o=e[i];if(void 0!==o.insert){const s=t||"string"!==typeof o.insert||i!==e.length-1||null!==r.right||"\n"!==o.insert.slice(-1)?o.insert:o.insert.slice(0,-1);("string"!==typeof s||s.length>0)&&on(n,this,r,s,o.attributes||{})}else void 0!==o.retain?sn(n,this,r,o.retain,o.attributes||{}):void 0!==o.delete&&dn(n,r,o.delete)}})):this._pending.push((()=>this.applyDelta(e)))}toDelta(e,t,n){const r=[],i=new Map,o=this.doc;let s="",a=this._start;function l(){if(s.length>0){const e={};let t=!1;i.forEach(((n,r)=>{t=!0,e[r]=n}));const n={insert:s};t&&(n.attributes=e),r.push(n),s=""}}const c=()=>{while(null!==a){if(Oe(a,e)||void 0!==t&&Oe(a,t))switch(a.content.constructor){case Hn:{const r=i.get("ychange");void 0===e||Oe(a,e)?void 0===t||Oe(a,t)?void 0!==r&&(l(),i.delete("ychange")):void 0!==r&&r.user===a.id.client&&"added"===r.type||(l(),i.set("ychange",n?n("added",a.id):{type:"added"})):void 0!==r&&r.user===a.id.client&&"removed"===r.type||(l(),i.set("ychange",n?n("removed",a.id):{type:"removed"})),s+=a.content.str;break}case Qn:case In:{l();const e={insert:a.content.getContent()[0]};if(i.size>0){const t={};e.attributes=t,i.forEach(((e,n)=>{t[n]=e}))}r.push(e);break}case Un:Oe(a,e)&&(l(),tn(i,a.content));break}a=a.right}l()};return e||t?Ke(o,(n=>{e&&Re(n,e),t&&Re(n,t),c()}),"cleanup"):c(),r}insert(e,t,n){if(t.length<=0)return;const r=this.doc;null!==r?Ke(r,(r=>{const i=Qt(r,this,e);n||(n={},i.currentAttributes.forEach(((e,t)=>{n[t]=e}))),on(r,this,i,t,n)})):this._pending.push((()=>this.insert(e,t,n)))}insertEmbed(e,t,n={}){const r=this.doc;null!==r?Ke(r,(r=>{const i=Qt(r,this,e);on(r,this,i,t,n)})):this._pending.push((()=>this.insertEmbed(e,t,n)))}delete(e,t){if(0===t)return;const n=this.doc;null!==n?Ke(n,(n=>{dn(n,Qt(n,this,e),t)})):this._pending.push((()=>this.delete(e,t)))}format(e,t,n){if(0===t)return;const r=this.doc;null!==r?Ke(r,(r=>{const i=Qt(r,this,e);null!==i.right&&sn(r,this,i,t,n)})):this._pending.push((()=>this.format(e,t,n)))}removeAttribute(e){null!==this.doc?Ke(this.doc,(t=>{Ft(t,this,e)})):this._pending.push((()=>this.removeAttribute(e)))}setAttribute(e,t){null!==this.doc?Ke(this.doc,(n=>{Bt(n,this,e,t)})):this._pending.push((()=>this.setAttribute(e,t)))}getAttribute(e){return Vt(this,e)}getAttributes(){return zt(this)}_write(e){e.writeTypeRef(Yn)}}const pn=e=>new fn;class mn{constructor(e,t=(()=>!0)){this._filter=t,this._root=e,this._currentNode=e._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(null!==e&&(!this._firstCall||e.deleted||!this._filter(t)))do{if(t=e.content.type,e.deleted||t.constructor!==yn&&t.constructor!==gn||null===t._start)while(null!==e){if(null!==e.right){e=e.right;break}e=e.parent===this._root?null:e.parent._item}else e=t._start}while(null!==e&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,null===e?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class gn extends Mt{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new gn}clone(){const e=new gn;return e.insert(0,this.toArray().map((e=>e instanceof Mt?e.clone():e))),e}get length(){return null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(e){return new mn(this,e)}querySelector(e){e=e.toUpperCase();const t=new mn(this,(t=>t.nodeName&&t.nodeName.toUpperCase()===e)),n=t.next();return n.done?null:n.value}querySelectorAll(e){return e=e.toUpperCase(),i.Dp(new mn(this,(t=>t.nodeName&&t.nodeName.toUpperCase()===e)))}_callObserver(e,t){Et(this,e,new _n(this,t,e))}toString(){return Ot(this,(e=>e.toString())).join("")}toJSON(){return this.toString()}toDOM(e=document,t={},n){const r=e.createDocumentFragment();return void 0!==n&&n._createAssociation(r,this),kt(this,(i=>{r.insertBefore(i.toDOM(e,t,n),null)})),r}insert(e,t){null!==this.doc?Ke(this.doc,(n=>{It(n,this,e,t)})):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(null!==this.doc)Ke(this.doc,(n=>{const r=e&&e instanceof Mt?e._item:e;Lt(n,this,r,t)}));else{const n=this._prelimContent,r=null===e?0:n.findIndex((t=>t===e))+1;if(0===r&&null!==e)throw h.Ue("Reference item not found");n.splice(r,0,...t)}}delete(e,t=1){null!==this.doc?Ke(this.doc,(n=>{Ut(n,this,e,t)})):this._prelimContent.splice(e,t)}toArray(){return Ct(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return Pt(this,e)}slice(e=0,t=this.length){return Tt(this,e,t)}forEach(e){kt(this,e)}_write(e){e.writeTypeRef(Zn)}}const vn=e=>new gn;class yn extends gn{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach(((e,t)=>{this.setAttribute(t,e)})),this._prelimAttrs=null}_copy(){return new yn(this.nodeName)}clone(){const e=new yn(this.nodeName),t=this.getAttributes();return x.Ed(t,((t,n)=>{"string"===typeof t&&e.setAttribute(n,t)})),e.insert(0,this.toArray().map((e=>e instanceof Mt?e.clone():e))),e}toString(){const e=this.getAttributes(),t=[],n=[];for(const s in e)n.push(s);n.sort();const r=n.length;for(let s=0;s<r;s++){const r=n[s];t.push(r+'="'+e[r]+'"')}const i=this.nodeName.toLocaleLowerCase(),o=t.length>0?" "+t.join(" "):"";return`<${i}${o}>${super.toString()}</${i}>`}removeAttribute(e){null!==this.doc?Ke(this.doc,(t=>{Ft(t,this,e)})):this._prelimAttrs.delete(e)}setAttribute(e,t){null!==this.doc?Ke(this.doc,(n=>{Bt(n,this,e,t)})):this._prelimAttrs.set(e,t)}getAttribute(e){return Vt(this,e)}hasAttribute(e){return jt(this,e)}getAttributes(){return zt(this)}toDOM(e=document,t={},n){const r=e.createElement(this.nodeName),i=this.getAttributes();for(const o in i){const e=i[o];"string"===typeof e&&r.setAttribute(o,e)}return kt(this,(i=>{r.appendChild(i.toDOM(e,t,n))})),void 0!==n&&n._createAssociation(r,this),r}_write(e){e.writeTypeRef(Xn),e.writeKey(this.nodeName)}}const bn=e=>new yn(e.readKey());class _n extends pt{constructor(e,t,n){super(e,n),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach((e=>{null===e?this.childListChanged=!0:this.attributesChanged.add(e)}))}}class wn extends Yt{constructor(e){super(),this.hookName=e}_copy(){return new wn(this.hookName)}clone(){const e=new wn(this.hookName);return this.forEach(((t,n)=>{e.set(n,t)})),e}toDOM(e=document,t={},n){const r=t[this.hookName];let i;return i=void 0!==r?r.createDom(this):document.createElement(this.hookName),i.setAttribute("data-yjs-hook",this.hookName),void 0!==n&&n._createAssociation(i,this),i}_write(e){e.writeTypeRef(Kn),e.writeKey(this.hookName)}}const xn=e=>new wn(e.readKey());class Sn extends fn{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new Sn}clone(){const e=new Sn;return e.applyDelta(this.toDelta()),e}toDOM(e=document,t,n){const r=e.createTextNode(this.toString());return void 0!==n&&n._createAssociation(r,this),r}toString(){return this.toDelta().map((e=>{const t=[];for(const r in e.attributes){const n=[];for(const t in e.attributes[r])n.push({key:t,value:e.attributes[r][t]});n.sort(((e,t)=>e.key<t.key?-1:1)),t.push({nodeName:r,attrs:n})}t.sort(((e,t)=>e.nodeName<t.nodeName?-1:1));let n="";for(let r=0;r<t.length;r++){const e=t[r];n+=`<${e.nodeName}`;for(let t=0;t<e.attrs.length;t++){const r=e.attrs[t];n+=` ${r.key}="${r.value}"`}n+=">"}n+=e.insert;for(let r=t.length-1;r>=0;r--)n+=`</${t[r].nodeName}>`;return n})).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(Jn)}}const En=e=>new Sn;class Mn{constructor(e,t){this.id=e,this.length=t}get deleted(){throw h.Nw()}mergeWith(e){return!1}write(e,t,n){throw h.Nw()}integrate(e,t){throw h.Nw()}}const Tn=0;class Cn extends Mn{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),Ie(e.doc.store,this)}write(e,t){e.writeInfo(Tn),e.writeLen(this.length-t)}getMissing(e,t){return null}}class An{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new An(this.content)}splice(e){throw h.Nw()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}}const kn=e=>new An(e.readBuf());class On{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new On(this.len)}splice(e){const t=new On(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){O(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}}const Rn=e=>new On(e.readLen()),Pn=(e,t)=>new U({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class Ln{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),null!==e.meta&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Ln(Pn(this.doc.guid,this.opts))}splice(e){throw h.Nw()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const Dn=e=>new Ln(Pn(e.readString(),e.readAny()));class In{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new In(this.embed)}splice(e){throw h.Nw()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}}const Nn=e=>new In(e.readJSON());class Un{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new Un(this.key,this.value)}splice(e){throw h.Nw()}mergeWith(e){return!1}integrate(e,t){t.parent._searchMarker=null}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const Fn=e=>new Un(e.readKey(),e.readJSON());class Bn{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Bn(this.arr)}splice(e){const t=new Bn(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const n=this.arr.length;e.writeLen(n-t);for(let r=t;r<n;r++){const t=this.arr[r];e.writeString(void 0===t?"undefined":JSON.stringify(t))}}getRef(){return 2}}const Vn=e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++){const t=e.readString();"undefined"===t?n.push(void 0):n.push(JSON.parse(t))}return new Bn(n)};class zn{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new zn(this.arr)}splice(e){const t=new zn(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const n=this.arr.length;e.writeLen(n-t);for(let r=t;r<n;r++){const t=this.arr[r];e.writeAny(t)}}getRef(){return 8}}const jn=e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++)n.push(e.readAny());return new zn(n)};class Hn{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Hn(this.str)}splice(e){const t=new Hn(this.str.slice(e));this.str=this.str.slice(0,e);const n=this.str.charCodeAt(e-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,e-1)+"�",t.str="�"+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(0===t?this.str:this.str.slice(t))}getRef(){return 4}}const Wn=e=>new Hn(e.readString()),Gn=[$t,Xt,pn,bn,vn,xn,En],$n=0,qn=1,Yn=2,Xn=3,Zn=4,Kn=5,Jn=6;class Qn{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Qn(this.type._copy())}splice(e){throw h.Nw()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;while(null!==t)t.deleted?e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach((t=>{t.deleted?e._mergeStructs.push(t):t.delete(e)})),e.changed.delete(this.type)}gc(e){let t=this.type._start;while(null!==t)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach((t=>{while(null!==t)t.gc(e,!0),t=t.left})),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}}const er=e=>new Qn(Gn[e.readTypeRef()](e)),tr=(e,t)=>{let n,r=t,i=0;do{i>0&&(r=ge(r.client,r.clock+i)),n=Fe(e,r),i=r.clock-n.id.clock,r=n.redone}while(null!==r&&n instanceof sr);return{item:n,diff:i}},nr=(e,t)=>{while(null!==e&&e.keep!==t)e.keep=t,e=e.parent._item},rr=(e,t,n)=>{const{client:r,clock:i}=t.id,o=new sr(ge(r,i+n),t,ge(r,i+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&o.markDeleted(),t.keep&&(o.keep=!0),null!==t.redone&&(o.redone=ge(t.redone.client,t.redone.clock+n)),t.right=o,null!==o.right&&(o.right.left=o),e._mergeStructs.push(o),null!==o.parentSub&&null===o.right&&o.parent._map.set(o.parentSub,o),t.length=n,o},ir=(e,t)=>i.G(e,(e=>C(e.deletions,t))),or=(e,t,n,r,i,o)=>{const s=e.doc,a=s.store,l=s.clientID,c=t.redone;if(null!==c)return Ve(e,c);let u,d=t.parent._item,h=null;if(null!==d&&!0===d.deleted){if(null===d.redone&&(!n.has(d)||null===or(e,d,n,r,i,o)))return null;while(null!==d.redone)d=Ve(e,d.redone)}const f=null===d?t.parent:d.content.type;if(null===t.parentSub){h=t.left,u=t;while(null!==h){let t=h;while(null!==t&&t.parent._item!==d)t=null===t.redone?null:Ve(e,t.redone);if(null!==t&&t.parent._item===d){h=t;break}h=h.left}while(null!==u){let t=u;while(null!==t&&t.parent._item!==d)t=null===t.redone?null:Ve(e,t.redone);if(null!==t&&t.parent._item===d){u=t;break}u=u.right}}else if(u=null,t.right&&!i){h=t;while(null!==h&&null!==h.right&&(h.right.redone||C(r,h.right.id)||ir(o.undoStack,h.right.id)||ir(o.redoStack,h.right.id))){h=h.right;while(h.redone)h=Ve(e,h.redone)}if(h&&null!==h.right)return null}else h=f._map.get(t.parentSub)||null;const p=De(a,l),m=ge(l,p),g=new sr(m,h,h&&h.lastId,u,u&&u.id,f,t.parentSub,t.content.copy());return t.redone=m,nr(g,!0),g.integrate(e,0),g};class sr extends Mn{constructor(e,t,n,r,i,o,s,a){super(e,a.getLength()),this.origin=n,this.left=t,this.right=r,this.rightOrigin=i,this.parent=o,this.parentSub=s,this.redone=null,this.content=a,this.info=this.content.isCountable()?f.Qn:0}set marker(e){(this.info&f.Ko)>0!==e&&(this.info^=f.Ko)}get marker(){return(this.info&f.Ko)>0}get keep(){return(this.info&f.Vw)>0}set keep(e){this.keep!==e&&(this.info^=f.Vw)}get countable(){return(this.info&f.Qn)>0}get deleted(){return(this.info&f.CY)>0}set deleted(e){this.deleted!==e&&(this.info^=f.CY)}markDeleted(){this.info|=f.CY}getMissing(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=De(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=De(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===pe&&this.id.client!==this.parent.client&&this.parent.clock>=De(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=ze(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Ve(e,this.rightOrigin),this.rightOrigin=this.right.id),(this.left&&this.left.constructor===Cn||this.right&&this.right.constructor===Cn)&&(this.parent=null),this.parent){if(this.parent.constructor===pe){const e=Fe(t,this.parent);e.constructor===Cn?this.parent=null:this.parent=e.content.type}}else this.left&&this.left.constructor===sr&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===sr&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=ze(e,e.doc.store,ge(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let t,n=this.left;if(null!==n)t=n.right;else if(null!==this.parentSub){t=this.parent._map.get(this.parentSub)||null;while(null!==t&&null!==t.left)t=t.left}else t=this.parent._start;const r=new Set,i=new Set;while(null!==t&&t!==this.right){if(i.add(t),r.add(t),me(this.origin,t.origin)){if(t.id.client<this.id.client)n=t,r.clear();else if(me(this.rightOrigin,t.rightOrigin))break}else{if(null===t.origin||!i.has(Fe(e.doc.store,t.origin)))break;r.has(Fe(e.doc.store,t.origin))||(n=t,r.clear())}t=t.right}this.left=n}if(null!==this.left){const e=this.left.right;this.right=e,this.left.right=this}else{let e;if(null!==this.parentSub){e=this.parent._map.get(this.parentSub)||null;while(null!==e&&null!==e.left)e=e.left}else e=this.parent._start,this.parent._start=this;this.right=e}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(e)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),Ie(e.doc.store,this),this.content.integrate(e,this),$e(e,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(e)}else new Cn(this.id,this.length).integrate(e,0)}get next(){let e=this.right;while(null!==e&&e.deleted)e=e.right;return e}get prev(){let e=this.left;while(null!==e&&e.deleted)e=e.left;return e}get lastId(){return 1===this.length?this.id:ge(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&me(e.origin,this.lastId)&&this.right===e&&me(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&null===this.redone&&null===e.redone&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const t=this.parent._searchMarker;return t&&t.forEach((t=>{t.p===e&&(t.p=this,!this.deleted&&this.countable&&(t.index-=this.length))})),e.keep&&(this.keep=!0),this.right=e.right,null!==this.right&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const t=this.parent;this.countable&&null===this.parentSub&&(t._length-=this.length),this.markDeleted(),O(e.deleteSet,this.id.client,this.id.clock,this.length),$e(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw h.zR();this.content.gc(e),t?je(e,this,new Cn(this.id,this.length)):this.content=new On(this.length)}write(e,t){const n=t>0?ge(this.id.client,this.id.clock+t-1):this.origin,r=this.rightOrigin,i=this.parentSub,o=this.content.getRef()&f.kr|(null===n?0:f.x1)|(null===r?0:f.rc)|(null===i?0:f.cq);if(e.writeInfo(o),null!==n&&e.writeLeftID(n),null!==r&&e.writeRightID(r),null===n&&null===r){const t=this.parent;if(void 0!==t._item){const n=t._item;if(null===n){const n=ve(t);e.writeParentInfo(!0),e.writeString(n)}else e.writeParentInfo(!1),e.writeLeftID(n.id)}else t.constructor===String?(e.writeParentInfo(!0),e.writeString(t)):t.constructor===pe?(e.writeParentInfo(!1),e.writeLeftID(t)):h.zR();null!==i&&e.writeString(i)}this.content.write(e,t)}}const ar=(e,t)=>lr[t&f.kr](e),lr=[()=>{h.zR()},Rn,Vn,kn,Wn,Nn,Fn,er,jn,Dn,()=>{h.zR()}],cr=10;class ur extends Mn{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){h.zR()}write(e,t){e.writeInfo(cr),a.uE(e.restEncoder,this.length-t)}getMissing(e,t){return null}}const dr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{},hr="__ $YJS$ __";!0===dr[hr]&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),dr[hr]=!0}}]);
//# sourceMappingURL=chunk-vendors.29b3ca01.js.map