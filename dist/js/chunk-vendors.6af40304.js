(self["webpackChunknoosld"]=self["webpackChunknoosld"]||[]).push([[998],{9662:function(t,e,n){var r=n(614),i=n(6330),o=TypeError;t.exports=function(t){if(r(t))return t;throw o(i(t)+" is not a function")}},6077:function(t,e,n){var r=n(614),i=String,o=TypeError;t.exports=function(t){if("object"==typeof t||r(t))return t;throw o("Can't set "+i(t)+" as a prototype")}},1223:function(t,e,n){var r=n(5112),i=n(30),o=n(3070).f,s=r("unscopables"),a=Array.prototype;void 0==a[s]&&o(a,s,{configurable:!0,value:i(null)}),t.exports=function(t){a[s][t]=!0}},5787:function(t,e,n){var r=n(7976),i=TypeError;t.exports=function(t,e){if(r(e,t))return t;throw i("Incorrect invocation")}},9670:function(t,e,n){var r=n(111),i=String,o=TypeError;t.exports=function(t){if(r(t))return t;throw o(i(t)+" is not an object")}},3013:function(t){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},260:function(t,e,n){"use strict";var r,i,o,s=n(3013),a=n(9781),c=n(7854),l=n(614),u=n(111),h=n(2597),d=n(648),f=n(6330),p=n(8880),m=n(8052),g=n(7045),v=n(7976),_=n(9518),y=n(7674),b=n(5112),w=n(9711),x=n(9909),E=x.enforce,S=x.get,M=c.Int8Array,T=M&&M.prototype,A=c.Uint8ClampedArray,C=A&&A.prototype,R=M&&_(M),P=T&&_(T),O=Object.prototype,L=c.TypeError,k=b("toStringTag"),I=w("TYPED_ARRAY_TAG"),D="TypedArrayConstructor",N=s&&!!y&&"Opera"!==d(c.opera),U=!1,F={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},B={BigInt64Array:8,BigUint64Array:8},z=function(t){if(!u(t))return!1;var e=d(t);return"DataView"===e||h(F,e)||h(B,e)},j=function(t){var e=_(t);if(u(e)){var n=S(e);return n&&h(n,D)?n[D]:j(e)}},H=function(t){if(!u(t))return!1;var e=d(t);return h(F,e)||h(B,e)},V=function(t){if(H(t))return t;throw L("Target is not a typed array")},G=function(t){if(l(t)&&(!y||v(R,t)))return t;throw L(f(t)+" is not a typed array constructor")},W=function(t,e,n,r){if(a){if(n)for(var i in F){var o=c[i];if(o&&h(o.prototype,t))try{delete o.prototype[t]}catch(s){try{o.prototype[t]=e}catch(l){}}}P[t]&&!n||m(P,t,n?e:N&&T[t]||e,r)}},q=function(t,e,n){var r,i;if(a){if(y){if(n)for(r in F)if(i=c[r],i&&h(i,t))try{delete i[t]}catch(o){}if(R[t]&&!n)return;try{return m(R,t,n?e:N&&R[t]||e)}catch(o){}}for(r in F)i=c[r],!i||i[t]&&!n||m(i,t,e)}};for(r in F)i=c[r],o=i&&i.prototype,o?E(o)[D]=i:N=!1;for(r in B)i=c[r],o=i&&i.prototype,o&&(E(o)[D]=i);if((!N||!l(R)||R===Function.prototype)&&(R=function(){throw L("Incorrect invocation")},N))for(r in F)c[r]&&y(c[r],R);if((!N||!P||P===O)&&(P=R.prototype,N))for(r in F)c[r]&&y(c[r].prototype,P);if(N&&_(C)!==P&&y(C,P),a&&!h(P,k))for(r in U=!0,g(P,k,{configurable:!0,get:function(){return u(this)?this[I]:void 0}}),F)c[r]&&p(c[r],I,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:N,TYPED_ARRAY_TAG:U&&I,aTypedArray:V,aTypedArrayConstructor:G,exportTypedArrayMethod:W,exportTypedArrayStaticMethod:q,getTypedArrayConstructor:j,isView:z,isTypedArray:H,TypedArray:R,TypedArrayPrototype:P}},7745:function(t,e,n){var r=n(6244);t.exports=function(t,e){var n=0,i=r(e),o=new t(i);while(i>n)o[n]=e[n++];return o}},1318:function(t,e,n){var r=n(5656),i=n(1400),o=n(6244),s=function(t){return function(e,n,s){var a,c=r(e),l=o(c),u=i(s,l);if(t&&n!=n){while(l>u)if(a=c[u++],a!=a)return!0}else for(;l>u;u++)if((t||u in c)&&c[u]===n)return t||u||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},9671:function(t,e,n){var r=n(9974),i=n(8361),o=n(7908),s=n(6244),a=function(t){var e=1==t;return function(n,a,c){var l,u,h=o(n),d=i(h),f=r(a,c),p=s(d);while(p-- >0)if(l=d[p],u=f(l,p,h),u)switch(t){case 0:return l;case 1:return p}return e?-1:void 0}};t.exports={findLast:a(0),findLastIndex:a(1)}},3658:function(t,e,n){"use strict";var r=n(9781),i=n(3157),o=TypeError,s=Object.getOwnPropertyDescriptor,a=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=a?function(t,e){if(i(t)&&!s(t,"length").writable)throw o("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},1843:function(t,e,n){var r=n(6244);t.exports=function(t,e){for(var n=r(t),i=new e(n),o=0;o<n;o++)i[o]=t[n-o-1];return i}},1572:function(t,e,n){var r=n(6244),i=n(9303),o=RangeError;t.exports=function(t,e,n,s){var a=r(t),c=i(n),l=c<0?a+c:c;if(l>=a||l<0)throw o("Incorrect index");for(var u=new e(a),h=0;h<a;h++)u[h]=h===l?s:t[h];return u}},4326:function(t,e,n){var r=n(1702),i=r({}.toString),o=r("".slice);t.exports=function(t){return o(i(t),8,-1)}},648:function(t,e,n){var r=n(1694),i=n(614),o=n(4326),s=n(5112),a=s("toStringTag"),c=Object,l="Arguments"==o(function(){return arguments}()),u=function(t,e){try{return t[e]}catch(n){}};t.exports=r?o:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=u(e=c(t),a))?n:l?o(e):"Object"==(r=o(e))&&i(e.callee)?"Arguments":r}},9920:function(t,e,n){var r=n(2597),i=n(3887),o=n(1236),s=n(3070);t.exports=function(t,e,n){for(var a=i(e),c=s.f,l=o.f,u=0;u<a.length;u++){var h=a[u];r(t,h)||n&&r(n,h)||c(t,h,l(e,h))}}},8544:function(t,e,n){var r=n(7293);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},8880:function(t,e,n){var r=n(9781),i=n(3070),o=n(9114);t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},9114:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},7045:function(t,e,n){var r=n(6339),i=n(3070);t.exports=function(t,e,n){return n.get&&r(n.get,e,{getter:!0}),n.set&&r(n.set,e,{setter:!0}),i.f(t,e,n)}},8052:function(t,e,n){var r=n(614),i=n(3070),o=n(6339),s=n(3072);t.exports=function(t,e,n,a){a||(a={});var c=a.enumerable,l=void 0!==a.name?a.name:e;if(r(n)&&o(n,l,a),a.global)c?t[e]=n:s(e,n);else{try{a.unsafe?t[e]&&(c=!0):delete t[e]}catch(u){}c?t[e]=n:i.f(t,e,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},3072:function(t,e,n){var r=n(7854),i=Object.defineProperty;t.exports=function(t,e){try{i(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},9781:function(t,e,n){var r=n(7293);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:function(t){var e="object"==typeof document&&document.all,n="undefined"==typeof e&&void 0!==e;t.exports={all:e,IS_HTMLDDA:n}},317:function(t,e,n){var r=n(7854),i=n(111),o=r.document,s=i(o)&&i(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},7207:function(t){var e=TypeError,n=9007199254740991;t.exports=function(t){if(t>n)throw e("Maximum allowed index exceeded");return t}},3678:function(t){t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},8113:function(t){t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7392:function(t,e,n){var r,i,o=n(7854),s=n(8113),a=o.process,c=o.Deno,l=a&&a.versions||c&&c.version,u=l&&l.v8;u&&(r=u.split("."),i=r[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&s&&(r=s.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/),r&&(i=+r[1]))),t.exports=i},748:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},1060:function(t,e,n){var r=n(1702),i=Error,o=r("".replace),s=function(t){return String(i(t).stack)}("zxcasd"),a=/\n\s*at [^:]*:[^\n]*/,c=a.test(s);t.exports=function(t,e){if(c&&"string"==typeof t&&!i.prepareStackTrace)while(e--)t=o(t,a,"");return t}},5392:function(t,e,n){var r=n(8880),i=n(1060),o=n(2914),s=Error.captureStackTrace;t.exports=function(t,e,n,a){o&&(s?s(t,e):r(t,"stack",i(n,a)))}},2914:function(t,e,n){var r=n(7293),i=n(9114);t.exports=!r((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",i(1,7)),7!==t.stack)}))},2109:function(t,e,n){var r=n(7854),i=n(1236).f,o=n(8880),s=n(8052),a=n(3072),c=n(9920),l=n(4705);t.exports=function(t,e){var n,u,h,d,f,p,m=t.target,g=t.global,v=t.stat;if(u=g?r:v?r[m]||a(m,{}):(r[m]||{}).prototype,u)for(h in e){if(f=e[h],t.dontCallGetSet?(p=i(u,h),d=p&&p.value):d=u[h],n=l(g?h:m+(v?".":"#")+h,t.forced),!n&&void 0!==d){if(typeof f==typeof d)continue;c(f,d)}(t.sham||d&&d.sham)&&o(f,"sham",!0),s(u,h,f,t)}}},7293:function(t){t.exports=function(t){try{return!!t()}catch(e){return!0}}},2104:function(t,e,n){var r=n(4374),i=Function.prototype,o=i.apply,s=i.call;t.exports="object"==typeof Reflect&&Reflect.apply||(r?s.bind(o):function(){return s.apply(o,arguments)})},9974:function(t,e,n){var r=n(1470),i=n(9662),o=n(4374),s=r(r.bind);t.exports=function(t,e){return i(t),void 0===e?t:o?s(t,e):function(){return t.apply(e,arguments)}}},4374:function(t,e,n){var r=n(7293);t.exports=!r((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},6916:function(t,e,n){var r=n(4374),i=Function.prototype.call;t.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},6530:function(t,e,n){var r=n(9781),i=n(2597),o=Function.prototype,s=r&&Object.getOwnPropertyDescriptor,a=i(o,"name"),c=a&&"something"===function(){}.name,l=a&&(!r||r&&s(o,"name").configurable);t.exports={EXISTS:a,PROPER:c,CONFIGURABLE:l}},5668:function(t,e,n){var r=n(1702),i=n(9662);t.exports=function(t,e,n){try{return r(i(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(o){}}},1470:function(t,e,n){var r=n(4326),i=n(1702);t.exports=function(t){if("Function"===r(t))return i(t)}},1702:function(t,e,n){var r=n(4374),i=Function.prototype,o=i.call,s=r&&i.bind.bind(o,o);t.exports=r?s:function(t){return function(){return o.apply(t,arguments)}}},5005:function(t,e,n){var r=n(7854),i=n(614),o=function(t){return i(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?o(r[t]):r[t]&&r[t][e]}},8173:function(t,e,n){var r=n(9662),i=n(8554);t.exports=function(t,e){var n=t[e];return i(n)?void 0:r(n)}},7854:function(t,e,n){var r=function(t){return t&&t.Math==Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||this||Function("return this")()},2597:function(t,e,n){var r=n(1702),i=n(7908),o=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return o(i(t),e)}},3501:function(t){t.exports={}},1003:function(t,e,n){var r=n(5005);t.exports=r("document","documentElement")},4664:function(t,e,n){var r=n(9781),i=n(7293),o=n(317);t.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},8361:function(t,e,n){var r=n(1702),i=n(7293),o=n(4326),s=Object,a=r("".split);t.exports=i((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"==o(t)?a(t,""):s(t)}:s},9587:function(t,e,n){var r=n(614),i=n(111),o=n(7674);t.exports=function(t,e,n){var s,a;return o&&r(s=e.constructor)&&s!==n&&i(a=s.prototype)&&a!==n.prototype&&o(t,a),t}},2788:function(t,e,n){var r=n(1702),i=n(614),o=n(5465),s=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(t){return s(t)}),t.exports=o.inspectSource},8340:function(t,e,n){var r=n(111),i=n(8880);t.exports=function(t,e){r(e)&&"cause"in e&&i(t,"cause",e.cause)}},9909:function(t,e,n){var r,i,o,s=n(4811),a=n(7854),c=n(111),l=n(8880),u=n(2597),h=n(5465),d=n(6200),f=n(3501),p="Object already initialized",m=a.TypeError,g=a.WeakMap,v=function(t){return o(t)?i(t):r(t,{})},_=function(t){return function(e){var n;if(!c(e)||(n=i(e)).type!==t)throw m("Incompatible receiver, "+t+" required");return n}};if(s||h.state){var y=h.state||(h.state=new g);y.get=y.get,y.has=y.has,y.set=y.set,r=function(t,e){if(y.has(t))throw m(p);return e.facade=t,y.set(t,e),e},i=function(t){return y.get(t)||{}},o=function(t){return y.has(t)}}else{var b=d("state");f[b]=!0,r=function(t,e){if(u(t,b))throw m(p);return e.facade=t,l(t,b,e),e},i=function(t){return u(t,b)?t[b]:{}},o=function(t){return u(t,b)}}t.exports={set:r,get:i,has:o,enforce:v,getterFor:_}},3157:function(t,e,n){var r=n(4326);t.exports=Array.isArray||function(t){return"Array"==r(t)}},4067:function(t,e,n){var r=n(648);t.exports=function(t){var e=r(t);return"BigInt64Array"==e||"BigUint64Array"==e}},614:function(t,e,n){var r=n(4154),i=r.all;t.exports=r.IS_HTMLDDA?function(t){return"function"==typeof t||t===i}:function(t){return"function"==typeof t}},4705:function(t,e,n){var r=n(7293),i=n(614),o=/#|\.prototype\./,s=function(t,e){var n=c[a(t)];return n==u||n!=l&&(i(e)?r(e):!!e)},a=s.normalize=function(t){return String(t).replace(o,".").toLowerCase()},c=s.data={},l=s.NATIVE="N",u=s.POLYFILL="P";t.exports=s},8554:function(t){t.exports=function(t){return null===t||void 0===t}},111:function(t,e,n){var r=n(614),i=n(4154),o=i.all;t.exports=i.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:r(t)||t===o}:function(t){return"object"==typeof t?null!==t:r(t)}},1913:function(t){t.exports=!1},2190:function(t,e,n){var r=n(5005),i=n(614),o=n(7976),s=n(3307),a=Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return i(e)&&o(e.prototype,a(t))}},6244:function(t,e,n){var r=n(7466);t.exports=function(t){return r(t.length)}},6339:function(t,e,n){var r=n(1702),i=n(7293),o=n(614),s=n(2597),a=n(9781),c=n(6530).CONFIGURABLE,l=n(2788),u=n(9909),h=u.enforce,d=u.get,f=String,p=Object.defineProperty,m=r("".slice),g=r("".replace),v=r([].join),_=a&&!i((function(){return 8!==p((function(){}),"length",{value:8}).length})),y=String(String).split("String"),b=t.exports=function(t,e,n){"Symbol("===m(f(e),0,7)&&(e="["+g(f(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!s(t,"name")||c&&t.name!==e)&&(a?p(t,"name",{value:e,configurable:!0}):t.name=e),_&&n&&s(n,"arity")&&t.length!==n.arity&&p(t,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?a&&p(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(i){}var r=h(t);return s(r,"source")||(r.source=v(y,"string"==typeof e?e:"")),t};Function.prototype.toString=b((function(){return o(this)&&d(this).source||l(this)}),"toString")},4758:function(t){var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var r=+t;return(r>0?n:e)(r)}},6277:function(t,e,n){var r=n(1340);t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:r(t)}},30:function(t,e,n){var r,i=n(9670),o=n(6048),s=n(748),a=n(3501),c=n(1003),l=n(317),u=n(6200),h=">",d="<",f="prototype",p="script",m=u("IE_PROTO"),g=function(){},v=function(t){return d+p+h+t+d+"/"+p+h},_=function(t){t.write(v("")),t.close();var e=t.parentWindow.Object;return t=null,e},y=function(){var t,e=l("iframe"),n="java"+p+":";return e.style.display="none",c.appendChild(e),e.src=String(n),t=e.contentWindow.document,t.open(),t.write(v("document.F=Object")),t.close(),t.F},b=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}b="undefined"!=typeof document?document.domain&&r?_(r):y():_(r);var t=s.length;while(t--)delete b[f][s[t]];return b()};a[m]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(g[f]=i(t),n=new g,g[f]=null,n[m]=t):n=b(),void 0===e?n:o.f(n,e)}},6048:function(t,e,n){var r=n(9781),i=n(3353),o=n(3070),s=n(9670),a=n(5656),c=n(1956);e.f=r&&!i?Object.defineProperties:function(t,e){s(t);var n,r=a(e),i=c(e),l=i.length,u=0;while(l>u)o.f(t,n=i[u++],r[n]);return t}},3070:function(t,e,n){var r=n(9781),i=n(4664),o=n(3353),s=n(9670),a=n(4948),c=TypeError,l=Object.defineProperty,u=Object.getOwnPropertyDescriptor,h="enumerable",d="configurable",f="writable";e.f=r?o?function(t,e,n){if(s(t),e=a(e),s(n),"function"===typeof t&&"prototype"===e&&"value"in n&&f in n&&!n[f]){var r=u(t,e);r&&r[f]&&(t[e]=n.value,n={configurable:d in n?n[d]:r[d],enumerable:h in n?n[h]:r[h],writable:!1})}return l(t,e,n)}:l:function(t,e,n){if(s(t),e=a(e),s(n),i)try{return l(t,e,n)}catch(r){}if("get"in n||"set"in n)throw c("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},1236:function(t,e,n){var r=n(9781),i=n(6916),o=n(5296),s=n(9114),a=n(5656),c=n(4948),l=n(2597),u=n(4664),h=Object.getOwnPropertyDescriptor;e.f=r?h:function(t,e){if(t=a(t),e=c(e),u)try{return h(t,e)}catch(n){}if(l(t,e))return s(!i(o.f,t,e),t[e])}},8006:function(t,e,n){var r=n(6324),i=n(748),o=i.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},5181:function(t,e){e.f=Object.getOwnPropertySymbols},9518:function(t,e,n){var r=n(2597),i=n(614),o=n(7908),s=n(6200),a=n(8544),c=s("IE_PROTO"),l=Object,u=l.prototype;t.exports=a?l.getPrototypeOf:function(t){var e=o(t);if(r(e,c))return e[c];var n=e.constructor;return i(n)&&e instanceof n?n.prototype:e instanceof l?u:null}},7976:function(t,e,n){var r=n(1702);t.exports=r({}.isPrototypeOf)},6324:function(t,e,n){var r=n(1702),i=n(2597),o=n(5656),s=n(1318).indexOf,a=n(3501),c=r([].push);t.exports=function(t,e){var n,r=o(t),l=0,u=[];for(n in r)!i(a,n)&&i(r,n)&&c(u,n);while(e.length>l)i(r,n=e[l++])&&(~s(u,n)||c(u,n));return u}},1956:function(t,e,n){var r=n(6324),i=n(748);t.exports=Object.keys||function(t){return r(t,i)}},5296:function(t,e){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);e.f=i?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},7674:function(t,e,n){var r=n(5668),i=n(9670),o=n(6077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=r(Object.prototype,"__proto__","set"),t(n,[]),e=n instanceof Array}catch(s){}return function(n,r){return i(n),o(r),e?t(n,r):n.__proto__=r,n}}():void 0)},2140:function(t,e,n){var r=n(6916),i=n(614),o=n(111),s=TypeError;t.exports=function(t,e){var n,a;if("string"===e&&i(n=t.toString)&&!o(a=r(n,t)))return a;if(i(n=t.valueOf)&&!o(a=r(n,t)))return a;if("string"!==e&&i(n=t.toString)&&!o(a=r(n,t)))return a;throw s("Can't convert object to primitive value")}},3887:function(t,e,n){var r=n(5005),i=n(1702),o=n(8006),s=n(5181),a=n(9670),c=i([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=o.f(a(t)),n=s.f;return n?c(e,n(t)):e}},2626:function(t,e,n){var r=n(3070).f;t.exports=function(t,e,n){n in t||r(t,n,{configurable:!0,get:function(){return e[n]},set:function(t){e[n]=t}})}},4488:function(t,e,n){var r=n(8554),i=TypeError;t.exports=function(t){if(r(t))throw i("Can't call method on "+t);return t}},6200:function(t,e,n){var r=n(2309),i=n(9711),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},5465:function(t,e,n){var r=n(7854),i=n(3072),o="__core-js_shared__",s=r[o]||i(o,{});t.exports=s},2309:function(t,e,n){var r=n(1913),i=n(5465);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.31.0",mode:r?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.31.0/LICENSE",source:"https://github.com/zloirock/core-js"})},6293:function(t,e,n){var r=n(7392),i=n(7293),o=n(7854),s=o.String;t.exports=!!Object.getOwnPropertySymbols&&!i((function(){var t=Symbol();return!s(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},1400:function(t,e,n){var r=n(9303),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},4599:function(t,e,n){var r=n(7593),i=TypeError;t.exports=function(t){var e=r(t,"number");if("number"==typeof e)throw i("Can't convert number to bigint");return BigInt(e)}},5656:function(t,e,n){var r=n(8361),i=n(4488);t.exports=function(t){return r(i(t))}},9303:function(t,e,n){var r=n(4758);t.exports=function(t){var e=+t;return e!==e||0===e?0:r(e)}},7466:function(t,e,n){var r=n(9303),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},7908:function(t,e,n){var r=n(4488),i=Object;t.exports=function(t){return i(r(t))}},2452:function(t,e,n){var r=n(3002),i=RangeError;t.exports=function(t,e){var n=r(t);if(n%e)throw i("Wrong offset");return n}},3002:function(t,e,n){var r=n(9303),i=RangeError;t.exports=function(t){var e=r(t);if(e<0)throw i("The argument can't be less than 0");return e}},7593:function(t,e,n){var r=n(6916),i=n(111),o=n(2190),s=n(8173),a=n(2140),c=n(5112),l=TypeError,u=c("toPrimitive");t.exports=function(t,e){if(!i(t)||o(t))return t;var n,c=s(t,u);if(c){if(void 0===e&&(e="default"),n=r(c,t,e),!i(n)||o(n))return n;throw l("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},4948:function(t,e,n){var r=n(7593),i=n(2190);t.exports=function(t){var e=r(t,"string");return i(e)?e:e+""}},1694:function(t,e,n){var r=n(5112),i=r("toStringTag"),o={};o[i]="z",t.exports="[object z]"===String(o)},1340:function(t,e,n){var r=n(648),i=String;t.exports=function(t){if("Symbol"===r(t))throw TypeError("Cannot convert a Symbol value to a string");return i(t)}},6330:function(t){var e=String;t.exports=function(t){try{return e(t)}catch(n){return"Object"}}},9711:function(t,e,n){var r=n(1702),i=0,o=Math.random(),s=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++i+o,36)}},3307:function(t,e,n){var r=n(6293);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(t,e,n){var r=n(9781),i=n(7293);t.exports=r&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},4811:function(t,e,n){var r=n(7854),i=n(614),o=r.WeakMap;t.exports=i(o)&&/native code/.test(String(o))},5112:function(t,e,n){var r=n(7854),i=n(2309),o=n(2597),s=n(9711),a=n(6293),c=n(3307),l=r.Symbol,u=i("wks"),h=c?l["for"]||l:l&&l.withoutSetter||s;t.exports=function(t){return o(u,t)||(u[t]=a&&o(l,t)?l[t]:h("Symbol."+t)),u[t]}},9191:function(t,e,n){"use strict";var r=n(5005),i=n(2597),o=n(8880),s=n(7976),a=n(7674),c=n(9920),l=n(2626),u=n(9587),h=n(6277),d=n(8340),f=n(5392),p=n(9781),m=n(1913);t.exports=function(t,e,n,g){var v="stackTraceLimit",_=g?2:1,y=t.split("."),b=y[y.length-1],w=r.apply(null,y);if(w){var x=w.prototype;if(!m&&i(x,"cause")&&delete x.cause,!n)return w;var E=r("Error"),S=e((function(t,e){var n=h(g?e:t,void 0),r=g?new w(t):new w;return void 0!==n&&o(r,"message",n),f(r,S,r.stack,2),this&&s(x,this)&&u(r,this,S),arguments.length>_&&d(r,arguments[_]),r}));if(S.prototype=x,"Error"!==b?a?a(S,E):c(S,E,{name:!0}):p&&v in w&&(l(S,w,v),l(S,w,"prepareStackTrace")),c(S,w),!m)try{x.name!==b&&o(x,"name",b),x.constructor=S}catch(M){}return S}}},2262:function(t,e,n){"use strict";var r=n(2109),i=n(7908),o=n(6244),s=n(9303),a=n(1223);r({target:"Array",proto:!0},{at:function(t){var e=i(this),n=o(e),r=s(t),a=r>=0?r:n+r;return a<0||a>=n?void 0:e[a]}}),a("at")},7658:function(t,e,n){"use strict";var r=n(2109),i=n(7908),o=n(6244),s=n(3658),a=n(7207),c=n(7293),l=c((function(){return 4294967297!==[].push.call({length:4294967296},1)})),u=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},h=l||!u();r({target:"Array",proto:!0,arity:1,forced:h},{push:function(t){var e=i(this),n=o(e),r=arguments.length;a(n+r);for(var c=0;c<r;c++)e[n]=arguments[c],n++;return s(e,n),n}})},1703:function(t,e,n){var r=n(2109),i=n(7854),o=n(2104),s=n(9191),a="WebAssembly",c=i[a],l=7!==Error("e",{cause:7}).cause,u=function(t,e){var n={};n[t]=s(t,e,l),r({global:!0,constructor:!0,arity:1,forced:l},n)},h=function(t,e){if(c&&c[t]){var n={};n[t]=s(a+"."+t,e,l),r({target:a,stat:!0,constructor:!0,arity:1,forced:l},n)}};u("Error",(function(t){return function(e){return o(t,this,arguments)}})),u("EvalError",(function(t){return function(e){return o(t,this,arguments)}})),u("RangeError",(function(t){return function(e){return o(t,this,arguments)}})),u("ReferenceError",(function(t){return function(e){return o(t,this,arguments)}})),u("SyntaxError",(function(t){return function(e){return o(t,this,arguments)}})),u("TypeError",(function(t){return function(e){return o(t,this,arguments)}})),u("URIError",(function(t){return function(e){return o(t,this,arguments)}})),h("CompileError",(function(t){return function(e){return o(t,this,arguments)}})),h("LinkError",(function(t){return function(e){return o(t,this,arguments)}})),h("RuntimeError",(function(t){return function(e){return o(t,this,arguments)}}))},4506:function(t,e,n){"use strict";var r=n(2109),i=n(1702),o=n(4488),s=n(9303),a=n(1340),c=n(7293),l=i("".charAt),u=c((function(){return"\ud842"!=="𠮷".at(-2)}));r({target:"String",proto:!0,forced:u},{at:function(t){var e=a(o(this)),n=e.length,r=s(t),i=r>=0?r:n+r;return i<0||i>=n?void 0:l(e,i)}})},8675:function(t,e,n){"use strict";var r=n(260),i=n(6244),o=n(9303),s=r.aTypedArray,a=r.exportTypedArrayMethod;a("at",(function(t){var e=s(this),n=i(e),r=o(t),a=r>=0?r:n+r;return a<0||a>=n?void 0:e[a]}))},4590:function(t,e,n){"use strict";var r=n(260),i=n(9671).findLastIndex,o=r.aTypedArray,s=r.exportTypedArrayMethod;s("findLastIndex",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},3408:function(t,e,n){"use strict";var r=n(260),i=n(9671).findLast,o=r.aTypedArray,s=r.exportTypedArrayMethod;s("findLast",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},3462:function(t,e,n){"use strict";var r=n(7854),i=n(6916),o=n(260),s=n(6244),a=n(2452),c=n(7908),l=n(7293),u=r.RangeError,h=r.Int8Array,d=h&&h.prototype,f=d&&d.set,p=o.aTypedArray,m=o.exportTypedArrayMethod,g=!l((function(){var t=new Uint8ClampedArray(2);return i(f,t,{length:1,0:3},1),3!==t[1]})),v=g&&o.NATIVE_ARRAY_BUFFER_VIEWS&&l((function(){var t=new h(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));m("set",(function(t){p(this);var e=a(arguments.length>1?arguments[1]:void 0,1),n=c(t);if(g)return i(f,this,n,e);var r=this.length,o=s(n),l=0;if(o+e>r)throw u("Wrong length");while(l<o)this[e+l]=n[l++]}),!g||v)},1439:function(t,e,n){"use strict";var r=n(1843),i=n(260),o=i.aTypedArray,s=i.exportTypedArrayMethod,a=i.getTypedArrayConstructor;s("toReversed",(function(){return r(o(this),a(this))}))},7585:function(t,e,n){"use strict";var r=n(260),i=n(1702),o=n(9662),s=n(7745),a=r.aTypedArray,c=r.getTypedArrayConstructor,l=r.exportTypedArrayMethod,u=i(r.TypedArrayPrototype.sort);l("toSorted",(function(t){void 0!==t&&o(t);var e=a(this),n=s(c(e),e);return u(n,t)}))},5315:function(t,e,n){"use strict";var r=n(1572),i=n(260),o=n(4067),s=n(9303),a=n(4599),c=i.aTypedArray,l=i.getTypedArrayConstructor,u=i.exportTypedArrayMethod,h=!!function(){try{new Int8Array(1)["with"](2,{valueOf:function(){throw 8}})}catch(t){return 8===t}}();u("with",{with:function(t,e){var n=c(this),i=s(t),u=o(n)?a(e):+e;return r(n,l(n),i,u)}}["with"],!h)},2801:function(t,e,n){"use strict";var r=n(2109),i=n(7854),o=n(5005),s=n(9114),a=n(3070).f,c=n(2597),l=n(5787),u=n(9587),h=n(6277),d=n(3678),f=n(1060),p=n(9781),m=n(1913),g="DOMException",v=o("Error"),_=o(g),y=function(){l(this,b);var t=arguments.length,e=h(t<1?void 0:arguments[0]),n=h(t<2?void 0:arguments[1],"Error"),r=new _(e,n),i=v(e);return i.name=g,a(r,"stack",s(1,f(i.stack,1))),u(r,this,y),r},b=y.prototype=_.prototype,w="stack"in v(g),x="stack"in new _(1,2),E=_&&p&&Object.getOwnPropertyDescriptor(i,g),S=!!E&&!(E.writable&&E.configurable),M=w&&!S&&!x;r({global:!0,constructor:!0,forced:m||M},{DOMException:M?y:_});var T=o(g),A=T.prototype;if(A.constructor!==T)for(var C in m||a(A,"constructor",s(1,T)),d)if(c(d,C)){var R=d[C],P=R.s;c(T,P)||a(T,P,s(6,R.c))}},4870:function(t,e,n){"use strict";n.d(e,{$y:function(){return Nt},B:function(){return s},BK:function(){return re},Bj:function(){return o},EB:function(){return l},Fl:function(){return le},IU:function(){return Bt},Jd:function(){return C},OT:function(){return Lt},PG:function(){return Dt},SU:function(){return Jt},Tn:function(){return Zt},Um:function(){return Ot},Vh:function(){return se},WL:function(){return te},X$:function(){return L},X3:function(){return Ft},XI:function(){return Xt},Xl:function(){return zt},YS:function(){return kt},ZM:function(){return ne},cE:function(){return S},dq:function(){return Wt},iH:function(){return qt},j:function(){return P},lk:function(){return R},nZ:function(){return c},oR:function(){return Kt},qj:function(){return Pt},qq:function(){return x},sT:function(){return M},yT:function(){return Ut}});n(7658);var r=n(7139);let i;class o{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=i,!t&&i&&(this.index=(i.scopes||(i.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const e=i;try{return i=this,t()}finally{i=e}}else 0}on(){i=this}off(){i=this.parent}stop(t){if(this._active){let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.parent=void 0,this._active=!1}}}function s(t){return new o(t)}function a(t,e=i){e&&e.active&&e.effects.push(t)}function c(){return i}function l(t){i&&i.cleanups.push(t)}const u=t=>{const e=new Set(t);return e.w=0,e.n=0,e},h=t=>(t.w&v)>0,d=t=>(t.n&v)>0,f=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=v},p=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const i=e[r];h(i)&&!d(i)?i.delete(t):e[n++]=i,i.w&=~v,i.n&=~v}e.length=n}},m=new WeakMap;let g=0,v=1;const _=30;let y;const b=Symbol(""),w=Symbol("");class x{constructor(t,e=null,n){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,a(this,n)}run(){if(!this.active)return this.fn();let t=y,e=T;while(t){if(t===this)return;t=t.parent}try{return this.parent=y,y=this,T=!0,v=1<<++g,g<=_?f(this):E(this),this.fn()}finally{g<=_&&p(this),v=1<<--g,y=this.parent,T=e,this.parent=void 0,this.deferStop&&this.stop()}}stop(){y===this?this.deferStop=!0:this.active&&(E(this),this.onStop&&this.onStop(),this.active=!1)}}function E(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}function S(t,e){t.effect&&(t=t.effect.fn);const n=new x(t);e&&((0,r.l7)(n,e),e.scope&&a(n,e.scope)),e&&e.lazy||n.run();const i=n.run.bind(n);return i.effect=n,i}function M(t){t.effect.stop()}let T=!0;const A=[];function C(){A.push(T),T=!1}function R(){const t=A.pop();T=void 0===t||t}function P(t,e,n){if(T&&y){let e=m.get(t);e||m.set(t,e=new Map);let r=e.get(n);r||e.set(n,r=u());const i=void 0;O(r,i)}}function O(t,e){let n=!1;g<=_?d(t)||(t.n|=v,n=!h(t)):n=!t.has(y),n&&(t.add(y),y.deps.push(t))}function L(t,e,n,i,o,s){const a=m.get(t);if(!a)return;let c=[];if("clear"===e)c=[...a.values()];else if("length"===n&&(0,r.kJ)(t)){const t=Number(i);a.forEach(((e,n)=>{("length"===n||n>=t)&&c.push(e)}))}else switch(void 0!==n&&c.push(a.get(n)),e){case"add":(0,r.kJ)(t)?(0,r.S0)(n)&&c.push(a.get("length")):(c.push(a.get(b)),(0,r._N)(t)&&c.push(a.get(w)));break;case"delete":(0,r.kJ)(t)||(c.push(a.get(b)),(0,r._N)(t)&&c.push(a.get(w)));break;case"set":(0,r._N)(t)&&c.push(a.get(b));break}if(1===c.length)c[0]&&k(c[0]);else{const t=[];for(const e of c)e&&t.push(...e);k(u(t))}}function k(t,e){const n=(0,r.kJ)(t)?t:[...t];for(const r of n)r.computed&&I(r,e);for(const r of n)r.computed||I(r,e)}function I(t,e){(t!==y||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function D(t,e){var n;return null==(n=m.get(t))?void 0:n.get(e)}const N=(0,r.fY)("__proto__,__v_isRef,__isVue"),U=new Set(Object.getOwnPropertyNames(Symbol).filter((t=>"arguments"!==t&&"caller"!==t)).map((t=>Symbol[t])).filter(r.yk)),F=W(),B=W(!1,!0),z=W(!0),j=W(!0,!0),H=V();function V(){const t={};return["includes","indexOf","lastIndexOf"].forEach((e=>{t[e]=function(...t){const n=Bt(this);for(let e=0,i=this.length;e<i;e++)P(n,"get",e+"");const r=n[e](...t);return-1===r||!1===r?n[e](...t.map(Bt)):r}})),["push","pop","shift","unshift","splice"].forEach((e=>{t[e]=function(...t){C();const n=Bt(this)[e].apply(this,t);return R(),n}})),t}function G(t){const e=Bt(this);return P(e,"has",t),e.hasOwnProperty(t)}function W(t=!1,e=!1){return function(n,i,o){if("__v_isReactive"===i)return!t;if("__v_isReadonly"===i)return t;if("__v_isShallow"===i)return e;if("__v_raw"===i&&o===(t?e?At:Tt:e?Mt:St).get(n))return n;const s=(0,r.kJ)(n);if(!t){if(s&&(0,r.RI)(H,i))return Reflect.get(H,i,o);if("hasOwnProperty"===i)return G}const a=Reflect.get(n,i,o);return((0,r.yk)(i)?U.has(i):N(i))?a:(t||P(n,"get",i),e?a:Wt(a)?s&&(0,r.S0)(i)?a:a.value:(0,r.Kn)(a)?t?Lt(a):Pt(a):a)}}const q=Y(),X=Y(!0);function Y(t=!1){return function(e,n,i,o){let s=e[n];if(Nt(s)&&Wt(s)&&!Wt(i))return!1;if(!t&&(Ut(i)||Nt(i)||(s=Bt(s),i=Bt(i)),!(0,r.kJ)(e)&&Wt(s)&&!Wt(i)))return s.value=i,!0;const a=(0,r.kJ)(e)&&(0,r.S0)(n)?Number(n)<e.length:(0,r.RI)(e,n),c=Reflect.set(e,n,i,o);return e===Bt(o)&&(a?(0,r.aU)(i,s)&&L(e,"set",n,i,s):L(e,"add",n,i)),c}}function $(t,e){const n=(0,r.RI)(t,e),i=t[e],o=Reflect.deleteProperty(t,e);return o&&n&&L(t,"delete",e,void 0,i),o}function K(t,e){const n=Reflect.has(t,e);return(0,r.yk)(e)&&U.has(e)||P(t,"has",e),n}function J(t){return P(t,"iterate",(0,r.kJ)(t)?"length":b),Reflect.ownKeys(t)}const Z={get:F,set:q,deleteProperty:$,has:K,ownKeys:J},Q={get:z,set(t,e){return!0},deleteProperty(t,e){return!0}},tt=(0,r.l7)({},Z,{get:B,set:X}),et=(0,r.l7)({},Q,{get:j}),nt=t=>t,rt=t=>Reflect.getPrototypeOf(t);function it(t,e,n=!1,r=!1){t=t["__v_raw"];const i=Bt(t),o=Bt(e);n||(e!==o&&P(i,"get",e),P(i,"get",o));const{has:s}=rt(i),a=r?nt:n?Ht:jt;return s.call(i,e)?a(t.get(e)):s.call(i,o)?a(t.get(o)):void(t!==i&&t.get(e))}function ot(t,e=!1){const n=this["__v_raw"],r=Bt(n),i=Bt(t);return e||(t!==i&&P(r,"has",t),P(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function st(t,e=!1){return t=t["__v_raw"],!e&&P(Bt(t),"iterate",b),Reflect.get(t,"size",t)}function at(t){t=Bt(t);const e=Bt(this),n=rt(e),r=n.has.call(e,t);return r||(e.add(t),L(e,"add",t,t)),this}function ct(t,e){e=Bt(e);const n=Bt(this),{has:i,get:o}=rt(n);let s=i.call(n,t);s||(t=Bt(t),s=i.call(n,t));const a=o.call(n,t);return n.set(t,e),s?(0,r.aU)(e,a)&&L(n,"set",t,e,a):L(n,"add",t,e),this}function lt(t){const e=Bt(this),{has:n,get:r}=rt(e);let i=n.call(e,t);i||(t=Bt(t),i=n.call(e,t));const o=r?r.call(e,t):void 0,s=e.delete(t);return i&&L(e,"delete",t,void 0,o),s}function ut(){const t=Bt(this),e=0!==t.size,n=void 0,r=t.clear();return e&&L(t,"clear",void 0,void 0,n),r}function ht(t,e){return function(n,r){const i=this,o=i["__v_raw"],s=Bt(o),a=e?nt:t?Ht:jt;return!t&&P(s,"iterate",b),o.forEach(((t,e)=>n.call(r,a(t),a(e),i)))}}function dt(t,e,n){return function(...i){const o=this["__v_raw"],s=Bt(o),a=(0,r._N)(s),c="entries"===t||t===Symbol.iterator&&a,l="keys"===t&&a,u=o[t](...i),h=n?nt:e?Ht:jt;return!e&&P(s,"iterate",l?w:b),{next(){const{value:t,done:e}=u.next();return e?{value:t,done:e}:{value:c?[h(t[0]),h(t[1])]:h(t),done:e}},[Symbol.iterator](){return this}}}}function ft(t){return function(...e){return"delete"!==t&&this}}function pt(){const t={get(t){return it(this,t)},get size(){return st(this)},has:ot,add:at,set:ct,delete:lt,clear:ut,forEach:ht(!1,!1)},e={get(t){return it(this,t,!1,!0)},get size(){return st(this)},has:ot,add:at,set:ct,delete:lt,clear:ut,forEach:ht(!1,!0)},n={get(t){return it(this,t,!0)},get size(){return st(this,!0)},has(t){return ot.call(this,t,!0)},add:ft("add"),set:ft("set"),delete:ft("delete"),clear:ft("clear"),forEach:ht(!0,!1)},r={get(t){return it(this,t,!0,!0)},get size(){return st(this,!0)},has(t){return ot.call(this,t,!0)},add:ft("add"),set:ft("set"),delete:ft("delete"),clear:ft("clear"),forEach:ht(!0,!0)},i=["keys","values","entries",Symbol.iterator];return i.forEach((i=>{t[i]=dt(i,!1,!1),n[i]=dt(i,!0,!1),e[i]=dt(i,!1,!0),r[i]=dt(i,!0,!0)})),[t,n,e,r]}const[mt,gt,vt,_t]=pt();function yt(t,e){const n=e?t?_t:vt:t?gt:mt;return(e,i,o)=>"__v_isReactive"===i?!t:"__v_isReadonly"===i?t:"__v_raw"===i?e:Reflect.get((0,r.RI)(n,i)&&i in e?n:e,i,o)}const bt={get:yt(!1,!1)},wt={get:yt(!1,!0)},xt={get:yt(!0,!1)},Et={get:yt(!0,!0)};const St=new WeakMap,Mt=new WeakMap,Tt=new WeakMap,At=new WeakMap;function Ct(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Rt(t){return t["__v_skip"]||!Object.isExtensible(t)?0:Ct((0,r.W7)(t))}function Pt(t){return Nt(t)?t:It(t,!1,Z,bt,St)}function Ot(t){return It(t,!1,tt,wt,Mt)}function Lt(t){return It(t,!0,Q,xt,Tt)}function kt(t){return It(t,!0,et,Et,At)}function It(t,e,n,i,o){if(!(0,r.Kn)(t))return t;if(t["__v_raw"]&&(!e||!t["__v_isReactive"]))return t;const s=o.get(t);if(s)return s;const a=Rt(t);if(0===a)return t;const c=new Proxy(t,2===a?i:n);return o.set(t,c),c}function Dt(t){return Nt(t)?Dt(t["__v_raw"]):!(!t||!t["__v_isReactive"])}function Nt(t){return!(!t||!t["__v_isReadonly"])}function Ut(t){return!(!t||!t["__v_isShallow"])}function Ft(t){return Dt(t)||Nt(t)}function Bt(t){const e=t&&t["__v_raw"];return e?Bt(e):t}function zt(t){return(0,r.Nj)(t,"__v_skip",!0),t}const jt=t=>(0,r.Kn)(t)?Pt(t):t,Ht=t=>(0,r.Kn)(t)?Lt(t):t;function Vt(t){T&&y&&(t=Bt(t),O(t.dep||(t.dep=u())))}function Gt(t,e){t=Bt(t);const n=t.dep;n&&k(n)}function Wt(t){return!(!t||!0!==t.__v_isRef)}function qt(t){return Yt(t,!1)}function Xt(t){return Yt(t,!0)}function Yt(t,e){return Wt(t)?t:new $t(t,e)}class $t{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:Bt(t),this._value=e?t:jt(t)}get value(){return Vt(this),this._value}set value(t){const e=this.__v_isShallow||Ut(t)||Nt(t);t=e?t:Bt(t),(0,r.aU)(t,this._rawValue)&&(this._rawValue=t,this._value=e?t:jt(t),Gt(this,t))}}function Kt(t){Gt(t,void 0)}function Jt(t){return Wt(t)?t.value:t}function Zt(t){return(0,r.mf)(t)?t():Jt(t)}const Qt={get:(t,e,n)=>Jt(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return Wt(i)&&!Wt(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function te(t){return Dt(t)?t:new Proxy(t,Qt)}class ee{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:e,set:n}=t((()=>Vt(this)),(()=>Gt(this)));this._get=e,this._set=n}get value(){return this._get()}set value(t){this._set(t)}}function ne(t){return new ee(t)}function re(t){const e=(0,r.kJ)(t)?new Array(t.length):{};for(const n in t)e[n]=ae(t,n);return e}class ie{constructor(t,e,n){this._object=t,this._key=e,this._defaultValue=n,this.__v_isRef=!0}get value(){const t=this._object[this._key];return void 0===t?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return D(Bt(this._object),this._key)}}class oe{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function se(t,e,n){return Wt(t)?t:(0,r.mf)(t)?new oe(t):(0,r.Kn)(t)&&arguments.length>1?ae(t,e,n):qt(t)}function ae(t,e,n){const r=t[e];return Wt(r)?r:new ie(t,e,n)}class ce{constructor(t,e,n,r){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this["__v_isReadonly"]=!1,this._dirty=!0,this.effect=new x(t,(()=>{this._dirty||(this._dirty=!0,Gt(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!r,this["__v_isReadonly"]=n}get value(){const t=Bt(this);return Vt(t),!t._dirty&&t._cacheable||(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function le(t,e,n=!1){let i,o;const s=(0,r.mf)(t);s?(i=t,o=r.dG):(i=t.get,o=t.set);const a=new ce(i,o,s||!o,n);return a}},3396:function(t,e,n){"use strict";n.d(e,{$d:function(){return c},$y:function(){return r.$y},Ah:function(){return te},B:function(){return r.B},BK:function(){return r.BK},Bj:function(){return r.Bj},Bz:function(){return Se},C3:function(){return cr},C_:function(){return i.C_},Cn:function(){return H},EB:function(){return r.EB},EM:function(){return an},Eo:function(){return Ln},F4:function(){return mr},FN:function(){return Rr},Fl:function(){return Kr},G:function(){return oi},Gn:function(){return Ce},HX:function(){return V},HY:function(){return qn},Ho:function(){return gr},IU:function(){return r.IU},JJ:function(){return on},Jd:function(){return Qt},KU:function(){return a},Ko:function(){return fe},LL:function(){return le},MW:function(){return Ee},MX:function(){return ei},Mr:function(){return ti},Nv:function(){return pe},OT:function(){return r.OT},Ob:function(){return Bt},P$:function(){return Tt},PG:function(){return r.PG},Q2:function(){return ue},Q6:function(){return Lt},RC:function(){return Dt},Rh:function(){return dt},Rr:function(){return Pe},S3:function(){return l},SU:function(){return r.SU},Tn:function(){return r.Tn},U2:function(){return Ct},Uc:function(){return Zr},Uk:function(){return vr},Um:function(){return r.Um},Us:function(){return On},Vf:function(){return Ne},Vh:function(){return r.Vh},WI:function(){return me},WL:function(){return r.WL},WY:function(){return Me},Wl:function(){return Ae},Wm:function(){return fr},Wu:function(){return s},X3:function(){return r.X3},XI:function(){return r.XI},Xl:function(){return r.Xl},Xn:function(){return Jt},Y1:function(){return Hr},Y3:function(){return b},Y8:function(){return xt},YP:function(){return mt},YS:function(){return r.YS},Yq:function(){return ne},Yu:function(){return Te},ZK:function(){return o},ZM:function(){return r.ZM},Zq:function(){return Qr},_:function(){return dr},_A:function(){return i._A},aZ:function(){return kt},b9:function(){return Re},bT:function(){return re},bv:function(){return Kt},cE:function(){return r.cE},d1:function(){return ie},dD:function(){return j},dG:function(){return Er},dl:function(){return jt},dq:function(){return r.dq},ec:function(){return I},eq:function(){return si},f3:function(){return sn},h:function(){return Jr},hR:function(){return i.hR},i8:function(){return ri},iD:function(){return ir},iH:function(){return r.iH},ic:function(){return Zt},j4:function(){return or},j5:function(){return i.j5},kC:function(){return i.kC},kq:function(){return yr},l1:function(){return Oe},lA:function(){return sr},lR:function(){return Gn},m0:function(){return ht},mW:function(){return O},mv:function(){return Fe},mx:function(){return ve},n4:function(){return tt},nJ:function(){return St},nK:function(){return Ot},nQ:function(){return ni},nZ:function(){return r.nZ},oR:function(){return r.oR},of:function(){return Vr},p1:function(){return Ue},qG:function(){return $n},qZ:function(){return nr},qb:function(){return M},qj:function(){return r.qj},qq:function(){return r.qq},ry:function(){return ai},sT:function(){return r.sT},se:function(){return Ht},sv:function(){return Yn},tT:function(){return Le},uE:function(){return _r},u_:function(){return De},up:function(){return ae},vl:function(){return ee},vs:function(){return i.vs},w5:function(){return G},wF:function(){return $t},wg:function(){return Zn},wy:function(){return bt},xv:function(){return Xn},yT:function(){return r.yT},yX:function(){return ft},zw:function(){return i.zw}});n(7658),n(1703);var r=n(4870),i=n(7139);function o(t,...e){}function s(t,e){}function a(t,e,n,r){let i;try{i=r?t(...r):t()}catch(o){l(o,e,n)}return i}function c(t,e,n,r){if((0,i.mf)(t)){const o=a(t,e,n,r);return o&&(0,i.tI)(o)&&o.catch((t=>{l(t,e,n)})),o}const o=[];for(let i=0;i<t.length;i++)o.push(c(t[i],e,n,r));return o}function l(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let r=e.parent;const i=e.proxy,o=n;while(r){const e=r.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,i,o))return;r=r.parent}const s=e.appContext.config.errorHandler;if(s)return void a(s,null,10,[t,i,o])}u(t,n,i,r)}function u(t,e,n,r=!0){console.error(t)}let h=!1,d=!1;const f=[];let p=0;const m=[];let g=null,v=0;const _=Promise.resolve();let y=null;function b(t){const e=y||_;return t?e.then(this?t.bind(this):t):e}function w(t){let e=p+1,n=f.length;while(e<n){const r=e+n>>>1,i=C(f[r]);i<t?e=r+1:n=r}return e}function x(t){f.length&&f.includes(t,h&&t.allowRecurse?p+1:p)||(null==t.id?f.push(t):f.splice(w(t.id),0,t),E())}function E(){h||d||(d=!0,y=_.then(P))}function S(t){const e=f.indexOf(t);e>p&&f.splice(e,1)}function M(t){(0,i.kJ)(t)?m.push(...t):g&&g.includes(t,t.allowRecurse?v+1:v)||m.push(t),E()}function T(t,e=(h?p+1:0)){for(0;e<f.length;e++){const t=f[e];t&&t.pre&&(f.splice(e,1),e--,t())}}function A(t){if(m.length){const t=[...new Set(m)];if(m.length=0,g)return void g.push(...t);for(g=t,g.sort(((t,e)=>C(t)-C(e))),v=0;v<g.length;v++)g[v]();g=null,v=0}}const C=t=>null==t.id?1/0:t.id,R=(t,e)=>{const n=C(t)-C(e);if(0===n){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function P(t){d=!1,h=!0,f.sort(R);i.dG;try{for(p=0;p<f.length;p++){const t=f[p];t&&!1!==t.active&&a(t,null,14)}}finally{p=0,f.length=0,A(t),h=!1,y=null,(f.length||m.length)&&P(t)}}let O,L=[],k=!1;function I(t,e){var n,r;if(O=t,O)O.enabled=!0,L.forEach((({event:t,args:e})=>O.emit(t,...e))),L=[];else if("undefined"!==typeof window&&window.HTMLElement&&!(null==(r=null==(n=window.navigator)?void 0:n.userAgent)?void 0:r.includes("jsdom"))){const t=e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[];t.push((t=>{I(t,e)})),setTimeout((()=>{O||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,k=!0,L=[])}),3e3)}else k=!0,L=[]}function D(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||i.kT;let o=n;const s=e.startsWith("update:"),a=s&&e.slice(7);if(a&&a in r){const t=`${"modelValue"===a?"model":a}Modifiers`,{number:e,trim:s}=r[t]||i.kT;s&&(o=n.map((t=>(0,i.HD)(t)?t.trim():t))),e&&(o=n.map(i.h5))}let l;let u=r[l=(0,i.hR)(e)]||r[l=(0,i.hR)((0,i._A)(e))];!u&&s&&(u=r[l=(0,i.hR)((0,i.rs)(e))]),u&&c(u,t,6,o);const h=r[l+"Once"];if(h){if(t.emitted){if(t.emitted[l])return}else t.emitted={};t.emitted[l]=!0,c(h,t,6,o)}}function N(t,e,n=!1){const r=e.emitsCache,o=r.get(t);if(void 0!==o)return o;const s=t.emits;let a={},c=!1;if(!(0,i.mf)(t)){const r=t=>{const n=N(t,e,!0);n&&(c=!0,(0,i.l7)(a,n))};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}return s||c?((0,i.kJ)(s)?s.forEach((t=>a[t]=null)):(0,i.l7)(a,s),(0,i.Kn)(t)&&r.set(t,a),a):((0,i.Kn)(t)&&r.set(t,null),null)}function U(t,e){return!(!t||!(0,i.F7)(e))&&(e=e.slice(2).replace(/Once$/,""),(0,i.RI)(t,e[0].toLowerCase()+e.slice(1))||(0,i.RI)(t,(0,i.rs)(e))||(0,i.RI)(t,e))}let F=null,B=null;function z(t){const e=F;return F=t,B=t&&t.type.__scopeId||null,e}function j(t){B=t}function H(){B=null}const V=t=>G;function G(t,e=F,n){if(!e)return t;if(t._n)return t;const r=(...n)=>{r._d&&nr(-1);const i=z(e);let o;try{o=t(...n)}finally{z(i),r._d&&nr(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function W(t){const{type:e,vnode:n,proxy:r,withProxy:o,props:s,propsOptions:[a],slots:c,attrs:u,emit:h,render:d,renderCache:f,data:p,setupState:m,ctx:g,inheritAttrs:v}=t;let _,y;const b=z(t);try{if(4&n.shapeFlag){const t=o||r;_=br(d.call(t,t,f,s,m,p,g)),y=u}else{const t=e;0,_=br(t.length>1?t(s,{attrs:u,slots:c,emit:h}):t(s,null)),y=e.props?u:X(u)}}catch(x){Kn.length=0,l(x,t,1),_=fr(Yn)}let w=_;if(y&&!1!==v){const t=Object.keys(y),{shapeFlag:e}=w;t.length&&7&e&&(a&&t.some(i.tR)&&(y=Y(y,a)),w=gr(w,y))}return n.dirs&&(w=gr(w),w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&(w.transition=n.transition),_=w,z(b),_}function q(t){let e;for(let n=0;n<t.length;n++){const r=t[n];if(!sr(r))return;if(r.type!==Yn||"v-if"===r.children){if(e)return;e=r}}return e}const X=t=>{let e;for(const n in t)("class"===n||"style"===n||(0,i.F7)(n))&&((e||(e={}))[n]=t[n]);return e},Y=(t,e)=>{const n={};for(const r in t)(0,i.tR)(r)&&r.slice(9)in e||(n[r]=t[r]);return n};function $(t,e,n){const{props:r,children:i,component:o}=t,{props:s,children:a,patchFlag:c}=e,l=o.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&c>=0))return!(!i&&!a||a&&a.$stable)||r!==s&&(r?!s||K(r,s,l):!!s);if(1024&c)return!0;if(16&c)return r?K(r,s,l):!!s;if(8&c){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(s[n]!==r[n]&&!U(l,n))return!0}}return!1}function K(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(e[o]!==t[o]&&!U(n,o))return!0}return!1}function J({vnode:t,parent:e},n){while(e&&e.subTree===t)(t=e.vnode).el=n,e=e.parent}const Z=t=>t.__isSuspense,Q={name:"Suspense",__isSuspense:!0,process(t,e,n,r,i,o,s,a,c,l){null==t?nt(e,n,r,i,o,s,a,c,l):rt(t,e,n,r,i,s,a,c,l)},hydrate:ot,create:it,normalize:st},tt=Q;function et(t,e){const n=t.props&&t.props[e];(0,i.mf)(n)&&n()}function nt(t,e,n,r,i,o,s,a,c){const{p:l,o:{createElement:u}}=c,h=u("div"),d=t.suspense=it(t,i,r,e,h,n,o,s,a,c);l(null,d.pendingBranch=t.ssContent,h,null,r,d,o,s),d.deps>0?(et(t,"onPending"),et(t,"onFallback"),l(null,t.ssFallback,e,n,r,null,o,s),lt(d,t.ssFallback)):d.resolve(!1,!0)}function rt(t,e,n,r,i,o,s,a,{p:c,um:l,o:{createElement:u}}){const h=e.suspense=t.suspense;h.vnode=e,e.el=t.el;const d=e.ssContent,f=e.ssFallback,{activeBranch:p,pendingBranch:m,isInFallback:g,isHydrating:v}=h;if(m)h.pendingBranch=d,ar(d,m)?(c(m,d,h.hiddenContainer,null,i,h,o,s,a),h.deps<=0?h.resolve():g&&(c(p,f,n,r,i,null,o,s,a),lt(h,f))):(h.pendingId++,v?(h.isHydrating=!1,h.activeBranch=m):l(m,i,h),h.deps=0,h.effects.length=0,h.hiddenContainer=u("div"),g?(c(null,d,h.hiddenContainer,null,i,h,o,s,a),h.deps<=0?h.resolve():(c(p,f,n,r,i,null,o,s,a),lt(h,f))):p&&ar(d,p)?(c(p,d,n,r,i,h,o,s,a),h.resolve(!0)):(c(null,d,h.hiddenContainer,null,i,h,o,s,a),h.deps<=0&&h.resolve()));else if(p&&ar(d,p))c(p,d,n,r,i,h,o,s,a),lt(h,d);else if(et(e,"onPending"),h.pendingBranch=d,h.pendingId++,c(null,d,h.hiddenContainer,null,i,h,o,s,a),h.deps<=0)h.resolve();else{const{timeout:t,pendingId:e}=h;t>0?setTimeout((()=>{h.pendingId===e&&h.fallback(f)}),t):0===t&&h.fallback(f)}}function it(t,e,n,r,o,s,a,c,u,h,d=!1){const{p:f,m:p,um:m,n:g,o:{parentNode:v,remove:_}}=h;let y;const b=ut(t);b&&(null==e?void 0:e.pendingBranch)&&(y=e.pendingId,e.deps++);const w=t.props?(0,i.He)(t.props.timeout):void 0;const x={vnode:t,parent:e,parentComponent:n,isSVG:a,container:r,hiddenContainer:o,anchor:s,deps:0,pendingId:0,timeout:"number"===typeof w?w:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:d,isUnmounted:!1,effects:[],resolve(t=!1,n=!1){const{vnode:r,activeBranch:i,pendingBranch:o,pendingId:s,effects:a,parentComponent:c,container:l}=x;if(x.isHydrating)x.isHydrating=!1;else if(!t){const t=i&&o.transition&&"out-in"===o.transition.mode;t&&(i.transition.afterLeave=()=>{s===x.pendingId&&p(o,l,e,0)});let{anchor:e}=x;i&&(e=g(i),m(i,c,x,!0)),t||p(o,l,e,0)}lt(x,o),x.pendingBranch=null,x.isInFallback=!1;let u=x.parent,h=!1;while(u){if(u.pendingBranch){u.effects.push(...a),h=!0;break}u=u.parent}h||M(a),x.effects=[],b&&e&&e.pendingBranch&&y===e.pendingId&&(e.deps--,0!==e.deps||n||e.resolve()),et(r,"onResolve")},fallback(t){if(!x.pendingBranch)return;const{vnode:e,activeBranch:n,parentComponent:r,container:i,isSVG:o}=x;et(e,"onFallback");const s=g(n),a=()=>{x.isInFallback&&(f(null,t,i,s,r,null,o,c,u),lt(x,t))},l=t.transition&&"out-in"===t.transition.mode;l&&(n.transition.afterLeave=a),x.isInFallback=!0,m(n,r,null,!0),l||a()},move(t,e,n){x.activeBranch&&p(x.activeBranch,t,e,n),x.container=t},next(){return x.activeBranch&&g(x.activeBranch)},registerDep(t,e){const n=!!x.pendingBranch;n&&x.deps++;const r=t.vnode.el;t.asyncDep.catch((e=>{l(e,t,0)})).then((i=>{if(t.isUnmounted||x.isUnmounted||x.pendingId!==t.suspenseId)return;t.asyncResolved=!0;const{vnode:o}=t;jr(t,i,!1),r&&(o.el=r);const s=!r&&t.subTree.el;e(t,o,v(r||t.subTree.el),r?null:g(t.subTree),x,a,u),s&&_(s),J(t,o.el),n&&0===--x.deps&&x.resolve()}))},unmount(t,e){x.isUnmounted=!0,x.activeBranch&&m(x.activeBranch,n,t,e),x.pendingBranch&&m(x.pendingBranch,n,t,e)}};return x}function ot(t,e,n,r,i,o,s,a,c){const l=e.suspense=it(e,r,n,t.parentNode,document.createElement("div"),null,i,o,s,a,!0),u=c(t,l.pendingBranch=e.ssContent,n,l,o,s);return 0===l.deps&&l.resolve(!1,!0),u}function st(t){const{shapeFlag:e,children:n}=t,r=32&e;t.ssContent=at(r?n.default:n),t.ssFallback=r?at(n.fallback):fr(Yn)}function at(t){let e;if((0,i.mf)(t)){const n=er&&t._c;n&&(t._d=!1,Zn()),t=t(),n&&(t._d=!0,e=Jn,Qn())}if((0,i.kJ)(t)){const e=q(t);0,t=e}return t=br(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter((e=>e!==t))),t}function ct(t,e){e&&e.pendingBranch?(0,i.kJ)(t)?e.effects.push(...t):e.effects.push(t):M(t)}function lt(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t,i=n.el=e.el;r&&r.subTree===n&&(r.vnode.el=i,J(r,i))}function ut(t){var e;return null!=(null==(e=t.props)?void 0:e.suspensible)&&!1!==t.props.suspensible}function ht(t,e){return gt(t,null,e)}function dt(t,e){return gt(t,null,{flush:"post"})}function ft(t,e){return gt(t,null,{flush:"sync"})}const pt={};function mt(t,e,n){return gt(t,e,n)}function gt(t,e,{immediate:n,deep:o,flush:s,onTrack:l,onTrigger:u}=i.kT){var h;const d=(0,r.nZ)()===(null==(h=Cr)?void 0:h.scope)?Cr:null;let f,p,m=!1,g=!1;if((0,r.dq)(t)?(f=()=>t.value,m=(0,r.yT)(t)):(0,r.PG)(t)?(f=()=>t,o=!0):(0,i.kJ)(t)?(g=!0,m=t.some((t=>(0,r.PG)(t)||(0,r.yT)(t))),f=()=>t.map((t=>(0,r.dq)(t)?t.value:(0,r.PG)(t)?yt(t):(0,i.mf)(t)?a(t,d,2):void 0))):f=(0,i.mf)(t)?e?()=>a(t,d,2):()=>{if(!d||!d.isUnmounted)return p&&p(),c(t,d,3,[_])}:i.dG,e&&o){const t=f;f=()=>yt(t())}let v,_=t=>{p=E.onStop=()=>{a(t,d,4)}};if(Fr){if(_=i.dG,e?n&&c(e,d,3,[f(),g?[]:void 0,_]):f(),"sync"!==s)return i.dG;{const t=Qr();v=t.__watcherHandles||(t.__watcherHandles=[])}}let y=g?new Array(t.length).fill(pt):pt;const b=()=>{if(E.active)if(e){const t=E.run();(o||m||(g?t.some(((t,e)=>(0,i.aU)(t,y[e]))):(0,i.aU)(t,y)))&&(p&&p(),c(e,d,3,[t,y===pt?void 0:g&&y[0]===pt?[]:y,_]),y=t)}else E.run()};let w;b.allowRecurse=!!e,"sync"===s?w=b:"post"===s?w=()=>Pn(b,d&&d.suspense):(b.pre=!0,d&&(b.id=d.uid),w=()=>x(b));const E=new r.qq(f,w);e?n?b():y=E.run():"post"===s?Pn(E.run.bind(E),d&&d.suspense):E.run();const S=()=>{E.stop(),d&&d.scope&&(0,i.Od)(d.scope.effects,E)};return v&&v.push(S),S}function vt(t,e,n){const r=this.proxy,o=(0,i.HD)(t)?t.includes(".")?_t(r,t):()=>r[t]:t.bind(r,r);let s;(0,i.mf)(e)?s=e:(s=e.handler,n=e);const a=Cr;kr(this);const c=gt(o,s.bind(r),n);return a?kr(a):Ir(),c}function _t(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}function yt(t,e){if(!(0,i.Kn)(t)||t["__v_skip"])return t;if(e=e||new Set,e.has(t))return t;if(e.add(t),(0,r.dq)(t))yt(t.value,e);else if((0,i.kJ)(t))for(let n=0;n<t.length;n++)yt(t[n],e);else if((0,i.DM)(t)||(0,i._N)(t))t.forEach((t=>{yt(t,e)}));else if((0,i.PO)(t))for(const n in t)yt(t[n],e);return t}function bt(t,e){const n=F;if(null===n)return t;const r=Xr(n)||n.proxy,o=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[t,n,a,c=i.kT]=e[s];t&&((0,i.mf)(t)&&(t={mounted:t,updated:t}),t.deep&&yt(n),o.push({dir:t,instance:r,value:n,oldValue:void 0,arg:a,modifiers:c}))}return t}function wt(t,e,n,i){const o=t.dirs,s=e&&e.dirs;for(let a=0;a<o.length;a++){const l=o[a];s&&(l.oldValue=s[a].value);let u=l.dir[i];u&&((0,r.Jd)(),c(u,n,8,[t.el,l,t,e]),(0,r.lk)())}}function xt(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Kt((()=>{t.isMounted=!0})),Qt((()=>{t.isUnmounting=!0})),t}const Et=[Function,Array],St={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Et,onEnter:Et,onAfterEnter:Et,onEnterCancelled:Et,onBeforeLeave:Et,onLeave:Et,onAfterLeave:Et,onLeaveCancelled:Et,onBeforeAppear:Et,onAppear:Et,onAfterAppear:Et,onAppearCancelled:Et},Mt={name:"BaseTransition",props:St,setup(t,{slots:e}){const n=Rr(),i=xt();let o;return()=>{const s=e.default&&Lt(e.default(),!0);if(!s||!s.length)return;let a=s[0];if(s.length>1){let t=!1;for(const e of s)if(e.type!==Yn){0,a=e,t=!0;break}}const c=(0,r.IU)(t),{mode:l}=c;if(i.isLeaving)return Rt(a);const u=Pt(a);if(!u)return Rt(a);const h=Ct(u,c,i,n);Ot(u,h);const d=n.subTree,f=d&&Pt(d);let p=!1;const{getTransitionKey:m}=u.type;if(m){const t=m();void 0===o?o=t:t!==o&&(o=t,p=!0)}if(f&&f.type!==Yn&&(!ar(u,f)||p)){const t=Ct(f,c,i,n);if(Ot(f,t),"out-in"===l)return i.isLeaving=!0,t.afterLeave=()=>{i.isLeaving=!1,!1!==n.update.active&&n.update()},Rt(a);"in-out"===l&&u.type!==Yn&&(t.delayLeave=(t,e,n)=>{const r=At(i,f);r[String(f.key)]=f,t._leaveCb=()=>{e(),t._leaveCb=void 0,delete h.delayedLeave},h.delayedLeave=n})}return a}}},Tt=Mt;function At(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Ct(t,e,n,r){const{appear:o,mode:s,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:f,onLeave:p,onAfterLeave:m,onLeaveCancelled:g,onBeforeAppear:v,onAppear:_,onAfterAppear:y,onAppearCancelled:b}=e,w=String(t.key),x=At(n,t),E=(t,e)=>{t&&c(t,r,9,e)},S=(t,e)=>{const n=e[1];E(t,e),(0,i.kJ)(t)?t.every((t=>t.length<=1))&&n():t.length<=1&&n()},M={mode:s,persisted:a,beforeEnter(e){let r=l;if(!n.isMounted){if(!o)return;r=v||l}e._leaveCb&&e._leaveCb(!0);const i=x[w];i&&ar(t,i)&&i.el._leaveCb&&i.el._leaveCb(),E(r,[e])},enter(t){let e=u,r=h,i=d;if(!n.isMounted){if(!o)return;e=_||u,r=y||h,i=b||d}let s=!1;const a=t._enterCb=e=>{s||(s=!0,E(e?i:r,[t]),M.delayedLeave&&M.delayedLeave(),t._enterCb=void 0)};e?S(e,[t,a]):a()},leave(e,r){const i=String(t.key);if(e._enterCb&&e._enterCb(!0),n.isUnmounting)return r();E(f,[e]);let o=!1;const s=e._leaveCb=n=>{o||(o=!0,r(),E(n?g:m,[e]),e._leaveCb=void 0,x[i]===t&&delete x[i])};x[i]=t,p?S(p,[e,s]):s()},clone(t){return Ct(t,e,n,r)}};return M}function Rt(t){if(Ut(t))return t=gr(t),t.children=null,t}function Pt(t){return Ut(t)?t.children?t.children[0]:void 0:t}function Ot(t,e){6&t.shapeFlag&&t.component?Ot(t.component.subTree,e):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Lt(t,e=!1,n){let r=[],i=0;for(let o=0;o<t.length;o++){let s=t[o];const a=null==n?s.key:String(n)+String(null!=s.key?s.key:o);s.type===qn?(128&s.patchFlag&&i++,r=r.concat(Lt(s.children,e,a))):(e||s.type!==Yn)&&r.push(null!=a?gr(s,{key:a}):s)}if(i>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}function kt(t,e){return(0,i.mf)(t)?(()=>(0,i.l7)({name:t.name},e,{setup:t}))():t}const It=t=>!!t.type.__asyncLoader;function Dt(t){(0,i.mf)(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:o,delay:s=200,timeout:a,suspensible:c=!0,onError:u}=t;let h,d=null,f=0;const p=()=>(f++,d=null,m()),m=()=>{let t;return d||(t=d=e().catch((t=>{if(t=t instanceof Error?t:new Error(String(t)),u)return new Promise(((e,n)=>{const r=()=>e(p()),i=()=>n(t);u(t,r,i,f+1)}));throw t})).then((e=>t!==d&&d?d:(e&&(e.__esModule||"Module"===e[Symbol.toStringTag])&&(e=e.default),h=e,e))))};return kt({name:"AsyncComponentWrapper",__asyncLoader:m,get __asyncResolved(){return h},setup(){const t=Cr;if(h)return()=>Nt(h,t);const e=e=>{d=null,l(e,t,13,!o)};if(c&&t.suspense||Fr)return m().then((e=>()=>Nt(e,t))).catch((t=>(e(t),()=>o?fr(o,{error:t}):null)));const i=(0,r.iH)(!1),u=(0,r.iH)(),f=(0,r.iH)(!!s);return s&&setTimeout((()=>{f.value=!1}),s),null!=a&&setTimeout((()=>{if(!i.value&&!u.value){const t=new Error(`Async component timed out after ${a}ms.`);e(t),u.value=t}}),a),m().then((()=>{i.value=!0,t.parent&&Ut(t.parent.vnode)&&x(t.parent.update)})).catch((t=>{e(t),u.value=t})),()=>i.value&&h?Nt(h,t):u.value&&o?fr(o,{error:u.value}):n&&!f.value?fr(n):void 0}})}function Nt(t,e){const{ref:n,props:r,children:i,ce:o}=e.vnode,s=fr(t,r,i);return s.ref=n,s.ce=o,delete e.vnode.ce,s}const Ut=t=>t.type.__isKeepAlive,Ft={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=Rr(),r=n.ctx;if(!r.renderer)return()=>{const t=e.default&&e.default();return t&&1===t.length?t[0]:t};const o=new Map,s=new Set;let a=null;const c=n.suspense,{renderer:{p:l,m:u,um:h,o:{createElement:d}}}=r,f=d("div");function p(t){Wt(t),h(t,n,c,!0)}function m(t){o.forEach(((e,n)=>{const r=Yr(e.type);!r||t&&t(r)||g(n)}))}function g(t){const e=o.get(t);a&&ar(e,a)?a&&Wt(a):p(e),o.delete(t),s.delete(t)}r.activate=(t,e,n,r,o)=>{const s=t.component;u(t,e,n,0,c),l(s.vnode,t,e,n,s,c,r,t.slotScopeIds,o),Pn((()=>{s.isDeactivated=!1,s.a&&(0,i.ir)(s.a);const e=t.props&&t.props.onVnodeMounted;e&&Sr(e,s.parent,t)}),c)},r.deactivate=t=>{const e=t.component;u(t,f,null,1,c),Pn((()=>{e.da&&(0,i.ir)(e.da);const n=t.props&&t.props.onVnodeUnmounted;n&&Sr(n,e.parent,t),e.isDeactivated=!0}),c)},mt((()=>[t.include,t.exclude]),(([t,e])=>{t&&m((e=>zt(t,e))),e&&m((t=>!zt(e,t)))}),{flush:"post",deep:!0});let v=null;const _=()=>{null!=v&&o.set(v,qt(n.subTree))};return Kt(_),Zt(_),Qt((()=>{o.forEach((t=>{const{subTree:e,suspense:r}=n,i=qt(e);if(t.type!==i.type||t.key!==i.key)p(t);else{Wt(i);const t=i.component.da;t&&Pn(t,r)}}))})),()=>{if(v=null,!e.default)return null;const n=e.default(),r=n[0];if(n.length>1)return a=null,n;if(!sr(r)||!(4&r.shapeFlag)&&!(128&r.shapeFlag))return a=null,r;let i=qt(r);const c=i.type,l=Yr(It(i)?i.type.__asyncResolved||{}:c),{include:u,exclude:h,max:d}=t;if(u&&(!l||!zt(u,l))||h&&l&&zt(h,l))return a=i,r;const f=null==i.key?c:i.key,p=o.get(f);return i.el&&(i=gr(i),128&r.shapeFlag&&(r.ssContent=i)),v=f,p?(i.el=p.el,i.component=p.component,i.transition&&Ot(i,i.transition),i.shapeFlag|=512,s.delete(f),s.add(f)):(s.add(f),d&&s.size>parseInt(d,10)&&g(s.values().next().value)),i.shapeFlag|=256,a=i,Z(r.type)?r:i}}},Bt=Ft;function zt(t,e){return(0,i.kJ)(t)?t.some((t=>zt(t,e))):(0,i.HD)(t)?t.split(",").includes(e):!!(0,i.Kj)(t)&&t.test(e)}function jt(t,e){Vt(t,"a",e)}function Ht(t,e){Vt(t,"da",e)}function Vt(t,e,n=Cr){const r=t.__wdc||(t.__wdc=()=>{let e=n;while(e){if(e.isDeactivated)return;e=e.parent}return t()});if(Xt(e,r,n),n){let t=n.parent;while(t&&t.parent)Ut(t.parent.vnode)&&Gt(r,e,n,t),t=t.parent}}function Gt(t,e,n,r){const o=Xt(e,t,r,!0);te((()=>{(0,i.Od)(r[e],o)}),n)}function Wt(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function qt(t){return 128&t.shapeFlag?t.ssContent:t}function Xt(t,e,n=Cr,i=!1){if(n){const o=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...i)=>{if(n.isUnmounted)return;(0,r.Jd)(),kr(n);const o=c(e,n,t,i);return Ir(),(0,r.lk)(),o});return i?o.unshift(s):o.push(s),s}}const Yt=t=>(e,n=Cr)=>(!Fr||"sp"===t)&&Xt(t,((...t)=>e(...t)),n),$t=Yt("bm"),Kt=Yt("m"),Jt=Yt("bu"),Zt=Yt("u"),Qt=Yt("bum"),te=Yt("um"),ee=Yt("sp"),ne=Yt("rtg"),re=Yt("rtc");function ie(t,e=Cr){Xt("ec",t,e)}const oe="components",se="directives";function ae(t,e){return he(oe,t,!0,e)||t}const ce=Symbol.for("v-ndc");function le(t){return(0,i.HD)(t)?he(oe,t,!1)||t:t||ce}function ue(t){return he(se,t)}function he(t,e,n=!0,r=!1){const o=F||Cr;if(o){const n=o.type;if(t===oe){const t=Yr(n,!1);if(t&&(t===e||t===(0,i._A)(e)||t===(0,i.kC)((0,i._A)(e))))return n}const s=de(o[t]||n[t],e)||de(o.appContext[t],e);return!s&&r?n:s}}function de(t,e){return t&&(t[e]||t[(0,i._A)(e)]||t[(0,i.kC)((0,i._A)(e))])}function fe(t,e,n,r){let o;const s=n&&n[r];if((0,i.kJ)(t)||(0,i.HD)(t)){o=new Array(t.length);for(let n=0,r=t.length;n<r;n++)o[n]=e(t[n],n,void 0,s&&s[n])}else if("number"===typeof t){0,o=new Array(t);for(let n=0;n<t;n++)o[n]=e(n+1,n,void 0,s&&s[n])}else if((0,i.Kn)(t))if(t[Symbol.iterator])o=Array.from(t,((t,n)=>e(t,n,void 0,s&&s[n])));else{const n=Object.keys(t);o=new Array(n.length);for(let r=0,i=n.length;r<i;r++){const i=n[r];o[r]=e(t[i],i,r,s&&s[r])}}else o=[];return n&&(n[r]=o),o}function pe(t,e){for(let n=0;n<e.length;n++){const r=e[n];if((0,i.kJ)(r))for(let e=0;e<r.length;e++)t[r[e].name]=r[e].fn;else r&&(t[r.name]=r.key?(...t)=>{const e=r.fn(...t);return e&&(e.key=r.key),e}:r.fn)}return t}function me(t,e,n={},r,i){if(F.isCE||F.parent&&It(F.parent)&&F.parent.isCE)return"default"!==e&&(n.name=e),fr("slot",n,r&&r());let o=t[e];o&&o._c&&(o._d=!1),Zn();const s=o&&ge(o(n)),a=or(qn,{key:n.key||s&&s.key||`_${e}`},s||(r?r():[]),s&&1===t._?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),o&&o._c&&(o._d=!0),a}function ge(t){return t.some((t=>!sr(t)||t.type!==Yn&&!(t.type===qn&&!ge(t.children))))?t:null}function ve(t,e){const n={};for(const r in t)n[e&&/[A-Z]/.test(r)?`on:${r}`:(0,i.hR)(r)]=t[r];return n}const _e=t=>t?Dr(t)?Xr(t)||t.proxy:_e(t.parent):null,ye=(0,i.l7)(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>_e(t.parent),$root:t=>_e(t.root),$emit:t=>t.emit,$options:t=>Ge(t),$forceUpdate:t=>t.f||(t.f=()=>x(t.update)),$nextTick:t=>t.n||(t.n=b.bind(t.proxy)),$watch:t=>vt.bind(t)}),be=(t,e)=>t!==i.kT&&!t.__isScriptSetup&&(0,i.RI)(t,e),we={get({_:t},e){const{ctx:n,setupState:o,data:s,props:a,accessCache:c,type:l,appContext:u}=t;let h;if("$"!==e[0]){const r=c[e];if(void 0!==r)switch(r){case 1:return o[e];case 2:return s[e];case 4:return n[e];case 3:return a[e]}else{if(be(o,e))return c[e]=1,o[e];if(s!==i.kT&&(0,i.RI)(s,e))return c[e]=2,s[e];if((h=t.propsOptions[0])&&(0,i.RI)(h,e))return c[e]=3,a[e];if(n!==i.kT&&(0,i.RI)(n,e))return c[e]=4,n[e];Be&&(c[e]=0)}}const d=ye[e];let f,p;return d?("$attrs"===e&&(0,r.j)(t,"get",e),d(t)):(f=l.__cssModules)&&(f=f[e])?f:n!==i.kT&&(0,i.RI)(n,e)?(c[e]=4,n[e]):(p=u.config.globalProperties,(0,i.RI)(p,e)?p[e]:void 0)},set({_:t},e,n){const{data:r,setupState:o,ctx:s}=t;return be(o,e)?(o[e]=n,!0):r!==i.kT&&(0,i.RI)(r,e)?(r[e]=n,!0):!(0,i.RI)(t.props,e)&&(("$"!==e[0]||!(e.slice(1)in t))&&(s[e]=n,!0))},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:o,propsOptions:s}},a){let c;return!!n[a]||t!==i.kT&&(0,i.RI)(t,a)||be(e,a)||(c=s[0])&&(0,i.RI)(c,a)||(0,i.RI)(r,a)||(0,i.RI)(ye,a)||(0,i.RI)(o.config.globalProperties,a)},defineProperty(t,e,n){return null!=n.get?t._.accessCache[e]=0:(0,i.RI)(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};const xe=(0,i.l7)({},we,{get(t,e){if(e!==Symbol.unscopables)return we.get(t,e,t)},has(t,e){const n="_"!==e[0]&&!(0,i.e1)(e);return n}});function Ee(){return null}function Se(){return null}function Me(t){0}function Te(t){0}function Ae(){return null}function Ce(){0}function Re(t,e){return null}function Pe(){return ke().slots}function Oe(){return ke().attrs}function Le(t,e,n){const i=Rr();if(n&&n.local){const n=(0,r.iH)(t[e]);return mt((()=>t[e]),(t=>n.value=t)),mt(n,(n=>{n!==t[e]&&i.emit(`update:${e}`,n)})),n}return{__v_isRef:!0,get value(){return t[e]},set value(t){i.emit(`update:${e}`,t)}}}function ke(){const t=Rr();return t.setupContext||(t.setupContext=qr(t))}function Ie(t){return(0,i.kJ)(t)?t.reduce(((t,e)=>(t[e]=null,t)),{}):t}function De(t,e){const n=Ie(t);for(const r in e){if(r.startsWith("__skip"))continue;let t=n[r];t?(0,i.kJ)(t)||(0,i.mf)(t)?t=n[r]={type:t,default:e[r]}:t.default=e[r]:null===t&&(t=n[r]={default:e[r]}),t&&e[`__skip_${r}`]&&(t.skipFactory=!0)}return n}function Ne(t,e){return t&&e?(0,i.kJ)(t)&&(0,i.kJ)(e)?t.concat(e):(0,i.l7)({},Ie(t),Ie(e)):t||e}function Ue(t,e){const n={};for(const r in t)e.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>t[r]});return n}function Fe(t){const e=Rr();let n=t();return Ir(),(0,i.tI)(n)&&(n=n.catch((t=>{throw kr(e),t}))),[n,()=>kr(e)]}let Be=!0;function ze(t){const e=Ge(t),n=t.proxy,o=t.ctx;Be=!1,e.beforeCreate&&He(e.beforeCreate,t,"bc");const{data:s,computed:a,methods:c,watch:l,provide:u,inject:h,created:d,beforeMount:f,mounted:p,beforeUpdate:m,updated:g,activated:v,deactivated:_,beforeDestroy:y,beforeUnmount:b,destroyed:w,unmounted:x,render:E,renderTracked:S,renderTriggered:M,errorCaptured:T,serverPrefetch:A,expose:C,inheritAttrs:R,components:P,directives:O,filters:L}=e,k=null;if(h&&je(h,o,k),c)for(const r in c){const t=c[r];(0,i.mf)(t)&&(o[r]=t.bind(n))}if(s){0;const e=s.call(n,n);0,(0,i.Kn)(e)&&(t.data=(0,r.qj)(e))}if(Be=!0,a)for(const r in a){const t=a[r],e=(0,i.mf)(t)?t.bind(n,n):(0,i.mf)(t.get)?t.get.bind(n,n):i.dG;0;const s=!(0,i.mf)(t)&&(0,i.mf)(t.set)?t.set.bind(n):i.dG,c=Kr({get:e,set:s});Object.defineProperty(o,r,{enumerable:!0,configurable:!0,get:()=>c.value,set:t=>c.value=t})}if(l)for(const r in l)Ve(l[r],o,n,r);if(u){const t=(0,i.mf)(u)?u.call(n):u;Reflect.ownKeys(t).forEach((e=>{on(e,t[e])}))}function I(t,e){(0,i.kJ)(e)?e.forEach((e=>t(e.bind(n)))):e&&t(e.bind(n))}if(d&&He(d,t,"c"),I($t,f),I(Kt,p),I(Jt,m),I(Zt,g),I(jt,v),I(Ht,_),I(ie,T),I(re,S),I(ne,M),I(Qt,b),I(te,x),I(ee,A),(0,i.kJ)(C))if(C.length){const e=t.exposed||(t.exposed={});C.forEach((t=>{Object.defineProperty(e,t,{get:()=>n[t],set:e=>n[t]=e})}))}else t.exposed||(t.exposed={});E&&t.render===i.dG&&(t.render=E),null!=R&&(t.inheritAttrs=R),P&&(t.components=P),O&&(t.directives=O)}function je(t,e,n=i.dG){(0,i.kJ)(t)&&(t=$e(t));for(const o in t){const n=t[o];let s;s=(0,i.Kn)(n)?"default"in n?sn(n.from||o,n.default,!0):sn(n.from||o):sn(n),(0,r.dq)(s)?Object.defineProperty(e,o,{enumerable:!0,configurable:!0,get:()=>s.value,set:t=>s.value=t}):e[o]=s}}function He(t,e,n){c((0,i.kJ)(t)?t.map((t=>t.bind(e.proxy))):t.bind(e.proxy),e,n)}function Ve(t,e,n,r){const o=r.includes(".")?_t(n,r):()=>n[r];if((0,i.HD)(t)){const n=e[t];(0,i.mf)(n)&&mt(o,n)}else if((0,i.mf)(t))mt(o,t.bind(n));else if((0,i.Kn)(t))if((0,i.kJ)(t))t.forEach((t=>Ve(t,e,n,r)));else{const r=(0,i.mf)(t.handler)?t.handler.bind(n):e[t.handler];(0,i.mf)(r)&&mt(o,r,t)}else 0}function Ge(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:o,optionsCache:s,config:{optionMergeStrategies:a}}=t.appContext,c=s.get(e);let l;return c?l=c:o.length||n||r?(l={},o.length&&o.forEach((t=>We(l,t,a,!0))),We(l,e,a)):l=e,(0,i.Kn)(e)&&s.set(e,l),l}function We(t,e,n,r=!1){const{mixins:i,extends:o}=e;o&&We(t,o,n,!0),i&&i.forEach((e=>We(t,e,n,!0)));for(const s in e)if(r&&"expose"===s);else{const r=qe[s]||n&&n[s];t[s]=r?r(t[s],e[s]):e[s]}return t}const qe={data:Xe,props:Ze,emits:Ze,methods:Je,computed:Je,beforeCreate:Ke,created:Ke,beforeMount:Ke,mounted:Ke,beforeUpdate:Ke,updated:Ke,beforeDestroy:Ke,beforeUnmount:Ke,destroyed:Ke,unmounted:Ke,activated:Ke,deactivated:Ke,errorCaptured:Ke,serverPrefetch:Ke,components:Je,directives:Je,watch:Qe,provide:Xe,inject:Ye};function Xe(t,e){return e?t?function(){return(0,i.l7)((0,i.mf)(t)?t.call(this,this):t,(0,i.mf)(e)?e.call(this,this):e)}:e:t}function Ye(t,e){return Je($e(t),$e(e))}function $e(t){if((0,i.kJ)(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ke(t,e){return t?[...new Set([].concat(t,e))]:e}function Je(t,e){return t?(0,i.l7)(Object.create(null),t,e):e}function Ze(t,e){return t?(0,i.kJ)(t)&&(0,i.kJ)(e)?[...new Set([...t,...e])]:(0,i.l7)(Object.create(null),Ie(t),Ie(null!=e?e:{})):e}function Qe(t,e){if(!t)return e;if(!e)return t;const n=(0,i.l7)(Object.create(null),t);for(const r in e)n[r]=Ke(t[r],e[r]);return n}function tn(){return{app:null,config:{isNativeTag:i.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let en=0;function nn(t,e){return function(n,r=null){(0,i.mf)(n)||(n=(0,i.l7)({},n)),null==r||(0,i.Kn)(r)||(r=null);const o=tn();const s=new Set;let a=!1;const c=o.app={_uid:en++,_component:n,_props:r,_container:null,_context:o,_instance:null,version:ri,get config(){return o.config},set config(t){0},use(t,...e){return s.has(t)||(t&&(0,i.mf)(t.install)?(s.add(t),t.install(c,...e)):(0,i.mf)(t)&&(s.add(t),t(c,...e))),c},mixin(t){return o.mixins.includes(t)||o.mixins.push(t),c},component(t,e){return e?(o.components[t]=e,c):o.components[t]},directive(t,e){return e?(o.directives[t]=e,c):o.directives[t]},mount(i,s,l){if(!a){0;const u=fr(n,r);return u.appContext=o,s&&e?e(u,i):t(u,i,l),a=!0,c._container=i,i.__vue_app__=c,Xr(u.component)||u.component.proxy}},unmount(){a&&(t(null,c._container),delete c._container.__vue_app__)},provide(t,e){return o.provides[t]=e,c},runWithContext(t){rn=c;try{return t()}finally{rn=null}}};return c}}let rn=null;function on(t,e){if(Cr){let n=Cr.provides;const r=Cr.parent&&Cr.parent.provides;r===n&&(n=Cr.provides=Object.create(r)),n[t]=e}else 0}function sn(t,e,n=!1){const r=Cr||F;if(r||rn){const o=r?null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:rn._context.provides;if(o&&t in o)return o[t];if(arguments.length>1)return n&&(0,i.mf)(e)?e.call(r&&r.proxy):e}else 0}function an(){return!!(Cr||F||rn)}function cn(t,e,n,o=!1){const s={},a={};(0,i.Nj)(a,lr,1),t.propsDefaults=Object.create(null),un(t,e,s,a);for(const r in t.propsOptions[0])r in s||(s[r]=void 0);n?t.props=o?s:(0,r.Um)(s):t.type.props?t.props=s:t.props=a,t.attrs=a}function ln(t,e,n,o){const{props:s,attrs:a,vnode:{patchFlag:c}}=t,l=(0,r.IU)(s),[u]=t.propsOptions;let h=!1;if(!(o||c>0)||16&c){let r;un(t,e,s,a)&&(h=!0);for(const o in l)e&&((0,i.RI)(e,o)||(r=(0,i.rs)(o))!==o&&(0,i.RI)(e,r))||(u?!n||void 0===n[o]&&void 0===n[r]||(s[o]=hn(u,l,o,void 0,t,!0)):delete s[o]);if(a!==l)for(const t in a)e&&(0,i.RI)(e,t)||(delete a[t],h=!0)}else if(8&c){const n=t.vnode.dynamicProps;for(let r=0;r<n.length;r++){let o=n[r];if(U(t.emitsOptions,o))continue;const c=e[o];if(u)if((0,i.RI)(a,o))c!==a[o]&&(a[o]=c,h=!0);else{const e=(0,i._A)(o);s[e]=hn(u,l,e,c,t,!1)}else c!==a[o]&&(a[o]=c,h=!0)}}h&&(0,r.X$)(t,"set","$attrs")}function un(t,e,n,o){const[s,a]=t.propsOptions;let c,l=!1;if(e)for(let r in e){if((0,i.Gg)(r))continue;const u=e[r];let h;s&&(0,i.RI)(s,h=(0,i._A)(r))?a&&a.includes(h)?(c||(c={}))[h]=u:n[h]=u:U(t.emitsOptions,r)||r in o&&u===o[r]||(o[r]=u,l=!0)}if(a){const e=(0,r.IU)(n),o=c||i.kT;for(let r=0;r<a.length;r++){const c=a[r];n[c]=hn(s,e,c,o[c],t,!(0,i.RI)(o,c))}}return l}function hn(t,e,n,r,o,s){const a=t[n];if(null!=a){const t=(0,i.RI)(a,"default");if(t&&void 0===r){const t=a.default;if(a.type!==Function&&!a.skipFactory&&(0,i.mf)(t)){const{propsDefaults:i}=o;n in i?r=i[n]:(kr(o),r=i[n]=t.call(null,e),Ir())}else r=t}a[0]&&(s&&!t?r=!1:!a[1]||""!==r&&r!==(0,i.rs)(n)||(r=!0))}return r}function dn(t,e,n=!1){const r=e.propsCache,o=r.get(t);if(o)return o;const s=t.props,a={},c=[];let l=!1;if(!(0,i.mf)(t)){const r=t=>{l=!0;const[n,r]=dn(t,e,!0);(0,i.l7)(a,n),r&&c.push(...r)};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}if(!s&&!l)return(0,i.Kn)(t)&&r.set(t,i.Z6),i.Z6;if((0,i.kJ)(s))for(let h=0;h<s.length;h++){0;const t=(0,i._A)(s[h]);fn(t)&&(a[t]=i.kT)}else if(s){0;for(const t in s){const e=(0,i._A)(t);if(fn(e)){const n=s[t],r=a[e]=(0,i.kJ)(n)||(0,i.mf)(n)?{type:n}:(0,i.l7)({},n);if(r){const t=gn(Boolean,r.type),n=gn(String,r.type);r[0]=t>-1,r[1]=n<0||t<n,(t>-1||(0,i.RI)(r,"default"))&&c.push(e)}}}}const u=[a,c];return(0,i.Kn)(t)&&r.set(t,u),u}function fn(t){return"$"!==t[0]}function pn(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:null===t?"null":""}function mn(t,e){return pn(t)===pn(e)}function gn(t,e){return(0,i.kJ)(e)?e.findIndex((e=>mn(e,t))):(0,i.mf)(e)&&mn(e,t)?0:-1}const vn=t=>"_"===t[0]||"$stable"===t,_n=t=>(0,i.kJ)(t)?t.map(br):[br(t)],yn=(t,e,n)=>{if(e._n)return e;const r=G(((...t)=>_n(e(...t))),n);return r._c=!1,r},bn=(t,e,n)=>{const r=t._ctx;for(const o in t){if(vn(o))continue;const n=t[o];if((0,i.mf)(n))e[o]=yn(o,n,r);else if(null!=n){0;const t=_n(n);e[o]=()=>t}}},wn=(t,e)=>{const n=_n(e);t.slots.default=()=>n},xn=(t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=(0,r.IU)(e),(0,i.Nj)(e,"_",n)):bn(e,t.slots={})}else t.slots={},e&&wn(t,e);(0,i.Nj)(t.slots,lr,1)},En=(t,e,n)=>{const{vnode:r,slots:o}=t;let s=!0,a=i.kT;if(32&r.shapeFlag){const t=e._;t?n&&1===t?s=!1:((0,i.l7)(o,e),n||1!==t||delete o._):(s=!e.$stable,bn(e,o)),a=e}else e&&(wn(t,e),a={default:1});if(s)for(const i in o)vn(i)||i in a||delete o[i]};function Sn(t,e,n,o,s=!1){if((0,i.kJ)(t))return void t.forEach(((t,r)=>Sn(t,e&&((0,i.kJ)(e)?e[r]:e),n,o,s)));if(It(o)&&!s)return;const c=4&o.shapeFlag?Xr(o.component)||o.component.proxy:o.el,l=s?null:c,{i:u,r:h}=t;const d=e&&e.r,f=u.refs===i.kT?u.refs={}:u.refs,p=u.setupState;if(null!=d&&d!==h&&((0,i.HD)(d)?(f[d]=null,(0,i.RI)(p,d)&&(p[d]=null)):(0,r.dq)(d)&&(d.value=null)),(0,i.mf)(h))a(h,u,12,[l,f]);else{const e=(0,i.HD)(h),o=(0,r.dq)(h);if(e||o){const r=()=>{if(t.f){const n=e?(0,i.RI)(p,h)?p[h]:f[h]:h.value;s?(0,i.kJ)(n)&&(0,i.Od)(n,c):(0,i.kJ)(n)?n.includes(c)||n.push(c):e?(f[h]=[c],(0,i.RI)(p,h)&&(p[h]=f[h])):(h.value=[c],t.k&&(f[t.k]=h.value))}else e?(f[h]=l,(0,i.RI)(p,h)&&(p[h]=l)):o&&(h.value=l,t.k&&(f[t.k]=l))};l?(r.id=-1,Pn(r,n)):r()}else 0}}let Mn=!1;const Tn=t=>/svg/.test(t.namespaceURI)&&"foreignObject"!==t.tagName,An=t=>8===t.nodeType;function Cn(t){const{mt:e,p:n,o:{patchProp:r,createText:o,nextSibling:s,parentNode:a,remove:c,insert:l,createComment:u}}=t,h=(t,e)=>{if(!e.hasChildNodes())return n(null,t,e),A(),void(e._vnode=t);Mn=!1,d(e.firstChild,t,null,null,null),A(),e._vnode=t,Mn&&console.error("Hydration completed but contains mismatches.")},d=(n,r,i,c,u,h=!1)=>{const _=An(n)&&"["===n.data,y=()=>g(n,r,i,c,u,_),{type:b,ref:w,shapeFlag:x,patchFlag:E}=r;let S=n.nodeType;r.el=n,-2===E&&(h=!1,r.dynamicChildren=null);let M=null;switch(b){case Xn:3!==S?""===r.children?(l(r.el=o(""),a(n),n),M=n):M=y():(n.data!==r.children&&(Mn=!0,n.data=r.children),M=s(n));break;case Yn:M=8!==S||_?y():s(n);break;case $n:if(_&&(n=s(n),S=n.nodeType),1===S||3===S){M=n;const t=!r.children.length;for(let e=0;e<r.staticCount;e++)t&&(r.children+=1===M.nodeType?M.outerHTML:M.data),e===r.staticCount-1&&(r.anchor=M),M=s(M);return _?s(M):M}y();break;case qn:M=_?m(n,r,i,c,u,h):y();break;default:if(1&x)M=1!==S||r.type.toLowerCase()!==n.tagName.toLowerCase()?y():f(n,r,i,c,u,h);else if(6&x){r.slotScopeIds=u;const t=a(n);if(e(r,t,null,i,c,Tn(t),h),M=_?v(n):s(n),M&&An(M)&&"teleport end"===M.data&&(M=s(M)),It(r)){let e;_?(e=fr(qn),e.anchor=M?M.previousSibling:t.lastChild):e=3===n.nodeType?vr(""):fr("div"),e.el=n,r.component.subTree=e}}else 64&x?M=8!==S?y():r.type.hydrate(n,r,i,c,u,h,t,p):128&x&&(M=r.type.hydrate(n,r,i,c,Tn(a(n)),u,h,t,d))}return null!=w&&Sn(w,null,c,r),M},f=(t,e,n,o,s,a)=>{a=a||!!e.dynamicChildren;const{type:l,props:u,patchFlag:h,shapeFlag:d,dirs:f}=e,m="input"===l&&f||"option"===l;if(m||-1!==h){if(f&&wt(e,null,n,"created"),u)if(m||!a||48&h)for(const e in u)(m&&e.endsWith("value")||(0,i.F7)(e)&&!(0,i.Gg)(e))&&r(t,e,null,u[e],!1,void 0,n);else u.onClick&&r(t,"onClick",null,u.onClick,!1,void 0,n);let l;if((l=u&&u.onVnodeBeforeMount)&&Sr(l,n,e),f&&wt(e,null,n,"beforeMount"),((l=u&&u.onVnodeMounted)||f)&&ct((()=>{l&&Sr(l,n,e),f&&wt(e,null,n,"mounted")}),o),16&d&&(!u||!u.innerHTML&&!u.textContent)){let r=p(t.firstChild,e,t,n,o,s,a);while(r){Mn=!0;const t=r;r=r.nextSibling,c(t)}}else 8&d&&t.textContent!==e.children&&(Mn=!0,t.textContent=e.children)}return t.nextSibling},p=(t,e,r,i,o,s,a)=>{a=a||!!e.dynamicChildren;const c=e.children,l=c.length;for(let u=0;u<l;u++){const e=a?c[u]:c[u]=br(c[u]);if(t)t=d(t,e,i,o,s,a);else{if(e.type===Xn&&!e.children)continue;Mn=!0,n(null,e,r,null,i,o,Tn(r),s)}}return t},m=(t,e,n,r,i,o)=>{const{slotScopeIds:c}=e;c&&(i=i?i.concat(c):c);const h=a(t),d=p(s(t),e,h,n,r,i,o);return d&&An(d)&&"]"===d.data?s(e.anchor=d):(Mn=!0,l(e.anchor=u("]"),h,d),d)},g=(t,e,r,i,o,l)=>{if(Mn=!0,e.el=null,l){const e=v(t);while(1){const n=s(t);if(!n||n===e)break;c(n)}}const u=s(t),h=a(t);return c(t),n(null,e,h,u,r,i,Tn(h),o),u},v=t=>{let e=0;while(t)if(t=s(t),t&&An(t)&&("["===t.data&&e++,"]"===t.data)){if(0===e)return s(t);e--}return t};return[h,d]}function Rn(){}const Pn=ct;function On(t){return kn(t)}function Ln(t){return kn(t,Cn)}function kn(t,e){Rn();const n=(0,i.E9)();n.__VUE__=!0;const{insert:o,remove:s,patchProp:a,createElement:c,createText:l,createComment:u,setText:h,setElementText:d,parentNode:f,nextSibling:p,setScopeId:m=i.dG,insertStaticContent:g}=t,v=(t,e,n,r=null,i=null,o=null,s=!1,a=null,c=!!e.dynamicChildren)=>{if(t===e)return;t&&!ar(t,e)&&(r=Z(t),G(t,i,o,!0),t=null),-2===e.patchFlag&&(c=!1,e.dynamicChildren=null);const{type:l,ref:u,shapeFlag:h}=e;switch(l){case Xn:_(t,e,n,r);break;case Yn:y(t,e,n,r);break;case $n:null==t&&b(e,n,r,s);break;case qn:I(t,e,n,r,i,o,s,a,c);break;default:1&h?M(t,e,n,r,i,o,s,a,c):6&h?D(t,e,n,r,i,o,s,a,c):(64&h||128&h)&&l.process(t,e,n,r,i,o,s,a,c,tt)}null!=u&&i&&Sn(u,t&&t.ref,o,e||t,!e)},_=(t,e,n,r)=>{if(null==t)o(e.el=l(e.children),n,r);else{const n=e.el=t.el;e.children!==t.children&&h(n,e.children)}},y=(t,e,n,r)=>{null==t?o(e.el=u(e.children||""),n,r):e.el=t.el},b=(t,e,n,r)=>{[t.el,t.anchor]=g(t.children,e,n,r,t.el,t.anchor)},w=({el:t,anchor:e},n,r)=>{let i;while(t&&t!==e)i=p(t),o(t,n,r),t=i;o(e,n,r)},E=({el:t,anchor:e})=>{let n;while(t&&t!==e)n=p(t),s(t),t=n;s(e)},M=(t,e,n,r,i,o,s,a,c)=>{s=s||"svg"===e.type,null==t?C(e,n,r,i,o,s,a,c):O(t,e,i,o,s,a,c)},C=(t,e,n,r,s,l,u,h)=>{let f,p;const{type:m,props:g,shapeFlag:v,transition:_,dirs:y}=t;if(f=t.el=c(t.type,l,g&&g.is,g),8&v?d(f,t.children):16&v&&P(t.children,f,null,r,s,l&&"foreignObject"!==m,u,h),y&&wt(t,null,r,"created"),R(f,t,t.scopeId,u,r),g){for(const e in g)"value"===e||(0,i.Gg)(e)||a(f,e,null,g[e],l,t.children,r,s,K);"value"in g&&a(f,"value",null,g.value),(p=g.onVnodeBeforeMount)&&Sr(p,r,t)}y&&wt(t,null,r,"beforeMount");const b=(!s||s&&!s.pendingBranch)&&_&&!_.persisted;b&&_.beforeEnter(f),o(f,e,n),((p=g&&g.onVnodeMounted)||b||y)&&Pn((()=>{p&&Sr(p,r,t),b&&_.enter(f),y&&wt(t,null,r,"mounted")}),s)},R=(t,e,n,r,i)=>{if(n&&m(t,n),r)for(let o=0;o<r.length;o++)m(t,r[o]);if(i){let n=i.subTree;if(e===n){const e=i.vnode;R(t,e,e.scopeId,e.slotScopeIds,i.parent)}}},P=(t,e,n,r,i,o,s,a,c=0)=>{for(let l=c;l<t.length;l++){const c=t[l]=a?wr(t[l]):br(t[l]);v(null,c,e,n,r,i,o,s,a)}},O=(t,e,n,r,o,s,c)=>{const l=e.el=t.el;let{patchFlag:u,dynamicChildren:h,dirs:f}=e;u|=16&t.patchFlag;const p=t.props||i.kT,m=e.props||i.kT;let g;n&&In(n,!1),(g=m.onVnodeBeforeUpdate)&&Sr(g,n,e,t),f&&wt(e,t,n,"beforeUpdate"),n&&In(n,!0);const v=o&&"foreignObject"!==e.type;if(h?L(t.dynamicChildren,h,l,n,r,v,s):c||z(t,e,l,null,n,r,v,s,!1),u>0){if(16&u)k(l,e,p,m,n,r,o);else if(2&u&&p.class!==m.class&&a(l,"class",null,m.class,o),4&u&&a(l,"style",p.style,m.style,o),8&u){const i=e.dynamicProps;for(let e=0;e<i.length;e++){const s=i[e],c=p[s],u=m[s];u===c&&"value"!==s||a(l,s,c,u,o,t.children,n,r,K)}}1&u&&t.children!==e.children&&d(l,e.children)}else c||null!=h||k(l,e,p,m,n,r,o);((g=m.onVnodeUpdated)||f)&&Pn((()=>{g&&Sr(g,n,e,t),f&&wt(e,t,n,"updated")}),r)},L=(t,e,n,r,i,o,s)=>{for(let a=0;a<e.length;a++){const c=t[a],l=e[a],u=c.el&&(c.type===qn||!ar(c,l)||70&c.shapeFlag)?f(c.el):n;v(c,l,u,null,r,i,o,s,!0)}},k=(t,e,n,r,o,s,c)=>{if(n!==r){if(n!==i.kT)for(const l in n)(0,i.Gg)(l)||l in r||a(t,l,n[l],null,c,e.children,o,s,K);for(const l in r){if((0,i.Gg)(l))continue;const u=r[l],h=n[l];u!==h&&"value"!==l&&a(t,l,h,u,c,e.children,o,s,K)}"value"in r&&a(t,"value",n.value,r.value)}},I=(t,e,n,r,i,s,a,c,u)=>{const h=e.el=t?t.el:l(""),d=e.anchor=t?t.anchor:l("");let{patchFlag:f,dynamicChildren:p,slotScopeIds:m}=e;m&&(c=c?c.concat(m):m),null==t?(o(h,n,r),o(d,n,r),P(e.children,n,d,i,s,a,c,u)):f>0&&64&f&&p&&t.dynamicChildren?(L(t.dynamicChildren,p,n,i,s,a,c),(null!=e.key||i&&e===i.subTree)&&Dn(t,e,!0)):z(t,e,n,d,i,s,a,c,u)},D=(t,e,n,r,i,o,s,a,c)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?i.ctx.activate(e,n,r,s,c):N(e,n,r,i,o,s,c):U(t,e,c)},N=(t,e,n,r,i,o,s)=>{const a=t.component=Ar(t,r,i);if(Ut(t)&&(a.ctx.renderer=tt),Br(a),a.asyncDep){if(i&&i.registerDep(a,F),!t.el){const t=a.subTree=fr(Yn);y(null,t,e,n)}}else F(a,t,e,n,i,o,s)},U=(t,e,n)=>{const r=e.component=t.component;if($(t,e,n)){if(r.asyncDep&&!r.asyncResolved)return void B(r,e,n);r.next=e,S(r.update),r.update()}else e.el=t.el,r.vnode=e},F=(t,e,n,o,s,a,c)=>{const l=()=>{if(t.isMounted){let e,{next:n,bu:r,u:o,parent:l,vnode:u}=t,h=n;0,In(t,!1),n?(n.el=u.el,B(t,n,c)):n=u,r&&(0,i.ir)(r),(e=n.props&&n.props.onVnodeBeforeUpdate)&&Sr(e,l,n,u),In(t,!0);const d=W(t);0;const p=t.subTree;t.subTree=d,v(p,d,f(p.el),Z(p),t,s,a),n.el=d.el,null===h&&J(t,d.el),o&&Pn(o,s),(e=n.props&&n.props.onVnodeUpdated)&&Pn((()=>Sr(e,l,n,u)),s)}else{let r;const{el:c,props:l}=e,{bm:u,m:h,parent:d}=t,f=It(e);if(In(t,!1),u&&(0,i.ir)(u),!f&&(r=l&&l.onVnodeBeforeMount)&&Sr(r,d,e),In(t,!0),c&&nt){const n=()=>{t.subTree=W(t),nt(c,t.subTree,t,s,null)};f?e.type.__asyncLoader().then((()=>!t.isUnmounted&&n())):n()}else{0;const r=t.subTree=W(t);0,v(null,r,n,o,t,s,a),e.el=r.el}if(h&&Pn(h,s),!f&&(r=l&&l.onVnodeMounted)){const t=e;Pn((()=>Sr(r,d,t)),s)}(256&e.shapeFlag||d&&It(d.vnode)&&256&d.vnode.shapeFlag)&&t.a&&Pn(t.a,s),t.isMounted=!0,e=n=o=null}},u=t.effect=new r.qq(l,(()=>x(h)),t.scope),h=t.update=()=>u.run();h.id=t.uid,In(t,!0),h()},B=(t,e,n)=>{e.component=t;const i=t.vnode.props;t.vnode=e,t.next=null,ln(t,e.props,i,n),En(t,e.children,n),(0,r.Jd)(),T(),(0,r.lk)()},z=(t,e,n,r,i,o,s,a,c=!1)=>{const l=t&&t.children,u=t?t.shapeFlag:0,h=e.children,{patchFlag:f,shapeFlag:p}=e;if(f>0){if(128&f)return void H(l,h,n,r,i,o,s,a,c);if(256&f)return void j(l,h,n,r,i,o,s,a,c)}8&p?(16&u&&K(l,i,o),h!==l&&d(n,h)):16&u?16&p?H(l,h,n,r,i,o,s,a,c):K(l,i,o,!0):(8&u&&d(n,""),16&p&&P(h,n,r,i,o,s,a,c))},j=(t,e,n,r,o,s,a,c,l)=>{t=t||i.Z6,e=e||i.Z6;const u=t.length,h=e.length,d=Math.min(u,h);let f;for(f=0;f<d;f++){const r=e[f]=l?wr(e[f]):br(e[f]);v(t[f],r,n,null,o,s,a,c,l)}u>h?K(t,o,s,!0,!1,d):P(e,n,r,o,s,a,c,l,d)},H=(t,e,n,r,o,s,a,c,l)=>{let u=0;const h=e.length;let d=t.length-1,f=h-1;while(u<=d&&u<=f){const r=t[u],i=e[u]=l?wr(e[u]):br(e[u]);if(!ar(r,i))break;v(r,i,n,null,o,s,a,c,l),u++}while(u<=d&&u<=f){const r=t[d],i=e[f]=l?wr(e[f]):br(e[f]);if(!ar(r,i))break;v(r,i,n,null,o,s,a,c,l),d--,f--}if(u>d){if(u<=f){const t=f+1,i=t<h?e[t].el:r;while(u<=f)v(null,e[u]=l?wr(e[u]):br(e[u]),n,i,o,s,a,c,l),u++}}else if(u>f)while(u<=d)G(t[u],o,s,!0),u++;else{const p=u,m=u,g=new Map;for(u=m;u<=f;u++){const t=e[u]=l?wr(e[u]):br(e[u]);null!=t.key&&g.set(t.key,u)}let _,y=0;const b=f-m+1;let w=!1,x=0;const E=new Array(b);for(u=0;u<b;u++)E[u]=0;for(u=p;u<=d;u++){const r=t[u];if(y>=b){G(r,o,s,!0);continue}let i;if(null!=r.key)i=g.get(r.key);else for(_=m;_<=f;_++)if(0===E[_-m]&&ar(r,e[_])){i=_;break}void 0===i?G(r,o,s,!0):(E[i-m]=u+1,i>=x?x=i:w=!0,v(r,e[i],n,null,o,s,a,c,l),y++)}const S=w?Nn(E):i.Z6;for(_=S.length-1,u=b-1;u>=0;u--){const t=m+u,i=e[t],d=t+1<h?e[t+1].el:r;0===E[u]?v(null,i,n,d,o,s,a,c,l):w&&(_<0||u!==S[_]?V(i,n,d,2):_--)}}},V=(t,e,n,r,i=null)=>{const{el:s,type:a,transition:c,children:l,shapeFlag:u}=t;if(6&u)return void V(t.component.subTree,e,n,r);if(128&u)return void t.suspense.move(e,n,r);if(64&u)return void a.move(t,e,n,tt);if(a===qn){o(s,e,n);for(let t=0;t<l.length;t++)V(l[t],e,n,r);return void o(t.anchor,e,n)}if(a===$n)return void w(t,e,n);const h=2!==r&&1&u&&c;if(h)if(0===r)c.beforeEnter(s),o(s,e,n),Pn((()=>c.enter(s)),i);else{const{leave:t,delayLeave:r,afterLeave:i}=c,a=()=>o(s,e,n),l=()=>{t(s,(()=>{a(),i&&i()}))};r?r(s,a,l):l()}else o(s,e,n)},G=(t,e,n,r=!1,i=!1)=>{const{type:o,props:s,ref:a,children:c,dynamicChildren:l,shapeFlag:u,patchFlag:h,dirs:d}=t;if(null!=a&&Sn(a,null,n,t,!0),256&u)return void e.ctx.deactivate(t);const f=1&u&&d,p=!It(t);let m;if(p&&(m=s&&s.onVnodeBeforeUnmount)&&Sr(m,e,t),6&u)Y(t.component,n,r);else{if(128&u)return void t.suspense.unmount(n,r);f&&wt(t,null,e,"beforeUnmount"),64&u?t.type.remove(t,e,n,i,tt,r):l&&(o!==qn||h>0&&64&h)?K(l,e,n,!1,!0):(o===qn&&384&h||!i&&16&u)&&K(c,e,n),r&&q(t)}(p&&(m=s&&s.onVnodeUnmounted)||f)&&Pn((()=>{m&&Sr(m,e,t),f&&wt(t,null,e,"unmounted")}),n)},q=t=>{const{type:e,el:n,anchor:r,transition:i}=t;if(e===qn)return void X(n,r);if(e===$n)return void E(t);const o=()=>{s(n),i&&!i.persisted&&i.afterLeave&&i.afterLeave()};if(1&t.shapeFlag&&i&&!i.persisted){const{leave:e,delayLeave:r}=i,s=()=>e(n,o);r?r(t.el,o,s):s()}else o()},X=(t,e)=>{let n;while(t!==e)n=p(t),s(t),t=n;s(e)},Y=(t,e,n)=>{const{bum:r,scope:o,update:s,subTree:a,um:c}=t;r&&(0,i.ir)(r),o.stop(),s&&(s.active=!1,G(a,t,e,n)),c&&Pn(c,e),Pn((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},K=(t,e,n,r=!1,i=!1,o=0)=>{for(let s=o;s<t.length;s++)G(t[s],e,n,r,i)},Z=t=>6&t.shapeFlag?Z(t.component.subTree):128&t.shapeFlag?t.suspense.next():p(t.anchor||t.el),Q=(t,e,n)=>{null==t?e._vnode&&G(e._vnode,null,null,!0):v(e._vnode||null,t,e,null,null,null,n),T(),A(),e._vnode=t},tt={p:v,um:G,m:V,r:q,mt:N,mc:P,pc:z,pbc:L,n:Z,o:t};let et,nt;return e&&([et,nt]=e(tt)),{render:Q,hydrate:et,createApp:nn(Q,et)}}function In({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function Dn(t,e,n=!1){const r=t.children,o=e.children;if((0,i.kJ)(r)&&(0,i.kJ)(o))for(let i=0;i<r.length;i++){const t=r[i];let e=o[i];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=o[i]=wr(o[i]),e.el=t.el),n||Dn(t,e)),e.type===Xn&&(e.el=t.el)}}function Nn(t){const e=t.slice(),n=[0];let r,i,o,s,a;const c=t.length;for(r=0;r<c;r++){const c=t[r];if(0!==c){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}o=0,s=n.length-1;while(o<s)a=o+s>>1,t[n[a]]<c?o=a+1:s=a;c<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}o=n.length,s=n[o-1];while(o-- >0)n[o]=s,s=e[s];return n}const Un=t=>t.__isTeleport,Fn=t=>t&&(t.disabled||""===t.disabled),Bn=t=>"undefined"!==typeof SVGElement&&t instanceof SVGElement,zn=(t,e)=>{const n=t&&t.to;if((0,i.HD)(n)){if(e){const t=e(n);return t}return null}return n},jn={__isTeleport:!0,process(t,e,n,r,i,o,s,a,c,l){const{mc:u,pc:h,pbc:d,o:{insert:f,querySelector:p,createText:m,createComment:g}}=l,v=Fn(e.props);let{shapeFlag:_,children:y,dynamicChildren:b}=e;if(null==t){const t=e.el=m(""),l=e.anchor=m("");f(t,n,r),f(l,n,r);const h=e.target=zn(e.props,p),d=e.targetAnchor=m("");h&&(f(d,h),s=s||Bn(h));const g=(t,e)=>{16&_&&u(y,t,e,i,o,s,a,c)};v?g(n,l):h&&g(h,d)}else{e.el=t.el;const r=e.anchor=t.anchor,u=e.target=t.target,f=e.targetAnchor=t.targetAnchor,m=Fn(t.props),g=m?n:u,_=m?r:f;if(s=s||Bn(u),b?(d(t.dynamicChildren,b,g,i,o,s,a),Dn(t,e,!0)):c||h(t,e,g,_,i,o,s,a,!1),v)m||Hn(e,n,r,l,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const t=e.target=zn(e.props,p);t&&Hn(e,t,null,l,0)}else m&&Hn(e,u,f,l,1)}Wn(e)},remove(t,e,n,r,{um:i,o:{remove:o}},s){const{shapeFlag:a,children:c,anchor:l,targetAnchor:u,target:h,props:d}=t;if(h&&o(u),(s||!Fn(d))&&(o(l),16&a))for(let f=0;f<c.length;f++){const t=c[f];i(t,e,n,!0,!!t.dynamicChildren)}},move:Hn,hydrate:Vn};function Hn(t,e,n,{o:{insert:r},m:i},o=2){0===o&&r(t.targetAnchor,e,n);const{el:s,anchor:a,shapeFlag:c,children:l,props:u}=t,h=2===o;if(h&&r(s,e,n),(!h||Fn(u))&&16&c)for(let d=0;d<l.length;d++)i(l[d],e,n,2);h&&r(a,e,n)}function Vn(t,e,n,r,i,o,{o:{nextSibling:s,parentNode:a,querySelector:c}},l){const u=e.target=zn(e.props,c);if(u){const c=u._lpa||u.firstChild;if(16&e.shapeFlag)if(Fn(e.props))e.anchor=l(s(t),e,a(t),n,r,i,o),e.targetAnchor=c;else{e.anchor=s(t);let a=c;while(a)if(a=s(a),a&&8===a.nodeType&&"teleport anchor"===a.data){e.targetAnchor=a,u._lpa=e.targetAnchor&&s(e.targetAnchor);break}l(c,e,u,n,r,i,o)}Wn(e)}return e.anchor&&s(e.anchor)}const Gn=jn;function Wn(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;while(n!==t.targetAnchor)1===n.nodeType&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const qn=Symbol.for("v-fgt"),Xn=Symbol.for("v-txt"),Yn=Symbol.for("v-cmt"),$n=Symbol.for("v-stc"),Kn=[];let Jn=null;function Zn(t=!1){Kn.push(Jn=t?null:[])}function Qn(){Kn.pop(),Jn=Kn[Kn.length-1]||null}let tr,er=1;function nr(t){er+=t}function rr(t){return t.dynamicChildren=er>0?Jn||i.Z6:null,Qn(),er>0&&Jn&&Jn.push(t),t}function ir(t,e,n,r,i,o){return rr(dr(t,e,n,r,i,o,!0))}function or(t,e,n,r,i){return rr(fr(t,e,n,r,i,!0))}function sr(t){return!!t&&!0===t.__v_isVNode}function ar(t,e){return t.type===e.type&&t.key===e.key}function cr(t){tr=t}const lr="__vInternal",ur=({key:t})=>null!=t?t:null,hr=({ref:t,ref_key:e,ref_for:n})=>("number"===typeof t&&(t=""+t),null!=t?(0,i.HD)(t)||(0,r.dq)(t)||(0,i.mf)(t)?{i:F,r:t,k:e,f:!!n}:t:null);function dr(t,e=null,n=null,r=0,o=null,s=(t===qn?0:1),a=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ur(e),ref:e&&hr(e),scopeId:B,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:F};return c?(xr(l,n),128&s&&t.normalize(l)):n&&(l.shapeFlag|=(0,i.HD)(n)?8:16),er>0&&!a&&Jn&&(l.patchFlag>0||6&s)&&32!==l.patchFlag&&Jn.push(l),l}const fr=pr;function pr(t,e=null,n=null,o=0,s=null,a=!1){if(t&&t!==ce||(t=Yn),sr(t)){const r=gr(t,e,!0);return n&&xr(r,n),er>0&&!a&&Jn&&(6&r.shapeFlag?Jn[Jn.indexOf(t)]=r:Jn.push(r)),r.patchFlag|=-2,r}if($r(t)&&(t=t.__vccOpts),e){e=mr(e);let{class:t,style:n}=e;t&&!(0,i.HD)(t)&&(e.class=(0,i.C_)(t)),(0,i.Kn)(n)&&((0,r.X3)(n)&&!(0,i.kJ)(n)&&(n=(0,i.l7)({},n)),e.style=(0,i.j5)(n))}const c=(0,i.HD)(t)?1:Z(t)?128:Un(t)?64:(0,i.Kn)(t)?4:(0,i.mf)(t)?2:0;return dr(t,e,n,o,s,c,a,!0)}function mr(t){return t?(0,r.X3)(t)||lr in t?(0,i.l7)({},t):t:null}function gr(t,e,n=!1){const{props:r,ref:o,patchFlag:s,children:a}=t,c=e?Er(r||{},e):r,l={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&ur(c),ref:e&&e.ref?n&&o?(0,i.kJ)(o)?o.concat(hr(e)):[o,hr(e)]:hr(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==qn?-1===s?16:16|s:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&gr(t.ssContent),ssFallback:t.ssFallback&&gr(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l}function vr(t=" ",e=0){return fr(Xn,null,t,e)}function _r(t,e){const n=fr($n,null,t);return n.staticCount=e,n}function yr(t="",e=!1){return e?(Zn(),or(Yn,null,t)):fr(Yn,null,t)}function br(t){return null==t||"boolean"===typeof t?fr(Yn):(0,i.kJ)(t)?fr(qn,null,t.slice()):"object"===typeof t?wr(t):fr(Xn,null,String(t))}function wr(t){return null===t.el&&-1!==t.patchFlag||t.memo?t:gr(t)}function xr(t,e){let n=0;const{shapeFlag:r}=t;if(null==e)e=null;else if((0,i.kJ)(e))n=16;else if("object"===typeof e){if(65&r){const n=e.default;return void(n&&(n._c&&(n._d=!1),xr(t,n()),n._c&&(n._d=!0)))}{n=32;const r=e._;r||lr in e?3===r&&F&&(1===F.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=F}}else(0,i.mf)(e)?(e={default:e,_ctx:F},n=32):(e=String(e),64&r?(n=16,e=[vr(e)]):n=8);t.children=e,t.shapeFlag|=n}function Er(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const t in r)if("class"===t)e.class!==r.class&&(e.class=(0,i.C_)([e.class,r.class]));else if("style"===t)e.style=(0,i.j5)([e.style,r.style]);else if((0,i.F7)(t)){const n=e[t],o=r[t];!o||n===o||(0,i.kJ)(n)&&n.includes(o)||(e[t]=n?[].concat(n,o):o)}else""!==t&&(e[t]=r[t])}return e}function Sr(t,e,n,r=null){c(t,e,7,[n,r])}const Mr=tn();let Tr=0;function Ar(t,e,n){const o=t.type,s=(e?e.appContext:t.appContext)||Mr,a={uid:Tr++,vnode:t,type:o,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new r.Bj(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:dn(o,s),emitsOptions:N(o,s),emit:null,emitted:null,propsDefaults:i.kT,inheritAttrs:o.inheritAttrs,ctx:i.kT,data:i.kT,props:i.kT,attrs:i.kT,slots:i.kT,refs:i.kT,setupState:i.kT,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=D.bind(null,a),t.ce&&t.ce(a),a}let Cr=null;const Rr=()=>Cr||F;let Pr,Or,Lr="__VUE_INSTANCE_SETTERS__";(Or=(0,i.E9)()[Lr])||(Or=(0,i.E9)()[Lr]=[]),Or.push((t=>Cr=t)),Pr=t=>{Or.length>1?Or.forEach((e=>e(t))):Or[0](t)};const kr=t=>{Pr(t),t.scope.on()},Ir=()=>{Cr&&Cr.scope.off(),Pr(null)};function Dr(t){return 4&t.vnode.shapeFlag}let Nr,Ur,Fr=!1;function Br(t,e=!1){Fr=e;const{props:n,children:r}=t.vnode,i=Dr(t);cn(t,n,i,e),xn(t,r);const o=i?zr(t,e):void 0;return Fr=!1,o}function zr(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=(0,r.Xl)(new Proxy(t.ctx,we));const{setup:o}=n;if(o){const n=t.setupContext=o.length>1?qr(t):null;kr(t),(0,r.Jd)();const s=a(o,t,0,[t.props,n]);if((0,r.lk)(),Ir(),(0,i.tI)(s)){if(s.then(Ir,Ir),e)return s.then((n=>{jr(t,n,e)})).catch((e=>{l(e,t,0)}));t.asyncDep=s}else jr(t,s,e)}else Gr(t,e)}function jr(t,e,n){(0,i.mf)(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:(0,i.Kn)(e)&&(t.setupState=(0,r.WL)(e)),Gr(t,n)}function Hr(t){Nr=t,Ur=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,xe))}}const Vr=()=>!Nr;function Gr(t,e,n){const o=t.type;if(!t.render){if(!e&&Nr&&!o.render){const e=o.template||Ge(t).template;if(e){0;const{isCustomElement:n,compilerOptions:r}=t.appContext.config,{delimiters:s,compilerOptions:a}=o,c=(0,i.l7)((0,i.l7)({isCustomElement:n,delimiters:s},r),a);o.render=Nr(e,c)}}t.render=o.render||i.dG,Ur&&Ur(t)}kr(t),(0,r.Jd)(),ze(t),(0,r.lk)(),Ir()}function Wr(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return(0,r.j)(t,"get","$attrs"),e[n]}}))}function qr(t){const e=e=>{t.exposed=e||{}};return{get attrs(){return Wr(t)},slots:t.slots,emit:t.emit,expose:e}}function Xr(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy((0,r.WL)((0,r.Xl)(t.exposed)),{get(e,n){return n in e?e[n]:n in ye?ye[n](t):void 0},has(t,e){return e in t||e in ye}}))}function Yr(t,e=!0){return(0,i.mf)(t)?t.displayName||t.name:t.name||e&&t.__name}function $r(t){return(0,i.mf)(t)&&"__vccOpts"in t}const Kr=(t,e)=>(0,r.Fl)(t,e,Fr);function Jr(t,e,n){const r=arguments.length;return 2===r?(0,i.Kn)(e)&&!(0,i.kJ)(e)?sr(e)?fr(t,null,[e]):fr(t,e):fr(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&sr(n)&&(n=[n]),fr(t,e,n))}const Zr=Symbol.for("v-scx"),Qr=()=>{{const t=sn(Zr);return t}};function ti(){return void 0}function ei(t,e,n,r){const i=n[r];if(i&&ni(i,t))return i;const o=e();return o.memo=t.slice(),n[r]=o}function ni(t,e){const n=t.memo;if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if((0,i.aU)(n[r],e[r]))return!1;return er>0&&Jn&&Jn.push(t),!0}const ri="3.3.4",ii={createComponentInstance:Ar,setupComponent:Br,renderComponentRoot:W,setCurrentRenderingInstance:z,isVNode:sr,normalizeVNode:br},oi=ii,si=null,ai=null},9242:function(t,e,n){"use strict";n.d(e,{$d:function(){return i.$d},$y:function(){return i.$y},Ah:function(){return I},B:function(){return i.B},BK:function(){return i.BK},Bj:function(){return i.Bj},Bz:function(){return i.Bz},C3:function(){return i.C3},C_:function(){return i.C_},Cn:function(){return i.Cn},D2:function(){return kt},EB:function(){return i.EB},EM:function(){return i.EM},Eo:function(){return i.Eo},F4:function(){return i.F4},F8:function(){return It},FN:function(){return i.FN},Fl:function(){return i.Fl},G:function(){return i.G},G2:function(){return bt},Gn:function(){return i.Gn},HX:function(){return i.HX},HY:function(){return i.HY},Ho:function(){return i.Ho},IU:function(){return i.IU},JJ:function(){return i.JJ},Jd:function(){return i.Jd},KU:function(){return i.KU},Ko:function(){return i.Ko},LL:function(){return i.LL},MW:function(){return k},MX:function(){return i.MX},Mr:function(){return i.Mr},Nd:function(){return Yt},Nv:function(){return i.Nv},OT:function(){return i.OT},Ob:function(){return i.Ob},P$:function(){return i.P$},PG:function(){return i.PG},Q2:function(){return i.Q2},Q6:function(){return i.Q6},RC:function(){return i.RC},Rh:function(){return i.Rh},Rr:function(){return i.Rr},S3:function(){return i.S3},SK:function(){return i.Ah},SU:function(){return i.SU},Tn:function(){return i.Tn},U2:function(){return i.U2},Uc:function(){return i.Uc},Uk:function(){return i.Uk},Um:function(){return i.Um},Us:function(){return i.Us},Vf:function(){return i.Vf},Vh:function(){return i.Vh},W3:function(){return lt},WI:function(){return i.WI},WL:function(){return i.WL},WY:function(){return i.WY},Wl:function(){return i.Wl},Wm:function(){return i.Wm},Wu:function(){return i.Wu},X3:function(){return i.X3},XI:function(){return i.XI},Xl:function(){return i.Xl},Xn:function(){return i.Xn},Y1:function(){return i.Y1},Y3:function(){return i.Y3},Y8:function(){return i.Y8},YP:function(){return i.YP},YS:function(){return i.YS},YZ:function(){return Mt},Yq:function(){return i.Yq},Yu:function(){return i.Yu},ZB:function(){return Vt},ZK:function(){return i.ZK},ZM:function(){return i.ZM},Zq:function(){return i.Zq},_:function(){return i._},_A:function(){return i._A},a2:function(){return N},aZ:function(){return i.aZ},b9:function(){return i.b9},bM:function(){return wt},bT:function(){return i.bT},bv:function(){return i.bv},cE:function(){return i.cE},d1:function(){return i.d1},dD:function(){return i.dD},dG:function(){return i.dG},dl:function(){return i.dl},dq:function(){return i.dq},e8:function(){return _t},ec:function(){return i.ec},eq:function(){return i.eq},f3:function(){return i.f3},fb:function(){return U},h:function(){return i.h},hR:function(){return i.hR},i8:function(){return i.i8},iD:function(){return i.iD},iH:function(){return i.iH},iM:function(){return Ot},ic:function(){return i.ic},j4:function(){return i.j4},j5:function(){return i.j5},kC:function(){return i.kC},kq:function(){return i.kq},l1:function(){return i.l1},lA:function(){return i.lA},lR:function(){return i.lR},m0:function(){return i.m0},mW:function(){return i.mW},mv:function(){return i.mv},mx:function(){return i.mx},n4:function(){return i.n4},nJ:function(){return i.nJ},nK:function(){return i.nK},nQ:function(){return i.nQ},nZ:function(){return i.nZ},nr:function(){return vt},oR:function(){return i.oR},of:function(){return i.of},p1:function(){return i.p1},qG:function(){return i.qG},qZ:function(){return i.qZ},qb:function(){return i.qb},qj:function(){return i.qj},qq:function(){return i.qq},ri:function(){return Gt},ry:function(){return i.ry},sT:function(){return i.sT},sY:function(){return Ht},se:function(){return i.se},sj:function(){return F},sv:function(){return i.sv},tT:function(){return i.tT},uE:function(){return i.uE},uT:function(){return V},u_:function(){return i.u_},up:function(){return i.up},vl:function(){return i.vl},vr:function(){return Wt},vs:function(){return i.vs},w5:function(){return i.w5},wF:function(){return i.wF},wg:function(){return i.wg},wy:function(){return i.wy},xv:function(){return i.xv},yT:function(){return i.yT},yX:function(){return i.yX},yb:function(){return i.MW},zw:function(){return i.zw}});n(7658);var r=n(7139),i=n(3396),o=n(4870);const s="http://www.w3.org/2000/svg",a="undefined"!==typeof document?document:null,c=a&&a.createElement("template"),l={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e?a.createElementNS(s,t):a.createElement(t,n?{is:n}:void 0);return"select"===t&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:t=>a.createTextNode(t),createComment:t=>a.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>a.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,o){const s=n?n.previousSibling:e.lastChild;if(i&&(i===o||i.nextSibling)){while(1)if(e.insertBefore(i.cloneNode(!0),n),i===o||!(i=i.nextSibling))break}else{c.innerHTML=r?`<svg>${t}</svg>`:t;const i=c.content;if(r){const t=i.firstChild;while(t.firstChild)i.appendChild(t.firstChild);i.removeChild(t)}e.insertBefore(i,n)}return[s?s.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function u(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),null==e?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function h(t,e,n){const i=t.style,o=(0,r.HD)(n);if(n&&!o){if(e&&!(0,r.HD)(e))for(const t in e)null==n[t]&&f(i,t,"");for(const t in n)f(i,t,n[t])}else{const r=i.display;o?e!==n&&(i.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(i.display=r)}}const d=/\s*!important$/;function f(t,e,n){if((0,r.kJ)(n))n.forEach((n=>f(t,e,n)));else if(null==n&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const i=g(t,e);d.test(n)?t.setProperty((0,r.rs)(i),n.replace(d,""),"important"):t[i]=n}}const p=["Webkit","Moz","ms"],m={};function g(t,e){const n=m[e];if(n)return n;let i=(0,r._A)(e);if("filter"!==i&&i in t)return m[e]=i;i=(0,r.kC)(i);for(let r=0;r<p.length;r++){const n=p[r]+i;if(n in t)return m[e]=n}return e}const v="http://www.w3.org/1999/xlink";function _(t,e,n,i,o){if(i&&e.startsWith("xlink:"))null==n?t.removeAttributeNS(v,e.slice(6,e.length)):t.setAttributeNS(v,e,n);else{const i=(0,r.Pq)(e);null==n||i&&!(0,r.yA)(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function y(t,e,n,i,o,s,a){if("innerHTML"===e||"textContent"===e)return i&&a(i,o,s),void(t[e]=null==n?"":n);const c=t.tagName;if("value"===e&&"PROGRESS"!==c&&!c.includes("-")){t._value=n;const r="OPTION"===c?t.getAttribute("value"):t.value,i=null==n?"":n;return r!==i&&(t.value=i),void(null==n&&t.removeAttribute(e))}let l=!1;if(""===n||null==n){const i=typeof t[e];"boolean"===i?n=(0,r.yA)(n):null==n&&"string"===i?(n="",l=!0):"number"===i&&(n=0,l=!0)}try{t[e]=n}catch(u){0}l&&t.removeAttribute(e)}function b(t,e,n,r){t.addEventListener(e,n,r)}function w(t,e,n,r){t.removeEventListener(e,n,r)}function x(t,e,n,r,i=null){const o=t._vei||(t._vei={}),s=o[e];if(r&&s)s.value=r;else{const[n,a]=S(e);if(r){const s=o[e]=C(r,i);b(t,n,s,a)}else s&&(w(t,n,s,a),o[e]=void 0)}}const E=/(?:Once|Passive|Capture)$/;function S(t){let e;if(E.test(t)){let n;e={};while(n=t.match(E))t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}const n=":"===t[2]?t.slice(3):(0,r.rs)(t.slice(2));return[n,e]}let M=0;const T=Promise.resolve(),A=()=>M||(T.then((()=>M=0)),M=Date.now());function C(t,e){const n=t=>{if(t._vts){if(t._vts<=n.attached)return}else t._vts=Date.now();(0,i.$d)(R(t,n.value),e,5,[t])};return n.value=t,n.attached=A(),n}function R(t,e){if((0,r.kJ)(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t&&t(e)))}return e}const P=/^on[a-z]/,O=(t,e,n,i,o=!1,s,a,c,l)=>{"class"===e?u(t,i,o):"style"===e?h(t,n,i):(0,r.F7)(e)?(0,r.tR)(e)||x(t,e,n,i,a):("."===e[0]?(e=e.slice(1),1):"^"===e[0]?(e=e.slice(1),0):L(t,e,i,o))?y(t,e,i,s,a,c,l):("true-value"===e?t._trueValue=i:"false-value"===e&&(t._falseValue=i),_(t,e,i,o))};function L(t,e,n,i){return i?"innerHTML"===e||"textContent"===e||!!(e in t&&P.test(e)&&(0,r.mf)(n)):"spellcheck"!==e&&"draggable"!==e&&"translate"!==e&&("form"!==e&&(("list"!==e||"INPUT"!==t.tagName)&&(("type"!==e||"TEXTAREA"!==t.tagName)&&((!P.test(e)||!(0,r.HD)(n))&&e in t))))}function k(t,e){const n=(0,i.aZ)(t);class r extends N{constructor(t){super(n,t,e)}}return r.def=n,r}const I=t=>k(t,Vt),D="undefined"!==typeof HTMLElement?HTMLElement:class{};class N extends D{constructor(t,e={},n){super(),this._def=t,this._props=e,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&n?n(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,(0,i.Y3)((()=>{this._connected||(Ht(null,this.shadowRoot),this._instance=null)}))}_resolveDef(){this._resolved=!0;for(let n=0;n<this.attributes.length;n++)this._setAttr(this.attributes[n].name);new MutationObserver((t=>{for(const e of t)this._setAttr(e.attributeName)})).observe(this,{attributes:!0});const t=(t,e=!1)=>{const{props:n,styles:i}=t;let o;if(n&&!(0,r.kJ)(n))for(const s in n){const t=n[s];(t===Number||t&&t.type===Number)&&(s in this._props&&(this._props[s]=(0,r.He)(this._props[s])),(o||(o=Object.create(null)))[(0,r._A)(s)]=!0)}this._numberProps=o,e&&this._resolveProps(t),this._applyStyles(i),this._update()},e=this._def.__asyncLoader;e?e().then((e=>t(e,!0))):t(this._def)}_resolveProps(t){const{props:e}=t,n=(0,r.kJ)(e)?e:Object.keys(e||{});for(const r of Object.keys(this))"_"!==r[0]&&n.includes(r)&&this._setProp(r,this[r],!0,!1);for(const i of n.map(r._A))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(t){this._setProp(i,t)}})}_setAttr(t){let e=this.getAttribute(t);const n=(0,r._A)(t);this._numberProps&&this._numberProps[n]&&(e=(0,r.He)(e)),this._setProp(n,e,!1)}_getProp(t){return this._props[t]}_setProp(t,e,n=!0,i=!0){e!==this._props[t]&&(this._props[t]=e,i&&this._instance&&this._update(),n&&(!0===e?this.setAttribute((0,r.rs)(t),""):"string"===typeof e||"number"===typeof e?this.setAttribute((0,r.rs)(t),e+""):e||this.removeAttribute((0,r.rs)(t))))}_update(){Ht(this._createVNode(),this.shadowRoot)}_createVNode(){const t=(0,i.Wm)(this._def,(0,r.l7)({},this._props));return this._instance||(t.ce=t=>{this._instance=t,t.isCE=!0;const e=(t,e)=>{this.dispatchEvent(new CustomEvent(t,{detail:e}))};t.emit=(t,...n)=>{e(t,n),(0,r.rs)(t)!==t&&e((0,r.rs)(t),n)};let n=this;while(n=n&&(n.parentNode||n.host))if(n instanceof N){t.parent=n._instance,t.provides=n._instance.provides;break}}),t}_applyStyles(t){t&&t.forEach((t=>{const e=document.createElement("style");e.textContent=t,this.shadowRoot.appendChild(e)}))}}function U(t="$style"){{const e=(0,i.FN)();if(!e)return r.kT;const n=e.type.__cssModules;if(!n)return r.kT;const o=n[t];return o||r.kT}}function F(t){const e=(0,i.FN)();if(!e)return;const n=e.ut=(n=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach((t=>z(t,n)))},r=()=>{const r=t(e.proxy);B(e.subTree,r),n(r)};(0,i.Rh)(r),(0,i.bv)((()=>{const t=new MutationObserver(r);t.observe(e.subTree.el.parentNode,{childList:!0}),(0,i.Ah)((()=>t.disconnect()))}))}function B(t,e){if(128&t.shapeFlag){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push((()=>{B(n.activeBranch,e)}))}while(t.component)t=t.component.subTree;if(1&t.shapeFlag&&t.el)z(t.el,e);else if(t.type===i.HY)t.children.forEach((t=>B(t,e)));else if(t.type===i.qG){let{el:n,anchor:r}=t;while(n){if(z(n,e),n===r)break;n=n.nextSibling}}}function z(t,e){if(1===t.nodeType){const n=t.style;for(const t in e)n.setProperty(`--${t}`,e[t])}}const j="transition",H="animation",V=(t,{slots:e})=>(0,i.h)(i.P$,Y(t),e);V.displayName="Transition";const G={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},W=V.props=(0,r.l7)({},i.nJ,G),q=(t,e=[])=>{(0,r.kJ)(t)?t.forEach((t=>t(...e))):t&&t(...e)},X=t=>!!t&&((0,r.kJ)(t)?t.some((t=>t.length>1)):t.length>1);function Y(t){const e={};for(const r in t)r in G||(e[r]=t[r]);if(!1===t.css)return e;const{name:n="v",type:i,duration:o,enterFromClass:s=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:c=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:u=a,appearToClass:h=c,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=t,m=$(o),g=m&&m[0],v=m&&m[1],{onBeforeEnter:_,onEnter:y,onEnterCancelled:b,onLeave:w,onLeaveCancelled:x,onBeforeAppear:E=_,onAppear:S=y,onAppearCancelled:M=b}=e,T=(t,e,n)=>{Z(t,e?h:c),Z(t,e?u:a),n&&n()},A=(t,e)=>{t._isLeaving=!1,Z(t,d),Z(t,p),Z(t,f),e&&e()},C=t=>(e,n)=>{const r=t?S:y,o=()=>T(e,t,n);q(r,[e,o]),Q((()=>{Z(e,t?l:s),J(e,t?h:c),X(r)||et(e,i,g,o)}))};return(0,r.l7)(e,{onBeforeEnter(t){q(_,[t]),J(t,s),J(t,a)},onBeforeAppear(t){q(E,[t]),J(t,l),J(t,u)},onEnter:C(!1),onAppear:C(!0),onLeave(t,e){t._isLeaving=!0;const n=()=>A(t,e);J(t,d),ot(),J(t,f),Q((()=>{t._isLeaving&&(Z(t,d),J(t,p),X(w)||et(t,i,v,n))})),q(w,[t,n])},onEnterCancelled(t){T(t,!1),q(b,[t])},onAppearCancelled(t){T(t,!0),q(M,[t])},onLeaveCancelled(t){A(t),q(x,[t])}})}function $(t){if(null==t)return null;if((0,r.Kn)(t))return[K(t.enter),K(t.leave)];{const e=K(t);return[e,e]}}function K(t){const e=(0,r.He)(t);return e}function J(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.add(e))),(t._vtc||(t._vtc=new Set)).add(e)}function Z(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.remove(e)));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function Q(t){requestAnimationFrame((()=>{requestAnimationFrame(t)}))}let tt=0;function et(t,e,n,r){const i=t._endId=++tt,o=()=>{i===t._endId&&r()};if(n)return setTimeout(o,n);const{type:s,timeout:a,propCount:c}=nt(t,e);if(!s)return r();const l=s+"end";let u=0;const h=()=>{t.removeEventListener(l,d),o()},d=e=>{e.target===t&&++u>=c&&h()};setTimeout((()=>{u<c&&h()}),a+1),t.addEventListener(l,d)}function nt(t,e){const n=window.getComputedStyle(t),r=t=>(n[t]||"").split(", "),i=r(`${j}Delay`),o=r(`${j}Duration`),s=rt(i,o),a=r(`${H}Delay`),c=r(`${H}Duration`),l=rt(a,c);let u=null,h=0,d=0;e===j?s>0&&(u=j,h=s,d=o.length):e===H?l>0&&(u=H,h=l,d=c.length):(h=Math.max(s,l),u=h>0?s>l?j:H:null,d=u?u===j?o.length:c.length:0);const f=u===j&&/\b(transform|all)(,|$)/.test(r(`${j}Property`).toString());return{type:u,timeout:h,propCount:d,hasTransform:f}}function rt(t,e){while(t.length<e.length)t=t.concat(t);return Math.max(...e.map(((e,n)=>it(e)+it(t[n]))))}function it(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function ot(){return document.body.offsetHeight}const st=new WeakMap,at=new WeakMap,ct={name:"TransitionGroup",props:(0,r.l7)({},W,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=(0,i.FN)(),r=(0,i.Y8)();let s,a;return(0,i.ic)((()=>{if(!s.length)return;const e=t.moveClass||`${t.name||"v"}-move`;if(!ft(s[0].el,n.vnode.el,e))return;s.forEach(ut),s.forEach(ht);const r=s.filter(dt);ot(),r.forEach((t=>{const n=t.el,r=n.style;J(n,e),r.transform=r.webkitTransform=r.transitionDuration="";const i=n._moveCb=t=>{t&&t.target!==n||t&&!/transform$/.test(t.propertyName)||(n.removeEventListener("transitionend",i),n._moveCb=null,Z(n,e))};n.addEventListener("transitionend",i)}))})),()=>{const c=(0,o.IU)(t),l=Y(c);let u=c.tag||i.HY;s=a,a=e.default?(0,i.Q6)(e.default()):[];for(let t=0;t<a.length;t++){const e=a[t];null!=e.key&&(0,i.nK)(e,(0,i.U2)(e,l,r,n))}if(s)for(let t=0;t<s.length;t++){const e=s[t];(0,i.nK)(e,(0,i.U2)(e,l,r,n)),st.set(e,e.el.getBoundingClientRect())}return(0,i.Wm)(u,null,a)}}};ct.props;const lt=ct;function ut(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function ht(t){at.set(t,t.el.getBoundingClientRect())}function dt(t){const e=st.get(t),n=at.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const e=t.el.style;return e.transform=e.webkitTransform=`translate(${r}px,${i}px)`,e.transitionDuration="0s",t}}function ft(t,e,n){const r=t.cloneNode();t._vtc&&t._vtc.forEach((t=>{t.split(/\s+/).forEach((t=>t&&r.classList.remove(t)))})),n.split(/\s+/).forEach((t=>t&&r.classList.add(t))),r.style.display="none";const i=1===e.nodeType?e:e.parentNode;i.appendChild(r);const{hasTransform:o}=nt(r);return i.removeChild(r),o}const pt=t=>{const e=t.props["onUpdate:modelValue"]||!1;return(0,r.kJ)(e)?t=>(0,r.ir)(e,t):e};function mt(t){t.target.composing=!0}function gt(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const vt={created(t,{modifiers:{lazy:e,trim:n,number:i}},o){t._assign=pt(o);const s=i||o.props&&"number"===o.props.type;b(t,e?"change":"input",(e=>{if(e.target.composing)return;let i=t.value;n&&(i=i.trim()),s&&(i=(0,r.h5)(i)),t._assign(i)})),n&&b(t,"change",(()=>{t.value=t.value.trim()})),e||(b(t,"compositionstart",mt),b(t,"compositionend",gt),b(t,"change",gt))},mounted(t,{value:e}){t.value=null==e?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:i,number:o}},s){if(t._assign=pt(s),t.composing)return;if(document.activeElement===t&&"range"!==t.type){if(n)return;if(i&&t.value.trim()===e)return;if((o||"number"===t.type)&&(0,r.h5)(t.value)===e)return}const a=null==e?"":e;t.value!==a&&(t.value=a)}},_t={deep:!0,created(t,e,n){t._assign=pt(n),b(t,"change",(()=>{const e=t._modelValue,n=Et(t),i=t.checked,o=t._assign;if((0,r.kJ)(e)){const t=(0,r.hq)(e,n),s=-1!==t;if(i&&!s)o(e.concat(n));else if(!i&&s){const n=[...e];n.splice(t,1),o(n)}}else if((0,r.DM)(e)){const t=new Set(e);i?t.add(n):t.delete(n),o(t)}else o(St(t,i))}))},mounted:yt,beforeUpdate(t,e,n){t._assign=pt(n),yt(t,e,n)}};function yt(t,{value:e,oldValue:n},i){t._modelValue=e,(0,r.kJ)(e)?t.checked=(0,r.hq)(e,i.props.value)>-1:(0,r.DM)(e)?t.checked=e.has(i.props.value):e!==n&&(t.checked=(0,r.WV)(e,St(t,!0)))}const bt={created(t,{value:e},n){t.checked=(0,r.WV)(e,n.props.value),t._assign=pt(n),b(t,"change",(()=>{t._assign(Et(t))}))},beforeUpdate(t,{value:e,oldValue:n},i){t._assign=pt(i),e!==n&&(t.checked=(0,r.WV)(e,i.props.value))}},wt={deep:!0,created(t,{value:e,modifiers:{number:n}},i){const o=(0,r.DM)(e);b(t,"change",(()=>{const e=Array.prototype.filter.call(t.options,(t=>t.selected)).map((t=>n?(0,r.h5)(Et(t)):Et(t)));t._assign(t.multiple?o?new Set(e):e:e[0])})),t._assign=pt(i)},mounted(t,{value:e}){xt(t,e)},beforeUpdate(t,e,n){t._assign=pt(n)},updated(t,{value:e}){xt(t,e)}};function xt(t,e){const n=t.multiple;if(!n||(0,r.kJ)(e)||(0,r.DM)(e)){for(let i=0,o=t.options.length;i<o;i++){const o=t.options[i],s=Et(o);if(n)(0,r.kJ)(e)?o.selected=(0,r.hq)(e,s)>-1:o.selected=e.has(s);else if((0,r.WV)(Et(o),e))return void(t.selectedIndex!==i&&(t.selectedIndex=i))}n||-1===t.selectedIndex||(t.selectedIndex=-1)}}function Et(t){return"_value"in t?t._value:t.value}function St(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const Mt={created(t,e,n){At(t,e,n,null,"created")},mounted(t,e,n){At(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){At(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){At(t,e,n,r,"updated")}};function Tt(t,e){switch(t){case"SELECT":return wt;case"TEXTAREA":return vt;default:switch(e){case"checkbox":return _t;case"radio":return bt;default:return vt}}}function At(t,e,n,r,i){const o=Tt(t.tagName,n.props&&n.props.type),s=o[i];s&&s(t,e,n,r)}function Ct(){vt.getSSRProps=({value:t})=>({value:t}),bt.getSSRProps=({value:t},e)=>{if(e.props&&(0,r.WV)(e.props.value,t))return{checked:!0}},_t.getSSRProps=({value:t},e)=>{if((0,r.kJ)(t)){if(e.props&&(0,r.hq)(t,e.props.value)>-1)return{checked:!0}}else if((0,r.DM)(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},Mt.getSSRProps=(t,e)=>{if("string"!==typeof e.type)return;const n=Tt(e.type.toUpperCase(),e.props&&e.props.type);return n.getSSRProps?n.getSSRProps(t,e):void 0}}const Rt=["ctrl","shift","alt","meta"],Pt={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&0!==t.button,middle:t=>"button"in t&&1!==t.button,right:t=>"button"in t&&2!==t.button,exact:(t,e)=>Rt.some((n=>t[`${n}Key`]&&!e.includes(n)))},Ot=(t,e)=>(n,...r)=>{for(let t=0;t<e.length;t++){const r=Pt[e[t]];if(r&&r(n,e))return}return t(n,...r)},Lt={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},kt=(t,e)=>n=>{if(!("key"in n))return;const i=(0,r.rs)(n.key);return e.some((t=>t===i||Lt[t]===i))?t(n):void 0},It={beforeMount(t,{value:e},{transition:n}){t._vod="none"===t.style.display?"":t.style.display,n&&e?n.beforeEnter(t):Dt(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!==!n&&(r?e?(r.beforeEnter(t),Dt(t,!0),r.enter(t)):r.leave(t,(()=>{Dt(t,!1)})):Dt(t,e))},beforeUnmount(t,{value:e}){Dt(t,e)}};function Dt(t,e){t.style.display=e?t._vod:"none"}function Nt(){It.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const Ut=(0,r.l7)({patchProp:O},l);let Ft,Bt=!1;function zt(){return Ft||(Ft=(0,i.Us)(Ut))}function jt(){return Ft=Bt?Ft:(0,i.Eo)(Ut),Bt=!0,Ft}const Ht=(...t)=>{zt().render(...t)},Vt=(...t)=>{jt().hydrate(...t)},Gt=(...t)=>{const e=zt().createApp(...t);const{mount:n}=e;return e.mount=t=>{const i=qt(t);if(!i)return;const o=e._component;(0,r.mf)(o)||o.render||o.template||(o.template=i.innerHTML),i.innerHTML="";const s=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},e},Wt=(...t)=>{const e=jt().createApp(...t);const{mount:n}=e;return e.mount=t=>{const e=qt(t);if(e)return n(e,!0,e instanceof SVGElement)},e};function qt(t){if((0,r.HD)(t)){const e=document.querySelector(t);return e}return t}let Xt=!1;const Yt=()=>{Xt||(Xt=!0,Ct(),Nt())}},7139:function(t,e,n){"use strict";n.d(e,{C_:function(){return Z},DM:function(){return v},E9:function(){return G},F7:function(){return l},Gg:function(){return P},HD:function(){return w},He:function(){return H},Kj:function(){return y},Kn:function(){return E},NO:function(){return a},Nj:function(){return z},Od:function(){return d},PO:function(){return C},Pq:function(){return et},RI:function(){return p},S0:function(){return R},W7:function(){return A},WV:function(){return it},Z6:function(){return o},_A:function(){return k},_N:function(){return g},aU:function(){return F},dG:function(){return s},e1:function(){return q},fY:function(){return r},h5:function(){return j},hR:function(){return U},hq:function(){return ot},ir:function(){return B},j5:function(){return X},kC:function(){return N},kJ:function(){return m},kT:function(){return i},l7:function(){return h},mf:function(){return b},rs:function(){return D},tI:function(){return S},tR:function(){return u},vs:function(){return Q},yA:function(){return nt},yk:function(){return x},zw:function(){return st}});n(7658);function r(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}const i={},o=[],s=()=>{},a=()=>!1,c=/^on[^a-z]/,l=t=>c.test(t),u=t=>t.startsWith("onUpdate:"),h=Object.assign,d=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},f=Object.prototype.hasOwnProperty,p=(t,e)=>f.call(t,e),m=Array.isArray,g=t=>"[object Map]"===T(t),v=t=>"[object Set]"===T(t),_=t=>"[object Date]"===T(t),y=t=>"[object RegExp]"===T(t),b=t=>"function"===typeof t,w=t=>"string"===typeof t,x=t=>"symbol"===typeof t,E=t=>null!==t&&"object"===typeof t,S=t=>E(t)&&b(t.then)&&b(t.catch),M=Object.prototype.toString,T=t=>M.call(t),A=t=>T(t).slice(8,-1),C=t=>"[object Object]"===T(t),R=t=>w(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,P=r(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),O=t=>{const e=Object.create(null);return n=>{const r=e[n];return r||(e[n]=t(n))}},L=/-(\w)/g,k=O((t=>t.replace(L,((t,e)=>e?e.toUpperCase():"")))),I=/\B([A-Z])/g,D=O((t=>t.replace(I,"-$1").toLowerCase())),N=O((t=>t.charAt(0).toUpperCase()+t.slice(1))),U=O((t=>t?`on${N(t)}`:"")),F=(t,e)=>!Object.is(t,e),B=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},z=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},j=t=>{const e=parseFloat(t);return isNaN(e)?t:e},H=t=>{const e=w(t)?Number(t):NaN;return isNaN(e)?t:e};let V;const G=()=>V||(V="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{});const W="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console",q=r(W);function X(t){if(m(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=w(r)?J(r):X(r);if(i)for(const t in i)e[t]=i[t]}return e}return w(t)||E(t)?t:void 0}const Y=/;(?![^(]*\))/g,$=/:([^]+)/,K=/\/\*[^]*?\*\//g;function J(t){const e={};return t.replace(K,"").split(Y).forEach((t=>{if(t){const n=t.split($);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function Z(t){let e="";if(w(t))e=t;else if(m(t))for(let n=0;n<t.length;n++){const r=Z(t[n]);r&&(e+=r+" ")}else if(E(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Q(t){if(!t)return null;let{class:e,style:n}=t;return e&&!w(e)&&(t.class=Z(e)),n&&(t.style=X(n)),t}const tt="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",et=r(tt);function nt(t){return!!t||""===t}function rt(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=it(t[r],e[r]);return n}function it(t,e){if(t===e)return!0;let n=_(t),r=_(e);if(n||r)return!(!n||!r)&&t.getTime()===e.getTime();if(n=x(t),r=x(e),n||r)return t===e;if(n=m(t),r=m(e),n||r)return!(!n||!r)&&rt(t,e);if(n=E(t),r=E(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,o=Object.keys(e).length;if(i!==o)return!1;for(const n in t){const r=t.hasOwnProperty(n),i=e.hasOwnProperty(n);if(r&&!i||!r&&i||!it(t[n],e[n]))return!1}}return String(t)===String(e)}function ot(t,e){return t.findIndex((t=>it(t,e)))}const st=t=>w(t)?t:null==t?"":m(t)||E(t)&&(t.toString===M||!b(t.toString))?JSON.stringify(t,at,2):String(t),at=(t,e)=>e&&e.__v_isRef?at(t,e.value):g(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,n])=>(t[`${e} =>`]=n,t)),{})}:v(e)?{[`Set(${e.size})`]:[...e.values()]}:!E(e)||m(e)||C(e)?e:String(e)},1610:function(t,e,n){function r(t){var e=Object.create(null);return{on:function(n,r,i){if("function"!==typeof r)throw new Error("callback is expected to be a function");var o=e[n];return o||(o=e[n]=[]),o.push({callback:r,ctx:i}),t},off:function(n,r){var i="undefined"===typeof n;if(i)return e=Object.create(null),t;if(e[n]){var o="function"!==typeof r;if(o)delete e[n];else for(var s=e[n],a=0;a<s.length;++a)s[a].callback===r&&s.splice(a,1)}return t},fire:function(n){var r,i=e[n];if(!i)return t;arguments.length>1&&(r=Array.prototype.splice.call(arguments,1));for(var o=0;o<i.length;++o){var s=i[o];s.callback.apply(s.ctx,r)}return t}}}function i(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],n=0;n<e.length;++n)if(t.hasOwnProperty(e[n]))throw new Error("Subject cannot be eventified, since it already has property '"+e[n]+"'")}n(1703),n(7658),t.exports=function(t){i(t);var e=r(t);return t.on=e.on,t.off=e.off,t.fire=e.fire,t}},4854:function(t,e,n){n(1703),n(7658),t.exports=i,t.exports.simulator=n(6599);var r=n(1610);function i(t,e){if(!t)throw new Error("Graph structure cannot be undefined");var i=e&&e.createSimulator||n(6599),s=i(e);if(Array.isArray(e))throw new Error("Physics settings is expected to be an object");var a=t.version>19?L:O;e&&"function"===typeof e.nodeMass&&(a=e.nodeMass);var c=new Map,l={},u=0,h=s.settings.springTransform||o;x(),y();var d=!1,f={step:function(){if(0===u)return p(!0),!0;var t=s.step();f.lastMove=t,f.fire("step");var e=t/u,n=e<=.01;return p(n),n},getNodePosition:function(t){return P(t).pos},setNodePosition:function(t){var e=P(t);e.setPosition.apply(e,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(t){var e=l[t];if(e)return{from:e.from.pos,to:e.to.pos}},getGraphRect:function(){return s.getBBox()},forEachBody:m,pinNode:function(t,e){var n=P(t.id);n.isPinned=!!e},isNodePinned:function(t){return P(t.id).isPinned},dispose:function(){t.off("changed",w),f.fire("disposed")},getBody:_,getSpring:v,getForceVectorLength:g,simulator:s,graph:t,lastMove:0};return r(f),f;function p(t){d!==t&&(d=t,b(t))}function m(t){c.forEach(t)}function g(){var t=0,e=0;return m((function(n){t+=Math.abs(n.force.x),e+=Math.abs(n.force.y)})),Math.sqrt(t*t+e*e)}function v(e,n){var r;if(void 0===n)r="object"!==typeof e?e:e.id;else{var i=t.hasLink(e,n);if(!i)return;r=i.id}return l[r]}function _(t){return c.get(t)}function y(){t.on("changed",w)}function b(t){f.fire("stable",t)}function w(e){for(var n=0;n<e.length;++n){var r=e[n];"add"===r.changeType?(r.node&&E(r.node.id),r.link&&M(r.link)):"remove"===r.changeType&&(r.node&&S(r.node),r.link&&T(r.link))}u=t.getNodesCount()}function x(){u=0,t.forEachNode((function(t){E(t.id),u+=1})),t.forEachLink(M)}function E(e){var n=c.get(e);if(!n){var r=t.getNode(e);if(!r)throw new Error("initBody() was called with unknown node id");var i=r.position;if(!i){var o=A(r);i=s.getBestNewBodyPosition(o)}n=s.addBodyAt(i),n.id=e,c.set(e,n),C(e),R(r)&&(n.isPinned=!0)}}function S(t){var e=t.id,n=c.get(e);n&&(c.delete(e),s.removeBody(n))}function M(t){C(t.fromId),C(t.toId);var e=c.get(t.fromId),n=c.get(t.toId),r=s.addSpring(e,n,t.length);h(t,r),l[t.id]=r}function T(e){var n=l[e.id];if(n){var r=t.getNode(e.fromId),i=t.getNode(e.toId);r&&C(r.id),i&&C(i.id),delete l[e.id],s.removeSpring(n)}}function A(t){var e=[];if(!t.links)return e;for(var n=Math.min(t.links.length,2),r=0;r<n;++r){var i=t.links[r],o=i.fromId!==t.id?c.get(i.fromId):c.get(i.toId);o&&o.pos&&e.push(o)}return e}function C(t){var e=c.get(t);if(e.mass=a(t),Number.isNaN(e.mass))throw new Error("Node mass should be a number")}function R(t){return t&&(t.isPinned||t.data&&t.data.isPinned)}function P(t){var e=c.get(t);return e||(E(t),e=c.get(t)),e}function O(e){var n=t.getLinks(e);return n?1+n.length/3:1}function L(e){var n=t.getLinks(e);return n?1+n.size/3:1}}function o(){}},4760:function(t,e,n){n(7658);const r=n(5155);t.exports=function(t){return e;function e(e,n){let i=n&&n.indent||0,o=n&&void 0!==n.join?n.join:"\n",s=Array(i+1).join(" "),a=[];for(let c=0;c<t;++c){let t=r(c),n=0===c?"":s;a.push(n+e.replace(/{var}/g,t))}return a.join(o)}}},2354:function(t,e,n){t.exports=i,t.exports.generateFunctionBody=o;const r=n(4760);function i(t){let e=o(t);return new Function("bodies","settings","random",e)}function o(t){let e=r(t),n=`\n  var boundingBox = {\n    ${e("min_{var}: 0, max_{var}: 0,",{indent:4})}\n  };\n\n  return {\n    box: boundingBox,\n\n    update: updateBoundingBox,\n\n    reset: resetBoundingBox,\n\n    getBestNewPosition: function (neighbors) {\n      var ${e("base_{var} = 0",{join:", "})};\n\n      if (neighbors.length) {\n        for (var i = 0; i < neighbors.length; ++i) {\n          let neighborPos = neighbors[i].pos;\n          ${e("base_{var} += neighborPos.{var};",{indent:10})}\n        }\n\n        ${e("base_{var} /= neighbors.length;",{indent:8})}\n      } else {\n        ${e("base_{var} = (boundingBox.min_{var} + boundingBox.max_{var}) / 2;",{indent:8})}\n      }\n\n      var springLength = settings.springLength;\n      return {\n        ${e("{var}: base_{var} + (random.nextDouble() - 0.5) * springLength,",{indent:8})}\n      };\n    }\n  };\n\n  function updateBoundingBox() {\n    var i = bodies.length;\n    if (i === 0) return; // No bodies - no borders.\n\n    ${e("var max_{var} = -Infinity;",{indent:4})}\n    ${e("var min_{var} = Infinity;",{indent:4})}\n\n    while(i--) {\n      // this is O(n), it could be done faster with quadtree, if we check the root node bounds\n      var bodyPos = bodies[i].pos;\n      ${e("if (bodyPos.{var} < min_{var}) min_{var} = bodyPos.{var};",{indent:6})}\n      ${e("if (bodyPos.{var} > max_{var}) max_{var} = bodyPos.{var};",{indent:6})}\n    }\n\n    ${e("boundingBox.min_{var} = min_{var};",{indent:4})}\n    ${e("boundingBox.max_{var} = max_{var};",{indent:4})}\n  }\n\n  function resetBoundingBox() {\n    ${e("boundingBox.min_{var} = boundingBox.max_{var} = 0;",{indent:4})}\n  }\n`;return n}},3791:function(t,e,n){const r=n(4760);function i(t,e){let n=o(t,e),{Body:r}=new Function(n)();return r}function o(t,e){let n=`\n${a(t,e)}\n${s(t,e)}\nreturn {Body: Body, Vector: Vector};\n`;return n}function s(t){let e=r(t),n=e("{var}",{join:", "});return`\nfunction Body(${n}) {\n  this.isPinned = false;\n  this.pos = new Vector(${n});\n  this.force = new Vector();\n  this.velocity = new Vector();\n  this.mass = 1;\n\n  this.springCount = 0;\n  this.springLength = 0;\n}\n\nBody.prototype.reset = function() {\n  this.force.reset();\n  this.springCount = 0;\n  this.springLength = 0;\n}\n\nBody.prototype.setPosition = function (${n}) {\n  ${e("this.pos.{var} = {var} || 0;",{indent:2})}\n};`}function a(t,e){let n=r(t),i="";e&&(i=`${n("\n   var v{var};\nObject.defineProperty(this, '{var}', {\n  set: function(v) { \n    if (!Number.isFinite(v)) throw new Error('Cannot set non-numbers to {var}');\n    v{var} = v; \n  },\n  get: function() { return v{var}; }\n});")}`);let o=n("{var}",{join:", "});return`function Vector(${o}) {\n  ${i}\n    if (typeof arguments[0] === 'object') {\n      // could be another vector\n      let v = arguments[0];\n      ${n('if (!Number.isFinite(v.{var})) throw new Error("Expected value is not a finite number at Vector constructor ({var})");',{indent:4})}\n      ${n("this.{var} = v.{var};",{indent:4})}\n    } else {\n      ${n('this.{var} = typeof {var} === "number" ? {var} : 0;',{indent:4})}\n    }\n  }\n  \n  Vector.prototype.reset = function () {\n    ${n("this.{var} = ",{join:""})}0;\n  };`}t.exports=i,t.exports.generateCreateBodyFunctionBody=o,t.exports.getVectorCode=a,t.exports.getBodyCode=s},905:function(t,e,n){const r=n(4760);function i(t){let e=o(t);return new Function("options",e)}function o(t){let e=r(t),n=`\n  if (!Number.isFinite(options.dragCoefficient)) throw new Error('dragCoefficient is not a finite number');\n\n  return {\n    update: function(body) {\n      ${e("body.force.{var} -= options.dragCoefficient * body.velocity.{var};",{indent:6})}\n    }\n  };\n`;return n}t.exports=i,t.exports.generateCreateDragForceFunctionBody=o},1709:function(t,e,n){const r=n(4760);function i(t){let e=o(t);return new Function("options","random",e)}function o(t){let e=r(t),n=`\n  if (!Number.isFinite(options.springCoefficient)) throw new Error('Spring coefficient is not a number');\n  if (!Number.isFinite(options.springLength)) throw new Error('Spring length is not a number');\n\n  return {\n    /**\n     * Updates forces acting on a spring\n     */\n    update: function (spring) {\n      var body1 = spring.from;\n      var body2 = spring.to;\n      var length = spring.length < 0 ? options.springLength : spring.length;\n      ${e("var d{var} = body2.pos.{var} - body1.pos.{var};",{indent:6})}\n      var r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});\n\n      if (r === 0) {\n        ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:8})}\n        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});\n      }\n\n      var d = r - length;\n      var coefficient = ((spring.coefficient > 0) ? spring.coefficient : options.springCoefficient) * d / r;\n\n      ${e("body1.force.{var} += coefficient * d{var}",{indent:6})};\n      body1.springCount += 1;\n      body1.springLength += r;\n\n      ${e("body2.force.{var} -= coefficient * d{var}",{indent:6})};\n      body2.springCount += 1;\n      body2.springLength += r;\n    }\n  };\n`;return n}t.exports=i,t.exports.generateCreateSpringForceFunctionBody=o},5670:function(t,e,n){const r=n(4760);function i(t){let e=o(t);return new Function("bodies","timeStep","adaptiveTimeStepWeight",e)}function o(t){let e=r(t),n=`\n  var length = bodies.length;\n  if (length === 0) return 0;\n\n  ${e("var d{var} = 0, t{var} = 0;",{indent:2})}\n\n  for (var i = 0; i < length; ++i) {\n    var body = bodies[i];\n    if (body.isPinned) continue;\n\n    if (adaptiveTimeStepWeight && body.springCount) {\n      timeStep = (adaptiveTimeStepWeight * body.springLength/body.springCount);\n    }\n\n    var coeff = timeStep / body.mass;\n\n    ${e("body.velocity.{var} += coeff * body.force.{var};",{indent:4})}\n    ${e("var v{var} = body.velocity.{var};",{indent:4})}\n    var v = Math.sqrt(${e("v{var} * v{var}",{join:" + "})});\n\n    if (v > 1) {\n      // We normalize it so that we move within timeStep range. \n      // for the case when v <= 1 - we let velocity to fade out.\n      ${e("body.velocity.{var} = v{var} / v;",{indent:6})}\n    }\n\n    ${e("d{var} = timeStep * body.velocity.{var};",{indent:4})}\n\n    ${e("body.pos.{var} += d{var};",{indent:4})}\n\n    ${e("t{var} += Math.abs(d{var});",{indent:4})}\n  }\n\n  return (${e("t{var} * t{var}",{join:" + "})})/length;\n`;return n}t.exports=i,t.exports.generateIntegratorFunctionBody=o},7099:function(t,e,n){n(7658);const r=n(4760),i=n(5155);function o(t){let e=s(t);return new Function(e)()}function s(t){let e=r(t),n=Math.pow(2,t),o=`\n${h()}\n${u(t)}\n${a(t)}\n${l(t)}\n${c(t)}\n\nfunction createQuadTree(options, random) {\n  options = options || {};\n  options.gravity = typeof options.gravity === 'number' ? options.gravity : -1;\n  options.theta = typeof options.theta === 'number' ? options.theta : 0.8;\n\n  var gravity = options.gravity;\n  var updateQueue = [];\n  var insertStack = new InsertStack();\n  var theta = options.theta;\n\n  var nodesCache = [];\n  var currentInCache = 0;\n  var root = newNode();\n\n  return {\n    insertBodies: insertBodies,\n\n    /**\n     * Gets root node if it is present\n     */\n    getRoot: function() {\n      return root;\n    },\n\n    updateBodyForce: update,\n\n    options: function(newOptions) {\n      if (newOptions) {\n        if (typeof newOptions.gravity === 'number') {\n          gravity = newOptions.gravity;\n        }\n        if (typeof newOptions.theta === 'number') {\n          theta = newOptions.theta;\n        }\n\n        return this;\n      }\n\n      return {\n        gravity: gravity,\n        theta: theta\n      };\n    }\n  };\n\n  function newNode() {\n    // To avoid pressure on GC we reuse nodes.\n    var node = nodesCache[currentInCache];\n    if (node) {\n${f("      node.")}\n      node.body = null;\n      node.mass = ${e("node.mass_{var} = ",{join:""})}0;\n      ${e("node.min_{var} = node.max_{var} = ",{join:""})}0;\n    } else {\n      node = new QuadNode();\n      nodesCache[currentInCache] = node;\n    }\n\n    ++currentInCache;\n    return node;\n  }\n\n  function update(sourceBody) {\n    var queue = updateQueue;\n    var v;\n    ${e("var d{var};",{indent:4})}\n    var r; \n    ${e("var f{var} = 0;",{indent:4})}\n    var queueLength = 1;\n    var shiftIdx = 0;\n    var pushIdx = 1;\n\n    queue[0] = root;\n\n    while (queueLength) {\n      var node = queue[shiftIdx];\n      var body = node.body;\n\n      queueLength -= 1;\n      shiftIdx += 1;\n      var differentBody = (body !== sourceBody);\n      if (body && differentBody) {\n        // If the current node is a leaf node (and it is not source body),\n        // calculate the force exerted by the current node on body, and add this\n        // amount to body's net force.\n        ${e("d{var} = body.pos.{var} - sourceBody.pos.{var};",{indent:8})}\n        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});\n\n        if (r === 0) {\n          // Poor man's protection against zero distance.\n          ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}\n          r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});\n        }\n\n        // This is standard gravitation force calculation but we divide\n        // by r^3 to save two operations when normalizing force vector.\n        v = gravity * body.mass * sourceBody.mass / (r * r * r);\n        ${e("f{var} += v * d{var};",{indent:8})}\n      } else if (differentBody) {\n        // Otherwise, calculate the ratio s / r,  where s is the width of the region\n        // represented by the internal node, and r is the distance between the body\n        // and the node's center-of-mass\n        ${e("d{var} = node.mass_{var} / node.mass - sourceBody.pos.{var};",{indent:8})}\n        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});\n\n        if (r === 0) {\n          // Sorry about code duplication. I don't want to create many functions\n          // right away. Just want to see performance first.\n          ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}\n          r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});\n        }\n        // If s / r < θ, treat this internal node as a single body, and calculate the\n        // force it exerts on sourceBody, and add this amount to sourceBody's net force.\n        if ((node.max_${i(0)} - node.min_${i(0)}) / r < theta) {\n          // in the if statement above we consider node's width only\n          // because the region was made into square during tree creation.\n          // Thus there is no difference between using width or height.\n          v = gravity * node.mass * sourceBody.mass / (r * r * r);\n          ${e("f{var} += v * d{var};",{indent:10})}\n        } else {\n          // Otherwise, run the procedure recursively on each of the current node's children.\n\n          // I intentionally unfolded this loop, to save several CPU cycles.\n${d()}\n        }\n      }\n    }\n\n    ${e("sourceBody.force.{var} += f{var};",{indent:4})}\n  }\n\n  function insertBodies(bodies) {\n    ${e("var {var}min = Number.MAX_VALUE;",{indent:4})}\n    ${e("var {var}max = Number.MIN_VALUE;",{indent:4})}\n    var i = bodies.length;\n\n    // To reduce quad tree depth we are looking for exact bounding box of all particles.\n    while (i--) {\n      var pos = bodies[i].pos;\n      ${e("if (pos.{var} < {var}min) {var}min = pos.{var};",{indent:6})}\n      ${e("if (pos.{var} > {var}max) {var}max = pos.{var};",{indent:6})}\n    }\n\n    // Makes the bounds square.\n    var maxSideLength = -Infinity;\n    ${e("if ({var}max - {var}min > maxSideLength) maxSideLength = {var}max - {var}min ;",{indent:4})}\n\n    currentInCache = 0;\n    root = newNode();\n    ${e("root.min_{var} = {var}min;",{indent:4})}\n    ${e("root.max_{var} = {var}min + maxSideLength;",{indent:4})}\n\n    i = bodies.length - 1;\n    if (i >= 0) {\n      root.body = bodies[i];\n    }\n    while (i--) {\n      insert(bodies[i], root);\n    }\n  }\n\n  function insert(newBody) {\n    insertStack.reset();\n    insertStack.push(root, newBody);\n\n    while (!insertStack.isEmpty()) {\n      var stackItem = insertStack.pop();\n      var node = stackItem.node;\n      var body = stackItem.body;\n\n      if (!node.body) {\n        // This is internal node. Update the total mass of the node and center-of-mass.\n        ${e("var {var} = body.pos.{var};",{indent:8})}\n        node.mass += body.mass;\n        ${e("node.mass_{var} += body.mass * {var};",{indent:8})}\n\n        // Recursively insert the body in the appropriate quadrant.\n        // But first find the appropriate quadrant.\n        var quadIdx = 0; // Assume we are in the 0's quad.\n        ${e("var min_{var} = node.min_{var};",{indent:8})}\n        ${e("var max_{var} = (min_{var} + node.max_{var}) / 2;",{indent:8})}\n\n${s(8)}\n\n        var child = getChild(node, quadIdx);\n\n        if (!child) {\n          // The node is internal but this quadrant is not taken. Add\n          // subnode to it.\n          child = newNode();\n          ${e("child.min_{var} = min_{var};",{indent:10})}\n          ${e("child.max_{var} = max_{var};",{indent:10})}\n          child.body = body;\n\n          setChild(node, quadIdx, child);\n        } else {\n          // continue searching in this quadrant.\n          insertStack.push(child, body);\n        }\n      } else {\n        // We are trying to add to the leaf node.\n        // We have to convert current leaf into internal node\n        // and continue adding two nodes.\n        var oldBody = node.body;\n        node.body = null; // internal nodes do not cary bodies\n\n        if (isSamePosition(oldBody.pos, body.pos)) {\n          // Prevent infinite subdivision by bumping one node\n          // anywhere in this quadrant\n          var retriesCount = 3;\n          do {\n            var offset = random.nextDouble();\n            ${e("var d{var} = (node.max_{var} - node.min_{var}) * offset;",{indent:12})}\n\n            ${e("oldBody.pos.{var} = node.min_{var} + d{var};",{indent:12})}\n            retriesCount -= 1;\n            // Make sure we don't bump it out of the box. If we do, next iteration should fix it\n          } while (retriesCount > 0 && isSamePosition(oldBody.pos, body.pos));\n\n          if (retriesCount === 0 && isSamePosition(oldBody.pos, body.pos)) {\n            // This is very bad, we ran out of precision.\n            // if we do not return from the method we'll get into\n            // infinite loop here. So we sacrifice correctness of layout, and keep the app running\n            // Next layout iteration should get larger bounding box in the first step and fix this\n            return;\n          }\n        }\n        // Next iteration should subdivide node further.\n        insertStack.push(node, oldBody);\n        insertStack.push(node, body);\n      }\n    }\n  }\n}\nreturn createQuadTree;\n\n`;return o;function s(e){let n=[],r=Array(e+1).join(" ");for(let o=0;o<t;++o)n.push(r+`if (${i(o)} > max_${i(o)}) {`),n.push(r+`  quadIdx = quadIdx + ${Math.pow(2,o)};`),n.push(r+`  min_${i(o)} = max_${i(o)};`),n.push(r+`  max_${i(o)} = node.max_${i(o)};`),n.push(r+"}");return n.join("\n")}function d(){let t=Array(11).join(" "),e=[];for(let r=0;r<n;++r)e.push(t+`if (node.quad${r}) {`),e.push(t+`  queue[pushIdx] = node.quad${r};`),e.push(t+"  queueLength += 1;"),e.push(t+"  pushIdx += 1;"),e.push(t+"}");return e.join("\n")}function f(t){let e=[];for(let r=0;r<n;++r)e.push(`${t}quad${r} = null;`);return e.join("\n")}}function a(t){let e=r(t);return`\n  function isSamePosition(point1, point2) {\n    ${e("var d{var} = Math.abs(point1.{var} - point2.{var});",{indent:2})}\n  \n    return ${e("d{var} < 1e-8",{join:" && "})};\n  }  \n`}function c(t){var e=Math.pow(2,t);return`\nfunction setChild(node, idx, child) {\n  ${n()}\n}`;function n(){let t=[];for(let n=0;n<e;++n){let e=0===n?"  ":"  else ";t.push(`${e}if (idx === ${n}) node.quad${n} = child;`)}return t.join("\n")}}function l(t){return`function getChild(node, idx) {\n${e()}\n  return null;\n}`;function e(){let e=[],n=Math.pow(2,t);for(let t=0;t<n;++t)e.push(`  if (idx === ${t}) return node.quad${t};`);return e.join("\n")}}function u(t){let e=r(t),n=Math.pow(2,t);var i=`\nfunction QuadNode() {\n  // body stored inside this node. In quad tree only leaf nodes (by construction)\n  // contain bodies:\n  this.body = null;\n\n  // Child nodes are stored in quads. Each quad is presented by number:\n  // 0 | 1\n  // -----\n  // 2 | 3\n${o("  this.")}\n\n  // Total mass of current node\n  this.mass = 0;\n\n  // Center of mass coordinates\n  ${e("this.mass_{var} = 0;",{indent:2})}\n\n  // bounding box coordinates\n  ${e("this.min_{var} = 0;",{indent:2})}\n  ${e("this.max_{var} = 0;",{indent:2})}\n}\n`;return i;function o(t){let e=[];for(let r=0;r<n;++r)e.push(`${t}quad${r} = null;`);return e.join("\n")}}function h(){return"\n/**\n * Our implementation of QuadTree is non-recursive to avoid GC hit\n * This data structure represent stack of elements\n * which we are trying to insert into quad tree.\n */\nfunction InsertStack () {\n    this.stack = [];\n    this.popIdx = 0;\n}\n\nInsertStack.prototype = {\n    isEmpty: function() {\n        return this.popIdx === 0;\n    },\n    push: function (node, body) {\n        var item = this.stack[this.popIdx];\n        if (!item) {\n            // we are trying to avoid memory pressure: create new element\n            // only when absolutely necessary\n            this.stack[this.popIdx] = new InsertStackElement(node, body);\n        } else {\n            item.node = node;\n            item.body = body;\n        }\n        ++this.popIdx;\n    },\n    pop: function () {\n        if (this.popIdx > 0) {\n            return this.stack[--this.popIdx];\n        }\n    },\n    reset: function () {\n        this.popIdx = 0;\n    }\n};\n\nfunction InsertStackElement(node, body) {\n    this.node = node; // QuadTree node\n    this.body = body; // physical body which needs to be inserted to node\n}\n"}t.exports=o,t.exports.generateQuadTreeFunctionBody=s,t.exports.getInsertStackCode=h,t.exports.getQuadNodeCode=u,t.exports.isSamePosition=a,t.exports.getChildBodyCode=l,t.exports.setChildBodyCode=c},5155:function(t){t.exports=function(t){return 0===t?"x":1===t?"y":2===t?"z":"c"+(t+1)}},6599:function(t,e,n){n(1703),n(7658),t.exports=u;var r=n(3791),i=n(7099),o=n(2354),s=n(905),a=n(1709),c=n(5670),l={};function u(t){var e=n(3366),u=n(3232),d=n(1610);if(t){if(void 0!==t.springCoeff)throw new Error("springCoeff was renamed to springCoefficient");if(void 0!==t.dragCoeff)throw new Error("dragCoeff was renamed to dragCoefficient")}t=u(t,{springLength:10,springCoefficient:.8,gravity:-12,theta:.8,dragCoefficient:.9,timeStep:.5,adaptiveTimeStepWeight:0,dimensions:2,debug:!1});var f=l[t.dimensions];if(!f){var p=t.dimensions;f={Body:r(p,t.debug),createQuadTree:i(p),createBounds:o(p),createDragForce:s(p),createSpringForce:a(p),integrate:c(p)},l[p]=f}var m=f.Body,g=f.createQuadTree,v=f.createBounds,_=f.createDragForce,y=f.createSpringForce,b=f.integrate,w=t=>new m(t),x=n(1857).random(42),E=[],S=[],M=g(t,x),T=v(E,t,x),A=y(t,x),C=_(t),R=0,P=[],O=new Map,L=0;D("nbody",F),D("spring",B);var k={bodies:E,quadTree:M,springs:S,settings:t,addForce:D,removeForce:N,getForces:U,step:function(){for(var e=0;e<P.length;++e)P[e](L);var n=b(E,t.timeStep,t.adaptiveTimeStepWeight);return L+=1,n},addBody:function(t){if(!t)throw new Error("Body is required");return E.push(t),t},addBodyAt:function(t){if(!t)throw new Error("Body position is required");var e=w(t);return E.push(e),e},removeBody:function(t){if(t){var e=E.indexOf(t);if(!(e<0))return E.splice(e,1),0===E.length&&T.reset(),!0}},addSpring:function(t,n,r,i){if(!t||!n)throw new Error("Cannot add null spring to force simulator");"number"!==typeof r&&(r=-1);var o=new e(t,n,r,i>=0?i:-1);return S.push(o),o},getTotalMovement:function(){return R},removeSpring:function(t){if(t){var e=S.indexOf(t);return e>-1?(S.splice(e,1),!0):void 0}},getBestNewBodyPosition:function(t){return T.getBestNewPosition(t)},getBBox:I,getBoundingBox:I,invalidateBBox:function(){console.warn("invalidateBBox() is deprecated, bounds always recomputed on `getBBox()` call")},gravity:function(e){return void 0!==e?(t.gravity=e,M.options({gravity:e}),this):t.gravity},theta:function(e){return void 0!==e?(t.theta=e,M.options({theta:e}),this):t.theta},random:x};return h(t,k),d(k),k;function I(){return T.update(),T.box}function D(t,e){if(O.has(t))throw new Error("Force "+t+" is already added");O.set(t,e),P.push(e)}function N(t){var e=P.indexOf(O.get(t));e<0||(P.splice(e,1),O.delete(t))}function U(){return O}function F(){if(0!==E.length){M.insertBodies(E);var t=E.length;while(t--){var e=E[t];e.isPinned||(e.reset(),M.updateBodyForce(e),C.update(e))}}}function B(){var t=S.length;while(t--)A.update(S[t])}}function h(t,e){for(var n in t)d(t,e,n)}function d(t,e,n){if(t.hasOwnProperty(n)&&"function"!==typeof e[n]){var r=Number.isFinite(t[n]);e[n]=r?function(r){if(void 0!==r){if(!Number.isFinite(r))throw new Error("Value of "+n+" should be a valid number.");return t[n]=r,e}return t[n]}:function(r){return void 0!==r?(t[n]=r,e):t[n]}}}},3366:function(t){function e(t,e,n,r){this.from=t,this.to=e,this.length=n,this.coefficient=r}t.exports=e},4747:function(t,e,n){n(1703),n(7658),t.exports=i;var r=n(1610);function i(t){if(t=t||{},"uniqueLinkId"in t&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n","\n","Note: there is also change in default behavior: From now on each graph\nis considered to be not a multigraph by default (each edge is unique)."),t.multigraph=t.uniqueLinkId),void 0===t.multigraph&&(t.multigraph=!1),"function"!==typeof Map)throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var e=new Map,n=new Map,i={},l=0,u=t.multigraph?M:S,h=[],d=U,f=U,p=U,m=U,g={version:20,addNode:b,addLink:E,removeLink:R,removeNode:x,getNode:w,getNodeCount:T,getLinkCount:A,getEdgeCount:A,getLinksCount:A,getNodesCount:T,getLinks:C,forEachNode:z,forEachLinkedNode:I,forEachLink:k,beginUpdate:p,endUpdate:m,clear:L,hasLink:O,hasNode:w,getLink:O};return r(g),v(),g;function v(){var t=g.on;function e(){return g.beginUpdate=p=F,g.endUpdate=m=B,d=_,f=y,g.on=t,t.apply(g,arguments)}g.on=e}function _(t,e){h.push({link:t,changeType:e})}function y(t,e){h.push({node:t,changeType:e})}function b(t,n){if(void 0===t)throw new Error("Invalid node identifier");p();var r=w(t);return r?(r.data=n,f(r,"update")):(r=new o(t,n),f(r,"add")),e.set(t,r),m(),r}function w(t){return e.get(t)}function x(t){var n=w(t);if(!n)return!1;p();var r=n.links;return r&&(r.forEach(P),n.links=null),e.delete(t),f(n,"remove"),m(),!0}function E(t,e,r){p();var i=w(t)||b(t),o=w(e)||b(e),a=u(t,e,r),c=n.has(a.id);return n.set(a.id,a),s(i,a),t!==e&&s(o,a),d(a,c?"update":"add"),m(),a}function S(t,e,r){var i=c(t,e),o=n.get(i);return o?(o.data=r,o):new a(t,e,r,i)}function M(t,e,n){var r=c(t,e),o=i.hasOwnProperty(r);if(o||O(t,e)){o||(i[r]=0);var s="@"+ ++i[r];r=c(t+s,e+s)}return new a(t,e,n,r)}function T(){return e.size}function A(){return n.size}function C(t){var e=w(t);return e?e.links:null}function R(t,e){return void 0!==e&&(t=O(t,e)),P(t)}function P(t){if(!t)return!1;if(!n.get(t.id))return!1;p(),n.delete(t.id);var e=w(t.fromId),r=w(t.toId);return e&&e.links.delete(t),r&&r.links.delete(t),d(t,"remove"),m(),!0}function O(t,e){if(void 0!==t&&void 0!==e)return n.get(c(t,e))}function L(){p(),z((function(t){x(t.id)})),m()}function k(t){if("function"===typeof t){var e=n.values(),r=e.next();while(!r.done){if(t(r.value))return!0;r=e.next()}}}function I(t,e,n){var r=w(t);if(r&&r.links&&"function"===typeof e)return n?N(r.links,t,e):D(r.links,t,e)}function D(t,n,r){var i,o=t.values(),s=o.next();while(!s.done){var a=s.value,c=a.fromId===n?a.toId:a.fromId;if(i=r(e.get(c),a),i)return!0;s=o.next()}}function N(t,n,r){var i,o=t.values(),s=o.next();while(!s.done){var a=s.value;if(a.fromId===n&&(i=r(e.get(a.toId),a),i))return!0;s=o.next()}}function U(){}function F(){l+=1}function B(){l-=1,0===l&&h.length>0&&(g.fire("changed",h),h.length=0)}function z(t){if("function"!==typeof t)throw new Error("Function is expected to iterate over graph nodes. You passed "+t);var n=e.values(),r=n.next();while(!r.done){if(t(r.value))return!0;r=n.next()}}}function o(t,e){this.id=t,this.links=null,this.data=e}function s(t,e){t.links?t.links.add(e):t.links=new Set([e])}function a(t,e,n,r){this.fromId=t,this.toId=e,this.data=n,this.id=r}function c(t,e){return t.toString()+"👉 "+e.toString()}},3232:function(t){function e(t,n){var r;if(t||(t={}),n)for(r in n)if(n.hasOwnProperty(r)){var i=t.hasOwnProperty(r),o=typeof n[r],s=!i||typeof t[r]!==o;s?t[r]=n[r]:"object"===o&&(t[r]=e(t[r],n[r]))}return t}t.exports=e},1857:function(t,e,n){function r(t){var e="number"===typeof t?t:+new Date;return new i(e)}function i(t){this.seed=t}function o(){var t,e,n;do{e=2*this.nextDouble()-1,n=2*this.nextDouble()-1,t=e*e+n*n}while(t>=1||0===t);return e*Math.sqrt(-2*Math.log(t)/t)}function s(){var t=1.5,e=Math.pow(a(1+t)*Math.sin(Math.PI*t/2)/(a((1+t)/2)*t*Math.pow(2,(t-1)/2)),1/t);return this.gaussian()*e/Math.pow(Math.abs(this.gaussian()),1/t)}function a(t){return Math.sqrt(2*Math.PI/t)*Math.pow(1/Math.E*(t+1/(12*t-1/(10*t))),t)}function c(){var t=this.seed;return t=t+2127912214+(t<<12)&4294967295,t=4294967295&(3345072700^t^t>>>19),t=t+374761393+(t<<5)&4294967295,t=4294967295&(t+3550635116^t<<9),t=t+4251993797+(t<<3)&4294967295,t=4294967295&(3042594569^t^t>>>16),this.seed=t,(268435455&t)/268435456}function l(t){return Math.floor(this.nextDouble()*t)}function u(t,e){var n=e||r();if("function"!==typeof n.next)throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:o,shuffle:i};function i(){var e,r,i;for(e=t.length-1;e>0;--e)r=n.next(e+1),i=t[r],t[r]=t[e],t[e]=i;return t}function o(e){var r,i,o;for(r=t.length-1;r>0;--r)i=n.next(r+1),o=t[i],t[i]=t[r],t[r]=o,e(o);t.length&&e(t[0])}}n(1703),t.exports=r,t.exports.random=r,t.exports.randomIterator=u,i.prototype.next=l,i.prototype.nextDouble=c,i.prototype.uniform=c,i.prototype.gaussian=o,i.prototype.levy=s},5431:function(t,e,n){"use strict";n.d(e,{z:function(){return o}});n(1703);var r,i=function(){return Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))};function o(t,e){void 0===e&&(e={});var n=e.registrationOptions;void 0===n&&(n={}),delete e.registrationOptions;var o=function(t){var n=[],r=arguments.length-1;while(r-- >0)n[r]=arguments[r+1];e&&e[t]&&e[t].apply(e,n)};"serviceWorker"in navigator&&r.then((function(){i()?(c(t,o,n),navigator.serviceWorker.ready.then((function(t){o("ready",t)})).catch((function(t){return s(o,t)}))):(a(t,o,n),navigator.serviceWorker.ready.then((function(t){o("ready",t)})).catch((function(t){return s(o,t)})))}))}function s(t,e){navigator.onLine||t("offline"),t("error",e)}function a(t,e,n){navigator.serviceWorker.register(t,n).then((function(t){e("registered",t),t.waiting?e("updated",t):t.onupdatefound=function(){e("updatefound",t);var n=t.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?e("updated",t):e("cached",t))}}})).catch((function(t){return s(e,t)}))}function c(t,e,n){fetch(t).then((function(r){404===r.status?(e("error",new Error("Service worker not found at "+t)),l()):-1===r.headers.get("content-type").indexOf("javascript")?(e("error",new Error("Expected "+t+" to have javascript content-type, but received "+r.headers.get("content-type"))),l()):a(t,e,n)})).catch((function(t){return s(e,t)}))}function l(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){return s(emit,t)}))}"undefined"!==typeof window&&(r="undefined"!==typeof Promise?new Promise((function(t){return window.addEventListener("load",t)})):{then:function(t){return window.addEventListener("load",t)}})},4743:function(t,e,n){n(1703),n(7658),n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315),function(e){t.exports=e()}((function(){var t=Math.floor,e=Math.abs,r=Math.pow;return function(){function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var c=void 0;if(!a&&c)return require(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[s]={exports:{}};e[s][0].call(u.exports,(function(t){var n=e[s][1][t];return i(n||t)}),u,u.exports,t,e,n,r)}return n[s].exports}for(var o=void 0,s=0;s<r.length;s++)i(r[s]);return i}return t}()({1:[function(t,e,n){"use strict";function r(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");-1===n&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function i(t,e,n){return 3*(e+n)/4-n}function o(t){var e,n,o=r(t),s=o[0],a=o[1],c=new h(i(t,s,a)),l=0,d=0<a?s-4:s;for(n=0;n<d;n+=4)e=u[t.charCodeAt(n)]<<18|u[t.charCodeAt(n+1)]<<12|u[t.charCodeAt(n+2)]<<6|u[t.charCodeAt(n+3)],c[l++]=255&e>>16,c[l++]=255&e>>8,c[l++]=255&e;return 2===a&&(e=u[t.charCodeAt(n)]<<2|u[t.charCodeAt(n+1)]>>4,c[l++]=255&e),1===a&&(e=u[t.charCodeAt(n)]<<10|u[t.charCodeAt(n+1)]<<4|u[t.charCodeAt(n+2)]>>2,c[l++]=255&e>>8,c[l++]=255&e),c}function s(t){return l[63&t>>18]+l[63&t>>12]+l[63&t>>6]+l[63&t]}function a(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(16711680&t[o]<<16)+(65280&t[o+1]<<8)+(255&t[o+2]),i.push(s(r));return i.join("")}function c(t){for(var e,n=t.length,r=n%3,i=[],o=16383,s=0,c=n-r;s<c;s+=o)i.push(a(t,s,s+o>c?c:s+o));return 1===r?(e=t[n-1],i.push(l[e>>2]+l[63&e<<4]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],i.push(l[e>>10]+l[63&e>>4]+l[63&e<<2]+"=")),i.join("")}n.byteLength=function(t){var e=r(t),n=e[0],i=e[1];return 3*(n+i)/4-i},n.toByteArray=o,n.fromByteArray=c;for(var l=[],u=[],h="undefined"==typeof Uint8Array?Array:Uint8Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,p=d.length;f<p;++f)l[f]=d[f],u[d.charCodeAt(f)]=f;u[45]=62,u[95]=63},{}],2:[function(){},{}],3:[function(t,e,n){(function(){(function(){
/*!
          * The buffer module from node.js, for the browser.
          *
          * @author   Feross Aboukhadijeh <https://feross.org>
          * @license  MIT
          */
"use strict";var e=String.fromCharCode,i=Math.min;function o(t){if(2147483647<t)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return e.__proto__=s.prototype,e}function s(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return u(t)}return a(t,e,n)}function a(t,e,n){if("string"==typeof t)return h(t,e);if(ArrayBuffer.isView(t))return d(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(q(t,ArrayBuffer)||t&&q(t.buffer,ArrayBuffer))return f(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return s.from(r,e,n);var i=p(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return s.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(0>t)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function l(t,e,n){return c(t),0>=t||void 0===e?o(t):"string"==typeof n?o(t).fill(e,n):o(t).fill(e)}function u(t){return c(t),o(0>t?0:0|m(t))}function h(t,e){if(("string"!=typeof e||""===e)&&(e="utf8"),!s.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var n=0|g(t,e),r=o(n),i=r.write(t,e);return i!==n&&(r=r.slice(0,i)),r}function d(t){for(var e=0>t.length?0:0|m(t.length),n=o(e),r=0;r<e;r+=1)n[r]=255&t[r];return n}function f(t,e,n){if(0>e||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),r.__proto__=s.prototype,r}function p(t){if(s.isBuffer(t)){var e=0|m(t.length),n=o(e);return 0===n.length||t.copy(n,0,0,e),n}return void 0===t.length?"Buffer"===t.type&&Array.isArray(t.data)?d(t.data):void 0:"number"!=typeof t.length||X(t.length)?o(0):d(t)}function m(t){if(t>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|t}function g(t,e){if(s.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||q(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,r=2<arguments.length&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return j(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(t).length;default:if(i)return r?-1:j(t).length;e=(""+e).toLowerCase(),i=!0}}function v(t,e,n){var r=!1;if((void 0===e||0>e)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),0>=n)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return L(this,e,n);case"utf8":case"utf-8":return C(this,e,n);case"ascii":return P(this,e,n);case"latin1":case"binary":return O(this,e,n);case"base64":return A(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function _(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:-2147483648>n&&(n=-2147483648),n=+n,X(n)&&(n=i?0:t.length-1),0>n&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(0>n){if(!i)return-1;n=0}if("string"==typeof e&&(e=s.from(e,r)),s.isBuffer(e))return 0===e.length?-1:b(t,e,n,r,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):b(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,n,r,i){function o(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}var s,a=1,c=t.length,l=e.length;if(void 0!==r&&(r=(r+"").toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(2>t.length||2>e.length)return-1;a=2,c/=2,l/=2,n/=2}if(i){var u=-1;for(s=n;s<c;s++)if(o(t,s)!==o(e,-1===u?0:s-u))-1!==u&&(s-=s-u),u=-1;else if(-1===u&&(u=s),s-u+1===l)return u*a}else for(n+l>c&&(n=c-l),s=n;0<=s;s--){for(var h=!0,d=0;d<l;d++)if(o(t,s+d)!==o(e,d)){h=!1;break}if(h)return s}return-1}function w(t,e,n,r){n=+n||0;var i=t.length-n;r?(r=+r,r>i&&(r=i)):r=i;var o=e.length;r>o/2&&(r=o/2);for(var s,a=0;a<r;++a){if(s=parseInt(e.substr(2*a,2),16),X(s))return a;t[n+a]=s}return a}function x(t,e,n,r){return W(j(e,t.length-n),t,n,r)}function E(t,e,n,r){return W(H(e),t,n,r)}function S(t,e,n,r){return E(t,e,n,r)}function M(t,e,n,r){return W(G(e),t,n,r)}function T(t,e,n,r){return W(V(e,t.length-n),t,n,r)}function A(t,e,n){return 0===e&&n===t.length?Y.fromByteArray(t):Y.fromByteArray(t.slice(e,n))}function C(t,e,n){n=i(t.length,n);for(var r=[],o=e;o<n;){var s,a,c,l,u=t[o],h=null,d=239<u?4:223<u?3:191<u?2:1;if(o+d<=n)1===d?128>u&&(h=u):2===d?(s=t[o+1],128==(192&s)&&(l=(31&u)<<6|63&s,127<l&&(h=l))):3===d?(s=t[o+1],a=t[o+2],128==(192&s)&&128==(192&a)&&(l=(15&u)<<12|(63&s)<<6|63&a,2047<l&&(55296>l||57343<l)&&(h=l))):4===d&&(s=t[o+1],a=t[o+2],c=t[o+3],128==(192&s)&&128==(192&a)&&128==(192&c)&&(l=(15&u)<<18|(63&s)<<12|(63&a)<<6|63&c,65535<l&&1114112>l&&(h=l)));null===h?(h=65533,d=1):65535<h&&(h-=65536,r.push(55296|1023&h>>>10),h=56320|1023&h),r.push(h),o+=d}return R(r)}function R(t){var n=t.length;if(n<=4096)return e.apply(String,t);for(var r="",i=0;i<n;)r+=e.apply(String,t.slice(i,i+=4096));return r}function P(t,n,r){var o="";r=i(t.length,r);for(var s=n;s<r;++s)o+=e(127&t[s]);return o}function O(t,n,r){var o="";r=i(t.length,r);for(var s=n;s<r;++s)o+=e(t[s]);return o}function L(t,e,n){var r=t.length;(!e||0>e)&&(e=0),(!n||0>n||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=z(t[o]);return i}function k(t,n,r){for(var i=t.slice(n,r),o="",s=0;s<i.length;s+=2)o+=e(i[s]+256*i[s+1]);return o}function I(t,e,n){if(0!=t%1||0>t)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function D(t,e,n,r,i,o){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function N(t,e,n,r){if(n+r>t.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("Index out of range")}function U(t,e,n,r,i){return e=+e,n>>>=0,i||N(t,e,n,4,34028234663852886e22,-34028234663852886e22),$.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,i){return e=+e,n>>>=0,i||N(t,e,n,8,17976931348623157e292,-17976931348623157e292),$.write(t,e,n,r,52,8),n+8}function B(t){if(t=t.split("=")[0],t=t.trim().replace(K,""),2>t.length)return"";for(;0!=t.length%4;)t+="=";return t}function z(t){return 16>t?"0"+t.toString(16):t.toString(16)}function j(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],s=0;s<r;++s){if(n=t.charCodeAt(s),55295<n&&57344>n){if(!i){if(56319<n){-1<(e-=3)&&o.push(239,191,189);continue}if(s+1===r){-1<(e-=3)&&o.push(239,191,189);continue}i=n;continue}if(56320>n){-1<(e-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(e-=3)&&o.push(239,191,189);if(i=null,128>n){if(0>(e-=1))break;o.push(n)}else if(2048>n){if(0>(e-=2))break;o.push(192|n>>6,128|63&n)}else if(65536>n){if(0>(e-=3))break;o.push(224|n>>12,128|63&n>>6,128|63&n)}else{if(!(1114112>n))throw new Error("Invalid code point");if(0>(e-=4))break;o.push(240|n>>18,128|63&n>>12,128|63&n>>6,128|63&n)}}return o}function H(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function V(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!(0>(e-=2));++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function G(t){return Y.toByteArray(B(t))}function W(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function q(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function X(t){return t!==t}var Y=t("base64-js"),$=t("ieee754");n.Buffer=s,n.SlowBuffer=function(t){return+t!=t&&(t=0),s.alloc(+t)},n.INSPECT_MAX_BYTES=50,n.kMaxLength=2147483647,s.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(e){return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){return s.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){return s.isBuffer(this)?this.byteOffset:void 0}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192,s.from=function(t,e,n){return a(t,e,n)},s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,s.alloc=function(t,e,n){return l(t,e,n)},s.allocUnsafe=function(t){return u(t)},s.allocUnsafeSlow=function(t){return u(t)},s.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==s.prototype},s.compare=function(t,e){if(q(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),q(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var n=t.length,r=e.length,o=0,a=i(n,r);o<a;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},s.isEncoding=function(t){switch((t+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=s.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(q(o,Uint8Array)&&(o=s.from(o)),!s.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},s.byteLength=g,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(0!=t%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)_(this,e,e+1);return this},s.prototype.swap32=function(){var t=this.length;if(0!=t%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)_(this,e,e+3),_(this,e+1,e+2);return this},s.prototype.swap64=function(){var t=this.length;if(0!=t%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)_(this,e,e+7),_(this,e+1,e+6),_(this,e+2,e+5),_(this,e+3,e+4);return this},s.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?C(this,0,t):v.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},s.prototype.compare=function(t,e,n,r,o){if(q(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),0>e||n>t.length||0>r||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,o>>>=0,this===t)return 0;for(var a=o-r,c=n-e,l=i(a,c),u=this.slice(r,o),h=t.slice(e,n),d=0;d<l;++d)if(u[d]!==h[d]){a=u[d],c=h[d];break}return a<c?-1:c<a?1:0},s.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},s.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},s.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},s.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),0<t.length&&(0>n||0>e)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return w(this,t,e,n);case"utf8":case"utf-8":return x(this,t,e,n);case"ascii":return E(this,t,e,n);case"latin1":case"binary":return S(this,t,e,n);case"base64":return M(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},s.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),e<t&&(e=t);var r=this.subarray(t,e);return r.__proto__=s.prototype,r},s.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||I(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},s.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||I(t,e,this.length);for(var r=this[t+--e],i=1;0<e&&(i*=256);)r+=this[t+--e]*i;return r},s.prototype.readUInt8=function(t,e){return t>>>=0,e||I(t,1,this.length),this[t]},s.prototype.readUInt16LE=function(t,e){return t>>>=0,e||I(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUInt16BE=function(t,e){return t>>>=0,e||I(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUInt32LE=function(t,e){return t>>>=0,e||I(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUInt32BE=function(t,e){return t>>>=0,e||I(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||I(t,e,this.length);for(var i=this[t],o=1,s=0;++s<e&&(o*=256);)i+=this[t+s]*o;return o*=128,i>=o&&(i-=r(2,8*e)),i},s.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||I(t,e,this.length);for(var i=e,o=1,s=this[t+--i];0<i&&(o*=256);)s+=this[t+--i]*o;return o*=128,s>=o&&(s-=r(2,8*e)),s},s.prototype.readInt8=function(t,e){return t>>>=0,e||I(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){t>>>=0,e||I(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(t,e){t>>>=0,e||I(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(t,e){return t>>>=0,e||I(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return t>>>=0,e||I(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,e){return t>>>=0,e||I(t,4,this.length),$.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return t>>>=0,e||I(t,4,this.length),$.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return t>>>=0,e||I(t,8,this.length),$.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return t>>>=0,e||I(t,8,this.length),$.read(this,t,!1,52,8)},s.prototype.writeUIntLE=function(t,e,n,i){if(t=+t,e>>>=0,n>>>=0,!i){var o=r(2,8*n)-1;D(this,t,e,n,o,0)}var s=1,a=0;for(this[e]=255&t;++a<n&&(s*=256);)this[e+a]=255&t/s;return e+n},s.prototype.writeUIntBE=function(t,e,n,i){if(t=+t,e>>>=0,n>>>=0,!i){var o=r(2,8*n)-1;D(this,t,e,n,o,0)}var s=n-1,a=1;for(this[e+s]=255&t;0<=--s&&(a*=256);)this[e+s]=255&t/a;return e+n},s.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,1,255,0),this[e]=255&t,e+1},s.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},s.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e>>>=0,!i){var o=r(2,8*n-1);D(this,t,e,n,o-1,-o)}var s=0,a=1,c=0;for(this[e]=255&t;++s<n&&(a*=256);)0>t&&0===c&&0!==this[e+s-1]&&(c=1),this[e+s]=255&(t/a>>0)-c;return e+n},s.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e>>>=0,!i){var o=r(2,8*n-1);D(this,t,e,n,o-1,-o)}var s=n-1,a=1,c=0;for(this[e+s]=255&t;0<=--s&&(a*=256);)0>t&&0===c&&0!==this[e+s+1]&&(c=1),this[e+s]=255&(t/a>>0)-c;return e+n},s.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,1,127,-128),0>t&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},s.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeFloatLE=function(t,e,n){return U(this,t,e,!0,n)},s.prototype.writeFloatBE=function(t,e,n){return U(this,t,e,!1,n)},s.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},s.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},s.prototype.copy=function(t,e,n,r){if(!s.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),0<r&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("Index out of range");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i=r-n;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,n,r);else if(this===t&&n<e&&e<r)for(var o=i-1;0<=o;--o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,r),e);return i},s.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){var i=t.charCodeAt(0);("utf8"===r&&128>i||"latin1"===r)&&(t=i)}}else"number"==typeof t&&(t&=255);if(0>e||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=s.isBuffer(t)?t:s.from(t,r),c=a.length;if(0===c)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=a[o%c]}return this};var K=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,t("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:9}],4:[function(t,e,n){(function(r){(function(){function i(){let t;try{t=n.storage.getItem("debug")}catch(t){}return!t&&"undefined"!=typeof r&&"env"in r&&(t=r.env.DEBUG),t}n.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"===t||(r++,"%c"===t&&(i=r))})),t.splice(i,0,n)},n.save=function(t){try{t?n.storage.setItem("debug",t):n.storage.removeItem("debug")}catch(t){}},n.load=i,n.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},n.storage=function(){try{return localStorage}catch(t){}}(),n.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],n.log=console.debug||console.log||(()=>{}),e.exports=t("./common")(n);const{formatters:o}=e.exports;o.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(this)}).call(this,t("_process"))},{"./common":5,_process:12}],5:[function(t,n){n.exports=function(n){function r(t){function e(...t){if(!e.enabled)return;const i=e,o=+new Date,s=o-(n||o);i.diff=s,i.prev=n,i.curr=o,n=o,t[0]=r.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let a=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((e,n)=>{if("%%"===e)return"%";a++;const o=r.formatters[n];if("function"==typeof o){const n=t[a];e=o.call(i,n),t.splice(a,1),a--}return e})),r.formatArgs.call(i,t);const c=i.log||r.log;c.apply(i,t)}let n,o=null;return e.namespace=t,e.useColors=r.useColors(),e.color=r.selectColor(t),e.extend=i,e.destroy=r.destroy,Object.defineProperty(e,"enabled",{enumerable:!0,configurable:!1,get:()=>null===o?r.enabled(t):o,set:t=>{o=t}}),"function"==typeof r.init&&r.init(e),e}function i(t,e){const n=r(this.namespace+("undefined"==typeof e?":":e)+t);return n.log=this.log,n}function o(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(t){return t instanceof Error?t.stack||t.message:t},r.disable=function(){const t=[...r.names.map(o),...r.skips.map(o).map((t=>"-"+t))].join(",");return r.enable(""),t},r.enable=function(t){let e;r.save(t),r.names=[],r.skips=[];const n=("string"==typeof t?t:"").split(/[\s,]+/),i=n.length;for(e=0;e<i;e++)n[e]&&(t=n[e].replace(/\*/g,".*?"),"-"===t[0]?r.skips.push(new RegExp("^"+t.substr(1)+"$")):r.names.push(new RegExp("^"+t+"$")))},r.enabled=function(t){if("*"===t[t.length-1])return!0;let e,n;for(e=0,n=r.skips.length;e<n;e++)if(r.skips[e].test(t))return!1;for(e=0,n=r.names.length;e<n;e++)if(r.names[e].test(t))return!0;return!1},r.humanize=t("ms"),r.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(n).forEach((t=>{r[t]=n[t]})),r.names=[],r.skips=[],r.formatters={},r.selectColor=function(t){let n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return r.colors[e(n)%r.colors.length]},r.enable(r.load()),r}},{ms:11}],6:[function(t,e){"use strict";function n(t,e){for(const n in e)Object.defineProperty(t,n,{value:e[n],enumerable:!0,configurable:!0});return t}e.exports=function(t,e,r){if(!t||"string"==typeof t)throw new TypeError("Please pass an Error to err-code");r||(r={}),"object"==typeof e&&(r=e,e=""),e&&(r.code=e);try{return n(t,r)}catch(e){r.message=t.message,r.stack=t.stack;const i=function(){};i.prototype=Object.create(Object.getPrototypeOf(t));const o=n(new i,r);return o}}},{}],7:[function(t,e){"use strict";function n(t){console&&console.warn&&console.warn(t)}function r(){r.init.call(this)}function i(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function o(t){return void 0===t._maxListeners?r.defaultMaxListeners:t._maxListeners}function s(t,e,r,s){var a,c,l;if(i(r),c=t._events,void 0===c?(c=t._events=Object.create(null),t._eventsCount=0):(void 0!==c.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),c=t._events),l=c[e]),void 0===l)l=c[e]=r,++t._eventsCount;else if("function"==typeof l?l=c[e]=s?[r,l]:[l,r]:s?l.unshift(r):l.push(r),a=o(t),0<a&&l.length>a&&!l.warned){l.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=l.length,n(u)}return t}function a(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=a.bind(r);return i.listener=n,r.wrapFn=i,i}function l(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?f(i):h(i,i.length)}function u(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(t,e){for(var n=Array(e),r=0;r<e;++r)n[r]=t[r];return n}function d(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function f(t){for(var e=Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function p(t,e,n){"function"==typeof t.on&&m(t,"error",e,n)}function m(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){r.once&&t.removeEventListener(e,i),n(o)}))}}var g,v="object"==typeof Reflect?Reflect:null,_=v&&"function"==typeof v.apply?v.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};g=v&&"function"==typeof v.ownKeys?v.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var y=Number.isNaN||function(t){return t!==t};e.exports=r,e.exports.once=function(t,e){return new Promise((function(n,r){function i(n){t.removeListener(e,o),r(n)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}m(t,e,o,{once:!0}),"error"!==e&&p(t,i,{once:!0})}))},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var b=10;Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return b},set:function(t){if("number"!=typeof t||0>t||y(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");b=t}}),r.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(t){if("number"!=typeof t||0>t||y(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},r.prototype.getMaxListeners=function(){return o(this)},r.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(0<e.length&&(o=e[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var a=i[t];if(void 0===a)return!1;if("function"==typeof a)_(a,this,e);else{var c=a.length,l=h(a,c);for(n=0;n<c;++n)_(l[n],this,e)}return!0},r.prototype.addListener=function(t,e){return s(this,t,e,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(t,e){return s(this,t,e,!0)},r.prototype.once=function(t,e){return i(e),this.on(t,c(this,t,e)),this},r.prototype.prependOnceListener=function(t,e){return i(e),this.prependListener(t,c(this,t,e)),this},r.prototype.removeListener=function(t,e){var n,r,o,s,a;if(i(e),r=this._events,void 0===r)return this;if(n=r[t],void 0===n)return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,s=n.length-1;0<=s;s--)if(n[s]===e||n[s].listener===e){a=n[s].listener,o=s;break}if(0>o)return this;0===o?n.shift():d(n,o),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(t){var e,n,r;if(n=this._events,void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)i=o[r],"removeListener"!==i&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=n[t],"function"==typeof e)this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;0<=r;r--)this.removeListener(t,e[r]);return this},r.prototype.listeners=function(t){return l(this,t,!0)},r.prototype.rawListeners=function(t){return l(this,t,!1)},r.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):u.call(t,e)},r.prototype.listenerCount=u,r.prototype.eventNames=function(){return 0<this._eventsCount?g(this._events):[]}},{}],8:[function(t,e){e.exports=function(){if("undefined"==typeof globalThis)return null;var t={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return t.RTCPeerConnection?t:null}},{}],9:[function(n,i,o){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */o.read=function(t,e,n,i,o){var s,a,c=8*o-i-1,l=(1<<c)-1,u=l>>1,h=-7,d=n?o-1:0,f=n?-1:1,p=t[e+d];for(d+=f,s=p&(1<<-h)-1,p>>=-h,h+=c;0<h;s=256*s+t[e+d],d+=f,h-=8);for(a=s&(1<<-h)-1,s>>=-h,h+=i;0<h;a=256*a+t[e+d],d+=f,h-=8);if(0===s)s=1-u;else{if(s===l)return a?NaN:1/0*(p?-1:1);a+=r(2,i),s-=u}return(p?-1:1)*a*r(2,s-i)},o.write=function(n,i,o,s,a,c){var l,u,h,d=Math.LN2,f=Math.log,p=8*c-a-1,m=(1<<p)-1,g=m>>1,v=23===a?r(2,-24)-r(2,-77):0,_=s?0:c-1,y=s?1:-1,b=0>i||0===i&&0>1/i?1:0;for(i=e(i),isNaN(i)||i===1/0?(u=isNaN(i)?1:0,l=m):(l=t(f(i)/d),1>i*(h=r(2,-l))&&(l--,h*=2),i+=1<=l+g?v/h:v*r(2,1-g),2<=i*h&&(l++,h/=2),l+g>=m?(u=0,l=m):1<=l+g?(u=(i*h-1)*r(2,a),l+=g):(u=i*r(2,g-1)*r(2,a),l=0));8<=a;n[o+_]=255&u,_+=y,u/=256,a-=8);for(l=l<<a|u,p+=a;0<p;n[o+_]=255&l,_+=y,l/=256,p-=8);n[o+_-y]|=128*b}},{}],10:[function(t,e){e.exports="function"==typeof Object.create?function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},{}],11:[function(t,n){var r=Math.round;function i(t){if(t+="",!(100<t.length)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();return"years"===r||"year"===r||"yrs"===r||"yr"===r||"y"===r?315576e5*n:"weeks"===r||"week"===r||"w"===r?6048e5*n:"days"===r||"day"===r||"d"===r?864e5*n:"hours"===r||"hour"===r||"hrs"===r||"hr"===r||"h"===r?36e5*n:"minutes"===r||"minute"===r||"mins"===r||"min"===r||"m"===r?6e4*n:"seconds"===r||"second"===r||"secs"===r||"sec"===r||"s"===r?1e3*n:"milliseconds"===r||"millisecond"===r||"msecs"===r||"msec"===r||"ms"===r?n:void 0}}}function o(t){var n=e(t);return 864e5<=n?r(t/864e5)+"d":36e5<=n?r(t/36e5)+"h":6e4<=n?r(t/6e4)+"m":1e3<=n?r(t/1e3)+"s":t+"ms"}function s(t){var n=e(t);return 864e5<=n?a(t,n,864e5,"day"):36e5<=n?a(t,n,36e5,"hour"):6e4<=n?a(t,n,6e4,"minute"):1e3<=n?a(t,n,1e3,"second"):t+" ms"}function a(t,e,n,i){return r(t/n)+" "+i+(e>=1.5*n?"s":"")}n.exports=function(t,e){e=e||{};var n=typeof t;if("string"==n&&0<t.length)return i(t);if("number"===n&&isFinite(t))return e.long?s(t):o(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},{}],12:[function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(u===setTimeout)return setTimeout(t,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(n){try{return u.call(null,t,0)}catch(n){return u.call(this,t,0)}}}function o(t){if(h===clearTimeout)return clearTimeout(t);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(n){try{return h.call(null,t)}catch(n){return h.call(this,t)}}}function s(){m&&f&&(m=!1,f.length?p=f.concat(p):g=-1,p.length&&a())}function a(){if(!m){var t=i(s);m=!0;for(var e=p.length;e;){for(f=p,p=[];++g<e;)f&&f[g].run();g=-1,e=p.length}f=null,m=!1,o(t)}}function c(t,e){this.fun=t,this.array=e}function l(){}var u,h,d=e.exports={};(function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(e){h=r}})();var f,p=[],m=!1,g=-1;d.nextTick=function(t){var e=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new c(t,e)),1!==p.length||m||i(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(){return[]},d.binding=function(){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],13:[function(t,e){(function(t){(function(){
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let n;e.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"==typeof window?t:window):t=>(n||(n=Promise.resolve())).then(t).catch((t=>setTimeout((()=>{throw t}),0)))}).call(this)}).call(this,"undefined"==typeof n.g?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:n.g)},{}],14:[function(t,e){(function(n,r){(function(){"use strict";var i=t("safe-buffer").Buffer,o=r.crypto||r.msCrypto;e.exports=o&&o.getRandomValues?function(t,e){if(t>4294967295)throw new RangeError("requested too many random bytes");var r=i.allocUnsafe(t);if(0<t)if(65536<t)for(var s=0;s<t;s+=65536)o.getRandomValues(r.slice(s,s+65536));else o.getRandomValues(r);return"function"==typeof e?n.nextTick((function(){e(null,r)})):r}:function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this)}).call(this,t("_process"),"undefined"==typeof n.g?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:n.g)},{_process:12,"safe-buffer":30}],15:[function(t,e){"use strict";function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function r(t,e,r){function i(t,n,r){return"string"==typeof e?e:e(t,n,r)}r||(r=Error);var o=function(t){function e(e,n,r){return t.call(this,i(e,n,r))||this}return n(e,t),e}(r);o.prototype.name=r.name,o.prototype.code=t,c[t]=o}function i(t,e){if(Array.isArray(t)){var n=t.length;return t=t.map((function(t){return t+""})),2<n?"one of ".concat(e," ").concat(t.slice(0,n-1).join(", "),", or ")+t[n-1]:2===n?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(t+"")}function o(t,e,n){return t.substr(!n||0>n?0:+n,e.length)===e}function s(t,e,n){return(void 0===n||n>t.length)&&(n=t.length),t.substring(n-e.length,n)===e}function a(t,e,n){return"number"!=typeof n&&(n=0),!(n+e.length>t.length)&&-1!==t.indexOf(e,n)}var c={};r("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),r("ERR_INVALID_ARG_TYPE",(function(t,e,n){var r,c;if("string"==typeof e&&o(e,"not ")?(r="must not be",e=e.replace(/^not /,"")):r="must be",s(t," argument"))c="The ".concat(t," ").concat(r," ").concat(i(e,"type"));else{var l=a(t,".")?"property":"argument";c='The "'.concat(t,'" ').concat(l," ").concat(r," ").concat(i(e,"type"))}return c+=". Received type ".concat(typeof n),c}),TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=c},{}],16:[function(t,e){(function(n){(function(){"use strict";function r(t){return this instanceof r?(a.call(this,t),c.call(this,t),this.allowHalfOpen=!0,void(t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",i))))):new r(t)}function i(){this._writableState.ended||n.nextTick(o,this)}function o(t){t.end()}var s=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};e.exports=r;var a=t("./_stream_readable"),c=t("./_stream_writable");t("inherits")(r,a);for(var l,u=s(c.prototype),h=0;h<u.length;h++)l=u[h],r.prototype[l]||(r.prototype[l]=c.prototype[l]);Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(r.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(r.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=t,this._writableState.destroyed=t)}})}).call(this)}).call(this,t("_process"))},{"./_stream_readable":18,"./_stream_writable":20,_process:12,inherits:10}],17:[function(t,e){"use strict";function n(t){return this instanceof n?void r.call(this,t):new n(t)}e.exports=n;var r=t("./_stream_transform");t("inherits")(n,r),n.prototype._transform=function(t,e,n){n(null,t)}},{"./_stream_transform":19,inherits:10}],18:[function(t,e){(function(n,r){(function(){"use strict";function i(t){return k.from(t)}function o(t){return k.isBuffer(t)||t instanceof I}function s(t,e,n){return"function"==typeof t.prependListener?t.prependListener(e,n):void(t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n))}function a(e,n,r){R=R||t("./_stream_duplex"),e=e||{},"boolean"!=typeof r&&(r=n instanceof R),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=H(this,e,"readableHighWaterMark",r),this.buffer=new B,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(!N&&(N=t("string_decoder/").StringDecoder),this.decoder=new N(e.encoding),this.encoding=e.encoding)}function c(e){if(R=R||t("./_stream_duplex"),!(this instanceof c))return new c(e);var n=this instanceof R;this._readableState=new a(e,this,n),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),L.call(this)}function l(t,e,n,r,o){P("readableAddChunk",e);var s,a=t._readableState;if(null===e)a.reading=!1,p(t,a);else if(o||(s=h(a,e)),s)Y(t,s);else if(a.objectMode||e&&0<e.length)if("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===k.prototype||(e=i(e)),r)a.endEmitted?Y(t,new X):u(t,a,e,!0);else if(a.ended)Y(t,new W);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!n?(e=a.decoder.write(e),a.objectMode||0!==e.length?u(t,a,e,!1):v(t,a)):u(t,a,e,!1)}else r||(a.reading=!1,v(t,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function u(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",n)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&m(t)),v(t,e)}function h(t,e){var n;return o(e)||"string"==typeof e||void 0===e||t.objectMode||(n=new G("chunk",["string","Buffer","Uint8Array"],e)),n}function d(t){return 1073741824<=t?t=1073741824:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function f(t,e){return 0>=t||0===e.length&&e.ended?0:e.objectMode?1:t===t?(t>e.highWaterMark&&(e.highWaterMark=d(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0)):e.flowing&&e.length?e.buffer.head.data.length:e.length}function p(t,e){if(P("onEofChunk"),!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.sync?m(t):(e.needReadable=!1,!e.emittedReadable&&(e.emittedReadable=!0,g(t)))}}function m(t){var e=t._readableState;P("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(P("emitReadable",e.flowing),e.emittedReadable=!0,n.nextTick(g,t))}function g(t){var e=t._readableState;P("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,S(t)}function v(t,e){e.readingMore||(e.readingMore=!0,n.nextTick(_,t,e))}function _(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var n=e.length;if(P("maybeReadMore read 0"),t.read(0),n===e.length)break}e.readingMore=!1}function y(t){return function(){var e=t._readableState;P("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&O(t,"data")&&(e.flowing=!0,S(t))}}function b(t){var e=t._readableState;e.readableListening=0<t.listenerCount("readable"),e.resumeScheduled&&!e.paused?e.flowing=!0:0<t.listenerCount("data")&&t.resume()}function w(t){P("readable nexttick read 0"),t.read(0)}function x(t,e){e.resumeScheduled||(e.resumeScheduled=!0,n.nextTick(E,t,e))}function E(t,e){P("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),S(t),e.flowing&&!e.reading&&t.read(0)}function S(t){var e=t._readableState;for(P("flow",e.flowing);e.flowing&&null!==t.read(););}function M(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):n=e.buffer.consume(t,e.decoder),n);var n}function T(t){var e=t._readableState;P("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,n.nextTick(A,e,t))}function A(t,e){if(P("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var n=e._writableState;(!n||n.autoDestroy&&n.finished)&&e.destroy()}}function C(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}var R;e.exports=c,c.ReadableState=a;t("events").EventEmitter;var P,O=function(t,e){return t.listeners(e).length},L=t("./internal/streams/stream"),k=t("buffer").Buffer,I=r.Uint8Array||function(){},D=t("util");P=D&&D.debuglog?D.debuglog("stream"):function(){};var N,U,F,B=t("./internal/streams/buffer_list"),z=t("./internal/streams/destroy"),j=t("./internal/streams/state"),H=j.getHighWaterMark,V=t("../errors").codes,G=V.ERR_INVALID_ARG_TYPE,W=V.ERR_STREAM_PUSH_AFTER_EOF,q=V.ERR_METHOD_NOT_IMPLEMENTED,X=V.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;t("inherits")(c,L);var Y=z.errorOrDestroy,$=["error","close","destroy","pause","resume"];Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),c.prototype.destroy=z.destroy,c.prototype._undestroy=z.undestroy,c.prototype._destroy=function(t,e){e(t)},c.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=k.from(t,e),e=""),n=!0),l(this,t,e,!1,n)},c.prototype.unshift=function(t){return l(this,t,null,!0,!1)},c.prototype.isPaused=function(){return!1===this._readableState.flowing},c.prototype.setEncoding=function(e){N||(N=t("string_decoder/").StringDecoder);var n=new N(e);this._readableState.decoder=n,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=n.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this},c.prototype.read=function(t){P("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0===e.highWaterMark?0<e.length:e.length>=e.highWaterMark)||e.ended))return P("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?T(this):m(this),null;if(t=f(t,e),0===t&&e.ended)return 0===e.length&&T(this),null;var r,i=e.needReadable;return P("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&(i=!0,P("length less than watermark",i)),e.ended||e.reading?(i=!1,P("reading or ended",i)):i&&(P("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,!e.reading&&(t=f(n,e))),r=0<t?M(t,e):null,null===r?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(!e.ended&&(e.needReadable=!0),n!==t&&e.ended&&T(this)),null!==r&&this.emit("data",r),r},c.prototype._read=function(){Y(this,new q("_read()"))},c.prototype.pipe=function(t,e){function r(t,e){P("onunpipe"),t===d&&e&&!1===e.hasUnpiped&&(e.hasUnpiped=!0,o())}function i(){P("onend"),t.end()}function o(){P("cleanup"),t.removeListener("close",l),t.removeListener("finish",u),t.removeListener("drain",g),t.removeListener("error",c),t.removeListener("unpipe",r),d.removeListener("end",i),d.removeListener("end",h),d.removeListener("data",a),v=!0,f.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&g()}function a(e){P("ondata");var n=t.write(e);P("dest.write",n),!1===n&&((1===f.pipesCount&&f.pipes===t||1<f.pipesCount&&-1!==C(f.pipes,t))&&!v&&(P("false write response, pause",f.awaitDrain),f.awaitDrain++),d.pause())}function c(e){P("onerror",e),h(),t.removeListener("error",c),0===O(t,"error")&&Y(t,e)}function l(){t.removeListener("finish",u),h()}function u(){P("onfinish"),t.removeListener("close",l),h()}function h(){P("unpipe"),d.unpipe(t)}var d=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=t;break;case 1:f.pipes=[f.pipes,t];break;default:f.pipes.push(t)}f.pipesCount+=1,P("pipe count=%d opts=%j",f.pipesCount,e);var p=(!e||!1!==e.end)&&t!==n.stdout&&t!==n.stderr,m=p?i:h;f.endEmitted?n.nextTick(m):d.once("end",m),t.on("unpipe",r);var g=y(d);t.on("drain",g);var v=!1;return d.on("data",a),s(t,"error",c),t.once("close",l),t.once("finish",u),t.emit("pipe",d),f.flowing||(P("pipe resume"),d.resume()),t},c.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=C(e.pipes,t);return-1===s||(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},c.prototype.on=function(t,e){var r=L.prototype.on.call(this,t,e),i=this._readableState;return"data"===t?(i.readableListening=0<this.listenerCount("readable"),!1!==i.flowing&&this.resume()):"readable"==t&&!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,P("on readable",i.length,i.reading),i.length?m(this):!i.reading&&n.nextTick(w,this)),r},c.prototype.addListener=c.prototype.on,c.prototype.removeListener=function(t,e){var r=L.prototype.removeListener.call(this,t,e);return"readable"===t&&n.nextTick(b,this),r},c.prototype.removeAllListeners=function(t){var e=L.prototype.removeAllListeners.apply(this,arguments);return("readable"===t||void 0===t)&&n.nextTick(b,this),e},c.prototype.resume=function(){var t=this._readableState;return t.flowing||(P("resume"),t.flowing=!t.readableListening,x(this,t)),t.paused=!1,this},c.prototype.pause=function(){return P("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(P("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},c.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var i in t.on("end",(function(){if(P("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){if(P("wrapped data"),n.decoder&&(i=n.decoder.write(i)),(!n.objectMode||null!==i&&void 0!==i)&&(n.objectMode||i&&i.length)){var o=e.push(i);o||(r=!0,t.pause())}})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<$.length;o++)t.on($[o],this.emit.bind(this,$[o]));return this._read=function(e){P("wrapped _read",e),r&&(r=!1,t.resume())},this},"function"==typeof Symbol&&(c.prototype[Symbol.asyncIterator]=function(){return void 0===U&&(U=t("./internal/streams/async_iterator")),U(this)}),Object.defineProperty(c.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(c.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(c.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),c._fromList=M,Object.defineProperty(c.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(c.from=function(e,n){return void 0===F&&(F=t("./internal/streams/from")),F(c,e,n)})}).call(this)}).call(this,t("_process"),"undefined"==typeof n.g?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:n.g)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/async_iterator":21,"./internal/streams/buffer_list":22,"./internal/streams/destroy":23,"./internal/streams/from":25,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,events:7,inherits:10,"string_decoder/":31,util:2}],19:[function(t,e){"use strict";function n(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new c);n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function r(t){return this instanceof r?(h.call(this,t),this._transformState={afterTransform:n.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),void this.on("prefinish",i)):new r(t)}function i(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?o(this,null,null):this._flush((function(e,n){o(t,e,n)}))}function o(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new u;if(t._transformState.transforming)throw new l;return t.push(null)}e.exports=r;var s=t("../errors").codes,a=s.ERR_METHOD_NOT_IMPLEMENTED,c=s.ERR_MULTIPLE_CALLBACK,l=s.ERR_TRANSFORM_ALREADY_TRANSFORMING,u=s.ERR_TRANSFORM_WITH_LENGTH_0,h=t("./_stream_duplex");t("inherits")(r,h),r.prototype.push=function(t,e){return this._transformState.needTransform=!1,h.prototype.push.call(this,t,e)},r.prototype._transform=function(t,e,n){n(new a("_transform()"))},r.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},r.prototype._read=function(){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},r.prototype._destroy=function(t,e){h.prototype._destroy.call(this,t,(function(t){e(t)}))}},{"../errors":15,"./_stream_duplex":16,inherits:10}],20:[function(t,e){(function(n,r){(function(){"use strict";function i(t){var e=this;this.next=null,this.entry=null,this.finish=function(){T(e,t)}}function o(t){return O.from(t)}function s(t){return O.isBuffer(t)||t instanceof L}function a(){}function c(e,n,r){A=A||t("./_stream_duplex"),e=e||{},"boolean"!=typeof r&&(r=n instanceof A),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=D(this,e,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===e.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){v(n,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function l(e){A=A||t("./_stream_duplex");var n=this instanceof A;return n||C.call(l,this)?(this._writableState=new c(e,this,n),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),void P.call(this)):new l(e)}function u(t,e){var r=new V;W(t,r),n.nextTick(e,r)}function h(t,e,r,i){var o;return null===r?o=new H:"string"!=typeof r&&!e.objectMode&&(o=new U("chunk",["string","Buffer"],r)),!o||(W(t,o),n.nextTick(i,o),!1)}function d(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=O.from(e,n)),e}function f(t,e,n,r,i,o){if(!n){var s=d(e,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=e.objectMode?1:r.length;e.length+=a;var c=e.length<e.highWaterMark;if(c||(e.needDrain=!0),e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else p(t,e,!1,a,r,i,o);return c}function p(t,e,n,r,i,o,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new j("write")):n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function m(t,e,r,i,o){--e.pendingcb,r?(n.nextTick(o,i),n.nextTick(S,t,e),t._writableState.errorEmitted=!0,W(t,i)):(o(i),t._writableState.errorEmitted=!0,W(t,i),S(t,e))}function g(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function v(t,e){var r=t._writableState,i=r.sync,o=r.writecb;if("function"!=typeof o)throw new B;if(g(r),e)m(t,r,i,e,o);else{var s=w(r)||t.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||b(t,r),i?n.nextTick(_,t,r,s,o):_(t,r,s,o)}}function _(t,e,n,r){n||y(t,e),e.pendingcb--,r(),S(t,e)}function y(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function b(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,o=Array(r),s=e.corkedRequestsFree;s.entry=n;for(var a=0,c=!0;n;)o[a]=n,n.isBuf||(c=!1),n=n.next,a+=1;o.allBuffers=c,p(t,e,!0,e.length,o,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new i(e),e.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,u=n.encoding,h=n.callback,d=e.objectMode?1:l.length;if(p(t,e,!1,d,l,u,h),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function w(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function x(t,e){t._final((function(n){e.pendingcb--,n&&W(t,n),e.prefinished=!0,t.emit("prefinish"),S(t,e)}))}function E(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,n.nextTick(x,t,e)))}function S(t,e){var n=w(e);if(n&&(E(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var r=t._readableState;(!r||r.autoDestroy&&r.endEmitted)&&t.destroy()}return n}function M(t,e,r){e.ending=!0,S(t,e),r&&(e.finished?n.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function T(t,e,n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree.next=t}var A;e.exports=l,l.WritableState=c;var C,R={deprecate:t("util-deprecate")},P=t("./internal/streams/stream"),O=t("buffer").Buffer,L=r.Uint8Array||function(){},k=t("./internal/streams/destroy"),I=t("./internal/streams/state"),D=I.getHighWaterMark,N=t("../errors").codes,U=N.ERR_INVALID_ARG_TYPE,F=N.ERR_METHOD_NOT_IMPLEMENTED,B=N.ERR_MULTIPLE_CALLBACK,z=N.ERR_STREAM_CANNOT_PIPE,j=N.ERR_STREAM_DESTROYED,H=N.ERR_STREAM_NULL_VALUES,V=N.ERR_STREAM_WRITE_AFTER_END,G=N.ERR_UNKNOWN_ENCODING,W=k.errorOrDestroy;t("inherits")(l,P),c.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(c.prototype,"buffer",{get:R.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(C=Function.prototype[Symbol.hasInstance],Object.defineProperty(l,Symbol.hasInstance,{value:function(t){return!!C.call(this,t)||!(this!==l)&&t&&t._writableState instanceof c}})):C=function(t){return t instanceof this},l.prototype.pipe=function(){W(this,new z)},l.prototype.write=function(t,e,n){var r=this._writableState,i=!1,c=!r.objectMode&&s(t);return c&&!O.isBuffer(t)&&(t=o(t)),"function"==typeof e&&(n=e,e=null),c?e="buffer":!e&&(e=r.defaultEncoding),"function"!=typeof n&&(n=a),r.ending?u(this,n):(c||h(this,r,t,n))&&(r.pendingcb++,i=f(this,r,c,t,e,n)),i},l.prototype.cork=function(){this._writableState.corked++},l.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&b(this,t))},l.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())))throw new G(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),l.prototype._write=function(t,e,n){n(new F("_write()"))},l.prototype._writev=null,l.prototype.end=function(t,e,n){var r=this._writableState;return"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!==t&&void 0!==t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||M(this,r,n),this},Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),l.prototype.destroy=k.destroy,l.prototype._undestroy=k.undestroy,l.prototype._destroy=function(t,e){e(t)}}).call(this)}).call(this,t("_process"),"undefined"==typeof n.g?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:n.g)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/destroy":23,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,inherits:10,"util-deprecate":32}],21:[function(t,e){(function(n){(function(){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){return{value:t,done:e}}function o(t){var e=t[u];if(null!==e){var n=t[g].read();null!==n&&(t[p]=null,t[u]=null,t[h]=null,e(i(n,!1)))}}function s(t){n.nextTick(o,t)}function a(t,e){return function(n,r){t.then((function(){return e[f]?void n(i(void 0,!0)):void e[m](n,r)}),r)}}var c,l=t("./end-of-stream"),u=Symbol("lastResolve"),h=Symbol("lastReject"),d=Symbol("error"),f=Symbol("ended"),p=Symbol("lastPromise"),m=Symbol("handlePromise"),g=Symbol("stream"),v=Object.getPrototypeOf((function(){})),_=Object.setPrototypeOf((c={get stream(){return this[g]},next:function(){var t=this,e=this[d];if(null!==e)return Promise.reject(e);if(this[f])return Promise.resolve(i(void 0,!0));if(this[g].destroyed)return new Promise((function(e,r){n.nextTick((function(){t[d]?r(t[d]):e(i(void 0,!0))}))}));var r,o=this[p];if(o)r=new Promise(a(o,this));else{var s=this[g].read();if(null!==s)return Promise.resolve(i(s,!1));r=new Promise(this[m])}return this[p]=r,r}},r(c,Symbol.asyncIterator,(function(){return this})),r(c,"return",(function(){var t=this;return new Promise((function(e,n){t[g].destroy(null,(function(t){return t?void n(t):void e(i(void 0,!0))}))}))})),c),v);e.exports=function(t){var e,n=Object.create(_,(e={},r(e,g,{value:t,writable:!0}),r(e,u,{value:null,writable:!0}),r(e,h,{value:null,writable:!0}),r(e,d,{value:null,writable:!0}),r(e,f,{value:t._readableState.endEmitted,writable:!0}),r(e,m,{value:function(t,e){var r=n[g].read();r?(n[p]=null,n[u]=null,n[h]=null,t(i(r,!1))):(n[u]=t,n[h]=e)},writable:!0}),e));return n[p]=null,l(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=n[h];return null!==e&&(n[p]=null,n[u]=null,n[h]=null,e(t)),void(n[d]=t)}var r=n[u];null!==r&&(n[p]=null,n[u]=null,n[h]=null,r(i(void 0,!0))),n[f]=!0})),t.on("readable",s.bind(null,n)),n}}).call(this)}).call(this,t("_process"))},{"./end-of-stream":24,_process:12}],22:[function(t,e){"use strict";function n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function r(t){for(var e,r=1;r<arguments.length;r++)e=null==arguments[r]?{}:arguments[r],r%2?n(Object(e),!0).forEach((function(n){i(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):n(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}));return t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function a(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function c(t,e,n){u.prototype.copy.call(t,e,n)}var l=t("buffer"),u=l.Buffer,h=t("util"),d=h.inspect,f=d&&d.custom||"inspect";e.exports=function(){function t(){o(this,t),this.head=null,this.tail=null,this.length=0}return a(t,[{key:"push",value:function(t){var e={data:t,next:null};0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n}},{key:"concat",value:function(t){if(0===this.length)return u.alloc(0);for(var e=u.allocUnsafe(t>>>0),n=this.head,r=0;n;)c(n.data,e,r),r+=n.data.length,n=n.next;return e}},{key:"consume",value:function(t,e){var n;return t<this.head.data.length?(n=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):n=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,n=1,r=e.data;for(t-=r.length;e=e.next;){var i=e.data,o=t>i.length?i.length:t;if(r+=o===i.length?i:i.slice(0,t),t-=o,0===t){o===i.length?(++n,this.head=e.next?e.next:this.tail=null):(this.head=e,e.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(t){var e=u.allocUnsafe(t),n=this.head,r=1;for(n.data.copy(e),t-=n.data.length;n=n.next;){var i=n.data,o=t>i.length?i.length:t;if(i.copy(e,e.length-t,0,o),t-=o,0===t){o===i.length?(++r,this.head=n.next?n.next:this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,e}},{key:f,value:function(t,e){return d(this,r({},e,{depth:0,customInspect:!1}))}}]),t}()},{buffer:3,util:2}],23:[function(t,e){(function(t){(function(){"use strict";function n(t,e){i(t,e),r(t)}function r(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function i(t,e){t.emit("error",e)}e.exports={destroy:function(e,o){var s=this,a=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return a||c?(o?o(e):e&&(this._writableState?!this._writableState.errorEmitted&&(this._writableState.errorEmitted=!0,t.nextTick(i,this,e)):t.nextTick(i,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!o&&e?s._writableState?s._writableState.errorEmitted?t.nextTick(r,s):(s._writableState.errorEmitted=!0,t.nextTick(n,s,e)):t.nextTick(n,s,e):o?(t.nextTick(r,s),o(e)):t.nextTick(r,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var n=t._readableState,r=t._writableState;n&&n.autoDestroy||r&&r.autoDestroy?t.destroy(e):t.emit("error",e)}}}).call(this)}).call(this,t("_process"))},{_process:12}],24:[function(t,e){"use strict";function n(t){var e=!1;return function(){if(!e){e=!0;for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(this,r)}}}function r(){}function i(t){return t.setHeader&&"function"==typeof t.abort}function o(t,e,a){if("function"==typeof e)return o(t,null,e);e||(e={}),a=n(a||r);var c=e.readable||!1!==e.readable&&t.readable,l=e.writable||!1!==e.writable&&t.writable,u=function(){t.writable||d()},h=t._writableState&&t._writableState.finished,d=function(){l=!1,h=!0,c||a.call(t)},f=t._readableState&&t._readableState.endEmitted,p=function(){c=!1,f=!0,l||a.call(t)},m=function(e){a.call(t,e)},g=function(){var e;return c&&!f?(t._readableState&&t._readableState.ended||(e=new s),a.call(t,e)):l&&!h?(t._writableState&&t._writableState.ended||(e=new s),a.call(t,e)):void 0},v=function(){t.req.on("finish",d)};return i(t)?(t.on("complete",d),t.on("abort",g),t.req?v():t.on("request",v)):l&&!t._writableState&&(t.on("end",u),t.on("close",u)),t.on("end",p),t.on("finish",d),!1!==e.error&&t.on("error",m),t.on("close",g),function(){t.removeListener("complete",d),t.removeListener("abort",g),t.removeListener("request",v),t.req&&t.req.removeListener("finish",d),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",d),t.removeListener("end",p),t.removeListener("error",m),t.removeListener("close",g)}}var s=t("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;e.exports=o},{"../../../errors":15}],25:[function(t,e){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],26:[function(t,e){"use strict";function n(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}function r(t){if(t)throw t}function i(t){return t.setHeader&&"function"==typeof t.abort}function o(e,r,o,s){s=n(s);var a=!1;e.on("close",(function(){a=!0})),void 0===l&&(l=t("./end-of-stream")),l(e,{readable:r,writable:o},(function(t){return t?s(t):(a=!0,void s())}));var c=!1;return function(t){if(!a)return c?void 0:(c=!0,i(e)?e.abort():"function"==typeof e.destroy?e.destroy():void s(t||new d("pipe")))}}function s(t){t()}function a(t,e){return t.pipe(e)}function c(t){return t.length&&"function"==typeof t[t.length-1]?t.pop():r}var l,u=t("../../../errors").codes,h=u.ERR_MISSING_ARGS,d=u.ERR_STREAM_DESTROYED;e.exports=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=c(e);if(Array.isArray(e[0])&&(e=e[0]),2>e.length)throw new h("streams");var i,l=e.map((function(t,n){var a=n<e.length-1;return o(t,a,0<n,(function(t){i||(i=t),t&&l.forEach(s),a||(l.forEach(s),r(i))}))}));return e.reduce(a)}},{"../../../errors":15,"./end-of-stream":24}],27:[function(e,n){"use strict";function r(t,e,n){return null==t.highWaterMark?e?t[n]:null:t.highWaterMark}var i=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;n.exports={getHighWaterMark:function(e,n,o,s){var a=r(n,s,o);if(null!=a){if(!isFinite(a)||t(a)!==a||0>a){var c=s?o:"highWaterMark";throw new i(c,a)}return t(a)}return e.objectMode?16:16384}}},{"../../../errors":15}],28:[function(t,e){e.exports=t("events").EventEmitter},{events:7}],29:[function(t,e,n){n=e.exports=t("./lib/_stream_readable.js"),n.Stream=n,n.Readable=n,n.Writable=t("./lib/_stream_writable.js"),n.Duplex=t("./lib/_stream_duplex.js"),n.Transform=t("./lib/_stream_transform.js"),n.PassThrough=t("./lib/_stream_passthrough.js"),n.finished=t("./lib/internal/streams/end-of-stream.js"),n.pipeline=t("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":16,"./lib/_stream_passthrough.js":17,"./lib/_stream_readable.js":18,"./lib/_stream_transform.js":19,"./lib/_stream_writable.js":20,"./lib/internal/streams/end-of-stream.js":24,"./lib/internal/streams/pipeline.js":26}],30:[function(t,e,n){function r(t,e){for(var n in t)e[n]=t[n]}function i(t,e,n){return s(t,e,n)}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var o=t("buffer"),s=o.Buffer;s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?e.exports=o:(r(o,n),n.Buffer=i),i.prototype=Object.create(s.prototype),r(s,i),i.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return s(t,e,n)},i.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=s(t);return void 0===e?r.fill(0):"string"==typeof n?r.fill(e,n):r.fill(e),r},i.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return s(t)},i.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return o.SlowBuffer(t)}},{buffer:3}],31:[function(t,e,n){"use strict";function r(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function i(t){var e=r(t);if("string"!=typeof e&&(g.isEncoding===v||!v(t)))throw new Error("Unknown encoding: "+t);return e||t}function o(t){var e;switch(this.encoding=i(t),this.encoding){case"utf16le":this.text=u,this.end=h,e=4;break;case"utf8":this.fillLast=l,e=4;break;case"base64":this.text=d,this.end=f,e=3;break;default:return this.write=p,void(this.end=m)}this.lastNeed=0,this.lastTotal=0,this.lastChar=g.allocUnsafe(e)}function s(t){return 127>=t?0:6==t>>5?2:14==t>>4?3:30==t>>3?4:2==t>>6?-1:-2}function a(t,e,n){var r=e.length-1;if(r<n)return 0;var i=s(e[r]);return 0<=i?(0<i&&(t.lastNeed=i-1),i):--r<n||-2===i?0:(i=s(e[r]),0<=i?(0<i&&(t.lastNeed=i-2),i):--r<n||-2===i?0:(i=s(e[r]),0<=i?(0<i&&(2===i?i=0:t.lastNeed=i-3),i):0))}function c(t,e){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(1<t.lastNeed&&1<e.length){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(2<t.lastNeed&&2<e.length&&128!=(192&e[2]))return t.lastNeed=2,"�"}}function l(t){var e=this.lastTotal-this.lastNeed,n=c(this,t,e);return void 0===n?this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length)):n}function u(t,e){if(0==(t.length-e)%2){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(55296<=r&&56319>=r)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function h(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function d(t,e){var n=(t.length-e)%3;return 0==n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1==n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function f(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function p(t){return t.toString(this.encoding)}function m(t){return t&&t.length?this.write(t):""}var g=t("safe-buffer").Buffer,v=g.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};n.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(e=this.fillLast(t),void 0===e)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},o.prototype.text=function(t,e){var n=a(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){return this.lastNeed<=t.length?(t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),void(this.lastNeed-=t.length))}},{"safe-buffer":30}],32:[function(t,e){(function(t){(function(){function n(e){try{if(!t.localStorage)return!1}catch(t){return!1}var n=t.localStorage[e];return null!=n&&"true"===(n+"").toLowerCase()}e.exports=function(t,e){function r(){if(!i){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),i=!0}return t.apply(this,arguments)}if(n("noDeprecation"))return t;var i=!1;return r}}).call(this)}).call(this,"undefined"==typeof n.g?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:n.g)},{}],"/":[function(t,e){function n(t){return t.replace(/a=ice-options:trickle\s\n/g,"")}function r(t){console.warn(t)}/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const i=t("debug")("simple-peer"),o=t("get-browser-rtc"),s=t("randombytes"),a=t("readable-stream"),c=t("queue-microtask"),l=t("err-code"),{Buffer:u}=t("buffer"),h=65536;class d extends a.Duplex{constructor(t){if(t=Object.assign({allowHalfOpen:!1},t),super(t),this._id=s(4).toString("hex").slice(0,7),this._debug("new peer %o",t),this.channelName=t.initiator?t.channelName||s(20).toString("hex"):null,this.initiator=t.initiator||!1,this.channelConfig=t.channelConfig||d.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},d.config,t.config),this.offerOptions=t.offerOptions||{},this.answerOptions=t.answerOptions||{},this.sdpTransform=t.sdpTransform||(t=>t),this.streams=t.streams||(t.stream?[t.stream]:[]),this.trickle=void 0===t.trickle||t.trickle,this.allowHalfTrickle=void 0!==t.allowHalfTrickle&&t.allowHalfTrickle,this.iceCompleteTimeout=t.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=t.wrtc&&"object"==typeof t.wrtc?t.wrtc:o(),!this._wrtc)throw"undefined"==typeof window?l(new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"),"ERR_WEBRTC_SUPPORT"):l(new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(t){return void this.destroy(l(t,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc="number"==typeof this._pc._peerConnectionId,this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=t=>{this._onIceCandidate(t)},"object"==typeof this._pc.peerIdentity&&this._pc.peerIdentity.catch((t=>{this.destroy(l(t,"ERR_PC_PEER_IDENTITY"))})),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=t=>{this._setupData(t)},this.streams&&this.streams.forEach((t=>{this.addStream(t)})),this._pc.ontrack=t=>{this._onTrack(t)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&"open"===this._channel.readyState}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(t){if(!this.destroying){if(this.destroyed)throw l(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if("string"==typeof t)try{t=JSON.parse(t)}catch(e){t={}}this._debug("signal()"),t.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),t.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(t.transceiverRequest.kind,t.transceiverRequest.init)),t.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(t.candidate):this._pendingCandidates.push(t.candidate)),t.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(t)).then((()=>{this.destroyed||(this._pendingCandidates.forEach((t=>{this._addIceCandidate(t)})),this._pendingCandidates=[],"offer"===this._pc.remoteDescription.type&&this._createAnswer())})).catch((t=>{this.destroy(l(t,"ERR_SET_REMOTE_DESCRIPTION"))})),t.sdp||t.candidate||t.renegotiate||t.transceiverRequest||this.destroy(l(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(t){const e=new this._wrtc.RTCIceCandidate(t);this._pc.addIceCandidate(e).catch((t=>{!e.address||e.address.endsWith(".local")?r("Ignoring unsupported ICE candidate."):this.destroy(l(t,"ERR_ADD_ICE_CANDIDATE"))}))}send(t){if(!this.destroying){if(this.destroyed)throw l(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(t)}}addTransceiver(t,e){if(!this.destroying){if(this.destroyed)throw l(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(t,e),this._needsNegotiation()}catch(t){this.destroy(l(t,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:t,init:e}})}}addStream(t){if(!this.destroying){if(this.destroyed)throw l(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),t.getTracks().forEach((e=>{this.addTrack(e,t)}))}}addTrack(t,e){if(this.destroying)return;if(this.destroyed)throw l(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const n=this._senderMap.get(t)||new Map;let r=n.get(e);if(r)throw r.removed?l(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):l(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED");r=this._pc.addTrack(t,e),n.set(e,r),this._senderMap.set(t,n),this._needsNegotiation()}replaceTrack(t,e,n){if(this.destroying)return;if(this.destroyed)throw l(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const r=this._senderMap.get(t),i=r?r.get(n):null;if(!i)throw l(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");e&&this._senderMap.set(e,r),null==i.replaceTrack?this.destroy(l(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK")):i.replaceTrack(e)}removeTrack(t,e){if(this.destroying)return;if(this.destroyed)throw l(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const n=this._senderMap.get(t),r=n?n.get(e):null;if(!r)throw l(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{r.removed=!0,this._pc.removeTrack(r)}catch(t){"NS_ERROR_UNEXPECTED"===t.name?this._sendersAwaitingStable.push(r):this.destroy(l(t,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(t){if(!this.destroying){if(this.destroyed)throw l(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),t.getTracks().forEach((e=>{this.removeTrack(e,t)}))}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,c((()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1})))}negotiate(){if(!this.destroying){if(this.destroyed)throw l(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout((()=>{this._createOffer()}),0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(t){this._destroy(t,(()=>{}))}_destroy(t,e){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",t&&(t.message||t)),c((()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",t&&(t.message||t)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(t){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(t){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,t&&this.emit("error",t),this.emit("close"),e()})))}_setupData(t){if(!t.channel)return this.destroy(l(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=t.channel,this._channel.binaryType="arraybuffer","number"==typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=h),this.channelName=this._channel.label,this._channel.onmessage=t=>{this._onChannelMessage(t)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=t=>{const e=t.error instanceof Error?t.error:new Error(`Datachannel error: ${t.message} ${t.filename}:${t.lineno}:${t.colno}`);this.destroy(l(e,"ERR_DATA_CHANNEL"))};let e=!1;this._closingInterval=setInterval((()=>{this._channel&&"closing"===this._channel.readyState?(e&&this._onChannelClose(),e=!0):e=!1}),5e3)}_read(){}_write(t,e,n){if(this.destroyed)return n(l(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(t)}catch(t){return this.destroy(l(t,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>h?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=t,this._cb=n}_onFinish(){if(!this.destroyed){const t=()=>{setTimeout((()=>this.destroy()),1e3)};this._connected?t():this.once("connect",t)}}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout((()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))}),this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then((t=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(t.sdp=n(t.sdp)),t.sdp=this.sdpTransform(t.sdp);const e=()=>{if(!this.destroyed){const e=this._pc.localDescription||t;this._debug("signal"),this.emit("signal",{type:e.type,sdp:e.sdp})}};this._pc.setLocalDescription(t).then((()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?e():this.once("_iceComplete",e))})).catch((t=>{this.destroy(l(t,"ERR_SET_LOCAL_DESCRIPTION"))}))})).catch((t=>{this.destroy(l(t,"ERR_CREATE_OFFER"))}))}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach((t=>{t.mid||!t.sender.track||t.requested||(t.requested=!0,this.addTransceiver(t.sender.track.kind))}))}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then((t=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(t.sdp=n(t.sdp)),t.sdp=this.sdpTransform(t.sdp);const e=()=>{if(!this.destroyed){const e=this._pc.localDescription||t;this._debug("signal"),this.emit("signal",{type:e.type,sdp:e.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(t).then((()=>{this.destroyed||(this.trickle||this._iceComplete?e():this.once("_iceComplete",e))})).catch((t=>{this.destroy(l(t,"ERR_SET_LOCAL_DESCRIPTION"))}))})).catch((t=>{this.destroy(l(t,"ERR_CREATE_ANSWER"))}))}_onConnectionStateChange(){this.destroyed||"failed"===this._pc.connectionState&&this.destroy(l(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const t=this._pc.iceConnectionState,e=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",t,e),this.emit("iceStateChange",t,e),("connected"===t||"completed"===t)&&(this._pcReady=!0,this._maybeReady()),"failed"===t&&this.destroy(l(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),"closed"===t&&this.destroy(l(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(t){const e=t=>("[object Array]"===Object.prototype.toString.call(t.values)&&t.values.forEach((e=>{Object.assign(t,e)})),t);0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then((n=>{const r=[];n.forEach((t=>{r.push(e(t))})),t(null,r)}),(e=>t(e))):0<this._pc.getStats.length?this._pc.getStats((n=>{if(this.destroyed)return;const r=[];n.result().forEach((t=>{const n={};t.names().forEach((e=>{n[e]=t.stat(e)})),n.id=t.id,n.type=t.type,n.timestamp=t.timestamp,r.push(e(n))})),t(null,r)}),(e=>t(e))):t(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const t=()=>{this.destroyed||this.getStats(((e,n)=>{if(this.destroyed)return;e&&(n=[]);const r={},i={},o={};let s=!1;n.forEach((t=>{("remotecandidate"===t.type||"remote-candidate"===t.type)&&(r[t.id]=t),("localcandidate"===t.type||"local-candidate"===t.type)&&(i[t.id]=t),("candidatepair"===t.type||"candidate-pair"===t.type)&&(o[t.id]=t)}));const a=t=>{s=!0;let e=i[t.localCandidateId];e&&(e.ip||e.address)?(this.localAddress=e.ip||e.address,this.localPort=+e.port):e&&e.ipAddress?(this.localAddress=e.ipAddress,this.localPort=+e.portNumber):"string"==typeof t.googLocalAddress&&(e=t.googLocalAddress.split(":"),this.localAddress=e[0],this.localPort=+e[1]),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let n=r[t.remoteCandidateId];n&&(n.ip||n.address)?(this.remoteAddress=n.ip||n.address,this.remotePort=+n.port):n&&n.ipAddress?(this.remoteAddress=n.ipAddress,this.remotePort=+n.portNumber):"string"==typeof t.googRemoteAddress&&(n=t.googRemoteAddress.split(":"),this.remoteAddress=n[0],this.remotePort=+n[1]),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(n.forEach((t=>{"transport"===t.type&&t.selectedCandidatePairId&&a(o[t.selectedCandidatePairId]),("googCandidatePair"===t.type&&"true"===t.googActiveConnection||("candidatepair"===t.type||"candidate-pair"===t.type)&&t.selected)&&a(t)})),s||Object.keys(o).length&&!Object.keys(i).length){if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(t){return this.destroy(l(t,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const e=this._cb;this._cb=null,e(null)}"number"!=typeof this._channel.bufferedAmountLowThreshold&&(this._interval=setInterval((()=>this._onInterval()),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}else setTimeout(t,100)}))};t()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>h)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||("stable"===this._pc.signalingState&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach((t=>{this._pc.removeTrack(t),this._queuedNegotiation=!0})),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(t){this.destroyed||(t.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:t.candidate.candidate,sdpMLineIndex:t.candidate.sdpMLineIndex,sdpMid:t.candidate.sdpMid}}):!t.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),t.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(t){if(this.destroyed)return;let e=t.data;e instanceof ArrayBuffer&&(e=u.from(e)),this.push(e)}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const t=this._cb;this._cb=null,t(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(t){this.destroyed||t.streams.forEach((e=>{this._debug("on track"),this.emit("track",t.track,e),this._remoteTracks.push({track:t.track,stream:e}),this._remoteStreams.some((t=>t.id===e.id))||(this._remoteStreams.push(e),c((()=>{this._debug("on stream"),this.emit("stream",e)})))}))}_debug(){const t=[].slice.call(arguments);t[0]="["+this._id+"] "+t[0],i.apply(null,t)}}d.WEBRTC_SUPPORT=!!o(),d.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},d.channelConfig={},e.exports=d},{buffer:3,debug:4,"err-code":6,"get-browser-rtc":8,"queue-microtask":13,randombytes:14,"readable-stream":29}]},{},[])("/")}))},89:function(t,e){"use strict";e.Z=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n}},6866:function(t,e,n){"use strict";n.r(e),n.d(e,{BaseTransition:function(){return r.P$},BaseTransitionPropsValidators:function(){return r.nJ},Comment:function(){return r.sv},EffectScope:function(){return r.Bj},Fragment:function(){return r.HY},KeepAlive:function(){return r.Ob},ReactiveEffect:function(){return r.qq},Static:function(){return r.qG},Suspense:function(){return r.n4},Teleport:function(){return r.lR},Text:function(){return r.xv},Transition:function(){return r.uT},TransitionGroup:function(){return r.W3},VueElement:function(){return r.a2},assertNumber:function(){return r.Wu},callWithAsyncErrorHandling:function(){return r.$d},callWithErrorHandling:function(){return r.KU},camelize:function(){return r._A},capitalize:function(){return r.kC},cloneVNode:function(){return r.Ho},compatUtils:function(){return r.ry},compile:function(){return i},computed:function(){return r.Fl},createApp:function(){return r.ri},createBlock:function(){return r.j4},createCommentVNode:function(){return r.kq},createElementBlock:function(){return r.iD},createElementVNode:function(){return r._},createHydrationRenderer:function(){return r.Eo},createPropsRestProxy:function(){return r.p1},createRenderer:function(){return r.Us},createSSRApp:function(){return r.vr},createSlots:function(){return r.Nv},createStaticVNode:function(){return r.uE},createTextVNode:function(){return r.Uk},createVNode:function(){return r.Wm},customRef:function(){return r.ZM},defineAsyncComponent:function(){return r.RC},defineComponent:function(){return r.aZ},defineCustomElement:function(){return r.MW},defineEmits:function(){return r.Bz},defineExpose:function(){return r.WY},defineModel:function(){return r.Gn},defineOptions:function(){return r.Yu},defineProps:function(){return r.yb},defineSSRCustomElement:function(){return r.Ah},defineSlots:function(){return r.Wl},devtools:function(){return r.mW},effect:function(){return r.cE},effectScope:function(){return r.B},getCurrentInstance:function(){return r.FN},getCurrentScope:function(){return r.nZ},getTransitionRawChildren:function(){return r.Q6},guardReactiveProps:function(){return r.F4},h:function(){return r.h},handleError:function(){return r.S3},hasInjectionContext:function(){return r.EM},hydrate:function(){return r.ZB},initCustomFormatter:function(){return r.Mr},initDirectivesForSSR:function(){return r.Nd},inject:function(){return r.f3},isMemoSame:function(){return r.nQ},isProxy:function(){return r.X3},isReactive:function(){return r.PG},isReadonly:function(){return r.$y},isRef:function(){return r.dq},isRuntimeOnly:function(){return r.of},isShallow:function(){return r.yT},isVNode:function(){return r.lA},markRaw:function(){return r.Xl},mergeDefaults:function(){return r.u_},mergeModels:function(){return r.Vf},mergeProps:function(){return r.dG},nextTick:function(){return r.Y3},normalizeClass:function(){return r.C_},normalizeProps:function(){return r.vs},normalizeStyle:function(){return r.j5},onActivated:function(){return r.dl},onBeforeMount:function(){return r.wF},onBeforeUnmount:function(){return r.Jd},onBeforeUpdate:function(){return r.Xn},onDeactivated:function(){return r.se},onErrorCaptured:function(){return r.d1},onMounted:function(){return r.bv},onRenderTracked:function(){return r.bT},onRenderTriggered:function(){return r.Yq},onScopeDispose:function(){return r.EB},onServerPrefetch:function(){return r.vl},onUnmounted:function(){return r.SK},onUpdated:function(){return r.ic},openBlock:function(){return r.wg},popScopeId:function(){return r.Cn},provide:function(){return r.JJ},proxyRefs:function(){return r.WL},pushScopeId:function(){return r.dD},queuePostFlushCb:function(){return r.qb},reactive:function(){return r.qj},readonly:function(){return r.OT},ref:function(){return r.iH},registerRuntimeCompiler:function(){return r.Y1},render:function(){return r.sY},renderList:function(){return r.Ko},renderSlot:function(){return r.WI},resolveComponent:function(){return r.up},resolveDirective:function(){return r.Q2},resolveDynamicComponent:function(){return r.LL},resolveFilter:function(){return r.eq},resolveTransitionHooks:function(){return r.U2},setBlockTracking:function(){return r.qZ},setDevtoolsHook:function(){return r.ec},setTransitionHooks:function(){return r.nK},shallowReactive:function(){return r.Um},shallowReadonly:function(){return r.YS},shallowRef:function(){return r.XI},ssrContextKey:function(){return r.Uc},ssrUtils:function(){return r.G},stop:function(){return r.sT},toDisplayString:function(){return r.zw},toHandlerKey:function(){return r.hR},toHandlers:function(){return r.mx},toRaw:function(){return r.IU},toRef:function(){return r.Vh},toRefs:function(){return r.BK},toValue:function(){return r.Tn},transformVNodeArgs:function(){return r.C3},triggerRef:function(){return r.oR},unref:function(){return r.SU},useAttrs:function(){return r.l1},useCssModule:function(){return r.fb},useCssVars:function(){return r.sj},useModel:function(){return r.tT},useSSRContext:function(){return r.Zq},useSlots:function(){return r.Rr},useTransitionState:function(){return r.Y8},vModelCheckbox:function(){return r.e8},vModelDynamic:function(){return r.YZ},vModelRadio:function(){return r.G2},vModelSelect:function(){return r.bM},vModelText:function(){return r.nr},vShow:function(){return r.F8},version:function(){return r.i8},warn:function(){return r.ZK},watch:function(){return r.YP},watchEffect:function(){return r.m0},watchPostEffect:function(){return r.Rh},watchSyncEffect:function(){return r.yX},withAsyncContext:function(){return r.mv},withCtx:function(){return r.w5},withDefaults:function(){return r.b9},withDirectives:function(){return r.wy},withKeys:function(){return r.D2},withMemo:function(){return r.MX},withModifiers:function(){return r.iM},withScopeId:function(){return r.HX}});var r=n(9242);const i=()=>{0}},2213:function(t,e,n){"use strict";n.d(e,{VU:function(){return M}});n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315);var r=n(3924),i=n(313),o=n(8148),s=n(2294),a=n(7034);const c=0,l=(t,e,n)=>{switch(s.yg(t)){case c:n(e,s.kf(t))}};var u=n(114),h=n(6055),d=n(1383),f=n(1370);const p=t=>f.UI(t,((t,e)=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)).join("&"),m=0,g=3,v=1,_=2,y=[];y[m]=(t,e,n,r,i)=>{o.uE(t,m);const s=a.zu(e,t,n.doc,n);r&&s===a.Px&&!n.synced&&(n.synced=!0)},y[g]=(t,e,n,r,i)=>{o.uE(t,v),o.mP(t,u.xq(n.awareness,Array.from(n.awareness.getStates().keys())))},y[v]=(t,e,n,r,i)=>{u.oy(n.awareness,s.HN(e),n)},y[_]=(t,e,n,r,i)=>{l(e,n.doc,((t,e)=>w(n,e)))};const b=3e4,w=(t,e)=>console.warn(`Permission denied to access ${t.url}.\n${e}`),x=(t,e,n)=>{const r=s.l1(e),i=o.Mf(),a=s.yg(r),c=t.messageHandlers[a];return c?c(i,r,t,n,a):console.error("Unable to compute message"),i},E=t=>{if(t.shouldConnect&&null===t.ws){const e=new t._WS(t.url);e.binaryType="arraybuffer",t.ws=e,t.wsconnecting=!0,t.wsconnected=!1,t.synced=!1,e.onmessage=n=>{t.wsLastMessageReceived=i.ZG();const r=x(t,new Uint8Array(n.data),!0);o.kE(r)>1&&e.send(o._f(r))},e.onerror=e=>{t.emit("connection-error",[e,t])},e.onclose=e=>{t.emit("connection-close",[e,t]),t.ws=null,t.wsconnecting=!1,t.wsconnected?(t.wsconnected=!1,t.synced=!1,u.Ag(t.awareness,Array.from(t.awareness.getStates().keys()).filter((e=>e!==t.doc.clientID)),t),t.emit("status",[{status:"disconnected"}])):t.wsUnsuccessfulReconnects++,setTimeout(E,d.VV(100*d.sQ(2,t.wsUnsuccessfulReconnects),t.maxBackoffTime),t)},e.onopen=()=>{t.wsLastMessageReceived=i.ZG(),t.wsconnecting=!1,t.wsconnected=!0,t.wsUnsuccessfulReconnects=0,t.emit("status",[{status:"connected"}]);const n=o.Mf();if(o.uE(n,m),a._J(n,t.doc),e.send(o._f(n)),null!==t.awareness.getLocalState()){const n=o.Mf();o.uE(n,v),o.mP(n,u.xq(t.awareness,[t.doc.clientID])),e.send(o._f(n))}},t.emit("status",[{status:"connecting"}])}},S=(t,e)=>{const n=t.ws;t.wsconnected&&n&&n.readyState===n.OPEN&&n.send(e),t.bcconnected&&r.nY(t.bcChannel,e,t)};class M extends h.y{constructor(t,e,n,{connect:s=!0,awareness:c=new u.GL(n),params:l={},WebSocketPolyfill:h=WebSocket,resyncInterval:d=-1,maxBackoffTime:f=2500,disableBc:g=!1}={}){super();while("/"===t[t.length-1])t=t.slice(0,t.length-1);const _=p(l);this.maxBackoffTime=f,this.bcChannel=t+"/"+e,this.url=t+"/"+e+(0===_.length?"":"?"+_),this.roomname=e,this.doc=n,this._WS=h,this.awareness=c,this.wsconnected=!1,this.wsconnecting=!1,this.bcconnected=!1,this.disableBc=g,this.wsUnsuccessfulReconnects=0,this.messageHandlers=y.slice(),this._synced=!1,this.ws=null,this.wsLastMessageReceived=0,this.shouldConnect=s,this._resyncInterval=0,d>0&&(this._resyncInterval=setInterval((()=>{if(this.ws&&this.ws.readyState===WebSocket.OPEN){const t=o.Mf();o.uE(t,m),a._J(t,n),this.ws.send(o._f(t))}}),d)),this._bcSubscriber=(t,e)=>{if(e!==this){const e=x(this,new Uint8Array(t),!1);o.kE(e)>1&&r.nY(this.bcChannel,o._f(e),this)}},this._updateHandler=(t,e)=>{if(e!==this){const e=o.Mf();o.uE(e,m),a.lr(e,t),S(this,o._f(e))}},this.doc.on("update",this._updateHandler),this._awarenessUpdateHandler=({added:t,updated:e,removed:n},r)=>{const i=t.concat(e).concat(n),s=o.Mf();o.uE(s,v),o.mP(s,u.xq(c,i)),S(this,o._f(s))},this._unloadHandler=()=>{u.Ag(this.awareness,[n.clientID],"window unload")},"undefined"!==typeof window?window.addEventListener("unload",this._unloadHandler):"undefined"!==typeof process&&process.on("exit",this._unloadHandler),c.on("update",this._awarenessUpdateHandler),this._checkInterval=setInterval((()=>{this.wsconnected&&b<i.ZG()-this.wsLastMessageReceived&&this.ws.close()}),b/10),s&&this.connect()}get synced(){return this._synced}set synced(t){this._synced!==t&&(this._synced=t,this.emit("synced",[t]),this.emit("sync",[t]))}destroy(){0!==this._resyncInterval&&clearInterval(this._resyncInterval),clearInterval(this._checkInterval),this.disconnect(),"undefined"!==typeof window?window.removeEventListener("unload",this._unloadHandler):"undefined"!==typeof process&&process.off("exit",this._unloadHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.doc.off("update",this._updateHandler),super.destroy()}connectBc(){if(this.disableBc)return;this.bcconnected||(r.Ld(this.bcChannel,this._bcSubscriber),this.bcconnected=!0);const t=o.Mf();o.uE(t,m),a._J(t,this.doc),r.nY(this.bcChannel,o._f(t),this);const e=o.Mf();o.uE(e,m),a.K0(e,this.doc),r.nY(this.bcChannel,o._f(e),this);const n=o.Mf();o.uE(n,g),r.nY(this.bcChannel,o._f(n),this);const i=o.Mf();o.uE(i,v),o.mP(i,u.xq(this.awareness,[this.doc.clientID])),r.nY(this.bcChannel,o._f(i),this)}disconnectBc(){const t=o.Mf();o.uE(t,v),o.mP(t,u.xq(this.awareness,[this.doc.clientID],new Map)),S(this,o._f(t)),this.bcconnected&&(r.r1(this.bcChannel,this._bcSubscriber),this.bcconnected=!1)}disconnect(){this.shouldConnect=!1,this.disconnectBc(),null!==this.ws&&this.ws.close()}connect(){this.shouldConnect=!0,this.wsconnected||null!==this.ws||(E(this),this.connectBc())}}},490:function(t,e,n){"use strict";n.d(e,{Z:function(){return Ob}});n(7658),n(1703),n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315),n(2262),n(4506);
/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
const r="153",i={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},o={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},s=0,a=1,c=2,l=1,u=2,h=3,d=0,f=1,p=2,m=0,g=1,v=2,_=3,y=4,b=5,w=100,x=101,E=102,S=103,M=104,T=200,A=201,C=202,R=203,P=204,O=205,L=206,k=207,I=208,D=209,N=210,U=0,F=1,B=2,z=3,j=4,H=5,V=6,G=7,W=0,q=1,X=2,Y=0,$=1,K=2,J=3,Z=4,Q=5,tt=300,et=301,nt=302,rt=303,it=304,ot=306,st=1e3,at=1001,ct=1002,lt=1003,ut=1004,ht=1005,dt=1006,ft=1007,pt=1008,mt=1009,gt=1010,vt=1011,_t=1012,yt=1013,bt=1014,wt=1015,xt=1016,Et=1017,St=1018,Mt=1020,Tt=1021,At=1023,Ct=1024,Rt=1025,Pt=1026,Ot=1027,Lt=1028,kt=1029,It=1030,Dt=1031,Nt=1033,Ut=33776,Ft=33777,Bt=33778,zt=33779,jt=35840,Ht=35841,Vt=35842,Gt=35843,Wt=36196,qt=37492,Xt=37496,Yt=37808,$t=37809,Kt=37810,Jt=37811,Zt=37812,Qt=37813,te=37814,ee=37815,ne=37816,re=37817,ie=37818,oe=37819,se=37820,ae=37821,ce=36492,le=36283,ue=36284,he=36285,de=36286,fe=2300,pe=2301,me=2302,ge=2400,ve=2401,_e=2402,ye=3e3,be=3001,we=3200,xe=3201,Ee=0,Se=1,Me="",Te="srgb",Ae="srgb-linear",Ce="display-p3",Re=7680,Pe=519,Oe=512,Le=513,ke=514,Ie=515,De=516,Ne=517,Ue=518,Fe=519,Be=35044,ze="300 es",je=1035,He=2e3,Ve=2001;class Ge{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const n=this._listeners,r=n[t];if(void 0!==r){const t=r.indexOf(e);-1!==t&&r.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners,n=e[t.type];if(void 0!==n){t.target=this;const e=n.slice(0);for(let n=0,r=e.length;n<r;n++)e[n].call(this,t);t.target=null}}}const We=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let qe=1234567;const Xe=Math.PI/180,Ye=180/Math.PI;function $e(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=We[255&t]+We[t>>8&255]+We[t>>16&255]+We[t>>24&255]+"-"+We[255&e]+We[e>>8&255]+"-"+We[e>>16&15|64]+We[e>>24&255]+"-"+We[63&n|128]+We[n>>8&255]+"-"+We[n>>16&255]+We[n>>24&255]+We[255&r]+We[r>>8&255]+We[r>>16&255]+We[r>>24&255];return i.toLowerCase()}function Ke(t,e,n){return Math.max(e,Math.min(n,t))}function Je(t,e){return(t%e+e)%e}function Ze(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function Qe(t,e,n){return t!==e?(n-t)/(e-t):0}function tn(t,e,n){return(1-n)*t+n*e}function en(t,e,n,r){return tn(t,e,1-Math.exp(-n*r))}function nn(t,e=1){return e-Math.abs(Je(t,2*e)-e)}function rn(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function on(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(6*t-15)+10))}function sn(t,e){return t+Math.floor(Math.random()*(e-t+1))}function an(t,e){return t+Math.random()*(e-t)}function cn(t){return t*(.5-Math.random())}function ln(t){void 0!==t&&(qe=t);let e=qe+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296}function un(t){return t*Xe}function hn(t){return t*Ye}function dn(t){return 0===(t&t-1)&&0!==t}function fn(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function pn(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function mn(t,e,n,r,i){const o=Math.cos,s=Math.sin,a=o(n/2),c=s(n/2),l=o((e+r)/2),u=s((e+r)/2),h=o((e-r)/2),d=s((e-r)/2),f=o((r-e)/2),p=s((r-e)/2);switch(i){case"XYX":t.set(a*u,c*h,c*d,a*l);break;case"YZY":t.set(c*d,a*u,c*h,a*l);break;case"ZXZ":t.set(c*h,c*d,a*u,a*l);break;case"XZX":t.set(a*u,c*p,c*f,a*l);break;case"YXY":t.set(c*f,a*u,c*p,a*l);break;case"ZYZ":t.set(c*p,c*f,a*u,a*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function gn(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function vn(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(4294967295*t);case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int32Array:return Math.round(2147483647*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}const _n={DEG2RAD:Xe,RAD2DEG:Ye,generateUUID:$e,clamp:Ke,euclideanModulo:Je,mapLinear:Ze,inverseLerp:Qe,lerp:tn,damp:en,pingpong:nn,smoothstep:rn,smootherstep:on,randInt:sn,randFloat:an,randFloatSpread:cn,seededRandom:ln,degToRad:un,radToDeg:hn,isPowerOfTwo:dn,ceilPowerOfTwo:fn,floorPowerOfTwo:pn,setQuaternionFromProperEuler:mn,normalize:vn,denormalize:gn};class yn{constructor(t=0,e=0){yn.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){const t=Math.atan2(-this.y,-this.x)+Math.PI;return t}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Ke(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*r+t.x,this.y=i*r+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class bn{constructor(t,e,n,r,i,o,s,a,c){bn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,e,n,r,i,o,s,a,c)}set(t,e,n,r,i,o,s,a,c){const l=this.elements;return l[0]=t,l[1]=r,l[2]=s,l[3]=e,l[4]=i,l[5]=a,l[6]=n,l[7]=o,l[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,o=n[0],s=n[3],a=n[6],c=n[1],l=n[4],u=n[7],h=n[2],d=n[5],f=n[8],p=r[0],m=r[3],g=r[6],v=r[1],_=r[4],y=r[7],b=r[2],w=r[5],x=r[8];return i[0]=o*p+s*v+a*b,i[3]=o*m+s*_+a*w,i[6]=o*g+s*y+a*x,i[1]=c*p+l*v+u*b,i[4]=c*m+l*_+u*w,i[7]=c*g+l*y+u*x,i[2]=h*p+d*v+f*b,i[5]=h*m+d*_+f*w,i[8]=h*g+d*y+f*x,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],c=t[7],l=t[8];return e*o*l-e*s*c-n*i*l+n*s*a+r*i*c-r*o*a}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],c=t[7],l=t[8],u=l*o-s*c,h=s*a-l*i,d=c*i-o*a,f=e*u+n*h+r*d;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const p=1/f;return t[0]=u*p,t[1]=(r*c-l*n)*p,t[2]=(s*n-r*o)*p,t[3]=h*p,t[4]=(l*e-r*a)*p,t[5]=(r*i-s*e)*p,t[6]=d*p,t[7]=(n*a-c*e)*p,t[8]=(o*e-n*i)*p,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,i,o,s){const a=Math.cos(i),c=Math.sin(i);return this.set(n*a,n*c,-n*(a*o+c*s)+o+t,-r*c,r*a,-r*(-c*o+a*s)+s+e,0,0,1),this}scale(t,e){return this.premultiply(wn.makeScale(t,e)),this}rotate(t){return this.premultiply(wn.makeRotation(-t)),this}translate(t,e){return this.premultiply(wn.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const wn=new bn;function xn(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function En(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}const Sn={};function Mn(t){t in Sn||(Sn[t]=!0,console.warn(t))}function Tn(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function An(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}const Cn=(new bn).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),Rn=(new bn).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function Pn(t){return t.convertSRGBToLinear().applyMatrix3(Rn)}function On(t){return t.applyMatrix3(Cn).convertLinearToSRGB()}const Ln={[Ae]:t=>t,[Te]:t=>t.convertSRGBToLinear(),[Ce]:Pn},kn={[Ae]:t=>t,[Te]:t=>t.convertLinearToSRGB(),[Ce]:On},In={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(t){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!t},get workingColorSpace(){return Ae},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(!1===this.enabled||e===n||!e||!n)return t;const r=Ln[e],i=kn[n];if(void 0===r||void 0===i)throw new Error(`Unsupported color space conversion, "${e}" to "${n}".`);return i(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}};let Dn;class Nn{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"===typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===Dn&&(Dn=En("canvas")),Dn.width=t.width,Dn.height=t.height;const n=Dn.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=Dn}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap){const e=En("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const r=n.getImageData(0,0,t.width,t.height),i=r.data;for(let t=0;t<i.length;t++)i[t]=255*Tn(i[t]/255);return n.putImageData(r,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*Tn(e[t]/255)):e[t]=Tn(e[t]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let Un=0;class Fn{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Un++}),this.uuid=$e(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let t;if(Array.isArray(r)){t=[];for(let e=0,n=r.length;e<n;e++)r[e].isDataTexture?t.push(Bn(r[e].image)):t.push(Bn(r[e]))}else t=Bn(r);n.url=t}return e||(t.images[this.uuid]=n),n}}function Bn(t){return"undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap?Nn.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let zn=0;class jn extends Ge{constructor(t=jn.DEFAULT_IMAGE,e=jn.DEFAULT_MAPPING,n=at,r=at,i=dt,o=pt,s=At,a=mt,c=jn.DEFAULT_ANISOTROPY,l=Me){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:zn++}),this.uuid=$e(),this.name="",this.source=new Fn(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=c,this.format=s,this.internalFormat=null,this.type=a,this.offset=new yn(0,0),this.repeat=new yn(1,1),this.center=new yn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new bn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"===typeof l?this.colorSpace=l:(Mn("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=l===be?Te:Me),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==tt)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case st:t.x=t.x-Math.floor(t.x);break;case at:t.x=t.x<0?0:1;break;case ct:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case st:t.y=t.y-Math.floor(t.y);break;case at:t.y=t.y<0?0:1;break;case ct:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Mn("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Te?be:ye}set encoding(t){Mn("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=t===be?Te:Me}}jn.DEFAULT_IMAGE=null,jn.DEFAULT_MAPPING=tt,jn.DEFAULT_ANISOTROPY=1;class Hn{constructor(t=0,e=0,n=0,r=1){Hn.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,i;const o=.01,s=.1,a=t.elements,c=a[0],l=a[4],u=a[8],h=a[1],d=a[5],f=a[9],p=a[2],m=a[6],g=a[10];if(Math.abs(l-h)<o&&Math.abs(u-p)<o&&Math.abs(f-m)<o){if(Math.abs(l+h)<s&&Math.abs(u+p)<s&&Math.abs(f+m)<s&&Math.abs(c+d+g-3)<s)return this.set(1,0,0,0),this;e=Math.PI;const t=(c+1)/2,a=(d+1)/2,v=(g+1)/2,_=(l+h)/4,y=(u+p)/4,b=(f+m)/4;return t>a&&t>v?t<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(t),r=_/n,i=y/n):a>v?a<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(a),n=_/r,i=b/r):v<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=y/i,r=b/i),this.set(n,r,i,e),this}let v=Math.sqrt((m-f)*(m-f)+(u-p)*(u-p)+(h-l)*(h-l));return Math.abs(v)<.001&&(v=1),this.x=(m-f)/v,this.y=(u-p)/v,this.z=(h-l)/v,this.w=Math.acos((c+d+g-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Vn extends Ge{constructor(t=1,e=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new Hn(0,0,t,e),this.scissorTest=!1,this.viewport=new Hn(0,0,t,e);const r={width:t,height:e,depth:1};void 0!==n.encoding&&(Mn("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===be?Te:Me),this.texture=new jn(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:dt,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(t,e,n=1){this.width===t&&this.height===e&&this.depth===n||(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new Fn(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Gn extends jn{constructor(t=null,e=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=lt,this.minFilter=lt,this.wrapR=at,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Wn extends jn{constructor(t=null,e=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=lt,this.minFilter=lt,this.wrapR=at,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class qn{constructor(t=0,e=0,n=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=r}static slerpFlat(t,e,n,r,i,o,s){let a=n[r+0],c=n[r+1],l=n[r+2],u=n[r+3];const h=i[o+0],d=i[o+1],f=i[o+2],p=i[o+3];if(0===s)return t[e+0]=a,t[e+1]=c,t[e+2]=l,void(t[e+3]=u);if(1===s)return t[e+0]=h,t[e+1]=d,t[e+2]=f,void(t[e+3]=p);if(u!==p||a!==h||c!==d||l!==f){let t=1-s;const e=a*h+c*d+l*f+u*p,n=e>=0?1:-1,r=1-e*e;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,e*n);t=Math.sin(t*o)/i,s=Math.sin(s*o)/i}const i=s*n;if(a=a*t+h*i,c=c*t+d*i,l=l*t+f*i,u=u*t+p*i,t===1-s){const t=1/Math.sqrt(a*a+c*c+l*l+u*u);a*=t,c*=t,l*=t,u*=t}}t[e]=a,t[e+1]=c,t[e+2]=l,t[e+3]=u}static multiplyQuaternionsFlat(t,e,n,r,i,o){const s=n[r],a=n[r+1],c=n[r+2],l=n[r+3],u=i[o],h=i[o+1],d=i[o+2],f=i[o+3];return t[e]=s*f+l*u+a*d-c*h,t[e+1]=a*f+l*h+c*u-s*d,t[e+2]=c*f+l*d+s*h-a*u,t[e+3]=l*f-s*u-a*h-c*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){const n=t._x,r=t._y,i=t._z,o=t._order,s=Math.cos,a=Math.sin,c=s(n/2),l=s(r/2),u=s(i/2),h=a(n/2),d=a(r/2),f=a(i/2);switch(o){case"XYZ":this._x=h*l*u+c*d*f,this._y=c*d*u-h*l*f,this._z=c*l*f+h*d*u,this._w=c*l*u-h*d*f;break;case"YXZ":this._x=h*l*u+c*d*f,this._y=c*d*u-h*l*f,this._z=c*l*f-h*d*u,this._w=c*l*u+h*d*f;break;case"ZXY":this._x=h*l*u-c*d*f,this._y=c*d*u+h*l*f,this._z=c*l*f+h*d*u,this._w=c*l*u-h*d*f;break;case"ZYX":this._x=h*l*u-c*d*f,this._y=c*d*u+h*l*f,this._z=c*l*f-h*d*u,this._w=c*l*u+h*d*f;break;case"YZX":this._x=h*l*u+c*d*f,this._y=c*d*u+h*l*f,this._z=c*l*f-h*d*u,this._w=c*l*u-h*d*f;break;case"XZY":this._x=h*l*u-c*d*f,this._y=c*d*u-h*l*f,this._z=c*l*f+h*d*u,this._w=c*l*u+h*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],i=e[8],o=e[1],s=e[5],a=e[9],c=e[2],l=e[6],u=e[10],h=n+s+u;if(h>0){const t=.5/Math.sqrt(h+1);this._w=.25/t,this._x=(l-a)*t,this._y=(i-c)*t,this._z=(o-r)*t}else if(n>s&&n>u){const t=2*Math.sqrt(1+n-s-u);this._w=(l-a)/t,this._x=.25*t,this._y=(r+o)/t,this._z=(i+c)/t}else if(s>u){const t=2*Math.sqrt(1+s-n-u);this._w=(i-c)/t,this._x=(r+o)/t,this._y=.25*t,this._z=(a+l)/t}else{const t=2*Math.sqrt(1+u-n-s);this._w=(o-r)/t,this._x=(i+c)/t,this._y=(a+l)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Ke(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,r=t._y,i=t._z,o=t._w,s=e._x,a=e._y,c=e._z,l=e._w;return this._x=n*l+o*s+r*c-i*a,this._y=r*l+o*a+i*s-n*c,this._z=i*l+o*c+n*a-r*s,this._w=o*l-n*s-r*a-i*c,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,i=this._z,o=this._w;let s=o*t._w+n*t._x+r*t._y+i*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const a=1-s*s;if(a<=Number.EPSILON){const t=1-e;return this._w=t*o+e*this._w,this._x=t*n+e*this._x,this._y=t*r+e*this._y,this._z=t*i+e*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(a),l=Math.atan2(c,s),u=Math.sin((1-e)*l)/c,h=Math.sin(e*l)/c;return this._w=o*u+this._w*h,this._x=n*u+this._x*h,this._y=r*u+this._y*h,this._z=i*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(e*Math.cos(r),n*Math.sin(i),n*Math.cos(i),e*Math.sin(r))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Xn{constructor(t=0,e=0,n=0){Xn.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion($n.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion($n.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,s=t.z,a=t.w,c=a*e+o*r-s*n,l=a*n+s*e-i*r,u=a*r+i*n-o*e,h=-i*e-o*n-s*r;return this.x=c*a+h*-i+l*-s-u*-o,this.y=l*a+h*-o+u*-i-c*-s,this.z=u*a+h*-s+c*-o-l*-i,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,r=t.y,i=t.z,o=e.x,s=e.y,a=e.z;return this.x=r*a-i*s,this.y=i*o-n*a,this.z=n*s-r*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return Yn.copy(this).projectOnVector(t),this.sub(Yn)}reflect(t){return this.sub(Yn.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Ke(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Yn=new Xn,$n=new qn;class Kn{constructor(t=new Xn(1/0,1/0,1/0),e=new Xn(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(Zn.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(Zn.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=Zn.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){if(t.updateWorldMatrix(!1,!1),void 0!==t.boundingBox)null===t.boundingBox&&t.computeBoundingBox(),Qn.copy(t.boundingBox),Qn.applyMatrix4(t.matrixWorld),this.union(Qn);else{const n=t.geometry;if(void 0!==n)if(e&&void 0!==n.attributes&&void 0!==n.attributes.position){const e=n.attributes.position;for(let n=0,r=e.count;n<r;n++)Zn.fromBufferAttribute(e,n).applyMatrix4(t.matrixWorld),this.expandByPoint(Zn)}else null===n.boundingBox&&n.computeBoundingBox(),Qn.copy(n.boundingBox),Qn.applyMatrix4(t.matrixWorld),this.union(Qn)}const n=t.children;for(let r=0,i=n.length;r<i;r++)this.expandByObject(n[r],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,Zn),Zn.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(sr),ar.subVectors(this.max,sr),tr.subVectors(t.a,sr),er.subVectors(t.b,sr),nr.subVectors(t.c,sr),rr.subVectors(er,tr),ir.subVectors(nr,er),or.subVectors(tr,nr);let e=[0,-rr.z,rr.y,0,-ir.z,ir.y,0,-or.z,or.y,rr.z,0,-rr.x,ir.z,0,-ir.x,or.z,0,-or.x,-rr.y,rr.x,0,-ir.y,ir.x,0,-or.y,or.x,0];return!!ur(e,tr,er,nr,ar)&&(e=[1,0,0,0,1,0,0,0,1],!!ur(e,tr,er,nr,ar)&&(cr.crossVectors(rr,ir),e=[cr.x,cr.y,cr.z],ur(e,tr,er,nr,ar)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Zn).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(Zn).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(Jn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Jn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Jn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Jn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Jn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Jn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Jn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Jn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Jn)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Jn=[new Xn,new Xn,new Xn,new Xn,new Xn,new Xn,new Xn,new Xn],Zn=new Xn,Qn=new Kn,tr=new Xn,er=new Xn,nr=new Xn,rr=new Xn,ir=new Xn,or=new Xn,sr=new Xn,ar=new Xn,cr=new Xn,lr=new Xn;function ur(t,e,n,r,i){for(let o=0,s=t.length-3;o<=s;o+=3){lr.fromArray(t,o);const s=i.x*Math.abs(lr.x)+i.y*Math.abs(lr.y)+i.z*Math.abs(lr.z),a=e.dot(lr),c=n.dot(lr),l=r.dot(lr);if(Math.max(-Math.max(a,c,l),Math.min(a,c,l))>s)return!1}return!0}const hr=new Kn,dr=new Xn,fr=new Xn;class pr{constructor(t=new Xn,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):hr.setFromPoints(t).getCenter(n);let r=0;for(let i=0,o=t.length;i<o;i++)r=Math.max(r,n.distanceToSquared(t[i]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;dr.subVectors(t,this.center);const e=dr.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),n=.5*(t-this.radius);this.center.addScaledVector(dr,n/t),this.radius+=n}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(fr.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(dr.copy(t.center).add(fr)),this.expandByPoint(dr.copy(t.center).sub(fr))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const mr=new Xn,gr=new Xn,vr=new Xn,_r=new Xn,yr=new Xn,br=new Xn,wr=new Xn;class xr{constructor(t=new Xn,e=new Xn(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,mr)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=mr.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(mr.copy(this.origin).addScaledVector(this.direction,e),mr.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){gr.copy(t).add(e).multiplyScalar(.5),vr.copy(e).sub(t).normalize(),_r.copy(this.origin).sub(gr);const i=.5*t.distanceTo(e),o=-this.direction.dot(vr),s=_r.dot(this.direction),a=-_r.dot(vr),c=_r.lengthSq(),l=Math.abs(1-o*o);let u,h,d,f;if(l>0)if(u=o*a-s,h=o*s-a,f=i*l,u>=0)if(h>=-f)if(h<=f){const t=1/l;u*=t,h*=t,d=u*(u+o*h+2*s)+h*(o*u+h+2*a)+c}else h=i,u=Math.max(0,-(o*h+s)),d=-u*u+h*(h+2*a)+c;else h=-i,u=Math.max(0,-(o*h+s)),d=-u*u+h*(h+2*a)+c;else h<=-f?(u=Math.max(0,-(-o*i+s)),h=u>0?-i:Math.min(Math.max(-i,-a),i),d=-u*u+h*(h+2*a)+c):h<=f?(u=0,h=Math.min(Math.max(-i,-a),i),d=h*(h+2*a)+c):(u=Math.max(0,-(o*i+s)),h=u>0?i:Math.min(Math.max(-i,-a),i),d=-u*u+h*(h+2*a)+c);else h=o>0?-i:i,u=Math.max(0,-(o*h+s)),d=-u*u+h*(h+2*a)+c;return n&&n.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(gr).addScaledVector(vr,h),d}intersectSphere(t,e){mr.subVectors(t.center,this.origin);const n=mr.dot(this.direction),r=mr.dot(mr)-n*n,i=t.radius*t.radius;if(r>i)return null;const o=Math.sqrt(i-r),s=n-o,a=n+o;return a<0?null:s<0?this.at(a,e):this.at(s,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);if(0===e)return!0;const n=t.normal.dot(this.direction);return n*e<0}intersectBox(t,e){let n,r,i,o,s,a;const c=1/this.direction.x,l=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(n=(t.min.x-h.x)*c,r=(t.max.x-h.x)*c):(n=(t.max.x-h.x)*c,r=(t.min.x-h.x)*c),l>=0?(i=(t.min.y-h.y)*l,o=(t.max.y-h.y)*l):(i=(t.max.y-h.y)*l,o=(t.min.y-h.y)*l),n>o||i>r?null:((i>n||isNaN(n))&&(n=i),(o<r||isNaN(r))&&(r=o),u>=0?(s=(t.min.z-h.z)*u,a=(t.max.z-h.z)*u):(s=(t.max.z-h.z)*u,a=(t.min.z-h.z)*u),n>a||s>r?null:((s>n||n!==n)&&(n=s),(a<r||r!==r)&&(r=a),r<0?null:this.at(n>=0?n:r,e)))}intersectsBox(t){return null!==this.intersectBox(t,mr)}intersectTriangle(t,e,n,r,i){yr.subVectors(e,t),br.subVectors(n,t),wr.crossVectors(yr,br);let o,s=this.direction.dot(wr);if(s>0){if(r)return null;o=1}else{if(!(s<0))return null;o=-1,s=-s}_r.subVectors(this.origin,t);const a=o*this.direction.dot(br.crossVectors(_r,br));if(a<0)return null;const c=o*this.direction.dot(yr.cross(_r));if(c<0)return null;if(a+c>s)return null;const l=-o*_r.dot(wr);return l<0?null:this.at(l/s,i)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Er{constructor(t,e,n,r,i,o,s,a,c,l,u,h,d,f,p,m){Er.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,e,n,r,i,o,s,a,c,l,u,h,d,f,p,m)}set(t,e,n,r,i,o,s,a,c,l,u,h,d,f,p,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=s,g[13]=a,g[2]=c,g[6]=l,g[10]=u,g[14]=h,g[3]=d,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Er).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/Sr.setFromMatrixColumn(t,0).length(),i=1/Sr.setFromMatrixColumn(t,1).length(),o=1/Sr.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,r=t.y,i=t.z,o=Math.cos(n),s=Math.sin(n),a=Math.cos(r),c=Math.sin(r),l=Math.cos(i),u=Math.sin(i);if("XYZ"===t.order){const t=o*l,n=o*u,r=s*l,i=s*u;e[0]=a*l,e[4]=-a*u,e[8]=c,e[1]=n+r*c,e[5]=t-i*c,e[9]=-s*a,e[2]=i-t*c,e[6]=r+n*c,e[10]=o*a}else if("YXZ"===t.order){const t=a*l,n=a*u,r=c*l,i=c*u;e[0]=t+i*s,e[4]=r*s-n,e[8]=o*c,e[1]=o*u,e[5]=o*l,e[9]=-s,e[2]=n*s-r,e[6]=i+t*s,e[10]=o*a}else if("ZXY"===t.order){const t=a*l,n=a*u,r=c*l,i=c*u;e[0]=t-i*s,e[4]=-o*u,e[8]=r+n*s,e[1]=n+r*s,e[5]=o*l,e[9]=i-t*s,e[2]=-o*c,e[6]=s,e[10]=o*a}else if("ZYX"===t.order){const t=o*l,n=o*u,r=s*l,i=s*u;e[0]=a*l,e[4]=r*c-n,e[8]=t*c+i,e[1]=a*u,e[5]=i*c+t,e[9]=n*c-r,e[2]=-c,e[6]=s*a,e[10]=o*a}else if("YZX"===t.order){const t=o*a,n=o*c,r=s*a,i=s*c;e[0]=a*l,e[4]=i-t*u,e[8]=r*u+n,e[1]=u,e[5]=o*l,e[9]=-s*l,e[2]=-c*l,e[6]=n*u+r,e[10]=t-i*u}else if("XZY"===t.order){const t=o*a,n=o*c,r=s*a,i=s*c;e[0]=a*l,e[4]=-u,e[8]=c*l,e[1]=t*u+i,e[5]=o*l,e[9]=n*u-r,e[2]=r*u-n,e[6]=s*l,e[10]=i*u+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Tr,t,Ar)}lookAt(t,e,n){const r=this.elements;return Pr.subVectors(t,e),0===Pr.lengthSq()&&(Pr.z=1),Pr.normalize(),Cr.crossVectors(n,Pr),0===Cr.lengthSq()&&(1===Math.abs(n.z)?Pr.x+=1e-4:Pr.z+=1e-4,Pr.normalize(),Cr.crossVectors(n,Pr)),Cr.normalize(),Rr.crossVectors(Pr,Cr),r[0]=Cr.x,r[4]=Rr.x,r[8]=Pr.x,r[1]=Cr.y,r[5]=Rr.y,r[9]=Pr.y,r[2]=Cr.z,r[6]=Rr.z,r[10]=Pr.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,o=n[0],s=n[4],a=n[8],c=n[12],l=n[1],u=n[5],h=n[9],d=n[13],f=n[2],p=n[6],m=n[10],g=n[14],v=n[3],_=n[7],y=n[11],b=n[15],w=r[0],x=r[4],E=r[8],S=r[12],M=r[1],T=r[5],A=r[9],C=r[13],R=r[2],P=r[6],O=r[10],L=r[14],k=r[3],I=r[7],D=r[11],N=r[15];return i[0]=o*w+s*M+a*R+c*k,i[4]=o*x+s*T+a*P+c*I,i[8]=o*E+s*A+a*O+c*D,i[12]=o*S+s*C+a*L+c*N,i[1]=l*w+u*M+h*R+d*k,i[5]=l*x+u*T+h*P+d*I,i[9]=l*E+u*A+h*O+d*D,i[13]=l*S+u*C+h*L+d*N,i[2]=f*w+p*M+m*R+g*k,i[6]=f*x+p*T+m*P+g*I,i[10]=f*E+p*A+m*O+g*D,i[14]=f*S+p*C+m*L+g*N,i[3]=v*w+_*M+y*R+b*k,i[7]=v*x+_*T+y*P+b*I,i[11]=v*E+_*A+y*O+b*D,i[15]=v*S+_*C+y*L+b*N,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],s=t[5],a=t[9],c=t[13],l=t[2],u=t[6],h=t[10],d=t[14],f=t[3],p=t[7],m=t[11],g=t[15];return f*(+i*a*u-r*c*u-i*s*h+n*c*h+r*s*d-n*a*d)+p*(+e*a*d-e*c*h+i*o*h-r*o*d+r*c*l-i*a*l)+m*(+e*c*u-e*s*d-i*o*u+n*o*d+i*s*l-n*c*l)+g*(-r*s*l-e*a*u+e*s*h+r*o*u-n*o*h+n*a*l)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],c=t[7],l=t[8],u=t[9],h=t[10],d=t[11],f=t[12],p=t[13],m=t[14],g=t[15],v=u*m*c-p*h*c+p*a*d-s*m*d-u*a*g+s*h*g,_=f*h*c-l*m*c-f*a*d+o*m*d+l*a*g-o*h*g,y=l*p*c-f*u*c+f*s*d-o*p*d-l*s*g+o*u*g,b=f*u*a-l*p*a-f*s*h+o*p*h+l*s*m-o*u*m,w=e*v+n*_+r*y+i*b;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const x=1/w;return t[0]=v*x,t[1]=(p*h*i-u*m*i-p*r*d+n*m*d+u*r*g-n*h*g)*x,t[2]=(s*m*i-p*a*i+p*r*c-n*m*c-s*r*g+n*a*g)*x,t[3]=(u*a*i-s*h*i-u*r*c+n*h*c+s*r*d-n*a*d)*x,t[4]=_*x,t[5]=(l*m*i-f*h*i+f*r*d-e*m*d-l*r*g+e*h*g)*x,t[6]=(f*a*i-o*m*i-f*r*c+e*m*c+o*r*g-e*a*g)*x,t[7]=(o*h*i-l*a*i+l*r*c-e*h*c-o*r*d+e*a*d)*x,t[8]=y*x,t[9]=(f*u*i-l*p*i-f*n*d+e*p*d+l*n*g-e*u*g)*x,t[10]=(o*p*i-f*s*i+f*n*c-e*p*c-o*n*g+e*s*g)*x,t[11]=(l*s*i-o*u*i-l*n*c+e*u*c+o*n*d-e*s*d)*x,t[12]=b*x,t[13]=(l*p*r-f*u*r+f*n*h-e*p*h-l*n*m+e*u*m)*x,t[14]=(f*s*r-o*p*r-f*n*a+e*p*a+o*n*m-e*s*m)*x,t[15]=(o*u*r-l*s*r+l*n*a-e*u*a-o*n*h+e*s*h)*x,this}scale(t){const e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,s=t.y,a=t.z,c=i*o,l=i*s;return this.set(c*o+n,c*s-r*a,c*a+r*s,0,c*s+r*a,l*s+n,l*a-r*o,0,c*a-r*s,l*a+r*o,i*a*a+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,r,i,o){return this.set(1,n,i,0,t,1,o,0,e,r,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,i=e._x,o=e._y,s=e._z,a=e._w,c=i+i,l=o+o,u=s+s,h=i*c,d=i*l,f=i*u,p=o*l,m=o*u,g=s*u,v=a*c,_=a*l,y=a*u,b=n.x,w=n.y,x=n.z;return r[0]=(1-(p+g))*b,r[1]=(d+y)*b,r[2]=(f-_)*b,r[3]=0,r[4]=(d-y)*w,r[5]=(1-(h+g))*w,r[6]=(m+v)*w,r[7]=0,r[8]=(f+_)*x,r[9]=(m-v)*x,r[10]=(1-(h+p))*x,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let i=Sr.set(r[0],r[1],r[2]).length();const o=Sr.set(r[4],r[5],r[6]).length(),s=Sr.set(r[8],r[9],r[10]).length(),a=this.determinant();a<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],Mr.copy(this);const c=1/i,l=1/o,u=1/s;return Mr.elements[0]*=c,Mr.elements[1]*=c,Mr.elements[2]*=c,Mr.elements[4]*=l,Mr.elements[5]*=l,Mr.elements[6]*=l,Mr.elements[8]*=u,Mr.elements[9]*=u,Mr.elements[10]*=u,e.setFromRotationMatrix(Mr),n.x=i,n.y=o,n.z=s,this}makePerspective(t,e,n,r,i,o,s=He){const a=this.elements,c=2*i/(e-t),l=2*i/(n-r),u=(e+t)/(e-t),h=(n+r)/(n-r);let d,f;if(s===He)d=-(o+i)/(o-i),f=-2*o*i/(o-i);else{if(s!==Ve)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);d=-o/(o-i),f=-o*i/(o-i)}return a[0]=c,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=l,a[9]=h,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,n,r,i,o,s=He){const a=this.elements,c=1/(e-t),l=1/(n-r),u=1/(o-i),h=(e+t)*c,d=(n+r)*l;let f,p;if(s===He)f=(o+i)*u,p=-2*u;else{if(s!==Ve)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);f=i*u,p=-1*u}return a[0]=2*c,a[4]=0,a[8]=0,a[12]=-h,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=p,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const Sr=new Xn,Mr=new Er,Tr=new Xn(0,0,0),Ar=new Xn(1,1,1),Cr=new Xn,Rr=new Xn,Pr=new Xn,Or=new Er,Lr=new qn;class kr{constructor(t=0,e=0,n=0,r=kr.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,r=this._order){return this._x=t,this._y=e,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const r=t.elements,i=r[0],o=r[4],s=r[8],a=r[1],c=r[5],l=r[9],u=r[2],h=r[6],d=r[10];switch(e){case"XYZ":this._y=Math.asin(Ke(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,d),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Ke(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(s,d),this._z=Math.atan2(a,c)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin(Ke(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(a,i));break;case"ZYX":this._y=Math.asin(-Ke(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(a,i)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Ke(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-l,c),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(s,d));break;case"XZY":this._z=Math.asin(-Ke(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(s,i)):(this._x=Math.atan2(-l,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return Or.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Or,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return Lr.setFromEuler(this),this.setFromQuaternion(Lr,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}kr.DEFAULT_ORDER="XYZ";class Ir{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!==(this.mask&t.mask)}isEnabled(t){return 0!==(this.mask&(1<<t|0))}}let Dr=0;const Nr=new Xn,Ur=new qn,Fr=new Er,Br=new Xn,zr=new Xn,jr=new Xn,Hr=new qn,Vr=new Xn(1,0,0),Gr=new Xn(0,1,0),Wr=new Xn(0,0,1),qr={type:"added"},Xr={type:"removed"};class Yr extends Ge{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Dr++}),this.uuid=$e(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Yr.DEFAULT_UP.clone();const t=new Xn,e=new kr,n=new qn,r=new Xn(1,1,1);function i(){n.setFromEuler(e,!1)}function o(){e.setFromQuaternion(n,void 0,!1)}e._onChange(i),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Er},normalMatrix:{value:new bn}}),this.matrix=new Er,this.matrixWorld=new Er,this.matrixAutoUpdate=Yr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Yr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Ir,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Ur.setFromAxisAngle(t,e),this.quaternion.multiply(Ur),this}rotateOnWorldAxis(t,e){return Ur.setFromAxisAngle(t,e),this.quaternion.premultiply(Ur),this}rotateX(t){return this.rotateOnAxis(Vr,t)}rotateY(t){return this.rotateOnAxis(Gr,t)}rotateZ(t){return this.rotateOnAxis(Wr,t)}translateOnAxis(t,e){return Nr.copy(t).applyQuaternion(this.quaternion),this.position.add(Nr.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Vr,t)}translateY(t){return this.translateOnAxis(Gr,t)}translateZ(t){return this.translateOnAxis(Wr,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Fr.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?Br.copy(t):Br.set(t,e,n);const r=this.parent;this.updateWorldMatrix(!0,!1),zr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Fr.lookAt(zr,Br,this.up):Fr.lookAt(Br,zr,this.up),this.quaternion.setFromRotationMatrix(Fr),r&&(Fr.extractRotation(r.matrixWorld),Ur.setFromRotationMatrix(Fr),this.quaternion.premultiply(Ur.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(qr)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Xr)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(Xr)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Fr.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Fr.multiply(t.parent.matrixWorld)),t.applyMatrix4(Fr),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n],i=r.getObjectByProperty(t,e);if(void 0!==i)return i}}getObjectsByProperty(t,e){let n=[];this[t]===e&&n.push(this);for(let r=0,i=this.children.length;r<i;r++){const i=this.children[r].getObjectsByProperty(t,e);i.length>0&&(n=n.concat(i))}return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zr,t,jr),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zr,Hr,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,r=e.length;n<r;n++){const r=e[n];!0!==r.matrixWorldAutoUpdate&&!0!==t||r.updateMatrixWorld(t)}}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++){const n=t[e];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(t){const e=void 0===t||"string"===typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,r=n.length;e<r;e++){const r=n[e];i(t.shapes,r)}else i(t.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,r=this.material.length;n<r;n++)e.push(i(t.materials,this.material[n]));r.material=e}else r.material=i(t.materials,this.material);if(this.children.length>0){r.children=[];for(let e=0;e<this.children.length;e++)r.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];r.animations.push(i(t.animations,n))}}if(e){const e=o(t.geometries),r=o(t.materials),i=o(t.textures),s=o(t.images),a=o(t.shapes),c=o(t.skeletons),l=o(t.animations),u=o(t.nodes);e.length>0&&(n.geometries=e),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),s.length>0&&(n.images=s),a.length>0&&(n.shapes=a),c.length>0&&(n.skeletons=c),l.length>0&&(n.animations=l),u.length>0&&(n.nodes=u)}return n.object=r,n;function o(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let n=0;n<t.children.length;n++){const e=t.children[n];this.add(e.clone())}return this}}Yr.DEFAULT_UP=new Xn(0,1,0),Yr.DEFAULT_MATRIX_AUTO_UPDATE=!0,Yr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const $r=new Xn,Kr=new Xn,Jr=new Xn,Zr=new Xn,Qr=new Xn,ti=new Xn,ei=new Xn,ni=new Xn,ri=new Xn,ii=new Xn;let oi=!1;class si{constructor(t=new Xn,e=new Xn,n=new Xn){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,r){r.subVectors(n,e),$r.subVectors(t,e),r.cross($r);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(t,e,n,r,i){$r.subVectors(r,e),Kr.subVectors(n,e),Jr.subVectors(t,e);const o=$r.dot($r),s=$r.dot(Kr),a=$r.dot(Jr),c=Kr.dot(Kr),l=Kr.dot(Jr),u=o*c-s*s;if(0===u)return i.set(-2,-1,-1);const h=1/u,d=(c*a-s*l)*h,f=(o*l-s*a)*h;return i.set(1-d-f,f,d)}static containsPoint(t,e,n,r){return this.getBarycoord(t,e,n,r,Zr),Zr.x>=0&&Zr.y>=0&&Zr.x+Zr.y<=1}static getUV(t,e,n,r,i,o,s,a){return!1===oi&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),oi=!0),this.getInterpolation(t,e,n,r,i,o,s,a)}static getInterpolation(t,e,n,r,i,o,s,a){return this.getBarycoord(t,e,n,r,Zr),a.setScalar(0),a.addScaledVector(i,Zr.x),a.addScaledVector(o,Zr.y),a.addScaledVector(s,Zr.z),a}static isFrontFacing(t,e,n,r){return $r.subVectors(n,e),Kr.subVectors(t,e),$r.cross(Kr).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,n,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return $r.subVectors(this.c,this.b),Kr.subVectors(this.a,this.b),.5*$r.cross(Kr).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return si.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return si.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,r,i){return!1===oi&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),oi=!0),si.getInterpolation(t,this.a,this.b,this.c,e,n,r,i)}getInterpolation(t,e,n,r,i){return si.getInterpolation(t,this.a,this.b,this.c,e,n,r,i)}containsPoint(t){return si.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return si.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,r=this.b,i=this.c;let o,s;Qr.subVectors(r,n),ti.subVectors(i,n),ni.subVectors(t,n);const a=Qr.dot(ni),c=ti.dot(ni);if(a<=0&&c<=0)return e.copy(n);ri.subVectors(t,r);const l=Qr.dot(ri),u=ti.dot(ri);if(l>=0&&u<=l)return e.copy(r);const h=a*u-l*c;if(h<=0&&a>=0&&l<=0)return o=a/(a-l),e.copy(n).addScaledVector(Qr,o);ii.subVectors(t,i);const d=Qr.dot(ii),f=ti.dot(ii);if(f>=0&&d<=f)return e.copy(i);const p=d*c-a*f;if(p<=0&&c>=0&&f<=0)return s=c/(c-f),e.copy(n).addScaledVector(ti,s);const m=l*f-d*u;if(m<=0&&u-l>=0&&d-f>=0)return ei.subVectors(i,r),s=(u-l)/(u-l+(d-f)),e.copy(r).addScaledVector(ei,s);const g=1/(m+p+h);return o=p*g,s=h*g,e.copy(n).addScaledVector(Qr,o).addScaledVector(ti,s)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let ai=0;class ci extends Ge{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:ai++}),this.uuid=$e(),this.name="",this.type="Material",this.blending=g,this.side=d,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=P,this.blendDst=O,this.blendEquation=w,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=z,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Pe,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Re,this.stencilZFail=Re,this.stencilZPass=Re,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!==t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`)}}toJSON(t){const e=void 0===t||"string"===typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==g&&(n.blending=this.blending),this.side!==d&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(n.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),e){const e=r(t.textures),i=r(t.images);e.length>0&&(n.textures=e),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let r=0;r!==t;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}const li={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ui={h:0,s:0,l:0},hi={h:0,s:0,l:0};function di(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}class fi{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(void 0===e&&void 0===n){const e=t;e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Te){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,In.toWorkingColorSpace(this,e),this}setRGB(t,e,n,r=In.workingColorSpace){return this.r=t,this.g=e,this.b=n,In.toWorkingColorSpace(this,r),this}setHSL(t,e,n,r=In.workingColorSpace){if(t=Je(t,1),e=Ke(e,0,1),n=Ke(n,0,1),0===e)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+e):n+e-n*e,i=2*n-r;this.r=di(i,r,t+1/3),this.g=di(i,r,t),this.b=di(i,r,t-1/3)}return In.toWorkingColorSpace(this,r),this}setStyle(t,e=Te){function n(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(t)){let i;const o=r[1],s=r[2];switch(o){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,e);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,e);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const n=r[1],i=n.length;if(3===i)return this.setRGB(parseInt(n.charAt(0),16)/15,parseInt(n.charAt(1),16)/15,parseInt(n.charAt(2),16)/15,e);if(6===i)return this.setHex(parseInt(n,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Te){const n=li[t.toLowerCase()];return void 0!==n?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Tn(t.r),this.g=Tn(t.g),this.b=Tn(t.b),this}copyLinearToSRGB(t){return this.r=An(t.r),this.g=An(t.g),this.b=An(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Te){return In.fromWorkingColorSpace(pi.copy(this),t),65536*Math.round(Ke(255*pi.r,0,255))+256*Math.round(Ke(255*pi.g,0,255))+Math.round(Ke(255*pi.b,0,255))}getHexString(t=Te){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=In.workingColorSpace){In.fromWorkingColorSpace(pi.copy(this),e);const n=pi.r,r=pi.g,i=pi.b,o=Math.max(n,r,i),s=Math.min(n,r,i);let a,c;const l=(s+o)/2;if(s===o)a=0,c=0;else{const t=o-s;switch(c=l<=.5?t/(o+s):t/(2-o-s),o){case n:a=(r-i)/t+(r<i?6:0);break;case r:a=(i-n)/t+2;break;case i:a=(n-r)/t+4;break}a/=6}return t.h=a,t.s=c,t.l=l,t}getRGB(t,e=In.workingColorSpace){return In.fromWorkingColorSpace(pi.copy(this),e),t.r=pi.r,t.g=pi.g,t.b=pi.b,t}getStyle(t=Te){In.fromWorkingColorSpace(pi.copy(this),t);const e=pi.r,n=pi.g,r=pi.b;return t!==Te?`color(${t} ${e.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*e)},${Math.round(255*n)},${Math.round(255*r)})`}offsetHSL(t,e,n){return this.getHSL(ui),ui.h+=t,ui.s+=e,ui.l+=n,this.setHSL(ui.h,ui.s,ui.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(ui),t.getHSL(hi);const n=tn(ui.h,hi.h,e),r=tn(ui.s,hi.s,e),i=tn(ui.l,hi.l,e);return this.setHSL(n,r,i),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,n=this.g,r=this.b,i=t.elements;return this.r=i[0]*e+i[3]*n+i[6]*r,this.g=i[1]*e+i[4]*n+i[7]*r,this.b=i[2]*e+i[5]*n+i[8]*r,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const pi=new fi;fi.NAMES=li;class mi extends ci{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new fi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=W,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const gi=new Xn,vi=new yn;class _i{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=n,this.usage=Be,this.updateRange={offset:0,count:-1},this.gpuType=wt,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)vi.fromBufferAttribute(this,e),vi.applyMatrix3(t),this.setXY(e,vi.x,vi.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)gi.fromBufferAttribute(this,e),gi.applyMatrix3(t),this.setXYZ(e,gi.x,gi.y,gi.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)gi.fromBufferAttribute(this,e),gi.applyMatrix4(t),this.setXYZ(e,gi.x,gi.y,gi.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)gi.fromBufferAttribute(this,e),gi.applyNormalMatrix(t),this.setXYZ(e,gi.x,gi.y,gi.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)gi.fromBufferAttribute(this,e),gi.transformDirection(t),this.setXYZ(e,gi.x,gi.y,gi.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=gn(e,this.array)),e}setX(t,e){return this.normalized&&(e=vn(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=gn(e,this.array)),e}setY(t,e){return this.normalized&&(e=vn(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=gn(e,this.array)),e}setZ(t,e){return this.normalized&&(e=vn(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=gn(e,this.array)),e}setW(t,e){return this.normalized&&(e=vn(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=vn(e,this.array),n=vn(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return t*=this.itemSize,this.normalized&&(e=vn(e,this.array),n=vn(n,this.array),r=vn(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,i){return t*=this.itemSize,this.normalized&&(e=vn(e,this.array),n=vn(n,this.array),r=vn(r,this.array),i=vn(i,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==Be&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class yi extends _i{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class bi extends _i{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class wi extends _i{constructor(t,e,n){super(new Float32Array(t),e,n)}}let xi=0;const Ei=new Er,Si=new Yr,Mi=new Xn,Ti=new Kn,Ai=new Kn,Ci=new Xn;class Ri extends Ge{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:xi++}),this.uuid=$e(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(xn(t)?bi:yi)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new bn).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return Ei.makeRotationFromQuaternion(t),this.applyMatrix4(Ei),this}rotateX(t){return Ei.makeRotationX(t),this.applyMatrix4(Ei),this}rotateY(t){return Ei.makeRotationY(t),this.applyMatrix4(Ei),this}rotateZ(t){return Ei.makeRotationZ(t),this.applyMatrix4(Ei),this}translate(t,e,n){return Ei.makeTranslation(t,e,n),this.applyMatrix4(Ei),this}scale(t,e,n){return Ei.makeScale(t,e,n),this.applyMatrix4(Ei),this}lookAt(t){return Si.lookAt(t),Si.updateMatrix(),this.applyMatrix4(Si.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Mi).negate(),this.translate(Mi.x,Mi.y,Mi.z),this}setFromPoints(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new wi(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Kn);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Xn(-1/0,-1/0,-1/0),new Xn(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,r=e.length;n<r;n++){const t=e[n];Ti.setFromBufferAttribute(t),this.morphTargetsRelative?(Ci.addVectors(this.boundingBox.min,Ti.min),this.boundingBox.expandByPoint(Ci),Ci.addVectors(this.boundingBox.max,Ti.max),this.boundingBox.expandByPoint(Ci)):(this.boundingBox.expandByPoint(Ti.min),this.boundingBox.expandByPoint(Ti.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new pr);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Xn,1/0);if(t){const n=this.boundingSphere.center;if(Ti.setFromBufferAttribute(t),e)for(let t=0,i=e.length;t<i;t++){const n=e[t];Ai.setFromBufferAttribute(n),this.morphTargetsRelative?(Ci.addVectors(Ti.min,Ai.min),Ti.expandByPoint(Ci),Ci.addVectors(Ti.max,Ai.max),Ti.expandByPoint(Ci)):(Ti.expandByPoint(Ai.min),Ti.expandByPoint(Ai.max))}Ti.getCenter(n);let r=0;for(let e=0,i=t.count;e<i;e++)Ci.fromBufferAttribute(t,e),r=Math.max(r,n.distanceToSquared(Ci));if(e)for(let i=0,o=e.length;i<o;i++){const o=e[i],s=this.morphTargetsRelative;for(let e=0,i=o.count;e<i;e++)Ci.fromBufferAttribute(o,e),s&&(Mi.fromBufferAttribute(t,e),Ci.add(Mi)),r=Math.max(r,n.distanceToSquared(Ci))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,r=e.position.array,i=e.normal.array,o=e.uv.array,s=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new _i(new Float32Array(4*s),4));const a=this.getAttribute("tangent").array,c=[],l=[];for(let M=0;M<s;M++)c[M]=new Xn,l[M]=new Xn;const u=new Xn,h=new Xn,d=new Xn,f=new yn,p=new yn,m=new yn,g=new Xn,v=new Xn;function _(t,e,n){u.fromArray(r,3*t),h.fromArray(r,3*e),d.fromArray(r,3*n),f.fromArray(o,2*t),p.fromArray(o,2*e),m.fromArray(o,2*n),h.sub(u),d.sub(u),p.sub(f),m.sub(f);const i=1/(p.x*m.y-m.x*p.y);isFinite(i)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(d,-p.y).multiplyScalar(i),v.copy(d).multiplyScalar(p.x).addScaledVector(h,-m.x).multiplyScalar(i),c[t].add(g),c[e].add(g),c[n].add(g),l[t].add(v),l[e].add(v),l[n].add(v))}let y=this.groups;0===y.length&&(y=[{start:0,count:n.length}]);for(let M=0,T=y.length;M<T;++M){const t=y[M],e=t.start,r=t.count;for(let i=e,o=e+r;i<o;i+=3)_(n[i+0],n[i+1],n[i+2])}const b=new Xn,w=new Xn,x=new Xn,E=new Xn;function S(t){x.fromArray(i,3*t),E.copy(x);const e=c[t];b.copy(e),b.sub(x.multiplyScalar(x.dot(e))).normalize(),w.crossVectors(E,e);const n=w.dot(l[t]),r=n<0?-1:1;a[4*t]=b.x,a[4*t+1]=b.y,a[4*t+2]=b.z,a[4*t+3]=r}for(let M=0,T=y.length;M<T;++M){const t=y[M],e=t.start,r=t.count;for(let i=e,o=e+r;i<o;i+=3)S(n[i+0]),S(n[i+1]),S(n[i+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new _i(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const r=new Xn,i=new Xn,o=new Xn,s=new Xn,a=new Xn,c=new Xn,l=new Xn,u=new Xn;if(t)for(let h=0,d=t.count;h<d;h+=3){const d=t.getX(h+0),f=t.getX(h+1),p=t.getX(h+2);r.fromBufferAttribute(e,d),i.fromBufferAttribute(e,f),o.fromBufferAttribute(e,p),l.subVectors(o,i),u.subVectors(r,i),l.cross(u),s.fromBufferAttribute(n,d),a.fromBufferAttribute(n,f),c.fromBufferAttribute(n,p),s.add(l),a.add(l),c.add(l),n.setXYZ(d,s.x,s.y,s.z),n.setXYZ(f,a.x,a.y,a.z),n.setXYZ(p,c.x,c.y,c.z)}else for(let t=0,h=e.count;t<h;t+=3)r.fromBufferAttribute(e,t+0),i.fromBufferAttribute(e,t+1),o.fromBufferAttribute(e,t+2),l.subVectors(o,i),u.subVectors(r,i),l.cross(u),n.setXYZ(t+0,l.x,l.y,l.z),n.setXYZ(t+1,l.x,l.y,l.z),n.setXYZ(t+2,l.x,l.y,l.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Ci.fromBufferAttribute(t,e),Ci.normalize(),t.setXYZ(e,Ci.x,Ci.y,Ci.z)}toNonIndexed(){function t(t,e){const n=t.array,r=t.itemSize,i=t.normalized,o=new n.constructor(e.length*r);let s=0,a=0;for(let c=0,l=e.length;c<l;c++){s=t.isInterleavedBufferAttribute?e[c]*t.data.stride+t.offset:e[c]*r;for(let t=0;t<r;t++)o[a++]=n[s++]}return new _i(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Ri,n=this.index.array,r=this.attributes;for(const s in r){const i=r[s],o=t(i,n);e.setAttribute(s,o)}const i=this.morphAttributes;for(const s in i){const r=[],o=i[s];for(let e=0,i=o.length;e<i;e++){const i=o[e],s=t(i,n);r.push(s)}e.morphAttributes[s]=r}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let s=0,a=o.length;s<a;s++){const t=o[s];e.addGroup(t.start,t.count,t.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const a in n){const e=n[a];t.data.attributes[a]=e.toJSON(t.data)}const r={};let i=!1;for(const a in this.morphAttributes){const e=this.morphAttributes[a],n=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];n.push(i.toJSON(t.data))}n.length>0&&(r[a]=n,i=!0)}i&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const s=this.boundingSphere;return null!==s&&(t.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const r=t.attributes;for(const c in r){const t=r[c];this.setAttribute(c,t.clone(e))}const i=t.morphAttributes;for(const c in i){const t=[],n=i[c];for(let r=0,i=n.length;r<i;r++)t.push(n[r].clone(e));this.morphAttributes[c]=t}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let c=0,l=o.length;c<l;c++){const t=o[c];this.addGroup(t.start,t.count,t.materialIndex)}const s=t.boundingBox;null!==s&&(this.boundingBox=s.clone());const a=t.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Pi=new Er,Oi=new xr,Li=new pr,ki=new Xn,Ii=new Xn,Di=new Xn,Ni=new Xn,Ui=new Xn,Fi=new Xn,Bi=new yn,zi=new yn,ji=new yn,Hi=new Xn,Vi=new Xn,Gi=new Xn,Wi=new Xn,qi=new Xn;class Xi extends Yr{constructor(t=new Ri,e=new mi){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry,e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}getVertexPosition(t,e){const n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,o=n.morphTargetsRelative;e.fromBufferAttribute(r,t);const s=this.morphTargetInfluences;if(i&&s){Fi.set(0,0,0);for(let n=0,r=i.length;n<r;n++){const r=s[n],a=i[n];0!==r&&(Ui.fromBufferAttribute(a,t),o?Fi.addScaledVector(Ui,r):Fi.addScaledVector(Ui.sub(e),r))}e.add(Fi)}return e}raycast(t,e){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),Li.copy(n.boundingSphere),Li.applyMatrix4(i),Oi.copy(t.ray).recast(t.near),!1===Li.containsPoint(Oi.origin)){if(null===Oi.intersectSphere(Li,ki))return;if(Oi.origin.distanceToSquared(ki)>(t.far-t.near)**2)return}Pi.copy(i).invert(),Oi.copy(t.ray).applyMatrix4(Pi),null!==n.boundingBox&&!1===Oi.intersectsBox(n.boundingBox)||this._computeIntersections(t,e,Oi)}}_computeIntersections(t,e,n){let r;const i=this.geometry,o=this.material,s=i.index,a=i.attributes.position,c=i.attributes.uv,l=i.attributes.uv1,u=i.attributes.normal,h=i.groups,d=i.drawRange;if(null!==s)if(Array.isArray(o))for(let f=0,p=h.length;f<p;f++){const i=h[f],a=o[i.materialIndex],p=Math.max(i.start,d.start),m=Math.min(s.count,Math.min(i.start+i.count,d.start+d.count));for(let o=p,h=m;o<h;o+=3){const h=s.getX(o),d=s.getX(o+1),f=s.getX(o+2);r=$i(this,a,t,n,c,l,u,h,d,f),r&&(r.faceIndex=Math.floor(o/3),r.face.materialIndex=i.materialIndex,e.push(r))}}else{const i=Math.max(0,d.start),a=Math.min(s.count,d.start+d.count);for(let h=i,d=a;h<d;h+=3){const i=s.getX(h),a=s.getX(h+1),d=s.getX(h+2);r=$i(this,o,t,n,c,l,u,i,a,d),r&&(r.faceIndex=Math.floor(h/3),e.push(r))}}else if(void 0!==a)if(Array.isArray(o))for(let f=0,p=h.length;f<p;f++){const i=h[f],s=o[i.materialIndex],p=Math.max(i.start,d.start),m=Math.min(a.count,Math.min(i.start+i.count,d.start+d.count));for(let o=p,a=m;o<a;o+=3){const a=o,h=o+1,d=o+2;r=$i(this,s,t,n,c,l,u,a,h,d),r&&(r.faceIndex=Math.floor(o/3),r.face.materialIndex=i.materialIndex,e.push(r))}}else{const i=Math.max(0,d.start),s=Math.min(a.count,d.start+d.count);for(let a=i,h=s;a<h;a+=3){const i=a,s=a+1,h=a+2;r=$i(this,o,t,n,c,l,u,i,s,h),r&&(r.faceIndex=Math.floor(a/3),e.push(r))}}}}function Yi(t,e,n,r,i,o,s,a){let c;if(c=e.side===f?r.intersectTriangle(s,o,i,!0,a):r.intersectTriangle(i,o,s,e.side===d,a),null===c)return null;qi.copy(a),qi.applyMatrix4(t.matrixWorld);const l=n.ray.origin.distanceTo(qi);return l<n.near||l>n.far?null:{distance:l,point:qi.clone(),object:t}}function $i(t,e,n,r,i,o,s,a,c,l){t.getVertexPosition(a,Ii),t.getVertexPosition(c,Di),t.getVertexPosition(l,Ni);const u=Yi(t,e,n,r,Ii,Di,Ni,Wi);if(u){i&&(Bi.fromBufferAttribute(i,a),zi.fromBufferAttribute(i,c),ji.fromBufferAttribute(i,l),u.uv=si.getInterpolation(Wi,Ii,Di,Ni,Bi,zi,ji,new yn)),o&&(Bi.fromBufferAttribute(o,a),zi.fromBufferAttribute(o,c),ji.fromBufferAttribute(o,l),u.uv1=si.getInterpolation(Wi,Ii,Di,Ni,Bi,zi,ji,new yn),u.uv2=u.uv1),s&&(Hi.fromBufferAttribute(s,a),Vi.fromBufferAttribute(s,c),Gi.fromBufferAttribute(s,l),u.normal=si.getInterpolation(Wi,Ii,Di,Ni,Hi,Vi,Gi,new Xn),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const t={a:a,b:c,c:l,normal:new Xn,materialIndex:0};si.getNormal(Ii,Di,Ni,t.normal),u.face=t}return u}class Ki extends Ri{constructor(t=1,e=1,n=1,r=1,i=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};const s=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);const a=[],c=[],l=[],u=[];let h=0,d=0;function f(t,e,n,r,i,o,f,p,m,g,v){const _=o/m,y=f/g,b=o/2,w=f/2,x=p/2,E=m+1,S=g+1;let M=0,T=0;const A=new Xn;for(let s=0;s<S;s++){const o=s*y-w;for(let a=0;a<E;a++){const h=a*_-b;A[t]=h*r,A[e]=o*i,A[n]=x,c.push(A.x,A.y,A.z),A[t]=0,A[e]=0,A[n]=p>0?1:-1,l.push(A.x,A.y,A.z),u.push(a/m),u.push(1-s/g),M+=1}}for(let s=0;s<g;s++)for(let t=0;t<m;t++){const e=h+t+E*s,n=h+t+E*(s+1),r=h+(t+1)+E*(s+1),i=h+(t+1)+E*s;a.push(e,n,i),a.push(n,r,i),T+=6}s.addGroup(d,T,v),d+=T,h+=M}f("z","y","x",-1,-1,n,e,t,o,i,0),f("z","y","x",1,-1,n,e,-t,o,i,1),f("x","z","y",1,1,t,n,e,r,o,2),f("x","z","y",1,-1,t,n,-e,r,o,3),f("x","y","z",1,-1,t,e,n,r,i,4),f("x","y","z",-1,-1,t,e,-n,r,i,5),this.setIndex(a),this.setAttribute("position",new wi(c,3)),this.setAttribute("normal",new wi(l,3)),this.setAttribute("uv",new wi(u,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Ki(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Ji(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function Zi(t){const e={};for(let n=0;n<t.length;n++){const r=Ji(t[n]);for(const t in r)e[t]=r[t]}return e}function Qi(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function to(t){return null===t.getRenderTarget()?t.outputColorSpace:Ae}const eo={clone:Ji,merge:Zi};var no="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",ro="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";class io extends ci{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=no,this.fragmentShader=ro,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Ji(t.uniforms),this.uniformsGroups=Qi(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r],i=n.value;i&&i.isTexture?e.uniforms[r]={type:"t",value:i.toJSON(t).uuid}:i&&i.isColor?e.uniforms[r]={type:"c",value:i.getHex()}:i&&i.isVector2?e.uniforms[r]={type:"v2",value:i.toArray()}:i&&i.isVector3?e.uniforms[r]={type:"v3",value:i.toArray()}:i&&i.isVector4?e.uniforms[r]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?e.uniforms[r]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?e.uniforms[r]={type:"m4",value:i.toArray()}:e.uniforms[r]={value:i}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class oo extends Yr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Er,this.projectionMatrix=new Er,this.projectionMatrixInverse=new Er,this.coordinateSystem=He}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class so extends oo{constructor(t=50,e=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*Ye*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*Xe*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*Ye*Math.atan(Math.tan(.5*Xe*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,r,i,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*Xe*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const t=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/t,e-=o.offsetY*n/s,r*=o.width/t,n*=o.height/s}const s=this.filmOffset;0!==s&&(i+=t*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const ao=-90,co=1;class lo extends Yr{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null;const r=new so(ao,co,t,e);r.layers=this.layers,this.add(r);const i=new so(ao,co,t,e);i.layers=this.layers,this.add(i);const o=new so(ao,co,t,e);o.layers=this.layers,this.add(o);const s=new so(ao,co,t,e);s.layers=this.layers,this.add(s);const a=new so(ao,co,t,e);a.layers=this.layers,this.add(a);const c=new so(ao,co,t,e);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[n,r,i,o,s,a]=e;for(const c of e)this.remove(c);if(t===He)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),i.up.set(0,0,-1),i.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),a.up.set(0,1,0),a.lookAt(0,0,-1);else{if(t!==Ve)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),i.up.set(0,0,1),i.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),a.up.set(0,-1,0),a.lookAt(0,0,-1)}for(const c of e)this.add(c),c.updateMatrixWorld()}update(t,e){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[r,i,o,s,a,c]=this.children,l=t.getRenderTarget(),u=t.toneMapping,h=t.xr.enabled;t.toneMapping=Y,t.xr.enabled=!1;const d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,r),t.setRenderTarget(n,1),t.render(e,i),t.setRenderTarget(n,2),t.render(e,o),t.setRenderTarget(n,3),t.render(e,s),t.setRenderTarget(n,4),t.render(e,a),n.texture.generateMipmaps=d,t.setRenderTarget(n,5),t.render(e,c),t.setRenderTarget(l),t.toneMapping=u,t.xr.enabled=h,n.texture.needsPMREMUpdate=!0}}class uo extends jn{constructor(t,e,n,r,i,o,s,a,c,l){t=void 0!==t?t:[],e=void 0!==e?e:et,super(t,e,n,r,i,o,s,a,c,l),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class ho extends Vn{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},r=[n,n,n,n,n,n];void 0!==e.encoding&&(Mn("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),e.colorSpace=e.encoding===be?Te:Me),this.texture=new uo(r,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:dt}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new Ki(5,5,5),i=new io({name:"CubemapFromEquirect",uniforms:Ji(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:f,blending:m});i.uniforms.tEquirect.value=e;const o=new Xi(r,i),s=e.minFilter;e.minFilter===pt&&(e.minFilter=dt);const a=new lo(1,10,this);return a.update(t,o),e.minFilter=s,o.geometry.dispose(),o.material.dispose(),this}clear(t,e,n,r){const i=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,n,r);t.setRenderTarget(i)}}const fo=new Xn,po=new Xn,mo=new bn;class go{constructor(t=new Xn(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const r=fo.subVectors(n,e).cross(po.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const n=t.delta(fo),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const i=-(t.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:e.copy(t.start).addScaledVector(n,i)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||mo.getNormalMatrix(t),r=this.coplanarPoint(fo).applyMatrix4(t),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const vo=new pr,_o=new Xn;class yo{constructor(t=new go,e=new go,n=new go,r=new go,i=new go,o=new go){this.planes=[t,e,n,r,i,o]}set(t,e,n,r,i,o){const s=this.planes;return s[0].copy(t),s[1].copy(e),s[2].copy(n),s[3].copy(r),s[4].copy(i),s[5].copy(o),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t,e=He){const n=this.planes,r=t.elements,i=r[0],o=r[1],s=r[2],a=r[3],c=r[4],l=r[5],u=r[6],h=r[7],d=r[8],f=r[9],p=r[10],m=r[11],g=r[12],v=r[13],_=r[14],y=r[15];if(n[0].setComponents(a-i,h-c,m-d,y-g).normalize(),n[1].setComponents(a+i,h+c,m+d,y+g).normalize(),n[2].setComponents(a+o,h+l,m+f,y+v).normalize(),n[3].setComponents(a-o,h-l,m-f,y-v).normalize(),n[4].setComponents(a-s,h-u,m-p,y-_).normalize(),e===He)n[5].setComponents(a+s,h+u,m+p,y+_).normalize();else{if(e!==Ve)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);n[5].setComponents(s,u,p,_).normalize()}return this}intersectsObject(t){if(void 0!==t.boundingSphere)null===t.boundingSphere&&t.computeBoundingSphere(),vo.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;null===e.boundingSphere&&e.computeBoundingSphere(),vo.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(vo)}intersectsSprite(t){return vo.center.set(0,0,0),vo.radius=.7071067811865476,vo.applyMatrix4(t.matrixWorld),this.intersectsSphere(vo)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let i=0;i<6;i++){const t=e[i].distanceToPoint(n);if(t<r)return!1}return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const r=e[n];if(_o.x=r.normal.x>0?t.max.x:t.min.x,_o.y=r.normal.y>0?t.max.y:t.min.y,_o.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(_o)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function bo(){let t=null,e=!1,n=null,r=null;function i(e,o){n(e,o),r=t.requestAnimationFrame(i)}return{start:function(){!0!==e&&null!==n&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function wo(t,e){const n=e.isWebGL2,r=new WeakMap;function i(e,r){const i=e.array,o=e.usage,s=t.createBuffer();let a;if(t.bindBuffer(r,s),t.bufferData(r,i,o),e.onUploadCallback(),i instanceof Float32Array)a=t.FLOAT;else if(i instanceof Uint16Array)if(e.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");a=t.HALF_FLOAT}else a=t.UNSIGNED_SHORT;else if(i instanceof Int16Array)a=t.SHORT;else if(i instanceof Uint32Array)a=t.UNSIGNED_INT;else if(i instanceof Int32Array)a=t.INT;else if(i instanceof Int8Array)a=t.BYTE;else if(i instanceof Uint8Array)a=t.UNSIGNED_BYTE;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);a=t.UNSIGNED_BYTE}return{buffer:s,type:a,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}function o(e,r,i){const o=r.array,s=r.updateRange;t.bindBuffer(i,e),-1===s.count?t.bufferSubData(i,0,o):(n?t.bufferSubData(i,s.offset*o.BYTES_PER_ELEMENT,o,s.offset,s.count):t.bufferSubData(i,s.offset*o.BYTES_PER_ELEMENT,o.subarray(s.offset,s.offset+s.count)),s.count=-1),r.onUploadCallback()}function s(t){return t.isInterleavedBufferAttribute&&(t=t.data),r.get(t)}function a(e){e.isInterleavedBufferAttribute&&(e=e.data);const n=r.get(e);n&&(t.deleteBuffer(n.buffer),r.delete(e))}function c(t,e){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);void 0===n?r.set(t,i(t,e)):n.version<t.version&&(o(n.buffer,t,e),n.version=t.version)}return{get:s,remove:a,update:c}}class xo extends Ri{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const i=t/2,o=e/2,s=Math.floor(n),a=Math.floor(r),c=s+1,l=a+1,u=t/s,h=e/a,d=[],f=[],p=[],m=[];for(let g=0;g<l;g++){const t=g*h-o;for(let e=0;e<c;e++){const n=e*u-i;f.push(n,-t,0),p.push(0,0,1),m.push(e/s),m.push(1-g/a)}}for(let g=0;g<a;g++)for(let t=0;t<s;t++){const e=t+c*g,n=t+c*(g+1),r=t+1+c*(g+1),i=t+1+c*g;d.push(e,n,i),d.push(n,r,i)}this.setIndex(d),this.setAttribute("position",new wi(f,3)),this.setAttribute("normal",new wi(p,3)),this.setAttribute("uv",new wi(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new xo(t.width,t.height,t.widthSegments,t.heightSegments)}}var Eo="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",So="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",Mo="#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",To="#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",Ao="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",Co="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",Ro="vec3 transformed = vec3( position );",Po="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",Oo="float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",Lo="#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",ko="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",Io="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",Do="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",No="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",Uo="#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",Fo="#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",Bo="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",zo="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",jo="#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",Ho="#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",Vo="#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",Go="vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",Wo="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",qo="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",Xo="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",Yo="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",$o="gl_FragColor = linearToOutputTexel( gl_FragColor );",Ko="vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",Jo="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",Zo="#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",Qo="#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",ts="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",es="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",ns="#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",rs="#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",is="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",os="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",ss="#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",as="#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",cs="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",ls="LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",us="varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",hs="uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",ds="#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",fs="ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",ps="varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",ms="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",gs="varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",vs="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tanisotropyV /= material.anisotropy;\n\tmaterial.anisotropy = saturate( material.anisotropy );\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;\n#endif",_s="struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",ys="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",bs="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",ws="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",xs="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",Es="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",Ss="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",Ms="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",Ts="#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, vMapUv );\n#endif",As="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",Cs="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",Rs="#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",Ps="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",Os="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",Ls="#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",ks="#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",Is="#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",Ds="#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",Ns="float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 geometryNormal = normal;",Us="#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",Fs="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",Bs="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",zs="#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",js="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",Hs="#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",Vs="#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",Gs="#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",Ws="#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",qs="#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",Xs="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",Ys="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",$s="vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",Ks="#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",Js="#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",Zs="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",Qs="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",ta="#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",ea="#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",na="#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",ra="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",ia="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",oa="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",sa="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",aa="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",ca="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",la="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",ua="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",ha="#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",da="#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",fa="#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",pa="#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",ma="#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",ga="#ifdef USE_UV\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",va="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif";const _a="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",ya="uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",ba="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",wa="#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",xa="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",Ea="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",Sa="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",Ma="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",Ta="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",Aa="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",Ca="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",Ra="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",Pa="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",Oa="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",La="#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",ka="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Ia="#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Da="#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Na="#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",Ua="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Fa="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",Ba="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",za="#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",ja="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Ha="#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",Va="#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Ga="#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Wa="#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",qa="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",Xa="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",Ya="#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",$a="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",Ka="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",Ja="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",Za={alphamap_fragment:Eo,alphamap_pars_fragment:So,alphatest_fragment:Mo,alphatest_pars_fragment:To,aomap_fragment:Ao,aomap_pars_fragment:Co,begin_vertex:Ro,beginnormal_vertex:Po,bsdfs:Oo,iridescence_fragment:Lo,bumpmap_pars_fragment:ko,clipping_planes_fragment:Io,clipping_planes_pars_fragment:Do,clipping_planes_pars_vertex:No,clipping_planes_vertex:Uo,color_fragment:Fo,color_pars_fragment:Bo,color_pars_vertex:zo,color_vertex:jo,common:Ho,cube_uv_reflection_fragment:Vo,defaultnormal_vertex:Go,displacementmap_pars_vertex:Wo,displacementmap_vertex:qo,emissivemap_fragment:Xo,emissivemap_pars_fragment:Yo,encodings_fragment:$o,encodings_pars_fragment:Ko,envmap_fragment:Jo,envmap_common_pars_fragment:Zo,envmap_pars_fragment:Qo,envmap_pars_vertex:ts,envmap_physical_pars_fragment:ds,envmap_vertex:es,fog_vertex:ns,fog_pars_vertex:rs,fog_fragment:is,fog_pars_fragment:os,gradientmap_pars_fragment:ss,lightmap_fragment:as,lightmap_pars_fragment:cs,lights_lambert_fragment:ls,lights_lambert_pars_fragment:us,lights_pars_begin:hs,lights_toon_fragment:fs,lights_toon_pars_fragment:ps,lights_phong_fragment:ms,lights_phong_pars_fragment:gs,lights_physical_fragment:vs,lights_physical_pars_fragment:_s,lights_fragment_begin:ys,lights_fragment_maps:bs,lights_fragment_end:ws,logdepthbuf_fragment:xs,logdepthbuf_pars_fragment:Es,logdepthbuf_pars_vertex:Ss,logdepthbuf_vertex:Ms,map_fragment:Ts,map_pars_fragment:As,map_particle_fragment:Cs,map_particle_pars_fragment:Rs,metalnessmap_fragment:Ps,metalnessmap_pars_fragment:Os,morphcolor_vertex:Ls,morphnormal_vertex:ks,morphtarget_pars_vertex:Is,morphtarget_vertex:Ds,normal_fragment_begin:Ns,normal_fragment_maps:Us,normal_pars_fragment:Fs,normal_pars_vertex:Bs,normal_vertex:zs,normalmap_pars_fragment:js,clearcoat_normal_fragment_begin:Hs,clearcoat_normal_fragment_maps:Vs,clearcoat_pars_fragment:Gs,iridescence_pars_fragment:Ws,output_fragment:qs,packing:Xs,premultiplied_alpha_fragment:Ys,project_vertex:$s,dithering_fragment:Ks,dithering_pars_fragment:Js,roughnessmap_fragment:Zs,roughnessmap_pars_fragment:Qs,shadowmap_pars_fragment:ta,shadowmap_pars_vertex:ea,shadowmap_vertex:na,shadowmask_pars_fragment:ra,skinbase_vertex:ia,skinning_pars_vertex:oa,skinning_vertex:sa,skinnormal_vertex:aa,specularmap_fragment:ca,specularmap_pars_fragment:la,tonemapping_fragment:ua,tonemapping_pars_fragment:ha,transmission_fragment:da,transmission_pars_fragment:fa,uv_pars_fragment:pa,uv_pars_vertex:ma,uv_vertex:ga,worldpos_vertex:va,background_vert:_a,background_frag:ya,backgroundCube_vert:ba,backgroundCube_frag:wa,cube_vert:xa,cube_frag:Ea,depth_vert:Sa,depth_frag:Ma,distanceRGBA_vert:Ta,distanceRGBA_frag:Aa,equirect_vert:Ca,equirect_frag:Ra,linedashed_vert:Pa,linedashed_frag:Oa,meshbasic_vert:La,meshbasic_frag:ka,meshlambert_vert:Ia,meshlambert_frag:Da,meshmatcap_vert:Na,meshmatcap_frag:Ua,meshnormal_vert:Fa,meshnormal_frag:Ba,meshphong_vert:za,meshphong_frag:ja,meshphysical_vert:Ha,meshphysical_frag:Va,meshtoon_vert:Ga,meshtoon_frag:Wa,points_vert:qa,points_frag:Xa,shadow_vert:Ya,shadow_frag:$a,sprite_vert:Ka,sprite_frag:Ja},Qa={common:{diffuse:{value:new fi(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new bn},alphaMap:{value:null},alphaMapTransform:{value:new bn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new bn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new bn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new bn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new bn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new bn},normalScale:{value:new yn(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new bn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new bn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new bn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new bn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new fi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new fi(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new bn},alphaTest:{value:0},uvTransform:{value:new bn}},sprite:{diffuse:{value:new fi(16777215)},opacity:{value:1},center:{value:new yn(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new bn},alphaMap:{value:null},alphaMapTransform:{value:new bn},alphaTest:{value:0}}},tc={basic:{uniforms:Zi([Qa.common,Qa.specularmap,Qa.envmap,Qa.aomap,Qa.lightmap,Qa.fog]),vertexShader:Za.meshbasic_vert,fragmentShader:Za.meshbasic_frag},lambert:{uniforms:Zi([Qa.common,Qa.specularmap,Qa.envmap,Qa.aomap,Qa.lightmap,Qa.emissivemap,Qa.bumpmap,Qa.normalmap,Qa.displacementmap,Qa.fog,Qa.lights,{emissive:{value:new fi(0)}}]),vertexShader:Za.meshlambert_vert,fragmentShader:Za.meshlambert_frag},phong:{uniforms:Zi([Qa.common,Qa.specularmap,Qa.envmap,Qa.aomap,Qa.lightmap,Qa.emissivemap,Qa.bumpmap,Qa.normalmap,Qa.displacementmap,Qa.fog,Qa.lights,{emissive:{value:new fi(0)},specular:{value:new fi(1118481)},shininess:{value:30}}]),vertexShader:Za.meshphong_vert,fragmentShader:Za.meshphong_frag},standard:{uniforms:Zi([Qa.common,Qa.envmap,Qa.aomap,Qa.lightmap,Qa.emissivemap,Qa.bumpmap,Qa.normalmap,Qa.displacementmap,Qa.roughnessmap,Qa.metalnessmap,Qa.fog,Qa.lights,{emissive:{value:new fi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Za.meshphysical_vert,fragmentShader:Za.meshphysical_frag},toon:{uniforms:Zi([Qa.common,Qa.aomap,Qa.lightmap,Qa.emissivemap,Qa.bumpmap,Qa.normalmap,Qa.displacementmap,Qa.gradientmap,Qa.fog,Qa.lights,{emissive:{value:new fi(0)}}]),vertexShader:Za.meshtoon_vert,fragmentShader:Za.meshtoon_frag},matcap:{uniforms:Zi([Qa.common,Qa.bumpmap,Qa.normalmap,Qa.displacementmap,Qa.fog,{matcap:{value:null}}]),vertexShader:Za.meshmatcap_vert,fragmentShader:Za.meshmatcap_frag},points:{uniforms:Zi([Qa.points,Qa.fog]),vertexShader:Za.points_vert,fragmentShader:Za.points_frag},dashed:{uniforms:Zi([Qa.common,Qa.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Za.linedashed_vert,fragmentShader:Za.linedashed_frag},depth:{uniforms:Zi([Qa.common,Qa.displacementmap]),vertexShader:Za.depth_vert,fragmentShader:Za.depth_frag},normal:{uniforms:Zi([Qa.common,Qa.bumpmap,Qa.normalmap,Qa.displacementmap,{opacity:{value:1}}]),vertexShader:Za.meshnormal_vert,fragmentShader:Za.meshnormal_frag},sprite:{uniforms:Zi([Qa.sprite,Qa.fog]),vertexShader:Za.sprite_vert,fragmentShader:Za.sprite_frag},background:{uniforms:{uvTransform:{value:new bn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Za.background_vert,fragmentShader:Za.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Za.backgroundCube_vert,fragmentShader:Za.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Za.cube_vert,fragmentShader:Za.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Za.equirect_vert,fragmentShader:Za.equirect_frag},distanceRGBA:{uniforms:Zi([Qa.common,Qa.displacementmap,{referencePosition:{value:new Xn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Za.distanceRGBA_vert,fragmentShader:Za.distanceRGBA_frag},shadow:{uniforms:Zi([Qa.lights,Qa.fog,{color:{value:new fi(0)},opacity:{value:1}}]),vertexShader:Za.shadow_vert,fragmentShader:Za.shadow_frag}};tc.physical={uniforms:Zi([tc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new bn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new bn},clearcoatNormalScale:{value:new yn(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new bn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new bn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new bn},sheen:{value:0},sheenColor:{value:new fi(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new bn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new bn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new bn},transmissionSamplerSize:{value:new yn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new bn},attenuationDistance:{value:0},attenuationColor:{value:new fi(0)},specularColor:{value:new fi(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new bn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new bn},anisotropyVector:{value:new yn},anisotropyMap:{value:null},anisotropyMapTransform:{value:new bn}}]),vertexShader:Za.meshphysical_vert,fragmentShader:Za.meshphysical_frag};const ec={r:0,b:0,g:0};function nc(t,e,n,r,i,o,s){const a=new fi(0);let c,l,u=!0===o?0:1,h=null,p=0,m=null;function g(o,g){let _=!1,y=!0===g.isScene?g.background:null;if(y&&y.isTexture){const t=g.backgroundBlurriness>0;y=(t?n:e).get(y)}null===y?v(a,u):y&&y.isColor&&(v(y,1),_=!0);const b=t.xr,w=b.getEnvironmentBlendMode();switch(w){case"opaque":_=!0;break;case"additive":r.buffers.color.setClear(0,0,0,1,s),_=!0;break;case"alpha-blend":r.buffers.color.setClear(0,0,0,0,s),_=!0;break}(t.autoClear||_)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),y&&(y.isCubeTexture||y.mapping===ot)?(void 0===l&&(l=new Xi(new Ki(1,1,1),new io({name:"BackgroundCubeMaterial",uniforms:Ji(tc.backgroundCube.uniforms),vertexShader:tc.backgroundCube.vertexShader,fragmentShader:tc.backgroundCube.fragmentShader,side:f,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),l.material.uniforms.envMap.value=y,l.material.uniforms.flipEnvMap.value=y.isCubeTexture&&!1===y.isRenderTargetTexture?-1:1,l.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,l.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,l.material.toneMapped=y.colorSpace!==Te,h===y&&p===y.version&&m===t.toneMapping||(l.material.needsUpdate=!0,h=y,p=y.version,m=t.toneMapping),l.layers.enableAll(),o.unshift(l,l.geometry,l.material,0,0,null)):y&&y.isTexture&&(void 0===c&&(c=new Xi(new xo(2,2),new io({name:"BackgroundMaterial",uniforms:Ji(tc.background.uniforms),vertexShader:tc.background.vertexShader,fragmentShader:tc.background.fragmentShader,side:d,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=y,c.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,c.material.toneMapped=y.colorSpace!==Te,!0===y.matrixAutoUpdate&&y.updateMatrix(),c.material.uniforms.uvTransform.value.copy(y.matrix),h===y&&p===y.version&&m===t.toneMapping||(c.material.needsUpdate=!0,h=y,p=y.version,m=t.toneMapping),c.layers.enableAll(),o.unshift(c,c.geometry,c.material,0,0,null))}function v(e,n){e.getRGB(ec,to(t)),r.buffers.color.setClear(ec.r,ec.g,ec.b,n,s)}return{getClearColor:function(){return a},setClearColor:function(t,e=1){a.set(t),u=e,v(a,u)},getClearAlpha:function(){return u},setClearAlpha:function(t){u=t,v(a,u)},render:g}}function rc(t,e,n,r){const i=t.getParameter(t.MAX_VERTEX_ATTRIBS),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),s=r.isWebGL2||null!==o,a={},c=g(null);let l=c,u=!1;function h(e,r,i,o,a){let c=!1;if(s){const t=m(o,i,r);l!==t&&(l=t,f(l.object)),c=v(e,o,i,a),c&&_(e,o,i,a)}else{const t=!0===r.wireframe;l.geometry===o.id&&l.program===i.id&&l.wireframe===t||(l.geometry=o.id,l.program=i.id,l.wireframe=t,c=!0)}null!==a&&n.update(a,t.ELEMENT_ARRAY_BUFFER),(c||u)&&(u=!1,S(e,r,i,o),null!==a&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(a).buffer))}function d(){return r.isWebGL2?t.createVertexArray():o.createVertexArrayOES()}function f(e){return r.isWebGL2?t.bindVertexArray(e):o.bindVertexArrayOES(e)}function p(e){return r.isWebGL2?t.deleteVertexArray(e):o.deleteVertexArrayOES(e)}function m(t,e,n){const r=!0===n.wireframe;let i=a[t.id];void 0===i&&(i={},a[t.id]=i);let o=i[e.id];void 0===o&&(o={},i[e.id]=o);let s=o[r];return void 0===s&&(s=g(d()),o[r]=s),s}function g(t){const e=[],n=[],r=[];for(let o=0;o<i;o++)e[o]=0,n[o]=0,r[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:r,object:t,attributes:{},index:null}}function v(t,e,n,r){const i=l.attributes,o=e.attributes;let s=0;const a=n.getAttributes();for(const c in a){const e=a[c];if(e.location>=0){const e=i[c];let n=o[c];if(void 0===n&&("instanceMatrix"===c&&t.instanceMatrix&&(n=t.instanceMatrix),"instanceColor"===c&&t.instanceColor&&(n=t.instanceColor)),void 0===e)return!0;if(e.attribute!==n)return!0;if(n&&e.data!==n.data)return!0;s++}}return l.attributesNum!==s||l.index!==r}function _(t,e,n,r){const i={},o=e.attributes;let s=0;const a=n.getAttributes();for(const c in a){const e=a[c];if(e.location>=0){let e=o[c];void 0===e&&("instanceMatrix"===c&&t.instanceMatrix&&(e=t.instanceMatrix),"instanceColor"===c&&t.instanceColor&&(e=t.instanceColor));const n={};n.attribute=e,e&&e.data&&(n.data=e.data),i[c]=n,s++}}l.attributes=i,l.attributesNum=s,l.index=r}function y(){const t=l.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function b(t){w(t,0)}function w(n,i){const o=l.newAttributes,s=l.enabledAttributes,a=l.attributeDivisors;if(o[n]=1,0===s[n]&&(t.enableVertexAttribArray(n),s[n]=1),a[n]!==i){const o=r.isWebGL2?t:e.get("ANGLE_instanced_arrays");o[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),a[n]=i}}function x(){const e=l.newAttributes,n=l.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==e[r]&&(t.disableVertexAttribArray(r),n[r]=0)}function E(e,n,r,i,o,s,a){!0===a?t.vertexAttribIPointer(e,n,r,o,s):t.vertexAttribPointer(e,n,r,i,o,s)}function S(i,o,s,a){if(!1===r.isWebGL2&&(i.isInstancedMesh||a.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;y();const c=a.attributes,l=s.getAttributes(),u=o.defaultAttributeValues;for(const e in l){const o=l[e];if(o.location>=0){let s=c[e];if(void 0===s&&("instanceMatrix"===e&&i.instanceMatrix&&(s=i.instanceMatrix),"instanceColor"===e&&i.instanceColor&&(s=i.instanceColor)),void 0!==s){const e=s.normalized,c=s.itemSize,l=n.get(s);if(void 0===l)continue;const u=l.buffer,h=l.type,d=l.bytesPerElement,f=!0===r.isWebGL2&&(h===t.INT||h===t.UNSIGNED_INT||s.gpuType===yt);if(s.isInterleavedBufferAttribute){const n=s.data,r=n.stride,l=s.offset;if(n.isInstancedInterleavedBuffer){for(let t=0;t<o.locationSize;t++)w(o.location+t,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let t=0;t<o.locationSize;t++)b(o.location+t);t.bindBuffer(t.ARRAY_BUFFER,u);for(let t=0;t<o.locationSize;t++)E(o.location+t,c/o.locationSize,h,e,r*d,(l+c/o.locationSize*t)*d,f)}else{if(s.isInstancedBufferAttribute){for(let t=0;t<o.locationSize;t++)w(o.location+t,s.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let t=0;t<o.locationSize;t++)b(o.location+t);t.bindBuffer(t.ARRAY_BUFFER,u);for(let t=0;t<o.locationSize;t++)E(o.location+t,c/o.locationSize,h,e,c*d,c/o.locationSize*t*d,f)}}else if(void 0!==u){const n=u[e];if(void 0!==n)switch(n.length){case 2:t.vertexAttrib2fv(o.location,n);break;case 3:t.vertexAttrib3fv(o.location,n);break;case 4:t.vertexAttrib4fv(o.location,n);break;default:t.vertexAttrib1fv(o.location,n)}}}}x()}function M(){C();for(const t in a){const e=a[t];for(const t in e){const n=e[t];for(const t in n)p(n[t].object),delete n[t];delete e[t]}delete a[t]}}function T(t){if(void 0===a[t.id])return;const e=a[t.id];for(const n in e){const t=e[n];for(const e in t)p(t[e].object),delete t[e];delete e[n]}delete a[t.id]}function A(t){for(const e in a){const n=a[e];if(void 0===n[t.id])continue;const r=n[t.id];for(const t in r)p(r[t].object),delete r[t];delete n[t.id]}}function C(){R(),u=!0,l!==c&&(l=c,f(l.object))}function R(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:h,reset:C,resetDefaultState:R,dispose:M,releaseStatesOfGeometry:T,releaseStatesOfProgram:A,initAttributes:y,enableAttribute:b,disableUnusedAttributes:x}}function ic(t,e,n,r){const i=r.isWebGL2;let o;function s(t){o=t}function a(e,r){t.drawArrays(o,e,r),n.update(r,o,1)}function c(r,s,a){if(0===a)return;let c,l;if(i)c=t,l="drawArraysInstanced";else if(c=e.get("ANGLE_instanced_arrays"),l="drawArraysInstancedANGLE",null===c)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[l](o,r,s,a),n.update(s,o,a)}this.setMode=s,this.render=a,this.renderInstances=c}function oc(t,e,n){let r;function i(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const n=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const s="undefined"!==typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===t.constructor.name;let a=void 0!==n.precision?n.precision:"highp";const c=o(a);c!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",c,"instead."),a=c);const l=s||e.has("WEBGL_draw_buffers"),u=!0===n.logarithmicDepthBuffer,h=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),d=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f=t.getParameter(t.MAX_TEXTURE_SIZE),p=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),m=t.getParameter(t.MAX_VERTEX_ATTRIBS),g=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),v=t.getParameter(t.MAX_VARYING_VECTORS),_=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),y=d>0,b=s||e.has("OES_texture_float"),w=y&&b,x=s?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:s,drawBuffers:l,getMaxAnisotropy:i,getMaxPrecision:o,precision:a,logarithmicDepthBuffer:u,maxTextures:h,maxVertexTextures:d,maxTextureSize:f,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:_,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:w,maxSamples:x}}function sc(t){const e=this;let n=null,r=0,i=!1,o=!1;const s=new go,a=new bn,c={value:null,needsUpdate:!1};function l(){c.value!==n&&(c.value=n,c.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(t,n,r,i){const o=null!==t?t.length:0;let l=null;if(0!==o){if(l=c.value,!0!==i||null===l){const e=r+4*o,i=n.matrixWorldInverse;a.getNormalMatrix(i),(null===l||l.length<e)&&(l=new Float32Array(e));for(let n=0,c=r;n!==o;++n,c+=4)s.copy(t[n]).applyMatrix4(i,a),s.normal.toArray(l,c),l[c+3]=s.constant}c.value=l,c.needsUpdate=!0}return e.numPlanes=o,e.numIntersection=0,l}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e){const n=0!==t.length||e||0!==r||i;return i=e,r=t.length,n},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(t,e){n=u(t,e,0)},this.setState=function(e,s,a){const h=e.clippingPlanes,d=e.clipIntersection,f=e.clipShadows,p=t.get(e);if(!i||null===h||0===h.length||o&&!f)o?u(null):l();else{const t=o?0:r,e=4*t;let i=p.clippingState||null;c.value=i,i=u(h,s,e,a);for(let r=0;r!==e;++r)i[r]=n[r];p.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=t}}}function ac(t){let e=new WeakMap;function n(t,e){return e===rt?t.mapping=et:e===it&&(t.mapping=nt),t}function r(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){const o=r.mapping;if(o===rt||o===it){if(e.has(r)){const t=e.get(r).texture;return n(t,r.mapping)}{const o=r.image;if(o&&o.height>0){const s=new ho(o.height/2);return s.fromEquirectangularTexture(t,r),e.set(r,s),r.addEventListener("dispose",i),n(s.texture,r.mapping)}return null}}}return r}function i(t){const n=t.target;n.removeEventListener("dispose",i);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}function o(){e=new WeakMap}return{get:r,dispose:o}}class cc extends oo{constructor(t=-1,e=1,n=1,r=-1,i=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-t,o=n+t,s=r+e,a=r-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=t*this.view.offsetX,o=i+t*this.view.width,s-=e*this.view.offsetY,a=s-e*this.view.height}this.projectionMatrix.makeOrthographic(i,o,s,a,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}const lc=4,uc=[.125,.215,.35,.446,.526,.582],hc=20,dc=new cc,fc=new fi;let pc=null;const mc=(1+Math.sqrt(5))/2,gc=1/mc,vc=[new Xn(1,1,1),new Xn(-1,1,1),new Xn(1,1,-1),new Xn(-1,1,-1),new Xn(0,mc,gc),new Xn(0,mc,-gc),new Xn(gc,0,mc),new Xn(-gc,0,mc),new Xn(mc,gc,0),new Xn(-mc,gc,0)];class _c{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){pc=this._renderer.getRenderTarget(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(t,n,r,i),e>0&&this._blur(i,0,0,e),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Sc(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Ec(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(pc),t.scissorTest=!1,wc(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===et||t.mapping===nt?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),pc=this._renderer.getRenderTarget();const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:dt,minFilter:dt,generateMipmaps:!1,type:xt,format:At,colorSpace:Ae,depthBuffer:!1},r=bc(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=bc(t,e,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=yc(r)),this._blurMaterial=xc(r,t,e)}return r}_compileMaterial(t){const e=new Xi(this._lodPlanes[0],t);this._renderer.compile(e,dc)}_sceneToCubeUV(t,e,n,r){const i=90,o=1,s=new so(i,o,e,n),a=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],l=this._renderer,u=l.autoClear,h=l.toneMapping;l.getClearColor(fc),l.toneMapping=Y,l.autoClear=!1;const d=new mi({name:"PMREM.Background",side:f,depthWrite:!1,depthTest:!1}),p=new Xi(new Ki,d);let m=!1;const g=t.background;g?g.isColor&&(d.color.copy(g),t.background=null,m=!0):(d.color.copy(fc),m=!0);for(let f=0;f<6;f++){const e=f%3;0===e?(s.up.set(0,a[f],0),s.lookAt(c[f],0,0)):1===e?(s.up.set(0,0,a[f]),s.lookAt(0,c[f],0)):(s.up.set(0,a[f],0),s.lookAt(0,0,c[f]));const n=this._cubeSize;wc(r,e*n,f>2?n:0,n,n),l.setRenderTarget(r),m&&l.render(p,s),l.render(t,s)}p.geometry.dispose(),p.material.dispose(),l.toneMapping=h,l.autoClear=u,t.background=g}_textureToCubeUV(t,e){const n=this._renderer,r=t.mapping===et||t.mapping===nt;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=Sc()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Ec());const i=r?this._cubemapMaterial:this._equirectMaterial,o=new Xi(this._lodPlanes[0],i),s=i.uniforms;s["envMap"].value=t;const a=this._cubeSize;wc(e,0,0,3*a,2*a),n.setRenderTarget(e),n.render(o,dc)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const e=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),n=vc[(r-1)%vc.length];this._blur(t,r-1,r,e,n)}e.autoClear=n}_blur(t,e,n,r,i){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,r,"latitudinal",i),this._halfBlur(o,t,n,n,r,"longitudinal",i)}_halfBlur(t,e,n,r,i,o,s){const a=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const l=3,u=new Xi(this._lodPlanes[r],c),h=c.uniforms,d=this._sizeLods[n]-1,f=isFinite(i)?Math.PI/(2*d):2*Math.PI/(2*hc-1),p=i/f,m=isFinite(i)?1+Math.floor(l*p):hc;m>hc&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${hc}`);const g=[];let v=0;for(let x=0;x<hc;++x){const t=x/p,e=Math.exp(-t*t/2);g.push(e),0===x?v+=e:x<m&&(v+=2*e)}for(let x=0;x<g.length;x++)g[x]=g[x]/v;h["envMap"].value=t.texture,h["samples"].value=m,h["weights"].value=g,h["latitudinal"].value="latitudinal"===o,s&&(h["poleAxis"].value=s);const{_lodMax:_}=this;h["dTheta"].value=f,h["mipInt"].value=_-n;const y=this._sizeLods[r],b=3*y*(r>_-lc?r-_+lc:0),w=4*(this._cubeSize-y);wc(e,b,w,3*y,2*y),a.setRenderTarget(e),a.render(u,dc)}}function yc(t){const e=[],n=[],r=[];let i=t;const o=t-lc+1+uc.length;for(let s=0;s<o;s++){const o=Math.pow(2,i);n.push(o);let a=1/o;s>t-lc?a=uc[s-t+lc-1]:0===s&&(a=0),r.push(a);const c=1/(o-2),l=-c,u=1+c,h=[l,l,u,l,u,u,l,l,u,u,l,u],d=6,f=6,p=3,m=2,g=1,v=new Float32Array(p*f*d),_=new Float32Array(m*f*d),y=new Float32Array(g*f*d);for(let t=0;t<d;t++){const e=t%3*2/3-1,n=t>2?0:-1,r=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];v.set(r,p*f*t),_.set(h,m*f*t);const i=[t,t,t,t,t,t];y.set(i,g*f*t)}const b=new Ri;b.setAttribute("position",new _i(v,p)),b.setAttribute("uv",new _i(_,m)),b.setAttribute("faceIndex",new _i(y,g)),e.push(b),i>lc&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function bc(t,e,n){const r=new Vn(t,e,n);return r.texture.mapping=ot,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function wc(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function xc(t,e,n){const r=new Float32Array(hc),i=new Xn(0,1,0),o=new io({name:"SphericalGaussianBlur",defines:{n:hc,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Mc(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:m,depthTest:!1,depthWrite:!1});return o}function Ec(){return new io({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Mc(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:m,depthTest:!1,depthWrite:!1})}function Sc(){return new io({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Mc(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:m,depthTest:!1,depthWrite:!1})}function Mc(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Tc(t){let e=new WeakMap,n=null;function r(r){if(r&&r.isTexture){const s=r.mapping,a=s===rt||s===it,c=s===et||s===nt;if(a||c){if(r.isRenderTargetTexture&&!0===r.needsPMREMUpdate){r.needsPMREMUpdate=!1;let i=e.get(r);return null===n&&(n=new _c(t)),i=a?n.fromEquirectangular(r,i):n.fromCubemap(r,i),e.set(r,i),i.texture}if(e.has(r))return e.get(r).texture;{const s=r.image;if(a&&s&&s.height>0||c&&s&&i(s)){null===n&&(n=new _c(t));const i=a?n.fromEquirectangular(r):n.fromCubemap(r);return e.set(r,i),r.addEventListener("dispose",o),i.texture}return null}}}return r}function i(t){let e=0;const n=6;for(let r=0;r<n;r++)void 0!==t[r]&&e++;return e===n}function o(t){const n=t.target;n.removeEventListener("dispose",o);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}function s(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}return{get:r,dispose:s}}function Ac(t){const e={};function n(n){if(void 0!==e[n])return e[n];let r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return e[n]=r,r}return{has:function(t){return null!==n(t)},init:function(t){t.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(t){const e=n(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function Cc(t,e,n,r){const i={},o=new WeakMap;function s(t){const a=t.target;null!==a.index&&e.remove(a.index);for(const n in a.attributes)e.remove(a.attributes[n]);for(const n in a.morphAttributes){const t=a.morphAttributes[n];for(let n=0,r=t.length;n<r;n++)e.remove(t[n])}a.removeEventListener("dispose",s),delete i[a.id];const c=o.get(a);c&&(e.remove(c),o.delete(a)),r.releaseStatesOfGeometry(a),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,n.memory.geometries--}function a(t,e){return!0===i[e.id]||(e.addEventListener("dispose",s),i[e.id]=!0,n.memory.geometries++),e}function c(n){const r=n.attributes;for(const o in r)e.update(r[o],t.ARRAY_BUFFER);const i=n.morphAttributes;for(const o in i){const n=i[o];for(let r=0,i=n.length;r<i;r++)e.update(n[r],t.ARRAY_BUFFER)}}function l(t){const n=[],r=t.index,i=t.attributes.position;let s=0;if(null!==r){const t=r.array;s=r.version;for(let e=0,r=t.length;e<r;e+=3){const r=t[e+0],i=t[e+1],o=t[e+2];n.push(r,i,i,o,o,r)}}else{const t=i.array;s=i.version;for(let e=0,r=t.length/3-1;e<r;e+=3){const t=e+0,r=e+1,i=e+2;n.push(t,r,r,i,i,t)}}const a=new(xn(n)?bi:yi)(n,1);a.version=s;const c=o.get(t);c&&e.remove(c),o.set(t,a)}function u(t){const e=o.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&l(t)}else l(t);return o.get(t)}return{get:a,update:c,getWireframeAttribute:u}}function Rc(t,e,n,r){const i=r.isWebGL2;let o,s,a;function c(t){o=t}function l(t){s=t.type,a=t.bytesPerElement}function u(e,r){t.drawElements(o,r,s,e*a),n.update(r,o,1)}function h(r,c,l){if(0===l)return;let u,h;if(i)u=t,h="drawElementsInstanced";else if(u=e.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](o,c,s,r*a,l),n.update(c,o,l)}this.setMode=c,this.setIndex=l,this.render=u,this.renderInstances=h}function Pc(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(e,r,i){switch(n.calls++,r){case t.TRIANGLES:n.triangles+=i*(e/3);break;case t.LINES:n.lines+=i*(e/2);break;case t.LINE_STRIP:n.lines+=i*(e-1);break;case t.LINE_LOOP:n.lines+=i*e;break;case t.POINTS:n.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function Oc(t,e){return t[0]-e[0]}function Lc(t,e){return Math.abs(e[1])-Math.abs(t[1])}function kc(t,e,n){const r={},i=new Float32Array(8),o=new WeakMap,s=new Hn,a=[];for(let l=0;l<8;l++)a[l]=[l,0];function c(c,l,u){const h=c.morphTargetInfluences;if(!0===e.isWebGL2){const d=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,f=void 0!==d?d.length:0;let p=o.get(l);if(void 0===p||p.count!==f){void 0!==p&&p.texture.dispose();const v=void 0!==l.morphAttributes.position,_=void 0!==l.morphAttributes.normal,y=void 0!==l.morphAttributes.color,b=l.morphAttributes.position||[],w=l.morphAttributes.normal||[],x=l.morphAttributes.color||[];let E=0;!0===v&&(E=1),!0===_&&(E=2),!0===y&&(E=3);let S=l.attributes.position.count*E,M=1;S>e.maxTextureSize&&(M=Math.ceil(S/e.maxTextureSize),S=e.maxTextureSize);const T=new Float32Array(S*M*4*f),A=new Gn(T,S,M,f);A.type=wt,A.needsUpdate=!0;const C=4*E;for(let P=0;P<f;P++){const O=b[P],L=w[P],k=x[P],I=S*M*4*P;for(let D=0;D<O.count;D++){const N=D*C;!0===v&&(s.fromBufferAttribute(O,D),T[I+N+0]=s.x,T[I+N+1]=s.y,T[I+N+2]=s.z,T[I+N+3]=0),!0===_&&(s.fromBufferAttribute(L,D),T[I+N+4]=s.x,T[I+N+5]=s.y,T[I+N+6]=s.z,T[I+N+7]=0),!0===y&&(s.fromBufferAttribute(k,D),T[I+N+8]=s.x,T[I+N+9]=s.y,T[I+N+10]=s.z,T[I+N+11]=4===k.itemSize?s.w:1)}}function R(){A.dispose(),o.delete(l),l.removeEventListener("dispose",R)}p={count:f,texture:A,size:new yn(S,M)},o.set(l,p),l.addEventListener("dispose",R)}let m=0;for(let U=0;U<h.length;U++)m+=h[U];const g=l.morphTargetsRelative?1:1-m;u.getUniforms().setValue(t,"morphTargetBaseInfluence",g),u.getUniforms().setValue(t,"morphTargetInfluences",h),u.getUniforms().setValue(t,"morphTargetsTexture",p.texture,n),u.getUniforms().setValue(t,"morphTargetsTextureSize",p.size)}else{const F=void 0===h?0:h.length;let B=r[l.id];if(void 0===B||B.length!==F){B=[];for(let G=0;G<F;G++)B[G]=[G,0];r[l.id]=B}for(let W=0;W<F;W++){const q=B[W];q[0]=W,q[1]=h[W]}B.sort(Lc);for(let X=0;X<8;X++)X<F&&B[X][1]?(a[X][0]=B[X][0],a[X][1]=B[X][1]):(a[X][0]=Number.MAX_SAFE_INTEGER,a[X][1]=0);a.sort(Oc);const z=l.morphAttributes.position,j=l.morphAttributes.normal;let H=0;for(let Y=0;Y<8;Y++){const $=a[Y],K=$[0],J=$[1];K!==Number.MAX_SAFE_INTEGER&&J?(z&&l.getAttribute("morphTarget"+Y)!==z[K]&&l.setAttribute("morphTarget"+Y,z[K]),j&&l.getAttribute("morphNormal"+Y)!==j[K]&&l.setAttribute("morphNormal"+Y,j[K]),i[Y]=J,H+=J):(z&&!0===l.hasAttribute("morphTarget"+Y)&&l.deleteAttribute("morphTarget"+Y),j&&!0===l.hasAttribute("morphNormal"+Y)&&l.deleteAttribute("morphNormal"+Y),i[Y]=0)}const V=l.morphTargetsRelative?1:1-H;u.getUniforms().setValue(t,"morphTargetBaseInfluence",V),u.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:c}}function Ic(t,e,n,r){let i=new WeakMap;function o(o){const s=r.render.frame,c=o.geometry,l=e.get(o,c);return i.get(l)!==s&&(e.update(l),i.set(l,s)),o.isInstancedMesh&&(!1===o.hasEventListener("dispose",a)&&o.addEventListener("dispose",a),n.update(o.instanceMatrix,t.ARRAY_BUFFER),null!==o.instanceColor&&n.update(o.instanceColor,t.ARRAY_BUFFER)),l}function s(){i=new WeakMap}function a(t){const e=t.target;e.removeEventListener("dispose",a),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:o,dispose:s}}const Dc=new jn,Nc=new Gn,Uc=new Wn,Fc=new uo,Bc=[],zc=[],jc=new Float32Array(16),Hc=new Float32Array(9),Vc=new Float32Array(4);function Gc(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let o=Bc[i];if(void 0===o&&(o=new Float32Array(i),Bc[i]=o),0!==e){r.toArray(o,0);for(let r=1,i=0;r!==e;++r)i+=n,t[r].toArray(o,i)}return o}function Wc(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function qc(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function Xc(t,e){let n=zc[e];void 0===n&&(n=new Int32Array(e),zc[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function Yc(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function $c(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Wc(n,e))return;t.uniform2fv(this.addr,e),qc(n,e)}}function Kc(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Wc(n,e))return;t.uniform3fv(this.addr,e),qc(n,e)}}function Jc(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Wc(n,e))return;t.uniform4fv(this.addr,e),qc(n,e)}}function Zc(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Wc(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),qc(n,e)}else{if(Wc(n,r))return;Vc.set(r),t.uniformMatrix2fv(this.addr,!1,Vc),qc(n,r)}}function Qc(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Wc(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),qc(n,e)}else{if(Wc(n,r))return;Hc.set(r),t.uniformMatrix3fv(this.addr,!1,Hc),qc(n,r)}}function tl(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Wc(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),qc(n,e)}else{if(Wc(n,r))return;jc.set(r),t.uniformMatrix4fv(this.addr,!1,jc),qc(n,r)}}function el(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function nl(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Wc(n,e))return;t.uniform2iv(this.addr,e),qc(n,e)}}function rl(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Wc(n,e))return;t.uniform3iv(this.addr,e),qc(n,e)}}function il(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Wc(n,e))return;t.uniform4iv(this.addr,e),qc(n,e)}}function ol(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function sl(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Wc(n,e))return;t.uniform2uiv(this.addr,e),qc(n,e)}}function al(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Wc(n,e))return;t.uniform3uiv(this.addr,e),qc(n,e)}}function cl(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Wc(n,e))return;t.uniform4uiv(this.addr,e),qc(n,e)}}function ll(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(e||Dc,i)}function ul(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||Uc,i)}function hl(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||Fc,i)}function dl(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||Nc,i)}function fl(t){switch(t){case 5126:return Yc;case 35664:return $c;case 35665:return Kc;case 35666:return Jc;case 35674:return Zc;case 35675:return Qc;case 35676:return tl;case 5124:case 35670:return el;case 35667:case 35671:return nl;case 35668:case 35672:return rl;case 35669:case 35673:return il;case 5125:return ol;case 36294:return sl;case 36295:return al;case 36296:return cl;case 35678:case 36198:case 36298:case 36306:case 35682:return ll;case 35679:case 36299:case 36307:return ul;case 35680:case 36300:case 36308:case 36293:return hl;case 36289:case 36303:case 36311:case 36292:return dl}}function pl(t,e){t.uniform1fv(this.addr,e)}function ml(t,e){const n=Gc(e,this.size,2);t.uniform2fv(this.addr,n)}function gl(t,e){const n=Gc(e,this.size,3);t.uniform3fv(this.addr,n)}function vl(t,e){const n=Gc(e,this.size,4);t.uniform4fv(this.addr,n)}function _l(t,e){const n=Gc(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function yl(t,e){const n=Gc(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function bl(t,e){const n=Gc(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function wl(t,e){t.uniform1iv(this.addr,e)}function xl(t,e){t.uniform2iv(this.addr,e)}function El(t,e){t.uniform3iv(this.addr,e)}function Sl(t,e){t.uniform4iv(this.addr,e)}function Ml(t,e){t.uniform1uiv(this.addr,e)}function Tl(t,e){t.uniform2uiv(this.addr,e)}function Al(t,e){t.uniform3uiv(this.addr,e)}function Cl(t,e){t.uniform4uiv(this.addr,e)}function Rl(t,e,n){const r=this.cache,i=e.length,o=Xc(n,i);Wc(r,o)||(t.uniform1iv(this.addr,o),qc(r,o));for(let s=0;s!==i;++s)n.setTexture2D(e[s]||Dc,o[s])}function Pl(t,e,n){const r=this.cache,i=e.length,o=Xc(n,i);Wc(r,o)||(t.uniform1iv(this.addr,o),qc(r,o));for(let s=0;s!==i;++s)n.setTexture3D(e[s]||Uc,o[s])}function Ol(t,e,n){const r=this.cache,i=e.length,o=Xc(n,i);Wc(r,o)||(t.uniform1iv(this.addr,o),qc(r,o));for(let s=0;s!==i;++s)n.setTextureCube(e[s]||Fc,o[s])}function Ll(t,e,n){const r=this.cache,i=e.length,o=Xc(n,i);Wc(r,o)||(t.uniform1iv(this.addr,o),qc(r,o));for(let s=0;s!==i;++s)n.setTexture2DArray(e[s]||Nc,o[s])}function kl(t){switch(t){case 5126:return pl;case 35664:return ml;case 35665:return gl;case 35666:return vl;case 35674:return _l;case 35675:return yl;case 35676:return bl;case 5124:case 35670:return wl;case 35667:case 35671:return xl;case 35668:case 35672:return El;case 35669:case 35673:return Sl;case 5125:return Ml;case 36294:return Tl;case 36295:return Al;case 36296:return Cl;case 35678:case 36198:case 36298:case 36306:case 35682:return Rl;case 35679:case 36299:case 36307:return Pl;case 35680:case 36300:case 36308:case 36293:return Ol;case 36289:case 36303:case 36311:case 36292:return Ll}}class Il{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=fl(e.type)}}class Dl{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=kl(e.type)}}class Nl{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const o=r[i];o.setValue(t,e[o.id],n)}}}const Ul=/(\w+)(\])?(\[|\.)?/g;function Fl(t,e){t.seq.push(e),t.map[e.id]=e}function Bl(t,e,n){const r=t.name,i=r.length;Ul.lastIndex=0;while(1){const o=Ul.exec(r),s=Ul.lastIndex;let a=o[1];const c="]"===o[2],l=o[3];if(c&&(a|=0),void 0===l||"["===l&&s+2===i){Fl(n,void 0===l?new Il(a,t,e):new Dl(a,t,e));break}{const t=n.map;let e=t[a];void 0===e&&(e=new Nl(a),Fl(n,e)),n=e}}}class zl{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const n=t.getActiveUniform(e,r),i=t.getUniformLocation(e,n.name);Bl(n,i,this)}}setValue(t,e,n,r){const i=this.map[e];void 0!==i&&i.setValue(t,n,r)}setOptional(t,e,n){const r=e[n];void 0!==r&&this.setValue(t,n,r)}static upload(t,e,n,r){for(let i=0,o=e.length;i!==o;++i){const o=e[i],s=n[o.id];!1!==s.needsUpdate&&o.setValue(t,s.value,r)}}static seqWithValue(t,e){const n=[];for(let r=0,i=t.length;r!==i;++r){const i=t[r];i.id in e&&n.push(i)}return n}}function jl(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}let Hl=0;function Vl(t,e){const n=t.split("\n"),r=[],i=Math.max(e-6,0),o=Math.min(e+6,n.length);for(let s=i;s<o;s++){const t=s+1;r.push(`${t===e?">":" "} ${t}: ${n[s]}`)}return r.join("\n")}function Gl(t){switch(t){case Ae:return["Linear","( value )"];case Te:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),["Linear","( value )"]}}function Wl(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&""===i)return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const r=parseInt(o[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+Vl(t.getShaderSource(e),r)}return i}function ql(t,e){const n=Gl(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Xl(t,e){let n;switch(e){case $:n="Linear";break;case K:n="Reinhard";break;case J:n="OptimizedCineon";break;case Z:n="ACESFilmic";break;case Q:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Yl(t){const e=[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return e.filter(Jl).join("\n")}function $l(t){const e=[];for(const n in t){const r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}function Kl(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const r=t.getActiveAttrib(e,i),o=r.name;let s=1;r.type===t.FLOAT_MAT2&&(s=2),r.type===t.FLOAT_MAT3&&(s=3),r.type===t.FLOAT_MAT4&&(s=4),n[o]={type:r.type,location:t.getAttribLocation(e,o),locationSize:s}}return n}function Jl(t){return""!==t}function Zl(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Ql(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const tu=/^[ \t]*#include +<([\w\d./]+)>/gm;function eu(t){return t.replace(tu,nu)}function nu(t,e){const n=Za[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return eu(n)}const ru=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function iu(t){return t.replace(ru,ou)}function ou(t,e,n,r){let i="";for(let o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function su(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function au(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===l?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===u?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===h&&(e="SHADOWMAP_TYPE_VSM"),e}function cu(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case et:case nt:e="ENVMAP_TYPE_CUBE";break;case ot:e="ENVMAP_TYPE_CUBE_UV";break}return e}function lu(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case nt:e="ENVMAP_MODE_REFRACTION";break}return e}function uu(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case W:e="ENVMAP_BLENDING_MULTIPLY";break;case q:e="ENVMAP_BLENDING_MIX";break;case X:e="ENVMAP_BLENDING_ADD";break}return e}function hu(t){const e=t.envMapCubeUVHeight;if(null===e)return null;const n=Math.log2(e)-2,r=1/e,i=1/(3*Math.max(Math.pow(2,n),112));return{texelWidth:i,texelHeight:r,maxMip:n}}function du(t,e,n,r){const i=t.getContext(),o=n.defines;let s=n.vertexShader,a=n.fragmentShader;const c=au(n),l=cu(n),u=lu(n),h=uu(n),d=hu(n),f=n.isWebGL2?"":Yl(n),p=$l(o),m=i.createProgram();let g,v,_=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter(Jl).join("\n"),g.length>0&&(g+="\n"),v=[f,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter(Jl).join("\n"),v.length>0&&(v+="\n")):(g=[su(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Jl).join("\n"),v=[f,su(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+l:"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Y?"#define TONE_MAPPING":"",n.toneMapping!==Y?Za["tonemapping_pars_fragment"]:"",n.toneMapping!==Y?Xl("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Za["encodings_pars_fragment"],ql("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Jl).join("\n")),s=eu(s),s=Zl(s,n),s=Ql(s,n),a=eu(a),a=Zl(a,n),a=Ql(a,n),s=iu(s),a=iu(a),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(_="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in",n.glslVersion===ze?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===ze?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const y=_+g+s,b=_+v+a,w=jl(i,i.VERTEX_SHADER,y),x=jl(i,i.FRAGMENT_SHADER,b);if(i.attachShader(m,w),i.attachShader(m,x),void 0!==n.index0AttributeName?i.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),t.debug.checkShaderErrors){const e=i.getProgramInfoLog(m).trim(),n=i.getShaderInfoLog(w).trim(),r=i.getShaderInfoLog(x).trim();let o=!0,s=!0;if(!1===i.getProgramParameter(m,i.LINK_STATUS))if(o=!1,"function"===typeof t.debug.onShaderError)t.debug.onShaderError(i,m,w,x);else{const t=Wl(i,w,"vertex"),n=Wl(i,x,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,i.VALIDATE_STATUS)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+n)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==n&&""!==r||(s=!1);s&&(this.diagnostics={runnable:o,programLog:e,vertexShader:{log:n,prefix:g},fragmentShader:{log:r,prefix:v}})}let E,S;return i.deleteShader(w),i.deleteShader(x),this.getUniforms=function(){return void 0===E&&(E=new zl(i,m)),E},this.getAttributes=function(){return void 0===S&&(S=Kl(i,m)),S},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=Hl++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=w,this.fragmentShader=x,this}let fu=0;class pu{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,r=this._getShaderStage(e),i=this._getShaderStage(n),o=this._getShaderCacheForMaterial(t);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(i)&&(o.add(i),i.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return void 0===n&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return void 0===n&&(n=new mu(t),e.set(t,n)),n}}class mu{constructor(t){this.id=fu++,this.code=t,this.usedTimes=0}}function gu(t,e,n,r,i,o,s){const a=new Ir,c=new pu,l=[],u=i.isWebGL2,h=i.logarithmicDepthBuffer,d=i.vertexTextures;let m=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(t){return 0===t?"uv":`uv${t}`}function y(o,a,l,y,b){const w=y.fog,x=b.geometry,E=o.isMeshStandardMaterial?y.environment:null,S=(o.isMeshStandardMaterial?n:e).get(o.envMap||E),M=S&&S.mapping===ot?S.image.height:null,T=v[o.type];null!==o.precision&&(m=i.getMaxPrecision(o.precision),m!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",m,"instead."));const A=x.morphAttributes.position||x.morphAttributes.normal||x.morphAttributes.color,C=void 0!==A?A.length:0;let R,P,O,L,k=0;if(void 0!==x.morphAttributes.position&&(k=1),void 0!==x.morphAttributes.normal&&(k=2),void 0!==x.morphAttributes.color&&(k=3),T){const t=tc[T];R=t.vertexShader,P=t.fragmentShader}else R=o.vertexShader,P=o.fragmentShader,c.update(o),O=c.getVertexShaderID(o),L=c.getFragmentShaderID(o);const I=t.getRenderTarget(),D=!0===b.isInstancedMesh,N=!!o.map,U=!!o.matcap,F=!!S,B=!!o.aoMap,z=!!o.lightMap,j=!!o.bumpMap,H=!!o.normalMap,V=!!o.displacementMap,G=!!o.emissiveMap,W=!!o.metalnessMap,q=!!o.roughnessMap,X=o.anisotropy>0,$=o.clearcoat>0,K=o.iridescence>0,J=o.sheen>0,Z=o.transmission>0,Q=X&&!!o.anisotropyMap,tt=$&&!!o.clearcoatMap,et=$&&!!o.clearcoatNormalMap,nt=$&&!!o.clearcoatRoughnessMap,rt=K&&!!o.iridescenceMap,it=K&&!!o.iridescenceThicknessMap,st=J&&!!o.sheenColorMap,at=J&&!!o.sheenRoughnessMap,ct=!!o.specularMap,lt=!!o.specularColorMap,ut=!!o.specularIntensityMap,ht=Z&&!!o.transmissionMap,dt=Z&&!!o.thicknessMap,ft=!!o.gradientMap,pt=!!o.alphaMap,mt=o.alphaTest>0,gt=!!o.extensions,vt=!!x.attributes.uv1,_t=!!x.attributes.uv2,yt=!!x.attributes.uv3,bt={isWebGL2:u,shaderID:T,shaderType:o.type,shaderName:o.name,vertexShader:R,fragmentShader:P,defines:o.defines,customVertexShaderID:O,customFragmentShaderID:L,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:m,instancing:D,instancingColor:D&&null!==b.instanceColor,supportsVertexTextures:d,outputColorSpace:null===I?t.outputColorSpace:!0===I.isXRRenderTarget?I.texture.colorSpace:Ae,map:N,matcap:U,envMap:F,envMapMode:F&&S.mapping,envMapCubeUVHeight:M,aoMap:B,lightMap:z,bumpMap:j,normalMap:H,displacementMap:d&&V,emissiveMap:G,normalMapObjectSpace:H&&o.normalMapType===Se,normalMapTangentSpace:H&&o.normalMapType===Ee,metalnessMap:W,roughnessMap:q,anisotropy:X,anisotropyMap:Q,clearcoat:$,clearcoatMap:tt,clearcoatNormalMap:et,clearcoatRoughnessMap:nt,iridescence:K,iridescenceMap:rt,iridescenceThicknessMap:it,sheen:J,sheenColorMap:st,sheenRoughnessMap:at,specularMap:ct,specularColorMap:lt,specularIntensityMap:ut,transmission:Z,transmissionMap:ht,thicknessMap:dt,gradientMap:ft,opaque:!1===o.transparent&&o.blending===g,alphaMap:pt,alphaTest:mt,combine:o.combine,mapUv:N&&_(o.map.channel),aoMapUv:B&&_(o.aoMap.channel),lightMapUv:z&&_(o.lightMap.channel),bumpMapUv:j&&_(o.bumpMap.channel),normalMapUv:H&&_(o.normalMap.channel),displacementMapUv:V&&_(o.displacementMap.channel),emissiveMapUv:G&&_(o.emissiveMap.channel),metalnessMapUv:W&&_(o.metalnessMap.channel),roughnessMapUv:q&&_(o.roughnessMap.channel),anisotropyMapUv:Q&&_(o.anisotropyMap.channel),clearcoatMapUv:tt&&_(o.clearcoatMap.channel),clearcoatNormalMapUv:et&&_(o.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:nt&&_(o.clearcoatRoughnessMap.channel),iridescenceMapUv:rt&&_(o.iridescenceMap.channel),iridescenceThicknessMapUv:it&&_(o.iridescenceThicknessMap.channel),sheenColorMapUv:st&&_(o.sheenColorMap.channel),sheenRoughnessMapUv:at&&_(o.sheenRoughnessMap.channel),specularMapUv:ct&&_(o.specularMap.channel),specularColorMapUv:lt&&_(o.specularColorMap.channel),specularIntensityMapUv:ut&&_(o.specularIntensityMap.channel),transmissionMapUv:ht&&_(o.transmissionMap.channel),thicknessMapUv:dt&&_(o.thicknessMap.channel),alphaMapUv:pt&&_(o.alphaMap.channel),vertexTangents:!!x.attributes.tangent&&(H||X),vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!x.attributes.color&&4===x.attributes.color.itemSize,vertexUv1s:vt,vertexUv2s:_t,vertexUv3s:yt,pointsUvs:!0===b.isPoints&&!!x.attributes.uv&&(N||pt),fog:!!w,useFog:!0===o.fog,fogExp2:w&&w.isFogExp2,flatShading:!0===o.flatShading,sizeAttenuation:!0===o.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===b.isSkinnedMesh,morphTargets:void 0!==x.morphAttributes.position,morphNormals:void 0!==x.morphAttributes.normal,morphColors:void 0!==x.morphAttributes.color,morphTargetsCount:C,morphTextureStride:k,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numSpotLightMaps:a.spotLightMap.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numSpotLightShadowsWithMaps:a.numSpotLightShadowsWithMaps,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:o.dithering,shadowMapEnabled:t.shadowMap.enabled&&l.length>0,shadowMapType:t.shadowMap.type,toneMapping:o.toneMapped?t.toneMapping:Y,useLegacyLights:t.useLegacyLights,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===p,flipSided:o.side===f,useDepthPacking:o.depthPacking>=0,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionDerivatives:gt&&!0===o.extensions.derivatives,extensionFragDepth:gt&&!0===o.extensions.fragDepth,extensionDrawBuffers:gt&&!0===o.extensions.drawBuffers,extensionShaderTextureLOD:gt&&!0===o.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:o.customProgramCacheKey()};return bt}function b(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.customVertexShaderID),n.push(e.customFragmentShaderID)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(w(n,e),x(n,e),n.push(t.outputColorSpace)),n.push(e.customProgramCacheKey),n.join()}function w(t,e){t.push(e.precision),t.push(e.outputColorSpace),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.mapUv),t.push(e.alphaMapUv),t.push(e.lightMapUv),t.push(e.aoMapUv),t.push(e.bumpMapUv),t.push(e.normalMapUv),t.push(e.displacementMapUv),t.push(e.emissiveMapUv),t.push(e.metalnessMapUv),t.push(e.roughnessMapUv),t.push(e.anisotropyMapUv),t.push(e.clearcoatMapUv),t.push(e.clearcoatNormalMapUv),t.push(e.clearcoatRoughnessMapUv),t.push(e.iridescenceMapUv),t.push(e.iridescenceThicknessMapUv),t.push(e.sheenColorMapUv),t.push(e.sheenRoughnessMapUv),t.push(e.specularMapUv),t.push(e.specularColorMapUv),t.push(e.specularIntensityMapUv),t.push(e.transmissionMapUv),t.push(e.thicknessMapUv),t.push(e.combine),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numSpotLightMaps),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.numSpotLightShadowsWithMaps),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.depthPacking)}function x(t,e){a.disableAll(),e.isWebGL2&&a.enable(0),e.supportsVertexTextures&&a.enable(1),e.instancing&&a.enable(2),e.instancingColor&&a.enable(3),e.matcap&&a.enable(4),e.envMap&&a.enable(5),e.normalMapObjectSpace&&a.enable(6),e.normalMapTangentSpace&&a.enable(7),e.clearcoat&&a.enable(8),e.iridescence&&a.enable(9),e.alphaTest&&a.enable(10),e.vertexColors&&a.enable(11),e.vertexAlphas&&a.enable(12),e.vertexUv1s&&a.enable(13),e.vertexUv2s&&a.enable(14),e.vertexUv3s&&a.enable(15),e.vertexTangents&&a.enable(16),e.anisotropy&&a.enable(17),t.push(a.mask),a.disableAll(),e.fog&&a.enable(0),e.useFog&&a.enable(1),e.flatShading&&a.enable(2),e.logarithmicDepthBuffer&&a.enable(3),e.skinning&&a.enable(4),e.morphTargets&&a.enable(5),e.morphNormals&&a.enable(6),e.morphColors&&a.enable(7),e.premultipliedAlpha&&a.enable(8),e.shadowMapEnabled&&a.enable(9),e.useLegacyLights&&a.enable(10),e.doubleSided&&a.enable(11),e.flipSided&&a.enable(12),e.useDepthPacking&&a.enable(13),e.dithering&&a.enable(14),e.transmission&&a.enable(15),e.sheen&&a.enable(16),e.opaque&&a.enable(17),e.pointsUvs&&a.enable(18),t.push(a.mask)}function E(t){const e=v[t.type];let n;if(e){const t=tc[e];n=eo.clone(t.uniforms)}else n=t.uniforms;return n}function S(e,n){let r;for(let t=0,i=l.length;t<i;t++){const e=l[t];if(e.cacheKey===n){r=e,++r.usedTimes;break}}return void 0===r&&(r=new du(t,n,e,o),l.push(r)),r}function M(t){if(0===--t.usedTimes){const e=l.indexOf(t);l[e]=l[l.length-1],l.pop(),t.destroy()}}function T(t){c.remove(t)}function A(){c.dispose()}return{getParameters:y,getProgramCacheKey:b,getUniforms:E,acquireProgram:S,releaseProgram:M,releaseShaderCache:T,programs:l,dispose:A}}function vu(){let t=new WeakMap;function e(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n}function n(e){t.delete(e)}function r(e,n,r){t.get(e)[n]=r}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function _u(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function yu(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function bu(){const t=[];let e=0;const n=[],r=[],i=[];function o(){e=0,n.length=0,r.length=0,i.length=0}function s(n,r,i,o,s,a){let c=t[e];return void 0===c?(c={id:n.id,object:n,geometry:r,material:i,groupOrder:o,renderOrder:n.renderOrder,z:s,group:a},t[e]=c):(c.id=n.id,c.object=n,c.geometry=r,c.material=i,c.groupOrder=o,c.renderOrder=n.renderOrder,c.z=s,c.group=a),e++,c}function a(t,e,o,a,c,l){const u=s(t,e,o,a,c,l);o.transmission>0?r.push(u):!0===o.transparent?i.push(u):n.push(u)}function c(t,e,o,a,c,l){const u=s(t,e,o,a,c,l);o.transmission>0?r.unshift(u):!0===o.transparent?i.unshift(u):n.unshift(u)}function l(t,e){n.length>1&&n.sort(t||_u),r.length>1&&r.sort(e||yu),i.length>1&&i.sort(e||yu)}function u(){for(let n=e,r=t.length;n<r;n++){const e=t[n];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}}return{opaque:n,transmissive:r,transparent:i,init:o,push:a,unshift:c,finish:u,sort:l}}function wu(){let t=new WeakMap;function e(e,n){const r=t.get(e);let i;return void 0===r?(i=new bu,t.set(e,[i])):n>=r.length?(i=new bu,r.push(i)):i=r[n],i}function n(){t=new WeakMap}return{get:e,dispose:n}}function xu(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Xn,color:new fi};break;case"SpotLight":n={position:new Xn,direction:new Xn,color:new fi,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Xn,color:new fi,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Xn,skyColor:new fi,groundColor:new fi};break;case"RectAreaLight":n={color:new fi,position:new Xn,halfWidth:new Xn,halfHeight:new Xn};break}return t[e.id]=n,n}}}function Eu(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new yn};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new yn};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new yn,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let Su=0;function Mu(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Tu(t,e){const n=new xu,r=Eu(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)i.probe.push(new Xn);const o=new Xn,s=new Er,a=new Er;function c(o,s){let a=0,c=0,l=0;for(let t=0;t<9;t++)i.probe[t].set(0,0,0);let u=0,h=0,d=0,f=0,p=0,m=0,g=0,v=0,_=0,y=0;o.sort(Mu);const b=!0===s?Math.PI:1;for(let t=0,e=o.length;t<e;t++){const e=o[t],s=e.color,w=e.intensity,x=e.distance,E=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)a+=s.r*w*b,c+=s.g*w*b,l+=s.b*w*b;else if(e.isLightProbe)for(let t=0;t<9;t++)i.probe[t].addScaledVector(e.sh.coefficients[t],w);else if(e.isDirectionalLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*b),e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,i.directionalShadow[u]=n,i.directionalShadowMap[u]=E,i.directionalShadowMatrix[u]=e.shadow.matrix,m++}i.directional[u]=t,u++}else if(e.isSpotLight){const t=n.get(e);t.position.setFromMatrixPosition(e.matrixWorld),t.color.copy(s).multiplyScalar(w*b),t.distance=x,t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,i.spot[d]=t;const o=e.shadow;if(e.map&&(i.spotLightMap[_]=e.map,_++,o.updateMatrices(e),e.castShadow&&y++),i.spotLightMatrix[d]=o.matrix,e.castShadow){const t=r.get(e);t.shadowBias=o.bias,t.shadowNormalBias=o.normalBias,t.shadowRadius=o.radius,t.shadowMapSize=o.mapSize,i.spotShadow[d]=t,i.spotShadowMap[d]=E,v++}d++}else if(e.isRectAreaLight){const t=n.get(e);t.color.copy(s).multiplyScalar(w),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),i.rectArea[f]=t,f++}else if(e.isPointLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*b),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,n.shadowCameraNear=t.camera.near,n.shadowCameraFar=t.camera.far,i.pointShadow[h]=n,i.pointShadowMap[h]=E,i.pointShadowMatrix[h]=e.shadow.matrix,g++}i.point[h]=t,h++}else if(e.isHemisphereLight){const t=n.get(e);t.skyColor.copy(e.color).multiplyScalar(w*b),t.groundColor.copy(e.groundColor).multiplyScalar(w*b),i.hemi[p]=t,p++}}f>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(i.rectAreaLTC1=Qa.LTC_FLOAT_1,i.rectAreaLTC2=Qa.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Qa.LTC_HALF_1,i.rectAreaLTC2=Qa.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=a,i.ambient[1]=c,i.ambient[2]=l;const w=i.hash;w.directionalLength===u&&w.pointLength===h&&w.spotLength===d&&w.rectAreaLength===f&&w.hemiLength===p&&w.numDirectionalShadows===m&&w.numPointShadows===g&&w.numSpotShadows===v&&w.numSpotMaps===_||(i.directional.length=u,i.spot.length=d,i.rectArea.length=f,i.point.length=h,i.hemi.length=p,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=v,i.spotShadowMap.length=v,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotLightMatrix.length=v+_-y,i.spotLightMap.length=_,i.numSpotLightShadowsWithMaps=y,w.directionalLength=u,w.pointLength=h,w.spotLength=d,w.rectAreaLength=f,w.hemiLength=p,w.numDirectionalShadows=m,w.numPointShadows=g,w.numSpotShadows=v,w.numSpotMaps=_,i.version=Su++)}function l(t,e){let n=0,r=0,c=0,l=0,u=0;const h=e.matrixWorldInverse;for(let d=0,f=t.length;d<f;d++){const e=t[d];if(e.isDirectionalLight){const t=i.directional[n];t.direction.setFromMatrixPosition(e.matrixWorld),o.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(h),n++}else if(e.isSpotLight){const t=i.spot[c];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),t.direction.setFromMatrixPosition(e.matrixWorld),o.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(h),c++}else if(e.isRectAreaLight){const t=i.rectArea[l];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),a.identity(),s.copy(e.matrixWorld),s.premultiply(h),a.extractRotation(s),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),t.halfWidth.applyMatrix4(a),t.halfHeight.applyMatrix4(a),l++}else if(e.isPointLight){const t=i.point[r];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),r++}else if(e.isHemisphereLight){const t=i.hemi[u];t.direction.setFromMatrixPosition(e.matrixWorld),t.direction.transformDirection(h),u++}}}return{setup:c,setupView:l,state:i}}function Au(t,e){const n=new Tu(t,e),r=[],i=[];function o(){r.length=0,i.length=0}function s(t){r.push(t)}function a(t){i.push(t)}function c(t){n.setup(r,t)}function l(t){n.setupView(r,t)}const u={lightsArray:r,shadowsArray:i,lights:n};return{init:o,state:u,setupLights:c,setupLightsView:l,pushLight:s,pushShadow:a}}function Cu(t,e){let n=new WeakMap;function r(r,i=0){const o=n.get(r);let s;return void 0===o?(s=new Au(t,e),n.set(r,[s])):i>=o.length?(s=new Au(t,e),o.push(s)):s=o[i],s}function i(){n=new WeakMap}return{get:r,dispose:i}}class Ru extends ci{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=we,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class Pu extends ci{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}const Ou="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",Lu="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function ku(t,e,n){let r=new yo;const i=new yn,o=new yn,s=new Hn,a=new Ru({depthPacking:xe}),c=new Pu,u={},g=n.maxTextureSize,v={[d]:f,[f]:d,[p]:p},_=new io({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new yn},radius:{value:4}},vertexShader:Ou,fragmentShader:Lu}),y=_.clone();y.defines.HORIZONTAL_PASS=1;const b=new Ri;b.setAttribute("position",new _i(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const w=new Xi(b,_),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=l;let E=this.type;function S(n,r){const o=e.update(w);_.defines.VSM_SAMPLES!==n.blurSamples&&(_.defines.VSM_SAMPLES=n.blurSamples,y.defines.VSM_SAMPLES=n.blurSamples,_.needsUpdate=!0,y.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Vn(i.x,i.y)),_.uniforms.shadow_pass.value=n.map.texture,_.uniforms.resolution.value=n.mapSize,_.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(r,null,o,_,w,null),y.uniforms.shadow_pass.value=n.mapPass.texture,y.uniforms.resolution.value=n.mapSize,y.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(r,null,o,y,w,null)}function M(e,n,r,i){let o=null;const s=!0===r.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(void 0!==s)o=s;else if(o=!0===r.isPointLight?c:a,t.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const t=o.uuid,e=n.uuid;let r=u[t];void 0===r&&(r={},u[t]=r);let i=r[e];void 0===i&&(i=o.clone(),r[e]=i),o=i}if(o.visible=n.visible,o.wireframe=n.wireframe,o.side=i===h?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:v[n.side],o.alphaMap=n.alphaMap,o.alphaTest=n.alphaTest,o.map=n.map,o.clipShadows=n.clipShadows,o.clippingPlanes=n.clippingPlanes,o.clipIntersection=n.clipIntersection,o.displacementMap=n.displacementMap,o.displacementScale=n.displacementScale,o.displacementBias=n.displacementBias,o.wireframeLinewidth=n.wireframeLinewidth,o.linewidth=n.linewidth,!0===r.isPointLight&&!0===o.isMeshDistanceMaterial){const e=t.properties.get(o);e.light=r}return o}function T(n,i,o,s,a){if(!1===n.visible)return;const c=n.layers.test(i.layers);if(c&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&a===h)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const r=e.update(n),i=n.material;if(Array.isArray(i)){const e=r.groups;for(let c=0,l=e.length;c<l;c++){const l=e[c],u=i[l.materialIndex];if(u&&u.visible){const e=M(n,u,s,a);t.renderBufferDirect(o,null,r,e,n,l)}}}else if(i.visible){const e=M(n,i,s,a);t.renderBufferDirect(o,null,r,e,n,null)}}const l=n.children;for(let t=0,e=l.length;t<e;t++)T(l[t],i,o,s,a)}this.render=function(e,n,a){if(!1===x.enabled)return;if(!1===x.autoUpdate&&!1===x.needsUpdate)return;if(0===e.length)return;const c=t.getRenderTarget(),l=t.getActiveCubeFace(),u=t.getActiveMipmapLevel(),d=t.state;d.setBlending(m),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);const f=E!==h&&this.type===h,p=E===h&&this.type!==h;for(let m=0,v=e.length;m<v;m++){const c=e[m],l=c.shadow;if(void 0===l){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===l.autoUpdate&&!1===l.needsUpdate)continue;i.copy(l.mapSize);const u=l.getFrameExtents();if(i.multiply(u),o.copy(l.mapSize),(i.x>g||i.y>g)&&(i.x>g&&(o.x=Math.floor(g/u.x),i.x=o.x*u.x,l.mapSize.x=o.x),i.y>g&&(o.y=Math.floor(g/u.y),i.y=o.y*u.y,l.mapSize.y=o.y)),null===l.map||!0===f||!0===p){const t=this.type!==h?{minFilter:lt,magFilter:lt}:{};null!==l.map&&l.map.dispose(),l.map=new Vn(i.x,i.y,t),l.map.texture.name=c.name+".shadowMap",l.camera.updateProjectionMatrix()}t.setRenderTarget(l.map),t.clear();const v=l.getViewportCount();for(let t=0;t<v;t++){const e=l.getViewport(t);s.set(o.x*e.x,o.y*e.y,o.x*e.z,o.y*e.w),d.viewport(s),l.updateMatrices(c,t),r=l.getFrustum(),T(n,a,l.camera,c,this.type)}!0!==l.isPointLightShadow&&this.type===h&&S(l,a),l.needsUpdate=!1}E=this.type,x.needsUpdate=!1,t.setRenderTarget(c,l,u)}}function Iu(t,e,n){const r=n.isWebGL2;function i(){let e=!1;const n=new Hn;let r=null;const i=new Hn(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,o,s,a){!0===a&&(e*=s,r*=s,o*=s),n.set(e,r,o,s),!1===i.equals(n)&&(t.clearColor(e,r,o,s),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}}function o(){let e=!1,n=null,r=null,i=null;return{setTest:function(e){e?St(t.DEPTH_TEST):Mt(t.DEPTH_TEST)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){switch(e){case U:t.depthFunc(t.NEVER);break;case F:t.depthFunc(t.ALWAYS);break;case B:t.depthFunc(t.LESS);break;case z:t.depthFunc(t.LEQUAL);break;case j:t.depthFunc(t.EQUAL);break;case H:t.depthFunc(t.GEQUAL);break;case V:t.depthFunc(t.GREATER);break;case G:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}}function l(){let e=!1,n=null,r=null,i=null,o=null,s=null,a=null,c=null,l=null;return{setTest:function(n){e||(n?St(t.STENCIL_TEST):Mt(t.STENCIL_TEST))},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,s){r===e&&i===n&&o===s||(t.stencilFunc(e,n,s),r=e,i=n,o=s)},setOp:function(e,n,r){s===e&&a===n&&c===r||(t.stencilOp(e,n,r),s=e,a=n,c=r)},setLocked:function(t){e=t},setClear:function(e){l!==e&&(t.clearStencil(e),l=e)},reset:function(){e=!1,n=null,r=null,i=null,o=null,s=null,a=null,c=null,l=null}}}const u=new i,h=new o,d=new l,W=new WeakMap,q=new WeakMap;let X={},Y={},$=new WeakMap,K=[],J=null,Z=!1,Q=null,tt=null,et=null,nt=null,rt=null,it=null,ot=null,st=!1,at=null,ct=null,lt=null,ut=null,ht=null;const dt=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ft=!1,pt=0;const mt=t.getParameter(t.VERSION);-1!==mt.indexOf("WebGL")?(pt=parseFloat(/^WebGL (\d)/.exec(mt)[1]),ft=pt>=1):-1!==mt.indexOf("OpenGL ES")&&(pt=parseFloat(/^OpenGL ES (\d)/.exec(mt)[1]),ft=pt>=2);let gt=null,vt={};const _t=t.getParameter(t.SCISSOR_BOX),yt=t.getParameter(t.VIEWPORT),bt=(new Hn).fromArray(_t),wt=(new Hn).fromArray(yt);function xt(e,n,i,o){const s=new Uint8Array(4),a=t.createTexture();t.bindTexture(e,a),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let c=0;c<i;c++)!r||e!==t.TEXTURE_3D&&e!==t.TEXTURE_2D_ARRAY?t.texImage2D(n+c,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,s):t.texImage3D(n,0,t.RGBA,1,1,o,0,t.RGBA,t.UNSIGNED_BYTE,s);return a}const Et={};function St(e){!0!==X[e]&&(t.enable(e),X[e]=!0)}function Mt(e){!1!==X[e]&&(t.disable(e),X[e]=!1)}function Tt(e,n){return Y[e]!==n&&(t.bindFramebuffer(e,n),Y[e]=n,r&&(e===t.DRAW_FRAMEBUFFER&&(Y[t.FRAMEBUFFER]=n),e===t.FRAMEBUFFER&&(Y[t.DRAW_FRAMEBUFFER]=n)),!0)}function At(r,i){let o=K,s=!1;if(r)if(o=$.get(i),void 0===o&&(o=[],$.set(i,o)),r.isWebGLMultipleRenderTargets){const e=r.texture;if(o.length!==e.length||o[0]!==t.COLOR_ATTACHMENT0){for(let n=0,r=e.length;n<r;n++)o[n]=t.COLOR_ATTACHMENT0+n;o.length=e.length,s=!0}}else o[0]!==t.COLOR_ATTACHMENT0&&(o[0]=t.COLOR_ATTACHMENT0,s=!0);else o[0]!==t.BACK&&(o[0]=t.BACK,s=!0);s&&(n.isWebGL2?t.drawBuffers(o):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(o))}function Ct(e){return J!==e&&(t.useProgram(e),J=e,!0)}Et[t.TEXTURE_2D]=xt(t.TEXTURE_2D,t.TEXTURE_2D,1),Et[t.TEXTURE_CUBE_MAP]=xt(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(Et[t.TEXTURE_2D_ARRAY]=xt(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),Et[t.TEXTURE_3D]=xt(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),u.setClear(0,0,0,1),h.setClear(1),d.setClear(0),St(t.DEPTH_TEST),h.setFunc(z),kt(!1),It(a),St(t.CULL_FACE),Ot(m);const Rt={[w]:t.FUNC_ADD,[x]:t.FUNC_SUBTRACT,[E]:t.FUNC_REVERSE_SUBTRACT};if(r)Rt[S]=t.MIN,Rt[M]=t.MAX;else{const t=e.get("EXT_blend_minmax");null!==t&&(Rt[S]=t.MIN_EXT,Rt[M]=t.MAX_EXT)}const Pt={[T]:t.ZERO,[A]:t.ONE,[C]:t.SRC_COLOR,[P]:t.SRC_ALPHA,[N]:t.SRC_ALPHA_SATURATE,[I]:t.DST_COLOR,[L]:t.DST_ALPHA,[R]:t.ONE_MINUS_SRC_COLOR,[O]:t.ONE_MINUS_SRC_ALPHA,[D]:t.ONE_MINUS_DST_COLOR,[k]:t.ONE_MINUS_DST_ALPHA};function Ot(e,n,r,i,o,s,a,c){if(e!==m){if(!1===Z&&(St(t.BLEND),Z=!0),e===b)o=o||n,s=s||r,a=a||i,n===tt&&o===rt||(t.blendEquationSeparate(Rt[n],Rt[o]),tt=n,rt=o),r===et&&i===nt&&s===it&&a===ot||(t.blendFuncSeparate(Pt[r],Pt[i],Pt[s],Pt[a]),et=r,nt=i,it=s,ot=a),Q=e,st=!1;else if(e!==Q||c!==st){if(tt===w&&rt===w||(t.blendEquation(t.FUNC_ADD),tt=w,rt=w),c)switch(e){case g:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case v:t.blendFunc(t.ONE,t.ONE);break;case _:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case y:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}else switch(e){case g:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case v:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case _:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case y:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}et=null,nt=null,it=null,ot=null,Q=e,st=c}}else!0===Z&&(Mt(t.BLEND),Z=!1)}function Lt(e,n){e.side===p?Mt(t.CULL_FACE):St(t.CULL_FACE);let r=e.side===f;n&&(r=!r),kt(r),e.blending===g&&!1===e.transparent?Ot(m):Ot(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),h.setFunc(e.depthFunc),h.setTest(e.depthTest),h.setMask(e.depthWrite),u.setMask(e.colorWrite);const i=e.stencilWrite;d.setTest(i),i&&(d.setMask(e.stencilWriteMask),d.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),d.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Nt(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?St(t.SAMPLE_ALPHA_TO_COVERAGE):Mt(t.SAMPLE_ALPHA_TO_COVERAGE)}function kt(e){at!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),at=e)}function It(e){e!==s?(St(t.CULL_FACE),e!==ct&&(e===a?t.cullFace(t.BACK):e===c?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):Mt(t.CULL_FACE),ct=e}function Dt(e){e!==lt&&(ft&&t.lineWidth(e),lt=e)}function Nt(e,n,r){e?(St(t.POLYGON_OFFSET_FILL),ut===n&&ht===r||(t.polygonOffset(n,r),ut=n,ht=r)):Mt(t.POLYGON_OFFSET_FILL)}function Ut(e){e?St(t.SCISSOR_TEST):Mt(t.SCISSOR_TEST)}function Ft(e){void 0===e&&(e=t.TEXTURE0+dt-1),gt!==e&&(t.activeTexture(e),gt=e)}function Bt(e,n,r){void 0===r&&(r=null===gt?t.TEXTURE0+dt-1:gt);let i=vt[r];void 0===i&&(i={type:void 0,texture:void 0},vt[r]=i),i.type===e&&i.texture===n||(gt!==r&&(t.activeTexture(r),gt=r),t.bindTexture(e,n||Et[e]),i.type=e,i.texture=n)}function zt(){const e=vt[gt];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)}function jt(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Ht(){try{t.compressedTexImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Vt(){try{t.texSubImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Gt(){try{t.texSubImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Wt(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function qt(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Xt(){try{t.texStorage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Yt(){try{t.texStorage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function $t(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Kt(){try{t.texImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Jt(e){!1===bt.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),bt.copy(e))}function Zt(e){!1===wt.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),wt.copy(e))}function Qt(e,n){let r=q.get(n);void 0===r&&(r=new WeakMap,q.set(n,r));let i=r.get(e);void 0===i&&(i=t.getUniformBlockIndex(n,e.name),r.set(e,i))}function te(e,n){const r=q.get(n),i=r.get(e);W.get(n)!==i&&(t.uniformBlockBinding(n,i,e.__bindingPointIndex),W.set(n,i))}function ee(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),!0===r&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),X={},gt=null,vt={},Y={},$=new WeakMap,K=[],J=null,Z=!1,Q=null,tt=null,et=null,nt=null,rt=null,it=null,ot=null,st=!1,at=null,ct=null,lt=null,ut=null,ht=null,bt.set(0,0,t.canvas.width,t.canvas.height),wt.set(0,0,t.canvas.width,t.canvas.height),u.reset(),h.reset(),d.reset()}return{buffers:{color:u,depth:h,stencil:d},enable:St,disable:Mt,bindFramebuffer:Tt,drawBuffers:At,useProgram:Ct,setBlending:Ot,setMaterial:Lt,setFlipSided:kt,setCullFace:It,setLineWidth:Dt,setPolygonOffset:Nt,setScissorTest:Ut,activeTexture:Ft,bindTexture:Bt,unbindTexture:zt,compressedTexImage2D:jt,compressedTexImage3D:Ht,texImage2D:$t,texImage3D:Kt,updateUBOMapping:Qt,uniformBlockBinding:te,texStorage2D:Xt,texStorage3D:Yt,texSubImage2D:Vt,texSubImage3D:Gt,compressedTexSubImage2D:Wt,compressedTexSubImage3D:qt,scissor:Jt,viewport:Zt,reset:ee}}function Du(t,e,n,r,i,o,s){const a=i.isWebGL2,c=i.maxTextures,l=i.maxCubemapSize,u=i.maxTextureSize,h=i.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let m;const g=new WeakMap;let v=!1;try{v="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(ot){}function _(t,e){return v?new OffscreenCanvas(t,e):En("canvas")}function y(t,e,n,r){let i=1;if((t.width>r||t.height>r)&&(i=r/Math.max(t.width,t.height)),i<1||!0===e){if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap){const r=e?pn:Math.floor,o=r(i*t.width),s=r(i*t.height);void 0===m&&(m=_(o,s));const a=n?_(o,s):m;a.width=o,a.height=s;const c=a.getContext("2d");return c.drawImage(t,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+o+"x"+s+")."),a}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function b(t){return dn(t.width)&&dn(t.height)}function w(t){return!a&&(t.wrapS!==at||t.wrapT!==at||t.minFilter!==lt&&t.minFilter!==dt)}function x(t,e){return t.generateMipmaps&&e&&t.minFilter!==lt&&t.minFilter!==dt}function E(e){t.generateMipmap(e)}function S(n,r,i,o,s=!1){if(!1===a)return r;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let c=r;return r===t.RED&&(i===t.FLOAT&&(c=t.R32F),i===t.HALF_FLOAT&&(c=t.R16F),i===t.UNSIGNED_BYTE&&(c=t.R8)),r===t.RG&&(i===t.FLOAT&&(c=t.RG32F),i===t.HALF_FLOAT&&(c=t.RG16F),i===t.UNSIGNED_BYTE&&(c=t.RG8)),r===t.RGBA&&(i===t.FLOAT&&(c=t.RGBA32F),i===t.HALF_FLOAT&&(c=t.RGBA16F),i===t.UNSIGNED_BYTE&&(c=o===Te&&!1===s?t.SRGB8_ALPHA8:t.RGBA8),i===t.UNSIGNED_SHORT_4_4_4_4&&(c=t.RGBA4),i===t.UNSIGNED_SHORT_5_5_5_1&&(c=t.RGB5_A1)),c!==t.R16F&&c!==t.R32F&&c!==t.RG16F&&c!==t.RG32F&&c!==t.RGBA16F&&c!==t.RGBA32F||e.get("EXT_color_buffer_float"),c}function M(t,e,n){return!0===x(t,n)||t.isFramebufferTexture&&t.minFilter!==lt&&t.minFilter!==dt?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function T(e){return e===lt||e===ut||e===ht?t.NEAREST:t.LINEAR}function A(t){const e=t.target;e.removeEventListener("dispose",A),R(e),e.isVideoTexture&&p.delete(e)}function C(t){const e=t.target;e.removeEventListener("dispose",C),O(e)}function R(t){const e=r.get(t);if(void 0===e.__webglInit)return;const n=t.source,i=g.get(n);if(i){const r=i[e.__cacheKey];r.usedTimes--,0===r.usedTimes&&P(t),0===Object.keys(i).length&&g.delete(n)}r.remove(t)}function P(e){const n=r.get(e);t.deleteTexture(n.__webglTexture);const i=e.source,o=g.get(i);delete o[n.__cacheKey],s.memory.textures--}function O(e){const n=e.texture,i=r.get(e),o=r.get(n);if(void 0!==o.__webglTexture&&(t.deleteTexture(o.__webglTexture),s.memory.textures--),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(let r=0;r<6;r++)t.deleteFramebuffer(i.__webglFramebuffer[r]),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[r]);else{if(t.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&t.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let e=0;e<i.__webglColorRenderbuffer.length;e++)i.__webglColorRenderbuffer[e]&&t.deleteRenderbuffer(i.__webglColorRenderbuffer[e]);i.__webglDepthRenderbuffer&&t.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(e.isWebGLMultipleRenderTargets)for(let a=0,c=n.length;a<c;a++){const e=r.get(n[a]);e.__webglTexture&&(t.deleteTexture(e.__webglTexture),s.memory.textures--),r.remove(n[a])}r.remove(n),r.remove(e)}let L=0;function k(){L=0}function I(){const t=L;return t>=c&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+c),L+=1,t}function D(t){const e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.wrapR||0),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.colorSpace),e.join()}function N(e,i){const o=r.get(e);if(e.isVideoTexture&&rt(e),!1===e.isRenderTargetTexture&&e.version>0&&o.__version!==e.version){const t=e.image;if(null===t)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==t.complete)return void W(o,e,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(t.TEXTURE_2D,o.__webglTexture,t.TEXTURE0+i)}function U(e,i){const o=r.get(e);e.version>0&&o.__version!==e.version?W(o,e,i):n.bindTexture(t.TEXTURE_2D_ARRAY,o.__webglTexture,t.TEXTURE0+i)}function F(e,i){const o=r.get(e);e.version>0&&o.__version!==e.version?W(o,e,i):n.bindTexture(t.TEXTURE_3D,o.__webglTexture,t.TEXTURE0+i)}function B(e,i){const o=r.get(e);e.version>0&&o.__version!==e.version?q(o,e,i):n.bindTexture(t.TEXTURE_CUBE_MAP,o.__webglTexture,t.TEXTURE0+i)}const z={[st]:t.REPEAT,[at]:t.CLAMP_TO_EDGE,[ct]:t.MIRRORED_REPEAT},j={[lt]:t.NEAREST,[ut]:t.NEAREST_MIPMAP_NEAREST,[ht]:t.NEAREST_MIPMAP_LINEAR,[dt]:t.LINEAR,[ft]:t.LINEAR_MIPMAP_NEAREST,[pt]:t.LINEAR_MIPMAP_LINEAR},H={[Oe]:t.NEVER,[Fe]:t.ALWAYS,[Le]:t.LESS,[Ie]:t.LEQUAL,[ke]:t.EQUAL,[Ue]:t.GEQUAL,[De]:t.GREATER,[Ne]:t.NOTEQUAL};function V(n,o,s){if(s?(t.texParameteri(n,t.TEXTURE_WRAP_S,z[o.wrapS]),t.texParameteri(n,t.TEXTURE_WRAP_T,z[o.wrapT]),n!==t.TEXTURE_3D&&n!==t.TEXTURE_2D_ARRAY||t.texParameteri(n,t.TEXTURE_WRAP_R,z[o.wrapR]),t.texParameteri(n,t.TEXTURE_MAG_FILTER,j[o.magFilter]),t.texParameteri(n,t.TEXTURE_MIN_FILTER,j[o.minFilter])):(t.texParameteri(n,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(n,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),n!==t.TEXTURE_3D&&n!==t.TEXTURE_2D_ARRAY||t.texParameteri(n,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),o.wrapS===at&&o.wrapT===at||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,t.TEXTURE_MAG_FILTER,T(o.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,T(o.minFilter)),o.minFilter!==lt&&o.minFilter!==dt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),o.compareFunction&&(t.texParameteri(n,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(n,t.TEXTURE_COMPARE_FUNC,H[o.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){const s=e.get("EXT_texture_filter_anisotropic");if(o.magFilter===lt)return;if(o.minFilter!==ht&&o.minFilter!==pt)return;if(o.type===wt&&!1===e.has("OES_texture_float_linear"))return;if(!1===a&&o.type===xt&&!1===e.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(t.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function G(e,n){let r=!1;void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",A));const i=n.source;let o=g.get(i);void 0===o&&(o={},g.set(i,o));const a=D(n);if(a!==e.__cacheKey){void 0===o[a]&&(o[a]={texture:t.createTexture(),usedTimes:0},s.memory.textures++,r=!0),o[a].usedTimes++;const i=o[e.__cacheKey];void 0!==i&&(o[e.__cacheKey].usedTimes--,0===i.usedTimes&&P(n)),e.__cacheKey=a,e.__webglTexture=o[a].texture}return r}function W(e,i,s){let c=t.TEXTURE_2D;(i.isDataArrayTexture||i.isCompressedArrayTexture)&&(c=t.TEXTURE_2D_ARRAY),i.isData3DTexture&&(c=t.TEXTURE_3D);const l=G(e,i),h=i.source;n.bindTexture(c,e.__webglTexture,t.TEXTURE0+s);const d=r.get(h);if(h.version!==d.__version||!0===l){n.activeTexture(t.TEXTURE0+s),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,i.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const e=w(i)&&!1===b(i.image);let r=y(i.image,e,!1,u);r=it(i,r);const f=b(r)||a,p=o.convert(i.format,i.colorSpace);let m,g=o.convert(i.type),v=S(i.internalFormat,p,g,i.colorSpace);V(c,i,f);const _=i.mipmaps,T=a&&!0!==i.isVideoTexture,A=void 0===d.__version||!0===l,C=M(i,r,f);if(i.isDepthTexture)v=t.DEPTH_COMPONENT,a?v=i.type===wt?t.DEPTH_COMPONENT32F:i.type===bt?t.DEPTH_COMPONENT24:i.type===Mt?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT16:i.type===wt&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===Pt&&v===t.DEPTH_COMPONENT&&i.type!==_t&&i.type!==bt&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=bt,g=o.convert(i.type)),i.format===Ot&&v===t.DEPTH_COMPONENT&&(v=t.DEPTH_STENCIL,i.type!==Mt&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=Mt,g=o.convert(i.type))),A&&(T?n.texStorage2D(t.TEXTURE_2D,1,v,r.width,r.height):n.texImage2D(t.TEXTURE_2D,0,v,r.width,r.height,0,p,g,null));else if(i.isDataTexture)if(_.length>0&&f){T&&A&&n.texStorage2D(t.TEXTURE_2D,C,v,_[0].width,_[0].height);for(let e=0,r=_.length;e<r;e++)m=_[e],T?n.texSubImage2D(t.TEXTURE_2D,e,0,0,m.width,m.height,p,g,m.data):n.texImage2D(t.TEXTURE_2D,e,v,m.width,m.height,0,p,g,m.data);i.generateMipmaps=!1}else T?(A&&n.texStorage2D(t.TEXTURE_2D,C,v,r.width,r.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,r.width,r.height,p,g,r.data)):n.texImage2D(t.TEXTURE_2D,0,v,r.width,r.height,0,p,g,r.data);else if(i.isCompressedTexture)if(i.isCompressedArrayTexture){T&&A&&n.texStorage3D(t.TEXTURE_2D_ARRAY,C,v,_[0].width,_[0].height,r.depth);for(let e=0,o=_.length;e<o;e++)m=_[e],i.format!==At?null!==p?T?n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,0,m.width,m.height,r.depth,p,m.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,e,v,m.width,m.height,r.depth,0,m.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):T?n.texSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,0,m.width,m.height,r.depth,p,g,m.data):n.texImage3D(t.TEXTURE_2D_ARRAY,e,v,m.width,m.height,r.depth,0,p,g,m.data)}else{T&&A&&n.texStorage2D(t.TEXTURE_2D,C,v,_[0].width,_[0].height);for(let e=0,r=_.length;e<r;e++)m=_[e],i.format!==At?null!==p?T?n.compressedTexSubImage2D(t.TEXTURE_2D,e,0,0,m.width,m.height,p,m.data):n.compressedTexImage2D(t.TEXTURE_2D,e,v,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):T?n.texSubImage2D(t.TEXTURE_2D,e,0,0,m.width,m.height,p,g,m.data):n.texImage2D(t.TEXTURE_2D,e,v,m.width,m.height,0,p,g,m.data)}else if(i.isDataArrayTexture)T?(A&&n.texStorage3D(t.TEXTURE_2D_ARRAY,C,v,r.width,r.height,r.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,r.width,r.height,r.depth,p,g,r.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,v,r.width,r.height,r.depth,0,p,g,r.data);else if(i.isData3DTexture)T?(A&&n.texStorage3D(t.TEXTURE_3D,C,v,r.width,r.height,r.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,r.width,r.height,r.depth,p,g,r.data)):n.texImage3D(t.TEXTURE_3D,0,v,r.width,r.height,r.depth,0,p,g,r.data);else if(i.isFramebufferTexture){if(A)if(T)n.texStorage2D(t.TEXTURE_2D,C,v,r.width,r.height);else{let e=r.width,i=r.height;for(let r=0;r<C;r++)n.texImage2D(t.TEXTURE_2D,r,v,e,i,0,p,g,null),e>>=1,i>>=1}}else if(_.length>0&&f){T&&A&&n.texStorage2D(t.TEXTURE_2D,C,v,_[0].width,_[0].height);for(let e=0,r=_.length;e<r;e++)m=_[e],T?n.texSubImage2D(t.TEXTURE_2D,e,0,0,p,g,m):n.texImage2D(t.TEXTURE_2D,e,v,p,g,m);i.generateMipmaps=!1}else T?(A&&n.texStorage2D(t.TEXTURE_2D,C,v,r.width,r.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,p,g,r)):n.texImage2D(t.TEXTURE_2D,0,v,p,g,r);x(i,f)&&E(c),d.__version=h.version,i.onUpdate&&i.onUpdate(i)}e.__version=i.version}function q(e,i,s){if(6!==i.image.length)return;const c=G(e,i),u=i.source;n.bindTexture(t.TEXTURE_CUBE_MAP,e.__webglTexture,t.TEXTURE0+s);const h=r.get(u);if(u.version!==h.__version||!0===c){n.activeTexture(t.TEXTURE0+s),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,i.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const e=i.isCompressedTexture||i.image[0].isCompressedTexture,r=i.image[0]&&i.image[0].isDataTexture,d=[];for(let t=0;t<6;t++)d[t]=e||r?r?i.image[t].image:i.image[t]:y(i.image[t],!1,!0,l),d[t]=it(i,d[t]);const f=d[0],p=b(f)||a,m=o.convert(i.format,i.colorSpace),g=o.convert(i.type),v=S(i.internalFormat,m,g,i.colorSpace),_=a&&!0!==i.isVideoTexture,w=void 0===h.__version||!0===c;let T,A=M(i,f,p);if(V(t.TEXTURE_CUBE_MAP,i,p),e){_&&w&&n.texStorage2D(t.TEXTURE_CUBE_MAP,A,v,f.width,f.height);for(let e=0;e<6;e++){T=d[e].mipmaps;for(let r=0;r<T.length;r++){const o=T[r];i.format!==At?null!==m?_?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r,0,0,o.width,o.height,m,o.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r,v,o.width,o.height,0,o.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):_?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r,0,0,o.width,o.height,m,g,o.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r,v,o.width,o.height,0,m,g,o.data)}}}else{T=i.mipmaps,_&&w&&(T.length>0&&A++,n.texStorage2D(t.TEXTURE_CUBE_MAP,A,v,d[0].width,d[0].height));for(let e=0;e<6;e++)if(r){_?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,0,0,d[e].width,d[e].height,m,g,d[e].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,v,d[e].width,d[e].height,0,m,g,d[e].data);for(let r=0;r<T.length;r++){const i=T[r],o=i.image[e].image;_?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,0,0,o.width,o.height,m,g,o.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,v,o.width,o.height,0,m,g,o.data)}}else{_?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,0,0,m,g,d[e]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,v,m,g,d[e]);for(let r=0;r<T.length;r++){const i=T[r];_?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,0,0,m,g,i.image[e]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,v,m,g,i.image[e])}}}x(i,p)&&E(t.TEXTURE_CUBE_MAP),h.__version=u.version,i.onUpdate&&i.onUpdate(i)}e.__version=i.version}function X(e,i,s,a,c){const l=o.convert(s.format,s.colorSpace),u=o.convert(s.type),h=S(s.internalFormat,l,u,s.colorSpace),f=r.get(i);f.__hasExternalTextures||(c===t.TEXTURE_3D||c===t.TEXTURE_2D_ARRAY?n.texImage3D(c,0,h,i.width,i.height,i.depth,0,l,u,null):n.texImage2D(c,0,h,i.width,i.height,0,l,u,null)),n.bindFramebuffer(t.FRAMEBUFFER,e),nt(i)?d.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,a,c,r.get(s).__webglTexture,0,et(i)):(c===t.TEXTURE_2D||c>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&c<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,a,c,r.get(s).__webglTexture,0),n.bindFramebuffer(t.FRAMEBUFFER,null)}function Y(e,n,r){if(t.bindRenderbuffer(t.RENDERBUFFER,e),n.depthBuffer&&!n.stencilBuffer){let i=t.DEPTH_COMPONENT16;if(r||nt(n)){const e=n.depthTexture;e&&e.isDepthTexture&&(e.type===wt?i=t.DEPTH_COMPONENT32F:e.type===bt&&(i=t.DEPTH_COMPONENT24));const r=et(n);nt(n)?d.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,r,i,n.width,n.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,r,i,n.width,n.height)}else t.renderbufferStorage(t.RENDERBUFFER,i,n.width,n.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)}else if(n.depthBuffer&&n.stencilBuffer){const i=et(n);r&&!1===nt(n)?t.renderbufferStorageMultisample(t.RENDERBUFFER,i,t.DEPTH24_STENCIL8,n.width,n.height):nt(n)?d.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,i,t.DEPTH24_STENCIL8,n.width,n.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)}else{const e=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let i=0;i<e.length;i++){const s=e[i],a=o.convert(s.format,s.colorSpace),c=o.convert(s.type),l=S(s.internalFormat,a,c,s.colorSpace),u=et(n);r&&!1===nt(n)?t.renderbufferStorageMultisample(t.RENDERBUFFER,u,l,n.width,n.height):nt(n)?d.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,u,l,n.width,n.height):t.renderbufferStorage(t.RENDERBUFFER,l,n.width,n.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function $(e,i){const o=i&&i.isWebGLCubeRenderTarget;if(o)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,e),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),N(i.depthTexture,0);const s=r.get(i.depthTexture).__webglTexture,a=et(i);if(i.depthTexture.format===Pt)nt(i)?d.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,s,0,a):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,s,0);else{if(i.depthTexture.format!==Ot)throw new Error("Unknown depthTexture format");nt(i)?d.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,s,0,a):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,s,0)}}function K(e){const i=r.get(e),o=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!i.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");$(i.__webglFramebuffer,e)}else if(o){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=t.createRenderbuffer(),Y(i.__webglDepthbuffer[r],e,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=t.createRenderbuffer(),Y(i.__webglDepthbuffer,e,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function J(e,n,i){const o=r.get(e);void 0!==n&&X(o.__webglFramebuffer,e,e.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),void 0!==i&&K(e)}function Z(e){const c=e.texture,l=r.get(e),u=r.get(c);e.addEventListener("dispose",C),!0!==e.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=t.createTexture()),u.__version=c.version,s.memory.textures++);const h=!0===e.isWebGLCubeRenderTarget,d=!0===e.isWebGLMultipleRenderTargets,f=b(e)||a;if(h){l.__webglFramebuffer=[];for(let e=0;e<6;e++)l.__webglFramebuffer[e]=t.createFramebuffer()}else{if(l.__webglFramebuffer=t.createFramebuffer(),d)if(i.drawBuffers){const n=e.texture;for(let e=0,i=n.length;e<i;e++){const i=r.get(n[e]);void 0===i.__webglTexture&&(i.__webglTexture=t.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&e.samples>0&&!1===nt(e)){const r=d?c:[c];l.__webglMultisampledFramebuffer=t.createFramebuffer(),l.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,l.__webglMultisampledFramebuffer);for(let n=0;n<r.length;n++){const i=r[n];l.__webglColorRenderbuffer[n]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,l.__webglColorRenderbuffer[n]);const s=o.convert(i.format,i.colorSpace),a=o.convert(i.type),c=S(i.internalFormat,s,a,i.colorSpace,!0===e.isXRRenderTarget),u=et(e);t.renderbufferStorageMultisample(t.RENDERBUFFER,u,c,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+n,t.RENDERBUFFER,l.__webglColorRenderbuffer[n])}t.bindRenderbuffer(t.RENDERBUFFER,null),e.depthBuffer&&(l.__webglDepthRenderbuffer=t.createRenderbuffer(),Y(l.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(h){n.bindTexture(t.TEXTURE_CUBE_MAP,u.__webglTexture),V(t.TEXTURE_CUBE_MAP,c,f);for(let n=0;n<6;n++)X(l.__webglFramebuffer[n],e,c,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+n);x(c,f)&&E(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(d){const i=e.texture;for(let o=0,s=i.length;o<s;o++){const s=i[o],a=r.get(s);n.bindTexture(t.TEXTURE_2D,a.__webglTexture),V(t.TEXTURE_2D,s,f),X(l.__webglFramebuffer,e,s,t.COLOR_ATTACHMENT0+o,t.TEXTURE_2D),x(s,f)&&E(t.TEXTURE_2D)}n.unbindTexture()}else{let r=t.TEXTURE_2D;(e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&(a?r=e.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(r,u.__webglTexture),V(r,c,f),X(l.__webglFramebuffer,e,c,t.COLOR_ATTACHMENT0,r),x(c,f)&&E(r),n.unbindTexture()}e.depthBuffer&&K(e)}function Q(e){const i=b(e)||a,o=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let s=0,a=o.length;s<a;s++){const a=o[s];if(x(a,i)){const i=e.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,o=r.get(a).__webglTexture;n.bindTexture(i,o),E(i),n.unbindTexture()}}}function tt(e){if(a&&e.samples>0&&!1===nt(e)){const i=e.isWebGLMultipleRenderTargets?e.texture:[e.texture],o=e.width,s=e.height;let a=t.COLOR_BUFFER_BIT;const c=[],l=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,u=r.get(e),h=!0===e.isWebGLMultipleRenderTargets;if(h)for(let e=0;e<i.length;e++)n.bindFramebuffer(t.FRAMEBUFFER,u.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,u.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let n=0;n<i.length;n++){c.push(t.COLOR_ATTACHMENT0+n),e.depthBuffer&&c.push(l);const d=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;if(!1===d&&(e.depthBuffer&&(a|=t.DEPTH_BUFFER_BIT),e.stencilBuffer&&(a|=t.STENCIL_BUFFER_BIT)),h&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,u.__webglColorRenderbuffer[n]),!0===d&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[l]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[l])),h){const e=r.get(i[n]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)}t.blitFramebuffer(0,0,o,s,0,0,o,s,a,t.NEAREST),f&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,c)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),h)for(let e=0;e<i.length;e++){n.bindFramebuffer(t.FRAMEBUFFER,u.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.RENDERBUFFER,u.__webglColorRenderbuffer[e]);const o=r.get(i[e]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,u.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,o,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}}function et(t){return Math.min(h,t.samples)}function nt(t){const n=r.get(t);return a&&t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function rt(t){const e=s.render.frame;p.get(t)!==e&&(p.set(t,e),t.update())}function it(t,n){const r=t.colorSpace,i=t.format,o=t.type;return!0===t.isCompressedTexture||t.format===je||r!==Ae&&r!==Me&&(r===Te?!1===a?!0===e.has("EXT_sRGB")&&i===At?(t.format=je,t.minFilter=dt,t.generateMipmaps=!1):n=Nn.sRGBToLinear(n):i===At&&o===mt||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",r)),n}this.allocateTextureUnit=I,this.resetTextureUnits=k,this.setTexture2D=N,this.setTexture2DArray=U,this.setTexture3D=F,this.setTextureCube=B,this.rebindTextures=J,this.setupRenderTarget=Z,this.updateRenderTargetMipmap=Q,this.updateMultisampleRenderTarget=tt,this.setupDepthRenderbuffer=K,this.setupFrameBufferTexture=X,this.useMultisampledRTT=nt}function Nu(t,e,n){const r=n.isWebGL2;function i(n,i=Me){let o;if(n===mt)return t.UNSIGNED_BYTE;if(n===Et)return t.UNSIGNED_SHORT_4_4_4_4;if(n===St)return t.UNSIGNED_SHORT_5_5_5_1;if(n===gt)return t.BYTE;if(n===vt)return t.SHORT;if(n===_t)return t.UNSIGNED_SHORT;if(n===yt)return t.INT;if(n===bt)return t.UNSIGNED_INT;if(n===wt)return t.FLOAT;if(n===xt)return r?t.HALF_FLOAT:(o=e.get("OES_texture_half_float"),null!==o?o.HALF_FLOAT_OES:null);if(n===Tt)return t.ALPHA;if(n===At)return t.RGBA;if(n===Ct)return t.LUMINANCE;if(n===Rt)return t.LUMINANCE_ALPHA;if(n===Pt)return t.DEPTH_COMPONENT;if(n===Ot)return t.DEPTH_STENCIL;if(n===je)return o=e.get("EXT_sRGB"),null!==o?o.SRGB_ALPHA_EXT:null;if(n===Lt)return t.RED;if(n===kt)return t.RED_INTEGER;if(n===It)return t.RG;if(n===Dt)return t.RG_INTEGER;if(n===Nt)return t.RGBA_INTEGER;if(n===Ut||n===Ft||n===Bt||n===zt)if(i===Te){if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===o)return null;if(n===Ut)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Ft)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Bt)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===zt)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(o=e.get("WEBGL_compressed_texture_s3tc"),null===o)return null;if(n===Ut)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Ft)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Bt)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===zt)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===jt||n===Ht||n===Vt||n===Gt){if(o=e.get("WEBGL_compressed_texture_pvrtc"),null===o)return null;if(n===jt)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Ht)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Vt)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Gt)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Wt)return o=e.get("WEBGL_compressed_texture_etc1"),null!==o?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===qt||n===Xt){if(o=e.get("WEBGL_compressed_texture_etc"),null===o)return null;if(n===qt)return i===Te?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(n===Xt)return i===Te?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}if(n===Yt||n===$t||n===Kt||n===Jt||n===Zt||n===Qt||n===te||n===ee||n===ne||n===re||n===ie||n===oe||n===se||n===ae){if(o=e.get("WEBGL_compressed_texture_astc"),null===o)return null;if(n===Yt)return i===Te?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===$t)return i===Te?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Kt)return i===Te?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Jt)return i===Te?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Zt)return i===Te?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Qt)return i===Te?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===te)return i===Te?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===ee)return i===Te?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===ne)return i===Te?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===re)return i===Te?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===ie)return i===Te?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===oe)return i===Te?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===se)return i===Te?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===ae)return i===Te?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===ce){if(o=e.get("EXT_texture_compression_bptc"),null===o)return null;if(n===ce)return i===Te?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(n===le||n===ue||n===he||n===de){if(o=e.get("EXT_texture_compression_rgtc"),null===o)return null;if(n===ce)return o.COMPRESSED_RED_RGTC1_EXT;if(n===ue)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===he)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===de)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===Mt?r?t.UNSIGNED_INT_24_8:(o=e.get("WEBGL_depth_texture"),null!==o?o.UNSIGNED_INT_24_8_WEBGL:null):void 0!==t[n]?t[n]:null}return{convert:i}}class Uu extends so{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class Fu extends Yr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Bu={type:"move"};class zu{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Fu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Fu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Xn,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Xn),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Fu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Xn,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Xn),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let r=null,i=null,o=null;const s=this._targetRay,a=this._grip,c=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(c&&t.hand){o=!0;for(const o of t.hand.values()){const t=e.getJointPose(o,n),r=this._getHandJoint(c,o);null!==t&&(r.matrix.fromArray(t.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.matrixWorldNeedsUpdate=!0,r.jointRadius=t.radius),r.visible=null!==t}const r=c.joints["index-finger-tip"],i=c.joints["thumb-tip"],s=r.position.distanceTo(i.position),a=.02,l=.005;c.inputState.pinching&&s>a+l?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!c.inputState.pinching&&s<=a-l&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==a&&t.gripSpace&&(i=e.getPose(t.gripSpace,n),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1));null!==s&&(r=e.getPose(t.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(Bu)))}return null!==s&&(s.visible=null!==r),null!==a&&(a.visible=null!==i),null!==c&&(c.visible=null!==o),this}_getHandJoint(t,e){if(void 0===t.joints[e.jointName]){const n=new Fu;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class ju extends jn{constructor(t,e,n,r,i,o,s,a,c,l){if(l=void 0!==l?l:Pt,l!==Pt&&l!==Ot)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&l===Pt&&(n=bt),void 0===n&&l===Ot&&(n=Mt),super(null,r,i,o,s,a,l,n,c),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==s?s:lt,this.minFilter=void 0!==a?a:lt,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return null!==this.compareFunction&&(e.compareFunction=this.compareFunction),e}}class Hu extends Ge{constructor(t,e){super();const n=this;let r=null,i=1,o=null,s="local-floor",a=1,c=null,l=null,u=null,h=null,d=null,f=null;const p=e.getContextAttributes();let m=null,g=null;const v=[],_=[];let y=null;const b=new so;b.layers.enable(1),b.viewport=new Hn;const w=new so;w.layers.enable(2),w.viewport=new Hn;const x=[b,w],E=new Uu;E.layers.enable(1),E.layers.enable(2);let S=null,M=null;function T(t){const e=_.indexOf(t.inputSource);if(-1===e)return;const n=v[e];void 0!==n&&(n.update(t.inputSource,t.frame,c||o),n.dispatchEvent({type:t.type,data:t.inputSource}))}function A(){r.removeEventListener("select",T),r.removeEventListener("selectstart",T),r.removeEventListener("selectend",T),r.removeEventListener("squeeze",T),r.removeEventListener("squeezestart",T),r.removeEventListener("squeezeend",T),r.removeEventListener("end",A),r.removeEventListener("inputsourceschange",C);for(let t=0;t<v.length;t++){const e=_[t];null!==e&&(_[t]=null,v[t].disconnect(e))}S=null,M=null,t.setRenderTarget(m),d=null,h=null,u=null,r=null,g=null,N.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function C(t){for(let e=0;e<t.removed.length;e++){const n=t.removed[e],r=_.indexOf(n);r>=0&&(_[r]=null,v[r].disconnect(n))}for(let e=0;e<t.added.length;e++){const n=t.added[e];let r=_.indexOf(n);if(-1===r){for(let t=0;t<v.length;t++){if(t>=_.length){_.push(n),r=t;break}if(null===_[t]){_[t]=n,r=t;break}}if(-1===r)break}const i=v[r];i&&i.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getCamera=function(){},this.setUserCamera=function(t){y=t},this.getController=function(t){let e=v[t];return void 0===e&&(e=new zu,v[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=v[t];return void 0===e&&(e=new zu,v[t]=e),e.getGripSpace()},this.getHand=function(t){let e=v[t];return void 0===e&&(e=new zu,v[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){i=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){s=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(t){c=t},this.getBaseLayer=function(){return null!==h?h:d},this.getBinding=function(){return u},this.getFrame=function(){return f},this.getSession=function(){return r},this.setSession=async function(l){if(r=l,null!==r){if(m=t.getRenderTarget(),r.addEventListener("select",T),r.addEventListener("selectstart",T),r.addEventListener("selectend",T),r.addEventListener("squeeze",T),r.addEventListener("squeezestart",T),r.addEventListener("squeezeend",T),r.addEventListener("end",A),r.addEventListener("inputsourceschange",C),!0!==p.xrCompatible&&await e.makeXRCompatible(),void 0===r.renderState.layers||!1===t.capabilities.isWebGL2){const n={antialias:void 0!==r.renderState.layers||p.antialias,alpha:!0,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:i};d=new XRWebGLLayer(r,e,n),r.updateRenderState({baseLayer:d}),g=new Vn(d.framebufferWidth,d.framebufferHeight,{format:At,type:mt,colorSpace:t.outputColorSpace,stencilBuffer:p.stencil})}else{let n=null,o=null,s=null;p.depth&&(s=p.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,n=p.stencil?Ot:Pt,o=p.stencil?Mt:bt);const a={colorFormat:e.RGBA8,depthFormat:s,scaleFactor:i};u=new XRWebGLBinding(r,e),h=u.createProjectionLayer(a),r.updateRenderState({layers:[h]}),g=new Vn(h.textureWidth,h.textureHeight,{format:At,type:mt,depthTexture:new ju(h.textureWidth,h.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:p.stencil,colorSpace:t.outputColorSpace,samples:p.antialias?4:0});const c=t.properties.get(g);c.__ignoreDepthValues=h.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(a),c=null,o=await r.requestReferenceSpace(s),N.setContext(r),N.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode};const R=new Xn,P=new Xn;function O(t,e,n){R.setFromMatrixPosition(e.matrixWorld),P.setFromMatrixPosition(n.matrixWorld);const r=R.distanceTo(P),i=e.projectionMatrix.elements,o=n.projectionMatrix.elements,s=i[14]/(i[10]-1),a=i[14]/(i[10]+1),c=(i[9]+1)/i[5],l=(i[9]-1)/i[5],u=(i[8]-1)/i[0],h=(o[8]+1)/o[0],d=s*u,f=s*h,p=r/(-u+h),m=p*-u;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(p),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const g=s+p,v=a+p,_=d-m,y=f+(r-m),b=c*a/v*g,w=l*a/v*g;t.projectionMatrix.makePerspective(_,y,b,w,g,v),t.projectionMatrixInverse.copy(t.projectionMatrix).invert()}function L(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}function k(t,e){const n=y;null===e?n.matrix.copy(t.matrixWorld):(n.matrix.copy(e.matrixWorld),n.matrix.invert(),n.matrix.multiply(t.matrixWorld)),n.matrix.decompose(n.position,n.quaternion,n.scale),n.updateMatrixWorld(!0);const r=n.children;for(let i=0,o=r.length;i<o;i++)r[i].updateMatrixWorld(!0);n.projectionMatrix.copy(t.projectionMatrix),n.projectionMatrixInverse.copy(t.projectionMatrixInverse),n.isPerspectiveCamera&&(n.fov=2*Ye*Math.atan(1/n.projectionMatrix.elements[5]),n.zoom=1)}this.updateCameraXR=function(t){if(null===r)return t;y&&(t=y),E.near=w.near=b.near=t.near,E.far=w.far=b.far=t.far,S===E.near&&M===E.far||(r.updateRenderState({depthNear:E.near,depthFar:E.far}),S=E.near,M=E.far);const e=t.parent,n=E.cameras;L(E,e);for(let r=0;r<n.length;r++)L(n[r],e);return 2===n.length?O(E,b,w):E.projectionMatrix.copy(b.projectionMatrix),y&&k(E,e),E},this.getFoveation=function(){if(null!==h||null!==d)return a},this.setFoveation=function(t){a=t,null!==h&&(h.fixedFoveation=t),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=t)};let I=null;function D(e,r){if(l=r.getViewerPose(c||o),f=r,null!==l){const e=l.views;null!==d&&(t.setRenderTargetFramebuffer(g,d.framebuffer),t.setRenderTarget(g));let n=!1;e.length!==E.cameras.length&&(E.cameras.length=0,n=!0);for(let r=0;r<e.length;r++){const i=e[r];let o=null;if(null!==d)o=d.getViewport(i);else{const e=u.getViewSubImage(h,i);o=e.viewport,0===r&&(t.setRenderTargetTextures(g,e.colorTexture,h.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(g))}let s=x[r];void 0===s&&(s=new so,s.layers.enable(r),s.viewport=new Hn,x[r]=s),s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.quaternion,s.scale),s.projectionMatrix.fromArray(i.projectionMatrix),s.projectionMatrixInverse.copy(s.projectionMatrix).invert(),s.viewport.set(o.x,o.y,o.width,o.height),0===r&&(E.matrix.copy(s.matrix),E.matrix.decompose(E.position,E.quaternion,E.scale)),!0===n&&E.cameras.push(s)}}for(let t=0;t<v.length;t++){const e=_[t],n=v[t];null!==e&&void 0!==n&&n.update(e,r,c||o)}I&&I(e,r),r.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:r}),f=null}const N=new bo;N.setAnimationLoop(D),this.setAnimationLoop=function(t){I=t},this.dispose=function(){}}}function Vu(t,e){function n(t,e){!0===t.matrixAutoUpdate&&t.updateMatrix(),e.value.copy(t.matrix)}function r(e,n){n.color.getRGB(e.fogColor.value,to(t)),n.isFog?(e.fogNear.value=n.near,e.fogFar.value=n.far):n.isFogExp2&&(e.fogDensity.value=n.density)}function i(t,e,n,r,i){e.isMeshBasicMaterial||e.isMeshLambertMaterial?o(t,e):e.isMeshToonMaterial?(o(t,e),h(t,e)):e.isMeshPhongMaterial?(o(t,e),u(t,e)):e.isMeshStandardMaterial?(o(t,e),d(t,e),e.isMeshPhysicalMaterial&&p(t,e,i)):e.isMeshMatcapMaterial?(o(t,e),m(t,e)):e.isMeshDepthMaterial?o(t,e):e.isMeshDistanceMaterial?(o(t,e),g(t,e)):e.isMeshNormalMaterial?o(t,e):e.isLineBasicMaterial?(s(t,e),e.isLineDashedMaterial&&a(t,e)):e.isPointsMaterial?c(t,e,n,r):e.isSpriteMaterial?l(t,e):e.isShadowMaterial?(t.color.value.copy(e.color),t.opacity.value=e.opacity):e.isShaderMaterial&&(e.uniformsNeedUpdate=!1)}function o(r,i){r.opacity.value=i.opacity,i.color&&r.diffuse.value.copy(i.color),i.emissive&&r.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(r.map.value=i.map,n(i.map,r.mapTransform)),i.alphaMap&&(r.alphaMap.value=i.alphaMap,n(i.alphaMap,r.alphaMapTransform)),i.bumpMap&&(r.bumpMap.value=i.bumpMap,n(i.bumpMap,r.bumpMapTransform),r.bumpScale.value=i.bumpScale,i.side===f&&(r.bumpScale.value*=-1)),i.normalMap&&(r.normalMap.value=i.normalMap,n(i.normalMap,r.normalMapTransform),r.normalScale.value.copy(i.normalScale),i.side===f&&r.normalScale.value.negate()),i.displacementMap&&(r.displacementMap.value=i.displacementMap,n(i.displacementMap,r.displacementMapTransform),r.displacementScale.value=i.displacementScale,r.displacementBias.value=i.displacementBias),i.emissiveMap&&(r.emissiveMap.value=i.emissiveMap,n(i.emissiveMap,r.emissiveMapTransform)),i.specularMap&&(r.specularMap.value=i.specularMap,n(i.specularMap,r.specularMapTransform)),i.alphaTest>0&&(r.alphaTest.value=i.alphaTest);const o=e.get(i).envMap;if(o&&(r.envMap.value=o,r.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,r.reflectivity.value=i.reflectivity,r.ior.value=i.ior,r.refractionRatio.value=i.refractionRatio),i.lightMap){r.lightMap.value=i.lightMap;const e=!0===t.useLegacyLights?Math.PI:1;r.lightMapIntensity.value=i.lightMapIntensity*e,n(i.lightMap,r.lightMapTransform)}i.aoMap&&(r.aoMap.value=i.aoMap,r.aoMapIntensity.value=i.aoMapIntensity,n(i.aoMap,r.aoMapTransform))}function s(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,e.map&&(t.map.value=e.map,n(e.map,t.mapTransform))}function a(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function c(t,e,r,i){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*r,t.scale.value=.5*i,e.map&&(t.map.value=e.map,n(e.map,t.uvTransform)),e.alphaMap&&(t.alphaMap.value=e.alphaMap,n(e.alphaMap,t.alphaMapTransform)),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}function l(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map,n(e.map,t.mapTransform)),e.alphaMap&&(t.alphaMap.value=e.alphaMap,n(e.alphaMap,t.alphaMapTransform)),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}function u(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4)}function h(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap)}function d(t,r){t.metalness.value=r.metalness,r.metalnessMap&&(t.metalnessMap.value=r.metalnessMap,n(r.metalnessMap,t.metalnessMapTransform)),t.roughness.value=r.roughness,r.roughnessMap&&(t.roughnessMap.value=r.roughnessMap,n(r.roughnessMap,t.roughnessMapTransform));const i=e.get(r).envMap;i&&(t.envMapIntensity.value=r.envMapIntensity)}function p(t,e,r){t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap,n(e.sheenColorMap,t.sheenColorMapTransform)),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap,n(e.sheenRoughnessMap,t.sheenRoughnessMapTransform))),e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap,n(e.clearcoatMap,t.clearcoatMapTransform)),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap,n(e.clearcoatRoughnessMap,t.clearcoatRoughnessMapTransform)),e.clearcoatNormalMap&&(t.clearcoatNormalMap.value=e.clearcoatNormalMap,n(e.clearcoatNormalMap,t.clearcoatNormalMapTransform),t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),e.side===f&&t.clearcoatNormalScale.value.negate())),e.iridescence>0&&(t.iridescence.value=e.iridescence,t.iridescenceIOR.value=e.iridescenceIOR,t.iridescenceThicknessMinimum.value=e.iridescenceThicknessRange[0],t.iridescenceThicknessMaximum.value=e.iridescenceThicknessRange[1],e.iridescenceMap&&(t.iridescenceMap.value=e.iridescenceMap,n(e.iridescenceMap,t.iridescenceMapTransform)),e.iridescenceThicknessMap&&(t.iridescenceThicknessMap.value=e.iridescenceThicknessMap,n(e.iridescenceThicknessMap,t.iridescenceThicknessMapTransform))),e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=r.texture,t.transmissionSamplerSize.value.set(r.width,r.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap,n(e.transmissionMap,t.transmissionMapTransform)),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap,n(e.thicknessMap,t.thicknessMapTransform)),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor)),e.anisotropy>0&&(t.anisotropyVector.value.set(e.anisotropy*Math.cos(e.anisotropyRotation),e.anisotropy*Math.sin(e.anisotropyRotation)),e.anisotropyMap&&(t.anisotropyMap.value=e.anisotropyMap,n(e.anisotropyMap,t.anisotropyMapTransform))),t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap,n(e.specularColorMap,t.specularColorMapTransform)),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap,n(e.specularIntensityMap,t.specularIntensityMapTransform))}function m(t,e){e.matcap&&(t.matcap.value=e.matcap)}function g(t,n){const r=e.get(n).light;t.referencePosition.value.setFromMatrixPosition(r.matrixWorld),t.nearDistance.value=r.shadow.camera.near,t.farDistance.value=r.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function Gu(t,e,n,r){let i={},o={},s=[];const a=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function c(t,e){const n=e.program;r.uniformBlockBinding(t,n)}function l(t,n){let s=i[t.id];void 0===s&&(p(t),s=u(t),i[t.id]=s,t.addEventListener("dispose",g));const a=n.program;r.updateUBOMapping(t,a);const c=e.render.frame;o[t.id]!==c&&(d(t),o[t.id]=c)}function u(e){const n=h();e.__bindingPointIndex=n;const r=t.createBuffer(),i=e.__size,o=e.usage;return t.bindBuffer(t.UNIFORM_BUFFER,r),t.bufferData(t.UNIFORM_BUFFER,i,o),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,n,r),r}function h(){for(let t=0;t<a;t++)if(-1===s.indexOf(t))return s.push(t),t;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(e){const n=i[e.id],r=e.uniforms,o=e.__cache;t.bindBuffer(t.UNIFORM_BUFFER,n);for(let i=0,s=r.length;i<s;i++){const e=r[i];if(!0===f(e,i,o)){const n=e.__offset,r=Array.isArray(e.value)?e.value:[e.value];let i=0;for(let o=0;o<r.length;o++){const s=r[o],a=m(s);"number"===typeof s?(e.__data[0]=s,t.bufferSubData(t.UNIFORM_BUFFER,n+i,e.__data)):s.isMatrix3?(e.__data[0]=s.elements[0],e.__data[1]=s.elements[1],e.__data[2]=s.elements[2],e.__data[3]=s.elements[0],e.__data[4]=s.elements[3],e.__data[5]=s.elements[4],e.__data[6]=s.elements[5],e.__data[7]=s.elements[0],e.__data[8]=s.elements[6],e.__data[9]=s.elements[7],e.__data[10]=s.elements[8],e.__data[11]=s.elements[0]):(s.toArray(e.__data,i),i+=a.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,n,e.__data)}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function f(t,e,n){const r=t.value;if(void 0===n[e]){if("number"===typeof r)n[e]=r;else{const t=Array.isArray(r)?r:[r],i=[];for(let e=0;e<t.length;e++)i.push(t[e].clone());n[e]=i}return!0}if("number"===typeof r){if(n[e]!==r)return n[e]=r,!0}else{const t=Array.isArray(n[e])?n[e]:[n[e]],i=Array.isArray(r)?r:[r];for(let e=0;e<t.length;e++){const n=t[e];if(!1===n.equals(i[e]))return n.copy(i[e]),!0}}return!1}function p(t){const e=t.uniforms;let n=0;const r=16;let i=0;for(let o=0,s=e.length;o<s;o++){const t=e[o],s={boundary:0,storage:0},a=Array.isArray(t.value)?t.value:[t.value];for(let e=0,n=a.length;e<n;e++){const t=a[e],n=m(t);s.boundary+=n.boundary,s.storage+=n.storage}if(t.__data=new Float32Array(s.storage/Float32Array.BYTES_PER_ELEMENT),t.__offset=n,o>0){i=n%r;const e=r-i;0!==i&&e-s.boundary<0&&(n+=r-i,t.__offset=n)}n+=s.storage}return i=n%r,i>0&&(n+=r-i),t.__size=n,t.__cache={},this}function m(t){const e={boundary:0,storage:0};return"number"===typeof t?(e.boundary=4,e.storage=4):t.isVector2?(e.boundary=8,e.storage=8):t.isVector3||t.isColor?(e.boundary=16,e.storage=12):t.isVector4?(e.boundary=16,e.storage=16):t.isMatrix3?(e.boundary=48,e.storage=48):t.isMatrix4?(e.boundary=64,e.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),e}function g(e){const n=e.target;n.removeEventListener("dispose",g);const r=s.indexOf(n.__bindingPointIndex);s.splice(r,1),t.deleteBuffer(i[n.id]),delete i[n.id],delete o[n.id]}function v(){for(const e in i)t.deleteBuffer(i[e]);s=[],i={},o={}}return{bind:c,update:l,dispose:v}}function Wu(){const t=En("canvas");return t.style.display="block",t}class qu{constructor(t={}){const{canvas:e=Wu(),context:n=null,depth:i=!0,stencil:o=!0,alpha:s=!1,antialias:a=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:l=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:h=!1}=t;let m;this.isWebGLRenderer=!0,m=null!==n?n.getContextAttributes().alpha:s;const g=new Uint32Array(4),v=new Int32Array(4);let _=null,y=null;const b=[],w=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=Te,this.useLegacyLights=!0,this.toneMapping=Y,this.toneMappingExposure=1;const x=this;let E=!1,S=0,M=0,T=null,A=-1,C=null;const R=new Hn,P=new Hn;let O=null;const L=new fi(0);let k=0,I=e.width,D=e.height,N=1,U=null,F=null;const B=new Hn(0,0,I,D),z=new Hn(0,0,I,D);let j=!1;const H=new yo;let V=!1,G=!1,W=null;const q=new Er,X=new yn,$=new Xn,K={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function J(){return null===T?N:1}let Z,Q,tt,et,nt,rt,it,ot,st,at,ct,lt,ut,ht,dt,ft,gt,vt,yt,Tt,Ct,Rt,Pt,Ot,Lt=n;function It(t,n){for(let r=0;r<t.length;r++){const i=t[r],o=e.getContext(i,n);if(null!==o)return o}return null}try{const t={alpha:!0,depth:i,stencil:o,antialias:a,premultipliedAlpha:c,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${r}`),e.addEventListener("webglcontextlost",Bt,!1),e.addEventListener("webglcontextrestored",zt,!1),e.addEventListener("webglcontextcreationerror",jt,!1),null===Lt){const e=["webgl2","webgl","experimental-webgl"];if(!0===x.isWebGL1Renderer&&e.shift(),Lt=It(e,t),null===Lt)throw It(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Lt instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===Lt.getShaderPrecisionFormat&&(Lt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(se){throw console.error("THREE.WebGLRenderer: "+se.message),se}function Ut(){Z=new Ac(Lt),Q=new oc(Lt,Z,t),Z.init(Q),Rt=new Nu(Lt,Z,Q),tt=new Iu(Lt,Z,Q),et=new Pc(Lt),nt=new vu,rt=new Du(Lt,Z,tt,nt,Q,Rt,et),it=new ac(x),ot=new Tc(x),st=new wo(Lt,Q),Pt=new rc(Lt,Z,st,Q),at=new Cc(Lt,st,et,Pt),ct=new Ic(Lt,at,st,et),yt=new kc(Lt,Q,rt),ft=new sc(nt),lt=new gu(x,it,ot,Z,Q,Pt,ft),ut=new Vu(x,nt),ht=new wu,dt=new Cu(Z,Q),vt=new nc(x,it,ot,tt,ct,m,c),gt=new ku(x,ct,Q),Ot=new Gu(Lt,et,Q,tt),Tt=new ic(Lt,Z,et,Q),Ct=new Rc(Lt,Z,et,Q),et.programs=lt.programs,x.capabilities=Q,x.extensions=Z,x.properties=nt,x.renderLists=ht,x.shadowMap=gt,x.state=tt,x.info=et}Ut();const Ft=new Hu(x,Lt);function Bt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function zt(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;const t=et.autoReset,e=gt.enabled,n=gt.autoUpdate,r=gt.needsUpdate,i=gt.type;Ut(),et.autoReset=t,gt.enabled=e,gt.autoUpdate=n,gt.needsUpdate=r,gt.type=i}function jt(t){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",t.statusMessage)}function Ht(t){const e=t.target;e.removeEventListener("dispose",Ht),Vt(e)}function Vt(t){Gt(t),nt.remove(t)}function Gt(t){const e=nt.get(t).programs;void 0!==e&&(e.forEach((function(t){lt.releaseProgram(t)})),t.isShaderMaterial&&lt.releaseShaderCache(t))}this.xr=Ft,this.getContext=function(){return Lt},this.getContextAttributes=function(){return Lt.getContextAttributes()},this.forceContextLoss=function(){const t=Z.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=Z.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return N},this.setPixelRatio=function(t){void 0!==t&&(N=t,this.setSize(I,D,!1))},this.getSize=function(t){return t.set(I,D)},this.setSize=function(t,n,r=!0){Ft.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(I=t,D=n,e.width=Math.floor(t*N),e.height=Math.floor(n*N),!0===r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return t.set(I*N,D*N).floor()},this.setDrawingBufferSize=function(t,n,r){I=t,D=n,N=r,e.width=Math.floor(t*r),e.height=Math.floor(n*r),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return t.copy(R)},this.getViewport=function(t){return t.copy(B)},this.setViewport=function(t,e,n,r){t.isVector4?B.set(t.x,t.y,t.z,t.w):B.set(t,e,n,r),tt.viewport(R.copy(B).multiplyScalar(N).floor())},this.getScissor=function(t){return t.copy(z)},this.setScissor=function(t,e,n,r){t.isVector4?z.set(t.x,t.y,t.z,t.w):z.set(t,e,n,r),tt.scissor(P.copy(z).multiplyScalar(N).floor())},this.getScissorTest=function(){return j},this.setScissorTest=function(t){tt.setScissorTest(j=t)},this.setOpaqueSort=function(t){U=t},this.setTransparentSort=function(t){F=t},this.getClearColor=function(t){return t.copy(vt.getClearColor())},this.setClearColor=function(){vt.setClearColor.apply(vt,arguments)},this.getClearAlpha=function(){return vt.getClearAlpha()},this.setClearAlpha=function(){vt.setClearAlpha.apply(vt,arguments)},this.clear=function(t=!0,e=!0,n=!0){let r=0;if(t){let t=!1;if(null!==T){const e=T.texture.format;t=e===Nt||e===Dt||e===kt}if(t){const t=T.texture.type,e=t===mt||t===bt||t===_t||t===Mt||t===Et||t===St,n=vt.getClearColor(),r=vt.getClearAlpha(),i=n.r,o=n.g,s=n.b,a=nt.get(T).__webglFramebuffer;e?(g[0]=i,g[1]=o,g[2]=s,g[3]=r,Lt.clearBufferuiv(Lt.COLOR,a,g)):(v[0]=i,v[1]=o,v[2]=s,v[3]=r,Lt.clearBufferiv(Lt.COLOR,a,v))}else r|=Lt.COLOR_BUFFER_BIT}e&&(r|=Lt.DEPTH_BUFFER_BIT),n&&(r|=Lt.STENCIL_BUFFER_BIT),Lt.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Bt,!1),e.removeEventListener("webglcontextrestored",zt,!1),e.removeEventListener("webglcontextcreationerror",jt,!1),ht.dispose(),dt.dispose(),nt.dispose(),it.dispose(),ot.dispose(),ct.dispose(),Pt.dispose(),Ot.dispose(),lt.dispose(),Ft.dispose(),Ft.removeEventListener("sessionstart",Xt),Ft.removeEventListener("sessionend",Yt),W&&(W.dispose(),W=null),$t.stop()},this.renderBufferDirect=function(t,e,n,r,i,o){null===e&&(e=K);const s=i.isMesh&&i.matrixWorld.determinant()<0,a=re(t,e,n,r,i);tt.setMaterial(r,s);let c=n.index,l=1;!0===r.wireframe&&(c=at.getWireframeAttribute(n),l=2);const u=n.drawRange,h=n.attributes.position;let d=u.start*l,f=(u.start+u.count)*l;null!==o&&(d=Math.max(d,o.start*l),f=Math.min(f,(o.start+o.count)*l)),null!==c?(d=Math.max(d,0),f=Math.min(f,c.count)):void 0!==h&&null!==h&&(d=Math.max(d,0),f=Math.min(f,h.count));const p=f-d;if(p<0||p===1/0)return;let m;Pt.setup(i,r,a,n,c);let g=Tt;if(null!==c&&(m=st.get(c),g=Ct,g.setIndex(m)),i.isMesh)!0===r.wireframe?(tt.setLineWidth(r.wireframeLinewidth*J()),g.setMode(Lt.LINES)):g.setMode(Lt.TRIANGLES);else if(i.isLine){let t=r.linewidth;void 0===t&&(t=1),tt.setLineWidth(t*J()),i.isLineSegments?g.setMode(Lt.LINES):i.isLineLoop?g.setMode(Lt.LINE_LOOP):g.setMode(Lt.LINE_STRIP)}else i.isPoints?g.setMode(Lt.POINTS):i.isSprite&&g.setMode(Lt.TRIANGLES);if(i.isInstancedMesh)g.renderInstances(d,p,i.count);else if(n.isInstancedBufferGeometry){const t=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,e=Math.min(n.instanceCount,t);g.renderInstances(d,p,e)}else g.render(d,p)},this.compile=function(t,e){function n(t,e,n){!0===t.transparent&&t.side===p&&!1===t.forceSinglePass?(t.side=f,t.needsUpdate=!0,ee(t,e,n),t.side=d,t.needsUpdate=!0,ee(t,e,n),t.side=p):ee(t,e,n)}y=dt.get(t),y.init(),w.push(y),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(y.pushLight(t),t.castShadow&&y.pushShadow(t))})),y.setupLights(x.useLegacyLights),t.traverse((function(e){const r=e.material;if(r)if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];n(o,t,e)}else n(r,t,e)})),w.pop(),y=null};let Wt=null;function qt(t){Wt&&Wt(t)}function Xt(){$t.stop()}function Yt(){$t.start()}const $t=new bo;function Kt(t,e,n,r){if(!1===t.visible)return;const i=t.layers.test(e.layers);if(i)if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)y.pushLight(t),t.castShadow&&y.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||H.intersectsSprite(t)){r&&$.setFromMatrixPosition(t.matrixWorld).applyMatrix4(q);const e=ct.update(t),i=t.material;i.visible&&_.push(t,e,i,n,$.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(!t.frustumCulled||H.intersectsObject(t))){t.isSkinnedMesh&&t.skeleton.frame!==et.render.frame&&(t.skeleton.update(),t.skeleton.frame=et.render.frame);const e=ct.update(t),i=t.material;if(r&&(void 0!==t.boundingSphere?(null===t.boundingSphere&&t.computeBoundingSphere(),$.copy(t.boundingSphere.center)):(null===e.boundingSphere&&e.computeBoundingSphere(),$.copy(e.boundingSphere.center)),$.applyMatrix4(t.matrixWorld).applyMatrix4(q)),Array.isArray(i)){const r=e.groups;for(let o=0,s=r.length;o<s;o++){const s=r[o],a=i[s.materialIndex];a&&a.visible&&_.push(t,e,a,n,$.z,s)}}else i.visible&&_.push(t,e,i,n,$.z,null)}const o=t.children;for(let s=0,a=o.length;s<a;s++)Kt(o[s],e,n,r)}function Jt(t,e,n,r){const i=t.opaque,o=t.transmissive,s=t.transparent;y.setupLightsView(n),!0===V&&ft.setGlobalState(x.clippingPlanes,n),o.length>0&&Zt(i,o,e,n),r&&tt.viewport(R.copy(r)),i.length>0&&Qt(i,e,n),o.length>0&&Qt(o,e,n),s.length>0&&Qt(s,e,n),tt.buffers.depth.setTest(!0),tt.buffers.depth.setMask(!0),tt.buffers.color.setMask(!0),tt.setPolygonOffset(!1)}function Zt(t,e,n,r){const i=Q.isWebGL2;null===W&&(W=new Vn(1,1,{generateMipmaps:!0,type:Z.has("EXT_color_buffer_half_float")?xt:mt,minFilter:pt,samples:i&&!0===a?4:0})),x.getDrawingBufferSize(X),i?W.setSize(X.x,X.y):W.setSize(pn(X.x),pn(X.y));const o=x.getRenderTarget();x.setRenderTarget(W),x.getClearColor(L),k=x.getClearAlpha(),k<1&&x.setClearColor(16777215,.5),x.clear();const s=x.toneMapping;x.toneMapping=Y,Qt(t,n,r),rt.updateMultisampleRenderTarget(W),rt.updateRenderTargetMipmap(W);let c=!1;for(let a=0,l=e.length;a<l;a++){const t=e[a],i=t.object,o=t.geometry,s=t.material,l=t.group;if(s.side===p&&i.layers.test(r.layers)){const t=s.side;s.side=f,s.needsUpdate=!0,te(i,n,r,o,s,l),s.side=t,s.needsUpdate=!0,c=!0}}!0===c&&(rt.updateMultisampleRenderTarget(W),rt.updateRenderTargetMipmap(W)),x.setRenderTarget(o),x.setClearColor(L,k),x.toneMapping=s}function Qt(t,e,n){const r=!0===e.isScene?e.overrideMaterial:null;for(let i=0,o=t.length;i<o;i++){const o=t[i],s=o.object,a=o.geometry,c=null===r?o.material:r,l=o.group;s.layers.test(n.layers)&&te(s,e,n,a,c,l)}}function te(t,e,n,r,i,o){t.onBeforeRender(x,e,n,r,i,o),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),i.onBeforeRender(x,e,n,r,t,o),!0===i.transparent&&i.side===p&&!1===i.forceSinglePass?(i.side=f,i.needsUpdate=!0,x.renderBufferDirect(n,e,r,i,t,o),i.side=d,i.needsUpdate=!0,x.renderBufferDirect(n,e,r,i,t,o),i.side=p):x.renderBufferDirect(n,e,r,i,t,o),t.onAfterRender(x,e,n,r,i,o)}function ee(t,e,n){!0!==e.isScene&&(e=K);const r=nt.get(t),i=y.state.lights,o=y.state.shadowsArray,s=i.state.version,a=lt.getParameters(t,i.state,o,e,n),c=lt.getProgramCacheKey(a);let l=r.programs;r.environment=t.isMeshStandardMaterial?e.environment:null,r.fog=e.fog,r.envMap=(t.isMeshStandardMaterial?ot:it).get(t.envMap||r.environment),void 0===l&&(t.addEventListener("dispose",Ht),l=new Map,r.programs=l);let u=l.get(c);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===s)return ne(t,a),u}else a.uniforms=lt.getUniforms(t),t.onBuild(n,a,x),t.onBeforeCompile(a,x),u=lt.acquireProgram(a,c),l.set(c,u),r.uniforms=a.uniforms;const h=r.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(h.clippingPlanes=ft.uniform),ne(t,a),r.needsLights=oe(t),r.lightsStateVersion=s,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotLightMatrix.value=i.state.spotLightMatrix,h.spotLightMap.value=i.state.spotLightMap,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);const d=u.getUniforms(),f=zl.seqWithValue(d.seq,h);return r.currentProgram=u,r.uniformsList=f,u}function ne(t,e){const n=nt.get(t);n.outputColorSpace=e.outputColorSpace,n.instancing=e.instancing,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphColors=e.morphColors,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents,n.toneMapping=e.toneMapping}function re(t,e,n,r,i){!0!==e.isScene&&(e=K),rt.resetTextureUnits();const o=e.fog,s=r.isMeshStandardMaterial?e.environment:null,a=null===T?x.outputColorSpace:!0===T.isXRRenderTarget?T.texture.colorSpace:Ae,c=(r.isMeshStandardMaterial?ot:it).get(r.envMap||s),l=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!n.attributes.tangent&&(!!r.normalMap||r.anisotropy>0),h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,f=!!n.morphAttributes.color,p=r.toneMapped?x.toneMapping:Y,m=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,g=void 0!==m?m.length:0,v=nt.get(r),_=y.state.lights;if(!0===V&&(!0===G||t!==C)){const e=t===C&&r.id===A;ft.setState(r,t,e)}let b=!1;r.version===v.__version?v.needsLights&&v.lightsStateVersion!==_.state.version||v.outputColorSpace!==a||i.isInstancedMesh&&!1===v.instancing?b=!0:i.isInstancedMesh||!0!==v.instancing?i.isSkinnedMesh&&!1===v.skinning?b=!0:i.isSkinnedMesh||!0!==v.skinning?v.envMap!==c||!0===r.fog&&v.fog!==o?b=!0:void 0===v.numClippingPlanes||v.numClippingPlanes===ft.numPlanes&&v.numIntersection===ft.numIntersection?(v.vertexAlphas!==l||v.vertexTangents!==u||v.morphTargets!==h||v.morphNormals!==d||v.morphColors!==f||v.toneMapping!==p||!0===Q.isWebGL2&&v.morphTargetsCount!==g)&&(b=!0):b=!0:b=!0:b=!0:(b=!0,v.__version=r.version);let w=v.currentProgram;!0===b&&(w=ee(r,e,i));let E=!1,S=!1,M=!1;const R=w.getUniforms(),P=v.uniforms;if(tt.useProgram(w.program)&&(E=!0,S=!0,M=!0),r.id!==A&&(A=r.id,S=!0),E||C!==t){if(R.setValue(Lt,"projectionMatrix",t.projectionMatrix),Q.logarithmicDepthBuffer&&R.setValue(Lt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),C!==t&&(C=t,S=!0,M=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){const e=R.map.cameraPosition;void 0!==e&&e.setValue(Lt,$.setFromMatrixPosition(t.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&R.setValue(Lt,"isOrthographic",!0===t.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&R.setValue(Lt,"viewMatrix",t.matrixWorldInverse)}if(i.isSkinnedMesh){R.setOptional(Lt,i,"bindMatrix"),R.setOptional(Lt,i,"bindMatrixInverse");const t=i.skeleton;t&&(Q.floatVertexTextures?(null===t.boneTexture&&t.computeBoneTexture(),R.setValue(Lt,"boneTexture",t.boneTexture,rt),R.setValue(Lt,"boneTextureSize",t.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const O=n.morphAttributes;if((void 0!==O.position||void 0!==O.normal||void 0!==O.color&&!0===Q.isWebGL2)&&yt.update(i,n,w),(S||v.receiveShadow!==i.receiveShadow)&&(v.receiveShadow=i.receiveShadow,R.setValue(Lt,"receiveShadow",i.receiveShadow)),r.isMeshGouraudMaterial&&null!==r.envMap&&(P.envMap.value=c,P.flipEnvMap.value=c.isCubeTexture&&!1===c.isRenderTargetTexture?-1:1),S&&(R.setValue(Lt,"toneMappingExposure",x.toneMappingExposure),v.needsLights&&ie(P,M),o&&!0===r.fog&&ut.refreshFogUniforms(P,o),ut.refreshMaterialUniforms(P,r,N,D,W),zl.upload(Lt,v.uniformsList,P,rt)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(zl.upload(Lt,v.uniformsList,P,rt),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&R.setValue(Lt,"center",i.center),R.setValue(Lt,"modelViewMatrix",i.modelViewMatrix),R.setValue(Lt,"normalMatrix",i.normalMatrix),R.setValue(Lt,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const t=r.uniformsGroups;for(let e=0,n=t.length;e<n;e++)if(Q.isWebGL2){const n=t[e];Ot.update(n,w),Ot.bind(n,w)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return w}function ie(t,e){t.ambientLightColor.needsUpdate=e,t.lightProbe.needsUpdate=e,t.directionalLights.needsUpdate=e,t.directionalLightShadows.needsUpdate=e,t.pointLights.needsUpdate=e,t.pointLightShadows.needsUpdate=e,t.spotLights.needsUpdate=e,t.spotLightShadows.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function oe(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}$t.setAnimationLoop(qt),"undefined"!==typeof self&&$t.setContext(self),this.setAnimationLoop=function(t){Wt=t,Ft.setAnimationLoop(t),null===t?$t.stop():$t.start()},Ft.addEventListener("sessionstart",Xt),Ft.addEventListener("sessionend",Yt),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===E)return;!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===e.parent&&!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),!0===Ft.enabled&&!0===Ft.isPresenting&&(e=Ft.updateCameraXR(e)),!0===t.isScene&&t.onBeforeRender(x,t,e,T),y=dt.get(t,w.length),y.init(),w.push(y),q.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),H.setFromProjectionMatrix(q),G=this.localClippingEnabled,V=ft.init(this.clippingPlanes,G),_=ht.get(t,b.length),_.init(),b.push(_),Kt(t,e,0,x.sortObjects),_.finish(),!0===x.sortObjects&&_.sort(U,F),!0===V&&ft.beginShadows();const n=y.state.shadowsArray;if(gt.render(n,t,e),!0===V&&ft.endShadows(),!0===this.info.autoReset&&this.info.reset(),this.info.render.frame++,vt.render(_,t),y.setupLights(x.useLegacyLights),e.isArrayCamera){const n=e.cameras;for(let e=0,r=n.length;e<r;e++){const r=n[e];Jt(_,t,r,r.viewport)}}else Jt(_,t,e);null!==T&&(rt.updateMultisampleRenderTarget(T),rt.updateRenderTargetMipmap(T)),!0===t.isScene&&t.onAfterRender(x,t,e),Pt.resetDefaultState(),A=-1,C=null,w.pop(),y=w.length>0?w[w.length-1]:null,b.pop(),_=b.length>0?b[b.length-1]:null},this.getActiveCubeFace=function(){return S},this.getActiveMipmapLevel=function(){return M},this.getRenderTarget=function(){return T},this.setRenderTargetTextures=function(t,e,n){nt.get(t.texture).__webglTexture=e,nt.get(t.depthTexture).__webglTexture=n;const r=nt.get(t);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===Z.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(t,e){const n=nt.get(t);n.__webglFramebuffer=e,n.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t,e=0,n=0){T=t,S=e,M=n;let r=!0,i=null,o=!1,s=!1;if(t){const n=nt.get(t);void 0!==n.__useDefaultFramebuffer?(tt.bindFramebuffer(Lt.FRAMEBUFFER,null),r=!1):void 0===n.__webglFramebuffer?rt.setupRenderTarget(t):n.__hasExternalTextures&&rt.rebindTextures(t,nt.get(t.texture).__webglTexture,nt.get(t.depthTexture).__webglTexture);const a=t.texture;(a.isData3DTexture||a.isDataArrayTexture||a.isCompressedArrayTexture)&&(s=!0);const c=nt.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(i=c[e],o=!0):i=Q.isWebGL2&&t.samples>0&&!1===rt.useMultisampledRTT(t)?nt.get(t).__webglMultisampledFramebuffer:c,R.copy(t.viewport),P.copy(t.scissor),O=t.scissorTest}else R.copy(B).multiplyScalar(N).floor(),P.copy(z).multiplyScalar(N).floor(),O=j;const a=tt.bindFramebuffer(Lt.FRAMEBUFFER,i);if(a&&Q.drawBuffers&&r&&tt.drawBuffers(t,i),tt.viewport(R),tt.scissor(P),tt.setScissorTest(O),o){const r=nt.get(t.texture);Lt.framebufferTexture2D(Lt.FRAMEBUFFER,Lt.COLOR_ATTACHMENT0,Lt.TEXTURE_CUBE_MAP_POSITIVE_X+e,r.__webglTexture,n)}else if(s){const r=nt.get(t.texture),i=e||0;Lt.framebufferTextureLayer(Lt.FRAMEBUFFER,Lt.COLOR_ATTACHMENT0,r.__webglTexture,n||0,i)}A=-1},this.readRenderTargetPixels=function(t,e,n,r,i,o,s){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let a=nt.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==s&&(a=a[s]),a){tt.bindFramebuffer(Lt.FRAMEBUFFER,a);try{const s=t.texture,a=s.format,c=s.type;if(a!==At&&Rt.convert(a)!==Lt.getParameter(Lt.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const l=c===xt&&(Z.has("EXT_color_buffer_half_float")||Q.isWebGL2&&Z.has("EXT_color_buffer_float"));if(c!==mt&&Rt.convert(c)!==Lt.getParameter(Lt.IMPLEMENTATION_COLOR_READ_TYPE)&&(c!==wt||!(Q.isWebGL2||Z.has("OES_texture_float")||Z.has("WEBGL_color_buffer_float")))&&!l)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&Lt.readPixels(e,n,r,i,Rt.convert(a),Rt.convert(c),o)}finally{const t=null!==T?nt.get(T).__webglFramebuffer:null;tt.bindFramebuffer(Lt.FRAMEBUFFER,t)}}},this.copyFramebufferToTexture=function(t,e,n=0){const r=Math.pow(2,-n),i=Math.floor(e.image.width*r),o=Math.floor(e.image.height*r);rt.setTexture2D(e,0),Lt.copyTexSubImage2D(Lt.TEXTURE_2D,n,0,0,t.x,t.y,i,o),tt.unbindTexture()},this.copyTextureToTexture=function(t,e,n,r=0){const i=e.image.width,o=e.image.height,s=Rt.convert(n.format),a=Rt.convert(n.type);rt.setTexture2D(n,0),Lt.pixelStorei(Lt.UNPACK_FLIP_Y_WEBGL,n.flipY),Lt.pixelStorei(Lt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),Lt.pixelStorei(Lt.UNPACK_ALIGNMENT,n.unpackAlignment),e.isDataTexture?Lt.texSubImage2D(Lt.TEXTURE_2D,r,t.x,t.y,i,o,s,a,e.image.data):e.isCompressedTexture?Lt.compressedTexSubImage2D(Lt.TEXTURE_2D,r,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,s,e.mipmaps[0].data):Lt.texSubImage2D(Lt.TEXTURE_2D,r,t.x,t.y,s,a,e.image),0===r&&n.generateMipmaps&&Lt.generateMipmap(Lt.TEXTURE_2D),tt.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,r,i=0){if(x.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const o=t.max.x-t.min.x+1,s=t.max.y-t.min.y+1,a=t.max.z-t.min.z+1,c=Rt.convert(r.format),l=Rt.convert(r.type);let u;if(r.isData3DTexture)rt.setTexture3D(r,0),u=Lt.TEXTURE_3D;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");rt.setTexture2DArray(r,0),u=Lt.TEXTURE_2D_ARRAY}Lt.pixelStorei(Lt.UNPACK_FLIP_Y_WEBGL,r.flipY),Lt.pixelStorei(Lt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),Lt.pixelStorei(Lt.UNPACK_ALIGNMENT,r.unpackAlignment);const h=Lt.getParameter(Lt.UNPACK_ROW_LENGTH),d=Lt.getParameter(Lt.UNPACK_IMAGE_HEIGHT),f=Lt.getParameter(Lt.UNPACK_SKIP_PIXELS),p=Lt.getParameter(Lt.UNPACK_SKIP_ROWS),m=Lt.getParameter(Lt.UNPACK_SKIP_IMAGES),g=n.isCompressedTexture?n.mipmaps[0]:n.image;Lt.pixelStorei(Lt.UNPACK_ROW_LENGTH,g.width),Lt.pixelStorei(Lt.UNPACK_IMAGE_HEIGHT,g.height),Lt.pixelStorei(Lt.UNPACK_SKIP_PIXELS,t.min.x),Lt.pixelStorei(Lt.UNPACK_SKIP_ROWS,t.min.y),Lt.pixelStorei(Lt.UNPACK_SKIP_IMAGES,t.min.z),n.isDataTexture||n.isData3DTexture?Lt.texSubImage3D(u,i,e.x,e.y,e.z,o,s,a,c,l,g.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Lt.compressedTexSubImage3D(u,i,e.x,e.y,e.z,o,s,a,c,g.data)):Lt.texSubImage3D(u,i,e.x,e.y,e.z,o,s,a,c,l,g),Lt.pixelStorei(Lt.UNPACK_ROW_LENGTH,h),Lt.pixelStorei(Lt.UNPACK_IMAGE_HEIGHT,d),Lt.pixelStorei(Lt.UNPACK_SKIP_PIXELS,f),Lt.pixelStorei(Lt.UNPACK_SKIP_ROWS,p),Lt.pixelStorei(Lt.UNPACK_SKIP_IMAGES,m),0===i&&r.generateMipmaps&&Lt.generateMipmap(u),tt.unbindTexture()},this.initTexture=function(t){t.isCubeTexture?rt.setTextureCube(t,0):t.isData3DTexture?rt.setTexture3D(t,0):t.isDataArrayTexture||t.isCompressedArrayTexture?rt.setTexture2DArray(t,0):rt.setTexture2D(t,0),tt.unbindTexture()},this.resetState=function(){S=0,M=0,T=null,tt.reset(),Pt.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return He}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(t){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!t}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Te?be:ye}set outputEncoding(t){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=t===be?Te:Ae}}class Xu extends qu{}Xu.prototype.isWebGL1Renderer=!0;class Yu extends Yr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(e.object.backgroundIntensity=this.backgroundIntensity),e}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(t){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=t}}class $u extends ci{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new fi(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const Ku=new Xn,Ju=new Xn,Zu=new Er,Qu=new xr,th=new pr;class eh extends Yr{constructor(t=new Ri,e=new $u){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[0];for(let t=1,r=e.count;t<r;t++)Ku.fromBufferAttribute(e,t-1),Ju.fromBufferAttribute(e,t),n[t]=n[t-1],n[t]+=Ku.distanceTo(Ju);t.setAttribute("lineDistance",new wi(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,i=t.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),th.copy(n.boundingSphere),th.applyMatrix4(r),th.radius+=i,!1===t.ray.intersectsSphere(th))return;Zu.copy(r).invert(),Qu.copy(t.ray).applyMatrix4(Zu);const s=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=s*s,c=new Xn,l=new Xn,u=new Xn,h=new Xn,d=this.isLineSegments?2:1,f=n.index,p=n.attributes,m=p.position;if(null!==f){const n=Math.max(0,o.start),r=Math.min(f.count,o.start+o.count);for(let i=n,o=r-1;i<o;i+=d){const n=f.getX(i),r=f.getX(i+1);c.fromBufferAttribute(m,n),l.fromBufferAttribute(m,r);const o=Qu.distanceSqToSegment(c,l,h,u);if(o>a)continue;h.applyMatrix4(this.matrixWorld);const s=t.ray.origin.distanceTo(h);s<t.near||s>t.far||e.push({distance:s,point:u.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}else{const n=Math.max(0,o.start),r=Math.min(m.count,o.start+o.count);for(let i=n,o=r-1;i<o;i+=d){c.fromBufferAttribute(m,i),l.fromBufferAttribute(m,i+1);const n=Qu.distanceSqToSegment(c,l,h,u);if(n>a)continue;h.applyMatrix4(this.matrixWorld);const r=t.ray.origin.distanceTo(h);r<t.near||r>t.far||e.push({distance:r,point:u.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry,e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}}class nh{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,r=this.getPoint(0),i=0;e.push(0);for(let o=1;o<=t;o++)n=this.getPoint(o/t),i+=n.distanceTo(r),e.push(i),r=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let r=0;const i=n.length;let o;o=e||t*n[i-1];let s,a=0,c=i-1;while(a<=c)if(r=Math.floor(a+(c-a)/2),s=n[r]-o,s<0)a=r+1;else{if(!(s>0)){c=r;break}c=r-1}if(r=c,n[r]===o)return r/(i-1);const l=n[r],u=n[r+1],h=u-l,d=(o-l)/h,f=(r+d)/(i-1);return f}getTangent(t,e){const n=1e-4;let r=t-n,i=t+n;r<0&&(r=0),i>1&&(i=1);const o=this.getPoint(r),s=this.getPoint(i),a=e||(o.isVector2?new yn:new Xn);return a.copy(s).sub(o).normalize(),a}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new Xn,r=[],i=[],o=[],s=new Xn,a=new Er;for(let d=0;d<=t;d++){const e=d/t;r[d]=this.getTangentAt(e,new Xn)}i[0]=new Xn,o[0]=new Xn;let c=Number.MAX_VALUE;const l=Math.abs(r[0].x),u=Math.abs(r[0].y),h=Math.abs(r[0].z);l<=c&&(c=l,n.set(1,0,0)),u<=c&&(c=u,n.set(0,1,0)),h<=c&&n.set(0,0,1),s.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],s),o[0].crossVectors(r[0],i[0]);for(let d=1;d<=t;d++){if(i[d]=i[d-1].clone(),o[d]=o[d-1].clone(),s.crossVectors(r[d-1],r[d]),s.length()>Number.EPSILON){s.normalize();const t=Math.acos(Ke(r[d-1].dot(r[d]),-1,1));i[d].applyMatrix4(a.makeRotationAxis(s,t))}o[d].crossVectors(r[d],i[d])}if(!0===e){let e=Math.acos(Ke(i[0].dot(i[t]),-1,1));e/=t,r[0].dot(s.crossVectors(i[0],i[t]))>0&&(e=-e);for(let n=1;n<=t;n++)i[n].applyMatrix4(a.makeRotationAxis(r[n],e*n)),o[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class rh extends nh{constructor(t=0,e=0,n=1,r=1,i=0,o=2*Math.PI,s=!1,a=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=s,this.aRotation=a}getPoint(t,e){const n=e||new yn,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const o=Math.abs(i)<Number.EPSILON;while(i<0)i+=r;while(i>r)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);const s=this.aStartAngle+t*i;let a=this.aX+this.xRadius*Math.cos(s),c=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),n=a-this.aX,r=c-this.aY;a=n*t-r*e+this.aX,c=n*e+r*t+this.aY}return n.set(a,c)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class ih extends rh{constructor(t,e,n,r,i,o){super(t,e,n,n,r,i,o),this.isArcCurve=!0,this.type="ArcCurve"}}function oh(){let t=0,e=0,n=0,r=0;function i(i,o,s,a){t=i,e=s,n=-3*i+3*o-2*s-a,r=2*i-2*o+s+a}return{initCatmullRom:function(t,e,n,r,o){i(e,n,o*(n-t),o*(r-e))},initNonuniformCatmullRom:function(t,e,n,r,o,s,a){let c=(e-t)/o-(n-t)/(o+s)+(n-e)/s,l=(n-e)/s-(r-e)/(s+a)+(r-n)/a;c*=s,l*=s,i(e,n,c,l)},calc:function(i){const o=i*i,s=o*i;return t+e*i+n*o+r*s}}}const sh=new Xn,ah=new oh,ch=new oh,lh=new oh;class uh extends nh{constructor(t=[],e=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=r}getPoint(t,e=new Xn){const n=e,r=this.points,i=r.length,o=(i-(this.closed?0:1))*t;let s,a,c=Math.floor(o),l=o-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/i)+1)*i:0===l&&c===i-1&&(c=i-2,l=1),this.closed||c>0?s=r[(c-1)%i]:(sh.subVectors(r[0],r[1]).add(r[0]),s=sh);const u=r[c%i],h=r[(c+1)%i];if(this.closed||c+2<i?a=r[(c+2)%i]:(sh.subVectors(r[i-1],r[i-2]).add(r[i-1]),a=sh),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(s.distanceToSquared(u),t),n=Math.pow(u.distanceToSquared(h),t),r=Math.pow(h.distanceToSquared(a),t);n<1e-4&&(n=1),e<1e-4&&(e=n),r<1e-4&&(r=n),ah.initNonuniformCatmullRom(s.x,u.x,h.x,a.x,e,n,r),ch.initNonuniformCatmullRom(s.y,u.y,h.y,a.y,e,n,r),lh.initNonuniformCatmullRom(s.z,u.z,h.z,a.z,e,n,r)}else"catmullrom"===this.curveType&&(ah.initCatmullRom(s.x,u.x,h.x,a.x,this.tension),ch.initCatmullRom(s.y,u.y,h.y,a.y,this.tension),lh.initCatmullRom(s.z,u.z,h.z,a.z,this.tension));return n.set(ah.calc(l),ch.calc(l),lh.calc(l)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new Xn).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function hh(t,e,n,r,i){const o=.5*(r-e),s=.5*(i-n),a=t*t,c=t*a;return(2*n-2*r+o+s)*c+(-3*n+3*r-2*o-s)*a+o*t+n}function dh(t,e){const n=1-t;return n*n*e}function fh(t,e){return 2*(1-t)*t*e}function ph(t,e){return t*t*e}function mh(t,e,n,r){return dh(t,e)+fh(t,n)+ph(t,r)}function gh(t,e){const n=1-t;return n*n*n*e}function vh(t,e){const n=1-t;return 3*n*n*t*e}function _h(t,e){return 3*(1-t)*t*t*e}function yh(t,e){return t*t*t*e}function bh(t,e,n,r,i){return gh(t,e)+vh(t,n)+_h(t,r)+yh(t,i)}class wh extends nh{constructor(t=new yn,e=new yn,n=new yn,r=new yn){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new yn){const n=e,r=this.v0,i=this.v1,o=this.v2,s=this.v3;return n.set(bh(t,r.x,i.x,o.x,s.x),bh(t,r.y,i.y,o.y,s.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class xh extends nh{constructor(t=new Xn,e=new Xn,n=new Xn,r=new Xn){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new Xn){const n=e,r=this.v0,i=this.v1,o=this.v2,s=this.v3;return n.set(bh(t,r.x,i.x,o.x,s.x),bh(t,r.y,i.y,o.y,s.y),bh(t,r.z,i.z,o.z,s.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class Eh extends nh{constructor(t=new yn,e=new yn){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new yn){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new yn){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Sh extends nh{constructor(t=new Xn,e=new Xn){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new Xn){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new Xn){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Mh extends nh{constructor(t=new yn,e=new yn,n=new yn){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new yn){const n=e,r=this.v0,i=this.v1,o=this.v2;return n.set(mh(t,r.x,i.x,o.x),mh(t,r.y,i.y,o.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Th extends nh{constructor(t=new Xn,e=new Xn,n=new Xn){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new Xn){const n=e,r=this.v0,i=this.v1,o=this.v2;return n.set(mh(t,r.x,i.x,o.x),mh(t,r.y,i.y,o.y),mh(t,r.z,i.z,o.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Ah extends nh{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new yn){const n=e,r=this.points,i=(r.length-1)*t,o=Math.floor(i),s=i-o,a=r[0===o?o:o-1],c=r[o],l=r[o>r.length-2?r.length-1:o+1],u=r[o>r.length-3?r.length-1:o+2];return n.set(hh(s,a.x,c.x,l.x,u.x),hh(s,a.y,c.y,l.y,u.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new yn).fromArray(n))}return this}}var Ch=Object.freeze({__proto__:null,ArcCurve:ih,CatmullRomCurve3:uh,CubicBezierCurve:wh,CubicBezierCurve3:xh,EllipseCurve:rh,LineCurve:Eh,LineCurve3:Sh,QuadraticBezierCurve:Mh,QuadraticBezierCurve3:Th,SplineCurve:Ah});class Rh extends Ri{constructor(t=1,e=1,n=1,r=32,i=1,o=!1,s=0,a=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:s,thetaLength:a};const c=this;r=Math.floor(r),i=Math.floor(i);const l=[],u=[],h=[],d=[];let f=0;const p=[],m=n/2;let g=0;function v(){const o=new Xn,v=new Xn;let _=0;const y=(e-t)/n;for(let c=0;c<=i;c++){const l=[],g=c/i,_=g*(e-t)+t;for(let t=0;t<=r;t++){const e=t/r,i=e*a+s,c=Math.sin(i),p=Math.cos(i);v.x=_*c,v.y=-g*n+m,v.z=_*p,u.push(v.x,v.y,v.z),o.set(c,y,p).normalize(),h.push(o.x,o.y,o.z),d.push(e,1-g),l.push(f++)}p.push(l)}for(let t=0;t<r;t++)for(let e=0;e<i;e++){const n=p[e][t],r=p[e+1][t],i=p[e+1][t+1],o=p[e][t+1];l.push(n,r,o),l.push(r,i,o),_+=6}c.addGroup(g,_,0),g+=_}function _(n){const i=f,o=new yn,p=new Xn;let v=0;const _=!0===n?t:e,y=!0===n?1:-1;for(let t=1;t<=r;t++)u.push(0,m*y,0),h.push(0,y,0),d.push(.5,.5),f++;const b=f;for(let t=0;t<=r;t++){const e=t/r,n=e*a+s,i=Math.cos(n),c=Math.sin(n);p.x=_*c,p.y=m*y,p.z=_*i,u.push(p.x,p.y,p.z),h.push(0,y,0),o.x=.5*i+.5,o.y=.5*c*y+.5,d.push(o.x,o.y),f++}for(let t=0;t<r;t++){const e=i+t,r=b+t;!0===n?l.push(r,r+1,e):l.push(r+1,r,e),v+=3}c.addGroup(g,v,!0===n?1:2),g+=v}v(),!1===o&&(t>0&&_(!0),e>0&&_(!1)),this.setIndex(l),this.setAttribute("position",new wi(u,3)),this.setAttribute("normal",new wi(h,3)),this.setAttribute("uv",new wi(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Rh(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Ph extends Rh{constructor(t=1,e=1,n=32,r=1,i=!1,o=0,s=2*Math.PI){super(0,t,e,n,r,i,o,s),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:s}}static fromJSON(t){return new Ph(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Oh extends Ri{constructor(t=1,e=32,n=16,r=0,i=2*Math.PI,o=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:s},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const a=Math.min(o+s,Math.PI);let c=0;const l=[],u=new Xn,h=new Xn,d=[],f=[],p=[],m=[];for(let g=0;g<=n;g++){const d=[],v=g/n;let _=0;0===g&&0===o?_=.5/e:g===n&&a===Math.PI&&(_=-.5/e);for(let n=0;n<=e;n++){const a=n/e;u.x=-t*Math.cos(r+a*i)*Math.sin(o+v*s),u.y=t*Math.cos(o+v*s),u.z=t*Math.sin(r+a*i)*Math.sin(o+v*s),f.push(u.x,u.y,u.z),h.copy(u).normalize(),p.push(h.x,h.y,h.z),m.push(a+_,1-v),d.push(c++)}l.push(d)}for(let g=0;g<n;g++)for(let t=0;t<e;t++){const e=l[g][t+1],r=l[g][t],i=l[g+1][t],s=l[g+1][t+1];(0!==g||o>0)&&d.push(e,r,s),(g!==n-1||a<Math.PI)&&d.push(r,i,s)}this.setIndex(d),this.setAttribute("position",new wi(f,3)),this.setAttribute("normal",new wi(p,3)),this.setAttribute("uv",new wi(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Oh(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class Lh extends Ri{constructor(t=new Th(new Xn(-1,-1,0),new Xn(-1,1,0),new Xn(1,1,0)),e=64,n=1,r=8,i=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:i};const o=t.computeFrenetFrames(e,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const s=new Xn,a=new Xn,c=new yn;let l=new Xn;const u=[],h=[],d=[],f=[];function p(){for(let t=0;t<e;t++)m(t);m(!1===i?e:0),v(),g()}function m(i){l=t.getPointAt(i/e,l);const c=o.normals[i],d=o.binormals[i];for(let t=0;t<=r;t++){const e=t/r*Math.PI*2,i=Math.sin(e),o=-Math.cos(e);a.x=o*c.x+i*d.x,a.y=o*c.y+i*d.y,a.z=o*c.z+i*d.z,a.normalize(),h.push(a.x,a.y,a.z),s.x=l.x+n*a.x,s.y=l.y+n*a.y,s.z=l.z+n*a.z,u.push(s.x,s.y,s.z)}}function g(){for(let t=1;t<=e;t++)for(let e=1;e<=r;e++){const n=(r+1)*(t-1)+(e-1),i=(r+1)*t+(e-1),o=(r+1)*t+e,s=(r+1)*(t-1)+e;f.push(n,i,s),f.push(i,o,s)}}function v(){for(let t=0;t<=e;t++)for(let n=0;n<=r;n++)c.x=t/e,c.y=n/r,d.push(c.x,c.y)}p(),this.setIndex(f),this.setAttribute("position",new wi(u,3)),this.setAttribute("normal",new wi(h,3)),this.setAttribute("uv",new wi(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new Lh((new Ch[t.path.type]).fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class kh extends ci{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new fi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new fi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ee,this.normalScale=new yn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=W,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}function Ih(t,e,n){return Nh(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)}function Dh(t,e,n){return!t||!n&&t.constructor===e?t:"number"===typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)}function Nh(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}class Uh{constructor(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{let o;n:{r:if(!(t<r)){for(let o=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(i=r,r=e[++n],t<r)break e}o=e.length;break n}if(t>=i)break t;{const s=e[1];t<s&&(n=2,i=s);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===o)break;if(r=i,i=e[--n-1],t>=i)break e}o=n,n=0}}while(n<o){const r=n+o>>>1;t<e[r]?o=r:n=r+1}if(r=e[n],i=e[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r;for(let o=0;o!==r;++o)e[o]=n[i+o];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Fh extends Uh{constructor(t,e,n,r){super(t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ge,endingEnd:ge}}intervalChanged_(t,e,n){const r=this.parameterPositions;let i=t-2,o=t+1,s=r[i],a=r[o];if(void 0===s)switch(this.getSettings_().endingStart){case ve:i=t,s=2*e-n;break;case _e:i=r.length-2,s=e+r[i]-r[i+1];break;default:i=t,s=n}if(void 0===a)switch(this.getSettings_().endingEnd){case ve:o=t,a=2*n-e;break;case _e:o=1,a=n+r[1]-r[0];break;default:o=t-1,a=e}const c=.5*(n-e),l=this.valueSize;this._weightPrev=c/(e-s),this._weightNext=c/(a-n),this._offsetPrev=i*l,this._offsetNext=o*l}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=t*s,c=a-s,l=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-e)/(r-e),p=f*f,m=p*f,g=-h*m+2*h*p-h*f,v=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*f+1,_=(-1-d)*m+(1.5+d)*p+.5*f,y=d*m-d*p;for(let b=0;b!==s;++b)i[b]=g*o[l+b]+v*o[c+b]+_*o[a+b]+y*o[u+b];return i}}class Bh extends Uh{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=t*s,c=a-s,l=(n-e)/(r-e),u=1-l;for(let h=0;h!==s;++h)i[h]=o[c+h]*u+o[a+h]*l;return i}}class zh extends Uh{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class jh{constructor(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Dh(e,this.TimeBufferType),this.values=Dh(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:Dh(t.times,Array),values:Dh(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new zh(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Bh(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new Fh(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case fe:e=this.InterpolantFactoryMethodDiscrete;break;case pe:e=this.InterpolantFactoryMethodLinear;break;case me:e=this.InterpolantFactoryMethodSmooth;break}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return fe;case this.InterpolantFactoryMethodLinear:return pe;case this.InterpolantFactoryMethodSmooth:return me}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this}trim(t,e){const n=this.times,r=n.length;let i=0,o=r-1;while(i!==r&&n[i]<t)++i;while(-1!==o&&n[o]>e)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const t=this.getValueSize();this.times=Ih(n,i,o),this.values=Ih(this.values,i*t,o*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let s=0;s!==i;s++){const e=n[s];if("number"===typeof e&&isNaN(e)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,e),t=!1;break}if(null!==o&&o>e){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,e,o),t=!1;break}o=e}if(void 0!==r&&Nh(r))for(let s=0,a=r.length;s!==a;++s){const e=r[s];if(isNaN(e)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,e),t=!1;break}}return t}optimize(){const t=Ih(this.times),e=Ih(this.values),n=this.getValueSize(),r=this.getInterpolation()===me,i=t.length-1;let o=1;for(let s=1;s<i;++s){let i=!1;const a=t[s],c=t[s+1];if(a!==c&&(1!==s||a!==t[0]))if(r)i=!0;else{const t=s*n,r=t-n,o=t+n;for(let s=0;s!==n;++s){const n=e[t+s];if(n!==e[r+s]||n!==e[o+s]){i=!0;break}}}if(i){if(s!==o){t[o]=t[s];const r=s*n,i=o*n;for(let t=0;t!==n;++t)e[i+t]=e[r+t]}++o}}if(i>0){t[o]=t[i];for(let t=i*n,r=o*n,s=0;s!==n;++s)e[r+s]=e[t+s];++o}return o!==t.length?(this.times=Ih(t,0,o),this.values=Ih(e,0,o*n)):(this.times=t,this.values=e),this}clone(){const t=Ih(this.times,0),e=Ih(this.values,0),n=this.constructor,r=new n(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}}jh.prototype.TimeBufferType=Float32Array,jh.prototype.ValueBufferType=Float32Array,jh.prototype.DefaultInterpolation=pe;class Hh extends jh{}Hh.prototype.ValueTypeName="bool",Hh.prototype.ValueBufferType=Array,Hh.prototype.DefaultInterpolation=fe,Hh.prototype.InterpolantFactoryMethodLinear=void 0,Hh.prototype.InterpolantFactoryMethodSmooth=void 0;class Vh extends jh{}Vh.prototype.ValueTypeName="color";class Gh extends jh{}Gh.prototype.ValueTypeName="number";class Wh extends Uh{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=(n-e)/(r-e);let c=t*s;for(let l=c+s;c!==l;c+=4)qn.slerpFlat(i,0,o,c-s,o,c,a);return i}}class qh extends jh{InterpolantFactoryMethodLinear(t){return new Wh(this.times,this.values,this.getValueSize(),t)}}qh.prototype.ValueTypeName="quaternion",qh.prototype.DefaultInterpolation=pe,qh.prototype.InterpolantFactoryMethodSmooth=void 0;class Xh extends jh{}Xh.prototype.ValueTypeName="string",Xh.prototype.ValueBufferType=Array,Xh.prototype.DefaultInterpolation=fe,Xh.prototype.InterpolantFactoryMethodLinear=void 0,Xh.prototype.InterpolantFactoryMethodSmooth=void 0;class Yh extends jh{}Yh.prototype.ValueTypeName="vector";const $h={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class Kh{constructor(t,e,n){const r=this;let i,o=!1,s=0,a=0;const c=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,!1===o&&void 0!==r.onStart&&r.onStart(t,s,a),o=!0},this.itemEnd=function(t){s++,void 0!==r.onProgress&&r.onProgress(t,s,a),s===a&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return i?i(t):t},this.setURLModifier=function(t){return i=t,this},this.addHandler=function(t,e){return c.push(t,e),this},this.removeHandler=function(t){const e=c.indexOf(t);return-1!==e&&c.splice(e,2),this},this.getHandler=function(t){for(let e=0,n=c.length;e<n;e+=2){const n=c[e],r=c[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return r}return null}}}const Jh=new Kh;class Zh{constructor(t){this.manager=void 0!==t?t:Jh,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise((function(r,i){n.load(t,r,e,i)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}class Qh extends Zh{constructor(t){super(t)}load(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,o=$h.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;const s=En("img");function a(){l(),$h.add(t,this),e&&e(this),i.manager.itemEnd(t)}function c(e){l(),r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}function l(){s.removeEventListener("load",a,!1),s.removeEventListener("error",c,!1)}return s.addEventListener("load",a,!1),s.addEventListener("error",c,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),i.manager.itemStart(t),s.src=t,s}}class td extends Zh{constructor(t){super(t)}load(t,e,n,r){const i=new jn,o=new Qh(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,(function(t){i.image=t,i.needsUpdate=!0,void 0!==e&&e(i)}),n,r),i}}class ed extends Yr{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new fi(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}const nd=new Er,rd=new Xn,id=new Xn;class od{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new yn(512,512),this.map=null,this.mapPass=null,this.matrix=new Er,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new yo,this._frameExtents=new yn(1,1),this._viewportCount=1,this._viewports=[new Hn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;rd.setFromMatrixPosition(t.matrixWorld),e.position.copy(rd),id.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(id),e.updateMatrixWorld(),nd.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(nd),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(nd)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class sd extends od{constructor(){super(new cc(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class ad extends ed{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Yr.DEFAULT_UP),this.updateMatrix(),this.target=new Yr,this.shadow=new sd}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class cd extends ed{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class ld{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=ud(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=ud();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function ud(){return("undefined"===typeof performance?Date:performance).now()}const hd="\\[\\]\\.:\\/",dd=new RegExp("["+hd+"]","g"),fd="[^"+hd+"]",pd="[^"+hd.replace("\\.","")+"]",md=/((?:WC+[\/:])*)/.source.replace("WC",fd),gd=/(WCOD+)?/.source.replace("WCOD",pd),vd=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",fd),_d=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",fd),yd=new RegExp("^"+md+gd+vd+_d+"$"),bd=["material","materials","bones","map"];class wd{constructor(t,e,n){const r=n||xd.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}class xd{constructor(t,e,n){this.path=e,this.parsedPath=n||xd.parseTrackName(e),this.node=xd.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new xd.Composite(t,e,n):new xd(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(dd,"")}static parseTrackName(t){const e=yd.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const t=n.nodeName.substring(r+1);-1!==bd.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let r=0;r<t.length;r++){const i=t[r];if(i.name===e||i.uuid===e)return i;const o=n(i.children);if(o)return o}return null},r=n(t.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)t[e++]=n[r]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,r=e.propertyName;let i=e.propertyIndex;if(t||(t=xd.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===r){r=e;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==r){if(void 0===t[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[r]}}const o=t[r];if(void 0===o){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",t)}let s=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[i]&&(i=t.morphTargetDictionary[i])}a=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(a=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}xd.Composite=wd,xd.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},xd.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},xd.prototype.GetterByBindingType=[xd.prototype._getValue_direct,xd.prototype._getValue_array,xd.prototype._getValue_arrayElement,xd.prototype._getValue_toArray],xd.prototype.SetterByBindingTypeAndVersioning=[[xd.prototype._setValue_direct,xd.prototype._setValue_direct_setNeedsUpdate,xd.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[xd.prototype._setValue_array,xd.prototype._setValue_array_setNeedsUpdate,xd.prototype._setValue_array_setMatrixWorldNeedsUpdate],[xd.prototype._setValue_arrayElement,xd.prototype._setValue_arrayElement_setNeedsUpdate,xd.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[xd.prototype._setValue_fromArray,xd.prototype._setValue_fromArray_setNeedsUpdate,xd.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];new Float32Array(1);class Ed{constructor(t,e,n=0,r=1/0){this.ray=new xr(t,e),this.near=n,this.far=r,this.camera=null,this.layers=new Ir,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}intersectObject(t,e=!0,n=[]){return Md(t,this,n,e),n.sort(Sd),n}intersectObjects(t,e=!0,n=[]){for(let r=0,i=t.length;r<i;r++)Md(t[r],this,n,e);return n.sort(Sd),n}}function Sd(t,e){return t.distance-e.distance}function Md(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===r){const r=t.children;for(let t=0,i=r.length;t<i;t++)Md(r[t],e,n,!0)}}class Td{constructor(t=1,e=0,n=0){return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){const t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(Ke(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:r}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=r);const Ad=new go,Cd=new Ed,Rd=new yn,Pd=new Xn,Od=new Xn,Ld=new Xn,kd=new Er;class Id extends Ge{constructor(t,e,n){super(),n.style.touchAction="none";let r=null,i=null;const o=[],s=this;function a(){n.addEventListener("pointermove",d),n.addEventListener("pointerdown",f),n.addEventListener("pointerup",p),n.addEventListener("pointerleave",p)}function c(){n.removeEventListener("pointermove",d),n.removeEventListener("pointerdown",f),n.removeEventListener("pointerup",p),n.removeEventListener("pointerleave",p),n.style.cursor=""}function l(){c()}function u(){return t}function h(){return Cd}function d(a){if(!1!==s.enabled){if(m(a),Cd.setFromCamera(Rd,e),r)return Cd.ray.intersectPlane(Ad,Od)&&r.position.copy(Od.sub(Pd).applyMatrix4(kd)),void s.dispatchEvent({type:"drag",object:r});if("mouse"===a.pointerType||"pen"===a.pointerType)if(o.length=0,Cd.setFromCamera(Rd,e),Cd.intersectObjects(t,!0,o),o.length>0){const t=o[0].object;Ad.setFromNormalAndCoplanarPoint(e.getWorldDirection(Ad.normal),Ld.setFromMatrixPosition(t.matrixWorld)),i!==t&&null!==i&&(s.dispatchEvent({type:"hoveroff",object:i}),n.style.cursor="auto",i=null),i!==t&&(s.dispatchEvent({type:"hoveron",object:t}),n.style.cursor="pointer",i=t)}else null!==i&&(s.dispatchEvent({type:"hoveroff",object:i}),n.style.cursor="auto",i=null)}}function f(i){!1!==s.enabled&&(m(i),o.length=0,Cd.setFromCamera(Rd,e),Cd.intersectObjects(t,!0,o),o.length>0&&(r=!0===s.transformGroup?t[0]:o[0].object,Ad.setFromNormalAndCoplanarPoint(e.getWorldDirection(Ad.normal),Ld.setFromMatrixPosition(r.matrixWorld)),Cd.ray.intersectPlane(Ad,Od)&&(kd.copy(r.parent.matrixWorld).invert(),Pd.copy(Od).sub(Ld.setFromMatrixPosition(r.matrixWorld))),n.style.cursor="move",s.dispatchEvent({type:"dragstart",object:r})))}function p(){!1!==s.enabled&&(r&&(s.dispatchEvent({type:"dragend",object:r}),r=null),n.style.cursor=i?"pointer":"auto")}function m(t){const e=n.getBoundingClientRect();Rd.x=(t.clientX-e.left)/e.width*2-1,Rd.y=-(t.clientY-e.top)/e.height*2+1}a(),this.enabled=!0,this.transformGroup=!1,this.activate=a,this.deactivate=c,this.dispose=l,this.getObjects=u,this.getRaycaster=h}}var Dd={value:()=>{}};function Nd(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Ud(r)}function Ud(t){this._=t}function Fd(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function Bd(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function zd(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Dd,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Ud.prototype=Nd.prototype={constructor:Ud,on:function(t,e){var n,r=this._,i=Fd(t+"",r),o=-1,s=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!==typeof e)throw new Error("invalid callback: "+e);while(++o<s)if(n=(t=i[o]).type)r[n]=zd(r[n],t.name,e);else if(null==e)for(n in r)r[n]=zd(r[n],t.name,null);return this}while(++o<s)if((n=(t=i[o]).type)&&(n=Bd(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ud(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],o=0,n=r.length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var jd,Hd,Vd=Nd,Gd=0,Wd=0,qd=0,Xd=1e3,Yd=0,$d=0,Kd=0,Jd="object"===typeof performance&&performance.now?performance:Date,Zd="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Qd(){return $d||(Zd(tf),$d=Jd.now()+Kd)}function tf(){$d=0}function ef(){this._call=this._time=this._next=null}function nf(t,e,n){var r=new ef;return r.restart(t,e,n),r}function rf(){Qd(),++Gd;var t,e=jd;while(e)(t=$d-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Gd}function of(){$d=(Yd=Jd.now())+Kd,Gd=Wd=0;try{rf()}finally{Gd=0,af(),$d=0}}function sf(){var t=Jd.now(),e=t-Yd;e>Xd&&(Kd-=e,Yd=t)}function af(){var t,e,n=jd,r=1/0;while(n)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:jd=e);Hd=t,cf(r)}function cf(t){if(!Gd){Wd&&(Wd=clearTimeout(Wd));var e=t-$d;e>24?(t<1/0&&(Wd=setTimeout(of,t-Jd.now()-Kd)),qd&&(qd=clearInterval(qd))):(qd||(Yd=Jd.now(),qd=setInterval(sf,Xd)),Gd=1,Zd(of))}}ef.prototype=nf.prototype={constructor:ef,restart:function(t,e,n){if("function"!==typeof t)throw new TypeError("callback is not a function");n=(null==n?Qd():+n)+(null==e?0:+e),this._next||Hd===this||(Hd?Hd._next=this:jd=this,Hd=this),this._call=t,this._time=n,cf()},stop:function(){this._call&&(this._call=null,this._time=1/0,cf())}};const lf=1664525,uf=1013904223,hf=4294967296;function df(){let t=1;return()=>(t=(lf*t+uf)%hf)/hf}var ff=3;function pf(t){return t.x}function mf(t){return t.y}function gf(t){return t.z}var vf=10,_f=Math.PI*(3-Math.sqrt(5)),yf=20*Math.PI/(9+Math.sqrt(221));function bf(t,e){e=e||2;var n,r=Math.min(ff,Math.max(1,Math.round(e))),i=1,o=.001,s=1-Math.pow(o,1/300),a=0,c=.6,l=new Map,u=nf(f),h=Vd("tick","end"),d=df();function f(){p(),h.call("tick",n),i<o&&(u.stop(),h.call("end",n))}function p(e){var o,u,h=t.length;void 0===e&&(e=1);for(var d=0;d<e;++d)for(i+=(a-i)*s,l.forEach((function(t){t(i)})),o=0;o<h;++o)u=t[o],null==u.fx?u.x+=u.vx*=c:(u.x=u.fx,u.vx=0),r>1&&(null==u.fy?u.y+=u.vy*=c:(u.y=u.fy,u.vy=0)),r>2&&(null==u.fz?u.z+=u.vz*=c:(u.z=u.fz,u.vz=0));return n}function m(){for(var e,n=0,i=t.length;n<i;++n){if(e=t[n],e.index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),null!=e.fz&&(e.z=e.fz),isNaN(e.x)||r>1&&isNaN(e.y)||r>2&&isNaN(e.z)){var o=vf*(r>2?Math.cbrt(.5+n):r>1?Math.sqrt(.5+n):n),s=n*_f,a=n*yf;1===r?e.x=o:2===r?(e.x=o*Math.cos(s),e.y=o*Math.sin(s)):(e.x=o*Math.sin(s)*Math.cos(a),e.y=o*Math.cos(s),e.z=o*Math.sin(s)*Math.sin(a))}(isNaN(e.vx)||r>1&&isNaN(e.vy)||r>2&&isNaN(e.vz))&&(e.vx=0,r>1&&(e.vy=0),r>2&&(e.vz=0))}}function g(e){return e.initialize&&e.initialize(t,d,r),e}return null==t&&(t=[]),m(),n={tick:p,restart:function(){return u.restart(f),n},stop:function(){return u.stop(),n},numDimensions:function(t){return arguments.length?(r=Math.min(ff,Math.max(1,Math.round(t))),l.forEach(g),n):r},nodes:function(e){return arguments.length?(t=e,m(),l.forEach(g),n):t},alpha:function(t){return arguments.length?(i=+t,n):i},alphaMin:function(t){return arguments.length?(o=+t,n):o},alphaDecay:function(t){return arguments.length?(s=+t,n):+s},alphaTarget:function(t){return arguments.length?(a=+t,n):a},velocityDecay:function(t){return arguments.length?(c=1-t,n):1-c},randomSource:function(t){return arguments.length?(d=t,l.forEach(g),n):d},force:function(t,e){return arguments.length>1?(null==e?l.delete(t):l.set(t,g(e)),n):l.get(t)},find:function(){var e,n,i,o,s,a,c=Array.prototype.slice.call(arguments),l=c.shift()||0,u=(r>1?c.shift():null)||0,h=(r>2?c.shift():null)||0,d=c.shift()||1/0,f=0,p=t.length;for(d*=d,f=0;f<p;++f)s=t[f],e=l-s.x,n=u-(s.y||0),i=h-(s.z||0),o=e*e+n*n+i*i,o<d&&(a=s,d=o);return a},on:function(t,e){return arguments.length>1?(h.on(t,e),n):h.on(t)}}}function wf(t){return function(){return t}}function xf(t){return 1e-6*(t()-.5)}function Ef(t){return t.index}function Sf(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function Mf(t){var e,n,r,i,o,s,a,c=Ef,l=d,u=wf(30),h=1;function d(t){return 1/Math.min(o[t.source.index],o[t.target.index])}function f(r){for(var o=0,c=t.length;o<h;++o)for(var l,u,d,f,p,m=0,g=0,v=0,_=0;m<c;++m)l=t[m],u=l.source,d=l.target,g=d.x+d.vx-u.x-u.vx||xf(a),i>1&&(v=d.y+d.vy-u.y-u.vy||xf(a)),i>2&&(_=d.z+d.vz-u.z-u.vz||xf(a)),f=Math.sqrt(g*g+v*v+_*_),f=(f-n[m])/f*r*e[m],g*=f,v*=f,_*=f,d.vx-=g*(p=s[m]),i>1&&(d.vy-=v*p),i>2&&(d.vz-=_*p),u.vx+=g*(p=1-p),i>1&&(u.vy+=v*p),i>2&&(u.vz+=_*p)}function p(){if(r){var i,a,l=r.length,u=t.length,h=new Map(r.map(((t,e)=>[c(t,e,r),t])));for(i=0,o=new Array(l);i<u;++i)a=t[i],a.index=i,"object"!==typeof a.source&&(a.source=Sf(h,a.source)),"object"!==typeof a.target&&(a.target=Sf(h,a.target)),o[a.source.index]=(o[a.source.index]||0)+1,o[a.target.index]=(o[a.target.index]||0)+1;for(i=0,s=new Array(u);i<u;++i)a=t[i],s[i]=o[a.source.index]/(o[a.source.index]+o[a.target.index]);e=new Array(u),m(),n=new Array(u),g()}}function m(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+l(t[n],n,t)}function g(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+u(t[e],e,t)}return null==t&&(t=[]),f.initialize=function(t,...e){r=t,a=e.find((t=>"function"===typeof t))||Math.random,i=e.find((t=>[1,2,3].includes(t)))||2,p()},f.links=function(e){return arguments.length?(t=e,p(),f):t},f.id=function(t){return arguments.length?(c=t,f):c},f.iterations=function(t){return arguments.length?(h=+t,f):h},f.strength=function(t){return arguments.length?(l="function"===typeof t?t:wf(+t),m(),f):l},f.distance=function(t){return arguments.length?(u="function"===typeof t?t:wf(+t),g(),f):u},f}function Tf(t){const e=+this._x.call(null,t);return Af(this.cover(e),e,t)}function Af(t,e,n){if(isNaN(e))return t;var r,i,o,s,a,c,l=t._root,u={data:n},h=t._x0,d=t._x1;if(!l)return t._root=u,t;while(l.length)if((s=e>=(i=(h+d)/2))?h=i:d=i,r=l,!(l=l[a=+s]))return r[a]=u,t;if(o=+t._x.call(null,l.data),e===o)return u.next=l,r?r[a]=u:t._root=u,t;do{r=r?r[a]=new Array(2):t._root=new Array(2),(s=e>=(i=(h+d)/2))?h=i:d=i}while((a=+s)===(c=+(o>=i)));return r[c]=l,r[a]=u,t}function Cf(t){Array.isArray(t)||(t=Array.from(t));const e=t.length,n=new Float64Array(e);let r=1/0,i=-1/0;for(let o,s=0;s<e;++s)isNaN(o=+this._x.call(null,t[s]))||(n[s]=o,o<r&&(r=o),o>i&&(i=o));if(r>i)return this;this.cover(r).cover(i);for(let o=0;o<e;++o)Af(this,n[o],t[o]);return this}function Rf(t){if(isNaN(t=+t))return this;var e=this._x0,n=this._x1;if(isNaN(e))n=(e=Math.floor(t))+1;else{var r,i,o=n-e||1,s=this._root;while(e>t||t>=n)switch(i=+(t<e),r=new Array(2),r[i]=s,s=r,o*=2,i){case 0:n=e+o;break;case 1:e=n-o;break}this._root&&this._root.length&&(this._root=s)}return this._x0=e,this._x1=n,this}function Pf(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t}function Of(t){return arguments.length?this.cover(+t[0][0]).cover(+t[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function Lf(t,e,n){this.node=t,this.x0=e,this.x1=n}function kf(t,e){var n,r,i,o,s,a=this._x0,c=this._x1,l=[],u=this._root;u&&l.push(new Lf(u,a,c)),null==e?e=1/0:(a=t-e,c=t+e);while(o=l.pop())if(!(!(u=o.node)||(r=o.x0)>c||(i=o.x1)<a))if(u.length){var h=(r+i)/2;l.push(new Lf(u[1],h,i),new Lf(u[0],r,h)),(s=+(t>=h))&&(o=l[l.length-1],l[l.length-1]=l[l.length-1-s],l[l.length-1-s]=o)}else{var d=Math.abs(t-+this._x.call(null,u.data));d<e&&(e=d,a=t-d,c=t+d,n=u.data)}return n}function If(t){if(isNaN(o=+this._x.call(null,t)))return this;var e,n,r,i,o,s,a,c,l,u=this._root,h=this._x0,d=this._x1;if(!u)return this;if(u.length)while(1){if((a=o>=(s=(h+d)/2))?h=s:d=s,e=u,!(u=u[c=+a]))return this;if(!u.length)break;e[c+1&1]&&(n=e,l=c)}while(u.data!==t)if(r=u,!(u=u.next))return this;return(i=u.next)&&delete u.next,r?(i?r.next=i:delete r.next,this):e?(i?e[c]=i:delete e[c],(u=e[0]||e[1])&&u===(e[1]||e[0])&&!u.length&&(n?n[l]=u:this._root=u),this):(this._root=i,this)}function Df(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function Nf(){return this._root}function Uf(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t}function Ff(t){var e,n,r,i,o=[],s=this._root;s&&o.push(new Lf(s,this._x0,this._x1));while(e=o.pop())if(!t(s=e.node,r=e.x0,i=e.x1)&&s.length){var a=(r+i)/2;(n=s[1])&&o.push(new Lf(n,a,i)),(n=s[0])&&o.push(new Lf(n,r,a))}return this}function Bf(t){var e,n=[],r=[];this._root&&n.push(new Lf(this._root,this._x0,this._x1));while(e=n.pop()){var i=e.node;if(i.length){var o,s=e.x0,a=e.x1,c=(s+a)/2;(o=i[0])&&n.push(new Lf(o,s,c)),(o=i[1])&&n.push(new Lf(o,c,a))}r.push(e)}while(e=r.pop())t(e.node,e.x0,e.x1);return this}function zf(t){return t[0]}function jf(t){return arguments.length?(this._x=t,this):this._x}function Hf(t,e){var n=new Vf(null==e?zf:e,NaN,NaN);return null==t?n:n.addAll(t)}function Vf(t,e,n){this._x=t,this._x0=e,this._x1=n,this._root=void 0}function Gf(t){var e={data:t.data},n=e;while(t=t.next)n=n.next={data:t.data};return e}var Wf=Hf.prototype=Vf.prototype;function qf(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Xf(this.cover(e,n),e,n,t)}function Xf(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,s,a,c,l,u,h,d,f=t._root,p={data:r},m=t._x0,g=t._y0,v=t._x1,_=t._y1;if(!f)return t._root=p,t;while(f.length)if((l=e>=(o=(m+v)/2))?m=o:v=o,(u=n>=(s=(g+_)/2))?g=s:_=s,i=f,!(f=f[h=u<<1|l]))return i[h]=p,t;if(a=+t._x.call(null,f.data),c=+t._y.call(null,f.data),e===a&&n===c)return p.next=f,i?i[h]=p:t._root=p,t;do{i=i?i[h]=new Array(4):t._root=new Array(4),(l=e>=(o=(m+v)/2))?m=o:v=o,(u=n>=(s=(g+_)/2))?g=s:_=s}while((h=u<<1|l)===(d=(c>=s)<<1|a>=o));return i[d]=f,i[h]=p,t}function Yf(t){var e,n,r,i,o=t.length,s=new Array(o),a=new Array(o),c=1/0,l=1/0,u=-1/0,h=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(s[n]=r,a[n]=i,r<c&&(c=r),r>u&&(u=r),i<l&&(l=i),i>h&&(h=i));if(c>u||l>h)return this;for(this.cover(c,l).cover(u,h),n=0;n<o;++n)Xf(this,s[n],a[n],t[n]);return this}function $f(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{var s,a,c=i-n||1,l=this._root;while(n>t||t>=i||r>e||e>=o)switch(a=(e<r)<<1|t<n,s=new Array(4),s[a]=l,l=s,c*=2,a){case 0:i=n+c,o=r+c;break;case 1:n=i-c,o=r+c;break;case 2:i=n+c,r=o-c;break;case 3:n=i-c,r=o-c;break}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function Kf(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t}function Jf(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Zf(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Qf(t,e,n){var r,i,o,s,a,c,l,u=this._x0,h=this._y0,d=this._x1,f=this._y1,p=[],m=this._root;m&&p.push(new Zf(m,u,h,d,f)),null==n?n=1/0:(u=t-n,h=e-n,d=t+n,f=e+n,n*=n);while(c=p.pop())if(!(!(m=c.node)||(i=c.x0)>d||(o=c.y0)>f||(s=c.x1)<u||(a=c.y1)<h))if(m.length){var g=(i+s)/2,v=(o+a)/2;p.push(new Zf(m[3],g,v,s,a),new Zf(m[2],i,v,g,a),new Zf(m[1],g,o,s,v),new Zf(m[0],i,o,g,v)),(l=(e>=v)<<1|t>=g)&&(c=p[p.length-1],p[p.length-1]=p[p.length-1-l],p[p.length-1-l]=c)}else{var _=t-+this._x.call(null,m.data),y=e-+this._y.call(null,m.data),b=_*_+y*y;if(b<n){var w=Math.sqrt(n=b);u=t-w,h=e-w,d=t+w,f=e+w,r=m.data}}return r}function tp(t){if(isNaN(o=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t)))return this;var e,n,r,i,o,s,a,c,l,u,h,d,f=this._root,p=this._x0,m=this._y0,g=this._x1,v=this._y1;if(!f)return this;if(f.length)while(1){if((l=o>=(a=(p+g)/2))?p=a:g=a,(u=s>=(c=(m+v)/2))?m=c:v=c,e=f,!(f=f[h=u<<1|l]))return this;if(!f.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,d=h)}while(f.data!==t)if(r=f,!(f=f.next))return this;return(i=f.next)&&delete f.next,r?(i?r.next=i:delete r.next,this):e?(i?e[h]=i:delete e[h],(f=e[0]||e[1]||e[2]||e[3])&&f===(e[3]||e[2]||e[1]||e[0])&&!f.length&&(n?n[d]=f:this._root=f),this):(this._root=i,this)}function ep(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function np(){return this._root}function rp(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t}function ip(t){var e,n,r,i,o,s,a=[],c=this._root;c&&a.push(new Zf(c,this._x0,this._y0,this._x1,this._y1));while(e=a.pop())if(!t(c=e.node,r=e.x0,i=e.y0,o=e.x1,s=e.y1)&&c.length){var l=(r+o)/2,u=(i+s)/2;(n=c[3])&&a.push(new Zf(n,l,u,o,s)),(n=c[2])&&a.push(new Zf(n,r,u,l,s)),(n=c[1])&&a.push(new Zf(n,l,i,o,u)),(n=c[0])&&a.push(new Zf(n,r,i,l,u))}return this}function op(t){var e,n=[],r=[];this._root&&n.push(new Zf(this._root,this._x0,this._y0,this._x1,this._y1));while(e=n.pop()){var i=e.node;if(i.length){var o,s=e.x0,a=e.y0,c=e.x1,l=e.y1,u=(s+c)/2,h=(a+l)/2;(o=i[0])&&n.push(new Zf(o,s,a,u,h)),(o=i[1])&&n.push(new Zf(o,u,a,c,h)),(o=i[2])&&n.push(new Zf(o,s,h,u,l)),(o=i[3])&&n.push(new Zf(o,u,h,c,l))}r.push(e)}while(e=r.pop())t(e.node,e.x0,e.y0,e.x1,e.y1);return this}function sp(t){return t[0]}function ap(t){return arguments.length?(this._x=t,this):this._x}function cp(t){return t[1]}function lp(t){return arguments.length?(this._y=t,this):this._y}function up(t,e,n){var r=new hp(null==e?sp:e,null==n?cp:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function hp(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function dp(t){var e={data:t.data},n=e;while(t=t.next)n=n.next={data:t.data};return e}Wf.copy=function(){var t,e,n=new Vf(this._x,this._x0,this._x1),r=this._root;if(!r)return n;if(!r.length)return n._root=Gf(r),n;t=[{source:r,target:n._root=new Array(2)}];while(r=t.pop())for(var i=0;i<2;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(2)}):r.target[i]=Gf(e));return n},Wf.add=Tf,Wf.addAll=Cf,Wf.cover=Rf,Wf.data=Pf,Wf.extent=Of,Wf.find=kf,Wf.remove=If,Wf.removeAll=Df,Wf.root=Nf,Wf.size=Uf,Wf.visit=Ff,Wf.visitAfter=Bf,Wf.x=jf;var fp=up.prototype=hp.prototype;function pp(t){const e=+this._x.call(null,t),n=+this._y.call(null,t),r=+this._z.call(null,t);return mp(this.cover(e,n,r),e,n,r,t)}function mp(t,e,n,r,i){if(isNaN(e)||isNaN(n)||isNaN(r))return t;var o,s,a,c,l,u,h,d,f,p,m,g,v=t._root,_={data:i},y=t._x0,b=t._y0,w=t._z0,x=t._x1,E=t._y1,S=t._z1;if(!v)return t._root=_,t;while(v.length)if((d=e>=(s=(y+x)/2))?y=s:x=s,(f=n>=(a=(b+E)/2))?b=a:E=a,(p=r>=(c=(w+S)/2))?w=c:S=c,o=v,!(v=v[m=p<<2|f<<1|d]))return o[m]=_,t;if(l=+t._x.call(null,v.data),u=+t._y.call(null,v.data),h=+t._z.call(null,v.data),e===l&&n===u&&r===h)return _.next=v,o?o[m]=_:t._root=_,t;do{o=o?o[m]=new Array(8):t._root=new Array(8),(d=e>=(s=(y+x)/2))?y=s:x=s,(f=n>=(a=(b+E)/2))?b=a:E=a,(p=r>=(c=(w+S)/2))?w=c:S=c}while((m=p<<2|f<<1|d)===(g=(h>=c)<<2|(u>=a)<<1|l>=s));return o[g]=v,o[m]=_,t}function gp(t){Array.isArray(t)||(t=Array.from(t));const e=t.length,n=new Float64Array(e),r=new Float64Array(e),i=new Float64Array(e);let o=1/0,s=1/0,a=1/0,c=-1/0,l=-1/0,u=-1/0;for(let h,d,f,p,m=0;m<e;++m)isNaN(d=+this._x.call(null,h=t[m]))||isNaN(f=+this._y.call(null,h))||isNaN(p=+this._z.call(null,h))||(n[m]=d,r[m]=f,i[m]=p,d<o&&(o=d),d>c&&(c=d),f<s&&(s=f),f>l&&(l=f),p<a&&(a=p),p>u&&(u=p));if(o>c||s>l||a>u)return this;this.cover(o,s,a).cover(c,l,u);for(let h=0;h<e;++h)mp(this,n[h],r[h],i[h],t[h]);return this}function vp(t,e,n){if(isNaN(t=+t)||isNaN(e=+e)||isNaN(n=+n))return this;var r=this._x0,i=this._y0,o=this._z0,s=this._x1,a=this._y1,c=this._z1;if(isNaN(r))s=(r=Math.floor(t))+1,a=(i=Math.floor(e))+1,c=(o=Math.floor(n))+1;else{var l,u,h=s-r||1,d=this._root;while(r>t||t>=s||i>e||e>=a||o>n||n>=c)switch(u=(n<o)<<2|(e<i)<<1|t<r,l=new Array(8),l[u]=d,d=l,h*=2,u){case 0:s=r+h,a=i+h,c=o+h;break;case 1:r=s-h,a=i+h,c=o+h;break;case 2:s=r+h,i=a-h,c=o+h;break;case 3:r=s-h,i=a-h,c=o+h;break;case 4:s=r+h,a=i+h,o=c-h;break;case 5:r=s-h,a=i+h,o=c-h;break;case 6:s=r+h,i=a-h,o=c-h;break;case 7:r=s-h,i=a-h,o=c-h;break}this._root&&this._root.length&&(this._root=d)}return this._x0=r,this._y0=i,this._z0=o,this._x1=s,this._y1=a,this._z1=c,this}function _p(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t}function yp(t){return arguments.length?this.cover(+t[0][0],+t[0][1],+t[0][2]).cover(+t[1][0],+t[1][1],+t[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function bp(t,e,n,r,i,o,s){this.node=t,this.x0=e,this.y0=n,this.z0=r,this.x1=i,this.y1=o,this.z1=s}function wp(t,e,n,r){var i,o,s,a,c,l,u,h,d,f=this._x0,p=this._y0,m=this._z0,g=this._x1,v=this._y1,_=this._z1,y=[],b=this._root;b&&y.push(new bp(b,f,p,m,g,v,_)),null==r?r=1/0:(f=t-r,p=e-r,m=n-r,g=t+r,v=e+r,_=n+r,r*=r);while(h=y.pop())if(!(!(b=h.node)||(o=h.x0)>g||(s=h.y0)>v||(a=h.z0)>_||(c=h.x1)<f||(l=h.y1)<p||(u=h.z1)<m))if(b.length){var w=(o+c)/2,x=(s+l)/2,E=(a+u)/2;y.push(new bp(b[7],w,x,E,c,l,u),new bp(b[6],o,x,E,w,l,u),new bp(b[5],w,s,E,c,x,u),new bp(b[4],o,s,E,w,x,u),new bp(b[3],w,x,a,c,l,E),new bp(b[2],o,x,a,w,l,E),new bp(b[1],w,s,a,c,x,E),new bp(b[0],o,s,a,w,x,E)),(d=(n>=E)<<2|(e>=x)<<1|t>=w)&&(h=y[y.length-1],y[y.length-1]=y[y.length-1-d],y[y.length-1-d]=h)}else{var S=t-+this._x.call(null,b.data),M=e-+this._y.call(null,b.data),T=n-+this._z.call(null,b.data),A=S*S+M*M+T*T;if(A<r){var C=Math.sqrt(r=A);f=t-C,p=e-C,m=n-C,g=t+C,v=e+C,_=n+C,i=b.data}}return i}function xp(t){if(isNaN(o=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t))||isNaN(a=+this._z.call(null,t)))return this;var e,n,r,i,o,s,a,c,l,u,h,d,f,p,m,g=this._root,v=this._x0,_=this._y0,y=this._z0,b=this._x1,w=this._y1,x=this._z1;if(!g)return this;if(g.length)while(1){if((h=o>=(c=(v+b)/2))?v=c:b=c,(d=s>=(l=(_+w)/2))?_=l:w=l,(f=a>=(u=(y+x)/2))?y=u:x=u,e=g,!(g=g[p=f<<2|d<<1|h]))return this;if(!g.length)break;(e[p+1&7]||e[p+2&7]||e[p+3&7]||e[p+4&7]||e[p+5&7]||e[p+6&7]||e[p+7&7])&&(n=e,m=p)}while(g.data!==t)if(r=g,!(g=g.next))return this;return(i=g.next)&&delete g.next,r?(i?r.next=i:delete r.next,this):e?(i?e[p]=i:delete e[p],(g=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&g===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!g.length&&(n?n[m]=g:this._root=g),this):(this._root=i,this)}function Ep(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function Sp(){return this._root}function Mp(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t}function Tp(t){var e,n,r,i,o,s,a,c,l=[],u=this._root;u&&l.push(new bp(u,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));while(e=l.pop())if(!t(u=e.node,r=e.x0,i=e.y0,o=e.z0,s=e.x1,a=e.y1,c=e.z1)&&u.length){var h=(r+s)/2,d=(i+a)/2,f=(o+c)/2;(n=u[7])&&l.push(new bp(n,h,d,f,s,a,c)),(n=u[6])&&l.push(new bp(n,r,d,f,h,a,c)),(n=u[5])&&l.push(new bp(n,h,i,f,s,d,c)),(n=u[4])&&l.push(new bp(n,r,i,f,h,d,c)),(n=u[3])&&l.push(new bp(n,h,d,o,s,a,f)),(n=u[2])&&l.push(new bp(n,r,d,o,h,a,f)),(n=u[1])&&l.push(new bp(n,h,i,o,s,d,f)),(n=u[0])&&l.push(new bp(n,r,i,o,h,d,f))}return this}function Ap(t){var e,n=[],r=[];this._root&&n.push(new bp(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));while(e=n.pop()){var i=e.node;if(i.length){var o,s=e.x0,a=e.y0,c=e.z0,l=e.x1,u=e.y1,h=e.z1,d=(s+l)/2,f=(a+u)/2,p=(c+h)/2;(o=i[0])&&n.push(new bp(o,s,a,c,d,f,p)),(o=i[1])&&n.push(new bp(o,d,a,c,l,f,p)),(o=i[2])&&n.push(new bp(o,s,f,c,d,u,p)),(o=i[3])&&n.push(new bp(o,d,f,c,l,u,p)),(o=i[4])&&n.push(new bp(o,s,a,p,d,f,h)),(o=i[5])&&n.push(new bp(o,d,a,p,l,f,h)),(o=i[6])&&n.push(new bp(o,s,f,p,d,u,h)),(o=i[7])&&n.push(new bp(o,d,f,p,l,u,h))}r.push(e)}while(e=r.pop())t(e.node,e.x0,e.y0,e.z0,e.x1,e.y1,e.z1);return this}function Cp(t){return t[0]}function Rp(t){return arguments.length?(this._x=t,this):this._x}function Pp(t){return t[1]}function Op(t){return arguments.length?(this._y=t,this):this._y}function Lp(t){return t[2]}function kp(t){return arguments.length?(this._z=t,this):this._z}function Ip(t,e,n,r){var i=new Dp(null==e?Cp:e,null==n?Pp:n,null==r?Lp:r,NaN,NaN,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function Dp(t,e,n,r,i,o,s,a,c){this._x=t,this._y=e,this._z=n,this._x0=r,this._y0=i,this._z0=o,this._x1=s,this._y1=a,this._z1=c,this._root=void 0}function Np(t){var e={data:t.data},n=e;while(t=t.next)n=n.next={data:t.data};return e}fp.copy=function(){var t,e,n=new hp(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=dp(r),n;t=[{source:r,target:n._root=new Array(4)}];while(r=t.pop())for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=dp(e));return n},fp.add=qf,fp.addAll=Yf,fp.cover=$f,fp.data=Kf,fp.extent=Jf,fp.find=Qf,fp.remove=tp,fp.removeAll=ep,fp.root=np,fp.size=rp,fp.visit=ip,fp.visitAfter=op,fp.x=ap,fp.y=lp;var Up=Ip.prototype=Dp.prototype;function Fp(){var t,e,n,r,i,o,s=wf(-30),a=1,c=1/0,l=.81;function u(r){var o,s=t.length,a=(1===e?Hf(t,pf):2===e?up(t,pf,mf):3===e?Ip(t,pf,mf,gf):null).visitAfter(d);for(i=r,o=0;o<s;++o)n=t[o],a.visit(f)}function h(){if(t){var e,n,r=t.length;for(o=new Array(r),e=0;e<r;++e)n=t[e],o[n.index]=+s(n,e,t)}}function d(t){var n,r,i,s,a,c,l=0,u=0,h=t.length;if(h){for(i=s=a=c=0;c<h;++c)(n=t[c])&&(r=Math.abs(n.value))&&(l+=n.value,u+=r,i+=r*(n.x||0),s+=r*(n.y||0),a+=r*(n.z||0));l*=Math.sqrt(4/h),t.x=i/u,e>1&&(t.y=s/u),e>2&&(t.z=a/u)}else{n=t,n.x=n.data.x,e>1&&(n.y=n.data.y),e>2&&(n.z=n.data.z);do{l+=o[n.data.index]}while(n=n.next)}t.value=l}function f(t,s,u,h,d){if(!t.value)return!0;var f=[u,h,d][e-1],p=t.x-n.x,m=e>1?t.y-n.y:0,g=e>2?t.z-n.z:0,v=f-s,_=p*p+m*m+g*g;if(v*v/l<_)return _<c&&(0===p&&(p=xf(r),_+=p*p),e>1&&0===m&&(m=xf(r),_+=m*m),e>2&&0===g&&(g=xf(r),_+=g*g),_<a&&(_=Math.sqrt(a*_)),n.vx+=p*t.value*i/_,e>1&&(n.vy+=m*t.value*i/_),e>2&&(n.vz+=g*t.value*i/_)),!0;if(!(t.length||_>=c)){(t.data!==n||t.next)&&(0===p&&(p=xf(r),_+=p*p),e>1&&0===m&&(m=xf(r),_+=m*m),e>2&&0===g&&(g=xf(r),_+=g*g),_<a&&(_=Math.sqrt(a*_)));do{t.data!==n&&(v=o[t.data.index]*i/_,n.vx+=p*v,e>1&&(n.vy+=m*v),e>2&&(n.vz+=g*v))}while(t=t.next)}}return u.initialize=function(n,...i){t=n,r=i.find((t=>"function"===typeof t))||Math.random,e=i.find((t=>[1,2,3].includes(t)))||2,h()},u.strength=function(t){return arguments.length?(s="function"===typeof t?t:wf(+t),h(),u):s},u.distanceMin=function(t){return arguments.length?(a=t*t,u):Math.sqrt(a)},u.distanceMax=function(t){return arguments.length?(c=t*t,u):Math.sqrt(c)},u.theta=function(t){return arguments.length?(l=t*t,u):Math.sqrt(l)},u}function Bp(t,e,n){var r,i=1;function o(){var o,s,a=r.length,c=0,l=0,u=0;for(o=0;o<a;++o)s=r[o],c+=s.x||0,l+=s.y||0,u+=s.z||0;for(c=(c/a-t)*i,l=(l/a-e)*i,u=(u/a-n)*i,o=0;o<a;++o)s=r[o],c&&(s.x-=c),l&&(s.y-=l),u&&(s.z-=u)}return null==t&&(t=0),null==e&&(e=0),null==n&&(n=0),o.initialize=function(t){r=t},o.x=function(e){return arguments.length?(t=+e,o):t},o.y=function(t){return arguments.length?(e=+t,o):e},o.z=function(t){return arguments.length?(n=+t,o):n},o.strength=function(t){return arguments.length?(i=+t,o):i},o}function zp(t,e,n,r){var i,o,s,a,c=wf(.1);function l(t){for(var c=0,l=i.length;c<l;++c){var u=i[c],h=u.x-e||1e-6,d=(u.y||0)-n||1e-6,f=(u.z||0)-r||1e-6,p=Math.sqrt(h*h+d*d+f*f),m=(a[c]-p)*s[c]*t/p;u.vx+=h*m,o>1&&(u.vy+=d*m),o>2&&(u.vz+=f*m)}}function u(){if(i){var e,n=i.length;for(s=new Array(n),a=new Array(n),e=0;e<n;++e)a[e]=+t(i[e],e,i),s[e]=isNaN(a[e])?0:+c(i[e],e,i)}}return"function"!==typeof t&&(t=wf(+t)),null==e&&(e=0),null==n&&(n=0),null==r&&(r=0),l.initialize=function(t,...e){i=t,o=e.find((t=>[1,2,3].includes(t)))||2,u()},l.strength=function(t){return arguments.length?(c="function"===typeof t?t:wf(+t),u(),l):c},l.radius=function(e){return arguments.length?(t="function"===typeof e?e:wf(+e),u(),l):t},l.x=function(t){return arguments.length?(e=+t,l):e},l.y=function(t){return arguments.length?(n=+t,l):n},l.z=function(t){return arguments.length?(r=+t,l):r},l}Up.copy=function(){var t,e,n=new Dp(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),r=this._root;if(!r)return n;if(!r.length)return n._root=Np(r),n;t=[{source:r,target:n._root=new Array(8)}];while(r=t.pop())for(var i=0;i<8;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(8)}):r.target[i]=Np(e));return n},Up.add=pp,Up.addAll=gp,Up.cover=vp,Up.data=_p,Up.extent=yp,Up.find=wp,Up.remove=xp,Up.removeAll=Ep,Up.root=Sp,Up.size=Mp,Up.visit=Tp,Up.visitAfter=Ap,Up.x=Rp,Up.y=Op,Up.z=kp;var jp=n(4747),Hp=n(4854);function Vp(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var Gp=Vp,Wp="object"==typeof global&&global&&global.Object===Object&&global,qp=Wp,Xp="object"==typeof self&&self&&self.Object===Object&&self,Yp=qp||Xp||Function("return this")(),$p=Yp,Kp=function(){return $p.Date.now()},Jp=Kp,Zp=/\s/;function Qp(t){var e=t.length;while(e--&&Zp.test(t.charAt(e)));return e}var tm=Qp,em=/^\s+/;function nm(t){return t?t.slice(0,tm(t)+1).replace(em,""):t}var rm=nm,im=$p.Symbol,om=im,sm=Object.prototype,am=sm.hasOwnProperty,cm=sm.toString,lm=om?om.toStringTag:void 0;function um(t){var e=am.call(t,lm),n=t[lm];try{t[lm]=void 0;var r=!0}catch(o){}var i=cm.call(t);return r&&(e?t[lm]=n:delete t[lm]),i}var hm=um,dm=Object.prototype,fm=dm.toString;function pm(t){return fm.call(t)}var mm=pm,gm="[object Null]",vm="[object Undefined]",_m=om?om.toStringTag:void 0;function ym(t){return null==t?void 0===t?vm:gm:_m&&_m in Object(t)?hm(t):mm(t)}var bm=ym;function wm(t){return null!=t&&"object"==typeof t}var xm=wm,Em="[object Symbol]";function Sm(t){return"symbol"==typeof t||xm(t)&&bm(t)==Em}var Mm=Sm,Tm=NaN,Am=/^[-+]0x[0-9a-f]+$/i,Cm=/^0b[01]+$/i,Rm=/^0o[0-7]+$/i,Pm=parseInt;function Om(t){if("number"==typeof t)return t;if(Mm(t))return Tm;if(Gp(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Gp(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=rm(t);var n=Cm.test(t);return n||Rm.test(t)?Pm(t.slice(2),n?2:8):Am.test(t)?Tm:+t}var Lm=Om,km="Expected a function",Im=Math.max,Dm=Math.min;function Nm(t,e,n){var r,i,o,s,a,c,l=0,u=!1,h=!1,d=!0;if("function"!=typeof t)throw new TypeError(km);function f(e){var n=r,o=i;return r=i=void 0,l=e,s=t.apply(o,n),s}function p(t){return l=t,a=setTimeout(v,e),u?f(t):s}function m(t){var n=t-c,r=t-l,i=e-n;return h?Dm(i,o-r):i}function g(t){var n=t-c,r=t-l;return void 0===c||n>=e||n<0||h&&r>=o}function v(){var t=Jp();if(g(t))return _(t);a=setTimeout(v,m(t))}function _(t){return a=void 0,d&&r?f(t):(r=i=void 0,s)}function y(){void 0!==a&&clearTimeout(a),l=0,r=c=i=a=void 0}function b(){return void 0===a?s:_(Jp())}function w(){var t=Jp(),n=g(t);if(r=arguments,i=this,c=t,n){if(void 0===a)return p(c);if(h)return clearTimeout(a),a=setTimeout(v,e),f(c)}return void 0===a&&(a=setTimeout(v,e)),s}return e=Lm(e)||0,Gp(n)&&(u=!!n.leading,h="maxWait"in n,o=h?Im(Lm(n.maxWait)||0,e):o,d="trailing"in n?!!n.trailing:d),w.cancel=y,w.flush=b,w}var Um=Nm;function Fm(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(u){l=!0,i=u}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return a}}function Bm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ym(r.key),r)}}function jm(t,e,n){return e&&zm(t.prototype,e),n&&zm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Hm(t,e){return Vm(t)||Fm(t,e)||Gm(t,e)||qm()}function Vm(t){if(Array.isArray(t))return t}function Gm(t,e){if(t){if("string"===typeof t)return Wm(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wm(t,e):void 0}}function Wm(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function qm(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Xm(t,e){if("object"!==typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Ym(t){var e=Xm(t,"string");return"symbol"===typeof e?e:String(e)}var $m=jm((function t(e,n){var r=n["default"],i=void 0===r?null:r,o=n.triggerUpdate,s=void 0===o||o,a=n.onChange,c=void 0===a?function(t,e){}:a;Bm(this,t),this.name=e,this.defaultVal=i,this.triggerUpdate=s,this.onChange=c}));function Km(t){var e=t.stateInit,n=void 0===e?function(){return{}}:e,r=t.props,i=void 0===r?{}:r,o=t.methods,s=void 0===o?{}:o,a=t.aliases,c=void 0===a?{}:a,l=t.init,u=void 0===l?function(){}:l,h=t.update,d=void 0===h?function(){}:h,f=Object.keys(i).map((function(t){return new $m(t,i[t])}));return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.assign({},n instanceof Function?n(t):n,{initialised:!1}),r={};function i(e){return o(e,t),a(),i}var o=function(t,n){u.call(i,t,e,n),e.initialised=!0},a=Um((function(){e.initialised&&(d.call(i,e,r),r={})}),1);return f.forEach((function(t){function n(t){var n=t.name,o=t.triggerUpdate,s=void 0!==o&&o,c=t.onChange,l=void 0===c?function(t,e){}:c,u=t.defaultVal,h=void 0===u?null:u;return function(t){var o=e[n];if(!arguments.length)return o;var c=void 0===t?h:t;return e[n]=c,l.call(i,c,e,o),!r.hasOwnProperty(n)&&(r[n]=o),s&&a(),i}}i[t.name]=n(t)})),Object.keys(s).forEach((function(t){i[t]=function(){for(var n,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=s[t]).call.apply(n,[i,e].concat(o))}})),Object.entries(c).forEach((function(t){var e=Hm(t,2),n=e[0],r=e[1];return i[n]=i[r]})),i.resetProps=function(){return f.forEach((function(t){i[t.name](t.defaultVal)})),i},i.resetProps(),e._rerender=a,i}}var Jm=function(t){return t instanceof Function?t:"string"===typeof t?function(e){return e[t]}:function(e){return t}};function Zm(t,e){let n;if(void 0===e)for(const r of t)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function Qm(t,e){let n;if(void 0===e)for(const r of t)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function tg(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(u){l=!0,i=u}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return a}}function eg(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}function ng(t,e){if(null==t)return{};var n,r,i=eg(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function rg(t,e){return sg(t)||tg(t,e)||cg(t,e)||hg()}function ig(t){return og(t)||ag(t)||cg(t)||ug()}function og(t){if(Array.isArray(t))return lg(t)}function sg(t){if(Array.isArray(t))return t}function ag(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function cg(t,e){if(t){if("string"===typeof t)return lg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lg(t,e):void 0}}function lg(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ug(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hg(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function dg(t,e){if("object"!==typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function fg(t){var e=dg(t,"string");return"symbol"===typeof e?e:String(e)}var pg=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=(e instanceof Array?e.length?e:[void 0]:[e]).map((function(t){return{keyAccessor:t,isProp:!(t instanceof Function)}})),o=t.reduce((function(t,e){var r=t,o=e;return i.forEach((function(t,e){var s,a=t.keyAccessor,c=t.isProp;if(c){var l=o,u=l[a],h=ng(l,[a].map(fg));s=u,o=h}else s=a(o,e);e+1<i.length?(r.hasOwnProperty(s)||(r[s]={}),r=r[s]):n?(r.hasOwnProperty(s)||(r[s]=[]),r[s].push(o)):r[s]=o})),t}),{});n instanceof Function&&function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;r===i.length?Object.keys(e).forEach((function(t){return e[t]=n(e[t])})):Object.values(e).forEach((function(e){return t(e,r+1)}))}(o);var s=o;return r&&(s=[],function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];n.length===i.length?s.push({keys:n,vals:e}):Object.entries(e).forEach((function(e){var r=rg(e,2),i=r[0],o=r[1];return t(o,[].concat(ig(n),[i]))}))}(o),e instanceof Array&&0===e.length&&1===s.length&&(s[0].keys=[])),s};function mg(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(u){l=!0,i=u}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return a}}function gg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function vg(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?gg(Object(n),!0).forEach((function(e){_g(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gg(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _g(t,e,n){return e=Og(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yg(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}function bg(t,e){if(null==t)return{};var n,r,i=yg(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function wg(t,e){return Sg(t)||mg(t,e)||Tg(t,e)||Rg()}function xg(t){return Eg(t)||Mg(t)||Tg(t)||Cg()}function Eg(t){if(Array.isArray(t))return Ag(t)}function Sg(t){if(Array.isArray(t))return t}function Mg(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function Tg(t,e){if(t){if("string"===typeof t)return Ag(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ag(t,e):void 0}}function Ag(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Cg(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Rg(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Pg(t,e){if("object"!==typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Og(t){var e=Pg(t,"string");return"symbol"===typeof e?e:String(e)}var Lg=["createObj","updateObj","exitObj","objBindAttr","dataBindAttr"];function kg(t,e,n){var r={enter:[],update:[],exit:[]};if(n){var i=pg(t,n,!1),o=pg(e,n,!1),s=Object.assign({},i,o);Object.entries(s).forEach((function(t){var e=wg(t,2),n=e[0],s=e[1],a=i.hasOwnProperty(n)?o.hasOwnProperty(n)?"update":"exit":"enter";r[a].push("update"===a?[i[n],o[n]]:s)}))}else{var a=new Set(t),c=new Set(e);new Set([].concat(xg(a),xg(c))).forEach((function(t){var e=a.has(t)?c.has(t)?"update":"exit":"enter";r[e].push("update"===e?[t,t]:t)}))}return r}function Ig(t,e,n){var r=n.objBindAttr,i=void 0===r?"__obj":r,o=n.dataBindAttr,s=void 0===o?"__data":o,a=n.idAccessor,c=n.purge,l=void 0!==c&&c,u=function(t){return t.hasOwnProperty(s)},h=e.filter((function(t){return!u(t)})),d=e.filter(u).map((function(t){return t[s]})),f=t,p=l?{enter:f,exit:d,update:[]}:kg(d,f,a);return p.update=p.update.map((function(t){var e=wg(t,2),n=e[0],r=e[1];return n!==r&&(r[i]=n[i],r[i][s]=r),r})),p.exit=p.exit.concat(h.map((function(t){return _g({},i,t)}))),p}function Dg(t,e,n,r,i){var o=i.createObj,s=void 0===o?function(t){return{}}:o,a=i.updateObj,c=void 0===a?function(t,e){}:a,l=i.exitObj,u=void 0===l?function(t){}:l,h=i.objBindAttr,d=void 0===h?"__obj":h,f=i.dataBindAttr,p=void 0===f?"__data":f,m=bg(i,Lg),g=Ig(t,e,vg({objBindAttr:d,dataBindAttr:p},m)),v=g.enter,_=g.update,y=g.exit;y.forEach((function(t){var e=t[d];delete t[d],u(e),r(e)}));var b=x(v),w=[].concat(xg(v),xg(_));function x(t){var e=[];return t.forEach((function(t){var n=s(t);n&&(n[p]=t,t[d]=n,e.push(n))})),e}function E(t){t.forEach((function(t){var e=t[d];e&&(e[p]=t,c(e,t))}))}E(w),b.forEach(n)}class Ng extends Map{constructor(t,e=zg){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[n,r]of t)this.set(n,r)}get(t){return super.get(Ug(this,t))}has(t){return super.has(Ug(this,t))}set(t,e){return super.set(Fg(this,t),e)}delete(t){return super.delete(Bg(this,t))}}function Ug({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Fg({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Bg({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function zg(t){return null!==t&&"object"===typeof t?t.valueOf():t}function jg(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const Hg=Symbol("implicit");function Vg(){var t=new Ng,e=[],n=[],r=Hg;function i(i){let o=t.get(i);if(void 0===o){if(r!==Hg)return r;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Ng;for(const r of n)t.has(r)||t.set(r,e.push(r)-1);return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Vg(e,n).unknown(r)},jg.apply(i,arguments),i}function Gg(t){var e=t.length/6|0,n=new Array(e),r=0;while(r<e)n[r]="#"+t.slice(6*r,6*++r);return n}var Wg=Gg("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function qg(t){return qg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qg(t)}var Xg=/^\s+/,Yg=/\s+$/;function $g(t,e){if(t=t||"",e=e||{},t instanceof $g)return t;if(!(this instanceof $g))return new $g(t,e);var n=Kg(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}function Kg(t){var e={r:0,g:0,b:0},n=1,r=null,i=null,o=null,s=!1,a=!1;return"string"==typeof t&&(t=Lv(t)),"object"==qg(t)&&(Ov(t.r)&&Ov(t.g)&&Ov(t.b)?(e=Jg(t.r,t.g,t.b),s=!0,a="%"===String(t.r).substr(-1)?"prgb":"rgb"):Ov(t.h)&&Ov(t.s)&&Ov(t.v)?(r=Av(t.s),i=Av(t.v),e=ev(t.h,r,i),s=!0,a="hsv"):Ov(t.h)&&Ov(t.s)&&Ov(t.l)&&(r=Av(t.s),o=Av(t.l),e=Qg(t.h,r,o),s=!0,a="hsl"),t.hasOwnProperty("a")&&(n=t.a)),n=bv(n),{ok:s,format:t.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}function Jg(t,e,n){return{r:255*wv(t,255),g:255*wv(e,255),b:255*wv(n,255)}}function Zg(t,e,n){t=wv(t,255),e=wv(e,255),n=wv(n,255);var r,i,o=Math.max(t,e,n),s=Math.min(t,e,n),a=(o+s)/2;if(o==s)r=i=0;else{var c=o-s;switch(i=a>.5?c/(2-o-s):c/(o+s),o){case t:r=(e-n)/c+(e<n?6:0);break;case e:r=(n-t)/c+2;break;case n:r=(t-e)/c+4;break}r/=6}return{h:r,s:i,l:a}}function Qg(t,e,n){var r,i,o;function s(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=wv(t,360),e=wv(e,100),n=wv(n,100),0===e)r=i=o=n;else{var a=n<.5?n*(1+e):n+e-n*e,c=2*n-a;r=s(c,a,t+1/3),i=s(c,a,t),o=s(c,a,t-1/3)}return{r:255*r,g:255*i,b:255*o}}function tv(t,e,n){t=wv(t,255),e=wv(e,255),n=wv(n,255);var r,i,o=Math.max(t,e,n),s=Math.min(t,e,n),a=o,c=o-s;if(i=0===o?0:c/o,o==s)r=0;else{switch(o){case t:r=(e-n)/c+(e<n?6:0);break;case e:r=(n-t)/c+2;break;case n:r=(t-e)/c+4;break}r/=6}return{h:r,s:i,v:a}}function ev(t,e,n){t=6*wv(t,360),e=wv(e,100),n=wv(n,100);var r=Math.floor(t),i=t-r,o=n*(1-e),s=n*(1-i*e),a=n*(1-(1-i)*e),c=r%6,l=[n,s,o,o,a,n][c],u=[a,n,n,s,o,o][c],h=[o,o,a,n,n,s][c];return{r:255*l,g:255*u,b:255*h}}function nv(t,e,n,r){var i=[Tv(Math.round(t).toString(16)),Tv(Math.round(e).toString(16)),Tv(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function rv(t,e,n,r,i){var o=[Tv(Math.round(t).toString(16)),Tv(Math.round(e).toString(16)),Tv(Math.round(n).toString(16)),Tv(Cv(r))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function iv(t,e,n,r){var i=[Tv(Cv(r)),Tv(Math.round(t).toString(16)),Tv(Math.round(e).toString(16)),Tv(Math.round(n).toString(16))];return i.join("")}function ov(t,e){e=0===e?0:e||10;var n=$g(t).toHsl();return n.s-=e/100,n.s=xv(n.s),$g(n)}function sv(t,e){e=0===e?0:e||10;var n=$g(t).toHsl();return n.s+=e/100,n.s=xv(n.s),$g(n)}function av(t){return $g(t).desaturate(100)}function cv(t,e){e=0===e?0:e||10;var n=$g(t).toHsl();return n.l+=e/100,n.l=xv(n.l),$g(n)}function lv(t,e){e=0===e?0:e||10;var n=$g(t).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-e/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-e/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-e/100*255))),$g(n)}function uv(t,e){e=0===e?0:e||10;var n=$g(t).toHsl();return n.l-=e/100,n.l=xv(n.l),$g(n)}function hv(t,e){var n=$g(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,$g(n)}function dv(t){var e=$g(t).toHsl();return e.h=(e.h+180)%360,$g(e)}function fv(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var n=$g(t).toHsl(),r=[$g(t)],i=360/e,o=1;o<e;o++)r.push($g({h:(n.h+o*i)%360,s:n.s,l:n.l}));return r}function pv(t){var e=$g(t).toHsl(),n=e.h;return[$g(t),$g({h:(n+72)%360,s:e.s,l:e.l}),$g({h:(n+216)%360,s:e.s,l:e.l})]}function mv(t,e,n){e=e||6,n=n||30;var r=$g(t).toHsl(),i=360/n,o=[$g(t)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,o.push($g(r));return o}function gv(t,e){e=e||6;var n=$g(t).toHsv(),r=n.h,i=n.s,o=n.v,s=[],a=1/e;while(e--)s.push($g({h:r,s:i,v:o})),o=(o+a)%1;return s}$g.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,n,r,i,o,s=this.toRgb();return t=s.r/255,e=s.g/255,n=s.b/255,r=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4),i=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4),o=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4),.2126*r+.7152*i+.0722*o},setAlpha:function(t){return this._a=bv(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=tv(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=tv(this._r,this._g,this._b),e=Math.round(360*t.h),n=Math.round(100*t.s),r=Math.round(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+r+"%)":"hsva("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var t=Zg(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=Zg(this._r,this._g,this._b),e=Math.round(360*t.h),n=Math.round(100*t.s),r=Math.round(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+r+"%)":"hsla("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(t){return nv(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return rv(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*wv(this._r,255))+"%",g:Math.round(100*wv(this._g,255))+"%",b:Math.round(100*wv(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*wv(this._r,255))+"%, "+Math.round(100*wv(this._g,255))+"%, "+Math.round(100*wv(this._b,255))+"%)":"rgba("+Math.round(100*wv(this._r,255))+"%, "+Math.round(100*wv(this._g,255))+"%, "+Math.round(100*wv(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(_v[nv(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+iv(this._r,this._g,this._b,this._a),n=e,r=this._gradientType?"GradientType = 1, ":"";if(t){var i=$g(t);n="#"+iv(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,r=this._a<1&&this._a>=0,i=!e&&r&&("hex"===t||"hex6"===t||"hex3"===t||"hex4"===t||"hex8"===t||"name"===t);return i?"name"===t&&0===this._a?this.toName():this.toRgbString():("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return $g(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(cv,arguments)},brighten:function(){return this._applyModification(lv,arguments)},darken:function(){return this._applyModification(uv,arguments)},desaturate:function(){return this._applyModification(ov,arguments)},saturate:function(){return this._applyModification(sv,arguments)},greyscale:function(){return this._applyModification(av,arguments)},spin:function(){return this._applyModification(hv,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(mv,arguments)},complement:function(){return this._applyCombination(dv,arguments)},monochromatic:function(){return this._applyCombination(gv,arguments)},splitcomplement:function(){return this._applyCombination(pv,arguments)},triad:function(){return this._applyCombination(fv,[3])},tetrad:function(){return this._applyCombination(fv,[4])}},$g.fromRatio=function(t,e){if("object"==qg(t)){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]="a"===r?t[r]:Av(t[r]));t=n}return $g(t,e)},$g.equals=function(t,e){return!(!t||!e)&&$g(t).toRgbString()==$g(e).toRgbString()},$g.random=function(){return $g.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},$g.mix=function(t,e,n){n=0===n?0:n||50;var r=$g(t).toRgb(),i=$g(e).toRgb(),o=n/100,s={r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a};return $g(s)},$g.readability=function(t,e){var n=$g(t),r=$g(e);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)},$g.isReadable=function(t,e,n){var r,i,o=$g.readability(t,e);switch(i=!1,r=kv(n),r.level+r.size){case"AAsmall":case"AAAlarge":i=o>=4.5;break;case"AAlarge":i=o>=3;break;case"AAAsmall":i=o>=7;break}return i},$g.mostReadable=function(t,e,n){var r,i,o,s,a=null,c=0;n=n||{},i=n.includeFallbackColors,o=n.level,s=n.size;for(var l=0;l<e.length;l++)r=$g.readability(t,e[l]),r>c&&(c=r,a=$g(e[l]));return $g.isReadable(t,a,{level:o,size:s})||!i?a:(n.includeFallbackColors=!1,$g.mostReadable(t,["#fff","#000"],n))};var vv=$g.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},_v=$g.hexNames=yv(vv);function yv(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function bv(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function wv(t,e){Sv(t)&&(t="100%");var n=Mv(t);return t=Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function xv(t){return Math.min(1,Math.max(0,t))}function Ev(t){return parseInt(t,16)}function Sv(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)}function Mv(t){return"string"===typeof t&&-1!=t.indexOf("%")}function Tv(t){return 1==t.length?"0"+t:""+t}function Av(t){return t<=1&&(t=100*t+"%"),t}function Cv(t){return Math.round(255*parseFloat(t)).toString(16)}function Rv(t){return Ev(t)/255}var Pv=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",n="(?:"+e+")|(?:"+t+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Ov(t){return!!Pv.CSS_UNIT.exec(t)}function Lv(t){t=t.replace(Xg,"").replace(Yg,"").toLowerCase();var e,n=!1;if(vv[t])t=vv[t],n=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};return(e=Pv.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=Pv.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=Pv.hsl.exec(t))?{h:e[1],s:e[2],l:e[3]}:(e=Pv.hsla.exec(t))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=Pv.hsv.exec(t))?{h:e[1],s:e[2],v:e[3]}:(e=Pv.hsva.exec(t))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=Pv.hex8.exec(t))?{r:Ev(e[1]),g:Ev(e[2]),b:Ev(e[3]),a:Rv(e[4]),format:n?"name":"hex8"}:(e=Pv.hex6.exec(t))?{r:Ev(e[1]),g:Ev(e[2]),b:Ev(e[3]),format:n?"name":"hex"}:(e=Pv.hex4.exec(t))?{r:Ev(e[1]+""+e[1]),g:Ev(e[2]+""+e[2]),b:Ev(e[3]+""+e[3]),a:Rv(e[4]+""+e[4]),format:n?"name":"hex8"}:!!(e=Pv.hex3.exec(t))&&{r:Ev(e[1]+""+e[1]),g:Ev(e[2]+""+e[2]),b:Ev(e[3]+""+e[3]),format:n?"name":"hex"}}function kv(t){var e,n;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA"),"small"!==n&&"large"!==n&&(n="small"),{level:e,size:n}}function Iv(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(u){l=!0,i=u}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return a}}function Dv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Nv(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Dv(Object(n),!0).forEach((function(e){jv(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Uv(t){return Uv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uv(t)}function Fv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c_(r.key),r)}}function zv(t,e,n){return e&&Bv(t.prototype,e),n&&Bv(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function jv(t,e,n){return e=c_(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hv(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gv(t,e)}function Vv(t){return Vv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vv(t)}function Gv(t,e){return Gv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Gv(t,e)}function Wv(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function qv(t,e,n){return qv=Wv()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var i=Function.bind.apply(t,r),o=new i;return n&&Gv(o,n.prototype),o},qv.apply(null,arguments)}function Xv(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}function Yv(t,e){if(null==t)return{};var n,r,i=Xv(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function $v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kv(t,e){if(e&&("object"===typeof e||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return $v(t)}function Jv(t){var e=Wv();return function(){var n,r=Vv(t);if(e){var i=Vv(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Kv(this,n)}}function Zv(t,e){return e_(t)||Iv(t,e)||r_(t,e)||s_()}function Qv(t){return t_(t)||n_(t)||r_(t)||o_()}function t_(t){if(Array.isArray(t))return i_(t)}function e_(t){if(Array.isArray(t))return t}function n_(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function r_(t,e){if(t){if("string"===typeof t)return i_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i_(t,e):void 0}}function i_(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o_(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s_(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a_(t,e){if("object"!==typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function c_(t){var e=a_(t,"string");return"symbol"===typeof e?e:String(e)}var l_=function t(e){e instanceof Array?e.forEach(t):(e.map&&e.map.dispose(),e.dispose())},u_=function t(e){e.geometry&&e.geometry.dispose(),e.material&&l_(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(t)},h_=function(t){while(t.children.length){var e=t.children[0];t.remove(e),u_(e)}},d_=["objFilter"];function f_(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.objFilter,i=void 0===r?function(){return!0}:r,o=Yv(n,d_);return Dg(t,e.children.filter(i),(function(t){return e.add(t)}),(function(t){e.remove(t),h_(t)}),Nv({objBindAttr:"__threeObj"},o))}var p_=function(t){return isNaN(t)?parseInt($g(t).toHex(),16):t},m_=function(t){return isNaN(t)?$g(t).getAlpha():1},g_=Vg(Wg);function v_(t,e,n){e&&"string"===typeof n&&t.filter((function(t){return!t[n]})).forEach((function(t){t[n]=g_(e(t))}))}function __(t,e){var n=t.nodes,r=t.links,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.nodeFilter,s=void 0===o?function(){return!0}:o,a=i.onLoopError,c=void 0===a?function(t){throw"Invalid DAG structure! Found cycle in node path: ".concat(t.join(" -> "),".")}:a,l={};n.forEach((function(t){return l[e(t)]={data:t,out:[],depth:-1,skip:!s(t)}})),r.forEach((function(t){var n=t.source,r=t.target,i=c(n),o=c(r);if(!l.hasOwnProperty(i))throw"Missing source node with id: ".concat(i);if(!l.hasOwnProperty(o))throw"Missing target node with id: ".concat(o);var s=l[i],a=l[o];function c(t){return"object"===Uv(t)?e(t):t}s.out.push(a)}));var u=[];d(Object.values(l));var h=Object.assign.apply(Object,[{}].concat(Qv(Object.entries(l).filter((function(t){var e=Zv(t,2),n=e[1];return!n.skip})).map((function(t){var e=Zv(t,2),n=e[0],r=e[1];return jv({},n,r.depth)})))));return h;function d(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=function(){var i=t[o];if(-1!==n.indexOf(i)){var s=[].concat(Qv(n.slice(n.indexOf(i))),[i]).map((function(t){return e(t.data)}));return u.some((function(t){return t.length===s.length&&t.every((function(t,e){return t===s[e]}))}))||(u.push(s),c(s)),"continue"}r>i.depth&&(i.depth=r,d(i.out,[].concat(Qv(n),[i]),r+(i.skip?0:1)))},o=0,s=t.length;o<s;o++)i()}}var y_=window.THREE?window.THREE:{Group:Fu,Mesh:Xi,MeshLambertMaterial:kh,Color:fi,BufferGeometry:Ri,BufferAttribute:_i,Matrix4:Er,Vector3:Xn,SphereGeometry:Oh,CylinderGeometry:Rh,TubeGeometry:Lh,ConeGeometry:Ph,Line:eh,LineBasicMaterial:$u,QuadraticBezierCurve3:Th,CubicBezierCurve3:xh,Box3:Kn},b_={graph:jp,forcelayout:Hp},w_=2,x_=(new y_.BufferGeometry).setAttribute?"setAttribute":"addAttribute",E_=(new y_.BufferGeometry).applyMatrix4?"applyMatrix4":"applyMatrix",S_=Km({props:{jsonUrl:{onChange:function(t,e){var n=this;t&&!e.fetchingJson&&(e.fetchingJson=!0,e.onLoading(),fetch(t).then((function(t){return t.json()})).then((function(t){e.fetchingJson=!1,e.onFinishLoading(t),n.graphData(t)})))},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(t,e){e.engineRunning=!1}},numDimensions:{default:3,onChange:function(t,e){var n=e.d3ForceLayout.force("charge");function r(t,e){t.forEach((function(t){delete t[e],delete t["v".concat(e)]}))}n&&n.strength(t>2?-60:-30),t<3&&r(e.graphData.nodes,"z"),t<2&&r(e.graphData.nodes,"y")}},dagMode:{onChange:function(t,e){!t&&"d3"===e.forceEngine&&(e.graphData.nodes||[]).forEach((function(t){return t.fx=t.fy=t.fz=void 0}))}},dagLevelDistance:{},dagNodeFilter:{default:function(t){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4},nodeId:{default:"id"},nodeVal:{default:"val"},nodeResolution:{default:8},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeVisibility:{default:!0},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},nodePositionUpdate:{triggerUpdate:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{},linkResolution:{default:6},linkCurvature:{default:0,triggerUpdate:!1},linkCurveRotation:{default:0,triggerUpdate:!1},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{triggerUpdate:!1},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},forceEngine:{default:"d3"},d3AlphaMin:{default:0},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(t,e){e.d3ForceLayout.alphaDecay(t)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(t,e){e.d3ForceLayout.alphaTarget(t)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(t,e){e.d3ForceLayout.velocityDecay(t)}},ngraphPhysics:{default:{timeStep:20,gravity:-1.2,theta:.8,springLength:30,springCoefficient:8e-4,dragCoefficient:.02}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onLoading:{default:function(){},triggerUpdate:!1},onFinishLoading:{default:function(){},triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1}},methods:{refresh:function(t){return t._flushObjects=!0,t._rerender(),this},d3Force:function(t,e,n){return void 0===n?t.d3ForceLayout.force(e):(t.d3ForceLayout.force(e,n),this)},d3ReheatSimulation:function(t){return t.d3ForceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(t){return t.cntTicks=0,t.startTickTime=new Date,t.engineRunning=!0,this},tickFrame:function(t){var e="ngraph"!==t.forceEngine;return t.engineRunning&&n(),r(),i(),this;function n(){++t.cntTicks>t.cooldownTicks||new Date-t.startTickTime>t.cooldownTime||e&&t.d3AlphaMin>0&&t.d3ForceLayout.alpha()<t.d3AlphaMin?(t.engineRunning=!1,t.onEngineStop()):(t.layout[e?"tick":"step"](),t.onEngineTick());var n=Jm(t.nodeThreeObjectExtend);t.graphData.nodes.forEach((function(r){var i=r.__threeObj;if(i){var o=e?r:t.layout.getNodePosition(r[t.nodeId]),s=n(r);t.nodePositionUpdate&&t.nodePositionUpdate(s?i.children[0]:i,{x:o.x,y:o.y,z:o.z},r)&&!s||(i.position.x=o.x,i.position.y=o.y||0,i.position.z=o.z||0)}}));var r=Jm(t.linkWidth),i=Jm(t.linkCurvature),o=Jm(t.linkCurveRotation),s=Jm(t.linkThreeObjectExtend);function a(n){var r=e?n:t.layout.getLinkPosition(t.layout.graph.getLink(n.source,n.target).id),s=r[e?"source":"from"],a=r[e?"target":"to"];if(s&&a&&s.hasOwnProperty("x")&&a.hasOwnProperty("x")){var c=i(n);if(c){var l,u=new y_.Vector3(s.x,s.y||0,s.z||0),h=new y_.Vector3(a.x,a.y||0,a.z||0),d=u.distanceTo(h),f=o(n);if(d>0){var p=a.x-s.x,m=a.y-s.y||0,g=(new y_.Vector3).subVectors(h,u),v=g.clone().multiplyScalar(c).cross(0!==p||0!==m?new y_.Vector3(0,0,1):new y_.Vector3(0,1,0)).applyAxisAngle(g.normalize(),f).add((new y_.Vector3).addVectors(u,h).divideScalar(2));l=new y_.QuadraticBezierCurve3(u,v,h)}else{var _=70*c,y=-f,b=y+Math.PI/2;l=new y_.CubicBezierCurve3(u,new y_.Vector3(_*Math.cos(b),_*Math.sin(b),0).add(u),new y_.Vector3(_*Math.cos(y),_*Math.sin(y),0).add(u),h)}n.__curve=l}else n.__curve=null}}t.graphData.links.forEach((function(n){var i=n.__lineObj;if(i){var o=e?n:t.layout.getLinkPosition(t.layout.graph.getLink(n.source,n.target).id),c=o[e?"source":"from"],l=o[e?"target":"to"];if(c&&l&&c.hasOwnProperty("x")&&l.hasOwnProperty("x")){a(n);var u=s(n);if(!t.linkPositionUpdate||!t.linkPositionUpdate(u?i.children[1]:i,{start:{x:c.x,y:c.y,z:c.z},end:{x:l.x,y:l.y,z:l.z}},n)||u){var h=30,d=n.__curve,f=i.children.length?i.children[0]:i;if("Line"===f.type){if(d)f.geometry.setFromPoints(d.getPoints(h));else{var p=f.geometry.getAttribute("position");p&&p.array&&6===p.array.length||f.geometry[x_]("position",p=new y_.BufferAttribute(new Float32Array(6),3)),p.array[0]=c.x,p.array[1]=c.y||0,p.array[2]=c.z||0,p.array[3]=l.x,p.array[4]=l.y||0,p.array[5]=l.z||0,p.needsUpdate=!0}f.geometry.computeBoundingSphere()}else if("Mesh"===f.type)if(d){f.geometry.type.match(/^Tube(Buffer)?Geometry$/)||(f.position.set(0,0,0),f.rotation.set(0,0,0),f.scale.set(1,1,1));var m=Math.ceil(10*r(n))/10,g=m/2,v=new y_.TubeGeometry(d,h,g,t.linkResolution,!1);f.geometry.dispose(),f.geometry=v}else{if(!f.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)){var _=Math.ceil(10*r(n))/10,y=_/2,b=new y_.CylinderGeometry(y,y,1,t.linkResolution,1,!1);b[E_]((new y_.Matrix4).makeTranslation(0,.5,0)),b[E_]((new y_.Matrix4).makeRotationX(Math.PI/2)),f.geometry.dispose(),f.geometry=b}var w=new y_.Vector3(c.x,c.y||0,c.z||0),x=new y_.Vector3(l.x,l.y||0,l.z||0),E=w.distanceTo(x);f.position.x=w.x,f.position.y=w.y,f.position.z=w.z,f.scale.z=E,f.parent.localToWorld(x),f.lookAt(x)}}}}}))}function r(){var n=Jm(t.linkDirectionalArrowRelPos),r=Jm(t.linkDirectionalArrowLength),i=Jm(t.nodeVal);t.graphData.links.forEach((function(o){var s=o.__arrowObj;if(s){var a=e?o:t.layout.getLinkPosition(t.layout.graph.getLink(o.source,o.target).id),c=a[e?"source":"from"],l=a[e?"target":"to"];if(c&&l&&c.hasOwnProperty("x")&&l.hasOwnProperty("x")){var u=Math.cbrt(Math.max(0,i(c)||1))*t.nodeRelSize,h=Math.cbrt(Math.max(0,i(l)||1))*t.nodeRelSize,d=r(o),f=n(o),p=o.__curve?function(t){return o.__curve.getPoint(t)}:function(t){var e=function(t,e,n,r){return e[t]+(n[t]-e[t])*r||0};return{x:e("x",c,l,t),y:e("y",c,l,t),z:e("z",c,l,t)}},m=o.__curve?o.__curve.getLength():Math.sqrt(["x","y","z"].map((function(t){return Math.pow((l[t]||0)-(c[t]||0),2)})).reduce((function(t,e){return t+e}),0)),g=u+d+(m-u-h-d)*f,v=p(g/m),_=p((g-d)/m);["x","y","z"].forEach((function(t){return s.position[t]=_[t]}));var y=qv(y_.Vector3,Qv(["x","y","z"].map((function(t){return v[t]}))));s.parent.localToWorld(y),s.lookAt(y)}}}))}function i(){var n=Jm(t.linkDirectionalParticleSpeed);t.graphData.links.forEach((function(r){var i=r.__photonsObj&&r.__photonsObj.children,o=r.__singleHopPhotonsObj&&r.__singleHopPhotonsObj.children;if(o&&o.length||i&&i.length){var s=e?r:t.layout.getLinkPosition(t.layout.graph.getLink(r.source,r.target).id),a=s[e?"source":"from"],c=s[e?"target":"to"];if(a&&c&&a.hasOwnProperty("x")&&c.hasOwnProperty("x")){var l=n(r),u=r.__curve?function(t){return r.__curve.getPoint(t)}:function(t){var e=function(t,e,n,r){return e[t]+(n[t]-e[t])*r||0};return{x:e("x",a,c,t),y:e("y",a,c,t),z:e("z",a,c,t)}},h=[].concat(Qv(i||[]),Qv(o||[]));h.forEach((function(t,e){var n="singleHopPhotons"===t.parent.__linkThreeObjType;if(t.hasOwnProperty("__progressRatio")||(t.__progressRatio=n?0:e/i.length),t.__progressRatio+=l,t.__progressRatio>=1){if(n)return t.parent.remove(t),void h_(t);t.__progressRatio=t.__progressRatio%1}var r=t.__progressRatio,o=u(r);["x","y","z"].forEach((function(e){return t.position[e]=o[e]}))}))}}}))}},emitParticle:function(t,e){if(e&&t.graphData.links.includes(e)){if(!e.__singleHopPhotonsObj){var n=new y_.Group;n.__linkThreeObjType="singleHopPhotons",e.__singleHopPhotonsObj=n,t.graphScene.add(n)}var r=Jm(t.linkDirectionalParticleWidth),i=Math.ceil(10*r(e))/10/2,o=t.linkDirectionalParticleResolution,s=new y_.SphereGeometry(i,o,o),a=Jm(t.linkColor),c=Jm(t.linkDirectionalParticleColor),l=c(e)||a(e)||"#f0f0f0",u=new y_.Color(p_(l)),h=3*t.linkOpacity,d=new y_.MeshLambertMaterial({color:u,transparent:!0,opacity:h});e.__singleHopPhotonsObj.add(new y_.Mesh(s,d))}return this},getGraphBbox:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};if(!t.initialised)return null;var n=function t(n){var r=[];if(n.geometry){n.geometry.computeBoundingBox();var i=new y_.Box3;i.copy(n.geometry.boundingBox).applyMatrix4(n.matrixWorld),r.push(i)}return r.concat.apply(r,Qv((n.children||[]).filter((function(t){return!t.hasOwnProperty("__graphObjType")||"node"===t.__graphObjType&&e(t.__data)})).map(t)))}(t.graphScene);return n.length?Object.assign.apply(Object,Qv(["x","y","z"].map((function(t){return jv({},t,[Zm(n,(function(e){return e.min[t]})),Qm(n,(function(e){return e.max[t]}))])})))):null}},stateInit:function(){return{d3ForceLayout:bf().force("link",Mf()).force("charge",Fp()).force("center",Bp()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(t,e){e.graphScene=t},update:function(t,e){var n=function(t){return t.some((function(t){return e.hasOwnProperty(t)}))};if(t.engineRunning=!1,t.onUpdate(),null!==t.nodeAutoColorBy&&n(["nodeAutoColorBy","graphData","nodeColor"])&&v_(t.graphData.nodes,Jm(t.nodeAutoColorBy),t.nodeColor),null!==t.linkAutoColorBy&&n(["linkAutoColorBy","graphData","linkColor"])&&v_(t.graphData.links,Jm(t.linkAutoColorBy),t.linkColor),t._flushObjects||n(["graphData","nodeThreeObject","nodeThreeObjectExtend","nodeVal","nodeColor","nodeVisibility","nodeRelSize","nodeResolution","nodeOpacity"])){var r=Jm(t.nodeThreeObject),i=Jm(t.nodeThreeObjectExtend),o=Jm(t.nodeVal),s=Jm(t.nodeColor),a=Jm(t.nodeVisibility),c={},l={};f_(t.graphData.nodes.filter(a),t.graphScene,{purge:t._flushObjects||n(["nodeThreeObject","nodeThreeObjectExtend"]),objFilter:function(t){return"node"===t.__graphObjType},createObj:function(e){var n,o=r(e),s=i(e);return o&&t.nodeThreeObject===o&&(o=o.clone()),o&&!s?n=o:(n=new y_.Mesh,n.__graphDefaultObj=!0,o&&s&&n.add(o)),n.__graphObjType="node",n},updateObj:function(e,n){if(e.__graphDefaultObj){var r=o(n)||1,i=Math.cbrt(r)*t.nodeRelSize,a=t.nodeResolution;e.geometry.type.match(/^Sphere(Buffer)?Geometry$/)&&e.geometry.parameters.radius===i&&e.geometry.parameters.widthSegments===a||(c.hasOwnProperty(r)||(c[r]=new y_.SphereGeometry(i,a,a)),e.geometry.dispose(),e.geometry=c[r]);var u=s(n),h=new y_.Color(p_(u||"#ffffaa")),d=t.nodeOpacity*m_(u);"MeshLambertMaterial"===e.material.type&&e.material.color.equals(h)&&e.material.opacity===d||(l.hasOwnProperty(u)||(l[u]=new y_.MeshLambertMaterial({color:h,transparent:!0,opacity:d})),e.material.dispose(),e.material=l[u])}}})}if(t._flushObjects||n(["graphData","linkThreeObject","linkThreeObjectExtend","linkMaterial","linkColor","linkWidth","linkVisibility","linkResolution","linkOpacity","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution"])){var u=Jm(t.linkThreeObject),h=Jm(t.linkThreeObjectExtend),d=Jm(t.linkMaterial),f=Jm(t.linkVisibility),p=Jm(t.linkColor),m=Jm(t.linkWidth),g={},v={},_={},y=t.graphData.links.filter(f);if(f_(y,t.graphScene,{objBindAttr:"__lineObj",purge:t._flushObjects||n(["linkThreeObject","linkThreeObjectExtend","linkWidth"]),objFilter:function(t){return"link"===t.__graphObjType},exitObj:function(t){var e=t.__data&&t.__data.__singleHopPhotonsObj;e&&(e.parent.remove(e),h_(e),delete t.__data.__singleHopPhotonsObj)},createObj:function(e){var n,r,i=u(e),o=h(e);if(i&&t.linkThreeObject===i&&(i=i.clone()),!i||o){var s=!!m(e);if(s)n=new y_.Mesh;else{var a=new y_.BufferGeometry;a[x_]("position",new y_.BufferAttribute(new Float32Array(6),3)),n=new y_.Line(a)}}return i?o?(r=new y_.Group,r.__graphDefaultObj=!0,r.add(n),r.add(i)):r=i:(r=n,r.__graphDefaultObj=!0),r.renderOrder=10,r.__graphObjType="link",r},updateObj:function(e,n){if(e.__graphDefaultObj){var r=e.children.length?e.children[0]:e,i=Math.ceil(10*m(n))/10,o=!!i;if(o){var s=i/2,a=t.linkResolution;if(!r.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)||r.geometry.parameters.radiusTop!==s||r.geometry.parameters.radialSegments!==a){if(!g.hasOwnProperty(i)){var c=new y_.CylinderGeometry(s,s,1,a,1,!1);c[E_]((new y_.Matrix4).makeTranslation(0,.5,0)),c[E_]((new y_.Matrix4).makeRotationX(Math.PI/2)),g[i]=c}r.geometry.dispose(),r.geometry=g[i]}}var l=d(n);if(l)r.material=l;else{var u=p(n),h=new y_.Color(p_(u||"#f0f0f0")),f=t.linkOpacity*m_(u),y=o?"MeshLambertMaterial":"LineBasicMaterial";if(r.material.type!==y||!r.material.color.equals(h)||r.material.opacity!==f){var b=o?v:_;b.hasOwnProperty(u)||(b[u]=new y_[y]({color:h,transparent:f<1,opacity:f,depthWrite:f>=1})),r.material.dispose(),r.material=b[u]}}}}}),t.linkDirectionalArrowLength||e.hasOwnProperty("linkDirectionalArrowLength")){var b=Jm(t.linkDirectionalArrowLength),w=Jm(t.linkDirectionalArrowColor);f_(y.filter(b),t.graphScene,{objBindAttr:"__arrowObj",objFilter:function(t){return"arrow"===t.__linkThreeObjType},createObj:function(){var t=new y_.Mesh(void 0,new y_.MeshLambertMaterial({transparent:!0}));return t.__linkThreeObjType="arrow",t},updateObj:function(e,n){var r=b(n),i=t.linkDirectionalArrowResolution;if(!e.geometry.type.match(/^Cone(Buffer)?Geometry$/)||e.geometry.parameters.height!==r||e.geometry.parameters.radialSegments!==i){var o=new y_.ConeGeometry(.25*r,r,i);o.translate(0,r/2,0),o.rotateX(Math.PI/2),e.geometry.dispose(),e.geometry=o}var s=w(n)||p(n)||"#f0f0f0";e.material.color=new y_.Color(p_(s)),e.material.opacity=3*t.linkOpacity*m_(s)}})}if(t.linkDirectionalParticles||e.hasOwnProperty("linkDirectionalParticles")){var x=Jm(t.linkDirectionalParticles),E=Jm(t.linkDirectionalParticleWidth),S=Jm(t.linkDirectionalParticleColor),M={},T={};f_(y.filter(x),t.graphScene,{objBindAttr:"__photonsObj",objFilter:function(t){return"photons"===t.__linkThreeObjType},createObj:function(){var t=new y_.Group;return t.__linkThreeObjType="photons",t},updateObj:function(e,n){var r,i=Math.round(Math.abs(x(n))),o=!!e.children.length&&e.children[0],s=Math.ceil(10*E(n))/10/2,a=t.linkDirectionalParticleResolution;o&&o.geometry.parameters.radius===s&&o.geometry.parameters.widthSegments===a?r=o.geometry:(T.hasOwnProperty(s)||(T[s]=new y_.SphereGeometry(s,a,a)),r=T[s],o&&o.geometry.dispose());var c,l=S(n)||p(n)||"#f0f0f0",u=new y_.Color(p_(l)),h=3*t.linkOpacity;o&&o.material.color.equals(u)&&o.material.opacity===h?c=o.material:(M.hasOwnProperty(l)||(M[l]=new y_.MeshLambertMaterial({color:u,transparent:!0,opacity:h})),c=M[l],o&&o.material.dispose()),f_(Qv(new Array(i)).map((function(t,e){return{idx:e}})),e,{idAccessor:function(t){return t.idx},createObj:function(){return new y_.Mesh(r,c)},updateObj:function(t){t.geometry=r,t.material=c}})}})}}if(t._flushObjects=!1,n(["graphData","nodeId","linkSource","linkTarget","numDimensions","forceEngine","dagMode","dagNodeFilter","dagLevelDistance"])){t.engineRunning=!1,t.graphData.links.forEach((function(e){e.source=e[t.linkSource],e.target=e[t.linkTarget]}));var A,C="ngraph"!==t.forceEngine;if(C){(A=t.d3ForceLayout).stop().alpha(1).numDimensions(t.numDimensions).nodes(t.graphData.nodes);var R=t.d3ForceLayout.force("link");R&&R.id((function(e){return e[t.nodeId]})).links(t.graphData.links);var P=t.dagMode&&__(t.graphData,(function(e){return e[t.nodeId]}),{nodeFilter:t.dagNodeFilter,onLoopError:t.onDagError||void 0}),O=Math.max.apply(Math,Qv(Object.values(P||[]))),L=t.dagLevelDistance||t.graphData.nodes.length/(O||1)*w_*(-1!==["radialin","radialout"].indexOf(t.dagMode)?.7:1);if(t.dagMode){var k=function(e,n){return function(r){return e?(P[r[t.nodeId]]-O/2)*L*(n?-1:1):void 0}},I=k(-1!==["lr","rl"].indexOf(t.dagMode),"rl"===t.dagMode),D=k(-1!==["td","bu"].indexOf(t.dagMode),"td"===t.dagMode),N=k(-1!==["zin","zout"].indexOf(t.dagMode),"zout"===t.dagMode);t.graphData.nodes.filter(t.dagNodeFilter).forEach((function(t){t.fx=I(t),t.fy=D(t),t.fz=N(t)}))}t.d3ForceLayout.force("dagRadial",-1!==["radialin","radialout"].indexOf(t.dagMode)?zp((function(e){var n=P[e[t.nodeId]]||-1;return("radialin"===t.dagMode?O-n:n)*L})).strength((function(e){return t.dagNodeFilter(e)?1:0})):null)}else{var U=b_.graph();t.graphData.nodes.forEach((function(e){U.addNode(e[t.nodeId])})),t.graphData.links.forEach((function(t){U.addLink(t.source,t.target)})),A=b_.forcelayout(U,Nv({dimensions:t.numDimensions},t.ngraphPhysics)),A.graph=U}for(var F=0;F<t.warmupTicks&&!(C&&t.d3AlphaMin>0&&t.d3ForceLayout.alpha()<t.d3AlphaMin);F++)A[C?"tick":"step"]();t.layout=A,this.resetCountdown()}t.engineRunning=!0,t.onFinishUpdate()}});function M_(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e){Hv(i,e);var r=Jv(i);function i(){var e;Fv(this,i);for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return e=r.call.apply(r,[this].concat(s)),e.__kapsuleInstance=t().apply(void 0,[].concat(Qv(n?[$v(e)]:[]),s)),e}return zv(i)}(e);return Object.keys(t()).forEach((function(t){return r.prototype[t]=function(){var e,n=(e=this.__kapsuleInstance)[t].apply(e,arguments);return n===this.__kapsuleInstance?this:n}})),r}var T_=window.THREE?window.THREE:{Group:Fu},A_=M_(S_,T_.Group,!0);const C_={type:"change"},R_={type:"start"},P_={type:"end"};class O_ extends Ge{constructor(t,e){super();const n=this,r={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=t,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:i.ROTATE,MIDDLE:i.DOLLY,RIGHT:i.PAN},this.target=new Xn;const o=1e-6,s=new Xn;let a=1,c=r.NONE,l=r.NONE,u=0,h=0,d=0;const f=new Xn,p=new yn,m=new yn,g=new Xn,v=new yn,_=new yn,y=new yn,b=new yn,w=[],x={};this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,this.handleResize=function(){const t=n.domElement.getBoundingClientRect(),e=n.domElement.ownerDocument.documentElement;n.screen.left=t.left+window.pageXOffset-e.clientLeft,n.screen.top=t.top+window.pageYOffset-e.clientTop,n.screen.width=t.width,n.screen.height=t.height};const E=function(){const t=new yn;return function(e,r){return t.set((e-n.screen.left)/n.screen.width,(r-n.screen.top)/n.screen.height),t}}(),S=function(){const t=new yn;return function(e,r){return t.set((e-.5*n.screen.width-n.screen.left)/(.5*n.screen.width),(n.screen.height+2*(n.screen.top-r))/n.screen.width),t}}();function M(t){!1!==n.enabled&&(0===w.length&&(n.domElement.setPointerCapture(t.pointerId),n.domElement.addEventListener("pointermove",T),n.domElement.addEventListener("pointerup",A)),B(t),"touch"===t.pointerType?D(t):O(t))}function T(t){!1!==n.enabled&&("touch"===t.pointerType?N(t):L(t))}function A(t){!1!==n.enabled&&("touch"===t.pointerType?U(t):k(),z(t),0===w.length&&(n.domElement.releasePointerCapture(t.pointerId),n.domElement.removeEventListener("pointermove",T),n.domElement.removeEventListener("pointerup",A)))}function C(t){z(t)}function R(t){!1!==n.enabled&&(window.removeEventListener("keydown",R),l===r.NONE&&(t.code!==n.keys[r.ROTATE]||n.noRotate?t.code!==n.keys[r.ZOOM]||n.noZoom?t.code!==n.keys[r.PAN]||n.noPan||(l=r.PAN):l=r.ZOOM:l=r.ROTATE))}function P(){!1!==n.enabled&&(l=r.NONE,window.addEventListener("keydown",R))}function O(t){if(c===r.NONE)switch(t.button){case n.mouseButtons.LEFT:c=r.ROTATE;break;case n.mouseButtons.MIDDLE:c=r.ZOOM;break;case n.mouseButtons.RIGHT:c=r.PAN;break}const e=l!==r.NONE?l:c;e!==r.ROTATE||n.noRotate?e!==r.ZOOM||n.noZoom?e!==r.PAN||n.noPan||(y.copy(E(t.pageX,t.pageY)),b.copy(y)):(v.copy(E(t.pageX,t.pageY)),_.copy(v)):(m.copy(S(t.pageX,t.pageY)),p.copy(m)),n.dispatchEvent(R_)}function L(t){const e=l!==r.NONE?l:c;e!==r.ROTATE||n.noRotate?e!==r.ZOOM||n.noZoom?e!==r.PAN||n.noPan||b.copy(E(t.pageX,t.pageY)):_.copy(E(t.pageX,t.pageY)):(p.copy(m),m.copy(S(t.pageX,t.pageY)))}function k(){c=r.NONE,n.dispatchEvent(P_)}function I(t){if(!1!==n.enabled&&!0!==n.noZoom){switch(t.preventDefault(),t.deltaMode){case 2:v.y-=.025*t.deltaY;break;case 1:v.y-=.01*t.deltaY;break;default:v.y-=25e-5*t.deltaY;break}n.dispatchEvent(R_),n.dispatchEvent(P_)}}function D(t){switch(j(t),w.length){case 1:c=r.TOUCH_ROTATE,m.copy(S(w[0].pageX,w[0].pageY)),p.copy(m);break;default:c=r.TOUCH_ZOOM_PAN;const t=w[0].pageX-w[1].pageX,e=w[0].pageY-w[1].pageY;h=u=Math.sqrt(t*t+e*e);const n=(w[0].pageX+w[1].pageX)/2,i=(w[0].pageY+w[1].pageY)/2;y.copy(E(n,i)),b.copy(y);break}n.dispatchEvent(R_)}function N(t){switch(j(t),w.length){case 1:p.copy(m),m.copy(S(t.pageX,t.pageY));break;default:const e=H(t),n=t.pageX-e.x,r=t.pageY-e.y;h=Math.sqrt(n*n+r*r);const i=(t.pageX+e.x)/2,o=(t.pageY+e.y)/2;b.copy(E(i,o));break}}function U(t){switch(w.length){case 0:c=r.NONE;break;case 1:c=r.TOUCH_ROTATE,m.copy(S(t.pageX,t.pageY)),p.copy(m);break;case 2:c=r.TOUCH_ZOOM_PAN;for(let e=0;e<w.length;e++)if(w[e].pointerId!==t.pointerId){const t=x[w[e].pointerId];m.copy(S(t.x,t.y)),p.copy(m);break}break}n.dispatchEvent(P_)}function F(t){!1!==n.enabled&&t.preventDefault()}function B(t){w.push(t)}function z(t){delete x[t.pointerId];for(let e=0;e<w.length;e++)if(w[e].pointerId==t.pointerId)return void w.splice(e,1)}function j(t){let e=x[t.pointerId];void 0===e&&(e=new yn,x[t.pointerId]=e),e.set(t.pageX,t.pageY)}function H(t){const e=t.pointerId===w[0].pointerId?w[1]:w[0];return x[e.pointerId]}this.rotateCamera=function(){const t=new Xn,e=new qn,r=new Xn,i=new Xn,o=new Xn,s=new Xn;return function(){s.set(m.x-p.x,m.y-p.y,0);let a=s.length();a?(f.copy(n.object.position).sub(n.target),r.copy(f).normalize(),i.copy(n.object.up).normalize(),o.crossVectors(i,r).normalize(),i.setLength(m.y-p.y),o.setLength(m.x-p.x),s.copy(i.add(o)),t.crossVectors(s,f).normalize(),a*=n.rotateSpeed,e.setFromAxisAngle(t,a),f.applyQuaternion(e),n.object.up.applyQuaternion(e),g.copy(t),d=a):!n.staticMoving&&d&&(d*=Math.sqrt(1-n.dynamicDampingFactor),f.copy(n.object.position).sub(n.target),e.setFromAxisAngle(g,d),f.applyQuaternion(e),n.object.up.applyQuaternion(e)),p.copy(m)}}(),this.zoomCamera=function(){let t;c===r.TOUCH_ZOOM_PAN?(t=u/h,u=h,n.object.isPerspectiveCamera?f.multiplyScalar(t):n.object.isOrthographicCamera?(n.object.zoom=_n.clamp(n.object.zoom/t,n.minZoom,n.maxZoom),a!==n.object.zoom&&n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(t=1+(_.y-v.y)*n.zoomSpeed,1!==t&&t>0&&(n.object.isPerspectiveCamera?f.multiplyScalar(t):n.object.isOrthographicCamera?(n.object.zoom=_n.clamp(n.object.zoom/t,n.minZoom,n.maxZoom),a!==n.object.zoom&&n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),n.staticMoving?v.copy(_):v.y+=(_.y-v.y)*this.dynamicDampingFactor)},this.panCamera=function(){const t=new yn,e=new Xn,r=new Xn;return function(){if(t.copy(b).sub(y),t.lengthSq()){if(n.object.isOrthographicCamera){const e=(n.object.right-n.object.left)/n.object.zoom/n.domElement.clientWidth,r=(n.object.top-n.object.bottom)/n.object.zoom/n.domElement.clientWidth;t.x*=e,t.y*=r}t.multiplyScalar(f.length()*n.panSpeed),r.copy(f).cross(n.object.up).setLength(t.x),r.add(e.copy(n.object.up).setLength(t.y)),n.object.position.add(r),n.target.add(r),n.staticMoving?y.copy(b):y.add(t.subVectors(b,y).multiplyScalar(n.dynamicDampingFactor))}}}(),this.checkDistances=function(){n.noZoom&&n.noPan||(f.lengthSq()>n.maxDistance*n.maxDistance&&(n.object.position.addVectors(n.target,f.setLength(n.maxDistance)),v.copy(_)),f.lengthSq()<n.minDistance*n.minDistance&&(n.object.position.addVectors(n.target,f.setLength(n.minDistance)),v.copy(_)))},this.update=function(){f.subVectors(n.object.position,n.target),n.noRotate||n.rotateCamera(),n.noZoom||n.zoomCamera(),n.noPan||n.panCamera(),n.object.position.addVectors(n.target,f),n.object.isPerspectiveCamera?(n.checkDistances(),n.object.lookAt(n.target),s.distanceToSquared(n.object.position)>o&&(n.dispatchEvent(C_),s.copy(n.object.position))):n.object.isOrthographicCamera?(n.object.lookAt(n.target),(s.distanceToSquared(n.object.position)>o||a!==n.object.zoom)&&(n.dispatchEvent(C_),s.copy(n.object.position),a=n.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){c=r.NONE,l=r.NONE,n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.up.copy(n.up0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),f.subVectors(n.object.position,n.target),n.object.lookAt(n.target),n.dispatchEvent(C_),s.copy(n.object.position),a=n.object.zoom},this.dispose=function(){n.domElement.removeEventListener("contextmenu",F),n.domElement.removeEventListener("pointerdown",M),n.domElement.removeEventListener("pointercancel",C),n.domElement.removeEventListener("wheel",I),n.domElement.removeEventListener("pointermove",T),n.domElement.removeEventListener("pointerup",A),window.removeEventListener("keydown",R),window.removeEventListener("keyup",P)},this.domElement.addEventListener("contextmenu",F),this.domElement.addEventListener("pointerdown",M),this.domElement.addEventListener("pointercancel",C),this.domElement.addEventListener("wheel",I,{passive:!1}),window.addEventListener("keydown",R),window.addEventListener("keyup",P),this.handleResize(),this.update()}}const L_={type:"change"},k_={type:"start"},I_={type:"end"};class D_ extends Ge{constructor(t,e){super(),this.object=t,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Xn,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:i.ROTATE,MIDDLE:i.DOLLY,RIGHT:i.PAN},this.touches={ONE:o.ROTATE,TWO:o.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return c.phi},this.getAzimuthalAngle=function(){return c.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(t){t.addEventListener("keydown",rt),this._domElementKeyEvents=t},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",rt),this._domElementKeyEvents=null},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(L_),n.update(),s=r.NONE},this.update=function(){const e=new Xn,i=(new qn).setFromUnitVectors(t.up,new Xn(0,1,0)),o=i.clone().invert(),f=new Xn,p=new qn,m=new Xn,g=2*Math.PI;return function(){const t=n.object.position;e.copy(t).sub(n.target),e.applyQuaternion(i),c.setFromVector3(e),n.autoRotate&&s===r.NONE&&T(S()),n.enableDamping?(c.theta+=l.theta*n.dampingFactor,c.phi+=l.phi*n.dampingFactor):(c.theta+=l.theta,c.phi+=l.phi);let v=n.minAzimuthAngle,_=n.maxAzimuthAngle;return isFinite(v)&&isFinite(_)&&(v<-Math.PI?v+=g:v>Math.PI&&(v-=g),_<-Math.PI?_+=g:_>Math.PI&&(_-=g),c.theta=v<=_?Math.max(v,Math.min(_,c.theta)):c.theta>(v+_)/2?Math.max(v,c.theta):Math.min(_,c.theta)),c.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,c.phi)),c.makeSafe(),c.radius*=u,c.radius=Math.max(n.minDistance,Math.min(n.maxDistance,c.radius)),!0===n.enableDamping?n.target.addScaledVector(h,n.dampingFactor):n.target.add(h),e.setFromSpherical(c),e.applyQuaternion(o),t.copy(n.target).add(e),n.object.lookAt(n.target),!0===n.enableDamping?(l.theta*=1-n.dampingFactor,l.phi*=1-n.dampingFactor,h.multiplyScalar(1-n.dampingFactor)):(l.set(0,0,0),h.set(0,0,0)),u=1,!!(d||f.distanceToSquared(n.object.position)>a||8*(1-p.dot(n.object.quaternion))>a||m.distanceToSquared(n.target)>0)&&(n.dispatchEvent(L_),f.copy(n.object.position),p.copy(n.object.quaternion),m.copy(n.target),d=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",st),n.domElement.removeEventListener("pointerdown",J),n.domElement.removeEventListener("pointercancel",Q),n.domElement.removeEventListener("wheel",nt),n.domElement.removeEventListener("pointermove",Z),n.domElement.removeEventListener("pointerup",Q),null!==n._domElementKeyEvents&&(n._domElementKeyEvents.removeEventListener("keydown",rt),n._domElementKeyEvents=null)};const n=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=r.NONE;const a=1e-6,c=new Td,l=new Td;let u=1;const h=new Xn;let d=!1;const f=new yn,p=new yn,m=new yn,g=new yn,v=new yn,_=new yn,y=new yn,b=new yn,w=new yn,x=[],E={};function S(){return 2*Math.PI/60/60*n.autoRotateSpeed}function M(){return Math.pow(.95,n.zoomSpeed)}function T(t){l.theta-=t}function A(t){l.phi-=t}const C=function(){const t=new Xn;return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),h.add(t)}}(),R=function(){const t=new Xn;return function(e,r){!0===n.screenSpacePanning?t.setFromMatrixColumn(r,1):(t.setFromMatrixColumn(r,0),t.crossVectors(n.object.up,t)),t.multiplyScalar(e),h.add(t)}}(),P=function(){const t=new Xn;return function(e,r){const i=n.domElement;if(n.object.isPerspectiveCamera){const o=n.object.position;t.copy(o).sub(n.target);let s=t.length();s*=Math.tan(n.object.fov/2*Math.PI/180),C(2*e*s/i.clientHeight,n.object.matrix),R(2*r*s/i.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(C(e*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),R(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function O(t){n.object.isPerspectiveCamera?u/=t:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*t)),n.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function L(t){n.object.isPerspectiveCamera?u*=t:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/t)),n.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function k(t){f.set(t.clientX,t.clientY)}function I(t){y.set(t.clientX,t.clientY)}function D(t){g.set(t.clientX,t.clientY)}function N(t){p.set(t.clientX,t.clientY),m.subVectors(p,f).multiplyScalar(n.rotateSpeed);const e=n.domElement;T(2*Math.PI*m.x/e.clientHeight),A(2*Math.PI*m.y/e.clientHeight),f.copy(p),n.update()}function U(t){b.set(t.clientX,t.clientY),w.subVectors(b,y),w.y>0?O(M()):w.y<0&&L(M()),y.copy(b),n.update()}function F(t){v.set(t.clientX,t.clientY),_.subVectors(v,g).multiplyScalar(n.panSpeed),P(_.x,_.y),g.copy(v),n.update()}function B(t){t.deltaY<0?L(M()):t.deltaY>0&&O(M()),n.update()}function z(t){let e=!1;switch(t.code){case n.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?A(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):P(0,n.keyPanSpeed),e=!0;break;case n.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?A(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):P(0,-n.keyPanSpeed),e=!0;break;case n.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?T(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):P(n.keyPanSpeed,0),e=!0;break;case n.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?T(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):P(-n.keyPanSpeed,0),e=!0;break}e&&(t.preventDefault(),n.update())}function j(){if(1===x.length)f.set(x[0].pageX,x[0].pageY);else{const t=.5*(x[0].pageX+x[1].pageX),e=.5*(x[0].pageY+x[1].pageY);f.set(t,e)}}function H(){if(1===x.length)g.set(x[0].pageX,x[0].pageY);else{const t=.5*(x[0].pageX+x[1].pageX),e=.5*(x[0].pageY+x[1].pageY);g.set(t,e)}}function V(){const t=x[0].pageX-x[1].pageX,e=x[0].pageY-x[1].pageY,n=Math.sqrt(t*t+e*e);y.set(0,n)}function G(){n.enableZoom&&V(),n.enablePan&&H()}function W(){n.enableZoom&&V(),n.enableRotate&&j()}function q(t){if(1==x.length)p.set(t.pageX,t.pageY);else{const e=ut(t),n=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);p.set(n,r)}m.subVectors(p,f).multiplyScalar(n.rotateSpeed);const e=n.domElement;T(2*Math.PI*m.x/e.clientHeight),A(2*Math.PI*m.y/e.clientHeight),f.copy(p)}function X(t){if(1===x.length)v.set(t.pageX,t.pageY);else{const e=ut(t),n=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);v.set(n,r)}_.subVectors(v,g).multiplyScalar(n.panSpeed),P(_.x,_.y),g.copy(v)}function Y(t){const e=ut(t),r=t.pageX-e.x,i=t.pageY-e.y,o=Math.sqrt(r*r+i*i);b.set(0,o),w.set(0,Math.pow(b.y/y.y,n.zoomSpeed)),O(w.y),y.copy(b)}function $(t){n.enableZoom&&Y(t),n.enablePan&&X(t)}function K(t){n.enableZoom&&Y(t),n.enableRotate&&q(t)}function J(t){!1!==n.enabled&&(0===x.length&&(n.domElement.setPointerCapture(t.pointerId),n.domElement.addEventListener("pointermove",Z),n.domElement.addEventListener("pointerup",Q)),at(t),"touch"===t.pointerType?it(t):tt(t))}function Z(t){!1!==n.enabled&&("touch"===t.pointerType?ot(t):et(t))}function Q(t){ct(t),0===x.length&&(n.domElement.releasePointerCapture(t.pointerId),n.domElement.removeEventListener("pointermove",Z),n.domElement.removeEventListener("pointerup",Q)),n.dispatchEvent(I_),s=r.NONE}function tt(t){let e;switch(t.button){case 0:e=n.mouseButtons.LEFT;break;case 1:e=n.mouseButtons.MIDDLE;break;case 2:e=n.mouseButtons.RIGHT;break;default:e=-1}switch(e){case i.DOLLY:if(!1===n.enableZoom)return;I(t),s=r.DOLLY;break;case i.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enablePan)return;D(t),s=r.PAN}else{if(!1===n.enableRotate)return;k(t),s=r.ROTATE}break;case i.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enableRotate)return;k(t),s=r.ROTATE}else{if(!1===n.enablePan)return;D(t),s=r.PAN}break;default:s=r.NONE}s!==r.NONE&&n.dispatchEvent(k_)}function et(t){switch(s){case r.ROTATE:if(!1===n.enableRotate)return;N(t);break;case r.DOLLY:if(!1===n.enableZoom)return;U(t);break;case r.PAN:if(!1===n.enablePan)return;F(t);break}}function nt(t){!1!==n.enabled&&!1!==n.enableZoom&&s===r.NONE&&(t.preventDefault(),n.dispatchEvent(k_),B(t),n.dispatchEvent(I_))}function rt(t){!1!==n.enabled&&!1!==n.enablePan&&z(t)}function it(t){switch(lt(t),x.length){case 1:switch(n.touches.ONE){case o.ROTATE:if(!1===n.enableRotate)return;j(),s=r.TOUCH_ROTATE;break;case o.PAN:if(!1===n.enablePan)return;H(),s=r.TOUCH_PAN;break;default:s=r.NONE}break;case 2:switch(n.touches.TWO){case o.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;G(),s=r.TOUCH_DOLLY_PAN;break;case o.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;W(),s=r.TOUCH_DOLLY_ROTATE;break;default:s=r.NONE}break;default:s=r.NONE}s!==r.NONE&&n.dispatchEvent(k_)}function ot(t){switch(lt(t),s){case r.TOUCH_ROTATE:if(!1===n.enableRotate)return;q(t),n.update();break;case r.TOUCH_PAN:if(!1===n.enablePan)return;X(t),n.update();break;case r.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;$(t),n.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;K(t),n.update();break;default:s=r.NONE}}function st(t){!1!==n.enabled&&t.preventDefault()}function at(t){x.push(t)}function ct(t){delete E[t.pointerId];for(let e=0;e<x.length;e++)if(x[e].pointerId==t.pointerId)return void x.splice(e,1)}function lt(t){let e=E[t.pointerId];void 0===e&&(e=new yn,E[t.pointerId]=e),e.set(t.pageX,t.pageY)}function ut(t){const e=t.pointerId===x[0].pointerId?x[1]:x[0];return E[e.pointerId]}n.domElement.addEventListener("contextmenu",st),n.domElement.addEventListener("pointerdown",J),n.domElement.addEventListener("pointercancel",Q),n.domElement.addEventListener("wheel",nt,{passive:!1}),this.update()}}const N_={type:"change"};class U_ extends Ge{constructor(t,e){super(),this.object=t,this.domElement=e,this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1;const n=this,r=1e-6,i=new qn,o=new Xn;this.tmpQuaternion=new qn,this.status=0,this.moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this.moveVector=new Xn(0,0,0),this.rotationVector=new Xn(0,0,0),this.keydown=function(t){if(!t.altKey){switch(t.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this.moveState.forward=1;break;case"KeyS":this.moveState.back=1;break;case"KeyA":this.moveState.left=1;break;case"KeyD":this.moveState.right=1;break;case"KeyR":this.moveState.up=1;break;case"KeyF":this.moveState.down=1;break;case"ArrowUp":this.moveState.pitchUp=1;break;case"ArrowDown":this.moveState.pitchDown=1;break;case"ArrowLeft":this.moveState.yawLeft=1;break;case"ArrowRight":this.moveState.yawRight=1;break;case"KeyQ":this.moveState.rollLeft=1;break;case"KeyE":this.moveState.rollRight=1;break}this.updateMovementVector(),this.updateRotationVector()}},this.keyup=function(t){switch(t.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this.moveState.forward=0;break;case"KeyS":this.moveState.back=0;break;case"KeyA":this.moveState.left=0;break;case"KeyD":this.moveState.right=0;break;case"KeyR":this.moveState.up=0;break;case"KeyF":this.moveState.down=0;break;case"ArrowUp":this.moveState.pitchUp=0;break;case"ArrowDown":this.moveState.pitchDown=0;break;case"ArrowLeft":this.moveState.yawLeft=0;break;case"ArrowRight":this.moveState.yawRight=0;break;case"KeyQ":this.moveState.rollLeft=0;break;case"KeyE":this.moveState.rollRight=0;break}this.updateMovementVector(),this.updateRotationVector()},this.pointerdown=function(t){if(this.dragToLook)this.status++;else{switch(t.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1;break}this.updateMovementVector()}},this.pointermove=function(t){if(!this.dragToLook||this.status>0){const e=this.getContainerDimensions(),n=e.size[0]/2,r=e.size[1]/2;this.moveState.yawLeft=-(t.pageX-e.offset[0]-n)/n,this.moveState.pitchDown=(t.pageY-e.offset[1]-r)/r,this.updateRotationVector()}},this.pointerup=function(t){if(this.dragToLook)this.status--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(t.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0;break}this.updateMovementVector()}this.updateRotationVector()},this.update=function(t){const e=t*n.movementSpeed,s=t*n.rollSpeed;n.object.translateX(n.moveVector.x*e),n.object.translateY(n.moveVector.y*e),n.object.translateZ(n.moveVector.z*e),n.tmpQuaternion.set(n.rotationVector.x*s,n.rotationVector.y*s,n.rotationVector.z*s,1).normalize(),n.object.quaternion.multiply(n.tmpQuaternion),(o.distanceToSquared(n.object.position)>r||8*(1-i.dot(n.object.quaternion))>r)&&(n.dispatchEvent(N_),i.copy(n.object.quaternion),o.copy(n.object.position))},this.updateMovementVector=function(){const t=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-t+this.moveState.back},this.updateRotationVector=function(){this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft},this.getContainerDimensions=function(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}},this.dispose=function(){this.domElement.removeEventListener("contextmenu",F_),this.domElement.removeEventListener("pointerdown",a),this.domElement.removeEventListener("pointermove",s),this.domElement.removeEventListener("pointerup",c),window.removeEventListener("keydown",l),window.removeEventListener("keyup",u)};const s=this.pointermove.bind(this),a=this.pointerdown.bind(this),c=this.pointerup.bind(this),l=this.keydown.bind(this),u=this.keyup.bind(this);this.domElement.addEventListener("contextmenu",F_),this.domElement.addEventListener("pointerdown",a),this.domElement.addEventListener("pointermove",s),this.domElement.addEventListener("pointerup",c),window.addEventListener("keydown",l),window.addEventListener("keyup",u),this.updateMovementVector(),this.updateRotationVector()}}function F_(t){t.preventDefault()}const B_={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor.a *= opacity;\n\n\n\t\t}"};class z_{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const j_=new cc(-1,1,1,-1,0,1),H_=new Ri;H_.setAttribute("position",new wi([-1,3,0,-1,-1,0,3,-1,0],3)),H_.setAttribute("uv",new wi([0,2,0,0,2,0],2));class V_{constructor(t){this._mesh=new Xi(H_,t)}dispose(){this._mesh.geometry.dispose()}render(t){t.render(this._mesh,j_)}get material(){return this._mesh.material}set material(t){this._mesh.material=t}}class G_ extends z_{constructor(t,e){super(),this.textureID=void 0!==e?e:"tDiffuse",t instanceof io?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=eo.clone(t.uniforms),this.material=new io({name:void 0!==t.name?t.name:"unspecified",defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new V_(this.material)}render(t,e,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class W_ extends z_{constructor(t,e){super(),this.scene=t,this.camera=e,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(t,e,n){const r=t.getContext(),i=t.state;let o,s;i.buffers.color.setMask(!1),i.buffers.depth.setMask(!1),i.buffers.color.setLocked(!0),i.buffers.depth.setLocked(!0),this.inverse?(o=0,s=1):(o=1,s=0),i.buffers.stencil.setTest(!0),i.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),i.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),i.buffers.stencil.setClear(s),i.buffers.stencil.setLocked(!0),t.setRenderTarget(n),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(e),this.clear&&t.clear(),t.render(this.scene,this.camera),i.buffers.color.setLocked(!1),i.buffers.depth.setLocked(!1),i.buffers.stencil.setLocked(!1),i.buffers.stencil.setFunc(r.EQUAL,1,4294967295),i.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),i.buffers.stencil.setLocked(!0)}}class q_ extends z_{constructor(){super(),this.needsSwap=!1}render(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}}class X_{constructor(t,e){if(this.renderer=t,this._pixelRatio=t.getPixelRatio(),void 0===e){const n=t.getSize(new yn);this._width=n.width,this._height=n.height,e=new Vn(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:xt}),e.texture.name="EffectComposer.rt1"}else this._width=e.width,this._height=e.height;this.renderTarget1=e,this.renderTarget2=e.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new G_(B_),this.clock=new ld}swapBuffers(){const t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}addPass(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(t,e){this.passes.splice(e,0,t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(t){const e=this.passes.indexOf(t);-1!==e&&this.passes.splice(e,1)}isLastEnabledPass(t){for(let e=t+1;e<this.passes.length;e++)if(this.passes[e].enabled)return!1;return!0}render(t){void 0===t&&(t=this.clock.getDelta());const e=this.renderer.getRenderTarget();let n=!1;for(let r=0,i=this.passes.length;r<i;r++){const e=this.passes[r];if(!1!==e.enabled){if(e.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),e.render(this.renderer,this.writeBuffer,this.readBuffer,t,n),e.needsSwap){if(n){const e=this.renderer.getContext(),n=this.renderer.state.buffers.stencil;n.setFunc(e.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),n.setFunc(e.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==W_&&(e instanceof W_?n=!0:e instanceof q_&&(n=!1))}}this.renderer.setRenderTarget(e)}reset(t){if(void 0===t){const e=this.renderer.getSize(new yn);this._pixelRatio=this.renderer.getPixelRatio(),this._width=e.width,this._height=e.height,t=this.renderTarget1.clone(),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(t,e){this._width=t,this._height=e;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let i=0;i<this.passes.length;i++)this.passes[i].setSize(n,r)}setPixelRatio(t){this._pixelRatio=t,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class Y_ extends z_{constructor(t,e,n,r,i){super(),this.scene=t,this.camera=e,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=void 0!==i?i:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new fi}render(t,e,n){const r=t.autoClear;let i,o;t.autoClear=!1,void 0!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(t.getClearColor(this._oldClearColor),i=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:n),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.clearColor&&t.setClearColor(this._oldClearColor,i),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=o),t.autoClear=r}}function $_(){return $_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$_.apply(this,arguments)}function K_(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function J_(t,e){return J_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},J_(t,e)}function Z_(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,J_(t,e)}function Q_(t){return Q_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Q_(t)}function ty(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function ey(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function ny(t,e,n){return ny=ey()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var i=Function.bind.apply(t,r),o=new i;return n&&J_(o,n.prototype),o},ny.apply(null,arguments)}function ry(t){var e="function"===typeof Map?new Map:void 0;return ry=function(t){if(null===t||!ty(t))return t;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return ny(t,arguments,Q_(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),J_(n,t)},ry(t)}var iy=function(t){function e(e){var n;return n=t.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+e+" for more information.")||this,K_(n)}return Z_(e,t),e}(ry(Error));function oy(t){return Math.round(255*t)}function sy(t,e,n){return oy(t)+","+oy(e)+","+oy(n)}function ay(t,e,n,r){if(void 0===r&&(r=sy),0===e)return r(n,n,n);var i=(t%360+360)%360/60,o=(1-Math.abs(2*n-1))*e,s=o*(1-Math.abs(i%2-1)),a=0,c=0,l=0;i>=0&&i<1?(a=o,c=s):i>=1&&i<2?(a=s,c=o):i>=2&&i<3?(c=o,l=s):i>=3&&i<4?(c=s,l=o):i>=4&&i<5?(a=s,l=o):i>=5&&i<6&&(a=o,l=s);var u=n-o/2,h=a+u,d=c+u,f=l+u;return r(h,d,f)}var cy={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};function ly(t){if("string"!==typeof t)return t;var e=t.toLowerCase();return cy[e]?"#"+cy[e]:t}var uy=/^#[a-fA-F0-9]{6}$/,hy=/^#[a-fA-F0-9]{8}$/,dy=/^#[a-fA-F0-9]{3}$/,fy=/^#[a-fA-F0-9]{4}$/,py=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,my=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,gy=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,vy=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i;function _y(t){if("string"!==typeof t)throw new iy(3);var e=ly(t);if(e.match(uy))return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16)};if(e.match(hy)){var n=parseFloat((parseInt(""+e[7]+e[8],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16),alpha:n}}if(e.match(dy))return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16)};if(e.match(fy)){var r=parseFloat((parseInt(""+e[4]+e[4],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16),alpha:r}}var i=py.exec(e);if(i)return{red:parseInt(""+i[1],10),green:parseInt(""+i[2],10),blue:parseInt(""+i[3],10)};var o=my.exec(e.substring(0,50));if(o)return{red:parseInt(""+o[1],10),green:parseInt(""+o[2],10),blue:parseInt(""+o[3],10),alpha:parseFloat(""+o[4])>1?parseFloat(""+o[4])/100:parseFloat(""+o[4])};var s=gy.exec(e);if(s){var a=parseInt(""+s[1],10),c=parseInt(""+s[2],10)/100,l=parseInt(""+s[3],10)/100,u="rgb("+ay(a,c,l)+")",h=py.exec(u);if(!h)throw new iy(4,e,u);return{red:parseInt(""+h[1],10),green:parseInt(""+h[2],10),blue:parseInt(""+h[3],10)}}var d=vy.exec(e.substring(0,50));if(d){var f=parseInt(""+d[1],10),p=parseInt(""+d[2],10)/100,m=parseInt(""+d[3],10)/100,g="rgb("+ay(f,p,m)+")",v=py.exec(g);if(!v)throw new iy(4,e,g);return{red:parseInt(""+v[1],10),green:parseInt(""+v[2],10),blue:parseInt(""+v[3],10),alpha:parseFloat(""+d[4])>1?parseFloat(""+d[4])/100:parseFloat(""+d[4])}}throw new iy(5)}var yy=function(t){return 7===t.length&&t[1]===t[2]&&t[3]===t[4]&&t[5]===t[6]?"#"+t[1]+t[3]+t[5]:t},by=yy;function wy(t){var e=t.toString(16);return 1===e.length?"0"+e:e}function xy(t,e,n){if("number"===typeof t&&"number"===typeof e&&"number"===typeof n)return by("#"+wy(t)+wy(e)+wy(n));if("object"===typeof t&&void 0===e&&void 0===n)return by("#"+wy(t.red)+wy(t.green)+wy(t.blue));throw new iy(6)}function Ey(t,e,n,r){if("string"===typeof t&&"number"===typeof e){var i=_y(t);return"rgba("+i.red+","+i.green+","+i.blue+","+e+")"}if("number"===typeof t&&"number"===typeof e&&"number"===typeof n&&"number"===typeof r)return r>=1?xy(t,e,n):"rgba("+t+","+e+","+n+","+r+")";if("object"===typeof t&&void 0===e&&void 0===n&&void 0===r)return t.alpha>=1?xy(t.red,t.green,t.blue):"rgba("+t.red+","+t.green+","+t.blue+","+t.alpha+")";throw new iy(7)}function Sy(t,e,n){return function(){var r=n.concat(Array.prototype.slice.call(arguments));return r.length>=e?t.apply(this,r):Sy(t,e,r)}}function My(t){return Sy(t,t.length,[])}function Ty(t,e,n){return Math.max(t,Math.min(e,n))}function Ay(t,e){if("transparent"===e)return e;var n=_y(e),r="number"===typeof n.alpha?n.alpha:1,i=$_({},n,{alpha:Ty(0,1,(100*r+100*parseFloat(t))/100)});return Ey(i)}var Cy=My(Ay),Ry=Cy;var Py=Object.freeze({Linear:Object.freeze({None:function(t){return t},In:function(t){return this.None(t)},Out:function(t){return this.None(t)},InOut:function(t){return this.None(t)}}),Quadratic:Object.freeze({In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}}),Cubic:Object.freeze({In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}}),Quartic:Object.freeze({In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}}),Quintic:Object.freeze({In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}}),Sinusoidal:Object.freeze({In:function(t){return 1-Math.sin((1-t)*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.sin(Math.PI*(.5-t)))}}),Exponential:Object.freeze({In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}}),Circular:Object.freeze({In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}}),Elastic:Object.freeze({In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1)}}),Back:Object.freeze({In:function(t){var e=1.70158;return 1===t?1:t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return 0===t?0:--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}}),Bounce:Object.freeze({In:function(t){return 1-Py.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*Py.Bounce.In(2*t):.5*Py.Bounce.Out(2*t-1)+.5}}),generatePow:function(t){return void 0===t&&(t=4),t=t<Number.EPSILON?Number.EPSILON:t,t=t>1e4?1e4:t,{In:function(e){return Math.pow(e,t)},Out:function(e){return 1-Math.pow(1-e,t)},InOut:function(e){return e<.5?Math.pow(2*e,t)/2:(1-Math.pow(2-2*e,t))/2+.5}}}}),Oy=function(){return performance.now()},Ly=function(){function t(){this._tweens={},this._tweensAddedDuringUpdate={}}return t.prototype.getAll=function(){var t=this;return Object.keys(this._tweens).map((function(e){return t._tweens[e]}))},t.prototype.removeAll=function(){this._tweens={}},t.prototype.add=function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},t.prototype.remove=function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},t.prototype.update=function(t,e){void 0===t&&(t=Oy()),void 0===e&&(e=!1);var n=Object.keys(this._tweens);if(0===n.length)return!1;while(n.length>0){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var i=this._tweens[n[r]],o=!e;i&&!1===i.update(t,o)&&!e&&delete this._tweens[n[r]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},t}(),ky={Linear:function(t,e){var n=t.length-1,r=n*e,i=Math.floor(r),o=ky.Utils.Linear;return e<0?o(t[0],t[1],r):e>1?o(t[n],t[n-1],n-r):o(t[i],t[i+1>n?n:i+1],r-i)},Bezier:function(t,e){for(var n=0,r=t.length-1,i=Math.pow,o=ky.Utils.Bernstein,s=0;s<=r;s++)n+=i(1-e,r-s)*i(e,s)*t[s]*o(r,s);return n},CatmullRom:function(t,e){var n=t.length-1,r=n*e,i=Math.floor(r),o=ky.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(i=Math.floor(r=n*(1+e))),o(t[(i-1+n)%n],t[i],t[(i+1)%n],t[(i+2)%n],r-i)):e<0?t[0]-(o(t[0],t[0],t[1],t[1],-r)-t[0]):e>1?t[n]-(o(t[n],t[n],t[n-1],t[n-1],r-n)-t[n]):o(t[i?i-1:0],t[i],t[n<i+1?n:i+1],t[n<i+2?n:i+2],r-i)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=ky.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var n=1;if(t[e])return t[e];for(var r=e;r>1;r--)n*=r;return t[e]=n,n}}(),CatmullRom:function(t,e,n,r,i){var o=.5*(n-t),s=.5*(r-e),a=i*i,c=i*a;return(2*e-2*n+o+s)*c+(-3*e+3*n-2*o-s)*a+o*i+e}}},Iy=function(){function t(){}return t.nextId=function(){return t._nextId++},t._nextId=0,t}(),Dy=new Ly,Ny=function(){function t(t,e){void 0===e&&(e=Dy),this._object=t,this._group=e,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Py.Linear.None,this._interpolationFunction=ky.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=Iy.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return t.prototype.getId=function(){return this._id},t.prototype.isPlaying=function(){return this._isPlaying},t.prototype.isPaused=function(){return this._isPaused},t.prototype.to=function(t,e){if(void 0===e&&(e=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=t,this._propertiesAreSetUp=!1,this._duration=e,this},t.prototype.duration=function(t){return void 0===t&&(t=1e3),this._duration=t,this},t.prototype.dynamic=function(t){return void 0===t&&(t=!1),this._isDynamic=t,this},t.prototype.start=function(t,e){if(void 0===t&&(t=Oy()),void 0===e&&(e=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var n in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=t,this._startTime+=this._delayTime,!this._propertiesAreSetUp||e){if(this._propertiesAreSetUp=!0,!this._isDynamic){var r={};for(var i in this._valuesEnd)r[i]=this._valuesEnd[i];this._valuesEnd=r}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,e)}return this},t.prototype.startFromCurrentValues=function(t){return this.start(t,!0)},t.prototype._setupProperties=function(t,e,n,r,i){for(var o in n){var s=t[o],a=Array.isArray(s),c=a?"array":typeof s,l=!a&&Array.isArray(n[o]);if("undefined"!==c&&"function"!==c){if(l){var u=n[o];if(0===u.length)continue;for(var h=[s],d=0,f=u.length;d<f;d+=1){var p=this._handleRelativeValue(s,u[d]);if(isNaN(p)){l=!1,console.warn("Found invalid interpolation list. Skipping.");break}h.push(p)}l&&(n[o]=h)}if("object"!==c&&!a||!s||l)("undefined"===typeof e[o]||i)&&(e[o]=s),a||(e[o]*=1),r[o]=l?n[o].slice().reverse():e[o]||0;else{e[o]=a?[]:{};var m=s;for(var g in m)e[o][g]=m[g];r[o]=a?[]:{};u=n[o];if(!this._isDynamic){var v={};for(var g in u)v[g]=u[g];n[o]=u=v}this._setupProperties(m,e[o],u,r[o],i)}}}},t.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},t.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},t.prototype.pause=function(t){return void 0===t&&(t=Oy()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=t,this._group&&this._group.remove(this)),this},t.prototype.resume=function(t){return void 0===t&&(t=Oy()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=t-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},t.prototype.stopChainedTweens=function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop();return this},t.prototype.group=function(t){return void 0===t&&(t=Dy),this._group=t,this},t.prototype.delay=function(t){return void 0===t&&(t=0),this._delayTime=t,this},t.prototype.repeat=function(t){return void 0===t&&(t=0),this._initialRepeat=t,this._repeat=t,this},t.prototype.repeatDelay=function(t){return this._repeatDelayTime=t,this},t.prototype.yoyo=function(t){return void 0===t&&(t=!1),this._yoyo=t,this},t.prototype.easing=function(t){return void 0===t&&(t=Py.Linear.None),this._easingFunction=t,this},t.prototype.interpolation=function(t){return void 0===t&&(t=ky.Linear),this._interpolationFunction=t,this},t.prototype.chain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._chainedTweens=t,this},t.prototype.onStart=function(t){return this._onStartCallback=t,this},t.prototype.onEveryStart=function(t){return this._onEveryStartCallback=t,this},t.prototype.onUpdate=function(t){return this._onUpdateCallback=t,this},t.prototype.onRepeat=function(t){return this._onRepeatCallback=t,this},t.prototype.onComplete=function(t){return this._onCompleteCallback=t,this},t.prototype.onStop=function(t){return this._onStopCallback=t,this},t.prototype.update=function(t,e){if(void 0===t&&(t=Oy()),void 0===e&&(e=!0),this._isPaused)return!0;var n,r,i=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(t>i)return!1;e&&this.start(t,!0)}if(this._goToEnd=!1,t<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),!1===this._onEveryStartCallbackFired&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0),r=(t-this._startTime)/this._duration,r=0===this._duration||r>1?1:r;var o=this._easingFunction(r);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,o),this._onUpdateCallback&&this._onUpdateCallback(this._object,r),1===r){if(this._repeat>0){for(n in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!==typeof this._valuesEnd[n]||(this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(this._valuesEnd[n])),this._yoyo&&this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,a=this._chainedTweens.length;s<a;s++)this._chainedTweens[s].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},t.prototype._updateProperties=function(t,e,n,r){for(var i in n)if(void 0!==e[i]){var o=e[i]||0,s=n[i],a=Array.isArray(t[i]),c=Array.isArray(s),l=!a&&c;l?t[i]=this._interpolationFunction(s,r):"object"===typeof s&&s?this._updateProperties(t[i],o,s,r):(s=this._handleRelativeValue(o,s),"number"===typeof s&&(t[i]=o+(s-o)*r))}},t.prototype._handleRelativeValue=function(t,e){return"string"!==typeof e?e:"+"===e.charAt(0)||"-"===e.charAt(0)?t+parseFloat(e):parseFloat(e)},t.prototype._swapEndStartRepeatValues=function(t){var e=this._valuesStartRepeat[t],n=this._valuesEnd[t];this._valuesStartRepeat[t]="string"===typeof n?this._valuesStartRepeat[t]+parseFloat(n):this._valuesEnd[t],this._valuesEnd[t]=e},t}(),Uy="20.0.3",Fy=Iy.nextId,By=Dy,zy=By.getAll.bind(By),jy=By.removeAll.bind(By),Hy=By.add.bind(By),Vy=By.remove.bind(By),Gy=By.update.bind(By),Wy={Easing:Py,Group:Ly,Interpolation:ky,now:Oy,Sequence:Iy,nextId:Fy,Tween:Ny,VERSION:Uy,getAll:zy,removeAll:jy,add:Hy,remove:Vy,update:Gy};function qy(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var Xy=".scene-nav-info {\n  bottom: 5px;\n  width: 100%;\n  text-align: center;\n  color: slategrey;\n  opacity: 0.7;\n  font-size: 10px;\n}\n\n.scene-tooltip {\n  top: 0;\n  color: lavender;\n  font-size: 15px;\n}\n\n.scene-nav-info, .scene-tooltip {\n  position: absolute;\n  font-family: sans-serif;\n  pointer-events: none;\n}\n\n.scene-container canvas:focus {\n  outline: none;\n}";function Yy(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(u){l=!0,i=u}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return a}}function $y(t,e,n){return e=sb(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ky(t,e){return Qy(t)||Yy(t,e)||eb(t,e)||ib()}function Jy(t){return Zy(t)||tb(t)||eb(t)||rb()}function Zy(t){if(Array.isArray(t))return nb(t)}function Qy(t){if(Array.isArray(t))return t}function tb(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function eb(t,e){if(t){if("string"===typeof t)return nb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nb(t,e):void 0}}function nb(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rb(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ib(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ob(t,e){if("object"!==typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function sb(t){var e=ob(t,"string");return"symbol"===typeof e?e:String(e)}qy(Xy);var ab=window.THREE?window.THREE:{WebGLRenderer:qu,Scene:Yu,PerspectiveCamera:so,Raycaster:Ed,SRGBColorSpace:Te,TextureLoader:td,Vector2:yn,Vector3:Xn,Box3:Kn,Color:fi,Mesh:Xi,SphereGeometry:Oh,MeshBasicMaterial:mi,BackSide:f,EventDispatcher:Ge,MOUSE:i,Quaternion:qn,Spherical:Td,Clock:ld},cb=Km({props:{width:{default:window.innerWidth,onChange:function(t,e,n){isNaN(t)&&(e.width=n)}},height:{default:window.innerHeight,onChange:function(t,e,n){isNaN(t)&&(e.height=n)}},backgroundColor:{default:"#000011"},backgroundImageUrl:{},onBackgroundImageLoaded:{},showNavInfo:{default:!0},skyRadius:{default:5e4},objects:{default:[]},enablePointerInteraction:{default:!0,onChange:function(t,e){e.hoverObj=null,e.toolTipElem&&(e.toolTipElem.innerHTML="")},triggerUpdate:!1},lineHoverPrecision:{default:1,triggerUpdate:!1},hoverOrderComparator:{default:function(){return-1},triggerUpdate:!1},hoverFilter:{default:function(){return!0},triggerUpdate:!1},tooltipContent:{triggerUpdate:!1},hoverDuringDrag:{default:!1,triggerUpdate:!1},clickAfterDrag:{default:!1,triggerUpdate:!1},onHover:{default:function(){},triggerUpdate:!1},onClick:{default:function(){},triggerUpdate:!1},onRightClick:{triggerUpdate:!1}},methods:{tick:function(t){if(t.initialised){if(t.controls.update&&t.controls.update(t.clock.getDelta()),t.postProcessingComposer?t.postProcessingComposer.render():t.renderer.render(t.scene,t.camera),t.extraRenderers.forEach((function(e){return e.render(t.scene,t.camera)})),t.enablePointerInteraction){var e=null;if(t.hoverDuringDrag||!t.isPointerDragging){var n=this.intersectingObjects(t.pointerPos.x,t.pointerPos.y).filter((function(e){return t.hoverFilter(e.object)})).sort((function(e,n){return t.hoverOrderComparator(e.object,n.object)})),r=n.length?n[0]:null;e=r?r.object:null,t.intersectionPoint=r?r.point:null}e!==t.hoverObj&&(t.onHover(e,t.hoverObj),t.toolTipElem.innerHTML=e&&Jm(t.tooltipContent)(e)||"",t.hoverObj=e)}Wy.update()}return this},getPointerPos:function(t){var e=t.pointerPos,n=e.x,r=e.y;return{x:n,y:r}},cameraPosition:function(t,e,n,r){var i=t.camera;if(e&&t.initialised){var o=e,s=n||{x:0,y:0,z:0};if(r){var a=Object.assign({},i.position),c=h();new Wy.Tween(a).to(o,r).easing(Wy.Easing.Quadratic.Out).onUpdate(l).start(),new Wy.Tween(c).to(s,r/3).easing(Wy.Easing.Quadratic.Out).onUpdate(u).start()}else l(o),u(s);return this}return Object.assign({},i.position,{lookAt:h()});function l(t){var e=t.x,n=t.y,r=t.z;void 0!==e&&(i.position.x=e),void 0!==n&&(i.position.y=n),void 0!==r&&(i.position.z=r)}function u(e){var n=new ab.Vector3(e.x,e.y,e.z);t.controls.target?t.controls.target=n:i.lookAt(n)}function h(){return Object.assign(new ab.Vector3(0,0,-1e3).applyQuaternion(i.quaternion).add(i.position))}},zoomToFit:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];return this.fitToBbox(this.getBbox.apply(this,i),e,n)},fitToBbox:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,i=t.camera;if(e){var o=new ab.Vector3(0,0,0),s=2*Math.max.apply(Math,Jy(Object.entries(e).map((function(t){var e=Ky(t,2),n=e[0],r=e[1];return Math.max.apply(Math,Jy(r.map((function(t){return Math.abs(o[n]-t)}))))})))),a=(1-2*r/t.height)*i.fov,c=s/Math.atan(a*Math.PI/180),l=c/i.aspect,u=Math.max(c,l);if(u>0){var h=o.clone().sub(i.position).normalize().multiplyScalar(-u);this.cameraPosition(h,o,n)}}return this},getBbox:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},n=new ab.Box3(new ab.Vector3(0,0,0),new ab.Vector3(0,0,0)),r=t.objects.filter(e);return r.length?(r.forEach((function(t){return n.expandByObject(t)})),Object.assign.apply(Object,Jy(["x","y","z"].map((function(t){return $y({},t,[n.min[t],n.max[t]])}))))):null},getScreenCoords:function(t,e,n,r){var i=new ab.Vector3(e,n,r);return i.project(this.camera()),{x:(i.x+1)*t.width/2,y:-(i.y-1)*t.height/2}},getSceneCoords:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=new ab.Vector2(e/t.width*2-1,-n/t.height*2+1),o=new ab.Raycaster;return o.setFromCamera(i,t.camera),Object.assign({},o.ray.at(r,new ab.Vector3))},intersectingObjects:function(t,e,n){var r=new ab.Vector2(e/t.width*2-1,-n/t.height*2+1),i=new ab.Raycaster;return i.params.Line.threshold=t.lineHoverPrecision,i.setFromCamera(r,t.camera),i.intersectObjects(t.objects,!0)},renderer:function(t){return t.renderer},scene:function(t){return t.scene},camera:function(t){return t.camera},postProcessingComposer:function(t){return t.postProcessingComposer},controls:function(t){return t.controls},tbControls:function(t){return t.controls}},stateInit:function(){return{scene:new ab.Scene,camera:new ab.PerspectiveCamera,clock:new ab.Clock}},init:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.controlType,i=void 0===r?"trackball":r,o=n.rendererConfig,s=void 0===o?{}:o,a=n.extraRenderers,c=void 0===a?[]:a,l=n.waitForLoadComplete,u=void 0===l||l;t.innerHTML="",t.appendChild(e.container=document.createElement("div")),e.container.className="scene-container",e.container.style.position="relative",e.container.appendChild(e.navInfo=document.createElement("div")),e.navInfo.className="scene-nav-info",e.navInfo.textContent={orbit:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",trackball:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",fly:"WASD: move, R|F: up | down, Q|E: roll, up|down: pitch, left|right: yaw"}[i]||"",e.navInfo.style.display=e.showNavInfo?null:"none",e.toolTipElem=document.createElement("div"),e.toolTipElem.classList.add("scene-tooltip"),e.container.appendChild(e.toolTipElem),e.pointerPos=new ab.Vector2,e.pointerPos.x=-2,e.pointerPos.y=-2,["pointermove","pointerdown"].forEach((function(t){return e.container.addEventListener(t,(function(n){if("pointerdown"===t&&(e.isPointerPressed=!0),!e.isPointerDragging&&"pointermove"===n.type&&(n.pressure>0||e.isPointerPressed)&&("touch"!==n.pointerType||void 0===n.movementX||[n.movementX,n.movementY].some((function(t){return Math.abs(t)>1})))&&(e.isPointerDragging=!0),e.enablePointerInteraction){var r=i(e.container);e.pointerPos.x=n.pageX-r.left,e.pointerPos.y=n.pageY-r.top,e.toolTipElem.style.top="".concat(e.pointerPos.y,"px"),e.toolTipElem.style.left="".concat(e.pointerPos.x,"px"),e.toolTipElem.style.transform="translate(-".concat(e.pointerPos.x/e.width*100,"%, ").concat(e.height-e.pointerPos.y<100?"calc(-100% - 8px)":"21px",")")}function i(t){var e=t.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop;return{top:e.top+r,left:e.left+n}}}),{passive:!0})})),e.container.addEventListener("pointerup",(function(t){e.isPointerPressed=!1,e.isPointerDragging&&(e.isPointerDragging=!1,!e.clickAfterDrag)||requestAnimationFrame((function(){0===t.button&&e.onClick(e.hoverObj||null,t,e.intersectionPoint),2===t.button&&e.onRightClick&&e.onRightClick(e.hoverObj||null,t,e.intersectionPoint)}))}),{passive:!0,capture:!0}),e.container.addEventListener("contextmenu",(function(t){e.onRightClick&&t.preventDefault()})),e.renderer=new ab.WebGLRenderer(Object.assign({antialias:!0,alpha:!0},s)),e.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio)),e.container.appendChild(e.renderer.domElement),e.extraRenderers=c,e.extraRenderers.forEach((function(t){t.domElement.style.position="absolute",t.domElement.style.top="0px",t.domElement.style.pointerEvents="none",e.container.appendChild(t.domElement)})),e.postProcessingComposer=new X_(e.renderer),e.postProcessingComposer.addPass(new Y_(e.scene,e.camera)),e.controls=new{trackball:O_,orbit:D_,fly:U_}[i](e.camera,e.renderer.domElement),"fly"===i&&(e.controls.movementSpeed=300,e.controls.rollSpeed=Math.PI/6,e.controls.dragToLook=!0),"trackball"!==i&&"orbit"!==i||(e.controls.minDistance=.1,e.controls.maxDistance=e.skyRadius,e.controls.addEventListener("start",(function(){e.controlsEngaged=!0})),e.controls.addEventListener("change",(function(){e.controlsEngaged&&(e.controlsDragging=!0)})),e.controls.addEventListener("end",(function(){e.controlsEngaged=!1,e.controlsDragging=!1}))),[e.renderer,e.postProcessingComposer].concat(Jy(e.extraRenderers)).forEach((function(t){return t.setSize(e.width,e.height)})),e.camera.aspect=e.width/e.height,e.camera.updateProjectionMatrix(),e.camera.position.z=1e3,e.scene.add(e.skysphere=new ab.Mesh),e.skysphere.visible=!1,e.loadComplete=e.scene.visible=!u,window.scene=e.scene},update:function(t,e){if(t.width&&t.height&&(e.hasOwnProperty("width")||e.hasOwnProperty("height"))&&(t.container.style.width="".concat(t.width,"px"),t.container.style.height="".concat(t.height,"px"),[t.renderer,t.postProcessingComposer].concat(Jy(t.extraRenderers)).forEach((function(e){return e.setSize(t.width,t.height)})),t.camera.aspect=t.width/t.height,t.camera.updateProjectionMatrix()),e.hasOwnProperty("skyRadius")&&t.skyRadius&&(t.controls.hasOwnProperty("maxDistance")&&e.skyRadius&&(t.controls.maxDistance=Math.min(t.controls.maxDistance,t.skyRadius)),t.camera.far=2.5*t.skyRadius,t.camera.updateProjectionMatrix(),t.skysphere.geometry=new ab.SphereGeometry(t.skyRadius)),e.hasOwnProperty("backgroundColor")){var n=_y(t.backgroundColor).alpha;void 0===n&&(n=1),t.renderer.setClearColor(new ab.Color(Ry(1,t.backgroundColor)),n)}function r(){t.loadComplete=t.scene.visible=!0}e.hasOwnProperty("backgroundImageUrl")&&(t.backgroundImageUrl?(new ab.TextureLoader).load(t.backgroundImageUrl,(function(e){e.colorSpace=ab.SRGBColorSpace,t.skysphere.material=new ab.MeshBasicMaterial({map:e,side:ab.BackSide}),t.skysphere.visible=!0,t.onBackgroundImageLoaded&&setTimeout(t.onBackgroundImageLoaded),!t.loadComplete&&r()})):(t.skysphere.visible=!1,t.skysphere.material.map=null,!t.loadComplete&&r())),e.hasOwnProperty("showNavInfo")&&(t.navInfo.style.display=t.showNavInfo?null:"none"),e.hasOwnProperty("objects")&&((e.objects||[]).forEach((function(e){return t.scene.remove(e)})),t.objects.forEach((function(e){return t.scene.add(e)})))}});function lb(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var ub=".graph-info-msg {\n  top: 50%;\n  width: 100%;\n  text-align: center;\n  color: lavender;\n  opacity: 0.7;\n  font-size: 22px;\n  position: absolute;\n  font-family: Sans-serif;\n}\n\n.scene-container .clickable {\n  cursor: pointer;\n}\n\n.scene-container .grabbable {\n  cursor: move;\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n\n.scene-container .grabbable:active {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n}";function hb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function db(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?hb(Object(n),!0).forEach((function(e){fb(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hb(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function fb(t,e,n){return e=wb(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pb(t){return mb(t)||gb(t)||vb(t)||yb()}function mb(t){if(Array.isArray(t))return _b(t)}function gb(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function vb(t,e){if(t){if("string"===typeof t)return _b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_b(t,e):void 0}}function _b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function yb(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bb(t,e){if("object"!==typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function wb(t){var e=bb(t,"string");return"symbol"===typeof e?e:String(e)}function xb(t,e){var n=new e;return{linkProp:function(e){return{default:n[e](),onChange:function(n,r){r[t][e](n)},triggerUpdate:!1}},linkMethod:function(e){return function(n){for(var r=n[t],i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];var a=r[e].apply(r,o);return a===r?this:a}}}}lb(ub);var Eb=window.THREE?window.THREE:{AmbientLight:cd,DirectionalLight:ad,Vector3:Xn},Sb=170,Mb=xb("forceGraph",A_),Tb=Object.assign.apply(Object,pb(["jsonUrl","graphData","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeColor","nodeAutoColorBy","nodeOpacity","nodeVisibility","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","forceEngine","d3AlphaDecay","d3VelocityDecay","d3AlphaMin","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map((function(t){return fb({},t,Mb.linkProp(t))})))),Ab=Object.assign.apply(Object,pb(["refresh","getGraphBbox","d3Force","d3ReheatSimulation","emitParticle"].map((function(t){return fb({},t,Mb.linkMethod(t))})))),Cb=xb("renderObjs",cb),Rb=Object.assign.apply(Object,pb(["width","height","backgroundColor","showNavInfo","enablePointerInteraction"].map((function(t){return fb({},t,Cb.linkProp(t))})))),Pb=Object.assign.apply(Object,pb(["cameraPosition","postProcessingComposer"].map((function(t){return fb({},t,Cb.linkMethod(t))}))).concat([{graph2ScreenCoords:Cb.linkMethod("getScreenCoords"),screen2GraphCoords:Cb.linkMethod("getSceneCoords")}])),Ob=Km({props:db(db({nodeLabel:{default:"name",triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:1,onChange:function(t,e){return e.renderObjs.lineHoverPrecision(t)},triggerUpdate:!1},enableNavigationControls:{default:!0,onChange:function(t,e){var n=e.renderObjs.controls();n&&(n.enabled=t,t&&n.domElement&&n.domElement.dispatchEvent(new PointerEvent("pointerup")))},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1}},Tb),Rb),methods:db(db({zoomToFit:function(t,e,n){for(var r,i=arguments.length,o=new Array(i>3?i-3:0),s=3;s<i;s++)o[s-3]=arguments[s];return t.renderObjs.fitToBbox((r=t.forceGraph).getGraphBbox.apply(r,o),e,n),this},pauseAnimation:function(t){return null!==t.animationFrameRequestId&&(cancelAnimationFrame(t.animationFrameRequestId),t.animationFrameRequestId=null),this},resumeAnimation:function(t){return null===t.animationFrameRequestId&&this._animationCycle(),this},_animationCycle:function(t){t.enablePointerInteraction&&(this.renderer().domElement.style.cursor=null),t.forceGraph.tickFrame(),t.renderObjs.tick(),t.animationFrameRequestId=requestAnimationFrame(this._animationCycle)},scene:function(t){return t.renderObjs.scene()},camera:function(t){return t.renderObjs.camera()},renderer:function(t){return t.renderObjs.renderer()},controls:function(t){return t.renderObjs.controls()},tbControls:function(t){return t.renderObjs.tbControls()},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},Ab),Pb),stateInit:function(t){var e=t.controlType,n=t.rendererConfig,r=t.extraRenderers;return{forceGraph:new A_,renderObjs:cb({controlType:e,rendererConfig:n,extraRenderers:r})}},init:function(t,e){t.innerHTML="",t.appendChild(e.container=document.createElement("div")),e.container.style.position="relative";var n=document.createElement("div");e.container.appendChild(n),e.renderObjs(n);var r,i=e.renderObjs.camera(),o=e.renderObjs.renderer(),s=e.renderObjs.controls();s.enabled=!!e.enableNavigationControls,e.lastSetCameraZ=i.position.z,e.container.appendChild(r=document.createElement("div")),r.className="graph-info-msg",r.textContent="",e.forceGraph.onLoading((function(){r.textContent="Loading..."})).onFinishLoading((function(){r.textContent=""})).onUpdate((function(){e.graphData=e.forceGraph.graphData(),0===i.position.x&&0===i.position.y&&i.position.z===e.lastSetCameraZ&&e.graphData.nodes.length&&(i.lookAt(e.forceGraph.position),e.lastSetCameraZ=i.position.z=Math.cbrt(e.graphData.nodes.length)*Sb)})).onFinishUpdate((function(){if(e._dragControls){var t=e.graphData.nodes.find((function(t){return t.__initialFixedPos&&!t.__disposeControlsAfterDrag}));t?t.__disposeControlsAfterDrag=!0:e._dragControls.dispose(),e._dragControls=void 0}if(e.enableNodeDrag&&e.enablePointerInteraction&&"d3"===e.forceEngine){var n=e._dragControls=new Id(e.graphData.nodes.map((function(t){return t.__threeObj})).filter((function(t){return t})),i,o.domElement);n.addEventListener("dragstart",(function(t){s.enabled=!1,t.object.__initialPos=t.object.position.clone(),t.object.__prevPos=t.object.position.clone();var e=Lb(t.object).__data;!e.__initialFixedPos&&(e.__initialFixedPos={fx:e.fx,fy:e.fy,fz:e.fz}),!e.__initialPos&&(e.__initialPos={x:e.x,y:e.y,z:e.z}),["x","y","z"].forEach((function(t){return e["f".concat(t)]=e[t]})),o.domElement.classList.add("grabbable")})),n.addEventListener("drag",(function(t){var n=Lb(t.object);if(!t.object.hasOwnProperty("__graphObjType")){var r=t.object.__initialPos,i=t.object.__prevPos,o=t.object.position;n.position.add(o.clone().sub(i)),i.copy(o),o.copy(r)}var s=n.__data,a=n.position,c={x:a.x-s.x,y:a.y-s.y,z:a.z-s.z};["x","y","z"].forEach((function(t){return s["f".concat(t)]=s[t]=a[t]})),e.forceGraph.d3AlphaTarget(.3).resetCountdown(),s.__dragged=!0,e.onNodeDrag(s,c)})),n.addEventListener("dragend",(function(t){delete t.object.__initialPos,delete t.object.__prevPos;var r=Lb(t.object).__data;r.__disposeControlsAfterDrag&&(n.dispose(),delete r.__disposeControlsAfterDrag);var i=r.__initialFixedPos,a=r.__initialPos,c={x:a.x-r.x,y:a.y-r.y,z:a.z-r.z};i&&(["x","y","z"].forEach((function(t){var e="f".concat(t);void 0===i[e]&&delete r[e]})),delete r.__initialFixedPos,delete r.__initialPos,r.__dragged&&(delete r.__dragged,e.onNodeDragEnd(r,c))),e.forceGraph.d3AlphaTarget(0).resetCountdown(),e.enableNavigationControls&&(s.enabled=!0,s.domElement&&s.domElement.ownerDocument&&s.domElement.ownerDocument.dispatchEvent(new PointerEvent("pointerup",{pointerType:"touch"}))),o.domElement.classList.remove("grabbable")}))}})),e.renderObjs.objects([new Eb.AmbientLight(13421772),new Eb.DirectionalLight(16777215,.6),e.forceGraph]).hoverOrderComparator((function(t,e){var n=Lb(t);if(!n)return 1;var r=Lb(e);if(!r)return-1;var i=function(t){return"node"===t.__graphObjType};return i(r)-i(n)})).tooltipContent((function(t){var n=Lb(t);return n&&Jm(e["".concat(n.__graphObjType,"Label")])(n.__data)||""})).hoverDuringDrag(!1).onHover((function(t){var n=Lb(t);if(n!==e.hoverObj){var r=e.hoverObj?e.hoverObj.__graphObjType:null,i=e.hoverObj?e.hoverObj.__data:null,s=n?n.__graphObjType:null,a=n?n.__data:null;if(r&&r!==s){var c=e["on".concat("node"===r?"Node":"Link","Hover")];c&&c(null,i)}if(s){var l=e["on".concat("node"===s?"Node":"Link","Hover")];l&&l(a,r===s?i:null)}o.domElement.classList[n&&e["on".concat("node"===s?"Node":"Link","Click")]||!n&&e.onBackgroundClick?"add":"remove"]("clickable"),e.hoverObj=n}})).clickAfterDrag(!1).onClick((function(t,n){var r=Lb(t);if(r){var i=e["on".concat("node"===r.__graphObjType?"Node":"Link","Click")];i&&i(r.__data,n)}else e.onBackgroundClick&&e.onBackgroundClick(n)})).onRightClick((function(t,n){var r=Lb(t);if(r){var i=e["on".concat("node"===r.__graphObjType?"Node":"Link","RightClick")];i&&i(r.__data,n)}else e.onBackgroundRightClick&&e.onBackgroundRightClick(n)})),this._animationCycle()}});function Lb(t){var e=t;while(e&&!e.hasOwnProperty("__graphObjType"))e=e.parent;return e}},5288:function(t,e,n){"use strict";n.d(e,{QB:function(){return X},ms:function(){return Mt},QT:function(){return St},wI:function(){return Ct}});var r={};n.r(r),n.d(r,{$reactive:function(){return C},$reactiveproxy:function(){return R},$skipreactive:function(){return A},Atom:function(){return B},Observer:function(){return h},Reaction:function(){return f},autorun:function(){return U},autorunAsync:function(){return F},createAtom:function(){return z},hasRunningReaction:function(){return p},isActionRunning:function(){return l},isReactive:function(){return P},isTrackingDisabled:function(){return _},markRaw:function(){return O},reaction:function(){return g},reactive:function(){return I},runInAction:function(){return u},runningReaction:function(){return m},untracked:function(){return y},untrackedCB:function(){return b}});n(1703),n(7658);function i(){return i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i.apply(this,arguments)}function o(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,s(t,e)}function s(t,e){return s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},s(t,e)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var c=0;function l(){return c>0}function u(t){c++;try{return t()}finally{c--,0===c&&x()}}var h=function(){function t(t){this.trigger=t,this.observing=new Map}var e=t.prototype;return e.registerConnection=function(t){var e=this.observing.get(t.observable);e||(e={byKey:new Set,iterate:!1},this.observing.set(t.observable,e)),"iterate"===t.type?e.iterate=!0:e.byKey.add(t.key)},e.removeObservers=function(){var t=this;this.observing.forEach((function(e,n){e.iterate&&n[C].connections.iterate.delete(t),e.byKey.forEach((function(e){n[C].connections.byKey.get(e).delete(t)}))})),this.observing.clear()},t}(),d=[],f=function(t){function e(e,n,r){var i;if(i=t.call(this,(function(){return i._trigger()}))||this,i.func=e,i.options=n,i.effect=r,i.isInitial=!0,i.reaction=function(){d.push(a(i));try{i.func()}finally{d.pop()}!i.effect||i.isInitial&&!i.options.fireImmediately||i.effect(),i.isInitial=!1},!r&&!i.options.fireImmediately)throw new Error("if no effect function passed, should always fireImmediately");return i.reaction(),i}o(e,t);var n=e.prototype;return n._trigger=function(){if(d.includes(this))throw new Error("already running reaction");this.removeObservers(),this.reaction()},e}(h);function p(){return!!d.length}function m(){return d.length?d[d.length-1]:void 0}function g(t,e,n){var r=i({name:"unnamed",fireImmediately:!0},n),o=new f(t,r,e);return o}var v=!1;function _(){return v}function y(t){v=!0;try{t()}finally{v=!1}}function b(t){return function(){return y(t)}}var w=[];function x(){var t=[].concat(w);w=[],E(t)}function E(t){var e=new Set;t.forEach((function(t){var n;"add"!==t.type&&"delete"!==t.type||t.observable[C].connections.iterate.forEach((function(t){e.add(t)})),null==(n=t.observable[C].connections.byKey.get(t.key))||n.forEach((function(t){e.add(t)}))})),e.forEach((function(t){t.trigger()}))}function S(t){l()?w.push(t):E([t])}function M(t,e){if("iterate"===t.type)t.observable[C].connections.iterate.add(e);else{var n=t.observable[C].connections.byKey.get(t.key);n||(n=new Set,t.observable[C].connections.byKey.set(t.key,n)),n.add(e)}}function T(t,e){if(!_()){var n=m();n&&(M(t,n),n.registerConnection(t)),e&&(M(t,e),e.registerConnection(t))}}var A=Symbol("$skipreactive"),C=Symbol("$reactive"),R=Symbol("$reactiveproxy");function P(t,e){return!(!t||!t[R]||t[R].implicitObserver!==e)}function O(t){return t[A]=!0,t}function L(t){return!(!t||P(t)||!t[C])}function k(t,e,n){if(void 0===n&&(n=!1),t[A])return t;if(P(t,e))return t;var r=D(t,n);if(!e)return r;var i=r[C].proxiesWithImplicitObserver.get(e);if(!i){var o={implicitObserver:e};Object.setPrototypeOf(o,N),i=new Proxy(r[C].raw,o),r[C].proxiesWithImplicitObserver.set(e,i)}return i}var I=k;function D(t,e){if(void 0===e&&(e=!1),P(t))return t;if(L(t))return t[C].proxy;if(t[C]||t[R])throw new Error("unexpected");var n={connections:{iterate:new Set,byKey:new Map},proxy:{},raw:t,proxiesWithImplicitObserver:new Map,shallow:e};Object.defineProperty(t,C,{enumerable:!1,writable:!0,configurable:!0,value:n});var r=new Proxy(t,N);return n.proxy=r,r}var N={has:function(t,e){var n=Reflect.has(t,e);return"symbol"===typeof e||T({observable:t,key:e,type:"has"},this.implicitObserver),n},get:function(t,e,n){if(e===R)return{implicitObserver:this.implicitObserver};var r=Reflect.get(t,e,n);if("symbol"===typeof e)return r;if("length"===e&&Array.isArray(t)?T({observable:t,type:"iterate"},this.implicitObserver):T({observable:t,key:e,type:"get"},this.implicitObserver),L(r))return k(r,this.implicitObserver);if(t[C].shallow)return r;if("object"===typeof r&&null!==r&&!P(r,this.implicitObserver)&&!Object.isFrozen(r)){var i=Reflect.getOwnPropertyDescriptor(t,e);if((!i||!1!==i.writable||!1!==i.configurable)&&(p()||this.implicitObserver))return k(r,this.implicitObserver)}return r},ownKeys:function(t){return T({observable:t,type:"iterate"},this.implicitObserver),Reflect.ownKeys(t)},set:function(t,e,n,r){return u((function(){if("symbol"===typeof e)return Reflect.set(t,e,n,r);var i=Object.hasOwnProperty.call(t,e),o=Reflect.get(t,e,r),s=Reflect.set(t,e,n,r);if(i){if(n!==o)if("length"===e&&Array.isArray(t))if(o<n);else for(var a=n+1;a<=o;a++)S({observable:t,key:""+(a-1),oldValue:void 0,type:"delete"});else S({observable:t,key:e,value:n,oldValue:o,type:"update"})}else S({observable:t,key:e,value:n,type:"add"});return s}))},deleteProperty:function(t,e){return u((function(){if("symbol"===typeof e)return Reflect.deleteProperty(t,e);var n=Object.hasOwnProperty.call(t,e),r=Reflect.get(t,e),i=Reflect.deleteProperty(t,e);return n&&S({observable:t,key:e,oldValue:r,type:"delete"}),i}))},preventExtensions:function(t){throw new Error("Dynamic observable objects cannot be frozen")}};function U(t,e){var n=i({name:"unnamed",fireImmediately:!0},e),r=new f(t,n);return r}function F(t,e,n){var r=i({name:"unnamed",fireImmediately:!0},n),o=new f((function(){t(e)}),r);return e=I(e,o),e.bla=4,r.fireImmediately&&o.trigger(),o}var B=function(){function t(){this._observable=I({_key:1})}var e=t.prototype;return e.reportObserved=function(t){return I(this._observable,t)._key},e.reportChanged=function(){this._observable._key++},t}();function z(t,e,n){return new B}var j=n(567);let H,V,G=t=>t();function W(t,e){return V?V(t,e):void G(t)}function q(t,e,n){if(H)return H.apply(null,arguments);throw new Error("observable implementation not provided. Call enableReactiveBindings, enableVueBindings or enableMobxBindings.")}function X(t){H=function(e,n){let r=0;const i=t.reactive({data:r}),o={reportObserved(){return i.data},reportChanged(){i.data=++r}};return n&&n(),o},V=void 0}function Y(t){H=function(e,n,r){const i=t.createAtom(e);return n&&n(),i},V=(e,n)=>t.reaction(e,n,{fireImmediately:!1})}const $=new WeakSet;function K(t){if($.has(t))return t;let e;$.add(t);const n=new Map;function r(){if(!e){const n=t=>{(t.changes.added.size||t.changes.deleted.size||t.changes.keys.size||t.changes.delta.length)&&e.reportChanged()};e=q("map",(()=>{t.observe(n)}),(()=>{t.unobserve(n)}))}e.reportObserved(t._implicitObserver)}function i(e){let r=n.get(e);if(!r){const i=t=>{r.reportChanged()};r=q(e+"",(()=>{t.observe(i)}),(()=>{t.unobserve(i)})),n.set(e,r)}r.reportObserved(t._implicitObserver)}const o=t.get;function s(e){const n=t[e];t[e]=function(){r();const t=Reflect.apply(n,this,arguments);return t}}function a(e){let n=t,i=Object.getOwnPropertyDescriptor(n,e);if(i||(n=Object.getPrototypeOf(n),i=Object.getOwnPropertyDescriptor(n,e)),i||(n=Object.getPrototypeOf(n),i=Object.getOwnPropertyDescriptor(n,e)),!i)throw new Error("property not found");const o=i.get;i.get=function(){this._disableTracking||r();const t=Reflect.apply(o,this,arguments);return t},Object.defineProperty(t,e,i)}function c(e,n){let r=t,i=Object.getOwnPropertyDescriptor(r,e);if(i||(r=Object.getPrototypeOf(r),i=Object.getOwnPropertyDescriptor(r,e)),i||(r=Object.getPrototypeOf(r),i=Object.getOwnPropertyDescriptor(r,e)),!i)throw new Error("property not found");Object.defineProperty(t,n,i)}t.get=function(t){if("number"!==typeof t)throw new Error("unexpected");i(t);const e=Reflect.apply(o,this,arguments);return e},s("forEach"),s("toJSON"),s("toArray"),s("slice"),s("map"),c("length","lengthUntracked"),a("length");const l=t.push;t.push=function(t){this._disableTracking=!0;const e=l.call(this,t);return this._disableTracking=!1,e};const u=t.slice;return t.slice=function(t,e){this._disableTracking=!0;const n=u.call(this,t,e);return this._disableTracking=!1,n},t}const J=new WeakSet;function Z(t){if(J.has(t))return t;let e;function n(){if(!e){let n=Array.from(t.share.keys());const r=r=>{const i=Array.from(t.share.keys());JSON.stringify(n)!==JSON.stringify(i)&&(n=i,e.reportChanged())};e=q("map",(()=>{t.on("beforeObserverCalls",r)}),(()=>{t.off("beforeObserverCalls",r)}))}e.reportObserved(t._implicitObserver)}J.add(t);const r=t.get;function i(r){const i=t[r];let o;t[r]=function(){let r,s=arguments;return n(),o&&o.removeObservers(),o=W((()=>(r=Reflect.apply(i,t,s),r)),(()=>e.reportChanged())),r}}return t.get=function(t){if("string"!==typeof t)throw new Error("unexpected");const e=Reflect.apply(r,this,arguments);return ot(e),e},i("toJSON"),Object.defineProperty(t,"keys",{get:()=>(n(),Object.keys(t.share))}),t}const Q=new WeakSet;function tt(t){if(Q.has(t))return t;let e;Q.add(t);const n=new Map;function r(){if(!e){const n=t=>{(t.changes.added.size||t.changes.deleted.size||t.changes.keys.size||t.changes.delta.length)&&e.reportChanged()};e=q("map",(()=>{t.observe(n)}),(()=>{t.unobserve(n)}))}e.reportObserved(t._implicitObserver)}function i(e){let r=n.get(e);if(!r){const i=t=>{t.keysChanged.has(e)&&(t.changes.added.size||t.changes.deleted.size||t.changes.keys.size||t.changes.delta.length)&&r.reportChanged()};r=q(e,(()=>{t.observe(i)}),(()=>{t.unobserve(i)})),n.set(e,r)}r.reportObserved(t._implicitObserver)}const o=t.get;function s(e){const n=t[e];t[e]=function(){r();const t=Reflect.apply(n,this,arguments);return t}}return t.get=function(t){if("string"!==typeof t)throw new Error("unexpected");i(t);const e=Reflect.apply(o,this,arguments);return e},s("values"),s("entries"),s("keys"),s("forEach"),s("toJSON"),t}const et=new WeakSet;function nt(t){if(et.has(t))return t;let e;et.add(t);const n=t=>{e.reportChanged()};function r(n){const r=t[n];t[n]=function(){e.reportObserved(this._implicitObserver);const t=Reflect.apply(r,this,arguments);return t}}return e=q("text",(()=>{t.observe(n)}),(()=>{t.unobserve(n)})),r("toString"),r("toJSON"),t}const rt=new WeakSet;function it(t){if(rt.has(t))return t;let e;rt.add(t);const n=t=>{(t.changes.added.size||t.changes.deleted.size||t.changes.keys.size||t.changes.delta.length)&&e.reportChanged()};function r(n){const r=t[n];t[n]=function(){e.reportObserved(this._implicitObserver);const t=Reflect.apply(r,this,arguments);return t}}function i(n){let r=t,i=Object.getOwnPropertyDescriptor(r,n);if(i||(r=Object.getPrototypeOf(r),i=Object.getOwnPropertyDescriptor(r,n)),i||(r=Object.getPrototypeOf(r),i=Object.getOwnPropertyDescriptor(r,n)),!i)throw new Error("property not found");const o=i.get;i.get=function(){e.reportObserved(this._implicitObserver);const t=Reflect.apply(o,this,arguments);return t},Object.defineProperty(t,n,i)}return e=q("xml",(()=>{t.observe(n)}),(()=>{t.unobserve(n)})),r("toString"),r("toDOM"),r("toArray"),r("getAttribute"),i("firstChild"),t}function ot(t){return t instanceof j.eI||t instanceof j.xv?nt(t):t instanceof j.mJ?K(t):t instanceof j.D5?tt(t):t instanceof j.QW||Object.prototype.hasOwnProperty.call(t,"autoLoad")?Z(t):t instanceof j.sI||t instanceof j.lt?it(t):t}function st(t){t.share.forEach((t=>{t.constructor!==j.QP&&ot(t)}))}function at(t,e){for(let r=t.length-1;r>=e;r--){let e=t[r];if(!e.deleted){var n;if(e instanceof j.GC)continue;null==(n=e.content)||n.getContent().forEach((t=>{t instanceof j.QP&&ot(t)}))}}}const ct=new WeakSet;function lt(t){ct.has(t)||(ct.add(t),ot(t),t.store.clients.forEach((t=>{t&&at(t,0)})),st(t),t.on("beforeObserverCalls",(e=>{st(t),e.afterState.forEach(((t,n)=>{const r=e.beforeState.get(n)||0;if(r!==t){const t=e.doc.store.clients.get(n);if(!t)return;const i=j.g4(t,r);at(t,i)}}))})))}class ut{constructor(t){this.value=void 0,this.value=t}}function ht(t){return ArrayBuffer.isView(t)?new ut(t):new ut(Object.freeze(t))}function dt(t){const e=function(){var e;let n=null==(e=this[R])?void 0:e.implicitObserver;t._implicitObserver=n;const r=t.slice.bind(t).apply(t,arguments);return r.map((t=>{const e=_t(t,n);return n&&"object"===typeof e?I(e,n):e}))},n=function(t){return t.map((t=>{const e=yt(t);let n=Tt(e)||e;if(n instanceof ut&&(n=n.value),n instanceof j.QP&&n.parent)throw new Error("Not supported: reassigning object that already occurs in the tree.");return n}))},r=function(){return[].findIndex.apply(e.apply(this),arguments)},i={slice:e,unshift:(...e)=>(t.unshift(n(e)),t.lengthUntracked),push:(...e)=>(t.push(n(e)),t.lengthUntracked),insert:t.insert.bind(t),toJSON:t.toJSON.bind(t),forEach:function(){return[].forEach.apply(e.apply(this),arguments)},every:function(){return[].every.apply(e.apply(this),arguments)},filter:function(){return[].filter.apply(e.apply(this),arguments)},find:function(){return[].find.apply(e.apply(this),arguments)},findIndex:r,some:function(){return[].some.apply(e.apply(this),arguments)},includes:function(){return[].includes.apply(e.apply(this),arguments)},map:function(){return[].map.apply(e.apply(this),arguments)},indexOf:function(){const t=arguments[0];return r.call(this,(e=>At(e,t)))},splice:function(){let r=arguments[0]<0?t.length-Math.abs(arguments[0]):arguments[0],i=arguments[1],o=Array.from(Array.from(arguments).slice(2)),s=e.apply(this,[r,Number.isInteger(i)?r+i:void 0]);return t.doc?t.doc.transact((()=>{t.delete(r,i),t.insert(r,n(o))})):(t.delete(r,i),t.insert(r,n(o))),s}},o=[];for(let s in i)o[s]=i[s];return o}function ft(t){if("string"===typeof t&&t.trim().length){const e=Number(t);if(Number.isInteger(e))return e}return t}function pt(t,e=new j.mJ){if(e[C])throw new Error("unexpected");const n=dt(e),r=new Proxy(n,{set:(t,e,n)=>{const r=ft(e);if("number"!==typeof r)throw new Error;throw new Error("array assignment is not implemented / supported")},get:(t,n,r)=>{const i=ft(n);if(i===Et)return e;if("number"===typeof i){let t;var o;if(r&&r[R])t=null==(o=r[R])?void 0:o.implicitObserver,e._implicitObserver=t;let n=e.get(i);return n=_t(n,t),n}if(i===Symbol.toStringTag)return"Array";if(i===Symbol.iterator){const t=e.slice();return Reflect.get(t,i)}if("length"===i)return e.length;const s=Reflect.get(t,i,r);return s},deleteProperty:(t,n)=>{const r=ft(n);if("number"!==typeof r)throw new Error;return r<e.lengthUntracked&&r>=0&&(e.delete(r),!0)},has:(t,n)=>{const r=ft(n);return"number"!==typeof r?Reflect.has(t,r):r<e.lengthUntracked&&r>=0},getOwnPropertyDescriptor(t,n){const r=ft(n);return"length"===r?{enumerable:!1,configurable:!1,writable:!0}:"number"===typeof r&&r>=0&&r<e.lengthUntracked?{enumerable:!0,configurable:!0,writable:!0}:void 0},ownKeys:t=>{const n=[];for(let r=0;r<e.length;r++)n.push(r+"");return n.push("length"),n}});return n.push.apply(r,t),r}function mt(t,e=new j.D5){if(e[C])throw new Error("unexpected");const n=new Proxy({},{set:(t,n,r)=>{if("string"!==typeof n)throw new Error;const i=yt(r);let o=Tt(i)||i;if(o instanceof ut&&(o=o.value),o instanceof j.QP&&o.parent)throw new Error("Not supported: reassigning object that already occurs in the tree.");return e.set(n,o),!0},get:(t,n,r)=>{if(n===Et)return e;if("string"!==typeof n)return Reflect.get(t,n);let i;var o;r&&r[R]&&(i=null==(o=r[R])?void 0:o.implicitObserver,e._implicitObserver=i);let s=e.get(n);return s=_t(s,i),s},deleteProperty:(t,n)=>{if("string"!==typeof n)throw new Error;return!!e.has(n)&&(e.delete(n),!0)},has:(t,n)=>!("string"!==typeof n||!e.has(n)),getOwnPropertyDescriptor(t,n){if("string"===typeof n&&e.has(n))return{enumerable:!0,configurable:!0}},ownKeys:t=>Array.from(e.keys())});vt.set(e,n);for(let r in t)n[r]=t[r];return n}function gt(t){return t instanceof j.QP}const vt=new WeakMap;function _t(t,e){if(gt(t)){if(t._implicitObserver=e,t instanceof j.mJ||t instanceof j.D5){if(!vt.has(t)){const e=yt(t);vt.set(t,e)}t=vt.get(t)}else{if(!(t instanceof j.lt||t instanceof j.sI||t instanceof j.eI||t instanceof j.yP||t instanceof j.xv))throw new Error("unknown YType");O(t),t.__v_skip=!0}return t}return null===t?null:"object"===typeof t?ht(t):t}function yt(t){if(null===t||void 0===t)return t;if(t=Tt(t)||t,t instanceof j.mJ)return pt([],t);if(t instanceof j.D5)return mt({},t);if("string"===typeof t)return t;if(Array.isArray(t))return pt(t);if(t instanceof j.lt||t instanceof j.sI||t instanceof j.eI||t instanceof j.yP)return t;if(t instanceof j.xv)return t;if("object"===typeof t)return t instanceof ut?t:mt(t);if("number"===typeof t||"boolean"===typeof t)return t;throw new Error("invalid")}function bt(t){for(let[e,n]of Object.entries(t))if(Array.isArray(n)){if(0!==n.length)throw new Error("Root Array initializer must always be empty array")}else if(n&&"object"===typeof n){if(0!==Object.keys(n).length||Object.getPrototypeOf(n)!==Object.prototype)throw new Error("Root Object initializer must always be {}")}else if("xml"!==n&&"text"!==n)throw new Error("unknown Root initializer")}function wt(t,e,n){let r=e[n];if(r)return"xml"===r?t.getXmlFragment(n):"text"===r?t.getText(n):Array.isArray(r)?t.getArray(n):t.getMap(n);"__v_raw"!==n&&"__v_isRef"!==n&&"__v_isReadonly"!==n&&console.warn("property not found on root doc",n)}function xt(t,e){if(t[C])throw new Error("unexpected");bt(e);const n=new Proxy({},{set:(t,e,n)=>{if("string"!==typeof e)throw new Error;throw new Error("cannot set new elements on root doc")},get:(n,r,i)=>{if(r===Et)return t;if("string"!==typeof r)return Reflect.get(n,r);let o;var s;i&&i[R]&&(o=null==(s=i[R])?void 0:s.implicitObserver,t._implicitObserver=o);if("toJSON"===r){for(let r of Object.keys(e))wt(t,e,r);const n=Reflect.get(t,r);return n}let a=wt(t,e,r);return a=_t(a,o),a},deleteProperty:(t,e)=>{throw new Error("deleteProperty not available for doc")},has:(e,n)=>!("string"!==typeof n||!t.share.has(n)),getOwnPropertyDescriptor(e,n){if("string"===typeof n&&t.share.has(n)||"toJSON"===n)return{enumerable:!0,configurable:!0}},ownKeys:e=>Array.from(t.share.keys())});return vt.set(t,n),n}Y(r);const Et=Symbol("INTERNAL_SYMBOL");function St(t,e){const n=Tt(t)||t;if(!n)throw new Error("not a valid synced object");return n instanceof j.QW?(n.on("update",e),()=>{n.off("update",e)}):(n.observeDeep(e),()=>{n.unobserveDeep(e)})}function Mt(t){const e=Tt(t);if(!(e instanceof j.QW))throw new Error("store is not a valid syncedStore that maps to a Y.Doc");return e}function Tt(t){if("object"!==typeof t||null===t)return;const e=t[Et];return e&&(O(e),e.__v_skip=!0),e}function At(t,e){if(t===e)return!0;if("object"===typeof t&&"object"===typeof e){const n=Tt(t),r=Tt(e);return!(!n||!r)&&n===r}return!1}function Ct(t,e=new j.QW){return lt(e),xt(e,t)}},5989:function(t,e,n){"use strict";n.d(e,{Dp:function(){return o},Z$:function(){return r},kJ:function(){return s},s7:function(){return i}});n(7658);const r=t=>t[t.length-1],i=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},o=Array.from,s=Array.isArray},3388:function(t,e,n){"use strict";n.d(e,{$2:function(){return h},CY:function(){return o},Ko:function(){return s},Qn:function(){return i},RP:function(){return f},Tg:function(){return p},Vw:function(){return r},cq:function(){return a},jS:function(){return d},kr:function(){return u},rc:function(){return c},x1:function(){return l}});const r=1,i=2,o=4,s=8,a=32,c=64,l=128,u=31,h=63,d=127,f=2147483647,p=4294967295},3924:function(t,e,n){"use strict";n.d(e,{Ld:function(){return h},nY:function(){return f},r1:function(){return d}});var r=n(7862),i=n(893),o=n(3425),s=n(9674);const a=new Map;class c{constructor(t){this.room=t,this.onmessage=null,this._onChange=e=>e.key===t&&null!==this.onmessage&&this.onmessage({data:o.Gh(e.newValue||"")}),s.z2(this._onChange)}postMessage(t){s.XN.setItem(this.room,o.s3(o.eh(t)))}close(){s.F(this._onChange)}}const l="undefined"===typeof BroadcastChannel?c:BroadcastChannel,u=t=>r.Yu(a,t,(()=>{const e=i.Ue(),n=new l(t);return n.onmessage=t=>e.forEach((e=>e(t.data,"broadcastchannel"))),{bc:n,subs:e}})),h=(t,e)=>(u(t).subs.add(e),e),d=(t,e)=>{const n=u(t),r=n.subs.delete(e);return r&&0===n.subs.size&&(n.bc.close(),a.delete(t)),r},f=(t,e,n=null)=>{const r=u(t);r.bc.postMessage(e),r.subs.forEach((t=>t(e,n)))}},3425:function(t,e,n){"use strict";n.d(e,{Gh:function(){return f},Te:function(){return s},eh:function(){return a},f9:function(){return p},s3:function(){return d}});n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315),n(2801);var r=n(654),i=n(5342);const o=t=>new Uint8Array(t),s=(t,e,n)=>new Uint8Array(t,e,n),a=t=>new Uint8Array(t),c=t=>{let e="";for(let n=0;n<t.byteLength;n++)e+=r.IK(t[n]);return btoa(e)},l=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),u=t=>{const e=atob(t),n=o(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},h=t=>{const e=Buffer.from(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)},d=i.jU?c:l,f=i.jU?u:h,p=t=>{const e=o(t.byteLength);return e.set(t),e}},2294:function(t,e,n){"use strict";n.d(e,{HN:function(){return m},UF:function(){return R},XW:function(){return C},dD:function(){return P},kf:function(){return w},kj:function(){return g},l1:function(){return d},sO:function(){return O},v_:function(){return A},yg:function(){return v}});n(7658);var r=n(3425),i=n(3388),o=n(1383),s=n(4206),a=n(654),c=n(6969);const l=c.Ue("Unexpected end of array"),u=c.Ue("Integer out of Range");class h{constructor(t){this.arr=t,this.pos=0}}const d=t=>new h(t),f=t=>t.pos!==t.arr.length,p=(t,e)=>{const n=r.Te(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},m=t=>p(t,v(t)),g=t=>t.arr[t.pos++],v=t=>{let e=0,n=1;const r=t.arr.length;while(t.pos<r){const r=t.arr[t.pos++];if(e+=(r&i.jS)*n,n*=128,r<i.x1)return e;if(e>s.YM)throw u}throw l},_=t=>{let e=t.arr[t.pos++],n=e&i.$2,r=64;const o=(e&i.rc)>0?-1:1;if(0===(e&i.x1))return o*n;const a=t.arr.length;while(t.pos<a){if(e=t.arr[t.pos++],n+=(e&i.jS)*r,r*=128,e<i.x1)return o*n;if(n>s.YM)throw u}throw l},y=t=>{let e=v(t);if(0===e)return"";{let n=String.fromCodePoint(g(t));if(--e<100)while(e--)n+=String.fromCodePoint(g(t));else while(e>0){const r=e<1e4?e:1e4,i=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,i),e-=r}return decodeURIComponent(escape(n))}},b=t=>a.CO.decode(m(t)),w=a.CO?b:y,x=(t,e)=>{const n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},E=t=>x(t,4).getFloat32(0,!1),S=t=>x(t,8).getFloat64(0,!1),M=t=>x(t,8).getBigInt64(0,!1),T=[t=>{},t=>null,_,E,S,M,t=>!1,t=>!0,w,t=>{const e=v(t),n={};for(let r=0;r<e;r++){const e=w(t);n[e]=A(t)}return n},t=>{const e=v(t),n=[];for(let r=0;r<e;r++)n.push(A(t));return n},m],A=t=>T[127-g(t)](t);class C extends h{constructor(t,e){super(t),this.reader=e,this.s=null,this.count=0}read(){return 0===this.count&&(this.s=this.reader(this),f(this)?this.count=v(this)+1:this.count=-1),this.count--,this.s}}class R extends h{constructor(t){super(t),this.s=0,this.count=0}read(){if(0===this.count){this.s=_(this);const t=o.GR(this.s);this.count=1,t&&(this.s=-this.s,this.count=v(this)+2)}return this.count--,this.s}}class P extends h{constructor(t){super(t),this.s=0,this.count=0,this.diff=0}read(){if(0===this.count){const t=_(this),e=1&t;this.diff=o.GW(t/2),this.count=1,e&&(this.count=v(this)+2)}return this.s+=this.diff,this.count--,this.s}}class O{constructor(t){this.decoder=new R(t),this.str=w(this.decoder),this.spos=0}read(){const t=this.spos+this.decoder.read(),e=this.str.slice(this.spos,t);return this.spos=t,e}}},8148:function(t,e,n){"use strict";n.d(e,{$F:function(){return m},EM:function(){return O},GF:function(){return L},HE:function(){return I},HK:function(){return E},Mf:function(){return u},TS:function(){return U},_f:function(){return d},kE:function(){return h},mP:function(){return S},sX:function(){return N},uE:function(){return g},uw:function(){return x}});n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315),n(7658);var r=n(3425),i=n(1383),o=n(4206),s=n(3388),a=n(654),c=n(5989);class l{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const u=()=>new l,h=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},d=t=>{const e=new Uint8Array(h(t));let n=0;for(let r=0;r<t.bufs.length;r++){const i=t.bufs[r];e.set(i,n),n+=i.length}return e.set(r.Te(t.cbuf.buffer,0,t.cpos),n),e},f=(t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(r.Te(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(2*i.Fp(n,e)),t.cpos=0)},p=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(2*n),t.cpos=0),t.cbuf[t.cpos++]=e},m=p,g=(t,e)=>{while(e>s.jS)p(t,s.x1|s.jS&e),e=i.GW(e/128);p(t,s.jS&e)},v=(t,e)=>{const n=i.GR(e);n&&(e=-e),p(t,(e>s.$2?s.x1:0)|(n?s.rc:0)|s.$2&e),e=i.GW(e/64);while(e>0)p(t,(e>s.jS?s.x1:0)|s.jS&e),e=i.GW(e/128)},_=new Uint8Array(3e4),y=_.length/3,b=(t,e)=>{if(e.length<y){const n=a.YZ.encodeInto(e,_).written||0;g(t,n);for(let e=0;e<n;e++)p(t,_[e])}else S(t,a.lz(e))},w=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;g(t,r);for(let i=0;i<r;i++)p(t,n.codePointAt(i))},x=a.YZ&&a.YZ.encodeInto?b:w,E=(t,e)=>{const n=t.cbuf.length,r=t.cpos,o=i.VV(n-r,e.length),s=e.length-o;t.cbuf.set(e.subarray(0,o),r),t.cpos+=o,s>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(i.Fp(2*n,s)),t.cbuf.set(e.subarray(o)),t.cpos=s)},S=(t,e)=>{g(t,e.byteLength),E(t,e)},M=(t,e)=>{f(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},T=(t,e)=>M(t,4).setFloat32(0,e,!1),A=(t,e)=>M(t,8).setFloat64(0,e,!1),C=(t,e)=>M(t,8).setBigInt64(0,e,!1),R=new DataView(new ArrayBuffer(4)),P=t=>(R.setFloat32(0,t),R.getFloat32(0)===t),O=(t,e)=>{switch(typeof e){case"string":p(t,119),x(t,e);break;case"number":o.U(e)&&i.Wn(e)<=s.RP?(p(t,125),v(t,e)):P(e)?(p(t,124),T(t,e)):(p(t,123),A(t,e));break;case"bigint":p(t,122),C(t,e);break;case"object":if(null===e)p(t,126);else if(c.kJ(e)){p(t,117),g(t,e.length);for(let n=0;n<e.length;n++)O(t,e[n])}else if(e instanceof Uint8Array)p(t,116),S(t,e);else{p(t,118);const n=Object.keys(e);g(t,n.length);for(let r=0;r<n.length;r++){const i=n[r];x(t,i),O(t,e[i])}}break;case"boolean":p(t,e?120:121);break;default:p(t,127)}};class L extends l{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&g(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}const k=t=>{t.count>0&&(v(t.encoder,1===t.count?t.s:-t.s),t.count>1&&g(t.encoder,t.count-2))};class I{constructor(){this.encoder=new l,this.s=0,this.count=0}write(t){this.s===t?this.count++:(k(this),this.count=1,this.s=t)}toUint8Array(){return k(this),d(this.encoder)}}const D=t=>{if(t.count>0){const e=2*t.diff+(1===t.count?0:1);v(t.encoder,e),t.count>1&&g(t.encoder,t.count-2)}};class N{constructor(){this.encoder=new l,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(D(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return D(this),d(this.encoder)}}class U{constructor(){this.sarr=[],this.s="",this.lensE=new I}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){const t=new l;return this.sarr.push(this.s),this.s="",x(t,this.sarr.join("")),E(t,this.lensE.toUint8Array()),d(t)}}},5342:function(t,e,n){"use strict";n.d(e,{E0:function(){return p},jU:function(){return l},hH:function(){return v}});n(7658);var r=n(7862),i=n(654);const o=t=>void 0===t?null:t;var s=n(9674),a=n(7409);const c="undefined"!==typeof process&&process.release&&/node|io\.js/.test(process.release.name),l="undefined"!==typeof window&&"undefined"!==typeof document&&!c;"undefined"!==typeof navigator&&/Mac/.test(navigator.platform);let u;const h=[],d=()=>{if(void 0===u)if(c){u=r.Ue();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];"-"===r[0]?(null!==e&&u.set(e,""),e=r):null!==e?(u.set(e,r),e=null):h.push(r)}null!==e&&u.set(e,"")}else"object"===typeof location?(u=r.Ue(),(location.search||"?").slice(1).split("&").forEach((t=>{if(0!==t.length){const[e,n]=t.split("=");u.set(`--${i.NF(e,"-")}`,n),u.set(`-${i.NF(e,"-")}`,n)}}))):u=r.Ue();return u},f=t=>d().has(t),p=t=>o(c?{NODE_ENV:"production",BASE_URL:"/noosld/"}[t.toUpperCase()]:s.XN.getItem(t)),m=t=>f("--"+t)||null!==p(t),g=(m("production"),c&&a.gB({NODE_ENV:"production",BASE_URL:"/noosld/"}.FORCE_COLOR,["true","1","2"])),v=!f("no-colors")&&(!c||process.stdout.isTTY||g)&&(!c||f("color")||g||null!==p("COLORTERM")||(p("TERM")||"").includes("color"))},6969:function(t,e,n){"use strict";n.d(e,{Nw:function(){return i},Ue:function(){return r},zR:function(){return o}});n(1703);const r=t=>new Error(t),i=()=>{throw r("Method unimplemented")},o=()=>{throw r("Unexpected case")}},7409:function(t,e,n){"use strict";n.d(e,{Hi:function(){return l},PP:function(){return o},WY:function(){return s},gB:function(){return u},id:function(){return a}});n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315);var r=n(5989),i=n(1370);const o=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&o(t,e,n+1)}},s=()=>{},a=t=>t,c=(t,e)=>t===e,l=(t,e)=>{if(null==t||null==e)return c(t,e);if(t.constructor!==e.constructor)return!1;if(t===e)return!0;switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),e=new Uint8Array(e);case Uint8Array:if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;break;case Set:if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;break;case Map:if(t.size!==e.size)return!1;for(const n of t.keys())if(!e.has(n)||!l(t.get(n),e.get(n)))return!1;break;case Object:if(i.kE(t)!==i.kE(e))return!1;for(const n in t)if(!i.l$(t,n)||!l(t[n],e[n]))return!1;break;case Array:if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!l(t[n],e[n]))return!1;break;default:return!1}return!0},u=(t,e)=>e.includes(t);r.kJ},5409:function(t,e,n){"use strict";n.d(e,{Ej:function(){return l},Pl:function(){return a},ZA:function(){return h},s7:function(){return u},ud:function(){return p},Wd:function(){return f},hM:function(){return d},YW:function(){return c},WO:function(){return m},_X:function(){return g},YX:function(){return b}});n(7658);const r=Symbol;var i=n(313),o=n(5342),s=n(7409);const a=r(),c=r(),l=r(),u=r(),h=r(),d=r(),f=r(),p=r(),m=r(),g=t=>{const e=[],n=[];let r=0;for(;r<t.length;r++){const i=t[r];i.constructor===String||i.constructor===Number?e.push(i):i.constructor===Object&&n.push(JSON.stringify(i))}return n},v=[h,f,p,l];let _=0,y=i.ZG();const b=(t,e)=>{const n=v[_],r=o.E0("log"),a=null!==r&&("*"===r||"true"===r||new RegExp(r,"gi").test(e));return _=(_+1)%v.length,e+=": ",a?(...r)=>{const o=i.ZG(),s=o-y;y=o,t(n,e,m,...r.map((t=>"string"===typeof t||"symbol"===typeof t?t:JSON.stringify(t))),n," +"+s+"ms")}:s.WY}},6100:function(t,e,n){"use strict";n.d(e,{YX:function(){return g},S0:function(){return p}});n(7658);var r=n(5342),i=n(893);class o{constructor(t,e){this.left=t,this.right=e}}const s=(t,e)=>new o(t,e);var a=n(7862);const c="undefined"!==typeof document?document:{},l=("undefined"!==typeof DOMParser&&new DOMParser,t=>a.UI(t,((t,e)=>`${e}:${t};`)).join(""));c.ELEMENT_NODE,c.TEXT_NODE,c.CDATA_SECTION_NODE,c.COMMENT_NODE,c.DOCUMENT_NODE,c.DOCUMENT_TYPE_NODE,c.DOCUMENT_FRAGMENT_NODE;var u=n(5409);const h={[u.Pl]:s("font-weight","bold"),[u.YW]:s("font-weight","normal"),[u.Ej]:s("color","blue"),[u.ZA]:s("color","green"),[u.s7]:s("color","grey"),[u.hM]:s("color","red"),[u.Wd]:s("color","purple"),[u.ud]:s("color","orange"),[u.WO]:s("color","black")},d=t=>{const e=[],n=[],r=a.Ue();let i=[],o=0;for(;o<t.length;o++){const i=t[o],s=h[i];if(void 0!==s)r.set(s.left,s.right);else{if(i.constructor!==String&&i.constructor!==Number)break;{const t=l(r);o>0||t.length>0?(e.push("%c"+i),n.push(t)):e.push(i)}}}for(o>0&&(i=n,i.unshift(e.join("")));o<t.length;o++){const e=t[o];e instanceof Symbol||i.push(e)}return i},f=r.hH?d:u._X,p=(...t)=>{console.log(...f(t)),m.forEach((e=>e.print(t)))},m=i.Ue();const g=t=>u.YX(p,t)},7862:function(t,e,n){"use strict";n.d(e,{JG:function(){return i},UI:function(){return s},Ue:function(){return r},Yj:function(){return a},Yu:function(){return o}});n(7658);const r=()=>new Map,i=t=>{const e=r();return t.forEach(((t,n)=>{e.set(n,t)})),e},o=(t,e,n)=>{let r=t.get(e);return void 0===r&&t.set(e,r=n()),r},s=(t,e)=>{const n=[];for(const[r,i]of t)n.push(e(i,r));return n},a=(t,e)=>{for(const[n,r]of t)if(e(r,n))return!0;return!1}},1383:function(t,e,n){"use strict";n.d(e,{Fp:function(){return a},GR:function(){return l},GW:function(){return r},VV:function(){return s},Wn:function(){return i},mv:function(){return o},sQ:function(){return c}});const r=Math.floor,i=(Math.ceil,Math.abs),o=(Math.imul,Math.round,Math.log10),s=(Math.log2,Math.log,Math.sqrt,(t,e)=>t<e?t:e),a=(t,e)=>t>e?t:e,c=(Number.isNaN,Math.pow),l=(Math.sign,t=>0!==t?t<0:1/t<0)},4206:function(t,e,n){"use strict";n.d(e,{U:function(){return s},YM:function(){return o}});var r=n(1383),i=n(3388);const o=Number.MAX_SAFE_INTEGER,s=(Number.MIN_SAFE_INTEGER,i.RP,i.Tg,Number.isInteger||(t=>"number"===typeof t&&isFinite(t)&&r.GW(t)===t));Number.isNaN,Number.parseInt},1370:function(t,e,n){"use strict";n.d(e,{$m:function(){return h},Ed:function(){return o},UI:function(){return s},f0:function(){return r},kE:function(){return a},l$:function(){return u},xb:function(){return c}});n(7658);const r=Object.assign,i=Object.keys,o=(t,e)=>{for(const n in t)e(t[n],n)},s=(t,e)=>{const n=[];for(const r in t)n.push(e(t[r],r));return n},a=t=>i(t).length,c=t=>{for(const e in t)return!1;return!0},l=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},u=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),h=(t,e)=>t===e||a(t)===a(e)&&l(t,((t,n)=>(void 0!==t||u(e,n))&&e[n]===t))},6055:function(t,e,n){"use strict";n.d(e,{y:function(){return s}});var r=n(7862),i=n(893),o=n(5989);class s{constructor(){this._observers=r.Ue()}on(t,e){r.Yu(this._observers,t,i.Ue).add(e)}once(t,e){const n=(...r)=>{this.off(t,n),e(...r)};this.on(t,n)}off(t,e){const n=this._observers.get(t);void 0!==n&&(n.delete(e),0===n.size&&this._observers.delete(t))}emit(t,e){return o.Dp((this._observers.get(t)||r.Ue()).values()).forEach((t=>t(...e)))}destroy(){this._observers=r.Ue()}}},7244:function(t,e,n){"use strict";n.d(e,{DB:function(){return o},Ue:function(){return r},d1:function(){return i}});n(1703);const r=t=>new Promise(t),i=(Promise.all.bind(Promise),t=>Promise.reject(t)),o=t=>Promise.resolve(t)},4373:function(t,e,n){"use strict";n.d(e,{TN:function(){return i},U7:function(){return o},k$:function(){return a}});n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315);crypto.subtle;const r=crypto.getRandomValues.bind(crypto),i=Math.random,o=()=>r(new Uint32Array(1))[0],s=[1e7]+-1e3+-4e3+-8e3+-1e11,a=()=>s.replace(/[018]/g,(t=>(t^o()&15>>t/4).toString(16)))},893:function(t,e,n){"use strict";n.d(e,{Ue:function(){return r}});const r=()=>new Set},9674:function(t,e,n){"use strict";n.d(e,{F:function(){return c},XN:function(){return s},z2:function(){return a}});class r{constructor(){this.map=new Map}setItem(t,e){this.map.set(t,e)}getItem(t){return this.map.get(t)}}let i=new r,o=!0;try{"undefined"!==typeof localStorage&&(i=localStorage,o=!1)}catch(l){}const s=i,a=t=>o||addEventListener("storage",t),c=t=>o||removeEventListener("storage",t)},654:function(t,e,n){"use strict";n.d(e,{CO:function(){return f},IK:function(){return r},NF:function(){return c},YZ:function(){return u},lz:function(){return d}});n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315);const r=String.fromCharCode,i=(String.fromCodePoint,r(65535),t=>t.toLowerCase()),o=/^\s*/g,s=t=>t.replace(o,""),a=/([A-Z])/g,c=(t,e)=>s(t.replace(a,(t=>`${e}${i(t)}`))),l=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.codePointAt(i);return r},u="undefined"!==typeof TextEncoder?new TextEncoder:null,h=t=>u.encode(t),d=u?h:l;let f="undefined"===typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});f&&1===f.decode(new Uint8Array).length&&(f=null)},313:function(t,e,n){"use strict";n.d(e,{ZG:function(){return r}});const r=Date.now},2483:function(t,e,n){"use strict";n.d(e,{PO:function(){return B},p7:function(){return ee}});n(7658),n(1703);var r=n(3396),i=n(4870);
/*!
  * vue-router v4.2.2
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */
const o="undefined"!==typeof window;function s(t){return t.__esModule||"Module"===t[Symbol.toStringTag]}const a=Object.assign;function c(t,e){const n={};for(const r in e){const i=e[r];n[r]=u(i)?i.map(t):t(i)}return n}const l=()=>{},u=Array.isArray;const h=/\/$/,d=t=>t.replace(h,"");function f(t,e,n="/"){let r,i={},o="",s="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(r=e.slice(0,c),o=e.slice(c+1,a>-1?a:e.length),i=t(o)),a>-1&&(r=r||e.slice(0,a),s=e.slice(a,e.length)),r=w(null!=r?r:e,n),{fullPath:r+(o&&"?")+o+s,path:r,query:i,hash:s}}function p(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function m(t,e){return e&&t.toLowerCase().startsWith(e.toLowerCase())?t.slice(e.length)||"/":t}function g(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&v(e.matched[r],n.matched[i])&&_(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function v(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function _(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!y(t[n],e[n]))return!1;return!0}function y(t,e){return u(t)?b(t,e):u(e)?b(e,t):t===e}function b(t,e){return u(e)?t.length===e.length&&t.every(((t,n)=>t===e[n])):1===t.length&&t[0]===e}function w(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];".."!==i&&"."!==i||r.push("");let o,s,a=n.length-1;for(o=0;o<r.length;o++)if(s=r[o],"."!==s){if(".."!==s)break;a>1&&a--}return n.slice(0,a).join("/")+"/"+r.slice(o-(o===r.length?1:0)).join("/")}var x,E;(function(t){t["pop"]="pop",t["push"]="push"})(x||(x={})),function(t){t["back"]="back",t["forward"]="forward",t["unknown"]=""}(E||(E={}));function S(t){if(!t)if(o){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return"/"!==t[0]&&"#"!==t[0]&&(t="/"+t),d(t)}const M=/^[^#]+#/;function T(t,e){return t.replace(M,"#")+e}function A(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const C=()=>({left:window.pageXOffset,top:window.pageYOffset});function R(t){let e;if("el"in t){const n=t.el,r="string"===typeof n&&n.startsWith("#");0;const i="string"===typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=A(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(null!=e.left?e.left:window.pageXOffset,null!=e.top?e.top:window.pageYOffset)}function P(t,e){const n=history.state?history.state.position-e:-1;return n+t}const O=new Map;function L(t,e){O.set(t,e)}function k(t){const e=O.get(t);return O.delete(t),e}let I=()=>location.protocol+"//"+location.host;function D(t,e){const{pathname:n,search:r,hash:i}=e,o=t.indexOf("#");if(o>-1){let e=i.includes(t.slice(o))?t.slice(o).length:1,n=i.slice(e);return"/"!==n[0]&&(n="/"+n),m(n,"")}const s=m(n,t);return s+r+i}function N(t,e,n,r){let i=[],o=[],s=null;const c=({state:o})=>{const a=D(t,location),c=n.value,l=e.value;let u=0;if(o){if(n.value=a,e.value=o,s&&s===c)return void(s=null);u=l?o.position-l.position:0}else r(a);i.forEach((t=>{t(n.value,c,{delta:u,type:x.pop,direction:u?u>0?E.forward:E.back:E.unknown})}))};function l(){s=n.value}function u(t){i.push(t);const e=()=>{const e=i.indexOf(t);e>-1&&i.splice(e,1)};return o.push(e),e}function h(){const{history:t}=window;t.state&&t.replaceState(a({},t.state,{scroll:C()}),"")}function d(){for(const t of o)t();o=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:l,listen:u,destroy:d}}function U(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?C():null}}function F(t){const{history:e,location:n}=window,r={value:D(t,n)},i={value:e.state};function o(r,o,s){const a=t.indexOf("#"),c=a>-1?(n.host&&document.querySelector("base")?t:t.slice(a))+r:I()+t+r;try{e[s?"replaceState":"pushState"](o,"",c),i.value=o}catch(l){console.error(l),n[s?"replace":"assign"](c)}}function s(t,n){const s=a({},e.state,U(i.value.back,t,i.value.forward,!0),n,{position:i.value.position});o(t,s,!0),r.value=t}function c(t,n){const s=a({},i.value,e.state,{forward:t,scroll:C()});o(s.current,s,!0);const c=a({},U(r.value,t,null),{position:s.position+1},n);o(t,c,!1),r.value=t}return i.value||o(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0),{location:r,state:i,push:c,replace:s}}function B(t){t=S(t);const e=F(t),n=N(t,e.state,e.location,e.replace);function r(t,e=!0){e||n.pauseListeners(),history.go(t)}const i=a({location:"",base:t,go:r,createHref:T.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function z(t){return"string"===typeof t||t&&"object"===typeof t}function j(t){return"string"===typeof t||"symbol"===typeof t}const H={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},V=Symbol("");var G;(function(t){t[t["aborted"]=4]="aborted",t[t["cancelled"]=8]="cancelled",t[t["duplicated"]=16]="duplicated"})(G||(G={}));function W(t,e){return a(new Error,{type:t,[V]:!0},e)}function q(t,e){return t instanceof Error&&V in t&&(null==e||!!(t.type&e))}const X="[^/]+?",Y={sensitive:!1,strict:!1,start:!0,end:!0},$=/[.+*?^${}()[\]/\\]/g;function K(t,e){const n=a({},Y,e),r=[];let i=n.start?"^":"";const o=[];for(const a of t){const t=a.length?[]:[90];n.strict&&!a.length&&(i+="/");for(let e=0;e<a.length;e++){const r=a[e];let s=40+(n.sensitive?.25:0);if(0===r.type)e||(i+="/"),i+=r.value.replace($,"\\$&"),s+=40;else if(1===r.type){const{value:t,repeatable:n,optional:c,regexp:l}=r;o.push({name:t,repeatable:n,optional:c});const u=l||X;if(u!==X){s+=10;try{new RegExp(`(${u})`)}catch(h){throw new Error(`Invalid custom RegExp for param "${t}" (${u}): `+h.message)}}let d=n?`((?:${u})(?:/(?:${u}))*)`:`(${u})`;e||(d=c&&a.length<2?`(?:/${d})`:"/"+d),c&&(d+="?"),i+=d,s+=20,c&&(s+=-8),n&&(s+=-20),".*"===u&&(s+=-50)}t.push(s)}r.push(t)}if(n.strict&&n.end){const t=r.length-1;r[t][r[t].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const s=new RegExp(i,n.sensitive?"":"i");function c(t){const e=t.match(s),n={};if(!e)return null;for(let r=1;r<e.length;r++){const t=e[r]||"",i=o[r-1];n[i.name]=t&&i.repeatable?t.split("/"):t}return n}function l(e){let n="",r=!1;for(const i of t){r&&n.endsWith("/")||(n+="/"),r=!1;for(const t of i)if(0===t.type)n+=t.value;else if(1===t.type){const{value:o,repeatable:s,optional:a}=t,c=o in e?e[o]:"";if(u(c)&&!s)throw new Error(`Provided param "${o}" is an array but it is not repeatable (* or + modifiers)`);const l=u(c)?c.join("/"):c;if(!l){if(!a)throw new Error(`Missing required param "${o}"`);i.length<2&&(n.endsWith("/")?n=n.slice(0,-1):r=!0)}n+=l}}return n||"/"}return{re:s,score:r,keys:o,parse:c,stringify:l}}function J(t,e){let n=0;while(n<t.length&&n<e.length){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?1===t.length&&80===t[0]?-1:1:t.length>e.length?1===e.length&&80===e[0]?1:-1:0}function Z(t,e){let n=0;const r=t.score,i=e.score;while(n<r.length&&n<i.length){const t=J(r[n],i[n]);if(t)return t;n++}if(1===Math.abs(i.length-r.length)){if(Q(r))return 1;if(Q(i))return-1}return i.length-r.length}function Q(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const tt={type:0,value:""},et=/[a-zA-Z0-9_]/;function nt(t){if(!t)return[[]];if("/"===t)return[[tt]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(t){throw new Error(`ERR (${n})/"${l}": ${t}`)}let n=0,r=n;const i=[];let o;function s(){o&&i.push(o),o=[]}let a,c=0,l="",u="";function h(){l&&(0===n?o.push({type:0,value:l}):1===n||2===n||3===n?(o.length>1&&("*"===a||"+"===a)&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:l,regexp:u,repeatable:"*"===a||"+"===a,optional:"*"===a||"?"===a})):e("Invalid state to consume buffer"),l="")}function d(){l+=a}while(c<t.length)if(a=t[c++],"\\"!==a||2===n)switch(n){case 0:"/"===a?(l&&h(),s()):":"===a?(h(),n=1):d();break;case 4:d(),n=r;break;case 1:"("===a?n=2:et.test(a)?d():(h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&c--);break;case 2:")"===a?"\\"==u[u.length-1]?u=u.slice(0,-1)+a:n=3:u+=a;break;case 3:h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&c--,u="";break;default:e("Unknown state");break}else r=n,n=4;return 2===n&&e(`Unfinished custom RegExp for param "${l}"`),h(),s(),i}function rt(t,e,n){const r=K(nt(t.path),n);const i=a(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf===!e.record.aliasOf&&e.children.push(i),i}function it(t,e){const n=[],r=new Map;function i(t){return r.get(t)}function o(t,n,r){const i=!r,c=st(t);c.aliasOf=r&&r.record;const h=ut(e,t),d=[c];if("alias"in t){const e="string"===typeof t.alias?[t.alias]:t.alias;for(const t of e)d.push(a({},c,{components:r?r.record.components:c.components,path:t,aliasOf:r?r.record:c}))}let f,p;for(const e of d){const{path:a}=e;if(n&&"/"!==a[0]){const t=n.record.path,r="/"===t[t.length-1]?"":"/";e.path=n.record.path+(a&&r+a)}if(f=rt(e,n,h),r?r.alias.push(f):(p=p||f,p!==f&&p.alias.push(f),i&&t.name&&!ct(f)&&s(t.name)),c.children){const t=c.children;for(let e=0;e<t.length;e++)o(t[e],f,r&&r.children[e])}r=r||f,(f.record.components&&Object.keys(f.record.components).length||f.record.name||f.record.redirect)&&u(f)}return p?()=>{s(p)}:l}function s(t){if(j(t)){const e=r.get(t);e&&(r.delete(t),n.splice(n.indexOf(e),1),e.children.forEach(s),e.alias.forEach(s))}else{const e=n.indexOf(t);e>-1&&(n.splice(e,1),t.record.name&&r.delete(t.record.name),t.children.forEach(s),t.alias.forEach(s))}}function c(){return n}function u(t){let e=0;while(e<n.length&&Z(t,n[e])>=0&&(t.record.path!==n[e].record.path||!ht(t,n[e])))e++;n.splice(e,0,t),t.record.name&&!ct(t)&&r.set(t.record.name,t)}function h(t,e){let i,o,s,c={};if("name"in t&&t.name){if(i=r.get(t.name),!i)throw W(1,{location:t});0,s=i.record.name,c=a(ot(e.params,i.keys.filter((t=>!t.optional)).map((t=>t.name))),t.params&&ot(t.params,i.keys.map((t=>t.name)))),o=i.stringify(c)}else if("path"in t)o=t.path,i=n.find((t=>t.re.test(o))),i&&(c=i.parse(o),s=i.record.name);else{if(i=e.name?r.get(e.name):n.find((t=>t.re.test(e.path))),!i)throw W(1,{location:t,currentLocation:e});s=i.record.name,c=a({},e.params,t.params),o=i.stringify(c)}const l=[];let u=i;while(u)l.unshift(u.record),u=u.parent;return{name:s,path:o,params:c,matched:l,meta:lt(l)}}return e=ut({strict:!1,end:!0,sensitive:!1},e),t.forEach((t=>o(t))),{addRoute:o,resolve:h,removeRoute:s,getRoutes:c,getRecordMatcher:i}}function ot(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function st(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:at(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function at(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]="boolean"===typeof n?n:n[r];return e}function ct(t){while(t){if(t.record.aliasOf)return!0;t=t.parent}return!1}function lt(t){return t.reduce(((t,e)=>a(t,e.meta)),{})}function ut(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function ht(t,e){return e.children.some((e=>e===t||ht(t,e)))}const dt=/#/g,ft=/&/g,pt=/\//g,mt=/=/g,gt=/\?/g,vt=/\+/g,_t=/%5B/g,yt=/%5D/g,bt=/%5E/g,wt=/%60/g,xt=/%7B/g,Et=/%7C/g,St=/%7D/g,Mt=/%20/g;function Tt(t){return encodeURI(""+t).replace(Et,"|").replace(_t,"[").replace(yt,"]")}function At(t){return Tt(t).replace(xt,"{").replace(St,"}").replace(bt,"^")}function Ct(t){return Tt(t).replace(vt,"%2B").replace(Mt,"+").replace(dt,"%23").replace(ft,"%26").replace(wt,"`").replace(xt,"{").replace(St,"}").replace(bt,"^")}function Rt(t){return Ct(t).replace(mt,"%3D")}function Pt(t){return Tt(t).replace(dt,"%23").replace(gt,"%3F")}function Ot(t){return null==t?"":Pt(t).replace(pt,"%2F")}function Lt(t){try{return decodeURIComponent(""+t)}catch(e){}return""+t}function kt(t){const e={};if(""===t||"?"===t)return e;const n="?"===t[0],r=(n?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const t=r[i].replace(vt," "),n=t.indexOf("="),o=Lt(n<0?t:t.slice(0,n)),s=n<0?null:Lt(t.slice(n+1));if(o in e){let t=e[o];u(t)||(t=e[o]=[t]),t.push(s)}else e[o]=s}return e}function It(t){let e="";for(let n in t){const r=t[n];if(n=Rt(n),null==r){void 0!==r&&(e+=(e.length?"&":"")+n);continue}const i=u(r)?r.map((t=>t&&Ct(t))):[r&&Ct(r)];i.forEach((t=>{void 0!==t&&(e+=(e.length?"&":"")+n,null!=t&&(e+="="+t))}))}return e}function Dt(t){const e={};for(const n in t){const r=t[n];void 0!==r&&(e[n]=u(r)?r.map((t=>null==t?null:""+t)):null==r?r:""+r)}return e}const Nt=Symbol(""),Ut=Symbol(""),Ft=Symbol(""),Bt=Symbol(""),zt=Symbol("");function jt(){let t=[];function e(e){return t.push(e),()=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function Ht(t,e,n,r,i){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise(((s,a)=>{const c=t=>{!1===t?a(W(4,{from:n,to:e})):t instanceof Error?a(t):z(t)?a(W(2,{from:e,to:t})):(o&&r.enterCallbacks[i]===o&&"function"===typeof t&&o.push(t),s())},l=t.call(r&&r.instances[i],e,n,c);let u=Promise.resolve(l);t.length<3&&(u=u.then(c)),u.catch((t=>a(t)))}))}function Vt(t,e,n,r){const i=[];for(const o of t){0;for(const t in o.components){let a=o.components[t];if("beforeRouteEnter"===e||o.instances[t])if(Gt(a)){const s=a.__vccOpts||a,c=s[e];c&&i.push(Ht(c,n,r,o,t))}else{let c=a();0,i.push((()=>c.then((i=>{if(!i)return Promise.reject(new Error(`Couldn't resolve component "${t}" at "${o.path}"`));const a=s(i)?i.default:i;o.components[t]=a;const c=a.__vccOpts||a,l=c[e];return l&&Ht(l,n,r,o,t)()}))))}}}return i}function Gt(t){return"object"===typeof t||"displayName"in t||"props"in t||"__vccOpts"in t}function Wt(t){const e=(0,r.f3)(Ft),n=(0,r.f3)(Bt),o=(0,r.Fl)((()=>e.resolve((0,i.SU)(t.to)))),s=(0,r.Fl)((()=>{const{matched:t}=o.value,{length:e}=t,r=t[e-1],i=n.matched;if(!r||!i.length)return-1;const s=i.findIndex(v.bind(null,r));if(s>-1)return s;const a=Kt(t[e-2]);return e>1&&Kt(r)===a&&i[i.length-1].path!==a?i.findIndex(v.bind(null,t[e-2])):s})),a=(0,r.Fl)((()=>s.value>-1&&$t(n.params,o.value.params))),c=(0,r.Fl)((()=>s.value>-1&&s.value===n.matched.length-1&&_(n.params,o.value.params)));function u(n={}){return Yt(n)?e[(0,i.SU)(t.replace)?"replace":"push"]((0,i.SU)(t.to)).catch(l):Promise.resolve()}return{route:o,href:(0,r.Fl)((()=>o.value.href)),isActive:a,isExactActive:c,navigate:u}}const qt=(0,r.aZ)({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Wt,setup(t,{slots:e}){const n=(0,i.qj)(Wt(t)),{options:o}=(0,r.f3)(Ft),s=(0,r.Fl)((()=>({[Jt(t.activeClass,o.linkActiveClass,"router-link-active")]:n.isActive,[Jt(t.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{const i=e.default&&e.default(n);return t.custom?i:(0,r.h)("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),Xt=qt;function Yt(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&(void 0===t.button||0===t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function $t(t,e){for(const n in e){const r=e[n],i=t[n];if("string"===typeof r){if(r!==i)return!1}else if(!u(i)||i.length!==r.length||r.some(((t,e)=>t!==i[e])))return!1}return!0}function Kt(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Jt=(t,e,n)=>null!=t?t:null!=e?e:n,Zt=(0,r.aZ)({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const o=(0,r.f3)(zt),s=(0,r.Fl)((()=>t.route||o.value)),c=(0,r.f3)(Ut,0),l=(0,r.Fl)((()=>{let t=(0,i.SU)(c);const{matched:e}=s.value;let n;while((n=e[t])&&!n.components)t++;return t})),u=(0,r.Fl)((()=>s.value.matched[l.value]));(0,r.JJ)(Ut,(0,r.Fl)((()=>l.value+1))),(0,r.JJ)(Nt,u),(0,r.JJ)(zt,s);const h=(0,i.iH)();return(0,r.YP)((()=>[h.value,u.value,t.name]),(([t,e,n],[r,i,o])=>{e&&(e.instances[n]=t,i&&i!==e&&t&&t===r&&(e.leaveGuards.size||(e.leaveGuards=i.leaveGuards),e.updateGuards.size||(e.updateGuards=i.updateGuards))),!t||!e||i&&v(e,i)&&r||(e.enterCallbacks[n]||[]).forEach((e=>e(t)))}),{flush:"post"}),()=>{const i=s.value,o=t.name,c=u.value,l=c&&c.components[o];if(!l)return Qt(n.default,{Component:l,route:i});const d=c.props[o],f=d?!0===d?i.params:"function"===typeof d?d(i):d:null,p=t=>{t.component.isUnmounted&&(c.instances[o]=null)},m=(0,r.h)(l,a({},f,e,{onVnodeUnmounted:p,ref:h}));return Qt(n.default,{Component:m,route:i})||m}}});function Qt(t,e){if(!t)return null;const n=t(e);return 1===n.length?n[0]:n}const te=Zt;function ee(t){const e=it(t.routes,t),n=t.parseQuery||kt,s=t.stringifyQuery||It,h=t.history;const d=jt(),m=jt(),v=jt(),_=(0,i.XI)(H);let y=H;o&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const b=c.bind(null,(t=>""+t)),w=c.bind(null,Ot),E=c.bind(null,Lt);function S(t,n){let r,i;return j(t)?(r=e.getRecordMatcher(t),i=n):i=t,e.addRoute(i,r)}function M(t){const n=e.getRecordMatcher(t);n&&e.removeRoute(n)}function T(){return e.getRoutes().map((t=>t.record))}function A(t){return!!e.getRecordMatcher(t)}function O(t,r){if(r=a({},r||_.value),"string"===typeof t){const i=f(n,t,r.path),o=e.resolve({path:i.path},r),s=h.createHref(i.fullPath);return a(i,o,{params:E(o.params),hash:Lt(i.hash),redirectedFrom:void 0,href:s})}let i;if("path"in t)i=a({},t,{path:f(n,t.path,r.path).path});else{const e=a({},t.params);for(const t in e)null==e[t]&&delete e[t];i=a({},t,{params:w(e)}),r.params=w(r.params)}const o=e.resolve(i,r),c=t.hash||"";o.params=b(E(o.params));const l=p(s,a({},t,{hash:At(c),path:o.path})),u=h.createHref(l);return a({fullPath:l,hash:c,query:s===It?Dt(t.query):t.query||{}},o,{redirectedFrom:void 0,href:u})}function I(t){return"string"===typeof t?f(n,t,_.value.path):a({},t)}function D(t,e){if(y!==t)return W(8,{from:e,to:t})}function N(t){return B(t)}function U(t){return N(a(I(t),{replace:!0}))}function F(t){const e=t.matched[t.matched.length-1];if(e&&e.redirect){const{redirect:n}=e;let r="function"===typeof n?n(t):n;return"string"===typeof r&&(r=r.includes("?")||r.includes("#")?r=I(r):{path:r},r.params={}),a({query:t.query,hash:t.hash,params:"path"in r?{}:t.params},r)}}function B(t,e){const n=y=O(t),r=_.value,i=t.state,o=t.force,c=!0===t.replace,l=F(n);if(l)return B(a(I(l),{state:"object"===typeof l?a({},i,l.state):i,force:o,replace:c}),e||n);const u=n;let h;return u.redirectedFrom=e,!o&&g(s,r,n)&&(h=W(16,{to:u,from:r}),rt(r,r,!0,!1)),(h?Promise.resolve(h):G(u,r)).catch((t=>q(t)?q(t,2)?t:nt(t):tt(t,u,r))).then((t=>{if(t){if(q(t,2))return B(a({replace:c},I(t.to),{state:"object"===typeof t.to?a({},i,t.to.state):i,force:o}),e||u)}else t=Y(u,r,!0,c,i);return X(u,r,t),t}))}function z(t,e){const n=D(t,e);return n?Promise.reject(n):Promise.resolve()}function V(t){const e=at.values().next().value;return e&&"function"===typeof e.runWithContext?e.runWithContext(t):t()}function G(t,e){let n;const[r,i,o]=ne(t,e);n=Vt(r.reverse(),"beforeRouteLeave",t,e);for(const a of r)a.leaveGuards.forEach((r=>{n.push(Ht(r,t,e))}));const s=z.bind(null,t,e);return n.push(s),lt(n).then((()=>{n=[];for(const r of d.list())n.push(Ht(r,t,e));return n.push(s),lt(n)})).then((()=>{n=Vt(i,"beforeRouteUpdate",t,e);for(const r of i)r.updateGuards.forEach((r=>{n.push(Ht(r,t,e))}));return n.push(s),lt(n)})).then((()=>{n=[];for(const r of t.matched)if(r.beforeEnter&&!e.matched.includes(r))if(u(r.beforeEnter))for(const i of r.beforeEnter)n.push(Ht(i,t,e));else n.push(Ht(r.beforeEnter,t,e));return n.push(s),lt(n)})).then((()=>(t.matched.forEach((t=>t.enterCallbacks={})),n=Vt(o,"beforeRouteEnter",t,e),n.push(s),lt(n)))).then((()=>{n=[];for(const r of m.list())n.push(Ht(r,t,e));return n.push(s),lt(n)})).catch((t=>q(t,8)?t:Promise.reject(t)))}function X(t,e,n){for(const r of v.list())V((()=>r(t,e,n)))}function Y(t,e,n,r,i){const s=D(t,e);if(s)return s;const c=e===H,l=o?history.state:{};n&&(r||c?h.replace(t.fullPath,a({scroll:c&&l&&l.scroll},i)):h.push(t.fullPath,i)),_.value=t,rt(t,e,n,c),nt()}let $;function K(){$||($=h.listen(((t,e,n)=>{if(!ct.listening)return;const r=O(t),i=F(r);if(i)return void B(a(i,{replace:!0}),r).catch(l);y=r;const s=_.value;o&&L(P(s.fullPath,n.delta),C()),G(r,s).catch((t=>q(t,12)?t:q(t,2)?(B(t.to,r).then((t=>{q(t,20)&&!n.delta&&n.type===x.pop&&h.go(-1,!1)})).catch(l),Promise.reject()):(n.delta&&h.go(-n.delta,!1),tt(t,r,s)))).then((t=>{t=t||Y(r,s,!1),t&&(n.delta&&!q(t,8)?h.go(-n.delta,!1):n.type===x.pop&&q(t,20)&&h.go(-1,!1)),X(r,s,t)})).catch(l)})))}let J,Z=jt(),Q=jt();function tt(t,e,n){nt(t);const r=Q.list();return r.length?r.forEach((r=>r(t,e,n))):console.error(t),Promise.reject(t)}function et(){return J&&_.value!==H?Promise.resolve():new Promise(((t,e)=>{Z.add([t,e])}))}function nt(t){return J||(J=!t,K(),Z.list().forEach((([e,n])=>t?n(t):e())),Z.reset()),t}function rt(e,n,i,s){const{scrollBehavior:a}=t;if(!o||!a)return Promise.resolve();const c=!i&&k(P(e.fullPath,0))||(s||!i)&&history.state&&history.state.scroll||null;return(0,r.Y3)().then((()=>a(e,n,c))).then((t=>t&&R(t))).catch((t=>tt(t,e,n)))}const ot=t=>h.go(t);let st;const at=new Set,ct={currentRoute:_,listening:!0,addRoute:S,removeRoute:M,hasRoute:A,getRoutes:T,resolve:O,options:t,push:N,replace:U,go:ot,back:()=>ot(-1),forward:()=>ot(1),beforeEach:d.add,beforeResolve:m.add,afterEach:v.add,onError:Q.add,isReady:et,install(t){const e=this;t.component("RouterLink",Xt),t.component("RouterView",te),t.config.globalProperties.$router=e,Object.defineProperty(t.config.globalProperties,"$route",{enumerable:!0,get:()=>(0,i.SU)(_)}),o&&!st&&_.value===H&&(st=!0,N(h.location).catch((t=>{0})));const n={};for(const i in H)n[i]=(0,r.Fl)((()=>_.value[i]));t.provide(Ft,e),t.provide(Bt,(0,i.qj)(n)),t.provide(zt,_);const s=t.unmount;at.add(t),t.unmount=function(){at.delete(t),at.size<1&&(y=H,$&&$(),$=null,_.value=H,st=!1,J=!1),s()}}};function lt(t){return t.reduce(((t,e)=>t.then((()=>V(e)))),Promise.resolve())}return ct}function ne(t,e){const n=[],r=[],i=[],o=Math.max(e.matched.length,t.matched.length);for(let s=0;s<o;s++){const o=e.matched[s];o&&(t.matched.find((t=>v(t,o)))?r.push(o):n.push(o));const a=t.matched[s];a&&(e.matched.find((t=>v(t,a)))||i.push(a))}return[n,r,i]}},3089:function(t,e,n){"use strict";n.d(e,{H7:function(){return P}});var r=n(567),i=(n(1703),n(7244)),o=n(6969);const s=t=>i.Ue(((e,n)=>{t.onerror=t=>n(new Error(t.target.error)),t.onsuccess=t=>e(t.target.result)})),a=(t,e)=>i.Ue(((n,r)=>{const i=indexedDB.open(t);i.onupgradeneeded=t=>e(t.target.result),i.onerror=t=>r(o.Ue(t.target.error)),i.onsuccess=t=>{const e=t.target.result;e.onversionchange=()=>{e.close()},"undefined"!==typeof addEventListener&&addEventListener("unload",(()=>e.close())),n(e)}})),c=t=>s(indexedDB.deleteDatabase(t)),l=(t,e)=>e.forEach((e=>t.createObjectStore.apply(t,e))),u=(t,e,n="readwrite")=>{const r=t.transaction(e,n);return e.map((t=>w(r,t)))},h=(t,e)=>s(t.count(e)),d=(t,e)=>s(t.get(e)),f=(t,e)=>s(t.delete(e)),p=(t,e,n)=>s(t.put(e,n)),m=(t,e)=>s(t.add(e)),g=(t,e,n)=>s(t.getAll(e,n)),v=(t,e,n)=>{let r=null;return b(t,e,(t=>(r=t,!1)),n).then((()=>r))},_=(t,e=null)=>v(t,e,"prev"),y=(t,e)=>i.Ue(((n,r)=>{t.onerror=r,t.onsuccess=async t=>{const r=t.target.result;if(null===r||!1===await e(r))return n();r.continue()}})),b=(t,e,n,r="next")=>y(t.openKeyCursor(e,r),(t=>n(t.key))),w=(t,e)=>t.objectStore(e),x=(t,e)=>IDBKeyRange.upperBound(t,e),E=(t,e)=>IDBKeyRange.lowerBound(t,e);var S=n(6055);const M="custom",T="updates",A=500,C=(t,e=(()=>{}),n=(()=>{}))=>{const[i]=u(t.db,[T]);return g(i,E(t._dbref,!1)).then((o=>{t._destroyed||(e(i),r.ay(t.doc,(()=>{o.forEach((e=>r.NG(t.doc,e)))}),t,!1),n(i))})).then((()=>_(i).then((e=>{t._dbref=e+1})))).then((()=>h(i).then((e=>{t._dbsize=e})))).then((()=>i))},R=(t,e=!0)=>C(t).then((n=>{(e||t._dbsize>=A)&&m(n,r.D$(t.doc)).then((()=>f(n,x(t._dbref,!0)))).then((()=>h(n).then((e=>{t._dbsize=e}))))}));class P extends S.y{constructor(t,e){super(),this.doc=e,this.name=t,this._dbref=0,this._dbsize=0,this._destroyed=!1,this.db=null,this.synced=!1,this._db=a(t,(t=>l(t,[["updates",{autoIncrement:!0}],["custom"]]))),this.whenSynced=i.Ue((t=>this.on("synced",(()=>t(this))))),this._db.then((t=>{this.db=t;const n=t=>m(t,r.D$(e)),i=()=>{if(this._destroyed)return this;this.synced=!0,this.emit("synced",[this])};C(this,n,i)})),this._storeTimeout=1e3,this._storeTimeoutId=null,this._storeUpdate=(t,e)=>{if(this.db&&e!==this){const[e]=u(this.db,[T]);m(e,t),++this._dbsize>=A&&(null!==this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this._storeTimeoutId=setTimeout((()=>{R(this,!1),this._storeTimeoutId=null}),this._storeTimeout))}},e.on("update",this._storeUpdate),this.destroy=this.destroy.bind(this),e.on("destroy",this.destroy)}destroy(){return this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this.doc.off("update",this._storeUpdate),this.doc.off("destroy",this.destroy),this._destroyed=!0,this._db.then((t=>{t.close()}))}clearData(){return this.destroy().then((()=>{c(this.name)}))}get(t){return this._db.then((e=>{const[n]=u(e,[M],"readonly");return d(n,t)}))}set(t,e){return this._db.then((n=>{const[r]=u(n,[M]);return p(r,e,t)}))}del(t){return this._db.then((e=>{const[n]=u(e,[M]);return f(n,t)}))}}},114:function(t,e,n){"use strict";n.d(e,{Ag:function(){return h},GL:function(){return u},oy:function(){return f},xq:function(){return d}});n(7658);var r=n(8148),i=n(2294),o=n(313),s=n(1383),a=n(6055),c=n(7409);const l=3e4;class u extends a.y{constructor(t){super(),this.doc=t,this.clientID=t.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval((()=>{const t=o.ZG();null!==this.getLocalState()&&l/2<=t-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const e=[];this.meta.forEach(((n,r)=>{r!==this.clientID&&l<=t-n.lastUpdated&&this.states.has(r)&&e.push(r)})),e.length>0&&h(this,e,"timeout")}),s.GW(l/10)),t.on("destroy",(()=>{this.destroy()})),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(t){const e=this.clientID,n=this.meta.get(e),r=void 0===n?0:n.clock+1,i=this.states.get(e);null===t?this.states.delete(e):this.states.set(e,t),this.meta.set(e,{clock:r,lastUpdated:o.ZG()});const s=[],a=[],l=[],u=[];null===t?u.push(e):null==i?null!=t&&s.push(e):(a.push(e),c.Hi(i,t)||l.push(e)),(s.length>0||l.length>0||u.length>0)&&this.emit("change",[{added:s,updated:l,removed:u},"local"]),this.emit("update",[{added:s,updated:a,removed:u},"local"])}setLocalStateField(t,e){const n=this.getLocalState();null!==n&&this.setLocalState({...n,[t]:e})}getStates(){return this.states}}const h=(t,e,n)=>{const r=[];for(let i=0;i<e.length;i++){const n=e[i];if(t.states.has(n)){if(t.states.delete(n),n===t.clientID){const e=t.meta.get(n);t.meta.set(n,{clock:e.clock+1,lastUpdated:o.ZG()})}r.push(n)}}r.length>0&&(t.emit("change",[{added:[],updated:[],removed:r},n]),t.emit("update",[{added:[],updated:[],removed:r},n]))},d=(t,e,n=t.states)=>{const i=e.length,o=r.Mf();r.uE(o,i);for(let s=0;s<i;s++){const i=e[s],a=n.get(i)||null,c=t.meta.get(i).clock;r.uE(o,i),r.uE(o,c),r.uw(o,JSON.stringify(a))}return r._f(o)},f=(t,e,n)=>{const r=i.l1(e),s=o.ZG(),a=[],l=[],u=[],h=[],d=i.yg(r);for(let o=0;o<d;o++){const e=i.yg(r);let n=i.yg(r);const o=JSON.parse(i.kf(r)),d=t.meta.get(e),f=t.states.get(e),p=void 0===d?0:d.clock;(p<n||p===n&&null===o&&t.states.has(e))&&(null===o?e===t.clientID&&null!=t.getLocalState()?n++:t.states.delete(e):t.states.set(e,o),t.meta.set(e,{clock:n,lastUpdated:s}),void 0===d&&null!==o?a.push(e):void 0!==d&&null===o?h.push(e):null!==o&&(c.Hi(o,f)||u.push(e),l.push(e)))}(a.length>0||u.length>0||h.length>0)&&t.emit("change",[{added:a,updated:u,removed:h},n]),(a.length>0||l.length>0||h.length>0)&&t.emit("update",[{added:a,updated:l,removed:h},n])}},7034:function(t,e,n){"use strict";n.d(e,{K0:function(){return u},Px:function(){return a},Wh:function(){return s},_J:function(){return l},lr:function(){return f},zu:function(){return m}});n(1703);var r=n(8148),i=n(2294),o=n(567);const s=0,a=1,c=2,l=(t,e)=>{r.uE(t,s);const n=o.gJ(e);r.mP(t,n)},u=(t,e,n)=>{r.uE(t,a),r.mP(t,o.D$(e,n))},h=(t,e,n)=>u(e,n,i.HN(t)),d=(t,e,n)=>{try{o.NG(e,i.HN(t),n)}catch(r){console.error("Caught error while handling a Yjs update",r)}},f=(t,e)=>{r.uE(t,c),r.mP(t,e)},p=d,m=(t,e,n,r)=>{const o=i.yg(t);switch(o){case s:h(t,e,n);break;case a:d(t,n,r);break;case c:p(t,n,r);break;default:throw new Error("Unknown message type")}return o}},9373:function(t,e,n){"use strict";n.d(e,{x$:function(){return Z}});n(7658),n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315);var r=n(6055),i=n(313),o=n(1383);const s=1200,a=2500,c=3e4,l=t=>{if(t.shouldConnect&&null===t.ws){const e=new WebSocket(t.url),n=t.binaryType;let r=null;n&&(e.binaryType=n),t.ws=e,t.connecting=!0,t.connected=!1,e.onmessage=e=>{t.lastMessageReceived=i.ZG();const n=e.data,o="string"===typeof n?JSON.parse(n):n;o&&"pong"===o.type&&(clearTimeout(r),r=setTimeout(h,c/2)),t.emit("message",[o,t])};const u=e=>{null!==t.ws&&(t.ws=null,t.connecting=!1,t.connected?(t.connected=!1,t.emit("disconnect",[{type:"disconnect",error:e},t])):t.unsuccessfulReconnects++,setTimeout(l,o.VV(o.mv(t.unsuccessfulReconnects+1)*s,a),t)),clearTimeout(r)},h=()=>{t.ws===e&&t.send({type:"ping"})};e.onclose=()=>u(null),e.onerror=t=>u(t),e.onopen=()=>{t.lastMessageReceived=i.ZG(),t.connecting=!1,t.connected=!0,t.unsuccessfulReconnects=0,t.emit("connect",[{type:"connect"},t]),r=setTimeout(h,c/2)}}};class u extends r.y{constructor(t,{binaryType:e}={}){super(),this.url=t,this.ws=null,this.binaryType=e||null,this.connected=!1,this.connecting=!1,this.unsuccessfulReconnects=0,this.lastMessageReceived=0,this.shouldConnect=!0,this._checkInterval=setInterval((()=>{this.connected&&c<i.ZG()-this.lastMessageReceived&&this.ws.close()}),c/2),l(this)}send(t){this.ws&&this.ws.send(JSON.stringify(t))}destroy(){clearInterval(this._checkInterval),this.disconnect(),super.destroy()}disconnect(){this.shouldConnect=!1,null!==this.ws&&this.ws.close()}connect(){this.shouldConnect=!0,this.connected||null!==this.ws||l(this)}}var h=n(7862),d=n(6969),f=n(4373),p=n(8148),m=n(2294),g=n(6100),v=n(5409),_=n(7244),y=n(3924),b=n(3425);const w=()=>{let t=!0;return(e,n)=>{if(t){t=!1;try{e()}finally{t=!0}}else void 0!==n&&n()}};var x=n(4743),E=n(7034),S=n(114),M=n(654);const T=(t,e)=>{const n=M.lz(t).buffer,r=M.lz(e).buffer;return crypto.subtle.importKey("raw",n,"PBKDF2",!1,["deriveKey"]).then((t=>crypto.subtle.deriveKey({name:"PBKDF2",salt:r,iterations:1e5,hash:"SHA-256"},t,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])))},A=(t,e)=>{if(!e)return _.DB(t);const n=crypto.getRandomValues(new Uint8Array(12));return crypto.subtle.encrypt({name:"AES-GCM",iv:n},e,t).then((t=>{const e=p.Mf();return p.uw(e,"AES-GCM"),p.mP(e,n),p.mP(e,new Uint8Array(t)),p._f(e)}))},C=(t,e)=>{const n=p.Mf();return p.EM(n,t),A(p._f(n),e)},R=(t,e)=>{if(!e)return _.DB(t);const n=m.l1(t),r=m.kf(n);"AES-GCM"!==r&&_.d1(d.Ue("Unknown encryption algorithm"));const i=m.HN(n),o=m.HN(n);return crypto.subtle.decrypt({name:"AES-GCM",iv:i},e,o).then((t=>new Uint8Array(t)))},P=(t,e)=>R(t,e).then((t=>m.v_(m.l1(new Uint8Array(t))))),O=g.YX("y-webrtc"),L=0,k=3,I=1,D=4,N=new Map,U=new Map,F=t=>{let e=!0;t.webrtcConns.forEach((t=>{t.synced||(e=!1)})),(!e&&t.synced||e&&!t.synced)&&(t.synced=e,t.provider.emit("synced",[{synced:e}]),O("synced ",v.Pl,t.name,v.YW," with all peers"))},B=(t,e,n)=>{const r=m.l1(e),i=p.Mf(),o=m.yg(r);if(void 0===t)return null;const s=t.awareness,a=t.doc;let c=!1;switch(o){case L:{p.uE(i,L);const e=E.zu(r,i,a,t);e!==E.Px||t.synced||n(),e===E.Wh&&(c=!0);break}case k:p.uE(i,I),p.mP(i,S.xq(s,Array.from(s.getStates().keys()))),c=!0;break;case I:S.oy(s,m.HN(r),t);break;case D:{const e=1===m.kj(r),n=m.kf(r);if(n!==t.peerId&&(t.bcConns.has(n)&&!e||!t.bcConns.has(n)&&e)){const r=[],i=[];e?(t.bcConns.add(n),i.push(n)):(t.bcConns.delete(n),r.push(n)),t.provider.emit("peers",[{added:i,removed:r,webrtcPeers:Array.from(t.webrtcConns.keys()),bcPeers:Array.from(t.bcConns)}]),X(t)}break}default:return console.error("Unable to compute message"),i}return c?i:null},z=(t,e)=>{const n=t.room;return O("received message from ",v.Pl,t.remotePeerId,v.s7," (",n.name,")",v.YW,v.WO),B(n,e,(()=>{t.synced=!0,O("synced ",v.Pl,n.name,v.YW," with ",v.Pl,t.remotePeerId),F(n)}))},j=(t,e)=>{O("send message to ",v.Pl,t.remotePeerId,v.YW,v.s7," (",t.room.name,")",v.WO);try{t.peer.send(p._f(e))}catch(n){}},H=(t,e)=>{O("broadcast message in ",v.Pl,t.name,v.YW),t.webrtcConns.forEach((t=>{try{t.peer.send(e)}catch(n){}}))};class V{constructor(t,e,n,r){O("establishing connection to ",v.Pl,n),this.room=r,this.remotePeerId=n,this.closed=!1,this.connected=!1,this.synced=!1,this.peer=new x({initiator:e,...r.provider.peerOpts}),this.peer.on("signal",(e=>{K(t,r,{to:n,from:r.peerId,type:"signal",signal:e})})),this.peer.on("connect",(()=>{O("connected to ",v.Pl,n),this.connected=!0;const t=r.provider,e=t.doc,i=r.awareness,o=p.Mf();p.uE(o,L),E._J(o,e),j(this,o);const s=i.getStates();if(s.size>0){const t=p.Mf();p.uE(t,I),p.mP(t,S.xq(i,Array.from(s.keys()))),j(this,t)}})),this.peer.on("close",(()=>{this.connected=!1,this.closed=!0,r.webrtcConns.has(this.remotePeerId)&&(r.webrtcConns.delete(this.remotePeerId),r.provider.emit("peers",[{removed:[this.remotePeerId],added:[],webrtcPeers:Array.from(r.webrtcConns.keys()),bcPeers:Array.from(r.bcConns)}])),F(r),this.peer.destroy(),O("closed connection to ",v.Pl,n),q(r)})),this.peer.on("error",(t=>{O("Error in connection to ",v.Pl,n,": ",t),q(r)})),this.peer.on("data",(t=>{const e=z(this,t);null!==e&&j(this,e)}))}destroy(){this.peer.destroy()}}const G=(t,e)=>A(e,t.key).then((e=>t.mux((()=>y.nY(t.name,e))))),W=(t,e)=>{t.bcconnected&&G(t,e),H(t,e)},q=t=>{N.forEach((e=>{e.connected&&(e.send({type:"subscribe",topics:[t.name]}),t.webrtcConns.size<t.provider.maxConns&&K(e,t,{type:"announce",from:t.peerId}))}))},X=t=>{if(t.provider.filterBcConns){const e=p.Mf();p.uE(e,D),p.$F(e,1),p.uw(e,t.peerId),G(t,p._f(e))}};class Y{constructor(t,e,n,r){this.peerId=f.k$(),this.doc=t,this.awareness=e.awareness,this.provider=e,this.synced=!1,this.name=n,this.key=r,this.webrtcConns=new Map,this.bcConns=new Set,this.mux=w(),this.bcconnected=!1,this._bcSubscriber=t=>R(new Uint8Array(t),r).then((t=>this.mux((()=>{const e=B(this,t,(()=>{}));e&&G(this,p._f(e))})))),this._docUpdateHandler=(t,e)=>{const n=p.Mf();p.uE(n,L),E.lr(n,t),W(this,p._f(n))},this._awarenessUpdateHandler=({added:t,updated:e,removed:n},r)=>{const i=t.concat(e).concat(n),o=p.Mf();p.uE(o,I),p.mP(o,S.xq(this.awareness,i)),W(this,p._f(o))},this._beforeUnloadHandler=()=>{S.Ag(this.awareness,[t.clientID],"window unload"),U.forEach((t=>{t.disconnect()}))},"undefined"!==typeof window?window.addEventListener("beforeunload",this._beforeUnloadHandler):"undefined"!==typeof process&&process.on("exit",this._beforeUnloadHandler)}connect(){this.doc.on("update",this._docUpdateHandler),this.awareness.on("update",this._awarenessUpdateHandler),q(this);const t=this.name;y.Ld(t,this._bcSubscriber),this.bcconnected=!0,X(this);const e=p.Mf();p.uE(e,L),E._J(e,this.doc),G(this,p._f(e));const n=p.Mf();p.uE(n,L),E.K0(n,this.doc),G(this,p._f(n));const r=p.Mf();p.uE(r,k),G(this,p._f(r));const i=p.Mf();p.uE(i,I),p.mP(i,S.xq(this.awareness,[this.doc.clientID])),G(this,p._f(i))}disconnect(){N.forEach((t=>{t.connected&&t.send({type:"unsubscribe",topics:[this.name]})})),S.Ag(this.awareness,[this.doc.clientID],"disconnect");const t=p.Mf();p.uE(t,D),p.$F(t,0),p.uw(t,this.peerId),G(this,p._f(t)),y.r1(this.name,this._bcSubscriber),this.bcconnected=!1,this.doc.off("update",this._docUpdateHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.webrtcConns.forEach((t=>t.destroy()))}destroy(){this.disconnect(),"undefined"!==typeof window?window.removeEventListener("beforeunload",this._beforeUnloadHandler):"undefined"!==typeof process&&process.off("exit",this._beforeUnloadHandler)}}const $=(t,e,n,r)=>{if(U.has(n))throw d.Ue(`A Yjs Doc connected to room "${n}" already exists!`);const i=new Y(t,e,n,r);return U.set(n,i),i},K=(t,e,n)=>{e.key?C(n,e.key).then((n=>{t.send({type:"publish",topic:e.name,data:b.s3(n)})})):t.send({type:"publish",topic:e.name,data:n})};class J extends u{constructor(t){super(t),this.providers=new Set,this.on("connect",(()=>{O(`connected (${t})`);const e=Array.from(U.keys());this.send({type:"subscribe",topics:e}),U.forEach((t=>K(this,t,{type:"announce",from:t.peerId})))})),this.on("message",(t=>{switch(t.type){case"publish":{const e=t.topic,n=U.get(e);if(null==n||"string"!==typeof e)return;const r=t=>{const e=n.webrtcConns,r=n.peerId;if(null==t||t.from===r||void 0!==t.to&&t.to!==r||n.bcConns.has(t.from))return;const i=e.has(t.from)?()=>{}:()=>n.provider.emit("peers",[{removed:[],added:[t.from],webrtcPeers:Array.from(n.webrtcConns.keys()),bcPeers:Array.from(n.bcConns)}]);switch(t.type){case"announce":e.size<n.provider.maxConns&&(h.Yu(e,t.from,(()=>new V(this,!0,t.from,n))),i());break;case"signal":t.to===r&&(h.Yu(e,t.from,(()=>new V(this,!1,t.from,n))).peer.signal(t.signal),i());break}};n.key?"string"===typeof t.data&&P(b.Gh(t.data),n.key).then(r):r(t.data)}}})),this.on("disconnect",(()=>O(`disconnect (${t})`)))}}class Z extends r.y{constructor(t,e,{signaling:n=["wss://y-webrtc-eu.fly.dev"],password:r=null,awareness:i=new S.GL(e),maxConns:s=20+o.GW(15*f.TN()),filterBcConns:a=!0,peerOpts:c={}}={}){super(),this.roomName=t,this.doc=e,this.filterBcConns=a,this.awareness=i,this.shouldConnect=!1,this.signalingUrls=n,this.signalingConns=[],this.maxConns=s,this.peerOpts=c,this.key=r?T(r,t):_.DB(null),this.room=null,this.key.then((n=>{this.room=$(e,this,t,n),this.shouldConnect?this.room.connect():this.room.disconnect()})),this.connect(),this.destroy=this.destroy.bind(this),e.on("destroy",this.destroy)}get connected(){return null!==this.room&&this.shouldConnect}connect(){this.shouldConnect=!0,this.signalingUrls.forEach((t=>{const e=h.Yu(N,t,(()=>new J(t)));this.signalingConns.push(e),e.providers.add(this)})),this.room&&this.room.connect()}disconnect(){this.shouldConnect=!1,this.signalingConns.forEach((t=>{t.providers.delete(this),0===t.providers.size&&(t.destroy(),N.delete(t.url))})),this.room&&this.room.disconnect()}destroy(){this.doc.off("destroy",this.destroy),this.key.then((()=>{this.room.destroy(),U.delete(this.roomName)})),super.destroy()}}},567:function(t,e,n){"use strict";n.d(e,{QP:function(){return ue},mJ:function(){return Re},QW:function(){return N},GC:function(){return hn},D5:function(){return Le},xv:function(){return Ke},lt:function(){return en},sI:function(){return Qe},yP:function(){return on},eI:function(){return an},NG:function(){return Z},D$:function(){return et},gJ:function(){return at},g4:function(){return Mt},ay:function(){return zt}});n(7658),n(1703),n(8675),n(3408),n(4590),n(3462),n(1439),n(7585),n(5315);var r=n(6055),i=n(5989),o=n(1383),s=n(7862),a=n(8148),c=n(2294),l=n(4373),u=n(7244),h=n(3425),d=n(6969),f=n(3388),p=n(7409),m=n(893),g=n(6100),v=n(5409);const _=t=>({[Symbol.iterator](){return this},next:t}),y=(t,e)=>_((()=>{let n;do{n=t.next()}while(!n.done&&!e(n.value));return n})),b=(t,e)=>_((()=>{const{done:n,value:r}=t.next();return{done:n,value:n?void 0:e(r)}}));var w=n(1370);class x{constructor(t,e){this.clock=t,this.len=e}}class E{constructor(){this.clients=new Map}}const S=(t,e,n)=>e.clients.forEach(((e,r)=>{const i=t.doc.store.clients.get(r);for(let o=0;o<e.length;o++){const r=e[o];Lt(t,i,r.clock,r.len,n)}})),M=(t,e)=>{let n=0,r=t.length-1;while(n<=r){const i=o.GW((n+r)/2),s=t[i],a=s.clock;if(a<=e){if(e<a+s.len)return i;n=i+1}else r=i-1}return null},T=(t,e)=>{const n=t.clients.get(e.client);return void 0!==n&&null!==M(n,e.clock)},A=t=>{t.clients.forEach((t=>{let e,n;for(t.sort(((t,e)=>t.clock-e.clock)),e=1,n=1;e<t.length;e++){const r=t[n-1],i=t[e];r.clock+r.len>=i.clock?r.len=o.Fp(r.len,i.clock+i.len-r.clock):(n<e&&(t[n]=i),n++)}t.length=n}))},C=t=>{const e=new E;for(let n=0;n<t.length;n++)t[n].clients.forEach(((r,o)=>{if(!e.clients.has(o)){const s=r.slice();for(let e=n+1;e<t.length;e++)i.s7(s,t[e].clients.get(o)||[]);e.clients.set(o,s)}}));return A(e),e},R=(t,e,n,r)=>{s.Yu(t.clients,e,(()=>[])).push(new x(n,r))},P=()=>new E,O=t=>{const e=P();return t.clients.forEach(((t,n)=>{const r=[];for(let e=0;e<t.length;e++){const n=t[e];if(n.deleted){const i=n.id.clock;let o=n.length;if(e+1<t.length)for(let n=t[e+1];e+1<t.length&&n.deleted;n=t[1+ ++e])o+=n.length;r.push(new x(i,o))}}r.length>0&&e.clients.set(n,r)})),e},L=(t,e)=>{a.uE(t.restEncoder,e.clients.size),i.Dp(e.clients.entries()).sort(((t,e)=>e[0]-t[0])).forEach((([e,n])=>{t.resetDsCurVal(),a.uE(t.restEncoder,e);const r=n.length;a.uE(t.restEncoder,r);for(let i=0;i<r;i++){const e=n[i];t.writeDsClock(e.clock),t.writeDsLen(e.len)}}))},k=t=>{const e=new E,n=c.yg(t.restDecoder);for(let r=0;r<n;r++){t.resetDsCurVal();const n=c.yg(t.restDecoder),r=c.yg(t.restDecoder);if(r>0){const i=s.Yu(e.clients,n,(()=>[]));for(let e=0;e<r;e++)i.push(new x(t.readDsClock(),t.readDsLen()))}}return e},I=(t,e,n)=>{const r=new E,i=c.yg(t.restDecoder);for(let o=0;o<i;o++){t.resetDsCurVal();const i=c.yg(t.restDecoder),o=c.yg(t.restDecoder),s=n.clients.get(i)||[],a=Et(n,i);for(let n=0;n<o;n++){const n=t.readDsClock(),o=n+t.readDsLen();if(n<a){a<o&&R(r,i,a,o-a);let t=Mt(s,n),c=s[t];!c.deleted&&c.id.clock<n&&(s.splice(t+1,0,Bn(e,c,n-c.id.clock)),t++);while(t<s.length){if(c=s[t++],!(c.id.clock<o))break;c.deleted||(o<c.id.clock+c.length&&s.splice(t,0,Bn(e,c,o-c.id.clock)),c.delete(e))}}else R(r,i,n,o-n)}}if(r.clients.size>0){const t=new G;return a.uE(t.restEncoder,0),L(t,r),t.toUint8Array()}return null},D=l.U7;class N extends r.y{constructor({guid:t=l.k$(),collectionid:e=null,gc:n=!0,gcFilter:r=(()=>!0),meta:i=null,autoLoad:o=!1,shouldLoad:s=!0}={}){super(),this.gc=n,this.gcFilter=r,this.clientID=D(),this.guid=t,this.collectionid=e,this.share=new Map,this.store=new wt,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=s,this.autoLoad=o,this.meta=i,this.isLoaded=!1,this.isSynced=!1,this.whenLoaded=u.Ue((t=>{this.on("load",(()=>{this.isLoaded=!0,t(this)}))}));const a=()=>u.Ue((t=>{const e=n=>{void 0!==n&&!0!==n||(this.off("sync",e),t())};this.on("sync",e)}));this.on("sync",(t=>{!1===t&&this.isSynced&&(this.whenSynced=a()),this.isSynced=void 0===t||!0===t,this.isLoaded||this.emit("load",[])})),this.whenSynced=a()}load(){const t=this._item;null===t||this.shouldLoad||zt(t.parent.doc,(t=>{t.subdocsLoaded.add(this)}),null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(i.Dp(this.subdocs).map((t=>t.guid)))}transact(t,e=null){return zt(this,t,e)}get(t,e=ue){const n=s.Yu(this.share,t,(()=>{const t=new e;return t._integrate(this,null),t})),r=n.constructor;if(e!==ue&&r!==e){if(r===ue){const r=new e;r._map=n._map,n._map.forEach((t=>{for(;null!==t;t=t.left)t.parent=r})),r._start=n._start;for(let t=r._start;null!==t;t=t.right)t.parent=r;return r._length=n._length,this.share.set(t,r),r._integrate(this,null),r}throw new Error(`Type with the name ${t} has already been defined with a different constructor`)}return n}getArray(t=""){return this.get(t,Re)}getText(t=""){return this.get(t,Ke)}getMap(t=""){return this.get(t,Le)}getXmlFragment(t=""){return this.get(t,Qe)}toJSON(){const t={};return this.share.forEach(((e,n)=>{t[n]=e.toJSON()})),t}destroy(){i.Dp(this.subdocs).forEach((t=>t.destroy()));const t=this._item;if(null!==t){this._item=null;const e=t.content;e.doc=new N({guid:this.guid,...e.opts,shouldLoad:!1}),e.doc._item=t,zt(t.parent.doc,(n=>{const r=e.doc;t.deleted||n.subdocsAdded.add(r),n.subdocsRemoved.add(this)}),null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}on(t,e){super.on(t,e)}off(t,e){super.off(t,e)}}class U{constructor(t){this.restDecoder=t}resetDsCurVal(){}readDsClock(){return c.yg(this.restDecoder)}readDsLen(){return c.yg(this.restDecoder)}}class F extends U{readLeftID(){return mt(c.yg(this.restDecoder),c.yg(this.restDecoder))}readRightID(){return mt(c.yg(this.restDecoder),c.yg(this.restDecoder))}readClient(){return c.yg(this.restDecoder)}readInfo(){return c.kj(this.restDecoder)}readString(){return c.kf(this.restDecoder)}readParentInfo(){return 1===c.yg(this.restDecoder)}readTypeRef(){return c.yg(this.restDecoder)}readLen(){return c.yg(this.restDecoder)}readAny(){return c.v_(this.restDecoder)}readBuf(){return h.f9(c.HN(this.restDecoder))}readJSON(){return JSON.parse(c.kf(this.restDecoder))}readKey(){return c.kf(this.restDecoder)}}class B{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=c.yg(this.restDecoder),this.dsCurrVal}readDsLen(){const t=c.yg(this.restDecoder)+1;return this.dsCurrVal+=t,t}}class z extends B{constructor(t){super(t),this.keys=[],c.yg(t),this.keyClockDecoder=new c.dD(c.HN(t)),this.clientDecoder=new c.UF(c.HN(t)),this.leftClockDecoder=new c.dD(c.HN(t)),this.rightClockDecoder=new c.dD(c.HN(t)),this.infoDecoder=new c.XW(c.HN(t),c.kj),this.stringDecoder=new c.sO(c.HN(t)),this.parentInfoDecoder=new c.XW(c.HN(t),c.kj),this.typeRefDecoder=new c.UF(c.HN(t)),this.lenDecoder=new c.UF(c.HN(t))}readLeftID(){return new ft(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new ft(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return 1===this.parentInfoDecoder.read()}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return c.v_(this.restDecoder)}readBuf(){return c.HN(this.restDecoder)}readJSON(){return c.v_(this.restDecoder)}readKey(){const t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{const t=this.stringDecoder.read();return this.keys.push(t),t}}}class j{constructor(){this.restEncoder=a.Mf()}toUint8Array(){return a._f(this.restEncoder)}resetDsCurVal(){}writeDsClock(t){a.uE(this.restEncoder,t)}writeDsLen(t){a.uE(this.restEncoder,t)}}class H extends j{writeLeftID(t){a.uE(this.restEncoder,t.client),a.uE(this.restEncoder,t.clock)}writeRightID(t){a.uE(this.restEncoder,t.client),a.uE(this.restEncoder,t.clock)}writeClient(t){a.uE(this.restEncoder,t)}writeInfo(t){a.$F(this.restEncoder,t)}writeString(t){a.uw(this.restEncoder,t)}writeParentInfo(t){a.uE(this.restEncoder,t?1:0)}writeTypeRef(t){a.uE(this.restEncoder,t)}writeLen(t){a.uE(this.restEncoder,t)}writeAny(t){a.EM(this.restEncoder,t)}writeBuf(t){a.mP(this.restEncoder,t)}writeJSON(t){a.uw(this.restEncoder,JSON.stringify(t))}writeKey(t){a.uw(this.restEncoder,t)}}class V{constructor(){this.restEncoder=a.Mf(),this.dsCurrVal=0}toUint8Array(){return a._f(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){const e=t-this.dsCurrVal;this.dsCurrVal=t,a.uE(this.restEncoder,e)}writeDsLen(t){0===t&&d.zR(),a.uE(this.restEncoder,t-1),this.dsCurrVal+=t}}class G extends V{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new a.sX,this.clientEncoder=new a.HE,this.leftClockEncoder=new a.sX,this.rightClockEncoder=new a.sX,this.infoEncoder=new a.GF(a.$F),this.stringEncoder=new a.TS,this.parentInfoEncoder=new a.GF(a.$F),this.typeRefEncoder=new a.HE,this.lenEncoder=new a.HE}toUint8Array(){const t=a.Mf();return a.uE(t,0),a.mP(t,this.keyClockEncoder.toUint8Array()),a.mP(t,this.clientEncoder.toUint8Array()),a.mP(t,this.leftClockEncoder.toUint8Array()),a.mP(t,this.rightClockEncoder.toUint8Array()),a.mP(t,a._f(this.infoEncoder)),a.mP(t,this.stringEncoder.toUint8Array()),a.mP(t,a._f(this.parentInfoEncoder)),a.mP(t,this.typeRefEncoder.toUint8Array()),a.mP(t,this.lenEncoder.toUint8Array()),a.HK(t,a._f(this.restEncoder)),a._f(t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){a.EM(this.restEncoder,t)}writeBuf(t){a.mP(this.restEncoder,t)}writeJSON(t){a.EM(this.restEncoder,t)}writeKey(t){const e=this.keyMap.get(t);void 0===e?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(e)}}const W=(t,e,n,r)=>{r=o.Fp(r,e[0].id.clock);const i=Mt(e,r);a.uE(t.restEncoder,e.length-i),t.writeClient(n),a.uE(t.restEncoder,r);const s=e[i];s.write(t,r-s.id.clock);for(let o=i+1;o<e.length;o++)e[o].write(t,0)},q=(t,e,n)=>{const r=new Map;n.forEach(((t,n)=>{Et(e,n)>t&&r.set(n,t)})),xt(e).forEach(((t,e)=>{n.has(e)||r.set(e,0)})),a.uE(t.restEncoder,r.size),i.Dp(r.entries()).sort(((t,e)=>e[0]-t[0])).forEach((([n,r])=>{W(t,e.clients.get(n),n,r)}))},X=(t,e)=>{const n=s.Ue(),r=c.yg(t.restDecoder);for(let i=0;i<r;i++){const r=c.yg(t.restDecoder),i=new Array(r),o=t.readClient();let s=c.yg(t.restDecoder);n.set(o,{i:0,refs:i});for(let n=0;n<r;n++){const r=t.readInfo();switch(f.kr&r){case 0:{const e=t.readLen();i[n]=new hn(mt(o,s),e),s+=e;break}case 10:{const e=c.yg(t.restDecoder);i[n]=new Gn(mt(o,s),e),s+=e;break}default:{const a=0===(r&(f.rc|f.x1)),c=new zn(mt(o,s),null,(r&f.x1)===f.x1?t.readLeftID():null,null,(r&f.rc)===f.rc?t.readRightID():null,a?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,a&&(r&f.cq)===f.cq?t.readString():null,jn(t,r));i[n]=c,s+=c.length}}}}return n},Y=(t,e,n)=>{const r=[];let o=i.Dp(n.keys()).sort(((t,e)=>t-e));if(0===o.length)return null;const c=()=>{if(0===o.length)return null;let t=n.get(o[o.length-1]);while(t.refs.length===t.i){if(o.pop(),!(o.length>0))return null;t=n.get(o[o.length-1])}return t};let l=c();if(null===l&&0===r.length)return null;const u=new wt,h=new Map,d=(t,e)=>{const n=h.get(t);(null==n||n>e)&&h.set(t,e)};let f=l.refs[l.i++];const p=new Map,m=()=>{for(const t of r){const e=t.id.client,r=n.get(e);r?(r.i--,u.clients.set(e,r.refs.slice(r.i)),n.delete(e),r.i=0,r.refs=[]):u.clients.set(e,[t]),o=o.filter((t=>t!==e))}r.length=0};while(1){if(f.constructor!==Gn){const i=s.Yu(p,f.id.client,(()=>Et(e,f.id.client))),o=i-f.id.clock;if(o<0)r.push(f),d(f.id.client,f.id.clock-1),m();else{const i=f.getMissing(t,e);if(null!==i){r.push(f);const t=n.get(i)||{refs:[],i:0};if(t.refs.length!==t.i){f=t.refs[t.i++];continue}d(i,Et(e,i)),m()}else(0===o||o<f.length)&&(f.integrate(t,o),p.set(f.id.client,f.id.clock+f.length))}}if(r.length>0)f=r.pop();else if(null!==l&&l.i<l.refs.length)f=l.refs[l.i++];else{if(l=c(),null===l)break;f=l.refs[l.i++]}}if(u.clients.size>0){const t=new G;return q(t,u,new Map),a.uE(t.restEncoder,0),{missing:h,update:t.toUint8Array()}}return null},$=(t,e)=>q(t,e.doc.store,e.beforeState),K=(t,e,n,r=new z(t))=>zt(e,(t=>{t.local=!1;let e=!1;const n=t.doc,i=n.store,o=X(r,n),s=Y(t,i,o),a=i.pendingStructs;if(a){for(const[t,n]of a.missing)if(n<Et(i,t)){e=!0;break}if(s){for(const[t,e]of s.missing){const n=a.missing.get(t);(null==n||n>e)&&a.missing.set(t,e)}a.update=qt([a.update,s.update])}}else i.pendingStructs=s;const l=I(r,t,i);if(i.pendingDs){const e=new z(c.l1(i.pendingDs));c.yg(e.restDecoder);const n=I(e,t,i);i.pendingDs=l&&n?qt([l,n]):l||n}else i.pendingDs=l;if(e){const e=i.pendingStructs.update;i.pendingStructs=null,J(t.doc,e)}}),n,!1),J=(t,e,n,r=z)=>{const i=c.l1(e);K(i,t,n,new r(i))},Z=(t,e,n)=>J(t,e,n,F),Q=(t,e,n=new Map)=>{q(t,e.store,n),L(t,O(e.store))},tt=(t,e=new Uint8Array([0]),n=new G)=>{const r=rt(e);Q(n,t,r);const i=[n.toUint8Array()];if(t.store.pendingDs&&i.push(t.store.pendingDs),t.store.pendingStructs&&i.push(Xt(t.store.pendingStructs.update,e)),i.length>1){if(n.constructor===H)return Gt(i.map(((t,e)=>0===e?t:Zt(t))));if(n.constructor===G)return qt(i)}return i[0]},et=(t,e)=>tt(t,e,new H),nt=t=>{const e=new Map,n=c.yg(t.restDecoder);for(let r=0;r<n;r++){const n=c.yg(t.restDecoder),r=c.yg(t.restDecoder);e.set(n,r)}return e},rt=t=>nt(new U(c.l1(t))),it=(t,e)=>(a.uE(t.restEncoder,e.size),i.Dp(e.entries()).sort(((t,e)=>e[0]-t[0])).forEach((([e,n])=>{a.uE(t.restEncoder,e),a.uE(t.restEncoder,n)})),t),ot=(t,e)=>it(t,xt(e.store)),st=(t,e=new V)=>(t instanceof Map?it(e,t):ot(e,t),e.toUint8Array()),at=t=>st(t,new j);class ct{constructor(){this.l=[]}}const lt=()=>new ct,ut=(t,e)=>t.l.push(e),ht=(t,e)=>{const n=t.l,r=n.length;t.l=n.filter((t=>e!==t)),r===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},dt=(t,e,n)=>p.PP(t.l,[e,n]);class ft{constructor(t,e){this.client=t,this.clock=e}}const pt=(t,e)=>t===e||null!==t&&null!==e&&t.client===e.client&&t.clock===e.clock,mt=(t,e)=>new ft(t,e),gt=t=>{for(const[e,n]of t.doc.share.entries())if(n===t)return e;throw d.zR()};class vt{constructor(t,e){this.ds=t,this.sv=e}}const _t=(t,e)=>new vt(t,e),yt=(_t(P(),new Map),(t,e)=>void 0===e?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!T(e.ds,t.id)),bt=(t,e)=>{const n=s.Yu(t.meta,bt,m.Ue),r=t.doc.store;n.has(e)||(e.sv.forEach(((e,n)=>{e<Et(r,n)&&Rt(t,mt(n,e))})),S(t,e.ds,(t=>{})),n.add(e))};class wt{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const xt=t=>{const e=new Map;return t.clients.forEach(((t,n)=>{const r=t[t.length-1];e.set(n,r.id.clock+r.length)})),e},Et=(t,e)=>{const n=t.clients.get(e);if(void 0===n)return 0;const r=n[n.length-1];return r.id.clock+r.length},St=(t,e)=>{let n=t.clients.get(e.id.client);if(void 0===n)n=[],t.clients.set(e.id.client,n);else{const t=n[n.length-1];if(t.id.clock+t.length!==e.id.clock)throw d.zR()}n.push(e)},Mt=(t,e)=>{let n=0,r=t.length-1,i=t[r],s=i.id.clock;if(s===e)return r;let a=o.GW(e/(s+i.length-1)*r);while(n<=r){if(i=t[a],s=i.id.clock,s<=e){if(e<s+i.length)return a;n=a+1}else r=a-1;a=o.GW((n+r)/2)}throw d.zR()},Tt=(t,e)=>{const n=t.clients.get(e.client);return n[Mt(n,e.clock)]},At=Tt,Ct=(t,e,n)=>{const r=Mt(e,n),i=e[r];return i.id.clock<n&&i instanceof zn?(e.splice(r+1,0,Bn(t,i,n-i.id.clock)),r+1):r},Rt=(t,e)=>{const n=t.doc.store.clients.get(e.client);return n[Ct(t,n,e.clock)]},Pt=(t,e,n)=>{const r=e.clients.get(n.client),i=Mt(r,n.clock),o=r[i];return n.clock!==o.id.clock+o.length-1&&o.constructor!==hn&&r.splice(i+1,0,Bn(t,o,n.clock-o.id.clock+1)),o},Ot=(t,e,n)=>{const r=t.clients.get(e.id.client);r[Mt(r,e.id.clock)]=n},Lt=(t,e,n,r,i)=>{if(0===r)return;const o=n+r;let s,a=Ct(t,e,n);do{s=e[a++],o<s.id.clock+s.length&&Ct(t,e,o),i(s)}while(a<e.length&&e[a].id.clock<o)};class kt{constructor(t,e,n){this.doc=t,this.deleteSet=new E,this.beforeState=xt(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=e,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const It=(t,e)=>!(0===e.deleteSet.clients.size&&!s.Yj(e.afterState,((t,n)=>e.beforeState.get(n)!==t)))&&(A(e.deleteSet),$(t,e),L(t,e.deleteSet),!0),Dt=(t,e,n)=>{const r=e._item;(null===r||r.id.clock<(t.beforeState.get(r.id.client)||0)&&!r.deleted)&&s.Yu(t.changed,e,m.Ue).add(n)},Nt=(t,e)=>{const n=t[e-1],r=t[e];n.deleted===r.deleted&&n.constructor===r.constructor&&n.mergeWith(r)&&(t.splice(e,1),r instanceof zn&&null!==r.parentSub&&r.parent._map.get(r.parentSub)===r&&r.parent._map.set(r.parentSub,n))},Ut=(t,e,n)=>{for(const[r,i]of t.clients.entries()){const t=e.clients.get(r);for(let r=i.length-1;r>=0;r--){const o=i[r],s=o.clock+o.len;for(let r=Mt(t,o.clock),i=t[r];r<t.length&&i.id.clock<s;i=t[++r]){const i=t[r];if(o.clock+o.len<=i.id.clock)break;i instanceof zn&&i.deleted&&!i.keep&&n(i)&&i.gc(e,!1)}}}},Ft=(t,e)=>{t.clients.forEach(((t,n)=>{const r=e.clients.get(n);for(let e=t.length-1;e>=0;e--){const n=t[e],i=o.VV(r.length-1,1+Mt(r,n.clock+n.len-1));for(let t=i,e=r[t];t>0&&e.id.clock>=n.clock;e=r[--t])Nt(r,t)}}))},Bt=(t,e)=>{if(e<t.length){const n=t[e],r=n.doc,i=r.store,s=n.deleteSet,a=n._mergeStructs;try{A(s),n.afterState=xt(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const t=[];n.changed.forEach(((e,r)=>t.push((()=>{null!==r._item&&r._item.deleted||r._callObserver(n,e)})))),t.push((()=>{n.changedParentTypes.forEach(((e,r)=>t.push((()=>{null!==r._item&&r._item.deleted||(e=e.filter((t=>null===t.target._item||!t.target._item.deleted)),e.forEach((t=>{t.currentTarget=r})),e.sort(((t,e)=>t.path.length-e.path.length)),dt(r._dEH,e,n))})))),t.push((()=>r.emit("afterTransaction",[n,r])))})),(0,p.PP)(t,[]),n._needFormattingCleanup&&Xe(n)}finally{r.gc&&Ut(s,i,r.gcFilter),Ft(s,i),n.afterState.forEach(((t,e)=>{const r=n.beforeState.get(e)||0;if(r!==t){const t=i.clients.get(e),n=o.Fp(Mt(t,r),1);for(let e=t.length-1;e>=n;e--)Nt(t,e)}}));for(let t=0;t<a.length;t++){const{client:e,clock:n}=a[t].id,r=i.clients.get(e),o=Mt(r,n);o+1<r.length&&Nt(r,o+1),o>0&&Nt(r,o)}if(n.local||n.afterState.get(r.clientID)===n.beforeState.get(r.clientID)||(g.S0(v.ud,v.Pl,"[yjs] ",v.YW,v.hM,"Changed the client-id because another client seems to be using it."),r.clientID=D()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const t=new H,e=It(t,n);e&&r.emit("update",[t.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const t=new G,e=It(t,n);e&&r.emit("updateV2",[t.toUint8Array(),n.origin,r,n])}const{subdocsAdded:c,subdocsLoaded:l,subdocsRemoved:u}=n;(c.size>0||u.size>0||l.size>0)&&(c.forEach((t=>{t.clientID=r.clientID,null==t.collectionid&&(t.collectionid=r.collectionid),r.subdocs.add(t)})),u.forEach((t=>r.subdocs.delete(t))),r.emit("subdocs",[{loaded:l,added:c,removed:u},r,n]),u.forEach((t=>t.destroy()))),t.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,t])):Bt(t,e+1)}}},zt=(t,e,n=null,r=!0)=>{const i=t._transactionCleanups;let o=!1,s=null;null===t._transaction&&(o=!0,t._transaction=new kt(t,n,r),i.push(t._transaction),1===i.length&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{s=e(t._transaction)}finally{if(o){const e=t._transaction===i[0];t._transaction=null,e&&Bt(i,0)}}return s};function*jt(t){const e=c.yg(t.restDecoder);for(let n=0;n<e;n++){const e=c.yg(t.restDecoder),n=t.readClient();let r=c.yg(t.restDecoder);for(let i=0;i<e;i++){const e=t.readInfo();if(10===e){const e=c.yg(t.restDecoder);yield new Gn(mt(n,r),e),r+=e}else if(0!==(f.kr&e)){const i=0===(e&(f.rc|f.x1)),o=new zn(mt(n,r),null,(e&f.x1)===f.x1?t.readLeftID():null,null,(e&f.rc)===f.rc?t.readRightID():null,i?t.readParentInfo()?t.readString():t.readLeftID():null,i&&(e&f.cq)===f.cq?t.readString():null,jn(t,e));yield o,r+=o.length}else{const e=t.readLen();yield new hn(mt(n,r),e),r+=e}}}}class Ht{constructor(t,e){this.gen=jt(t),this.curr=null,this.done=!1,this.filterSkips=e,this.next()}next(){do{this.curr=this.gen.next().value||null}while(this.filterSkips&&null!==this.curr&&this.curr.constructor===Gn);return this.curr}}class Vt{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}}const Gt=t=>qt(t,F,H),Wt=(t,e)=>{if(t.constructor===hn){const{client:n,clock:r}=t.id;return new hn(mt(n,r+e),t.length-e)}if(t.constructor===Gn){const{client:n,clock:r}=t.id;return new Gn(mt(n,r+e),t.length-e)}{const n=t,{client:r,clock:i}=n.id;return new zn(mt(r,i+e),null,mt(r,i+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},qt=(t,e=z,n=G)=>{if(1===t.length)return t[0];const r=t.map((t=>new e(c.l1(t))));let i=r.map((t=>new Ht(t,!0))),o=null;const s=new n,a=new Vt(s);while(1){if(i=i.filter((t=>null!==t.curr)),i.sort(((t,e)=>{if(t.curr.id.client===e.curr.id.client){const n=t.curr.id.clock-e.curr.id.clock;return 0===n?t.curr.constructor===e.curr.constructor?0:t.curr.constructor===Gn?1:-1:n}return e.curr.id.client-t.curr.id.client})),0===i.length)break;const t=i[0],e=t.curr.id.client;if(null!==o){let n=t.curr,r=!1;while(null!==n&&n.id.clock+n.length<=o.struct.id.clock+o.struct.length&&n.id.client>=o.struct.id.client)n=t.next(),r=!0;if(null===n||n.id.client!==e||r&&n.id.clock>o.struct.id.clock+o.struct.length)continue;if(e!==o.struct.id.client)$t(a,o.struct,o.offset),o={struct:n,offset:0},t.next();else if(o.struct.id.clock+o.struct.length<n.id.clock)if(o.struct.constructor===Gn)o.struct.length=n.id.clock+n.length-o.struct.id.clock;else{$t(a,o.struct,o.offset);const t=n.id.clock-o.struct.id.clock-o.struct.length,r=new Gn(mt(e,o.struct.id.clock+o.struct.length),t);o={struct:r,offset:0}}else{const e=o.struct.id.clock+o.struct.length-n.id.clock;e>0&&(o.struct.constructor===Gn?o.struct.length-=e:n=Wt(n,e)),o.struct.mergeWith(n)||($t(a,o.struct,o.offset),o={struct:n,offset:0},t.next())}}else o={struct:t.curr,offset:0},t.next();for(let n=t.curr;null!==n&&n.id.client===e&&n.id.clock===o.struct.id.clock+o.struct.length&&n.constructor!==Gn;n=t.next())$t(a,o.struct,o.offset),o={struct:n,offset:0}}null!==o&&($t(a,o.struct,o.offset),o=null),Kt(a);const l=r.map((t=>k(t))),u=C(l);return L(s,u),s.toUint8Array()},Xt=(t,e,n=z,r=G)=>{const i=rt(e),s=new r,a=new Vt(s),l=new n(c.l1(t)),u=new Ht(l,!1);while(u.curr){const t=u.curr,e=t.id.client,n=i.get(e)||0;if(u.curr.constructor!==Gn)if(t.id.clock+t.length>n){$t(a,t,o.Fp(n-t.id.clock,0)),u.next();while(u.curr&&u.curr.id.client===e)$t(a,u.curr,0),u.next()}else while(u.curr&&u.curr.id.client===e&&u.curr.id.clock+u.curr.length<=n)u.next();else u.next()}Kt(a);const h=k(l);return L(s,h),s.toUint8Array()},Yt=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:a._f(t.encoder.restEncoder)}),t.encoder.restEncoder=a.Mf(),t.written=0)},$t=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&Yt(t),0===t.written&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),a.uE(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},Kt=t=>{Yt(t);const e=t.encoder.restEncoder;a.uE(e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){const r=t.clientStructs[n];a.uE(e,r.written),a.HK(e,r.restEncoder)}},Jt=(t,e,n,r)=>{const i=new n(c.l1(t)),o=new Ht(i,!1),s=new r,a=new Vt(s);for(let c=o.curr;null!==c;c=o.next())$t(a,e(c),0);Kt(a);const l=k(i);return L(s,l),s.toUint8Array()},Zt=t=>Jt(t,p.id,z,H);class Qt{constructor(t,e){this.target=t,this.currentTarget=t,this.transaction=e,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=te(this.currentTarget,this.target))}deletes(t){return T(this.transaction.deleteSet,t.id)}get keys(){if(null===this._keys){const t=new Map,e=this.target,n=this.transaction.changed.get(e);n.forEach((n=>{if(null!==n){const r=e._map.get(n);let o,s;if(this.adds(r)){let t=r.left;while(null!==t&&this.adds(t))t=t.left;if(this.deletes(r)){if(null===t||!this.deletes(t))return;o="delete",s=i.Z$(t.content.getContent())}else null!==t&&this.deletes(t)?(o="update",s=i.Z$(t.content.getContent())):(o="add",s=void 0)}else{if(!this.deletes(r))return;o="delete",s=i.Z$(r.content.getContent())}t.set(n,{action:o,oldValue:s})}})),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(null===t){const e=this.target,n=m.Ue(),r=m.Ue(),i=[];t={added:n,deleted:r,delta:i,keys:this.keys};const o=this.transaction.changed.get(e);if(o.has(null)){let t=null;const o=()=>{t&&i.push(t)};for(let i=e._start;null!==i;i=i.right)i.deleted?this.deletes(i)&&!this.adds(i)&&(null!==t&&void 0!==t.delete||(o(),t={delete:0}),t.delete+=i.length,r.add(i)):this.adds(i)?(null!==t&&void 0!==t.insert||(o(),t={insert:[]}),t.insert=t.insert.concat(i.content.getContent()),n.add(i)):(null!==t&&void 0!==t.retain||(o(),t={retain:0}),t.retain+=i.length);null!==t&&void 0===t.retain&&o()}this._changes=t}return t}}const te=(t,e)=>{const n=[];while(null!==e._item&&e!==t){if(null!==e._item.parentSub)n.unshift(e._item.parentSub);else{let t=0,r=e._item.parent._start;while(r!==e._item&&null!==r)r.deleted||t++,r=r.right;n.unshift(t)}e=e._item.parent}return n},ee=80;let ne=0;class re{constructor(t,e){t.marker=!0,this.p=t,this.index=e,this.timestamp=ne++}}const ie=t=>{t.timestamp=ne++},oe=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=ne++},se=(t,e,n)=>{if(t.length>=ee){const r=t.reduce(((t,e)=>t.timestamp<e.timestamp?t:e));return oe(r,e,n),r}{const r=new re(e,n);return t.push(r),r}},ae=(t,e)=>{if(null===t._start||0===e||null===t._searchMarker)return null;const n=0===t._searchMarker.length?null:t._searchMarker.reduce(((t,n)=>o.Wn(e-t.index)<o.Wn(e-n.index)?t:n));let r=t._start,i=0;null!==n&&(r=n.p,i=n.index,ie(n));while(null!==r.right&&i<e){if(!r.deleted&&r.countable){if(e<i+r.length)break;i+=r.length}r=r.right}while(null!==r.left&&i>e)r=r.left,!r.deleted&&r.countable&&(i-=r.length);while(null!==r.left&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return null!==n&&o.Wn(n.index-i)<r.parent.length/ee?(oe(n,r,i),n):se(t._searchMarker,r,i)},ce=(t,e,n)=>{for(let r=t.length-1;r>=0;r--){const i=t[r];if(n>0){let e=i.p;e.marker=!1;while(e&&(e.deleted||!e.countable))e=e.left,e&&!e.deleted&&e.countable&&(i.index-=e.length);if(null===e||!0===e.marker){t.splice(r,1);continue}i.p=e,e.marker=!0}(e<i.index||n>0&&e===i.index)&&(i.index=o.Fp(e,i.index+n))}},le=(t,e,n)=>{const r=t,i=e.changedParentTypes;while(1){if(s.Yu(i,t,(()=>[])).push(n),null===t._item)break;t=t._item.parent}dt(r._eH,n,e)};class ue{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=lt(),this._dEH=lt(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,e){this.doc=t,this._item=e}_copy(){throw d.Nw()}clone(){throw d.Nw()}_write(t){}get _first(){let t=this._start;while(null!==t&&t.deleted)t=t.right;return t}_callObserver(t,e){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){ut(this._eH,t)}observeDeep(t){ut(this._dEH,t)}unobserve(t){ht(this._eH,t)}unobserveDeep(t){ht(this._dEH,t)}toJSON(){}}const he=(t,e,n)=>{e<0&&(e=t._length+e),n<0&&(n=t._length+n);let r=n-e;const i=[];let o=t._start;while(null!==o&&r>0){if(o.countable&&!o.deleted){const t=o.content.getContent();if(t.length<=e)e-=t.length;else{for(let n=e;n<t.length&&r>0;n++)i.push(t[n]),r--;e=0}}o=o.right}return i},de=t=>{const e=[];let n=t._start;while(null!==n){if(n.countable&&!n.deleted){const t=n.content.getContent();for(let n=0;n<t.length;n++)e.push(t[n])}n=n.right}return e},fe=(t,e)=>{let n=0,r=t._start;while(null!==r){if(r.countable&&!r.deleted){const i=r.content.getContent();for(let r=0;r<i.length;r++)e(i[r],n++,t)}r=r.right}},pe=(t,e)=>{const n=[];return fe(t,((r,i)=>{n.push(e(r,i,t))})),n},me=t=>{let e=t._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(null===n){while(null!==e&&e.deleted)e=e.right;if(null===e)return{done:!0,value:void 0};n=e.content.getContent(),r=0,e=e.right}const t=n[r++];return n.length<=r&&(n=null),{done:!1,value:t}}}},ge=(t,e)=>{const n=ae(t,e);let r=t._start;for(null!==n&&(r=n.p,e-=n.index);null!==r;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},ve=(t,e,n,r)=>{let i=n;const o=t.doc,s=o.clientID,a=o.store,c=null===n?e._start:n.right;let l=[];const u=()=>{l.length>0&&(i=new zn(mt(s,Et(a,s)),i,i&&i.lastId,c,c&&c.id,e,null,new Mn(l)),i.integrate(t,0),l=[])};r.forEach((n=>{if(null===n)l.push(n);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:l.push(n);break;default:switch(u(),n.constructor){case Uint8Array:case ArrayBuffer:i=new zn(mt(s,Et(a,s)),i,i&&i.lastId,c,c&&c.id,e,null,new dn(new Uint8Array(n))),i.integrate(t,0);break;case N:i=new zn(mt(s,Et(a,s)),i,i&&i.lastId,c,c&&c.id,e,null,new vn(n)),i.integrate(t,0);break;default:if(!(n instanceof ue))throw new Error("Unexpected content type in insert operation");i=new zn(mt(s,Et(a,s)),i,i&&i.lastId,c,c&&c.id,e,null,new Un(n)),i.integrate(t,0)}}})),u()},_e=d.Ue("Length exceeded!"),ye=(t,e,n,r)=>{if(n>e._length)throw _e;if(0===n)return e._searchMarker&&ce(e._searchMarker,n,r.length),ve(t,e,null,r);const i=n,o=ae(e,n);let s=e._start;for(null!==o&&(s=o.p,n-=o.index,0===n&&(s=s.prev,n+=s&&s.countable&&!s.deleted?s.length:0));null!==s;s=s.right)if(!s.deleted&&s.countable){if(n<=s.length){n<s.length&&Rt(t,mt(s.id.client,s.id.clock+n));break}n-=s.length}return e._searchMarker&&ce(e._searchMarker,i,r.length),ve(t,e,s,r)},be=(t,e,n)=>{const r=(e._searchMarker||[]).reduce(((t,e)=>e.index>t.index?e:t),{index:0,p:e._start});let i=r.p;if(i)while(i.right)i=i.right;return ve(t,e,i,n)},we=(t,e,n,r)=>{if(0===r)return;const i=n,o=r,s=ae(e,n);let a=e._start;for(null!==s&&(a=s.p,n-=s.index);null!==a&&n>0;a=a.right)!a.deleted&&a.countable&&(n<a.length&&Rt(t,mt(a.id.client,a.id.clock+n)),n-=a.length);while(r>0&&null!==a)a.deleted||(r<a.length&&Rt(t,mt(a.id.client,a.id.clock+r)),a.delete(t),r-=a.length),a=a.right;if(r>0)throw _e;e._searchMarker&&ce(e._searchMarker,i,-o+r)},xe=(t,e,n)=>{const r=e._map.get(n);void 0!==r&&r.delete(t)},Ee=(t,e,n,r)=>{const i=e._map.get(n)||null,o=t.doc,s=o.clientID;let a;if(null==r)a=new Mn([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:a=new Mn([r]);break;case Uint8Array:a=new dn(r);break;case N:a=new vn(r);break;default:if(!(r instanceof ue))throw new Error("Unexpected content type");a=new Un(r)}new zn(mt(s,Et(o.store,s)),i,i&&i.lastId,null,null,e,n,a).integrate(t,0)},Se=(t,e)=>{const n=t._map.get(e);return void 0===n||n.deleted?void 0:n.content.getContent()[n.length-1]},Me=t=>{const e={};return t._map.forEach(((t,n)=>{t.deleted||(e[n]=t.content.getContent()[t.length-1])})),e},Te=(t,e)=>{const n=t._map.get(e);return void 0!==n&&!n.deleted},Ae=t=>y(t.entries(),(t=>!t[1].deleted));class Ce extends Qt{constructor(t,e){super(t,e),this._transaction=e}}class Re extends ue{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){const e=new Re;return e.push(t),e}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Re}clone(){const t=new Re;return t.insert(0,this.toArray().map((t=>t instanceof ue?t.clone():t))),t}get length(){return null===this._prelimContent?this._length:this._prelimContent.length}_callObserver(t,e){super._callObserver(t,e),le(this,t,new Ce(this,t))}insert(t,e){null!==this.doc?zt(this.doc,(n=>{ye(n,this,t,e)})):this._prelimContent.splice(t,0,...e)}push(t){null!==this.doc?zt(this.doc,(e=>{be(e,this,t)})):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,e=1){null!==this.doc?zt(this.doc,(n=>{we(n,this,t,e)})):this._prelimContent.splice(t,e)}get(t){return ge(this,t)}toArray(){return de(this)}slice(t=0,e=this.length){return he(this,t,e)}toJSON(){return this.map((t=>t instanceof ue?t.toJSON():t))}map(t){return pe(this,t)}forEach(t){fe(this,t)}[Symbol.iterator](){return me(this)}_write(t){t.writeTypeRef(Pn)}}const Pe=t=>new Re;class Oe extends Qt{constructor(t,e,n){super(t,e),this.keysChanged=n}}class Le extends ue{constructor(t){super(),this._prelimContent=null,this._prelimContent=void 0===t?new Map:new Map(t)}_integrate(t,e){super._integrate(t,e),this._prelimContent.forEach(((t,e)=>{this.set(e,t)})),this._prelimContent=null}_copy(){return new Le}clone(){const t=new Le;return this.forEach(((e,n)=>{t.set(n,e instanceof ue?e.clone():e)})),t}_callObserver(t,e){le(this,t,new Oe(this,t,e))}toJSON(){const t={};return this._map.forEach(((e,n)=>{if(!e.deleted){const r=e.content.getContent()[e.length-1];t[n]=r instanceof ue?r.toJSON():r}})),t}get size(){return[...Ae(this._map)].length}keys(){return b(Ae(this._map),(t=>t[0]))}values(){return b(Ae(this._map),(t=>t[1].content.getContent()[t[1].length-1]))}entries(){return b(Ae(this._map),(t=>[t[0],t[1].content.getContent()[t[1].length-1]]))}forEach(t){this._map.forEach(((e,n)=>{e.deleted||t(e.content.getContent()[e.length-1],n,this)}))}[Symbol.iterator](){return this.entries()}delete(t){null!==this.doc?zt(this.doc,(e=>{xe(e,this,t)})):this._prelimContent.delete(t)}set(t,e){return null!==this.doc?zt(this.doc,(n=>{Ee(n,this,t,e)})):this._prelimContent.set(t,e),e}get(t){return Se(this,t)}has(t){return Te(this,t)}clear(){null!==this.doc?zt(this.doc,(t=>{this.forEach((function(e,n,r){xe(t,r,n)}))})):this._prelimContent.clear()}_write(t){t.writeTypeRef(On)}}const ke=t=>new Le,Ie=(t,e)=>t===e||"object"===typeof t&&"object"===typeof e&&t&&e&&w.$m(t,e);class De{constructor(t,e,n,r){this.left=t,this.right=e,this.index=n,this.currentAttributes=r}forward(){switch(null===this.right&&d.zR(),this.right.content.constructor){case wn:this.right.deleted||Be(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const Ne=(t,e,n)=>{while(null!==e.right&&n>0){switch(e.right.content.constructor){case wn:e.right.deleted||Be(e.currentAttributes,e.right.content);break;default:e.right.deleted||(n<e.right.length&&Rt(t,mt(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},Ue=(t,e,n)=>{const r=new Map,i=ae(e,n);if(i){const e=new De(i.p.left,i.p,i.index,r);return Ne(t,e,n-i.index)}{const i=new De(null,e._start,0,r);return Ne(t,i,n)}},Fe=(t,e,n,r)=>{while(null!==n.right&&(!0===n.right.deleted||n.right.content.constructor===wn&&Ie(r.get(n.right.content.key),n.right.content.value)))n.right.deleted||r.delete(n.right.content.key),n.forward();const i=t.doc,o=i.clientID;r.forEach(((r,s)=>{const a=n.left,c=n.right,l=new zn(mt(o,Et(i.store,o)),a,a&&a.lastId,c,c&&c.id,e,null,new wn(s,r));l.integrate(t,0),n.right=l,n.forward()}))},Be=(t,e)=>{const{key:n,value:r}=e;null===r?t.delete(n):t.set(n,r)},ze=(t,e)=>{while(1){if(null===t.right)break;if(!(t.right.deleted||t.right.content.constructor===wn&&Ie(e[t.right.content.key]||null,t.right.content.value)))break;t.forward()}},je=(t,e,n,r)=>{const i=t.doc,o=i.clientID,s=new Map;for(const a in r){const c=r[a],l=n.currentAttributes.get(a)||null;if(!Ie(l,c)){s.set(a,l);const{left:r,right:u}=n;n.right=new zn(mt(o,Et(i.store,o)),r,r&&r.lastId,u,u&&u.id,e,null,new wn(a,c)),n.right.integrate(t,0),n.forward()}}return s},He=(t,e,n,r,i)=>{n.currentAttributes.forEach(((t,e)=>{void 0===i[e]&&(i[e]=null)}));const o=t.doc,s=o.clientID;ze(n,i);const a=je(t,e,n,i),c=r.constructor===String?new An(r):r instanceof ue?new Un(r):new yn(r);let{left:l,right:u,index:h}=n;e._searchMarker&&ce(e._searchMarker,n.index,c.getLength()),u=new zn(mt(s,Et(o.store,s)),l,l&&l.lastId,u,u&&u.id,e,null,c),u.integrate(t,0),n.right=u,n.index=h,n.forward(),Fe(t,e,n,a)},Ve=(t,e,n,r,i)=>{const o=t.doc,s=o.clientID;ze(n,i);const a=je(t,e,n,i);t:while(null!==n.right&&(r>0||a.size>0&&(n.right.deleted||n.right.content.constructor===wn))){if(!n.right.deleted)switch(n.right.content.constructor){case wn:{const{key:e,value:o}=n.right.content,s=i[e];if(void 0!==s){if(Ie(s,o))a.delete(e);else{if(0===r)break t;a.set(e,o)}n.right.delete(t)}else n.currentAttributes.set(e,o);break}default:r<n.right.length&&Rt(t,mt(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let i="";for(;r>0;r--)i+="\n";n.right=new zn(mt(s,Et(o.store,s)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new An(i)),n.right.integrate(t,0),n.forward()}Fe(t,e,n,a)},Ge=(t,e,n,r,i)=>{let o=e;const a=s.Ue();while(o&&(!o.countable||o.deleted)){if(!o.deleted&&o.content.constructor===wn){const t=o.content;a.set(t.key,t)}o=o.right}let c=0,l=!1;while(e!==o){if(n===e&&(l=!0),!e.deleted){const n=e.content;switch(n.constructor){case wn:{const{key:o,value:s}=n,u=r.get(o)||null;a.get(o)===n&&u!==s||(e.delete(t),c++,l||(i.get(o)||null)!==s||u===s||(null===u?i.delete(o):i.set(o,u))),l||e.deleted||Be(i,n);break}}}e=e.right}return c},We=(t,e)=>{while(e&&e.right&&(e.right.deleted||!e.right.countable))e=e.right;const n=new Set;while(e&&(e.deleted||!e.countable)){if(!e.deleted&&e.content.constructor===wn){const r=e.content.key;n.has(r)?e.delete(t):n.add(r)}e=e.left}},qe=t=>{let e=0;return zt(t.doc,(n=>{let r=t._start,i=t._start,o=s.Ue();const a=s.JG(o);while(i){if(!1===i.deleted)switch(i.content.constructor){case wn:Be(a,i.content);break;default:e+=Ge(n,r,i,o,a),o=s.JG(a),r=i;break}i=i.right}})),e},Xe=t=>{const e=new Set,n=t.doc;for(const[r,i]of t.afterState.entries()){const o=t.beforeState.get(r)||0;i!==o&&Lt(t,n.store.clients.get(r),o,i,(t=>{t.deleted||t.content.constructor!==wn||t.constructor===hn||e.add(t.parent)}))}zt(n,(n=>{S(t,t.deleteSet,(t=>{if(t instanceof hn||e.has(t.parent))return;const r=t.parent;t.content.constructor===wn?e.add(r):We(n,t)}));for(const t of e)qe(t)}))},Ye=(t,e,n)=>{const r=n,i=s.JG(e.currentAttributes),o=e.right;while(n>0&&null!==e.right){if(!1===e.right.deleted)switch(e.right.content.constructor){case Un:case yn:case An:n<e.right.length&&Rt(t,mt(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}o&&Ge(t,o,e.right,i,e.currentAttributes);const a=(e.left||e.right).parent;return a._searchMarker&&ce(a._searchMarker,e.index,-r+n),e};class $e extends Qt{constructor(t,e,n){super(t,e),this.childListChanged=!1,this.keysChanged=new Set,n.forEach((t=>{null===t?this.childListChanged=!0:this.keysChanged.add(t)}))}get changes(){if(null===this._changes){const t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(null===this._delta){const t=this.target.doc,e=[];zt(t,(t=>{const n=new Map,r=new Map;let i=this.target._start,o=null;const s={};let a="",c=0,l=0;const u=()=>{if(null!==o){let t=null;switch(o){case"delete":l>0&&(t={delete:l}),l=0;break;case"insert":("object"===typeof a||a.length>0)&&(t={insert:a},n.size>0&&(t.attributes={},n.forEach(((e,n)=>{null!==e&&(t.attributes[n]=e)})))),a="";break;case"retain":c>0&&(t={retain:c},w.xb(s)||(t.attributes=w.f0({},s))),c=0;break}t&&e.push(t),o=null}};while(null!==i){switch(i.content.constructor){case Un:case yn:this.adds(i)?this.deletes(i)||(u(),o="insert",a=i.content.getContent()[0],u()):this.deletes(i)?("delete"!==o&&(u(),o="delete"),l+=1):i.deleted||("retain"!==o&&(u(),o="retain"),c+=1);break;case An:this.adds(i)?this.deletes(i)||("insert"!==o&&(u(),o="insert"),a+=i.content.str):this.deletes(i)?("delete"!==o&&(u(),o="delete"),l+=i.length):i.deleted||("retain"!==o&&(u(),o="retain"),c+=i.length);break;case wn:{const{key:e,value:a}=i.content;if(this.adds(i)){if(!this.deletes(i)){const c=n.get(e)||null;Ie(c,a)?null!==a&&i.delete(t):("retain"===o&&u(),Ie(a,r.get(e)||null)?delete s[e]:s[e]=a)}}else if(this.deletes(i)){r.set(e,a);const t=n.get(e)||null;Ie(t,a)||("retain"===o&&u(),s[e]=t)}else if(!i.deleted){r.set(e,a);const n=s[e];void 0!==n&&(Ie(n,a)?null!==n&&i.delete(t):("retain"===o&&u(),null===a?delete s[e]:s[e]=a))}i.deleted||("insert"===o&&u(),Be(n,i.content));break}}i=i.right}u();while(e.length>0){const t=e[e.length-1];if(void 0===t.retain||void 0!==t.attributes)break;e.pop()}})),this._delta=e}return this._delta}}class Ke extends ue{constructor(t){super(),this._pending=void 0!==t?[()=>this.insert(0,t)]:[],this._searchMarker=[]}get length(){return this._length}_integrate(t,e){super._integrate(t,e);try{this._pending.forEach((t=>t()))}catch(n){console.error(n)}this._pending=null}_copy(){return new Ke}clone(){const t=new Ke;return t.applyDelta(this.toDelta()),t}_callObserver(t,e){super._callObserver(t,e);const n=new $e(this,t,e);le(this,t,n),t.local||(t._needFormattingCleanup=!0)}toString(){let t="",e=this._start;while(null!==e)!e.deleted&&e.countable&&e.content.constructor===An&&(t+=e.content.str),e=e.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:e=!0}={}){null!==this.doc?zt(this.doc,(n=>{const r=new De(null,this._start,0,new Map);for(let i=0;i<t.length;i++){const o=t[i];if(void 0!==o.insert){const s=e||"string"!==typeof o.insert||i!==t.length-1||null!==r.right||"\n"!==o.insert.slice(-1)?o.insert:o.insert.slice(0,-1);("string"!==typeof s||s.length>0)&&He(n,this,r,s,o.attributes||{})}else void 0!==o.retain?Ve(n,this,r,o.retain,o.attributes||{}):void 0!==o.delete&&Ye(n,r,o.delete)}})):this._pending.push((()=>this.applyDelta(t)))}toDelta(t,e,n){const r=[],i=new Map,o=this.doc;let s="",a=this._start;function c(){if(s.length>0){const t={};let e=!1;i.forEach(((n,r)=>{e=!0,t[r]=n}));const n={insert:s};e&&(n.attributes=t),r.push(n),s=""}}const l=()=>{while(null!==a){if(yt(a,t)||void 0!==e&&yt(a,e))switch(a.content.constructor){case An:{const r=i.get("ychange");void 0===t||yt(a,t)?void 0===e||yt(a,e)?void 0!==r&&(c(),i.delete("ychange")):void 0!==r&&r.user===a.id.client&&"added"===r.type||(c(),i.set("ychange",n?n("added",a.id):{type:"added"})):void 0!==r&&r.user===a.id.client&&"removed"===r.type||(c(),i.set("ychange",n?n("removed",a.id):{type:"removed"})),s+=a.content.str;break}case Un:case yn:{c();const t={insert:a.content.getContent()[0]};if(i.size>0){const e={};t.attributes=e,i.forEach(((t,n)=>{e[n]=t}))}r.push(t);break}case wn:yt(a,t)&&(c(),Be(i,a.content));break}a=a.right}c()};return t||e?zt(o,(n=>{t&&bt(n,t),e&&bt(n,e),l()}),"cleanup"):l(),r}insert(t,e,n){if(e.length<=0)return;const r=this.doc;null!==r?zt(r,(r=>{const i=Ue(r,this,t);n||(n={},i.currentAttributes.forEach(((t,e)=>{n[e]=t}))),He(r,this,i,e,n)})):this._pending.push((()=>this.insert(t,e,n)))}insertEmbed(t,e,n={}){const r=this.doc;null!==r?zt(r,(r=>{const i=Ue(r,this,t);He(r,this,i,e,n)})):this._pending.push((()=>this.insertEmbed(t,e,n)))}delete(t,e){if(0===e)return;const n=this.doc;null!==n?zt(n,(n=>{Ye(n,Ue(n,this,t),e)})):this._pending.push((()=>this.delete(t,e)))}format(t,e,n){if(0===e)return;const r=this.doc;null!==r?zt(r,(r=>{const i=Ue(r,this,t);null!==i.right&&Ve(r,this,i,e,n)})):this._pending.push((()=>this.format(t,e,n)))}removeAttribute(t){null!==this.doc?zt(this.doc,(e=>{xe(e,this,t)})):this._pending.push((()=>this.removeAttribute(t)))}setAttribute(t,e){null!==this.doc?zt(this.doc,(n=>{Ee(n,this,t,e)})):this._pending.push((()=>this.setAttribute(t,e)))}getAttribute(t){return Se(this,t)}getAttributes(){return Me(this)}_write(t){t.writeTypeRef(Ln)}}const Je=t=>new Ke;class Ze{constructor(t,e=(()=>!0)){this._filter=e,this._root=t,this._currentNode=t._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let t=this._currentNode,e=t&&t.content&&t.content.type;if(null!==t&&(!this._firstCall||t.deleted||!this._filter(e)))do{if(e=t.content.type,t.deleted||e.constructor!==en&&e.constructor!==Qe||null===e._start)while(null!==t){if(null!==t.right){t=t.right;break}t=t.parent===this._root?null:t.parent._item}else t=e._start}while(null!==t&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,null===t?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}class Qe extends ue{constructor(){super(),this._prelimContent=[]}get firstChild(){const t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Qe}clone(){const t=new Qe;return t.insert(0,this.toArray().map((t=>t instanceof ue?t.clone():t))),t}get length(){return null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(t){return new Ze(this,t)}querySelector(t){t=t.toUpperCase();const e=new Ze(this,(e=>e.nodeName&&e.nodeName.toUpperCase()===t)),n=e.next();return n.done?null:n.value}querySelectorAll(t){return t=t.toUpperCase(),i.Dp(new Ze(this,(e=>e.nodeName&&e.nodeName.toUpperCase()===t)))}_callObserver(t,e){le(this,t,new rn(this,e,t))}toString(){return pe(this,(t=>t.toString())).join("")}toJSON(){return this.toString()}toDOM(t=document,e={},n){const r=t.createDocumentFragment();return void 0!==n&&n._createAssociation(r,this),fe(this,(i=>{r.insertBefore(i.toDOM(t,e,n),null)})),r}insert(t,e){null!==this.doc?zt(this.doc,(n=>{ye(n,this,t,e)})):this._prelimContent.splice(t,0,...e)}insertAfter(t,e){if(null!==this.doc)zt(this.doc,(n=>{const r=t&&t instanceof ue?t._item:t;ve(n,this,r,e)}));else{const n=this._prelimContent,r=null===t?0:n.findIndex((e=>e===t))+1;if(0===r&&null!==t)throw d.Ue("Reference item not found");n.splice(r,0,...e)}}delete(t,e=1){null!==this.doc?zt(this.doc,(n=>{we(n,this,t,e)})):this._prelimContent.splice(t,e)}toArray(){return de(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return ge(this,t)}slice(t=0,e=this.length){return he(this,t,e)}forEach(t){fe(this,t)}_write(t){t.writeTypeRef(In)}}const tn=t=>new Qe;class en extends Qe{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,e){super._integrate(t,e),this._prelimAttrs.forEach(((t,e)=>{this.setAttribute(e,t)})),this._prelimAttrs=null}_copy(){return new en(this.nodeName)}clone(){const t=new en(this.nodeName),e=this.getAttributes();return w.Ed(e,((e,n)=>{"string"===typeof e&&t.setAttribute(n,e)})),t.insert(0,this.toArray().map((t=>t instanceof ue?t.clone():t))),t}toString(){const t=this.getAttributes(),e=[],n=[];for(const s in t)n.push(s);n.sort();const r=n.length;for(let s=0;s<r;s++){const r=n[s];e.push(r+'="'+t[r]+'"')}const i=this.nodeName.toLocaleLowerCase(),o=e.length>0?" "+e.join(" "):"";return`<${i}${o}>${super.toString()}</${i}>`}removeAttribute(t){null!==this.doc?zt(this.doc,(e=>{xe(e,this,t)})):this._prelimAttrs.delete(t)}setAttribute(t,e){null!==this.doc?zt(this.doc,(n=>{Ee(n,this,t,e)})):this._prelimAttrs.set(t,e)}getAttribute(t){return Se(this,t)}hasAttribute(t){return Te(this,t)}getAttributes(){return Me(this)}toDOM(t=document,e={},n){const r=t.createElement(this.nodeName),i=this.getAttributes();for(const o in i){const t=i[o];"string"===typeof t&&r.setAttribute(o,t)}return fe(this,(i=>{r.appendChild(i.toDOM(t,e,n))})),void 0!==n&&n._createAssociation(r,this),r}_write(t){t.writeTypeRef(kn),t.writeKey(this.nodeName)}}const nn=t=>new en(t.readKey());class rn extends Qt{constructor(t,e,n){super(t,n),this.childListChanged=!1,this.attributesChanged=new Set,e.forEach((t=>{null===t?this.childListChanged=!0:this.attributesChanged.add(t)}))}}class on extends Le{constructor(t){super(),this.hookName=t}_copy(){return new on(this.hookName)}clone(){const t=new on(this.hookName);return this.forEach(((e,n)=>{t.set(n,e)})),t}toDOM(t=document,e={},n){const r=e[this.hookName];let i;return i=void 0!==r?r.createDom(this):document.createElement(this.hookName),i.setAttribute("data-yjs-hook",this.hookName),void 0!==n&&n._createAssociation(i,this),i}_write(t){t.writeTypeRef(Dn),t.writeKey(this.hookName)}}const sn=t=>new on(t.readKey());class an extends Ke{get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new an}clone(){const t=new an;return t.applyDelta(this.toDelta()),t}toDOM(t=document,e,n){const r=t.createTextNode(this.toString());return void 0!==n&&n._createAssociation(r,this),r}toString(){return this.toDelta().map((t=>{const e=[];for(const r in t.attributes){const n=[];for(const e in t.attributes[r])n.push({key:e,value:t.attributes[r][e]});n.sort(((t,e)=>t.key<e.key?-1:1)),e.push({nodeName:r,attrs:n})}e.sort(((t,e)=>t.nodeName<e.nodeName?-1:1));let n="";for(let r=0;r<e.length;r++){const t=e[r];n+=`<${t.nodeName}`;for(let e=0;e<t.attrs.length;e++){const r=t.attrs[e];n+=` ${r.key}="${r.value}"`}n+=">"}n+=t.insert;for(let r=e.length-1;r>=0;r--)n+=`</${e[r].nodeName}>`;return n})).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(Nn)}}const cn=t=>new an;class ln{constructor(t,e){this.id=t,this.length=e}get deleted(){throw d.Nw()}mergeWith(t){return!1}write(t,e,n){throw d.Nw()}integrate(t,e){throw d.Nw()}}const un=0;class hn extends ln{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor===t.constructor&&(this.length+=t.length,!0)}integrate(t,e){e>0&&(this.id.clock+=e,this.length-=e),St(t.doc.store,this)}write(t,e){t.writeInfo(un),t.writeLen(this.length-e)}getMissing(t,e){return null}}class dn{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new dn(this.content)}splice(t){throw d.Nw()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeBuf(this.content)}getRef(){return 3}}const fn=t=>new dn(t.readBuf());class pn{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new pn(this.len)}splice(t){const e=new pn(this.len-t);return this.len=t,e}mergeWith(t){return this.len+=t.len,!0}integrate(t,e){R(t.deleteSet,e.id.client,e.id.clock,this.len),e.markDeleted()}delete(t){}gc(t){}write(t,e){t.writeLen(this.len-e)}getRef(){return 1}}const mn=t=>new pn(t.readLen()),gn=(t,e)=>new N({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class vn{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;const e={};this.opts=e,t.gc||(e.gc=!1),t.autoLoad&&(e.autoLoad=!0),null!==t.meta&&(e.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new vn(gn(this.doc.guid,this.opts))}splice(t){throw d.Nw()}mergeWith(t){return!1}integrate(t,e){this.doc._item=e,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,e){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}}const _n=t=>new vn(gn(t.readString(),t.readAny()));class yn{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new yn(this.embed)}splice(t){throw d.Nw()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeJSON(this.embed)}getRef(){return 5}}const bn=t=>new yn(t.readJSON());class wn{constructor(t,e){this.key=t,this.value=e}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new wn(this.key,this.value)}splice(t){throw d.Nw()}mergeWith(t){return!1}integrate(t,e){e.parent._searchMarker=null}delete(t){}gc(t){}write(t,e){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}}const xn=t=>new wn(t.readKey(),t.readJSON());class En{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new En(this.arr)}splice(t){const e=new En(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){const n=this.arr.length;t.writeLen(n-e);for(let r=e;r<n;r++){const e=this.arr[r];t.writeString(void 0===e?"undefined":JSON.stringify(e))}}getRef(){return 2}}const Sn=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++){const e=t.readString();"undefined"===e?n.push(void 0):n.push(JSON.parse(e))}return new En(n)};class Mn{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Mn(this.arr)}splice(t){const e=new Mn(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){const n=this.arr.length;t.writeLen(n-e);for(let r=e;r<n;r++){const e=this.arr[r];t.writeAny(e)}}getRef(){return 8}}const Tn=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++)n.push(t.readAny());return new Mn(n)};class An{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new An(this.str)}splice(t){const e=new An(this.str.slice(t));this.str=this.str.slice(0,t);const n=this.str.charCodeAt(t-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,t-1)+"�",e.str="�"+e.str.slice(1)),e}mergeWith(t){return this.str+=t.str,!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeString(0===e?this.str:this.str.slice(e))}getRef(){return 4}}const Cn=t=>new An(t.readString()),Rn=[Pe,ke,Je,nn,tn,sn,cn],Pn=0,On=1,Ln=2,kn=3,In=4,Dn=5,Nn=6;class Un{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Un(this.type._copy())}splice(t){throw d.Nw()}mergeWith(t){return!1}integrate(t,e){this.type._integrate(t.doc,e)}delete(t){let e=this.type._start;while(null!==e)e.deleted?t._mergeStructs.push(e):e.delete(t),e=e.right;this.type._map.forEach((e=>{e.deleted?t._mergeStructs.push(e):e.delete(t)})),t.changed.delete(this.type)}gc(t){let e=this.type._start;while(null!==e)e.gc(t,!0),e=e.right;this.type._start=null,this.type._map.forEach((e=>{while(null!==e)e.gc(t,!0),e=e.left})),this.type._map=new Map}write(t,e){this.type._write(t)}getRef(){return 7}}const Fn=t=>new Un(Rn[t.readTypeRef()](t)),Bn=(t,e,n)=>{const{client:r,clock:i}=e.id,o=new zn(mt(r,i+n),e,mt(r,i+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&o.markDeleted(),e.keep&&(o.keep=!0),null!==e.redone&&(o.redone=mt(e.redone.client,e.redone.clock+n)),e.right=o,null!==o.right&&(o.right.left=o),t._mergeStructs.push(o),null!==o.parentSub&&null===o.right&&o.parent._map.set(o.parentSub,o),e.length=n,o};class zn extends ln{constructor(t,e,n,r,i,o,s,a){super(t,a.getLength()),this.origin=n,this.left=e,this.right=r,this.rightOrigin=i,this.parent=o,this.parentSub=s,this.redone=null,this.content=a,this.info=this.content.isCountable()?f.Qn:0}set marker(t){(this.info&f.Ko)>0!==t&&(this.info^=f.Ko)}get marker(){return(this.info&f.Ko)>0}get keep(){return(this.info&f.Vw)>0}set keep(t){this.keep!==t&&(this.info^=f.Vw)}get countable(){return(this.info&f.Qn)>0}get deleted(){return(this.info&f.CY)>0}set deleted(t){this.deleted!==t&&(this.info^=f.CY)}markDeleted(){this.info|=f.CY}getMissing(t,e){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Et(e,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Et(e,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===ft&&this.id.client!==this.parent.client&&this.parent.clock>=Et(e,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Pt(t,e,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Rt(t,this.rightOrigin),this.rightOrigin=this.right.id),(this.left&&this.left.constructor===hn||this.right&&this.right.constructor===hn)&&(this.parent=null),this.parent){if(this.parent.constructor===ft){const t=At(e,this.parent);t.constructor===hn?this.parent=null:this.parent=t.content.type}}else this.left&&this.left.constructor===zn&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===zn&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(t,e){if(e>0&&(this.id.clock+=e,this.left=Pt(t,t.doc.store,mt(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(e),this.length-=e),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let e,n=this.left;if(null!==n)e=n.right;else if(null!==this.parentSub){e=this.parent._map.get(this.parentSub)||null;while(null!==e&&null!==e.left)e=e.left}else e=this.parent._start;const r=new Set,i=new Set;while(null!==e&&e!==this.right){if(i.add(e),r.add(e),pt(this.origin,e.origin)){if(e.id.client<this.id.client)n=e,r.clear();else if(pt(this.rightOrigin,e.rightOrigin))break}else{if(null===e.origin||!i.has(At(t.doc.store,e.origin)))break;r.has(At(t.doc.store,e.origin))||(n=e,r.clear())}e=e.right}this.left=n}if(null!==this.left){const t=this.left.right;this.right=t,this.left.right=this}else{let t;if(null!==this.parentSub){t=this.parent._map.get(this.parentSub)||null;while(null!==t&&null!==t.left)t=t.left}else t=this.parent._start,this.parent._start=this;this.right=t}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(t)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),St(t.doc.store,this),this.content.integrate(t,this),Dt(t,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(t)}else new hn(this.id,this.length).integrate(t,0)}get next(){let t=this.right;while(null!==t&&t.deleted)t=t.right;return t}get prev(){let t=this.left;while(null!==t&&t.deleted)t=t.left;return t}get lastId(){return 1===this.length?this.id:mt(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&pt(t.origin,this.lastId)&&this.right===t&&pt(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&null===this.redone&&null===t.redone&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){const e=this.parent._searchMarker;return e&&e.forEach((e=>{e.p===t&&(e.p=this,!this.deleted&&this.countable&&(e.index-=this.length))})),t.keep&&(this.keep=!0),this.right=t.right,null!==this.right&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){const e=this.parent;this.countable&&null===this.parentSub&&(e._length-=this.length),this.markDeleted(),R(t.deleteSet,this.id.client,this.id.clock,this.length),Dt(t,e,this.parentSub),this.content.delete(t)}}gc(t,e){if(!this.deleted)throw d.zR();this.content.gc(t),e?Ot(t,this,new hn(this.id,this.length)):this.content=new pn(this.length)}write(t,e){const n=e>0?mt(this.id.client,this.id.clock+e-1):this.origin,r=this.rightOrigin,i=this.parentSub,o=this.content.getRef()&f.kr|(null===n?0:f.x1)|(null===r?0:f.rc)|(null===i?0:f.cq);if(t.writeInfo(o),null!==n&&t.writeLeftID(n),null!==r&&t.writeRightID(r),null===n&&null===r){const e=this.parent;if(void 0!==e._item){const n=e._item;if(null===n){const n=gt(e);t.writeParentInfo(!0),t.writeString(n)}else t.writeParentInfo(!1),t.writeLeftID(n.id)}else e.constructor===String?(t.writeParentInfo(!0),t.writeString(e)):e.constructor===ft?(t.writeParentInfo(!1),t.writeLeftID(e)):d.zR();null!==i&&t.writeString(i)}this.content.write(t,e)}}const jn=(t,e)=>Hn[e&f.kr](t),Hn=[()=>{d.zR()},mn,Sn,fn,Cn,bn,xn,Fn,Tn,_n,()=>{d.zR()}],Vn=10;class Gn extends ln{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor===t.constructor&&(this.length+=t.length,!0)}integrate(t,e){d.zR()}write(t,e){t.writeInfo(Vn),a.uE(t.restEncoder,this.length-e)}getMissing(t,e){return null}}const Wn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{},qn="__ $YJS$ __";!0===Wn[qn]&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),Wn[qn]=!0}}]);
//# sourceMappingURL=chunk-vendors.6af40304.js.map